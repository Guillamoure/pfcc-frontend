{"version":3,"sources":["dice/d2.png","localhost.js","utils/cookies.js","reducer.js","store.js","utils/action_creator/popups.js","container/navbar.js","modals/tooltip.js","portal.js","components/hp_changes.js","fuf.js","utils/fetches.js","utils/action_creator/character.js","components/user_item_adjustment.js","components/armor_summary.js","components/weapon_summary.js","utils/action_creator/features.js","utils/distributers/status_conditions.js","utils/action_creator/websocket.js","utils/websocket/dm_item.js","utils/websocket/campaign.js","utils/fuf.js","utils/distributers/features.js","utils/calculations/feature_usage.js","components/modals/points.js","helper_functions/action_creator/popups.js","helper_functions/fuf.js","helper_functions/action_creator/features.js","helper_functions/action_creator/character.js","helper_functions/distributers/status_conditions.js","helper_functions/websocket/campaign.js","helper_functions/action_creator/websocket.js","helper_functions/distributers/features.js","helper_functions/fetches.js","helper_functions/calculations/feature_usage.js","components/modals/feature_usage_options.js","components/spell_description.js","utils/calculations/ability_scores.js","utils/calculations/round_actions.js","utils/calculations/spellcasting.js","components/modals/known_spell_manager.js","components/modals/prepared_spell_manager.js","helper_functions/distributers/character_info.js","components/modals/character_choice.js","helper_functions/calculations/ability_scores.js","helper_functions/calculations/round_actions.js","helper_functions/calculations/spellcasting.js","components/modals/spontaneous_casting.js","components/modals/klass_specialization.js","components/modals/bonus_spell_slot_manager.js","components/feat_description.js","components/modals/feat.js","utils/calculations/size.js","utils/calculations/creatures.js","utils/calculations/creature_features.js","components/creature_stat_block.js","utils/action_creator/additional_info.js","components/skill_description.js","components/modals/harrow.js","components/modals/item_description.js","components/modals/currency_manager.js","utils/action_creator/settings.js","themes.js","components/modals/settings.js","components/modals/familiar_description.js","components/modals/poison_description.js","components/modals/generic_description.js","components/modals/add_character_equipment.js","components/modals/summoned_creature_options.js","components/magic_item_summary.js","dice/d3.svg","dice/d4.svg","dice/d6.svg","dice/d8.svg","dice/d10.svg","dice/d12.svg","dice/d20.svg","dice/rolling-dice-cup.svg","components/modals/dice_roller.js","components/modals/potion_description.js","components/modals/scroll_description.js","components/modals/wand_description.js","modals/skeleton.js","components/modals/notifications.js","components/characters.js","components/settings/skillset.js","container/settings.js","components/campaigns.js","container/home.js","container/classes.js","container/races.js","container/skills.js","components/spell_card.js","container/spells_container.js","container/spells.js","utils/calculations/class.js","components/class_show/introduction.js","components/class_show/table.js","components/class_show/feature_form.js","components/class_show/feature.js","components/class_show/feature_list.js","components/class_form.js","components/class_skills_form.js","components/spells_form.js","components/effects/spellcasting.js","modals/classes/effect.js","container/class_show.js","components/class_show/feature_options.js","components/race_show/introduction.js","components/race_show/trait_form.js","components/race_show/trait.js","components/race_show/trait_list.js","components/race_form.js","container/race_show.js","components/skill_show/introduction.js","container/skill_show.js","components/character_forms/home.js","components/character_forms/race.js","components/character_forms/class_tile.js","components/character_show/tab.js","components/character_forms/class_tabs.js","utils/action_creator/classes.js","components/archetypes/archetype_feature.js","components/archetypes/archetype_show.js","container/class_archetypes.js","components/class_show/option_show.js","container/class_options.js","components/character_forms/class.js","components/character_forms/ability_scores.js","components/character_forms/details.js","utils/calculations/proficiencies.js","utils/calculations/skills.js","components/character_forms/skills.js","components/character_forms/character_creation_confirmation.js","components/character_forms/navbar.js","container/character_creation.js","dispatch.js","utils/calculations/character.js","utils/distributers/character.js","components/character_show/ability.js","components/character_show/ability_scores.js","components/character_show/character_name.js","helper_functions/calculations/saving_throws.js","components/character_show/saves.js","components/character_show/hp.js","utils/calculations/armor_class.js","components/character_show/ac.js","utils/calculations/attack_bonus.js","components/character_show/attack_bonus.js","components/character_show/details.js","components/character_show/skills.js","components/character_show/features.js","components/character_show/racial_traits.js","components/character_show/feats.js","components/character_show/traits.js","components/character_show/feature_traits.js","components/character_show/equipment_item.js","components/character_show/equipment.js","container/feature_tabs.js","container/allies_container.js","container/features_traits.js","container/action_tabs.js","components/actions/spellcasting.js","components/actions/abilities.js","components/actions/attacks.js","components/actions/basics/combat_maneuver.js","helper_functions/calculations/character.js","components/actions/basics/movement.js","components/actions/basics.js","components/actions/equipment/rings.js","components/actions/equipment/legendary.js","components/actions/equipment/weapons.js","components/actions/equipment/magic.js","components/actions/equipment/poisons.js","components/actions/equipment/armor.js","components/actions/equipment.js","container/actions.js","components/actions/misc.js","components/character_show/initiative.js","utils/distributers/new_turn.js","components/character_show/turn_actions.js","components/notes/note_form.js","components/notes/note.js","components/character_show/notes.js","container/details_tabs.js","container/details.js","components/character_show/campaign.js","components/allies_tab.js","components/character_show/allies.js","container/campaign_tabs.js","container/campaign.js","utils/notifications/character_choices.js","components/character_show/notification_door.js","utils/notifications/yellow_notification.js","utils/notifications/red_notification.js","components/character_show/points.js","modals/points.js","modals/performance.js","modals/rage.js","components/character_show/active.js","modals/frog.js","modals/command.js","modals/age.js","modals/curios.js","modals/poison.js","components/character_show/size.js","modals/augment.js","modals/metamagic.js","modals/handy.js","modals/debilitating.js","modals/ammo.js","modals/sasea.js","modals/aura.js","modals/mutagen.js","container/sidebar/attack.js","container/sidebar/skillset.js","container/sidebar/sidebar.js","modals/background_form.js","modals/character_form.js","modals/ability_form.js","container/notification_tabs.js","helper_functions/notifications/character_choices.js","components/HP.js","modals/notifications/creation.js","modals/notifications/notice.js","components/skill_ranks.js","components/spell_preparation_card.js","components/prepared_card.js","container/prepare_spells.js","modals/notifications/update.js","modals/notifications/rest.js","modals/notifications.js","modals/spell.js","modals/magic_item.js","modals/character_feature_modal.js","modals/weapon.js","components/mobile/tabs.js","container/character_show.js","container/campaign_show_tabs.js","components/campaign/items_manager/item_search.js","components/campaign/items_manager/potions_scrolls_wands_creator.js","components/campaign/items_manager/items_container.js","components/campaign/character.js","components/campaign/characters.js","components/campaign/set_date.js","components/campaign/ideas.js","components/campaign/creatures/creature_search.js","components/campaign/creatures/creature_container.js","components/campaign/encounters/encounter_search.js","utils/action_creator/current_user.js","components/campaign/encounters/new_encounter.js","helper_functions/action_creator/current_user.js","components/campaign/encounters/encounter_details.js","components/campaign/encounters/encounter_container.js","components/campaign/encounters/active_encounter_initiative.js","components/campaign/encounters/active_encounter.js","utils/action_creator/active_encounter.js","container/campaign_show.js","components/campaign/classes.js","components/campaign/races.js","components/campaign/calendar.js","components/campaign/setting.js","components/campaign/details.js","container/new_campaign.js","components/character_details/details_brief.js","components/character_details/ability_scores.js","dummy_data/character1.js","container/character_container.js","components/login.js","components/signup.js","components/skill_form.js","components/how-to-feature/name.js","components/how-to-feature/action.js","components/how-to-feature/attack_of_opportunity.js","components/how-to-feature/usage.js","components/how-to-feature/usage_options.js","components/how-to-feature/usage_spell_options.js","components/how-to-feature/skill_bonuses.js","components/how-to-feature/stat_bonuses.js","components/how-to-feature/container.js","components/how-to-feature/languages.js","components/how-to-feature/movement.js","components/how-to-feature/loading.js","components/how-to-feature/render_ruby.js","container/how_to_feature.js","App.js","serviceWorker.js","utils/websocket/initialization.js","websocket.js","index.js"],"names":["module","exports","localhost","prepareCookie","token","data","date","Date","setTime","getTime","expires","toUTCString","key","value","JSON","stringify","storeCookie","storeLocalStorage","string","document","cookie","doesTokenHaveCharacterCookies","indexOf","window","localStorage","setItem","getLocalStorageFromCookieToken","parse","getItem","accessJSONLocalStorage","removeLocalStorageCharactersIfCookieIsMissing","removeItem","removeLocalStorage","initialState","currentUser","admin","character","character_info","ability_scores","classes","hardcode","bonuses","features","forbidden","effects","size","actions","full","standard","move","swift","immediate","conditions","proficiencies","weapon","groups","individualIds","armor","movement","load","equipped","activeFeatures","temporaryHitPoints","statusConditions","displayDescriptions","summonedAllies","races","spells","skills","tooltip","modal","websocket","notifications","storedNotifications","activeEncounter","settings","layout","background1","background2","textColor","bubbleColor","borderColor","shadeColor","castingCantripSPASpontaneous","state","action","modifiedState","klassId","spell","klass_id","klass","id","find","cl","lvl","spell_level","infinite_zero_level","castSpells","map","castingPrepared","modifiedPrepared","prepared_spells","cs","hardcoded","name","points","speed","ringPoints","ammo","amount","weaponAmmo","age","charmedLife","reducer","type","user","classesCopy","clearedCopy","cc","copiedClassInfo","staticStats","crew","console","log","ability","score","updatedState","updatedPreparedSpellState","newPreparedSpells","preparedCopy","forEach","sp","push","performance","monsters","monster","actionDupe","power","eBloodActive","ffs","fd","charge","cleave","arcane_strike","taal_tele","augment","slide","dodgingPanache","parry","precise","charmedActive","status","change","rage","eBlood","newConditions","includes","condition","filter","c","shifterPoints","combat","form","detail","minor","major","baseSize","updatedSize","frogCombat","ringAmount","limits","chosenLimit","l","cast","ability_score","monstersToBeRemoved","splice","fly","init_reroll","double_damage","autumn","usedItems","spellId","sizeStaff","enlarge","staticSize","newSize","reduce","expeditious","swim","tempest","swim20","land10","land20","quick","alterSelf","activeWeapon","selectedWeapon","wa","selectedAmmo","a","ammoDup","thisAmmo","helmsman","teleswap","magicalHats","manipulate","auraRead","stealTime","alreadyEquipped","b","source","bonus","remove","featureId","sourceId","effect","feature","f","notes","n","note","is_done_preparing_spells","cmis","character_magic_items","filteredCMIs","mi","altered","cws","character_weapons","mappedCWs","w","alteredOldEquipped","character_armors","cas","mutagen","activeMutagen","d","additive","proficiency_group","weapon_id","message","target","options","indexToRemove","length","pop","obj","characterWeapons","cw","characterWeapon","newCW","character_weapon_ammunition_id","ammoId","magazine","improvised_ammunition","ammunition_amount","newCWAmmo","equipment","eq","newEq","discovered","oldActiveFeaturesLength","af","featureSource","senderId","tempHP","damage","fhp","adjust","adjustedArray","aa","userCopy","newCampaigns","campaigns","camp","campaignId","newEncounters","encounters","enc","encounterId","parseInt","encounter","participants","klasses","archetypes","klassFeatures","klass_features","kf","klassFeatureId","skill","isTheDiceModalOpen","modalDupe","m","store","createStore","applyMiddleware","reduxThunk","dispatch","Store","getState","modalAction","updateNotificationsAction","updateStoredNotificationsAction","tooltipAction","diceAction","NavBar","menuDropDown","renderLogOut","props","setState","history","menuClick","url","renderNavBar","computer","className","onClick","username","icon","faBars","Menu","pointing","secondary","vertical","Item","location","href","this","fetch","headers","Authenticate","then","r","json","error","current_user","pathname","React","Component","withRouter","connect","tooltipEl","useRef","useState","elementWidth","setWidth","useEffect","current","offsetWidth","howFarElementIsFromTop","pageYOffset","getBoundingClientRect","top","heightOfElement","offsetHeight","style","left","pageXOffset","position","zIndex","ref","maxWidth","Portal","componentDidMount","body","appendChild","container","componentWillUnmount","removeChild","createElement","children","ReactDOM","createPortal","HPChanges","adjustment","lethality","damageType","renderAmount","min","onChange","handleChange","e","handleMobileButton","sign","renderAdjustment","renderLethality","checked","renderString","renderTypeAdjustments","array","el","removeTemporaryHPRedux","damageDealt","thp","remainingTHP","renderHPDispatch","non_lethal_damage","remainingDamage","temp_hp","reducedTempHP","lethal_damage","toBeHealedLethal","toBeHealedNonLethal","buttonEvent","method","res","exitModal","closeHPChanges","renderMobileButtons","minusColor","textAlign","borderRadius","borderRightWidth","backgroundColor","borderLeftWidth","renderButtons","display","gridTemplateColumns","background","mod","Math","floor","pluser","num","th","suffix","consolidateDate","current_weekday","current_month","current_day","current_age","current_year","join","truncatedDate","month","day","year","monthNum","getFetch","catch","err","exception","postFetch","patchFetch","deleteFetch","abilityScoreAction","replaceCharacterInfoAction","replaceCharacterAction","itemType","trading","setTrading","tradedChar","setTradedChar","stash","setStash","stashContainer","setStashContainer","containers","setContainers","contents","setContents","setAdjust","adjustedValue","setAdjustedValue","campaign","item","characterItem","known","featureWithUsage","usage","canEquip","slot","proficiency","wieldable","canBeStored","stored_character_magic_item","hasContents","feature_container","adjustable","renderTrade","new_owner_id","renderStash","stored_cmi","cmi","renderWithdraw","Accept","renderApplicableContainers","magic_item","false_desc","category","weapon_hands","double_weapon","wh","hands","don","htmlFor","newEquippedStatus","dispatchType","skill_bonuses","sk","skill_id","bonus_type","duration","stat_bonuses","st","statistic","feature_stat_bonus_conditions","skill_notes","languages","language","renderEquip","equipSelection","Fragment","characters","featureUsage","character_magic_item_feature_usages","fu","feature_usage_id","currentUsage","current_usage","limit","remaining","count","adjustSelection","faTrash","ammunition","ammunition_type","validAmmo","activeAmmo","characterAmmo","preventDefault","ammo_id","characterWeaponsDupe","modalUpdateAction","renderAmmunition","renderDescription","desc","split","para","idx","ca","characterArmor","armorName","masterwork","price_in_gp","weight","marginBottom","paddingBottom","borderBottom","description","renderArmor","editModal","weapon_type","num_of_dice","damage_dice","damage_type","critical_range","critical","range","renderMI","bonusAction","addMovementAction","activeFeatureAction","adjustStatusConditionsAction","statusConditionDistribution","statusCondition","featureDistributions","specific_statistic","bonus_multiplier","bonus_multiplier_based_on_feature_level","forbiddenAction","subscribeAction","incorporateItemToCharacter","payload","duplicate","knownItem","makeItemDiscovered","initializeCampaignWebsocket","websocketCode","dm","websocket_code","undefined","cable","subscriptions","create","channel","campaign_code","connected","send","character_id","received","parseSentCampaignData","WebsocketAction","sendCampaignWebsocket","sender_id","participatingPlayer","incomingCharacter","sender","ch","toggleable","websocketFeatureDistribution","senderName","updatedNotifications","sourceName","notification","updatedStoredNotifications","usn","askForInitiative","reciever_id","acceptOnly","locateAbility","locateFeatureThroughAbility","locateFeatureAndAbilityFromSource","renderTH","classLevel","level","renderDamage","abbreviateDamageType","_","capitalize","substring","sortedSpellsByLevelAndName","sortedData","i","thisLvl","sort","localeCompare","flat","injectSpellIntoDescription","onClickFunction","functionOptions","domDescArray","toLowerCase","splitDesc","descriptionParser","tables","tempArr","tableArr","table","parseTable","descSplitParagraphs","arr","dsp","replace","random","parseInlineSemantics","text","innerTable","slice","trim","rows","substr","startsWith","cellContainer","cells","content","t","front","back","justInitials","toUpperCase","defaultCharacterInfo","doesThisFeatureNeedToBeDistributed","hasFeatures","initialCharacterDistribution","characterLevel","agg","specific_feature_id_to_be_updated","applicable_klass_features","akf","characterChoice","character_choices","ccc","feature_id","featureCC","column","sub_feature","klassFeaturesFeatureDistribution","feet","penalty","featureDistribution","castable_spells","fcs","spF","featureName","redux","multiplier","addTemporaryHitPointsAction","applications","app","affects_allies","removeTemporaryHitPointsAction","sc","removeStatusConditionDistribution","after","featureSourceFeaturesAfter","fs","rsc","skillBonusFeature","applicable_level","statBonusFeature","movements","movementsFeature","armor_proficiencies","weaponArmorProficienciesFeature","weapon_proficiencies","status_conditions","statusConditionsFeature","display_descriptions","displayDescriptionsFeature","animal","animal_type","custom","minimum_bonus","round_down","sb","permanent","wap","player_choice","choice","characterChoiceId","armor_id","forbiddenFeature","dd","access_alignment","title","calculateFeaturePercentage","base_limit","maxUsage","calculateMaxUsage","baseFeatureAndAbility","klassArchetypeId","timesUsed","calculateCurrentUsage","usageSources","reduxState","abilityScores","classLvl","arch","ar","base_limit_modifier","limit_increase_per_level","minimum_limit","used","remainingUsage","incrementFeatureUsage","alterCurrentUsage","usageArrayBasedOnSource","all_feature_usage_options","opt","optionSource","removeFeature","decrementFeatureUsage","isThisFeatureActive","active","setFeature","renderClick","operation","klass_feature_id","adjustedFeature","additionalContent","triggerTurnActionAction","klass_archetype_id","character_klass_feature_usages","featureNameFromSource","fuo","actionClass","SpellDescription","updateSpell","spell_list_spells","onScroll","magic_school","subschools","ss","sls","spell_list","spell_components","component","abbreviation","justItems","uniqItems","uniq","renderComponentItems","spell_range","arrayOfStrings","renderFeet","dismissible","saving_throw","spell_resistance","abilityScore","abilityScoreArray","abilityScoreMod","abilityScoreModString","permanentScore","temporary","ci","any_bonus","isThisActionAvailable","sharingConditions","castAtWill","remainingSpellsPerDayFromSpellcasting","spellcasting","spd","spellLevel","preventativeConditions","if_affected_by_condition","intersection","allSpellcastingKlassFeatures","locateBonusSpellSlotsKlassFeature","bonusSpellSlot","bonus_spell_slot","remainingSpellsPerDay","klassFeature","abilityScoreModifier","klassName","uniq_klasses","uk","spellsPerDay","prepared_spells_per_level","spells_per_day_per_level","applicableSPD","klass_level","bonusSpell","increase","decrease","cast_spells","ps","bonus_spell","remainingKnownSpellsArray","knownSpellsThisLevel","knownSpellsArray","characterKnownSpells","character_known_spells","kspl","knownSpells","cks","feature_spellcasting_id","spell_list_spell","remainingSpells","remainingPreparedSpellsArray","preparedSpellsThisLevel","characterPreparedSpells","pspl","cpsThisSpellLevel","cps","known_spells_per_level","spellsPerDayArray","spdpl","preparedSpellsPerLevelArray","renderSpellRange","rangeIncrease","increase_per_level","renderSpellDuration","time","unitOfTime","unit_of_time","concentration","renderSpellDC","spellData","save","castSpell","ksData","spellPerDay","castableBonusSpell","expend_prepared_spells","preparedSpellId","expend","replacePreparedSpells","replaceCastSpells","KnownSpellManager","useSelector","displayButton","toggleDisplayButton","updateSpells","filterInput","updateFilter","updateSpellId","characterKlassSpellId","spellListSpellId","dragging","dragInfo","updateDragInfo","spellListId","updateSpellListId","featureSpellcasting","updateFeatureSpellcasting","warning","updateWarning","spellcastingData","mutatedData","updateDrop","spell_list_spell_id","ks","spellName","errors","spellListSpell","characterKnownSpell","replaceCharacterKnownSpells","resetDrag","remainingKnownSpells","allowedPreparedSpellLevels","buttons","allKnownSpells","thisLevelKnownSpells","tlks","characterKnownSpellId","unshift","knownSpellsListItems","color","fontSize","border","gridArea","overflowY","onDrop","onDragOver","renderKnownSpells","filteredSpells","input","knownSpellsIDs","nodeSpells","draggable","onDragStart","updateDrag","onDragEnd","maxHeight","margin","renderSpellOptions","justifyContent","renderSpellDescription","setTimeout","padding","width","PreparedSpellManager","preparedSpells","known_spell_list","characterPreparedSpell","preparedSpellsPerDay","pspd","allPreparedSpells","thisLevelPreparedSpells","tlps","preparedSpellsListItems","renderPreparedSpells","preparedSpellsIDs","mutateCharacterInfoArray","where","subKey","isNew","ii","CharacterChoice","setOptions","filteredOptions","setFilteredOptions","searchTerm","setSearchTerm","choiceObj","specifics","alphabetizedData","filtered","op","startCase","endsWith","removedCharacterChoicesArray","replaceCharacterInfo","option","availableCastableSpellLevelsThroughKlassId","allRemainingSpellsPerDay","SpontaneousCasting","setSpells","chosenStatus","updateChosenStatus","lostPreparedSpellId","setLostPreparedSpellId","spontaneousSpellId","setSpontaneousSpellId","spontaneous_castings","uniqBy","keyword","spell_id","spellsCopy","renderSpells","spontaneousSpells","spellNodes","isThisSpellSpontaneous","header","colspan","spontaneousSpell","formattedPreparedSpells","renderSpontaneousSpellSummary","spontaneous","prepared","renderSpellSelection","KlassSpecialization","specializationOptions","setSpecializationOptions","specificSpecializationId","setSpecificSpecializationId","setSpell","renderSpellClick","incomingSpell","selectSpec","klassFeatureKSpec","kspec","klass_feature_klass_specializations","kfks","klass_specialization_id","klass_feature_klass_specialization_id","replacementKSpecs","klass_specializations","removeSpec","character_klass_specialization_id","ckspec","choice_amount","kspecNodes","renderOptions","spec","featureNodes","klass_specialization_features","renderDetails","specTitle","renderSpecializationSelection","BonusSpellSlotManager","bssAbilities","spellLevels","spellOptions","list_of_available_spells","ksFeature","bonus_spell_slot_option","applicable_spell_level","sourceAbility","bonusSpellSlotOptions","direct_spell_id","alternate_source_id","alternate_source_ability","preparedSpell","alternate_source","index","allPreparedBonusSpellSlotSpells","spLvl","preparedSpellThisLevel","psp","renderPreparedBonusSpells","FeatDescription","feat","benefit","normal","special","Feat","sizeMod","specialSizeMod","sizeSpaceReach","crCalc","cr","ceil","averageHP","totalHitDice","creatureTypeHitDie","constitutionScore","averageDiceRoll","baseHP","con","augmentSummoning","hp","modString","savingThrow","abilityMod","bab","babMod","cmb","creature","baseAttackBonus","hit_dice","creature_type","hit_die","sizeModifier","strength","dexterity","otherMods","acMods","dexMod","renderAttacks","attackType","typedAttacks","weapons","abilityModifier","totalAttackBonus","renderAttackBonus","attackNodes","dice","sizeAdjustment","sizeStepsFromMedium","diceSteps","newIndex","sizeDamage","creatureInfo","ef","could_apply_dex_for_attack_rolls","greaterAbilityScore","renderFeature","sourceObj","weapon_applications","CreatureStatBlock","setCreature","parsedCreature","feats","CreatureFeaturesCalc","hitDice","fortitude","CreatureCalc","constitution","reflex","will","wisdom","armorClass","ac","touch","flatFooted","acModifiers","sum","touchModifiers","flatFootedModifiers","armorClassModsString","challenge_rating","starting","exp","pow","alignment","SizeCalc","intelligence","charisma","additionalAbilityMod","featNodes","renderCreature","setSkill","skillId","foundSkill","addToSkillsAction","blurb","try_again","renderSkill","HarrowDeck","visibleCard","setVisibleCard","harrowDeck","img_url","symbol","traditional","misaligned","selectRandomCard","gridTemplateAreas","flexDirection","card","src","alt","height","displayCard","ItemDescription","CurrencyManager","pp","gp","cp","modifiedCurrency","updateCurrency","disableButtons","toggleDisable","renderChange","renderSubmit","coin","btn","totalGP","toFixed","step","renderCurrency","updateColorThemeAction","themes","colors","Settings","themeElements","backgroundImage","boxShadow","clickFunction","listStyleType","flexWrap","displayColorThemeOptions","FamiliarDescription","familiar","PoisonDescription","affliction_type","cure","fortitude_dc","frequency","onset","renderPoison","GenericDescription","AddCharacterEquipment","searchString","updateSearchString","loading","setLoading","items","setItems","selectedItem","updateSelectedItem","customData","updateCustomData","displayDice","faDiceD20","debouncer","debounce","fetchItems","handle","formHandler","duplicateObj","item_id","onKeyUp","marginRight","modalKeyWord","max_dex_bonus","formData","htmlfor","onSubmit","createCharacterItem","SummonedCreatureOptions","renderSummon","template","duplicateArr","modalDetails","templateDescriptions","celestial","fiendish","entropic","resolute","tableElementsCreatures","featureAnimal","summoned_creature_list","displayCreatures","caster_level","aura","descArray","spellArray","lowerCase","flatten","paraDupe","s","renderFalseDesc","_extends","Object","assign","arguments","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","fill","fillOpacity","_ref","svgRef","viewBox","transform","ForwardRef","forwardRef","DiceRoller","diceToRoll","setDice","diceResults","setResults","baseModifier","setBaseModifier","tempModifier","setTempModifier","diceObj","rollName","modifier","die","renderAddDice","objDupe","renderSubtractDice","clearDice","roll","total","totalString","rollResult","textShadow","resultsDupe","shift","d2","diceString","diceElements","minHeight","gridTemplateRows","alignItems","wordBreak","theCage","resultElements","joinEquation","joinTotal","remainder","borderTop","marginTop","results","PotionDescription","potion_or_oil","ScrollDescription","scroll_type","WandDescription","charges","displayName","renderWand","clickOut","classList","exitStyle","setExitStyle","activeIndex","setActiveIndex","collapsed","toggleCollapsed","big","toggleBig","sidebarContainer","tabStyleDuplicate","innerWidth","bottom","innerHeight","bottomDenominator","updateActiveIndex","collapsedStyle","tabStyle","wiff","cancelButton","closingIndex","newActiveIndex","exiting","toggleButton","updateToggleButton","faChevronUp","faChevronDown","embiggenButton","faCompress","faExpand","renderEdit","renderComponent","Notifications","renderExit","storeNotification","updateStoredNotifications","renderDistribution","show","setShow","renderClasses","kl","class_obj","clo","sortedCharacters","char","lineHeight","race","faCircle","faSortDown","renderCharacters","Skillset","skillsets","chosenSkills","addSkillset","activeSkillset","editSkillset","renderSkillsetSubmit","chosen_skills","updated_obj","skillset","fetchSkillsets","fetchSkills","renderAddSkillset","renderSkillChange","selectedSkill","renderSkills","renderEditSkillset","skillIdArray","skillset_skills","sss","renderDelete","updatedObj","skillsetForm","faTrashAlt","renderActiveSkillsetChange","active_skillset","renderActiveSkillset","skillset_id","faPencilAlt","updateCharacters","User","lsCharacters","Skills","SpellCard","renderAction","SpellsContainer","Spells","activeSpell","alphabetizedSpells","alphabetize","sortedSpells","sp1","sp2","oneSpell","sortCompositeKlassFeatures","chosenArchetypes","isFeatureReplaced","klass_archetype_features","archF","replaces_klass_features","replaceKF","has_klass_feature_options","shouldOptionsKlassFeatureBeRemoved","replace_or_alter","compositeKlassFeatures","lowestA","feature_levels","klass_archetype_feature_levels","fl","lowestB","klassFeatureLevels","affects_specific_level","tableDescriptionsByLevel","viewedArchetype","table_description","slug","tableDescription","archFL","adjustExistingTableDescription","featureWasFoundAndAdjusted","specificLevel","adjustmentMade","j","findIndex","td","strikethrough","archetypeClassSkillNodes","alters_class_skills","doesKlassFeatureHaveOptions","Introduction","showDetails","displayDescription","renderValidSkillsetSkills","remappedASCS","class_skillset_skills","csss","skillsetSkills","skillsetSkillsUniq","skill_uniq","validSkills","domSkills","archDesc","renderImage","displayImage","renderName","starting_wealth","skill_ranks","Table","tableDescriptions","activeArchetype","renderSave","renderClassTableRow","renderTableStyling","nameOfFeatures","textDecoration","domFeatures","renderLevelFeatures","renderBAB","findSpellcasting","availableSpellLevels","levels","renderSpellsPerDayPerLevel","sp_lvl","NewFeature","level_learned","renderFeatureChange","clearAddFeature","renderAddFeature","toggleFeatureForm","deleteFeature","Feature","deleteFeatureButton","showEffects","renderClassFeature","klass_feature","renderForm","deleteFeatureConfirm","answer","effectsButton","limited","startingLevel","toggleModal","Features","klass_name","NewClass","deleteClassButton","renderFormSubmit","renderClassEdit","deleteClass","deleteClassConfirm","toString","toggleClassForm","ClassSkillsForm","skillsIds","renderSkillOptions","mappedSkillsIds","scs","renderClassSkills","SpellsForm","0","1","2","3","4","5","6","7","8","9","renderSpellsForm","renderSpellsRow","renderSpellChange","submitSpellsPerDay","Spellcasting","isSelected","FeatureEffect","renderSelection","toggleClassSkillsForm","toggleSpellsForm","klassDisplay","setKlassDisplay","urlArray","renderURL","fw","selectedClass","newData","remappedFeatures","Number","isInteger","klass_updates","updates","skills_data","nestedSpells","spells_per_day","displayTable","renderAbilityScoreModifiers","race_ability_score_modifiers","mods","modStrings","NewTrait","trait","renderTraitChange","clearAddTrait","renderAddTrait","toggleTraitForm","deleteTrait","Trait","deleteTraitButton","racial_trait_id","traits","renderRacialTrait","racial_trait","deleteTraitConfirm","Traits","renderTraits","racial_traits","race_name","NewRace","abilityScoreModifiers","deleteRaceButton","renderRaceEdit","mapAbilityScoreDynamicFields","addAbilityScoreModifierField","val","abilityId","bonusId","data-id","renderDynamicChanges","dataset","deleteRace","deleteRaceConfirm","race_id","toggleRaceForm","Race","changeAddTraitToggle","race_updates","remappedTraits","raceId","marginLeft","untrained","Skill","toggleSkillForm","CharacterHome","autocomplete","campaign_id","campaignDetails","setting","theme","renderSelectedCampaign","raceAnyModifier","toggleDetails","renderAncestryCard","ancestry","renderAncestryChange","chosenRaceId","ancestries","ancestryCards","an","renderAncestryOptions","renderAncestryImage","selectedAncestry","asm","tr","details","renderAncestryDetails","ClassTile","displayHoverButtons","toggleHoverButtons","onMouseEnter","onMouseLeave","onMouseOver","renderClassChange","displayChosenClass","Tab","renderCancel","allies","removeAlly","activeTab","label","renderTabClick","ClassTabs","optionsTabName","lbl","tabOptions","ArchetypeFeature","ArchetypeShow","displayFeatures","toggleDisplayFeatures","archetype","collapseContent","displayKlassArchetype","archetypeChange","chosen","ClassArchetypes","chosenArchetypeIds","OptionShow","ClassOptions","viewSpecificClassDetails","viewSpecificArchetype","hasOptions","classDetails","setClassDetails","chosenClasses","klid","button","removeLatestClass","classCards","renderClassOptions","klar","renderClassTable","tab","resetSpecificArchetype","optionsId","renderClassDetails","AbilityForm","numbers","generateRandomAbilityScores","generateOneScore","mapAbilityScores","Details","selectedAlignment","al","placeholder","gender","hair","eyes","homeland","deity","areYouProficientWithThisArmor","isProficient","gr","currentEquippedCharacterArmor","armorCheckPenalty","ceca","armor_check_penalty","armorCheckPenaltyOnOtherAbilities","calculateBonuses","skillObj","knowledge","specificBonus","renderBonusName","skillBonus","ranks","skillRanks","classSkill","isThisAClassSkill","stealthSizeMod","acp","skillBonusArray","skillBonusPluser","css","character_skillset_skills","renderSkillTooltip","tooltips","renderSkillName","hasACP","asterisk","addCustomSkills","sortSkills","aSubstring","bSubstring","setSkillsets","skillDetails","setDetails","customizable","customize","customSkillDetails","setCustomDetails","renderBonus","sr","canAddRanks","calculateSkillRanks","sd","newRanks","arr2","numberOfRanks","sortedSkills","renderSkillTableRow","characterInfo","createCharacter","user_id","createCharacterClass","characterId","displayCharacterDetails","Navbar","renderTab","activeField","anyBonus","doesRacehaveAnyBonus","setCharacterInfo","archetypeDupe","classesDuplicate","addClassField","removedClasses","renderdoesHaveAnyBonus","displayForm","fetchCharacter","renderFeaturesFromClass","wp","dispatchWeaponProficiencies","renderAbilityScoreCalc","downcaseAbility","calculateWeight","calculateLoad","carryingCapacityByStrength","carryingCapacity","characterDistributer","characterAction","cKArray","completedClasses","character_klasses","cK","ck","k","classInfo","dispatchClassLevels","ability_score_improvement","truncate","upperCase","hc","opacity","cursor","rollAbility","AbilityScores","renderEditAbilityToggle","numOfContainers","CharacterName","calculateSave","permAbilityMod","classSaves","renderBaseClassSave","classSavesTotal","bonusObjs","bo","base","displayIndividualSave","isAComputer","saveDetail","capitalizedSave","savesArray","flexGrow","rollSave","savingThrowTitle","displaySaves","mobileHPChange","setMobileHPChange","renderDamaged","totalHP","additionalTempHP","storedLethalDamage","storedTemporary","hitPointBonuses","conMod","currentHP","max_hp","percentageHP","tempPercentage","renderCharacterHP","armorClassModifiers","equippedCharacterArmor","wornArmorBonus","wornArmor","all","extra_armor_options","extraCharacterArmorIds","ex","acTotal","armorClassTotal","raging","charging","largeMorph","enlarger","cedrick","dex","renderSize","dodge","natural","armorBonus","deflection","acCalc","dispatchTooltip","element","parentElement","armorClassBreakdown","bonusType","listStyle","paddingLeft","onMouseOut","ab","characterObj","characterInfoObj","str","permSTR","permDEX","finesse","additionalBonuses","renderAB","abArray","pluserAB","klassLevels","allKlasses","preBAB","applicableBonuses","bonusPenaltyAB","temp","combatManeuvers","defense","AttackBonus","scoreName","renderPolymorph","hd","currentClass","ogAB","mobileDisplayDetails","setMobileDisplayDetails","knownLanguages","full_name","titleWidth","outerHeight","overflow","renderSkillBonus","renderNumOfRanks","renderClassSkill","ogMod","chsss","renderAbilityScoreAbbreviation","abbrev","modifiedSkills","clearlyDefinedSkills","cskSkill","currentSkill","renderTooltip","mouseOut","rollSkill","renderMobileSkillsRow","isThereAnAsterisk","comment","tooltipString","currently","alterEgo","renderSkillsTable","renderMobileSkills","activeFeature","changeActiveFeature","renderClassFeatures","kspecFeatures","kspecFeature","circumventFeatures","associated_spells","newFeatures","replacedFeatures","addedFeatures","feature_options","activeTrait","renderRacialTraits","circumventTraits","alternateTraits","alternate_racial_traits","alternates","found","alternate_trait_replace_racial_traits","atrrt","newTraits","replacedTraits","addedTraits","Feats","activeFeat","renderFeats","nettie","pepper","maddox","merg","robby","festus","grackle","majestik","ildre","fireRoastedTomatoes","iyugi","natesse","dzeyn","prerequisites","FeaturesTraits","EquipmentItem","group","keyWord","percentages","magicItem","destroy_after_use","renderPercentage","isThisStored","changeSelectedItem","renderTitle","Equipment","activeItemGroup","itemObject","descriptionAvailable","itemID","cmidId","changingState","renderEquipment","itemGroups","unknowns","magicalItems","groupings","groupedItems","gi","renderEquipmentList","character_potions","character_scrolls","cwas","character_wands","poisons","itemRows","renderCarryWeight","borderRight","FeatureTabs","alliedCreaturesTab","AlliesContainer","characterCreatures","character_creatures","removeSummonedAlly","relationship","sa","renderMobileTabClassNames","makeTheTab","renderFeaturesTraits","cmiId","characterItemID","ActionTabs","renderSPD","spds","interpolatedSPD","ind","renderAddionalSpellcastingStats","casterLevel","SpellcastingCalculations","renderManageKnownSpells","renderManagePreparedSpells","renderManageBonusSpellSlots","renderSpellTable","scData","renderSpellTableRows","prepare_spells","renderSpell","abilityName","cast_at_will","difficultyClass","spellResistance","hitModifier","buttonName","isBonus","renderBonusSpellSlotTooltip","kSpec","callback","spellcastingArray","areThereKnownSpellsMissing","remainingPreparedSpells","areTherePreparedSpellsMissing","spellcastingKlassFeatures","sckf","spellInfo","castAtWillSpells","renderAllSpellcasting","Abilities","renderAbilities","activatableAbilities","feature_usage_base","ckfus","character_klass_archetype_feature_usages","klass_archetype_feature_id","klassFeatureName","baseSource","spontaneous_casting","cKSpec","cksfus","character_klass_specialization_feature_usages","klass_specialization_feature_id","subSourceId","kspecFeatureName","featName","damages","saving_throws","renderDice","canThisAbilityBeUsed","newRenderClick","renderUsage","renderDC","steps","applicable_step","asMod","ability_score_modifier","dc","level_modifier","dispatchManager","pointsDirection","specific","areThereEnoughPoints","isThereAnAction","usageSource","ckfu","perf","hats","powerClassName","powerAction","sparks","abilities","dependent","hex","arcane","rel","arcaneStrike","taalmon","squidCombat","squidMinor","squidMajor","renderShifterFormClass","panache","free","besmara","renderMutagen","positiveAbilityScore","negativeAbilityScore","chosenMutagen","activeForm","isActionAvailable","collectClassFeatureOptions","featuresNested","chronometer","renderLimit","startingValue","useDispatch","bombs","setBombs","renderCharacter","existingWeapon","thrown","unarmed","attacks","renderTableElement","ew","renderTwoWeaponTableElement","styling","canCast","clickAction","newRenderDispatch","dispatchReload","wc","attackRoll","calculateAttackBonuses","damageRoll","rollDamage","renderCritical","collectAdditionalInfo","renderAdditionalInfo","sidebarInfo","additionalInfo","renderNum","editSidebar","meleeAttackBonus","rangeAttackBonus","proficiencyPenalty","attackBonuses","rollAttack","baseDamage","thrownDamage","damageDiceSizeChange","baseDamageDice","damageDice","renderDamageDice","double","baseDoubleDamageDice","double_num_of_dice","double_damage_dice","doubleDamageType","double_damage_type","doubleDamageDice","additionalDamage","renderAdditionalDamage","twfAttackBonuses","twfRange","twfDamage","allAttacks","penalties","onlyEquippedWeapons","primary","off","renderMultipleDispatch","weaponProficiencies","crit","additionalArray","sidebarRules","italics","renderAmmo","comma","characterWeaponAmmo","cwAmmo","cwa","renderDispatch","capacity","reloadAmmo","attackBonus","hardcodeAttackBonus","hardcodeDamageBonus","damageBonus","strengthMultiplier","additionalDetails","toggle","displayIfTrue","dispatchDetails","polymorph","weaponType","handedStrengthModifier","bonusModifiers","tempBonuses","abSBonus","abDBonus","damageSBonus","damageDBonus","otherABD","bullMinor","ogABS","ogABD","ogDS","calcStyle","sizeChange","newDice","renderFrogCombat","justString","cms","cmd","rollCM","movementRedux","baseSpeed","setBaseSpeed","maxBy","mr","applicationsBefore","calculate_before","unlessLoads","unless_load","reducedSpeed","applicationsAfter","calculate_after","cannotRun","swinging","isFatigued","rings","sergeant","price","activatable","feather","kyton","legendaries","max","net","lasso","magicItems","tricks","quickChangeMask","expendable","vastIntelligence","wandUnseenServant","fireballNecklace","almanac","astrolabe","pirates","quickShirt","brassCloak","renderClassName","isTheActionAvailable","magicItemUsage","cmifu","actionable","remappedActions","miFeature","renderUse","p","armors","maxDex","Actions","misc","renderAttackDetails","melee","ranged","cm","init","calcInit","rollDice","initArray","initiativeArray","calculateInitiative","bonusPenaltyInit","endTurn","limit_frequency","paddingTop","setTitle","setDate","setPlaceholder","setSave","sample","saveDetails","weekday","finishFetch","edit","setEdit","deleteNote","makeActive","activeNote","newNote","setNoteForm","setActiveNote","updated_at","DetailsTabs","renderAllies","AlliesTab","ally","activeAlly","Allies","collectMonsters","renderAlly","senses","ff","fort","def","dr","immune","resist","weaknesses","space","reach","spAtt","stats","int","wis","cha","b8","CampaignTabs","Campaign","allCharacterChoices","allKlassSpecializations","specialization","hasSpecialization","NotificationDoor","badge","greenBadge","yellow","doWeNeedAYellowNotification","red","doWeNeedARedNotification","faDungeon","doneLoading","floatingNum","toggleFloatingNum","numsRefContainer","renderFloatingNumber","offsetLeft","offsetTop","pointsFeatures","unit","renderPoints","renderPerformance","activeEffects","ae","known_spells","removeActiveFeature","foundAbility","foundFeature","renderAge","previousAge","curios","MetamagicModal","HandyModal","DebilitatingModal","dispatchAmmo","direction","newWeaponAmmo","nwa","nnwa","dispatchWeaponAmmo","dispatchMutagen","charW","stringAmmoId","changeAmmo","ammos","ai","weapon_qualities","wq","containerHeight","setContainerHeight","SideBar","sidebar","isThisBeingRemoved","setRemoval","isThisBeingRemovedTab","setRemovalTab","setStyle","BackgroundForm","CharacterForm","allClasses","allRaces","fetchClasses","fetchRaces","renderDefaultClasses","renderRaces","renderRacialAbilityModifiers","toNumber","renderAnyChoiceField","checkForValidLevels","valid","mapClassDynamicFields","classId","NotificationTabs","renderCharacterChoices","verb","renderKlassSpecializations","HP","hitPoints","maxValue","char_klass","info","sortedClasses","Creation","activeProblem","missingHP","nullHP","addHP","faExclamationTriangle","Notice","fetchDiscovered","renderAdditionalButtons","dispatchMonster","renderConditions","renderActiveEffects","changeActiveEffects","newItems","undiscoveredCMIs","undiscoveredCPs","undiscoveredCSs","undiscoveredCWas","undiscoveredCWs","undiscoveredCAs","newItemLI","ni","tempFeatures","renderStoredNotifications","sn","SkillRanks","previousRanks","currentRanks","availableRanks","renderCSSChangeColor","renderAvailableRanks","entries","renderSkillSelection","skillsAndRanks","charRanksSkill","SpellPreparationCard","knownSpell","klass_spell","goingToBePreparedSpells","gtbps","faCheck","renderSpellLevelEdit","asl","renderSelectedSpell","PreparedCard","alreadyPrepared","removePreparedSpell","PrepareSpells","selectedSpells","activeClass","allAvailableClasses","availableClasses","ks1","ks2","ksssl","kssfsl","displayClassOptions","selectedSpell","ksi","known_spell_id","displaySelectedSpells","totalSpellsPerDay","bonusSPD","checkAvailableSpellLevel","preparingSpells","prepared_amount","spellsAtThisLevel","renderAlreadyPreparedSpell","kps","casl","Update","needsRanks","totalSkillRanks","appliedSkillRanks","addSkillRanks","isThisCasterPrepared","isThisKlassACaster","prepareSpells","manageKnownSpells","managePreparedSpells","Rest","newDay","anyPreparedSpells","SpellDescriptionModal","MagicItemModal","findItem","cf","setCF","cfId","fetchAdjust","u","cmifuId","cmifuo","character_magic_item_feature_usage_options","alreadyImplemented","feature_usage_option_id","remainingOptions","renderPage","WeaponModal","MobileTabs","isThisTabActive","mobileTab","changeActiveMobileTab","faMap","faFistRaised","faUserAlt","Character","toolTip","toolTipX","toolTipY","startTime","startSwipe","drag","changeBackground","justSwipedMobile","offset","spellsFeature","castSpellsForThisClass","spellcastingAbility","dispatchAbilityScores","dispatchAbilityScoreImprovements","section","clientX","clientY","toolTipComment","knockOffActiveEffects","rightArrow","leftArrow","handleMouseDown","targetTouches","handleMouseUp","handleMouseMove","currentSwipe","currentTime","deltaX","velocity","adjustTabs","newTab","renderHeader","x","y","onTouchStart","onTouchMove","onTouchEnd","characterData","localStorageCharacterData","replaceCharacterDataInLocalStorage","foundTheme","CampaignShowTabs","encounterTab","ItemSearch","didSearch","successfulAddition","fetchItem","renderItems","deployItem","renderSelectedItem","formDataMagicItem","PotionsScrollsWandsCreator","setItemType","viewedSpells","setViewedSpells","potionsSpells","setPotionsSpells","setSelectedSpell","spellDetails","setSpellDetails","toggleLoading","updateSearchAttempt","fetchSpells","search","previousAttempt","cancel","displaySpells","spellsWithSpellLevel","lowestLevel","spellElements","selected","createFetch","creationForm","ItemsManager","selectedComponent","setSelectedComponent","handleClick","renderSelectedComponent","unknownMagicItems","unknownPotions","unknownScrolls","unknownWands","knownFetch","item_type","renderUnknownMagicItems","setWeekday","setMonth","setDay","setAge","setYear","months","days","calendarData","setCalendarData","calendar","changeWeekday","changeMonth","changeDay","changeAge","changeYear","changeDate","weekdays","Ideas","setAmount","ideas","setIdeas","event","idea","CreatureSearch","creatures","setCreatures","forhtml","creatureNodes","challengeRating","addButton","addCreature","displayCreature","CreatureContainer","selectedCreature","setSelectedCreature","EncounterSearch","toggleEncounterForm","inc","ev","selectedEncounter","renderEncounters","NewEncounter","updateForm","updateCreatures","editingEncounter","editForm","updatedForm","renderCreatures","subtractBtn","creaturesDupe","subtractCreature","createEncounter","response","updateEncounter","updateEncounterAction","resolveEditEncounter","submitButton","formSubmit","cols","existingCreature","EncounterDetails","deleteEncounter","removeEncounter","lastIndexOf","domCreatures","creatureType","node","startEncounter","editEncounter","renderEncounter","EncounterContainer","encounterForm","chosenEncounter","setChosenEncounter","setEditingEncounter","ActiveEncounterInitiative","activeParticipants","setParticipants","initCreatures","initiative","iniatiateEncounterClick","sortedParticipants","uninitiatedParticipants","initiatedParticipants","nodeParticipants","seeDetails","initiativeOrder","ActiveEncounter","participant","setParticipant","endEncounter","setActiveTab","incomingEncounter","custom_notes","Classes","displayAvailableClasses","toggleAvailableClasses","displayAllClasses","checkboxClasses","sortedClassesBySource","r1","r2","code","sources","removedCustom","classesDOMNode","selectedClassIds","toggleSelectedClasses","updatedIdArray","sci","updateSelectedClassIds","changeDisplay","loadingDie","Races","displayAvailableRaces","toggleAvailableRaces","displayAllRaces","checkboxRaces","sortedRacesBySource","cl1","cl2","racesDOMNode","selectedRaceIds","toggleSelectedRaces","sri","updateSelectedRaceIds","Calendar","selectedCalendar","selectedCalendarId","calendars","selectedMonth","updateMonth","num_of_days","selectedDay","updateDay","selectedDayNumber","updateDayNumber","selectedYear","updateYear","selectedAge","updateAge","updateSelectedCalendarId","Setting","nameField","toggleName","settingField","toggleSetting","themeField","toggleTheme","nameEl","settingEl","themeEl","fontFamily","setName","onBlur","setSetting","fontWeight","setTheme","startingLvlField","toggleStartingLvl","customNotesField","toggleCustomNotes","startingLvlEl","customNotesEl","stillAdding","textLength","averageCharactersInRow","startingLvl","setStartingLvl","startingLvlError","selectedSkillsetId","updateSelectedSkillsetId","moreInfoSidebar","customNotes","overflowWrap","setCustomNotes","toggleVirtualKeyboard","onFocus","setCalendars","setRaces","setClasses","toggleStartingLvlError","usingVirtualKeyboard","toggleSidebar","calendar_id","race_ids","klass_ids","dm_id","starting_level","validateStartingLvl","DetailsBrief","colorTheme","classObj","renderAbilityScore","renderScores","Character1","created_at","base_klass_feature_id","skill_unlock_5","skill_unlock_10","skill_unlock_15","skill_unlock_20","source_id","favored_klass_bonuses","alternate_racial_trait_id","magic_school_id","action_id","spell_range_id","CharacterDetails","setCharacter","setSettings","updateSettings","settingsAction","Login","password","Form","Field","Button","SignUp","NewSkill","renderSkillEdit","deleteSkill","deleteSkillButton","deleteSkillConfirm","Name","nextQuestion","Action","updateActions","variableActions","word","AttackOfOpportunity","attack_of_opportunity","Usage","complete","renderNestedChange","UsageOptions","changeNum","usage_options","cost","renderDynamicForm","operator","changeDynamicForm","newOptions","UsageSpellOptions","usage_spell_options","spell_options","castable","SkillBonuses","StatBonuses","Container","volume_cubic_feet","Languages","Movement","Loading","must_reload_after_use","RenderRuby","uniqueVariable","sampleSize","HowToFeature","currentQ","capactiy","quizOrder","stateKey","objKey","objValue","qo","hopToQ","q","renderNameQ","distributeQuiz","listOfAttributes","questionElements","App","outerWidth","backgroundAttachment","exact","path","Home","ClassForm","Class","RaceForm","SkillForm","CharacterCreation","CharacterContainer","NewCampaign","Boolean","hostname","match","Websocket","actionCable","createConsumer","Initialization","render","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.ba234a0f.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","const localhost = () => {\r\n  let url = \"http://localhost:3000\";\r\n  url = \"https://characterfinder-api.herokuapp.com\";\r\n  return url;\r\n};\r\nexport default localhost();\r\n","// create cookie storage data\r\nexport const prepareCookie = (token, data) => {\r\n  let date = new Date();\r\n  // 28 days\r\n  date.setTime(date.getTime() + 1000 * 60 * 60 * 24 * 28);\r\n  let expires = `${date.toUTCString()}`;\r\n  let key = `characters-${token}`;\r\n  let value = JSON.stringify(data);\r\n\r\n  storeCookie(`${key}=true; expires=${expires};`);\r\n  storeLocalStorage(key, value);\r\n};\r\n// store cookie\r\nconst storeCookie = string => {\r\n  document.cookie = string;\r\n};\r\n\r\n// get cookie\r\nconst accessCookie = () => {\r\n  return document.cookie;\r\n};\r\n\r\n// does cookie exist\r\nexport const doesTokenHaveCharacterCookies = key => {\r\n  let cookie = accessCookie();\r\n  let cookieTokenIndex = cookie.indexOf(key);\r\n  return cookieTokenIndex !== -1;\r\n};\r\n\r\n// store data in localStorage\r\nconst storeLocalStorage = (key, value) => {\r\n  window.localStorage.setItem(key, value);\r\n};\r\n\r\n// access and parse json data in localStorage {\r\nconst accessJSONLocalStorage = key => {\r\n  return JSON.parse(window.localStorage.getItem(key));\r\n};\r\n\r\n// if cookie exists, get localStorage data\r\nexport const getLocalStorageFromCookieToken = token => {\r\n  let key = `characters-${token}`;\r\n  if (doesTokenHaveCharacterCookies) {\r\n    return accessJSONLocalStorage(key);\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\n// fetch this character's data from localStorage\r\nexport const localStorageCharacterData = (token, characterId) => {\r\n  let lsCharacters = getLocalStorageFromCookieToken(token);\r\n  if (lsCharacters) {\r\n    let character = lsCharacters.find(\r\n      ch => ch.id === characterId && Object.keys(ch).length > 10\r\n    );\r\n    return character;\r\n  } else {\r\n    return null;\r\n  }\r\n};\r\n\r\n// remove data in localStorage\r\nconst removeLocalStorage = key => {\r\n  window.localStorage.removeItem(key);\r\n};\r\n\r\n// replace Character Data in localStorage\r\nexport const replaceCharacterDataInLocalStorage = (token, data) => {\r\n  let key = `characters-${token}`;\r\n  let lsCharacters = getLocalStorageFromCookieToken(token);\r\n  if (!lsCharacters) {\r\n    return null;\r\n  }\r\n  lsCharacters = lsCharacters.map(char => {\r\n    if (char.id !== data.id) {\r\n      return char;\r\n    } else {\r\n      return data;\r\n    }\r\n  });\r\n\r\n  let value = JSON.stringify(lsCharacters);\r\n  storeLocalStorage(key, value);\r\n};\r\n\r\nexport const removeLocalStorageCharactersIfCookieIsMissing = token => {\r\n  let key = `characters-${token}`;\r\n  if (!doesTokenHaveCharacterCookies(key)) {\r\n    removeLocalStorage(key);\r\n  }\r\n};\r\n","const initialState = {\r\n  currentUser: \"\",\r\n  admin: false,\r\n  character: {},\r\n  character_info: {\r\n    ability_scores: {},\r\n    classes: [],\r\n    hardcode: {},\r\n    bonuses: [],\r\n    features: [],\r\n\t\tforbidden: [],\r\n    effects: [],\r\n    size: 'Medium',\r\n    actions: {\r\n      full: false,\r\n      standard: false,\r\n      move: false,\r\n      swift: false,\r\n      immediate: false\r\n    },\r\n    conditions: [],\r\n    proficiencies: {weapon: {groups: [], individualIds: []}, armor: {groups: [], individualIds: []}},\r\n    movement: [],\r\n    load: 0,\r\n    equipped: [],\r\n\t\tactiveFeatures: [],\r\n\t\ttemporaryHitPoints: [],\r\n\t\tstatusConditions: [],\r\n\t\tdisplayDescriptions: [],\r\n\t\tsummonedAllies: []\r\n  },\r\n  classes: [],\r\n  races: [],\r\n  spells: [],\r\n\tskills: [],\r\n  tooltip: {},\r\n  modal: [],\r\n\twebsocket: {},\r\n\tnotifications: [],\r\n\tstoredNotifications: [],\r\n\tactiveEncounter: {},\r\n\tsettings: {\r\n\t\tlayout: \"detailed\",\r\n\t\tbackground1: \"CFB997\",\r\n\t\tbackground2: \"fff\",\r\n\t\ttextColor: \"000\",\r\n\t\tbubbleColor: \"ebebeb\",\r\n\t\tborderColor: \"000\",\r\n\t\tshadeColor: \"800000\"\r\n\t}\r\n}\r\n\r\n\r\nconst reducer = (state = initialState, action) => {\r\n  switch(action.type){\r\n    case \"SIGNIN\":\r\n      return {...state, currentUser: action.user, admin: action.admin};\r\n    case \"SIGNOUT\":\r\n      return {...state, currentUser: \"\", admin: false};\r\n\t\tcase \"SET SETTINGS\":\r\n\t\t\treturn {...state, settings: action.settings}\r\n    case \"CHARACTER\":\r\n      // hardcoded stuff\r\n      let size = 'Medium'\r\n      if (action.character.name === \"Nettie\"){\r\n        size = 'Tiny'\r\n      }\r\n      if (action.character.name === 'Cedrick'){\r\n        size = 'Small'\r\n      }\r\n      // hardcoded end\r\n      let classesCopy = state.character_info.classes\r\n      let clearedCopy = classesCopy.map(cc => {\r\n        let copiedClassInfo = {...cc}\r\n        copiedClassInfo.castSpells = {}\r\n        return copiedClassInfo\r\n      })\r\n      let staticStats = hardcoded(state, {name: action.character.name})\r\n      // hardcoded new data\r\n        staticStats.armor = state.character_info.hardcode.armor\r\n        staticStats.crew = state.character_info.hardcode.crew\r\n      // hardcoded new data end\r\n      return {...state, character: action.character, character_info: {...state.character_info, classes: clearedCopy, size: size, hardcode: staticStats}};\r\n\t\tcase \"START WEBSOCKET\":\r\n\t\t\tconsole.log(\"initialized websocket\")\r\n\t\t\treturn {...state, websocket: action.websocket}\r\n\t\tcase \"SUBSCRIBE WEBSOCKET\":\r\n\t\t\tconsole.log(\"Subscibed to channel\")\r\n\t\t\treturn {...state, websocket: action.websocket}\r\n    case \"ABILITY SCORE\":\r\n      return {...state, character_info: {...state.character_info, ability_scores: {...state.character_info.ability_scores, [action.ability]: action.score, }, hardcode: {} }};\r\n    case \"CHARACTER_CLASSES\":\r\n      return {...state, character_info: {...state.character_info, classes: action.classes}};\r\n    // case \"CLASSES\":\r\n    //   return {...state, classes: action.classes}\r\n    case \"EVERYTHING\":\r\n      return {...state, classes: action.classes, races: action.races, skills: action.skills};\r\n    case \"CAST CANTRIP SPA OR SPONTANEOUS SPELL\":\r\n      let updatedState = castingCantripSPASpontaneous(state, action)\r\n      return {...state, character_info: updatedState};\r\n    case \"CAST PREPARED NONCANTRIP SPELL\":\r\n      let updatedPreparedSpellState = castingPrepared(state, action);\r\n      return {...state, character: updatedPreparedSpellState};\r\n    case \"REMOVE PREPARED SPELL\":\r\n      return {...state, character: {...state.character, prepared_spells: action.newPreparedSpells}};\r\n    case \"PREPARE SPELLS\":\r\n      let preparedCopy = [...state.character.prepared_spells]\r\n      action.spells.forEach(sp => preparedCopy.push(sp))\r\n      return {...state, character: {...state.character, prepared_spells: preparedCopy}}\r\n    case \"ALL SPELLS\":\r\n      return {...state, spells: action.spells}\r\n    case \"SPECIFIC USER\":\r\n      let hardcode = hardcoded(state, action)\r\n      return {...state, character_info: {...state.character_info, hardcode: hardcode}}\r\n    case \"POINTS CHANGE\":\r\n      let amount = action.amount === 'increase' ? state.character_info.hardcode.points + 1 : state.character_info.hardcode.points - 1\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, points: amount}}}\r\n    case \"CHANGE PERFORMANCE\":\r\n      if (action.name === 'none'){\r\n        return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, performance: null}}}\r\n      }\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, performance: action.name, points: state.character_info.hardcode.points - 1}}}\r\n    case \"SUMMON MONSTER\":\r\n      let monsters = state.character_info.hardcode.monsters ? [...state.character_info.hardcode.monsters] : []\r\n      let monster = action.monster\r\n      monsters.push(monster)\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, monsters}}}\r\n    case \"TRIGGER ACTION\":\r\n      let actionDupe = state.character_info.actions\r\n      if(action.action === 'full' && actionDupe.full === false){\r\n        actionDupe = {full: true, standard: true, move: true}\r\n      } else if(action.action === 'full' && actionDupe.full === true) {\r\n        actionDupe = {full: false, standard: false, move: false}\r\n      } else if (action.action === \"standard\" && actionDupe.standard === false && actionDupe.full === false) {\r\n\t\t\t\tactionDupe = {standard: true}\r\n\t\t\t} else if (action.action === \"standard\" && actionDupe.standard === true && actionDupe.full === true) {\r\n\t\t\t\tactionDupe = {standard: false}\r\n\t\t\t} else if (action.action === \"move\" && actionDupe.move === false && actionDupe.full === false) {\r\n\t\t\t\tactionDupe = {move: true}\r\n\t\t\t} else if (action.action === \"move\" && actionDupe.move === true && actionDupe.full === true) {\r\n\t\t\t\tactionDupe = {move: false}\r\n\t\t\t} else {\r\n        actionDupe[action.action] = !actionDupe[action.action]\r\n      }\r\n      return {...state, character_info: {...state.character_info, actions: actionDupe}}\r\n    case \"NEW TURN\":\r\n      let actions = {full: false, standard: false, move: false, swift: false, immediate: false}\r\n      return {...state, character_info: {...state.character_info, actions: actions, hardcode: {...state.character_info.hardcode, power: false, eBloodActive: false, ffs: false, fd: false, charge: false, cleave: false, arcane_strike: false, taal_tele: false, augment: false, slide: false, dodgingPanache: false, parry: false, precise: false, charmedActive: false}}}\r\n    case \"POWER ATTACK\":\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, power: true}}}\r\n    case \"RAGE\":\r\n      let status = action.change === \"START\" ? true : false\r\n      let conditions = [...state.character_info.conditions]\r\n      if (!status){\r\n        conditions.push('Fatigued')\r\n      }\r\n      return {...state, character_info: {...state.character_info, conditions, hardcode: {...state.character_info.hardcode, rage: status}}}\r\n    case \"SPARKS\":\r\n      let eBlood = state.character_info.hardcode.eBlood || 0\r\n      eBlood < 3 ? eBlood += 1 : eBlood = 3\r\n      return {...state, character_info: {...state.character_info, actions: {...state.character_info.actions, swift: true}, hardcode: {...state.character_info.hardcode, eBlood, eBloodActive: true}}}\r\n    case 'CONDITION':\r\n      let newConditions = [...state.character_info.conditions]\r\n      if (newConditions.includes(action.condition)){\r\n        newConditions = newConditions.filter(c => c !== action.condition)\r\n      } else {\r\n        newConditions.push(action.condition)\r\n      }\r\n      return {...state, character_info: {...state.character_info, conditions: newConditions}}\r\n    case 'FIVE FOOT STEP':\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, ffs: true}}}\r\n    case 'FIGHT DEFENSIVELY':\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, fd: true}}}\r\n    case 'CHARGE':\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, charge: true}}}\r\n    case 'SHIFT':\r\n      const shifterPoints = state.character_info.hardcode.points - action.points\r\n      let combat = action.form === 'combat' ? action.detail : state.character_info.hardcode.combat\r\n      let minor = action.form === 'minor' ? action.detail : state.character_info.hardcode.minor\r\n      let major = action.form === 'major' ? action.detail : state.character_info.hardcode.major\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, points: shifterPoints, combat, minor, major}}}\r\n    case 'CHANGE SIZE':\r\n    let baseSize = \"Medium\"\r\n    let updatedSize = action.size\r\n    if (state.character.name === \"Nettie\"){\r\n      baseSize = 'Tiny'\r\n    }\r\n    if (state.character.name === 'Cedrick'){\r\n      baseSize = 'Small'\r\n    }\r\n    if (action.size === state.character_info.size){\r\n      updatedSize = baseSize\r\n    }\r\n      return {...state, character_info: {...state.character_info, size: updatedSize}}\r\n    case 'CLEAVE':\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, cleave: true}}}\r\n    case 'SPEED SHIFT':\r\n      let speed = hardcoded(state, action).speed\r\n      if (action.speed !== state.character_info.speed){\r\n        speed = action.speed\r\n      }\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, speed}}}\r\n    case 'FROG COMBAT':\r\n      let frogCombat = state.character_info.hardcode.frogCombat\r\n      if (action.name === frogCombat){\r\n        frogCombat = null\r\n      } else {\r\n        frogCombat = action.name\r\n      }\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, frogCombat}}}\r\n    case \"COMMAND POINTS CHANGE\":\r\n      let ringAmount = action.amount === 'increase' ? state.character_info.hardcode.ringPoints + 1 : state.character_info.hardcode.ringPoints - 1\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, ringPoints: ringAmount}}}\r\n    case 'TIME TRAVEL':\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, age: action.age}}}\r\n    case 'LIMIT CASTING':\r\n      // check to see if limits has been created\r\n      let limits = state.character_info.hardcode.limits || []\r\n      // find a specific spell that is limited\r\n      let chosenLimit = limits.find(l => l.name === action.name)\r\n      // if found\r\n      if (chosenLimit){\r\n        // go through all limits, update that one with ++ to cast\r\n        limits = limits.map(l => {\r\n          if (l.name === action.name){\r\n            return {name: l.name, cast: l.cast+1}\r\n          } else {\r\n            return l\r\n          }\r\n        })\r\n      } else {\r\n        // else, create it\r\n        limits.push({name: action.name, cast: 1})\r\n      }\r\n      // add limits to hardcode\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, limits}}}\r\n    case 'ABILITY SCORE IMPROVEMENT':\r\n      let ability_scores = {...state.character_info.ability_scores}\r\n      ability_scores[action.ability_score]++\r\n      return {...state, character_info: {...state.character_info, ability_scores}}\r\n    case 'REMOVE ALLY':\r\n      let monstersToBeRemoved = [...state.character_info.hardcode.monsters]\r\n      monstersToBeRemoved.splice(action.monster, 1)\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, monsters: monstersToBeRemoved}}}\r\n    case 'I CAN FLY':\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, fly: !state.character_info.hardcode.fly}}}\r\n    case 'ARCANE STRIKE':\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, arcane_strike: true}}}\r\n    case 'INIT REROLL':\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, init_reroll: true}}}\r\n    case 'DOUBLE DAMAGE':\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, double_damage: true}}}\r\n    case 'TAALMON TELEPORT':\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, taal_tele: true}}}\r\n    case 'AUTUMN EQUINOX':\r\n      let autumn = !state.character_info.hardcode.autumn\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, autumn}}}\r\n    case 'USED ITEM':\r\n      let usedItems = state.character_info.hardcode.usedItems || []\r\n      usedItems.push(action.name)\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, usedItems}}}\r\n    case 'ACTIVE ARMOR':\r\n      let armor = state.character_info.hardcode.armor\r\n      armor = armor === action.name ? null : action.name\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, armor}}}\r\n    case 'AUGMENT SPELL':\r\n      let augment = {spellId: action.spellId, augment: action.augment}\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, augment}}}\r\n    case 'DIMENSIONAL SLIDE':\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, slide: true}}}\r\n    case 'SIZE STAFF':\r\n      let sizeStaff = (state.character_info.hardcode.sizeStaff || 0) + action.amount\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, sizeStaff}}}\r\n    case 'ENLARGE':\r\n      let enlarge = !state.character_info.hardcode.enlarge\r\n      var staticSize = 'Medium'\r\n      staticSize = state.character.name === 'Nettie' ? 'Tiny' : staticSize\r\n      staticSize = state.character.name === 'Cedrick' ? 'Small' : staticSize\r\n      staticSize = state.character_info.hardcode.age === 'Young' ? 'Small' : staticSize\r\n      var newSize = 'Large'\r\n      newSize = state.character.name === 'Nettie' ? 'Small' : newSize\r\n      newSize = state.character.name === 'Cedrick' ? 'Medium' : newSize\r\n      newSize = state.character_info.hardcode.age === 'Young' ? 'Medium' : newSize\r\n\r\n      newSize = state.character_info.size === staticSize ? newSize : staticSize\r\n      // ^this^ code doesn't account for polymorph size changes\r\n      return {...state, character_info: {...state.character_info, size: newSize, hardcode: {...state.character_info.hardcode, enlarge}}}\r\n    case 'REDUCE':\r\n      let reduce = !state.character_info.hardcode.reduce\r\n      var staticSize = 'Medium'\r\n      staticSize = state.character.name === 'Nettie' ? 'Tiny' : staticSize\r\n      staticSize = state.character.name === 'Cedrick' ? 'Small' : staticSize\r\n      staticSize = state.character_info.hardcode.age === 'Young' ? 'Small' : staticSize\r\n      var newSize = 'Small'\r\n      newSize = state.character.name === 'Nettie' ? 'Diminutive' : newSize\r\n      newSize = state.character.name === 'Cedrick' ? 'Tiny' : newSize\r\n      newSize = state.character_info.hardcode.age === 'Young' ? 'Tiny' : newSize\r\n\r\n      newSize = state.character_info.size === staticSize ? newSize : staticSize\r\n      // ^this^ code doesn't account for polymorph size changes\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, reduce}}}\r\n    case 'DODGING PANACHE':\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, dodgingPanache: true}}}\r\n    case 'PARRY':\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, parry: true}}}\r\n    case 'PRECISE STRIKE':\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, precise: true}}}\r\n    case 'CHARMED':\r\n      let charmedLife = state.character_info.hardcode.charmedLife\r\n      let charmedActive = false\r\n      if (charmedLife < 3){\r\n        charmedLife += 1\r\n        charmedActive = true\r\n      }\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, charmedLife, charmedActive}}}\r\n    case 'EXPEDITIOUS RETREAT':\r\n      let expeditious = !state.character_info.hardcode.expeditious\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, expeditious}}}\r\n    case 'SWIM SPEED':\r\n      let swim = !state.character_info.hardcode.swim\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, swim}}}\r\n    case 'TEMPEST':\r\n      let tempest = (state.character_info.hardcode.tempest || 0) + action.amount\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, tempest}}}\r\n    case 'SWIM 20':\r\n      let swim20 = !state.character_info.hardcode.swim20\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, swim20}}}\r\n    case 'LAND 10':\r\n      let land10 = !state.character_info.hardcode.land10\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, land10}}}\r\n    case 'LAND 20':\r\n      let land20 = !state.character_info.hardcode.land20\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, land20}}}\r\n    case 'QUICK':\r\n      let quick = !state.character_info.hardcode.quick\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, quick}}}\r\n    case 'ALTER SELF':\r\n      let alterSelf = !state.character_info.hardcode.alterSelf\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, alterSelf}}}\r\n    case 'AMMO CHANGE':\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, ammo: action.ammo}}}\r\n    case 'ACTIVE WEAPON':\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, activeWeapon: action.weapon}}}\r\n    case 'WEAPON AMMO':\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, weaponAmmo: action.weaponAmmo}}}\r\n    case 'SPEND AMMO':\r\n      let selectedWeapon = state.character_info.hardcode.weaponAmmo.find(wa => wa.weapon === action.weapon)\r\n      let selectedAmmo = state.character_info.hardcode.ammo.find(a => a.name === selectedWeapon.ammo)\r\n      let ammoDup = [...state.character_info.hardcode.ammo]\r\n      ammoDup = ammoDup.map(a => {\r\n        if (a.name === selectedAmmo.name){\r\n          let thisAmmo = {...a}\r\n          if (thisAmmo.amount > 0){\r\n            thisAmmo.amount = thisAmmo.amount-1\r\n          }\r\n          return thisAmmo\r\n        } else {\r\n          return a\r\n        }\r\n      })\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, ammo: ammoDup}}}\r\n    case 'HELMSMAN':\r\n      let helmsman = !state.character_info.hardcode.helmsman\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, helmsman}}}\r\n    case 'CREW':\r\n      let crew = !state.character_info.hardcode.crew\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, crew}}}\r\n    case 'TELESWAP':\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, teleswap: true}}}\r\n    case 'MAGICAL HATS':\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, magicalHats: true}}}\r\n    case 'REALITY BEND':\r\n      let manipulate = state.character_info.hardcode.manipulate || 0\r\n      if (manipulate <= 2){\r\n        manipulate = manipulate + 1\r\n      }\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, manipulate}}}\r\n    case 'AURA READ':\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, auraRead: true}}}\r\n    case 'STEAL TIME':\r\n      let stealTime = !state.character_info.hardcode.stealTime\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, stealTime}}}\r\n    case 'BONUS':\r\n      let bonuses\r\n      if (action.alreadyEquipped){\r\n        bonuses = state.character_info.bonuses.filter(b => b.source !== action.bonus.source)\r\n      } else if (action.remove) {\r\n\t\t\t\tbonuses = [...state.character_info.bonuses].filter(b => b.source.featureId !== action.bonus.source.featureId && b.source.sourceId !== action.bonus.source.sourceId && b.source.source !== action.bonus.source.source)\r\n\t\t\t} else {\r\n        bonuses = [...state.character_info.bonuses, action.bonus]\r\n      }\r\n      return { ...state, character_info: { ...state.character_info, bonuses } }\r\n    case 'EFFECT':\r\n      let effects\r\n      if (action.alreadyEquipped){\r\n        effects = state.character_info.effects.filter(b => b.source !== action.effect.source)\r\n      } else {\r\n        effects = [...state.character_info.effects, action.effect]\r\n      }\r\n      return { ...state, character_info: { ...state.character_info, effects } }\r\n    case 'ACTIVATED FEATURE':\r\n      let features\r\n      if (action.feature.remove){\r\n        features = state.character_info.features.filter(f => f.source !== action.feature.source)\r\n      } else {\r\n        features = [...state.character_info.features, action.feature]\r\n      }\r\n      return { ...state, character_info: { ...state.character_info, features } }\r\n    case 'NEW NOTE':\r\n      var notes\r\n      if (state.character.notes.find(n => n.id === action.note.id)){\r\n        notes = [...state.character.notes].map(n => n.id !== action.note.id ? n : action.note)\r\n      } else {\r\n        notes = [...state.character.notes, action.note]\r\n      }\r\n      return {...state, character: {...state.character, notes}}\r\n    case 'REMOVE NOTE':\r\n      var notes = [...state.character.notes].filter(n => n.id !== action.note.id)\r\n      return {...state, character: {...state.character, notes}}\r\n    case 'DONE PREPARING':\r\n      return {...state, character: {...state.character, is_done_preparing_spells: true}}\r\n    case 'EQUIP CMI':\r\n      let cmis = [...state.character.character_magic_items]\r\n      let filteredCMIs = cmis.map(mi => {\r\n        if (mi.id === action.id){\r\n          let altered = {...mi}\r\n          altered.equipped = !mi.equipped\r\n          return altered\r\n        } else {\r\n          return mi\r\n        }\r\n      })\r\n      return {...state, character: {...state.character, character_magic_items: filteredCMIs}}\r\n    case 'EQUIP WEAPON':\r\n      let cws = [...state.character.character_weapons]\r\n      let mappedCWs = cws.map(w => {\r\n        if (w.id === action.id){\r\n          var altered = {...w}\r\n          altered.equipped = action.equipped\r\n          return altered\r\n        } else if (w.equipped === action.equipped || ( (action.equipped === \"Primary\" || action.equipped === \"Off\") && ( (w.equipped === \"Two\") || (w.equipped === \"Double\") ) ) || action.equipped === \"Two\" || action.equipped === \"Double\"){\r\n          // if the weapon is in the same slot as the new weapon, remove it\r\n          // if the weapon is in two hands, and new weapon is in one hand, remove it\r\n          // if the new weapon is in two hands or a double weapon, remove all other weapons\r\n          let alteredOldEquipped = {...w}\r\n          alteredOldEquipped.equipped = \"\"\r\n          return alteredOldEquipped\r\n        } else {\r\n          return w\r\n        }\r\n      })\r\n      return {...state, character: {...state.character, character_weapons: mappedCWs}}\r\n    case 'EQUIP ARMOR':\r\n      var selectedCA = state.character.character_armors.find(a => a.id === action.id)\r\n      let cas = [...state.character.character_armors].map(a => {\r\n        if (a.id === action.id){\r\n          var altered = {...a}\r\n          altered.equipped = action.equipped\r\n          return altered\r\n        } else {\r\n          var altered = {...a}\r\n          altered.equipped = false\r\n          return altered\r\n        }\r\n      })\r\n      return {...state, character: {...state.character, character_armors: cas}}\r\n    case 'MUTAGEN':\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, mutagen: action.name}}}\r\n    case 'TOGGLE MUTAGEN':\r\n      let activeMutagen = state.character_info.hardcode.activeMutagen || false\r\n      return {...state, character_info: {...state.character_info, hardcode: {...state.character_info.hardcode, activeMutagen: !activeMutagen}}}\r\n\t\t// TO BE DEPRECATED\r\n    case 'PROFICIENCY':\r\n      let proficiencies = {...state.character_info.proficiencies}\r\n\t\t\tlet d = action.detail\r\n      if (d.type === \"weapon\"){\r\n        if (d.additive){\r\n          if (d.proficiency_group) proficiencies.weapon.groups.push(d.proficiency_group)\r\n          if (d.weapon_id) proficiencies.weapon.individualIds.push(d.weapon_id)\r\n        }\r\n      }\r\n      return {...state, character_info: {...state.character_info, proficiencies}}\r\n\t\t// NEW IMPROVED \"PROFICIENCY\"\r\n\t\t// CHANGE NAME TO JUST \"PROFICIENCY\" WHEN OTHER CAN BE REMOVED\r\n\t\t// LOCATED IN /helper_functions/action_creator/features\r\n\t\tcase 'NEW PROFICIENCY':\r\n\t\t\treturn {...state, character_info: {...state.character_info, proficiencies: action.proficiencies}}\r\n    case 'TOOLTIP':\r\n      let tooltip = {message: action.message, target: action.target}\r\n      if (state.tooltip.target === action.target){\r\n        tooltip = {}\r\n      }\r\n      return {...state, tooltip}\r\n    case 'MODAL':\r\n      let modal = [...state.modal]\r\n      if (action.options?.remove ?? false){\r\n        modal.splice(action.options.indexToRemove, 1)\r\n      } else {\r\n\t\t\t\tif (modal.length === 5){\r\n\t\t\t\t\tmodal.pop()\r\n\t\t\t\t}\r\n\t\t\t\tmodal.push({detail: action.detail, obj: action.obj, name: action.options?.name || action.obj?.name || null})\r\n\t\t\t}\r\n      return {...state, modal}\r\n    case \"CHANGE AMMO\":\r\n      var characterWeapons = [...state.character.character_weapons].map(cw => {\r\n        if (cw.id === action.characterWeapon.id){\r\n          let newCW = {...cw}\r\n          newCW.character_weapon_ammunition_id = action.ammoId\r\n          newCW.magazine = 0\r\n          newCW.improvised_ammunition = action.ammoId === 0 ? true : false\r\n          return newCW\r\n        } else {return cw}\r\n      })\r\n      return {...state, character: {...state.character, character_weapons: characterWeapons}}\r\n    case \"UPDATE AMMO\":\r\n      var characterWeapons = [...state.character.character_weapons].map(cw => {\r\n        if (cw.id === action.cw.id){\r\n          let newCW = {...cw}\r\n          newCW.magazine = action.magazine\r\n          return newCW\r\n        } else if (cw.id === action.cw.character_weapon_ammunition_id && action.ammunition_amount){\r\n          let newCWAmmo = {...cw}\r\n          newCWAmmo.ammunition_amount = action.ammunition_amount\r\n          return newCWAmmo\r\n        } else {return cw}\r\n      })\r\n      return {...state, character: {...state.character, character_weapons: characterWeapons}}\r\n    case \"DISCOVER EQUIPMENT\":\r\n      var equipment = [...state.character[action.detail]].map(eq => {\r\n        if (eq.id === action.id){\r\n          var newEq = {...eq}\r\n          newEq.discovered = true\r\n          return newEq\r\n        } else {return eq}\r\n      })\r\n      return {...state, character: {...state.character, [action.detail]: equipment}}\r\n    case \"ADD MOVEMENT\":\r\n      return {\r\n        ...state,\r\n        character_info: {\r\n          ...state.character_info,\r\n          movement: [\r\n            ...state.character_info.movement,\r\n            action.movement\r\n          ]\r\n        }\r\n      }\r\n\t\tcase \"ACTIVE FEATURE\":\r\n\t\t\tvar activeFeatures = [...state.character_info.activeFeatures]\r\n\t\t\tvar oldActiveFeaturesLength = activeFeatures.length\r\n\t\t\tactiveFeatures = activeFeatures.filter(af => af.featureId !== action.featureSource.featureId && af.sourceId !== action.featureSource.sourceId && (af.source !== action.featureSource.source || af.senderId !== action.featureSource.senderId))\r\n\r\n\t\t\tif (activeFeatures.length === oldActiveFeaturesLength && (action.options?.additive ?? true)){\r\n\t\t\t\tactiveFeatures.push(action.featureSource)\r\n\t\t\t}\r\n\t\t\treturn {...state, character_info: {...state.character_info, activeFeatures}}\r\n\t\tcase \"ADD TEMP HP\":\r\n\t\t\tvar temporaryHitPoints = [...state.character_info.temporaryHitPoints]\r\n\t\t\ttemporaryHitPoints.push({...action.tempHP, damage: 0})\r\n\t\t\treturn {...state, character_info: {...state.character_info, temporaryHitPoints}}\r\n\t\tcase \"REMOVE TEMP HP\":\r\n\t\t\tvar temporaryHitPoints = [...state.character_info.temporaryHitPoints]\r\n\t\t\ttemporaryHitPoints = temporaryHitPoints.filter(fhp => fhp.source.sourceId !== action.source.sourceId && fhp.source.featureId !== action.source.featureId && fhp.source.source !== action.source.source)\r\n\t\t\treturn {...state, character_info: {...state.character_info, temporaryHitPoints}}\r\n\t\tcase \"DAMAGE TEMP HP\":\r\n\t\t\tvar temporaryHitPoints = [...state.character_info.temporaryHitPoints]\r\n\t\t\ttemporaryHitPoints = temporaryHitPoints.map(fhp => {\r\n\t\t\t\tif (fhp.source.sourceId === action.source.sourceId && fhp.source.featureId === action.source.featureId && fhp.source.source === action.source.source) {\r\n\t\t\t\t\tfhp.damage += action.damage\r\n\t\t\t\t\treturn fhp\r\n\t\t\t\t} else {return fhp}\r\n\t\t\t})\r\n\t\t\treturn {...state, character_info: {...state.character_info, temporaryHitPoints}}\r\n\t\tcase \"ADJUST CHARACTER\":\r\n\t\t\treturn {...state, character: {...state.character, [action.adjust]: action.value}}\r\n\t\tcase \"ADJUST CHARACTER REPLACE VALUE IN ARRAY\":\r\n\t\t\tvar adjustedArray = [...state.character[action.adjust]]\r\n\t\t\tif (!adjustedArray.length){\r\n\t\t\t\tadjustedArray.push(action.value)\r\n\t\t\t} else {\r\n\t\t\t\tadjustedArray = adjustedArray.map(aa => {\r\n\t\t\t\t\treturn aa.id === action.value.id ? action.value : aa\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\treturn {...state, character: {...state.character, [action.adjust]: adjustedArray}}\r\n\t\tcase \"ADJUST STATUS CONDITION\":\r\n\t\t\treturn {...state, character_info: {...state.character_info, statusConditions: action.conditions}}\r\n\t\tcase 'FORBIDDEN':\r\n\t\t\tlet forbidden\r\n\t\t\tif (action.remove) {\r\n\t\t\t\tforbidden = [...state.character_info.forbidden].filter(f => f.source.featureId !== action.forbidden.source.featureId && f.source.sourceId !== action.forbidden.source.sourceId && f.source.source !== action.forbidden.source.source)\r\n\t\t\t} else {\r\n\t\t\t\tforbidden = [...state.character_info.forbidden, action.forbidden]\r\n\t\t\t}\r\n\t\t\treturn { ...state, character_info: { ...state.character_info, forbidden } }\r\n\t\tcase \"ADJUST CHARACTER INFO\":\r\n\t\t\treturn {...state, character_info: {...state.character_info, [action.adjust]: action.value}}\r\n\t\tcase \"UPDATE NOTIFICATIONS\":\r\n\t\t\treturn {...state, notifications: action.notifications}\r\n\t\tcase \"UPDATE STORED NOTIFICATIONS\":\r\n\t\t\treturn {...state, storedNotifications: action.notifications}\r\n\t\tcase \"REMOVE ENCOUNTER\":\r\n\t\t\tlet userCopy = {...state.currentUser}\r\n\t\t\tvar newCampaigns = userCopy.campaigns.map(camp => {\r\n\t\t\t\tif (camp.id === action.campaignId){\r\n\t\t\t\t\tlet newEncounters = camp.encounters.filter(enc => enc.id !== action.encounterId)\r\n\t\t\t\t\tlet campCopy = {...camp, encounters: newEncounters}\r\n\t\t\t\t\treturn campCopy\r\n\t\t\t\t} else {return camp}\r\n\t\t\t})\r\n\t\t\treturn {...state, currentUser: {...state.currentUser, campaigns: newCampaigns}}\r\n\t\tcase \"UPDATE ENCOUNTER\":\r\n\t\t\tvar newCampaigns = state.currentUser.campaigns.map(camp => {\r\n\t\t\t\tif (camp.id === parseInt(action.campaignId)){\r\n\t\t\t\t\tlet newEncounters = camp.encounters.map(enc => {\r\n\t\t\t\t\t\tif (enc.id === action.encounter.id){return action.encounter}\r\n\t\t\t\t\t\telse {return enc}\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn {...camp, encounters: newEncounters}\r\n\t\t\t\t} else {return camp}\r\n\t\t\t})\r\n\t\t\tconsole.log(action)\r\n\t\t\treturn {...state, currentUser: {...state.currentUser, campaigns: newCampaigns}}\r\n\t\tcase \"START ENCOUNTER\":\r\n\t\t\treturn {...state, activeEncounter: {...action.encounter, participants: []}}\r\n\t\tcase \"END ENCOUNTER\":\r\n\t\t\treturn {...state, activeEncounter: {}}\r\n\t\tcase \"STORE ARCHETYPES\":\r\n\t\t\tvar klasses = [...state.classes].map(cl => {\r\n\t\t\t\tif (cl.id !== action.klassId){\r\n\t\t\t\t\treturn cl\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn {...cl, archetypes: action.archetypes}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\treturn {...state, classes: klasses}\r\n\t\tcase \"STORE OPTIONS\":\r\n\t\t\tvar klasses = [...state.classes].map(cl => {\r\n\t\t\t\tif (cl.id !== action.klassId){\r\n\t\t\t\t\treturn cl\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar klassFeatures = cl.klass_features.map(kf => {\r\n\t\t\t\t\t\tif (kf.id !== action.klassFeatureId){\r\n\t\t\t\t\t\t\treturn kf\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn {...kf, options: action.options}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn {...cl, klass_features: klassFeatures}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\treturn {...state, classes: klasses}\r\n\t\tcase 'ADD SKILL':\r\n\t\t\treturn {...state, skills: [...state.skills, action.skill]}\r\n\t\tcase \"UPDATE COLOR THEME\":\r\n\t\t\treturn {...state, settings: {...state.settings, ...action.obj}}\r\n\t\tcase \"ADD DICE\":\r\n\t\t\tvar modalDupe = [...state.modal]\r\n\t\t\tlet isTheDiceModalOpen = modalDupe.find(m => m.detail === \"rollDice\")\r\n\t\t\tif (!isTheDiceModalOpen){\r\n\t\t\t\tmodalDupe.push({detail: \"rollDice\", obj: action.obj})\r\n\t\t\t} else {\r\n\t\t\t\tmodalDupe = modalDupe.map(m => {\r\n\t\t\t\t\tif (m.detail !== \"rollDice\"){return m}\r\n\t\t\t\t\treturn {...m, obj: action.obj}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\treturn {...state, modal: modalDupe}\r\n\t\tcase \"UPDATE MODAL\":\r\n\t\t\tvar modalDupe = [...state.modal]\r\n\t\t\tmodalDupe = modalDupe.map(m => {\r\n\t\t\t\tif (m.detail === action.detail && m.obj.id === action.obj.id){\r\n\t\t\t\t\treturn {...m, obj: action.obj, options: action.obj || m.options}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn m\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\treturn {...state, modal: modalDupe}\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst castingCantripSPASpontaneous = (state, action) => {\r\n  // duplicate state\r\n  let modifiedState = {...state.character_info}\r\n  // find out which class you are modifying\r\n  let klassId = action.spell.klass_id || action.spell.klass.id\r\n  const klass = modifiedState.classes.find(cl => cl.id === klassId)\r\n  // find out which level spell you cast\r\n  const lvl = action.spell.spell_level\r\n  // if redux doesn't have that spell level, create it. if not, update the value by one\r\n  if (lvl === 0 && action.infinite_zero_level){\r\n    // if you have infinite cantrips, do nothing\r\n  } else {\r\n    klass.castSpells[lvl] ? klass.castSpells[lvl] = klass.castSpells[lvl] + 1 : klass.castSpells[lvl] = 1\r\n  }\r\n  // merge changes into duplicate of state\r\n  modifiedState.classes.map(cl => cl.id === klass.id ? klass : cl)\r\n  return modifiedState\r\n}\r\n\r\nconst castingPrepared = (state, action) => {\r\n  // duplicate state\r\n  let modifiedState = {...state.character}\r\n  // loop though all the character's prepared spells\r\n  let modifiedPrepared = modifiedState.prepared_spells.map(cs => {\r\n    // find the cast spell within the character's prepared spells\r\n    if (cs.id === action.spell.id){\r\n      // return the updated cast spell\r\n      return action.spell\r\n    } else {\r\n      // otherwise, return the original spell\r\n      return cs\r\n    }\r\n  })\r\n  modifiedState.prepared_spells = modifiedPrepared\r\n  return modifiedState\r\n}\r\n\r\nconst hardcoded = (state, action) => {\r\n  switch(action.name){\r\n    case 'Nettie':\r\n      return {points: 19, speed: 20}\r\n    case 'Merg':\r\n      return {points: 18, speed: 30}\r\n    case 'Cedrick':\r\n      return {points: 7, speed: 30, ringPoints: 2, ammo:[{name: 'bolt', amount: 6}], weaponAmmo: [{weapon: '+1 Underwater Light Crossbow', ammo: 'bolt'}]}\r\n    case 'Maddox':\r\n      return {points: 6, speed: 30, age: 'Venerable'}\r\n    case 'Persephone':\r\n      return {speed: 30, ammo:[{name: 'bolt', amount: 10}], weaponAmmo: [{weapon: 'Light Crossbow', ammo: 'bolt'}]}\r\n    case 'Robby':\r\n      return {speed: 30, points: 4, charmedLife: 0, ammo:[{name: 'arrow', amount: 11}, {name: 'cartridge', amount: 0}, {name: '+1 cunning arrow', amount: 1}], weaponAmmo: [{weapon: 'Long Bow', ammo: 'arrow'}, {weapon: 'Revolver', ammo: 'cartridge'}]}\r\n    case 'Festus':\r\n      return {speed: 35}\r\n    case 'Grackle':\r\n      return {speed: 30, points: 0, ammo: [{name: 'arrow', amount: 20}], weaponAmmo:[{weapon: 'Long Bow', ammo: 'arrow'}]}\r\n    default:\r\n      return {}\r\n  }\r\n}\r\n\r\nexport default reducer;\r\n","import { createStore, applyMiddleware } from 'redux';\r\nimport reducer from './reducer';\r\nimport reduxThunk from 'redux-thunk'\r\n\r\nconst store = createStore(reducer, applyMiddleware(reduxThunk));\r\n\r\nexport default store;\r\n","import Store from '../../store'\r\n\r\nconst { getState, dispatch } = Store\r\n\r\nexport const modalAction = (detail, obj, options) => dispatch({type: \"MODAL\", detail, obj, options})\r\nexport const modalUpdateAction = (detail, obj, options) => dispatch({type: \"UPDATE MODAL\", detail, obj, options})\r\nexport const exitModalAction = () => ({type: \"MODAL\", remove: true})\r\nexport const updateNotificationsAction = notifications => dispatch({type: \"UPDATE NOTIFICATIONS\", notifications})\r\nexport const updateStoredNotificationsAction = notifications => dispatch({type: \"UPDATE STORED NOTIFICATIONS\", notifications})\r\nexport const tooltipAction = (message, target) => dispatch({type: \"TOOLTIP\", message, target})\r\nexport const diceAction = (obj) => dispatch({type: \"ADD DICE\", obj})\r\n","import React from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { Menu } from \"semantic-ui-react\";\r\nimport localhost from \"../localhost\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faBars } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { modalAction } from \"../utils/action_creator/popups\";\r\n\r\nclass NavBar extends React.Component {\r\n  state = {\r\n    currentUser: null,\r\n    menuDropDown: false\r\n  };\r\n\r\n  componentDidMount() {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (window.location.href === \"http://localhost:3000/characters/10001\") {\r\n      return null;\r\n    }\r\n    if (!this.state.currentUser && token) {\r\n      fetch(`${localhost}/api/v1/auth`, {\r\n        headers: {\r\n          Authenticate: token\r\n        }\r\n      })\r\n        .then(r => r.json())\r\n        .then(data => {\r\n          if (!data.error) {\r\n            this.props.dispatch({\r\n              type: \"SIGNIN\",\r\n              user: data.current_user,\r\n              admin: data.current_user.admin\r\n            });\r\n            console.log(data);\r\n            this.setState({ currentUser: data.current_user });\r\n            if (\r\n              this.props.location.pathname === \"/login\" ||\r\n              this.props.location.pathname === \"/signup\"\r\n            ) {\r\n              this.props.history.push(\"/\");\r\n            }\r\n          }\r\n        });\r\n    }\r\n    // COMMENTED OUT FOR TESTING PURPOSES\r\n    // let data = {\r\n    //   current_user: {\r\n    //     id: 1,\r\n    //     skillset_id: 2,\r\n    //     username: \"jack\",\r\n    //     admin: true,\r\n    //     campaigns: [],\r\n    //     characters: []\r\n    //   }\r\n    // }\r\n    // this.props.dispatch({type: 'SIGNIN', user: data.current_user, admin: data.current_user.admin })\r\n    // console.log(data)\r\n    // this.setState({currentUser: data.current_user})\r\n    // console.log(this.props.location.pathname)\r\n    // this.props.history.push(\"/\")\r\n  }\r\n\r\n  renderLogOut = () => {\r\n    localStorage.removeItem(\"token\");\r\n    this.props.dispatch({ type: \"SIGNOUT\" });\r\n    this.setState({ currentUser: \"\" });\r\n    this.props.history.push(\"/login\");\r\n  };\r\n\r\n  menuClick = url => {\r\n    this.props.history.push(url);\r\n    this.setState({ menuDropDown: false });\r\n  };\r\n\r\n  renderNavBar = () => {\r\n    if (localStorage.computer === \"true\") {\r\n      return (\r\n        <nav className=\"menu\">\r\n          <div>\r\n            <a className=\"item project-name\">CharacterFinder</a>\r\n            <a\r\n              className=\"item\"\r\n              onClick={() => this.props.history.push(\"/classes\")}\r\n            >\r\n              Classes\r\n            </a>\r\n            <a\r\n              className=\"item\"\r\n              onClick={() => this.props.history.push(\"/ancestries\")}\r\n            >\r\n              Ancestries\r\n            </a>\r\n            <a\r\n              className=\"item\"\r\n              onClick={() => this.props.history.push(\"/spells\")}\r\n            >\r\n              Spells\r\n            </a>\r\n          </div>\r\n          <div>\r\n            {this.props.currentUser ? (\r\n              <a className=\"item\" onClick={() => this.props.history.push(\"/\")}>\r\n                {this.props.currentUser.username}\r\n              </a>\r\n            ) : (\r\n              <a\r\n                className=\"item\"\r\n                onClick={() => this.props.history.push(\"/login\")}\r\n              >\r\n                Login\r\n              </a>\r\n            )}\r\n            {this.props.currentUser ? (\r\n              <a className=\"item\" onClick={this.renderLogOut}>\r\n                Log Out\r\n              </a>\r\n            ) : (\r\n              <a\r\n                className=\"item\"\r\n                onClick={() => this.props.history.push(\"/signup\")}\r\n              >\r\n                Sign Up\r\n              </a>\r\n            )}\r\n            <a\r\n              className=\"item\"\r\n              onClick={() =>\r\n                modalAction(\"settings\", null, { name: \"Settings\" })\r\n              }\r\n            >\r\n              Settings\r\n            </a>\r\n          </div>\r\n        </nav>\r\n      );\r\n    } else {\r\n      if (!this.state.menuDropDown) {\r\n        return (\r\n          <div id=\"mobile-navbar\">\r\n            <div\r\n              className=\"project-name\"\r\n              onClick={() =>\r\n                this.setState({ menuDropDown: !this.state.menuDropDown })\r\n              }\r\n            >\r\n              CharacterFinder\r\n            </div>\r\n            <button\r\n              onClick={() =>\r\n                this.setState({ menuDropDown: !this.state.menuDropDown })\r\n              }\r\n            >\r\n              <FontAwesomeIcon icon={faBars} />\r\n            </button>\r\n          </div>\r\n        );\r\n      } else {\r\n        return (\r\n          <>\r\n            <div id=\"mobile-navbar\">\r\n              <div className=\"project-name\">CharacterFinder</div>\r\n              <button\r\n                onClick={() =>\r\n                  this.setState({ menuDropDown: !this.state.menuDropDown })\r\n                }\r\n              >\r\n                <FontAwesomeIcon icon={faBars} />\r\n              </button>\r\n            </div>\r\n            <div id=\"drop-down-menu\">\r\n              <Menu pointing secondary vertical>\r\n                <Menu.Item onClick={() => this.menuClick(\"/classes\")}>\r\n                  Classes\r\n                </Menu.Item>\r\n                <Menu.Item onClick={() => this.menuClick(\"/races\")}>\r\n                  Races\r\n                </Menu.Item>\r\n                <Menu.Item onClick={() => this.menuClick(\"/skills\")}>\r\n                  Skills\r\n                </Menu.Item>\r\n                <Menu.Item onClick={() => this.menuClick(\"/spells\")}>\r\n                  Spells\r\n                </Menu.Item>\r\n                {this.state.currentUser ? (\r\n                  <Menu.Item onClick={() => this.menuClick(\"/\")}>\r\n                    {this.state.currentUser.username}\r\n                  </Menu.Item>\r\n                ) : (\r\n                  <Menu.Item onClick={() => this.menuClick(\"/login\")}>\r\n                    Login\r\n                  </Menu.Item>\r\n                )}\r\n                {this.state.currentUser ? (\r\n                  <Menu.Item onClick={this.renderLogOut}>Log Out</Menu.Item>\r\n                ) : (\r\n                  <Menu.Item onClick={() => this.menuClick(\"/signup\")}>\r\n                    Sign Up\r\n                  </Menu.Item>\r\n                )}\r\n              </Menu>\r\n            </div>\r\n          </>\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return <>{this.renderNavBar()}</>;\r\n  }\r\n}\r\n\r\nconst mapStatetoProps = state => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin\r\n  };\r\n};\r\n\r\nexport default withRouter(connect(mapStatetoProps)(NavBar));\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nconst Tooltip = props => {\r\n\r\n  const tooltipEl = React.useRef(null)\r\n  const [elementWidth, setWidth] = React.useState(200)\r\n\r\n  React.useEffect(() => {\r\n    setWidth(tooltipEl.current.offsetWidth + 10)\r\n  }, [])\r\n\r\n  const howFarElementIsFromTop = window.pageYOffset + props.tooltip.target.getBoundingClientRect().top\r\n  const heightOfElement = props.tooltip.target.offsetHeight\r\n  const howFarElementIsFromLeft = window.pageXOffset + props.tooltip.target.getBoundingClientRect().left\r\n  const widthOfElement = props.tooltip.target.offsetWidth\r\n\r\n  const style = {\r\n    left: (howFarElementIsFromLeft + (widthOfElement/2)-(elementWidth/2) + 'px'),\r\n    top: (howFarElementIsFromTop + heightOfElement + 17 + 'px'),\r\n    position: 'absolute',\r\n    zIndex: 1\r\n  }\r\n\r\n  return (\r\n    <section ref={tooltipEl} id='tooltip' className='on top' style={style}>\r\n      <div className='tooltip-arrow'></div><div className='tooltip-inner' style={{maxWidth: elementWidth+'px'}}>{props.tooltip.message}</div>\r\n    </section>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    tooltip: state.tooltip\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Tooltip);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom'; // to access React Portal API\r\n\r\nclass Portal extends React.Component {\r\n  constructor(){\r\n    super();\r\n    this.container = document.createElement('div');\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    document.body.appendChild(this.container);\r\n  }\r\n\r\n  componentWillUnmount = () => {\r\n    document.body.removeChild(this.container);\r\n  }\r\n\r\n  render() {\r\n    const { children } = this.props;\r\n    return ReactDOM.createPortal(children, this.container);\r\n  }\r\n}\r\n\r\nexport default Portal\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport localhost from '../localhost'\r\n\r\n\r\nclass HPChanges extends React.Component {\r\n\r\n  state = {\r\n    amount: 0,\r\n    adjustment: '',\r\n    lethality: 'lethal',\r\n    damageType: '',\r\n    id: this.props.character.id\r\n  }\r\n\r\n  renderAmount = () => {\r\n    if (localStorage.computer === \"true\"){\r\n      return (\r\n        <div>\r\n          <label>\r\n            <input type=\"number\" name=\"amount\" min=\"0\" value={this.state.amount} onChange={this.handleChange}/>\r\n          </label>\r\n        {/*this.state.lethality === 'lethal' && this.state.adjustment === 'harm' && <label>\r\n        Damage Type:\r\n        <select name=\"damageType\" value={this.state.damageType} onChange={this.handleChange}>\r\n        <option value=\"\" >Choose One</option>\r\n        <option value=\"Bludgeoning\">Bludgeoning</option>\r\n        <option value=\"Slashing\">Slashing</option>\r\n        <option value=\"Piercing\">Piercing</option>\r\n        <option value=\"Fire\">Fire</option>\r\n        <option value=\"Cold\">Cold</option>\r\n        <option value=\"Acid\">Acid</option>\r\n        <option value=\"Electricity\">Electricity</option>\r\n        <option value=\"Sonic\">Sonic</option>\r\n        <option value=\"Psychic\">Psychic</option>\r\n        <option value=\"Force\">Force</option>\r\n        <option value=\"Positive\">Positive</option>\r\n        <option value=\"Negetive\">Negetive</option>\r\n        </select>\r\n        </label>*/}\r\n        </div>\r\n      )\r\n    } else {\r\n      return (\r\n        <span>\r\n          <label>\r\n            <input className='mobile-input-field mobile-input-field-number' type=\"number\" name=\"amount\" value={this.state.amount} onChange={this.handleChange} />\r\n          </label>\r\n        </span>\r\n      )\r\n    }\r\n  }\r\n\r\n  handleChange = (e) => {\r\n    this.setState({[e.target.name]: e.target.value})\r\n  }\r\n\r\n  handleMobileButton = (sign) => {\r\n    if (sign === '+'){\r\n      this.setState({amount: this.state.amount + 1})\r\n    } else if (sign === '-' && this.state.amount > 0){\r\n      this.setState({amount: this.state.amount - 1})\r\n    }\r\n  }\r\n\r\n  renderAdjustment = () => {\r\n    if (localStorage.computer === \"true\"){\r\n      return (\r\n        <div>\r\n          <label>\r\n          HP Changes:\r\n            <select name=\"adjustment\" value={this.state.adjustment} onChange={this.handleChange}>\r\n              <option value=\"\">Choose One</option>\r\n              <option value=\"heal\">Heal</option>\r\n              <option value=\"harm\">Damage</option>\r\n              <option value=\"temp\">Temporary HP</option>\r\n            </select>\r\n          </label>\r\n        </div>\r\n      )\r\n    } else if (localStorage.computer === \"false\"){\r\n      return (\r\n        <span>\r\n          <label>\r\n            <select className='mobile-dropdown' name=\"adjustment\" value={this.state.adjustment} onChange={this.handleChange}>\r\n              <option value=\"\">Choose One</option>\r\n              <option value=\"heal\">Heal</option>\r\n              <option value=\"harm\">Damage</option>\r\n              <option value=\"temp\">Temporary HP</option>\r\n            </select>\r\n          </label>\r\n        </span>\r\n      )\r\n    }\r\n  }\r\n\r\n  renderLethality = () => {\r\n    return (\r\n      <form>\r\n        <span className=\"radio\">\r\n          <label>\r\n            <input type=\"radio\" name=\"lethality\" value=\"lethal\" checked={this.state.lethality === 'lethal'} onChange={this.handleChange} />\r\n            Lethal\r\n          </label>\r\n        </span>\r\n        <span className=\"radio\">\r\n          <label>\r\n            <input type=\"radio\" name=\"lethality\" value=\"nonLethal\" checked={this.state.lethality === 'nonLethal'} onChange={this.handleChange} />\r\n            Non-lethal\r\n          </label>\r\n        </span>\r\n      </form>\r\n      )\r\n    }\r\n\r\n    renderString = () => {\r\n      switch(this.state.adjustment){\r\n        case \"heal\":\r\n          return \"Heal Up\";\r\n        case \"harm\":\r\n          return this.state.lethality === 'lethal' ? \"Deal Damage\" : 'Just a Scratch';\r\n        case \"temp\":\r\n          return \"Buff Me\"\r\n        default:\r\n          return \"no button found\"\r\n      }\r\n    }\r\n\r\n  renderTypeAdjustments = () =>{\r\n    let array = []\r\n    let name = this.props.character.name\r\n    if (name === \"Merg\"){\r\n      array.push('DR 3/- (DR 6/- against non-lethal)')\r\n      array.push('Resist fire 2')\r\n      if (this.props.character_info.hardcode.rage){\r\n        array.push('Resist electricity 10')\r\n      }\r\n    } else if (name === 'Robby'){\r\n      array.push('Immune fire (50 damage total)')\r\n    } else if (name === 'Grackle'){\r\n      array.push('Resist fire 5')\r\n    } else if (name === \"Majestik\"){\r\n\t\t\tarray.push(\"Resist fire 5\")\r\n\t\t}\r\n    return (\r\n\t\t\t<>\r\n\t\t\t\t<h3>Damage Adjustments</h3>\r\n\t      <ul style={{borderColor: `#${this.props.settings.borderColor}`}}>\r\n\t        {array.map(el => <li>{el}</li>)}\r\n\t      </ul>\r\n\t\t\t</>\r\n    )\r\n  }\r\n\r\n\tremoveTemporaryHPRedux = () => {\r\n\t\t// NEW DATA\r\n\r\n\t\t// STORED DATA\r\n\t\tconst { temporaryHitPoints } = this.props.character_info\r\n\t\tlet damageDealt = parseInt(this.state.amount)\r\n\r\n\t\t// CALCULATED DATA\r\n\r\n\t\ttemporaryHitPoints.forEach(thp => {\r\n\t\t\tlet remainingTHP = thp.bonus - thp.damage\r\n\t\t\tif (damageDealt >= remainingTHP){\r\n\t\t\t\tthis.props.dispatch({type: 'REMOVE TEMP HP', source: thp.source})\r\n\t\t\t\tdamageDealt -= remainingTHP\r\n\t\t\t} else {\r\n\t\t\t\t this.props.dispatch({type: 'DAMAGE TEMP HP', source: thp.source, damage: damageDealt})\r\n\t\t\t\t damageDealt = 0\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\treturn damageDealt\r\n\t}\r\n\r\n\trenderHPDispatch = (amount, adjustment, lethality) => {\r\n\t\tswitch(adjustment){\r\n\t\t\t// if it was harm, calculate the damage done to temp, and reduce temp and increase lethal\r\n\t\t\t// if it was heal, reduce lethal and/or non lethal\r\n\t\t\t// if it was temp, increase temp\r\n\t\t\t// if it was non-lethal, increase non-lethal\r\n\t\t\tcase \"harm\":\r\n\t\t\t\tif (lethality === \"nonLethal\"){\r\n\t\t\t\t\tthis.props.dispatch({type: \"ADJUST CHARACTER\", adjust: \"non_lethal_damage\", value: this.props.character.non_lethal_damage + amount})\r\n\t\t\t\t\tbreak\r\n\t\t\t\t} else if (lethality === \"lethal\"){\r\n\t\t\t\t\tlet remainingDamage = amount\r\n\t\t\t\t\tif (this.props.character.temp_hp){\r\n\t\t\t\t\t\tlet reducedTempHP = remainingDamage >= this.props.character.temp_hp ? 0 : this.props.character.temp_hp - remainingDamage\r\n\t\t\t\t\t\tremainingDamage = remainingDamage <= this.props.character.temp_hp ? 0 : remainingDamage - this.props.character.temp_hp\r\n\t\t\t\t\t\tthis.props.dispatch({type: \"ADJUST CHARACTER\", adjust: \"temp_hp\", value: reducedTempHP})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.props.dispatch({type: \"ADJUST CHARACTER\", adjust: \"lethal_damage\", value: this.props.character.lethal_damage + remainingDamage})\r\n\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\tcase \"heal\":\r\n\t\t\t\tlet toBeHealedLethal = amount >= this.props.character.lethal_damage ? 0 : this.props.character.lethal_damage - amount\r\n\t\t\t\tthis.props.dispatch({type: \"ADJUST CHARACTER\", adjust: \"lethal_damage\", value: toBeHealedLethal})\r\n\t\t\t\tlet toBeHealedNonLethal = amount >= this.props.character.non_lethal_damage ? 0 : this.props.character.non_lethal_damage - amount\r\n\t\t\t\tthis.props.dispatch({type: \"ADJUST CHARACTER\", adjust: \"non_lethal_damage\", value: toBeHealedNonLethal})\r\n\t\t\t\tbreak\r\n\t\t\tcase \"temp\":\r\n\t\t\t\tthis.props.dispatch({type: \"ADJUST CHARACTER\", adjust: \"temp_hp\", value: this.props.character.temp_hp + amount})\r\n\t\t\t\tbreak\r\n\t\t\tdefault:\r\n\t\t\t\tbreak\r\n\t\t}\r\n\t}\r\n\r\n  buttonEvent = (adjustment, lethality) => {\r\n\t\tlet amount = parseInt(this.state.amount)\r\n\t\tif (adjustment === \"harm\"){\r\n\t\t\tamount = this.removeTemporaryHPRedux()\r\n\t\t}\r\n\t\tif (amount > 0){\r\n\t\t\tfetch(`${localhost}/api/v1/hp_changes`, {\r\n\t\t\t\tmethod: 'PATCH',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t'Accept': 'application/json'\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify({...this.state, adjustment, lethality})\r\n\t\t\t})\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(data => {\r\n\t\t\t\tthis.renderHPDispatch(amount, adjustment, lethality)\r\n\r\n\r\n\t\t\t\t// this.props.dispatch({type: 'CHARACTER', character: data.character })\r\n\t\t\t\t// this.setState({character: data.character, modal: false}, this.dispatchAbilityScores(), this.dispatchClassLevels())\r\n        if (localStorage.computer === \"true\"){\r\n          this.props.exitModal()\r\n        }\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tthis.props.exitModal()\r\n\t\t}\r\n    if (localStorage.computer === \"false\"){\r\n      this.props.closeHPChanges()\r\n    }\r\n  }\r\n\r\n  renderMobileButtons = () => {\r\n    let minusColor = '#fff'\r\n    minusColor = this.state.amount <= 0 ? '#999' : minusColor\r\n\r\n    return (\r\n      <section style={{textAlign: 'center'}}>\r\n        <button className='mobile-hp-button glow-blue' style={{borderRadius: '0.5em 0em 0em 0.5em', borderRightWidth: '1px', backgroundColor: '#fff'}} onClick={() => this.handleMobileButton('+')}>+</button>\r\n        <button className='mobile-hp-button glow-red' style={{borderRadius: '0em 0.5em 0.5em 0em', borderLeftWidth: '1px', backgroundColor: minusColor}} onClick={() => this.handleMobileButton('-')}>-</button>\r\n      </section>\r\n    )\r\n  }\r\n\r\n\trenderButtons = () => {\r\n\r\n\t\treturn (\r\n\t\t\t<div style={{display: \"grid\", gridTemplateColumns: \"1fr 1fr\"}}>\r\n\t\t\t\t<button style={{background: `linear-gradient(90deg, #fff 35%, #f00)`}} onClick={() => this.buttonEvent(\"harm\", \"lethal\")}>Lethal Damage</button>\r\n\t\t\t\t<button style={{background: `linear-gradient(90deg, #fff 35%, #0f0)`}} onClick={() => this.buttonEvent(\"heal\")}>Heal</button>\r\n\t\t\t\t<button style={{background: `linear-gradient(90deg, #fff 35%, #f00)`}} onClick={() => this.buttonEvent(\"harm\", \"nonLethal\")}>Non-Lethal Damage</button>\r\n\t\t\t\t<button style={{background: `linear-gradient(90deg, #fff 35%, #0892D0)`}} onClick={() => this.buttonEvent(\"temp\")}>Temporary Hit Points</button>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n  render() {\r\n    return (\r\n      <section id=\"character-show-hp-container\">\r\n\t\t\t\t<div>\r\n        \t{this.renderAmount()}\r\n\t\t\t\t\t{this.renderTypeAdjustments()}\r\n\t\t\t\t</div>\r\n        {localStorage.computer === \"false\" && <span><button className='mobile-close-button' onClick={this.props.closeHPChanges}>X</button></span>}\r\n\r\n        {localStorage.computer === \"false\" && this.renderMobileButtons()}\r\n\r\n\t\t\t\t{this.renderButtons()}\r\n      </section>\r\n    )\r\n  }\r\n\t// {<button className='mobile-submit-button' >{this.renderString()}</button>}\r\n\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n    character: state.character,\r\n    character_info: state.character_info,\r\n\t\tsettings: state.settings\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(HPChanges)\r\n","// FREQUENTLY USED FUNCTIONS\r\n\r\nexport const mod = (score) => {\r\n  return Math.floor( (score - 10) / 2 )\r\n}\r\n\r\nexport const size = (string) => {\r\n  switch(string){\r\n    case 'Fine':\r\n      return 8\r\n    case 'Diminutive':\r\n      return 4\r\n    case 'Tiny':\r\n      return 2\r\n    case 'Small':\r\n      return 1;\r\n    case 'Large':\r\n      return -1;\r\n    case 'Huge':\r\n      return -2\r\n    case 'Gargantuan':\r\n      return -4\r\n    case 'Colossal':\r\n      return -8\r\n    default:\r\n      return 0;\r\n  }\r\n}\r\n\r\nexport const pluser = (num) => {\r\n  return num < 0 ? num : `+${num}`\r\n}\r\n\r\nexport const actionClass = a => {\r\n  switch(a){\r\n    case 'Standard Action':\r\n      return 'standard'\r\n    case 'Swift Action':\r\n      return 'swift'\r\n    case 'Move Action':\r\n      return 'move'\r\n    case 'Full-Round Action':\r\n      return 'full'\r\n    case 'Immediate Action':\r\n      return 'immediate'\r\n    case 'Free Action':\r\n      return 'free'\r\n    default:\r\n      return a\r\n  }\r\n}\r\n\r\nexport const th = (num) => {\r\n  let suffix = 'th'\r\n  switch(num){\r\n    case 1:\r\n      suffix ='st'\r\n      break\r\n    case 2:\r\n      suffix = 'nd'\r\n      break\r\n    case 3:\r\n      suffix = 'rd'\r\n      break\r\n    default:\r\n      suffix = 'th'\r\n      break\r\n  }\r\n  return num + suffix\r\n}\r\n\r\nexport const consolidateDate = (date) => {\r\n  const { current_weekday, current_month, current_day, current_age, current_year } = date\r\n\tlet array = []\r\n\tif (current_weekday) array.push(`${current_weekday},`)\r\n\tif (current_month) array.push(`${current_month}`)\r\n\tif (current_day) array.push(`${th(current_day)},`)\r\n\tif (current_age) array.push(`${th(current_age)},`)\r\n\tif (current_year) array.push(`${current_year}`)\r\n  return array.join(\" \")\r\n}\r\n\r\nexport const truncatedDate = (date) => {\r\n  const { month, day, year } = date\r\n  let monthNum = 0\r\n  switch(month){\r\n    case 'Floreau Budding':\r\n      monthNum = 1\r\n      break\r\n    case 'Floreau Equinox':\r\n      monthNum = 2\r\n      break\r\n    case 'Floreau Blossom':\r\n      monthNum = 3\r\n      break\r\n    case 'Harvest Flourish':\r\n      monthNum = 4\r\n      break\r\n    case 'Harvest Solstice':\r\n      monthNum = 5\r\n      break\r\n    case 'Harvest Scorch':\r\n      monthNum = 6\r\n      break\r\n    case 'Autumn Cornucopia':\r\n      monthNum = 7\r\n      break\r\n    case 'Autumn Equinox':\r\n      monthNum = 8\r\n      break\r\n    case 'Autumn Festival':\r\n      monthNum = 9\r\n      break\r\n    case 'Borealis Snowfall':\r\n      monthNum = 10\r\n      break\r\n    case 'Borealis Solstice':\r\n      monthNum = 11\r\n      break\r\n    case 'Borealis Renewal':\r\n      monthNum = 12\r\n      break\r\n    case 'Lunalis':\r\n      monthNum = 13\r\n      break\r\n    default:\r\n      break\r\n  }\r\n  return `${monthNum}/${day}/${year}`\r\n}\r\n\r\n// DEPRICATED\r\n// PLEASE REFER ALL NEW ATTACK BONUS CALCULATIONS TO\r\n// helper_functions/calculations/attack_bonus\r\n\r\nexport const ab = (characterObj, characterInfoObj, type) => {\r\n  let attackBonus = 0\r\n  characterInfoObj.classes.forEach(cl => {\r\n    let klass = characterObj.uniq_klasses.find(uk => uk.id === cl.id)\r\n    let bab = 1\r\n    bab = parseInt(klass.hit_die) === 8 ? 0.75 : bab\r\n    bab = parseInt(klass.hit_die) === 6 ? 0.5 : bab\r\n    attackBonus += bab * cl.level\r\n  })\r\n  if (type === \"melee\"){\r\n    let str = mod(characterInfoObj.ability_scores.strength)\r\n    return attackBonus + str\r\n  } else if (type === \"range\"){\r\n    let dex = mod(characterInfoObj.ability_scores.dexterity)\r\n    return attackBonus + dex\r\n  }\r\n}\r\n","import localhost from '../localhost'\r\n\r\nexport const getFetch = url => {\r\n\treturn fetch(`${localhost}/api/v1/${url}`)\r\n\t\t.then(r => r.json())\r\n\t\t.catch(err => {\r\n\t\t\tconsole.log(\"Error\", err.status, err.exception)\r\n\t\t})\r\n}\r\n\r\nexport const postFetch = (url, body) => {\r\n\treturn fetch(`${localhost}/api/v1/${url}`, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\t'Response': 'application/json',\r\n\t\t\t'Authenticate': localStorage.token\r\n\t\t},\r\n\t\tbody: JSON.stringify(body)\r\n\t}).then(r => r.json())\r\n}\r\n\r\nexport const patchFetch = (url, body) => {\r\n\treturn fetch(`${localhost}/api/v1/${url}`, {\r\n\t\tmethod: 'PATCH',\r\n\t\theaders: {\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\t'Response': 'application/json'\r\n\t\t},\r\n\t\tbody: JSON.stringify(body)\r\n\t}).then(r => r.json())\r\n}\r\n\r\nexport const deleteFetch = url => {\r\n\treturn fetch(`${localhost}/api/v1/${url}`, {\r\n\t\tmethod: 'DELETE'\r\n\t}).then(r => r.json())\r\n}\r\n","import Store from '../../store'\r\n\r\nconst { getState, dispatch } = Store\r\n\r\nexport const settingsAction = (settings) => dispatch({type: 'SET SETTINGS', settings})\r\nexport const characterAction = (character) => dispatch({type: 'CHARACTER', character })\r\n\r\nexport const characterClassesAction = (array) => dispatch({type: 'CHARACTER_CLASSES', classes: array})\r\n\r\nexport const abilityScoreAction = ({ability, score}) => dispatch({type: 'ABILITY SCORE', ability, score })\r\n\r\nexport const abilityScoreImprovementAction = (ability_score) => dispatch({type: \"ABILITY SCORE IMPROVEMENT\", ability_score})\r\n\r\nexport const endTurnAction = () => dispatch({type: \"NEW TURN\"})\r\n\r\nexport const replaceCharacterArrayAction = (adjust, value) => dispatch({type: \"ADJUST CHARACTER REPLACE VALUE IN ARRAY\", adjust, value})\r\n\r\n// export const replaceCharacterInfoArrayAction = (adjust, value) => dispatch({type: \"ADJUST CHARACTER INFO REPLACE VALUE IN ARRAY\", adjust, value})\r\n\r\nexport const replaceCharacterInfoAction = (adjust, value, options) => dispatch({type: 'ADJUST CHARACTER INFO', adjust, value})\r\n\r\nexport const replaceCharacterAction = (adjust, value) => dispatch({type: 'ADJUST CHARACTER', adjust, value})\r\n\r\nexport const triggerTurnActionAction = action => dispatch({type: 'TRIGGER ACTION', action})\r\n\r\nexport const discoverEquipmentAction = (detail, id) => dispatch({type: 'DISCOVER EQUIPMENT', detail, id})\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport _ from 'lodash'\r\nimport localhost from '../localhost'\r\nimport { patchFetch } from '../utils/fetches'\r\nimport { modalUpdateAction } from '../utils/action_creator/popups'\r\nimport { replaceCharacterAction } from '../utils/action_creator/character'\r\n\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faTrash } from '@fortawesome/free-solid-svg-icons'\r\n\r\nconst UserItemAdjustment = props => {\r\n\r\n  const [trading, setTrading] = React.useState(false);\r\n  const [tradedChar, setTradedChar] = React.useState(0);\r\n  const [stash, setStash] = React.useState(false);\r\n  const [stashContainer, setStashContainer] = React.useState(0);\r\n  const [containers, setContainers] = React.useState([])\r\n  const [contents, setContents] = React.useState([])\r\n  const [adjust, setAdjust] = React.useState(false);\r\n  const [adjustedValue, setAdjustedValue] = React.useState(0);\r\n\r\n  React.useEffect(() => {\r\n    fetch(`${localhost}/api/v1/campaign_containers/${props.character.campaign.id}`)\r\n      .then(r => r.json())\r\n      .then(data => {\r\n        setContainers(data)\r\n      })\r\n  }, [props.item])\r\n\r\n  let itemType\r\n  switch(props.url){\r\n    case \"character_weapon\":\r\n      itemType = 'weapon'\r\n      break\r\n    case \"character_armor\":\r\n      itemType = 'armor'\r\n      break\r\n    case \"character_magic_item\":\r\n      itemType = 'magicItem'\r\n      break\r\n  }\r\n\r\n  const { item, url } = props\r\n  const { equipped, known } = props.characterItem\r\n\tconsole.log(\"equipped\", equipped)\r\n\r\n  let featureWithUsage = item.features ? item.features.find(f => f.usage) : false\r\n  let usage = featureWithUsage ? featureWithUsage.usage : false\r\n  const canEquip = ((item.slot !== 'potion' && item.slot !== 'none' && item.proficiency !== \"\") || usage.wieldable) ? true : false\r\n  // AN ITEM IS EQUIPABLE IF IT:\r\n    // IS NOT A POTION\r\n    // IS A SLOTLESS ITEM\r\n    // OR IF IT HAS A WIELDABLE PROPERTY IN ITS USAGE\r\n  let canBeStored = !props.characterItem.stored_character_magic_item && !!containers\r\n  let hasContents = item.features ? !!item.features.find(f => f.feature_container) : false\r\n  let adjustable = usage ? usage.adjustable : false\r\n\r\n  const destroyItem = () => {\r\n    fetch(`${localhost}/api/v1/${url}s/${props.characterItem.id}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      }\r\n    })\r\n      .then(r => r.json())\r\n      .then(data => {\r\n        if (data.status === 404 || data.status === 500){\r\n          console.log(data)\r\n        } else {\r\n          props.exitModal()\r\n          props.dispatch({type: 'CHARACTER', character: data.character })\r\n        }\r\n      })\r\n  }\r\n\r\n  const renderEquip = (e) => {\r\n    let newEquippedStatus = e.target.value\r\n    if (itemType === 'armor'){ newEquippedStatus = newEquippedStatus === \"true\" ? true : false }\r\n    fetch(`${localhost}/api/v1/${url}s_equip/${props.characterItem.id}`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify({equipped: newEquippedStatus})\r\n    })\r\n      .then(r => r.json())\r\n      .then(data => {\r\n        if (data.status === 404 || data.status === 500){\r\n          console.log(data)\r\n        } else {\r\n          if (item.features) {\r\n            item.features.forEach(f => {\r\n              if (!!f.skill_bonuses.length){\r\n                f.skill_bonuses.forEach(sk => {\r\n                  const { skill_id, bonus, bonus_type, duration } = sk\r\n                  // const conditions = sk.feature_skill_bonus_conditions.map(c => {return {condition: c.condition}})\r\n                  props.dispatch({type: 'BONUS', bonus: {type: 'skill', skill_id, bonus, bonus_type, duration, source: item.name}, alreadyEquipped: equipped})\r\n                })\r\n              }\r\n              if (!!f.stat_bonuses.length){\r\n                f.stat_bonuses.forEach(st => {\r\n                  const { statistic, bonus, bonus_type, duration } = st\r\n                  const conditions = st.feature_stat_bonus_conditions.map(c => {return {condition: c.condition}})\r\n                  props.dispatch({type: 'BONUS', bonus: {type: 'stat', statistic, bonus, bonus_type, duration, source: item.name, conditions}, alreadyEquipped: equipped})\r\n                })\r\n              }\r\n              if (!!f.skill_notes.length){\r\n                f.skill_notes.forEach(sk => {\r\n                  const { skill_id, note} = sk\r\n                  props.dispatch({type: 'BONUS', bonus: {type: 'note', skill_id, note, source: item.name}, alreadyEquipped: equipped})\r\n                })\r\n              }\r\n              if (!!f.languages.length){\r\n                f.languages.forEach(l => {\r\n                  const { language, note } = l\r\n                  props.dispatch({type: 'EFFECT', effect: {type: 'language', language, note, source: item.name}, alreadyEquipped: equipped})\r\n                })\r\n              }\r\n            })\r\n          }\r\n          // props.dispatch({type: 'CHARACTER', character: data.character })\r\n          let dispatchType\r\n          dispatchType = url === 'character_magic_item' ? 'EQUIP CMI' : dispatchType\r\n          dispatchType = url === 'character_weapon' ? 'EQUIP WEAPON' : dispatchType\r\n          dispatchType = url === 'character_armor' ? 'EQUIP ARMOR' : dispatchType\r\n          props.dispatch({type: dispatchType, id: props.characterItem.id, equipped: newEquippedStatus})\r\n\t\t\t\t\tif (itemType === \"armor\"){\r\n\t\t\t\t\t\tprops.dispatch({type: \"MODAL\", detail: \"armor\", obj: {...props.characterItem, equipped: newEquippedStatus}})\r\n\t\t\t\t\t}\r\n        }\r\n      })\r\n  }\r\n\r\n  const renderTrade = () => {\r\n    fetch(`${localhost}/api/v1/${url}s_trade/${props.characterItem.id}`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        new_owner_id: tradedChar\r\n      })\r\n    })\r\n      .then(r => r.json())\r\n      .then(data => {\r\n        if (data.status === 404 || data.status === 500){\r\n          console.log(data)\r\n        } else {\r\n          props.exitModal()\r\n          props.dispatch({type: 'CHARACTER', character: data.character })\r\n          setTrading(false)\r\n          setTradedChar(0)\r\n\r\n        }\r\n      })\r\n  }\r\n\r\n  const renderStash = () => {\r\n    let stored_cmi = props.characterItem\r\n    fetch(`${localhost}/api/v1/container_storage/${stashContainer}`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        cmi: stored_cmi.id\r\n      })\r\n    })\r\n      .then(r => r.json())\r\n      .then(data => {\r\n        if (data.status === 404 || data.status === 500){\r\n          console.log(data)\r\n        } else {\r\n          props.exitModal()\r\n          props.dispatch({type: 'CHARACTER', character: data.character })\r\n          setStash(false)\r\n          setStashContainer(0)\r\n        }\r\n      })\r\n  }\r\n\r\n  const renderWithdraw = (id) => {\r\n    fetch(`${localhost}/api/v1/container_withdraw/${id}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        Accept: 'application/json'\r\n      },\r\n      body: JSON.stringify({cmi: true})\r\n    })\r\n      .then(r => r.json())\r\n      .then(data => {\r\n        if (data.status === 404 || data.status === 500){\r\n          console.log(data)\r\n        } else {\r\n          props.exitModal()\r\n          props.dispatch({type: 'CHARACTER', character: data.character })\r\n          let newContents = contents.filter(c => c.id !== id)\r\n        }\r\n      })\r\n  }\r\n\r\n  const fetchContents = () => {\r\n    if (!!contents.length){\r\n      setContents([])\r\n    } else {\r\n      fetch(`${localhost}/api/v1/container/${props.characterItem.container.id}`)\r\n      .then(r => r.json())\r\n      .then(data => {\r\n        setContents(data)\r\n      })\r\n    }\r\n  }\r\n\r\n  const fetchAdjust = (id) => {\r\n    fetch(`${localhost}/api/v1/character_magic_items/${id}`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        Accept: 'application/json'\r\n      },\r\n      body: JSON.stringify({count: 0 - adjustedValue})\r\n    })\r\n      .then(r => r.json())\r\n      .then(data => {\r\n        if (data.status === 404 || data.status === 500){\r\n          console.log(data)\r\n        } else {\r\n          props.exitModal()\r\n          props.dispatch({type: 'CHARACTER', character: data.character })\r\n          setAdjustedValue(0)\r\n          setAdjust(false)\r\n        }\r\n      })\r\n  }\r\n\r\n  const tradeSelection = () => {\r\n    return (\r\n      <React.Fragment>\r\n        <label>\r\n          Who?\r\n          <select name=\"tradedChar\" value={tradedChar} onChange={(e) => setTradedChar(e.target.value)}>\r\n            <option value= \"\" >Select One</option>\r\n            {props.character.campaign.characters.filter(a => a.name !== props.character.name).map(a => <option value={a.id} >{a.name}</option>)}\r\n          </select>\r\n        </label>\r\n        {!!tradedChar && <button onClick={renderTrade}>Enter</button>}\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  const stashSelection = () => {\r\n    return (\r\n      <React.Fragment>\r\n        <label>\r\n        Who?\r\n        <select name=\"stashContainer\" value={stashContainer} onChange={(e) => setStashContainer(e.target.value)}>\r\n        <option value= \"\" >Select One</option>\r\n        {renderApplicableContainers()}\r\n        </select>\r\n        </label>\r\n        {!!stashContainer && <button onClick={renderStash}>Enter</button>}\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  const renderContents = () => {\r\n    return (\r\n      <div>\r\n        <ul>\r\n          {contents.map(cmi => <li>{`${cmi.character.name}'s ${cmi.discovered ? cmi.magic_item.name : cmi.false_desc}`} <button onClick={() => renderWithdraw(cmi.id)}>Withdraw</button></li>)}\r\n        </ul>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const renderApplicableContainers = () => {\r\n    let containersExcludingSelf = containers.filter(c => c.id !== props.characterItem.id)\r\n    return containersExcludingSelf.map(cmi => <option value={cmi.container.id}>{`${cmi.character.name}'s ${cmi.discovered ? cmi.magic_item.name : cmi.false_desc}`}</option>)\r\n  }\r\n\r\n  const adjustSelection = () => {\r\n    let featureUsage = props.characterItem.character_magic_item_feature_usages.find(fu => fu.feature_usage_id === usage.id)\r\n    let currentUsage = featureUsage.current_usage || 0\r\n    let limit = usage.limit\r\n    let remaining = limit - currentUsage\r\n    return (\r\n      <React.Fragment>\r\n        <span>{` (${remaining}/${limit})`}</span>\r\n        {(adjustedValue + remaining < 10) && <button onClick={() => setAdjustedValue(adjustedValue + 1)}>+</button>}\r\n        {(adjustedValue + remaining > 0) && <button onClick={() => setAdjustedValue(adjustedValue - 1)}>-</button>}\r\n        <span>Adjust: {adjustedValue}</span>\r\n        {!!adjustedValue && <button onClick={() => fetchAdjust(featureUsage.id)}>Submit</button>}\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  const equipSelection = () => {\r\n    let options = []\r\n    if (itemType === 'weapon'){\r\n      options.push(<option value=\"\">{equipped ? \"Unequip\" : \"Unequipped\"}</option>)\r\n      if (item.category === \"Light\" || item.category === \"One-Handed\" && !item.weapon_hands.length) {\r\n        options.push(<option value=\"Primary\">Primary Hand</option>)\r\n        options.push(<option value=\"Off\">Off Hand</option>)\r\n      }\r\n      if ((item.category === \"One-Handed\" || item.category === \"Two-Handed\") && !item.weapon_hands.length){options.push(<option value=\"Two\">Two-Handed</option>)}\r\n      if (item.double_weapon){options.push(<option value=\"Double\">Double</option>)}\r\n\r\n      if (item.weapon_hands.length){\r\n        item.weapon_hands.forEach(wh => {\r\n          if (wh.hands === \"One\") {options.push(<option value=\"Primary\">Primary Hand</option>)}\r\n          if (wh.hands === \"One\") {options.push(<option value=\"Off\">Off Hand</option>)}\r\n          if (wh.hands === \"Two\") {options.push(<option value=\"Two\">Two-Handed</option>)}\r\n        })\r\n      }\r\n    } else if (itemType === 'armor'){\r\n      options.push(<option value={false}>Unequip{!equipped && \"ed\"} ({item.remove})</option>)\r\n      options.push(<option value={true}>Equip{equipped && \"ed\"} ({item.don})</option>)\r\n    } else if (itemType === 'magicItem'){\r\n      options.push(<option value={false}>Unequip{!equipped && \"ed\"}</option>)\r\n      options.push(<option value={true}>Equip{equipped && \"ed\"}</option>)\r\n    }\r\n\r\n    return (\r\n      <label htmlFor=\"equipType\" name=\"Equip\">\r\n        <select name=\"equipType\" value={`${equipped}`} onChange={e => renderEquip(e)}>\r\n          {options}\r\n        </select>\r\n      </label>\r\n    )\r\n  }\r\n\r\n\tconst renderAmmunition = () => {\r\n\t\tif (!item.ammunition && item.ammunition_type){\r\n\t\t\tlet validAmmo = props.character.character_weapons.filter(cw => cw.weapon.ammunition && cw.weapon.ammunition_type === item.ammunition_type)\r\n\r\n\t\t\tlet activeAmmo = validAmmo.find(a => props.characterItem.character_weapon_ammunition_id === a.id) || {id: null, name: \"No Ammo\"}\r\n\t\t\tif (props.characterItem.character_weapon_ammunition_id === 0) {activeAmmo = {id: 0, name: \"Improvised Ammo\"}}\r\n\r\n\t\t\tlet options = []\r\n\t\t\toptions.push(<option value={null}>No Ammo</option>)\r\n\t\t\tvalidAmmo.forEach(characterAmmo => {\r\n\t\t\t\toptions.push(<option value={characterAmmo.id}>{characterAmmo.name || characterAmmo.weapon.name} x{characterAmmo.ammunition_amount ?? 0}</option>)\r\n\t\t\t})\r\n\t\t\toptions.push(<option value={0}>Improvised Ammo</option>)\r\n\r\n\t\t\tconst changeAmmo = e => {\r\n\t\t\t\te.preventDefault()\r\n\t\t\t\tlet id = parseInt(e.target.value)\r\n\r\n\t\t\t\tpatchFetch(`character_weapons_ammo/${props.characterItem.id}`, {ammo_id: id})\r\n\t\t\t\t\t.then(data => {\r\n\t\t\t\t\t\t// change the characterWeapons\r\n\t\t\t\t\t\tlet characterWeaponsDupe = props.character.character_weapons.map(cw => {\r\n\t\t\t\t\t\t\tif (cw.id === props.characterItem.id){\r\n\t\t\t\t\t\t\t\treturn {...cw, character_weapon_ammunition_id: id, improvised_ammunition: id === 0}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn cw\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\treplaceCharacterAction(\"character_weapons\", characterWeaponsDupe)\r\n\t\t\t\t\t\t// change the modal\r\n\t\t\t\t\t\tmodalUpdateAction(\"weapon\", {...props.characterItem, character_weapon_ammunition_id: id, improvised_ammunition: id === 0})\r\n\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<label htmlFor=\"ammunitionType\" name=\"Ammunition\">\r\n\t\t\t\t\t\t<select name=\"ammunitionType\" value={activeAmmo.id} onChange={changeAmmo}>\r\n\t\t\t\t\t\t\t{options}\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</p>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\r\n  return (\r\n    <div>\r\n      {canEquip ? equipSelection() : null}\r\n      <button id='tradeBtn' onClick={() => setTrading(!trading)}>Trade</button>\r\n      {canBeStored ? <button className={stash ? 'pressedBtn' : null} onClick={() => setStash(!stash)}>Stash</button> : <button onClick={() => renderWithdraw(props.characterItem.id)}>Withdraw</button>}\r\n      {hasContents && <button className={!!contents.length ? 'pressedBtn' : null} onClick={fetchContents}>Contents</button>}\r\n      {adjustable && <button onClick={() => setAdjust(!adjust)}>Adjustable</button>}\r\n      {!!contents.length ? renderContents() : null}\r\n      {trading ? tradeSelection() : null}\r\n      {stash ? stashSelection() : null}\r\n      {adjust ? adjustSelection() : null}\r\n\r\n      <div className='trash' onClick={destroyItem} ><FontAwesomeIcon icon={faTrash} size='1x'/></div>\r\n\r\n\t\t\t{renderAmmunition()}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(UserItemAdjustment)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport _ from 'lodash'\r\nimport localhost from '../localhost'\r\nimport { th } from '../fuf'\r\n\r\nimport UserItemAdjustment from './user_item_adjustment'\r\n\r\nconst ArmorSummary = props => {\r\n\r\n  const renderDescription = (desc) => {\r\n    let descArray = desc.split(\"\\n\\n\")\r\n    return descArray.map((para, idx) => {\r\n      return <p key={idx*3+1}>{para}</p>\r\n    })\r\n  }\r\n\r\n  const ca = props.characterArmor\r\n\r\n  // const renderMI = () => {\r\n  //   return (\r\n  //     <React.Fragment>\r\n  //       {props.cw.name ? <h3 style={{display: 'inline-block'}}><em>{props.cw.name}</em> ({props.cw.masterwork && 'mwk '}{item.name})</h3> : <h3 style={{display: 'inline-block'}}>{item.name}</h3>}\r\n  //\r\n  //       <UserItemAdjustment characterItem={props.cw} item={props.item} exitModal={props.exitModal} editModal={props.editModal} url='character_weapon'/>\r\n  //\r\n  //       <div>{item.category} {item.proficiency} {item.weapon_type} Weapon; <strong>Price</strong> {item.price_in_gp} gp; <strong>Weight</strong> {item.weight} lb;</div>\r\n  //\r\n  //       <div><strong>Damage</strong> {item.num_of_dice}d{item.damage_dice} {item.damage_type}; {item.critical_range !== 20 ? item.critical_range + `-20/` : null}x{item.critical}; {!!item.range && <><strong>Range</strong> {item.range} ft.</>}</div>\r\n  //\r\n  //       <br/>\r\n  //       <div style={{marginBottom: '1%', paddingBottom: '.8%', borderBottom: 'double'}}></div>\r\n  //\r\n  //       {!!props.cw.description && <><em>{renderDescription(props.cw.description)}</em><br/></>}\r\n  //\r\n  //       {renderDescription(item.description)}\r\n  //\r\n  //     </React.Fragment>\r\n  //   )\r\n  // }\r\n\r\n  const renderArmor = () => {\r\n    let armorName = ca.masterwork ? `mwk ${ca.armor.name}` : ca.armor.name\r\n    let name = ca.name ? <h3 style={{display: 'inline-block'}}><em>{ca.name}</em> (armorName)</h3> : <h3 style={{display: 'inline-block'}}>{armorName}</h3>\r\n\r\n    return (\r\n      <React.Fragment>\r\n        {name}\r\n        {ca.name && <UserItemAdjustment characterItem={ca} item={ca.armor} url='character_armor'/>}\r\n        <div>{ca.armor.proficiency} {ca.armor.bonus_type}; <strong>Price</strong> {ca.armor.price_in_gp} gp; <strong>Weight</strong> {ca.armor.weight} lb;</div>\r\n\t\t\t\t<div style={{marginBottom: '1%', paddingBottom: '.8%', borderBottom: 'double'}}></div>\r\n\t\t\t\t{ca.description && <div><em>{renderDescription(ca.description)}</em></div>}\r\n\t\t\t\t<div>{renderDescription(ca.armor.description)}</div>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  console.log('Armor Info', ca)\r\n  return (\r\n    <div>\r\n      {renderArmor()}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(ArmorSummary)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport _ from 'lodash'\r\nimport localhost from '../localhost'\r\nimport { th } from '../fuf'\r\n\r\nimport UserItemAdjustment from './user_item_adjustment'\r\n\r\nconst WeaponSummary = props => {\r\n\r\n  const { item } = props\r\n\r\n  const renderDescription = (desc) => {\r\n    let descArray = desc.split(\"\\n\\n\")\r\n    return descArray.map((para, idx) => {\r\n      return <p key={idx*3+1}>{para}</p>\r\n    })\r\n  }\r\n\r\n\r\n  const renderMI = () => {\r\n    return (\r\n      <React.Fragment>\r\n        {props.cw?.name ? <h3 style={{display: 'inline-block'}}><em>{props.cw?.name}</em> ({props.cw?.masterwork && 'mwk '}{item.name})</h3> : <h3 style={{display: 'inline-block'}}>{props.cw?.masterwork && 'mwk '}{item.name}</h3>}\r\n\r\n        {props.cw?.id && <UserItemAdjustment characterItem={props.cw} item={props.item} exitModal={props.exitModal} editModal={props.editModal} url='character_weapon'/>}\r\n\r\n        <div>{item.category} {item.proficiency} {item.weapon_type} Weapon; <strong>Price</strong> {item.price_in_gp} gp; <strong>Weight</strong> {item.weight} lb;</div>\r\n\r\n        <div><strong>Damage</strong> {item.num_of_dice}d{item.damage_dice} {item.damage_type}; {item.critical_range !== 20 ? item.critical_range + `-20/` : null}x{item.critical}; {!!item.range && <><strong>Range</strong> {item.range} ft.</>}</div>\r\n\r\n        <br/>\r\n        <div style={{marginBottom: '1%', paddingBottom: '.8%', borderBottom: 'double'}}></div>\r\n\r\n        {!!props.cw.description && <><em>{renderDescription(props.cw?.description)}</em><br/></>}\r\n\r\n        {renderDescription(item.description)}\r\n\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  console.log('Weapon Info', props)\r\n  return (\r\n    <div>\r\n      {renderMI()}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(WeaponSummary)\r\n","import Store from '../../store'\r\n\r\nconst { getState, dispatch } = Store\r\n\r\nexport const bonusAction = (bonus, remove = false) => dispatch({type: 'BONUS', bonus, remove})\r\nexport const addMovementAction = (movement) => dispatch({type: 'ADD MOVEMENT', movement})\r\nexport const proficiencyAction = (proficiencies) => dispatch({type: 'NEW PROFICIENCY', proficiencies})\r\nexport const activeFeatureAction = (featureSource, options) => dispatch({type: 'ACTIVE FEATURE', featureSource, options})\r\nexport const addTemporaryHitPointsAction = tempHP => dispatch({type: 'ADD TEMP HP', tempHP})\r\nexport const removeTemporaryHitPointsAction = source => dispatch({type: 'REMOVE TEMP HP', source})\r\nexport const adjustStatusConditionsAction = conditions => dispatch({type: \"ADJUST STATUS CONDITION\", conditions})\r\nexport const forbiddenAction = (forbidden, remove = false) => dispatch({type: 'FORBIDDEN', forbidden, remove})\r\n","import store from '../../store'\r\nimport * as featureDistributions from './features'\r\nimport {\r\n  bonusAction,\r\n\tforbiddenAction\r\n} from '../action_creator/features'\r\nimport { replaceCharacterInfoAction } from '../action_creator/character'\r\n\r\nexport const statusConditionDistribution = statusCondition => {\r\n\tlet character_info = featureDistributions.defaultCharacterInfo()\r\n\tlet source = {...statusCondition.source, condition: statusCondition.condition}\r\n\tswitch (statusCondition.condition){\r\n\t\tcase \"Fatigued\":\r\n\t\t\tcharacter_info.bonuses.push(featureDistributions.statBonusFeature({statistic: \"strength\", bonus: -2, bonus_type: \"untyped\", duration: \"temporary\", specific_statistic: null, bonus_multiplier: null, bonus_multiplier_based_on_feature_level: null}, source))\r\n\t\t\tcharacter_info.bonuses.push(featureDistributions.statBonusFeature({statistic: \"dexterity\", bonus: -2, bonus_type: \"untyped\", duration: \"temporary\", specific_statistic: null, bonus_multiplier: null, bonus_multiplier_based_on_feature_level: null}, source))\r\n\t\t\tcharacter_info.forbidden.push(featureDistributions.forbiddenFeature(\"Run\", source))\r\n\t\t\tcharacter_info.forbidden.push(featureDistributions.forbiddenFeature(\"Charge\", source))\r\n\t\t\tbreak\r\n\t\tdefault:\r\n\t\t\tbreak\r\n\t}\r\n\tcharacter_info.bonuses.forEach(b => {\r\n\t\tbonusAction(b)\r\n\t})\r\n\r\n\tcharacter_info.forbidden.forEach(f => {\r\n\t\tforbiddenAction(f)\r\n\t})\r\n}\r\n\r\nexport const removeStatusConditionDistribution = statusCondition => {\r\n\tlet character_info = {...store.getState().character_info}\r\n\r\n\tlet bonuses = character_info.bonuses.filter(b => {\r\n\t\treturn b.source.condition !== statusCondition.condition\r\n\t})\r\n\treplaceCharacterInfoAction(\"bonuses\", bonuses)\r\n\r\n\tlet forbidden = character_info.forbidden.filter(f => {\r\n\t\treturn f.source.condition !== statusCondition.condition\r\n\t})\r\n\treplaceCharacterInfoAction(\"forbidden\", forbidden)\r\n}\r\n","import Store from '../../store'\r\n\r\nconst { getState, dispatch } = Store\r\n\r\nexport const startWebsocketAction = websocket => dispatch({type: \"START WEBSOCKET\", websocket})\r\nexport const subscribeAction = websocket => dispatch({type: \"SUBSCRIBE WEBSOCKET\", websocket})\r\n","import store from '../../store'\r\nimport { replaceCharacterAction, discoverEquipmentAction } from '../action_creator/character'\r\nimport { patchFetch } from '../fetches'\r\n\r\nexport const incorporateItemToCharacter = (payload, source, options) => {\r\n\r\n\tconst { character } = store.getState()\r\n\r\n\tlet adjust\r\n\tswitch(payload.itemType){\r\n\t\tcase \"item\":\r\n\t\t\tadjust = \"items\"\r\n\t\t\tbreak\r\n\t\tcase \"poison\":\r\n\t\t\tadjust = \"poisons\"\r\n\t\t\tbreak\r\n\t\tcase \"weapon\":\r\n\t\t\tadjust = \"character_weapons\"\r\n\t\t\tbreak\r\n\t\tcase \"armor\":\r\n\t\t\tadjust = \"character_armors\"\r\n\t\t\tbreak\r\n\t\tcase \"magic_item\":\r\n\t\t\tadjust = \"character_magic_items\"\r\n\t\t\tbreak\r\n\t\tcase \"potion\":\r\n\t\t\tadjust = \"character_potions\"\r\n\t\t\tbreak\r\n\t\tcase \"scroll\":\r\n\t\t\tadjust = \"character_scrolls\"\r\n\t\t\tbreak\r\n\t\tcase \"wand\":\r\n\t\t\tadjust = \"character_wands\"\r\n\t\t\tbreak\r\n\t\tdefault:\r\n\t\t\tdebugger\r\n\t\t\tbreak\r\n\t}\r\n\r\n\tlet duplicate = [...character[adjust]]\r\n\tif (options?.knownItem){\r\n\t\tduplicate = duplicate.filter(d => d.id !== payload.data.id)\r\n\t}\r\n\tduplicate.push(payload.data)\r\n\r\n\treplaceCharacterAction(adjust, duplicate)\r\n\r\n}\r\n\r\nexport const makeItemDiscovered = (payload, source, options) => {\r\n\r\n\tlet adjust\r\n\tswitch(payload.itemType){\r\n\t\tcase \"item\":\r\n\t\t\tadjust = \"items\"\r\n\t\t\tbreak\r\n\t\tcase \"poison\":\r\n\t\t\tadjust = \"poisons\"\r\n\t\t\tbreak\r\n\t\tcase \"weapon\":\r\n\t\t\tadjust = \"character_weapons\"\r\n\t\t\tbreak\r\n\t\tcase \"armor\":\r\n\t\t\tadjust = \"character_armors\"\r\n\t\t\tbreak\r\n\t\tcase \"magic_item\":\r\n\t\t\tadjust = \"character_magic_items\"\r\n\t\t\tbreak\r\n\t\tcase \"potion\":\r\n\t\t\tadjust = \"character_potions\"\r\n\t\t\tbreak\r\n\t\tcase \"scroll\":\r\n\t\t\tadjust = \"character_scrolls\"\r\n\t\t\tbreak\r\n\t\tcase \"wand\":\r\n\t\t\tadjust = \"character_wands\"\r\n\t\t\tbreak\r\n\t\tdefault:\r\n\t\t\tdebugger\r\n\t\t\tbreak\r\n\t}\r\n\tpatchFetch(`${adjust}_discovered/${payload.data.id}`)\r\n\t\t.then(data => {\r\n\t\t\tconsole.log(data.message || \"Successful Item Discovered!\")\r\n\t\t})\r\n\tdiscoverEquipmentAction(adjust, payload.data.id)\r\n}\r\n","import store from '../../store'\r\nimport * as WebsocketAction from '../action_creator/websocket'\r\nimport { websocketFeatureDistribution } from '../distributers/features'\r\nimport { updateNotificationsAction, updateStoredNotificationsAction } from '../action_creator/popups'\r\nimport { incorporateItemToCharacter } from './dm_item'\r\n// \tthis.props.cableApp.room =\r\n// \t\tthis.props.cableApp.cable.subscriptions.create({\r\n// \t\t\tchannel: \"RoomChannel\",\r\n// \t\t\troom: \"1\"\r\n// \t\t}, {\r\n// \t\t\treceived: (data) => {\r\n// \t\t\t\tconsole.log(data)\r\n// \t\t\t},\r\n// \t\t\tconnected: () => console.log(\"connected!\")\r\n// \t\t})\r\n\r\nexport const initializeCampaignWebsocket = async (character, options) => {\r\n\t// NEW DATA\r\n\tlet websocketCode\r\n\r\n\t// STORED DATA\r\n\tlet websocket = {...store.getState().websocket}\r\n\tif (options?.dm){\r\n\t\twebsocketCode = options.websocketCode\r\n\t} else {\r\n\t\twebsocketCode = character.campaign?.websocket_code\r\n\t}\r\n\r\n\t// CALCULATED DATA\r\n\r\n\tif (websocket.cable === undefined){\r\n\t\treturn null\r\n\t}\r\n\r\n\r\n\twebsocket.campaign =\r\n\t\tawait {...websocket}.cable.subscriptions.create({\r\n\t\t\tchannel: \"CampaignsChannel\",\r\n\t\t\tcampaign_code: websocketCode\r\n\t\t}, {\r\n\t\t\tconnected: () => {\r\n\t\t\t\tconsole.log(\"connected!\")\r\n\t\t\t\tconsole.log(websocket)\r\n\t\t\t\tif (character){\r\n\t\t\t\t\twebsocket.campaign.send({character_id: character.id, message: `My name is ${character.name}`})\r\n\t\t\t\t}\r\n\t\t\t\tif (options?.dm){\r\n\t\t\t\t\twebsocket.campaign.send({message: \"Hey, the DM is here!\"})\r\n\t\t\t\t}\r\n\t\t\t\t// else if (options.encounter){\r\n\t\t\t\t// \t// websocket.campaign.send({message: \"Initiating Encounter!\"})\r\n\t\t\t\t// \tif (options.askForInitiative){\r\n\t\t\t\t// \t\twebsocket.campaign.send({options: {askForInitiative: true}})\r\n\t\t\t\t// \t}\r\n\t\t\t\t// }\r\n\t\t\t},\r\n\t\t\treceived: data => {\r\n\t\t\t\tconsole.log(\"received websocket data\", data.data)\r\n\t\t\t\tparseSentCampaignData(data.data)\r\n\t\t\t}\r\n\t\t})\r\n\r\n\tWebsocketAction.subscribeAction(websocket)\r\n}\r\n\r\nexport const sendCampaignWebsocket = (payload, source, options) => {\r\n\t// NEW DATA\r\n\t// STORED DATA\r\n\t// CALCULATED DATA\r\n\tconst { websocket, character } = {...store.getState()}\r\n\tconsole.log(\"CATCHING OUTGOING CONNECTIONS\", payload)\r\n\r\n\twebsocket.campaign.send({sender_id: character.id, payload, source, options})\r\n}\r\n\r\nconst parseSentCampaignData = data => {\r\n\tconsole.log(\"CATCHING INCOMING CONNECTIONS\", data)\r\n\r\n\tlet { sender_id, payload, source, options } = data\r\n\tconst { character, notifications, storedNotifications } = store.getState()\r\n\r\n\tif (sender_id){\r\n\t\tif (sender_id === character.id) {return null}\r\n\r\n\t\tif (payload.participatingPlayer && !character.id){return incomingCharacter(data)}\r\n\r\n\t\tlet sender = character.campaign.characters.find(ch => ch.id === sender_id)\r\n\r\n\r\n\t\t// distribute feature\r\n\t\tif (!options.toggleable){\r\n\t\t\twebsocketFeatureDistribution(payload, {...source, senderName: sender.name, senderId: sender_id}, options)\r\n\t\t}\r\n\r\n\t\t// craft message for notification\r\n\t\tif (options.remove){\r\n\t\t\t// remove active notification\r\n\t\t\t// remove stored notification\r\n\t\t\t// display new notification\r\n\t\t\tlet updatedNotifications = [...notifications]\r\n\t\t\tupdatedNotifications = updatedNotifications.filter(n => !n.message.includes(sender.name) && !n.message.includes(source.sourceName))\r\n\t\t\tlet message = `${sender.name} revoked the abilities of ${source.sourceName}.`\r\n\t\t\tlet notification = {message}\r\n\r\n\t\t\tupdatedNotifications.push(notification)\r\n\t\t\tupdateNotificationsAction(updatedNotifications)\r\n\r\n\t\t\tlet updatedStoredNotifications = [...storedNotifications]\r\n\t\t\tupdatedStoredNotifications = updatedStoredNotifications.filter(usn => usn.source.sourceName !== source.sourceName && usn.source.senderName !== sender.name)\r\n\r\n\t\t\tupdateStoredNotificationsAction(updatedStoredNotifications)\r\n\r\n\t\t} else {\r\n\t\t\tlet updatedNotifications = [...notifications]\r\n\t\t\tlet message = `${sender.name} gave you the abilities of ${source.sourceName}.`\r\n\t\t\tif (options.toggleable){message += \" Are you able to accept it?\"}\r\n\t\t\tlet notification = {message}\r\n\t\t\tif (options.toggleable){notification.toggleable = {payload, source:{...source, senderName: sender.name, senderId: sender_id}, options}}\r\n\r\n\t\t\tupdatedNotifications.push(notification)\r\n\t\t\tupdateNotificationsAction(updatedNotifications)\r\n\t\t}\r\n\t\t// don't distribute inherently if there is a toggleable attribute\r\n\t} else if (payload?.askForInitiative){\r\n\t\tconst { character, notifications, storedNotifications } = store.getState()\r\n\r\n\t\tif (character.id){\r\n\t\t\tconsole.log(payload, source)\r\n\t\t\tsendCampaignWebsocket({participatingPlayer: true, name: character.name})\r\n\r\n\t\t\tlet updatedNotifications = [...notifications]\r\n\t\t\tlet notification = {message: payload.message}\r\n\t\t\tupdatedNotifications.push(notification)\r\n\r\n\t\t\tupdateNotificationsAction(updatedNotifications)\r\n\t\t}\r\n\t} else if (source?.dm){\r\n\t\tconsole.log(\"MADE CONTACT FROM THE DM\")\r\n\t\t// if a message is meant just for you\r\n\t\tif (payload.reciever_id === character.id){\r\n\t\t\t// if an item is know known\r\n\t\t\tlet updatedNotifications = [...notifications]\r\n\t\t\tif (options?.knownItem){\r\n\t\t\t\tlet notification = { message: payload.message }\r\n\t\t\t\tupdatedNotifications.push(notification)\r\n\t\t\t\tupdateNotificationsAction(updatedNotifications)\r\n\r\n\t\t\t\tincorporateItemToCharacter(payload, source, options)\r\n\t\t\t\t// if the message includes a present\r\n\t\t\t} else if (payload.itemType){\r\n\r\n\t\t\t\tlet message = \"The DM gave you an item!\"\r\n\t\t\t\tlet notification = { message }\r\n\t\t\t\tif (options.toggleable){notification.toggleable = {payload, source:{...source}, options: {...options, acceptOnly: true}}}\r\n\r\n\t\t\t\tupdatedNotifications.push(notification)\r\n\t\t\t\tupdateNotificationsAction(updatedNotifications)\r\n\t\t\t\t// add item to character's redux\r\n\t\t\t\tincorporateItemToCharacter(payload, source, options)\r\n\t\t\t\t// be able to accept the item from the notification (which'll make the item discovered)\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst incomingCharacter = ({ sender_id, payload, source, options }) => {\r\n\r\n}\r\n","import React from 'react'\r\nimport store from '../store'\r\nimport _ from 'lodash'\r\nimport { modalAction } from './action_creator/popups'\r\n\r\n\r\n// FREQUENTLY USED FUNCTIONS\r\n\r\nexport const locateAbility = (source) => {\r\n\tconst { character } = store.getState()\r\n\treturn character[source.source].find(ability => ability.id === source.sourceId)\r\n}\r\n\r\nexport const locateFeatureThroughAbility = (ability, featureId) => {\r\n\treturn ability.features.find(f => f.id === featureId)\r\n}\r\n\r\nexport const locateFeatureFromSource = source => {\r\n\treturn locateFeatureThroughAbility(locateAbility(source), source.featureId)\r\n}\r\n\r\nexport const featureNameFromSource = source => {\r\n\tlet ability = locateAbility(source)\r\n\tlet feature = locateFeatureThroughAbility(ability, source.featureId)\r\n\treturn feature.name || ability.name\r\n}\r\n\r\nexport const locateFeatureAndAbilityFromSource = source => {\r\n\tlet ability = locateAbility(source)\r\n\tlet feature = locateFeatureThroughAbility(ability, source.featureId)\r\n\treturn {feature, ability}\r\n}\r\n\r\nexport const actionClass = a => {\r\n  switch(a){\r\n    case 'Standard Action':\r\n      return 'standard'\r\n    case 'Swift Action':\r\n      return 'swift'\r\n    case 'Move Action':\r\n      return 'move'\r\n    case 'Full-Round Action':\r\n      return 'full'\r\n    case 'Immediate Action':\r\n      return 'immediate'\r\n    case 'Free Action':\r\n      return 'free'\r\n    default:\r\n      return a\r\n  }\r\n}\r\n\r\nexport const renderTH = (num) => {\r\n\tswitch (parseInt(num)){\r\n\t\tcase 1:\r\n\t\t\treturn \"1st\"\r\n\t\tcase 2:\r\n\t\t\treturn \"2nd\"\r\n\t\tcase 3:\r\n\t\t\treturn \"3rd\"\r\n\t\tdefault:\r\n\t\t\treturn `${num}th`\r\n\t}\r\n}\r\n\r\nexport const classLevel = (klassId) => {\r\n\tlet classes = store.getState().character_info.classes\r\n\tlet klass = classes.find(cl => cl.id === klassId)\r\n\treturn klass?.level ?? null\r\n}\r\n\r\nexport const renderDamage = damage => {\r\n\treturn `${damage.num_of_dice}d${damage.damage_dice}`\r\n}\r\n\r\nexport const abbreviateDamageType = damageType => {\r\n\tif (!damageType){return null}\r\n\tif (damageType === \"positive\" || damageType === \"negative\"){\r\n\t\treturn _.capitalize(damageType.substring(0,3))\r\n\t} else {\r\n\t\treturn _.capitalize(damageType[0])\r\n\t}\r\n}\r\n\r\nexport const sortedSpellsByLevelAndName = (array) => {\r\n\tlet sortedData = []\r\n\tfor(let i = 0; i < 10; i++){\r\n\t\tlet thisLvl = array.filter(sp => sp.spell_level === i)\r\n\t\tsortedData.push(thisLvl.sort((a,b) => a.name.localeCompare(b.name)))\r\n\t}\r\n\tsortedData = sortedData.flat()\r\n\treturn sortedData\r\n}\r\n\r\nexport const injectSpellIntoDescription = (description, spells, onClickFunction, functionOptions) => {\r\n\tlet domDescArray = [description]\r\n\tspells.forEach(sp => {\r\n\t\tlet name = sp.name.toLowerCase()\r\n\t\tfor (let i = 0; i < domDescArray.length; i++){\r\n\t\t\tif (typeof domDescArray[i] === \"string\" && domDescArray[i].includes(name)){\r\n\t\t\t\tlet splitDesc = domDescArray[i].split(name)\r\n\t\t\t\tlet onClick = () => onClickFunction(sp)\r\n\t\t\t\tsplitDesc.splice(1, 0, <em key={i*3+1} className=\"underline-hover\" onClick={onClick}>{name}</em>)\r\n\t\t\t\tdomDescArray[i] = splitDesc\r\n\t\t\t\tdomDescArray = domDescArray.flat()\r\n\t\t\t}\r\n\t\t// let descArray = description.split(name)\r\n\t\t// \tdomDescArray.push(descArray[i])\r\n\t\t// \tif (i + 1 < descArray.length){\r\n\t\t// \t\tdomDescArray.push(\" \")\r\n\t\t// \t\tdomDescArray.push(<em key={i*3+1} className=\"underline-hover\" onClick={onClick}>{name}</em>)\r\n\t\t// \t\tdomDescArray.push(\" \")\r\n\t\t// \t}\r\n\t\t}\r\n\t})\r\n\treturn <span>{domDescArray}</span>\r\n}\r\n\r\nexport const mod = (score) => {\r\n  return Math.floor( (score - 10) / 2 )\r\n}\r\n\r\nexport const pluser = (num) => {\r\n  return num < 0 ? num : `+${num}`\r\n}\r\n\r\nexport const descriptionParser = description => {\r\n\tlet desc = []\r\n\r\n\tlet tables = []\r\n\tif (description.includes(\"<table>\")){\r\n\t\t// if <table>\r\n\t\tlet tempArr = description.split(\"<table>\")\r\n\r\n\t\tfor (let i = 0; i < tempArr.length; i++){\r\n\t\t\t// break the description into an array where strings are space with symbols\r\n\t\t\tif (!tempArr[i].includes (\"</table>\")){\r\n\t\t\t\tdesc.push(tempArr[i])\r\n\t\t\t} else {\r\n\t\t\t\tlet tableArr = tempArr[i].split(\"</table>\")\r\n\r\n\t\t\t\tlet table = parseTable(tableArr[0])\r\n\r\n\t\t\t\ttables.push(table)\r\n\t\t\t\t// like {{0}} ?\r\n\t\t\t\t// that signify an index of an array with the table to be inserted later\r\n\t\t\t\tdesc.push(`{{${tables.length - 1}}}`)\r\n\t\t\t\tdesc.push(tableArr[1])\r\n\t\t\t}\r\n\t\t\t// if no <table>\r\n\t\t}\r\n\r\n\r\n\t\t// let i = description.indexOf(\"<table>\")\r\n\t\t// let tableString = description.substr(i, description.length-1)\r\n\t\t// description = description.replace(tableString, \"\")\r\n\t\t// table = parseTable(tableString)\r\n\t} else {\r\n\t\t// put description into array with one length\r\n\t\tdesc.push(description)\r\n\t}\r\n\r\n\tlet descSplitParagraphs =  []\r\n\r\n\t// then, iterate\r\n\tdesc.forEach(d => {\r\n\t\t// if a table placeholder is present, skip it\r\n\t\tif (d.includes(\"{{\") && d.includes(\"}}\")){\r\n\t\t\tdescSplitParagraphs.push(d)\r\n\t\t} else {\r\n\t\t\t// take string, split by \\n\\n\r\n\t\t\tlet arr = d.split(\"\\n\\n\")\r\n\t\t\t// then remap the array of strings into a new array\r\n\t\t\tdescSplitParagraphs = [...descSplitParagraphs, ...arr]\r\n\t\t}\r\n\t})\r\n\r\n\tdescSplitParagraphs = descSplitParagraphs.map(dsp => {\r\n\t\tif (dsp.includes(\"{{\") && dsp.includes(\"}}\")){\r\n\t\t\t// replace table symbol\r\n\t\t\tlet i = dsp.replace(\"{{\", \"\")\r\n\t\t\ti = i.replace(\"}}\", \"\")\r\n\t\t\ti = parseInt(i)\r\n\t\t\treturn tables[i]\r\n\t\t} else {\r\n\t\t\treturn <p key={_.random(1, 2000000)}>{parseInlineSemantics(dsp)}</p>\r\n\t\t}\r\n\t})\r\n\t// you should have an array of <p> and table symbols\r\n\r\n\t// serve with parsely and flakey salt\r\n\r\n\t// desc = description.split(\"\\n\\n\")\r\n\t// desc = desc.map(para => <p key={_.random(1, 2000000)}>{para}</p>)\r\n\r\n\r\n\treturn descSplitParagraphs\r\n}\r\n\r\nconst parseTable = text => {\r\n\tlet innerTable = text.slice(7, -8)\r\n\tinnerTable.trim()\r\n\tinnerTable = innerTable.split(\"</tr>\")\r\n\r\n\tlet rows = innerTable.map(r => {\r\n\t\tr = r.trim()\r\n\t\tlet i = r.indexOf(\"<tr>\")\r\n\t\tr = r.substr(i+4, r.length-1)\r\n\r\n\t\tif (r.startsWith(\">\")){r = r.substring(1)}\r\n\r\n\t\tlet cellContainer = r.includes(\"<th>\") ? \"<th>\" : \"<td>\"\r\n\t\tlet cells = r.split(cellContainer)\r\n\r\n\t\tcells = cells.map(c => {\r\n\t\t\tc = c.trim()\r\n\t\t\tif (c === \"\"){return null}\r\n\t\t\tlet content = c.substr(0, c.length-5)\r\n\t\t\treturn cellContainer === \"<th>\" ? <th>{content}</th> : <td>{content}</td>\r\n\t\t})\r\n\t\treturn <tr>{cells}</tr>\r\n\t})\r\n\r\n\treturn <table className=\"generic-table\">{rows}</table>\r\n}\r\n\r\nconst parseInlineSemantics = (text) => {\r\n\tlet arr = [text]\r\n\tlet underline = arr.find(t => {\r\n\t\tif (typeof t === \"string\"){\r\n\t\t\treturn t.includes(\"<underline>\")\r\n\t\t} else {return false}\r\n\t})\r\n\r\n\tif (underline){\r\n\t\tarr = arr.map(t => {\r\n\t\t\tif (!t.includes(\"<underline>\")){return t}\r\n\t\t\telse {\r\n\t\t\t\tlet tempArr = []\r\n\t\t\t\tlet front = t.split(\"<underline>\")\r\n\t\t\t\tlet back = front[1].split(\"</underline>\")\r\n\t\t\t\ttempArr.push(front[0])\r\n\t\t\t\ttempArr.push(<span className=\"underline\">{back[0]}</span>)\r\n\t\t\t\ttempArr.push(back[1])\r\n\t\t\t\treturn tempArr\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\treturn arr\r\n}\r\n\r\nexport const justInitials = string => {\r\n\tlet arr = string.split(\" \")\r\n\tarr = arr.map(w => w[0].toUpperCase())\r\n\treturn arr.join(\"\")\r\n}\r\n","import store from '../../store'\r\nimport {\r\n  bonusAction,\r\n  addMovementAction,\r\n\tproficiencyAction,\r\n\tactiveFeatureAction,\r\n\taddTemporaryHitPointsAction,\r\n\tremoveTemporaryHitPointsAction,\r\n\tadjustStatusConditionsAction\r\n} from '../action_creator/features'\r\nimport { replaceCharacterInfoAction } from '../action_creator/character'\r\nimport { statusConditionDistribution, removeStatusConditionDistribution } from  './status_conditions'\r\nimport { sendCampaignWebsocket } from '../websocket/campaign'\r\nimport { makeItemDiscovered } from '../websocket/dm_item'\r\nimport { locateAbility } from '../fuf'\r\nimport { modalAction } from '../action_creator/popups'\r\n\r\nexport const defaultCharacterInfo = () => {\r\n\treturn {\r\n    bonuses: [],\r\n\t\tdisplayDescriptions: [],\r\n    effects: [],\r\n    features: [],\r\n\t\tforbidden: [],\r\n    proficiencies: { weapon: {groups: [], individualIds: []}, armor: {groups: [], individualIds: []} },\r\n    movement: [],\r\n\t\tstatusConditions: [],\r\n\t\tsummonedAllies: []\r\n  }\r\n}\r\n\r\nexport const doesThisFeatureNeedToBeDistributed = (ability) => {\r\n\tlet hasFeatures = false\r\n\tlet array = [\"skill_bonuses\", \"stat_bonuses\", \"display_descriptions\", \"conditions\", \"languages\", \"movements\", \"weapon_proficiencies\", \"armor_proficiencies\"]\r\n\tarray.forEach(feature => {\r\n\t\tif (ability[feature].length){hasFeatures = true}\r\n\t})\r\n\tif (ability.action){\r\n\t\tlet actionArray = [\"castable_spells\"]\r\n\t\tactionArray.forEach(feature => {\r\n\t\t\tif (ability[feature].length){hasFeatures = true}\r\n\t\t})\r\n\t}\r\n\treturn hasFeatures\r\n}\r\n\r\nexport const initialCharacterDistribution = (character, options) => {\r\n\t// NEW DATA\r\n  let character_info = defaultCharacterInfo()\r\n\r\n\tlet characterLevel = store.getState().character_info?.classes?.reduce((agg, el) => (agg + el.level), 0)\r\n\r\n\tlet { specific_feature_id_to_be_updated } = options ?? {}\r\n\r\n  // racial traits\r\n  // klass features\r\n  character.applicable_klass_features.forEach(akf => {\r\n    akf.features.forEach((feature) => {\r\n      if (!feature.action && !feature.usage && (!specific_feature_id_to_be_updated || (specific_feature_id_to_be_updated && feature.id !== specific_feature_id_to_be_updated))) {\r\n\t\t\t\tlet characterChoice = character.character_choices.find(ccc => ccc.feature_id === feature.id)\r\n\t\t\t\tif (characterChoice){\r\n\t\t\t\t\tlet featureCC = feature.character_choices[0]\r\n\t\t\t\t\tcharacterChoice.column = featureCC.column\r\n\t\t\t\t\tcharacterChoice.sub_feature = featureCC.sub_feature\r\n\t\t\t\t}\r\n        klassFeaturesFeatureDistribution(feature, character_info, { sourceId: akf.id, source: \"applicable_klass_features\", featureId: feature.id }, {characterLevel, klassId: akf.klass_id, characterChoice})\r\n      }\r\n    })\r\n  })\r\n\r\n  // weapon\r\n  // armor\r\n  // magic items\r\n  character.character_magic_items.forEach(cmi => {\r\n    cmi.magic_item.features.forEach((feature) => {\r\n      if (!feature.action){\r\n        klassFeaturesFeatureDistribution(feature, character_info, { sourceId: cmi.id, source: \"character_magic_items\", featureId: feature.id }, {characterLevel})\r\n      }\r\n    })\r\n  })\r\n\r\n\r\n  character_info.bonuses.forEach(b => {\r\n    bonusAction(b)\r\n  })\r\n  // HARDCODE TESTING\r\n  character_info.movement.push({movement: \"Base\", feet: 30, bonus: false, penalty: false})\r\n\r\n  character_info.movement.forEach(addMovementAction)\r\n\r\n\tproficiencyAction(character_info.proficiencies)\r\n\r\n\treplaceCharacterInfoAction(\"displayDescriptions\", character_info.displayDescriptions)\r\n}\r\n\r\n\r\nexport const featureDistribution = (feature, options) => {\r\n\t// NEW DATA\r\n\tlet character_info = defaultCharacterInfo()\r\n\tlet source = {featureId: feature.id, sourceId: feature.sourceId, source: feature.source}\r\n\r\n\t// STORED DATA\r\n\tlet { activeFeatures, classes } = store.getState().character_info\r\n\tlet oldActiveFeaturesLength = activeFeatures.length\r\n\tlet characterLevel = classes.reduce((agg, el) => (agg + el.level), 0)\r\n\r\n\t// if some feature that is activated has a spell that is cast on activation\r\n\tif (feature.action && feature.castable_spells.length){\r\n\t\tfeature.castable_spells.forEach(fcs => {\r\n\t\t\t// see if that spell has any features\r\n\t\t\tif (fcs.spell.features.length){\r\n\t\t\t\tfcs.spell.features.forEach(spF => {\r\n\t\t\t\t\t// check for any features to be distributed\r\n\t\t\t\t\tfeatureDistribution(spF, {featureName: fcs.spell.name})\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t// go through the feature, and add it to character_info\r\n\tklassFeaturesFeatureDistribution(feature, character_info, source, {characterLevel})\r\n\r\n\t// add/remove this feature to the list of active features in character_info.activeFeatures (redux)\r\n\tactiveFeatureAction(source)\r\n\r\n\t// check to see if this feature was added or removed\r\n\tactiveFeatures = store.getState().character_info.activeFeatures\r\n\r\n\tif(activeFeatures.length > oldActiveFeaturesLength){\r\n\t\t// if added\r\n\t\tcharacter_info.bonuses.forEach((b) => {\r\n\t\t\tif (b.statistic === \"Hit Points\" && b.bonus_type === \"temporary\"){\r\n\t\t\t\tlet redux = store.getState()\r\n\t\t\t\tlet tempHP = { source: {...b.source} }\r\n\t\t\t\tlet ability = redux.character[b.source.source].find(a => a.id === b.source.sourceId)\r\n\t\t\t\tlet multiplier = redux.character_info.classes.find(cl => cl.id === ability.klass_id).level\r\n\r\n\t\t\t\ttempHP.bonus = b.bonus * multiplier\r\n\t\t\t\taddTemporaryHitPointsAction(tempHP)\r\n\t\t\t} else {\r\n\t\t\t\tbonusAction(b)\r\n\t\t\t}\r\n\t\t})\r\n\t\t// v websockets! v\r\n\t\tif (feature.applications.find(app => app.affects_allies)){\r\n\t\t\tlet payload = {...character_info}\r\n\t\t\tlet ability = locateAbility(source)\r\n\t\t\tlet featureSource = {\r\n\t\t\t\tsourceName: ability.name,\r\n\t\t\t\tsourceId: ability.id,\r\n\t\t\t\tfeatureName: feature.name,\r\n\t\t\t\tfeatureId: feature.id\r\n\t\t\t}\r\n\t\t\tlet options = { additive: true, toggleable: !!feature.applications.find(app => app.toggleable) }\r\n\t\t\tif (ability.klass_id){featureSource.klassId = ability.klass_id}\r\n\t\t\tsendCampaignWebsocket(payload, featureSource, options)\r\n\t\t}\r\n\t} else {\r\n\t\t// if removed\r\n\t\tcharacter_info.bonuses.forEach((b) => {\r\n\t\t\tif (b.statistic === \"Hit Points\" && b.bonus_type === \"temporary\"){\r\n\t\t\t\tremoveTemporaryHitPointsAction(b.source)\r\n\t\t\t} else {\r\n\t\t\t\tbonusAction(b, true)\r\n\t\t\t}\r\n\t\t})\r\n\t\t// v websockets! v\r\n\t\tif (feature.applications.find(app => app.affects_allies)){\r\n\t\t\tlet payload = {...character_info}\r\n\t\t\tlet ability = locateAbility(source)\r\n\t\t\tlet featureSource = {\r\n\t\t\t\tsourceName: ability.name,\r\n\t\t\t\tsourceId: ability.id,\r\n\t\t\t\tfeatureName: feature.name,\r\n\t\t\t\tfeatureId: feature.id\r\n\t\t\t}\r\n\t\t\tlet options = {\r\n\t\t\t\tremove: true,\r\n\t\t\t\tadditive: false\r\n\t\t\t}\r\n\t\t\tif (ability.klass_id){featureSource.klassId = ability.klass_id}\r\n\t\t\tsendCampaignWebsocket(payload, featureSource, options)\r\n\t\t}\r\n\t\tcharacter_info.statusConditions.forEach(sc => {\r\n\t\t\tlet statusConditions = [...store.getState().character_info.statusConditions]\r\n\t\t\tstatusConditions = statusConditions.filter(c => c.condition !== sc.condition)\r\n\t\t\tadjustStatusConditionsAction(statusConditions)\r\n\t\t\tremoveStatusConditionDistribution(sc)\r\n\t\t})\r\n\t\t// AFTER THE MAIN FEATURE HAS ENDED\r\n\t\t// LOOK FOR ANY AFTER EFFECTS\r\n\t\tif (feature.after){\r\n\t\t\t// featureSource wont find any Feats nests in character_klasses, be warned\r\n\t\t\tlet featureSource = store.getState().character[feature.source].find(ability => ability.id === feature.sourceId)\r\n\t\t\tlet featureSourceFeaturesAfter = featureSource.features.filter(fs => fs.after)\r\n\r\n\t\t\tcharacter_info = defaultCharacterInfo()\r\n\r\n\t\t\tfeatureSourceFeaturesAfter.forEach(after => {\r\n\t\t\t\tsource = {featureId: after.id, sourceId: feature.sourceId, source: feature.source}\r\n\t\t\t\tklassFeaturesFeatureDistribution(after, character_info, source, {characterLevel})\r\n\t\t\t})\r\n\r\n\t\t\tcharacter_info.statusConditions.forEach(sc => {\r\n\t\t\t\tlet statusConditions = [...store.getState().character_info.statusConditions]\r\n\t\t\t\tlet mappedSCs = [...statusConditions].map(c => c.condition)\r\n\t\t\t\tif (mappedSCs.includes(sc.condition)){\r\n\t\t\t\t\tstatusConditions = statusConditions.filter(rsc => rsc.condition !== sc.condition)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstatusConditions.push(sc)\r\n\t\t\t\t}\r\n\t\t\t\tactiveFeatureAction(sc.source)\r\n\t\t\t\tadjustStatusConditionsAction(statusConditions)\r\n\t\t\t\tstatusConditionDistribution(sc)\r\n\t\t\t})\r\n\r\n\t\t}\r\n\r\n\t}\r\n}\r\n\r\nexport const websocketFeatureDistribution = (payload, source, options) => {\r\n\tlet character_info = payload\r\n\r\n\tactiveFeatureAction(source, options)\r\n\r\n\tif (payload.itemType){\r\n\t\tmakeItemDiscovered(payload, source, options)\r\n\t} else {\r\n\t\tif (options.remove){\r\n\t\t\tcharacter_info.bonuses.forEach(b => {\r\n\t\t\t\tbonusAction(b, true)\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tcharacter_info.bonuses.forEach(b => {\r\n\t\t\t\tbonusAction(b)\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n\r\nexport const klassFeaturesFeatureDistribution = (feature, obj, source, options) => {\r\n\tconst { characterLevel, klassId, characterChoice } = options\r\n\tlet classLevel = store.getState().character_info.classes?.find(cl => cl.id === klassId)?.level\r\n\r\n  feature.skill_bonuses.forEach((el) => {\r\n    obj.bonuses.push(skillBonusFeature(el, source))\r\n  })\r\n  feature.stat_bonuses.forEach((el) => {\r\n\t\tif (!el.applicable_level || el.applicable_level <= characterLevel){\r\n\t\t\tobj.bonuses.push(statBonusFeature(el, source))\r\n\t\t}\r\n  })\r\n  feature.movements.forEach((el) => {\r\n    obj.movement.push(movementsFeature(el, source, feature.usage, feature.applications, feature.conditions))\r\n  })\r\n\tfeature.armor_proficiencies.forEach(el => {\r\n\t\tweaponArmorProficienciesFeature(el, source, obj.proficiencies.armor, { characterChoice })\r\n\t})\r\n\tfeature.weapon_proficiencies.forEach(el => {\r\n\t\tweaponArmorProficienciesFeature(el, source, obj.proficiencies.weapon, { characterChoice })\r\n\t})\r\n\tfeature.status_conditions.forEach(el => {\r\n\t\tobj.statusConditions.push(statusConditionsFeature(el, source))\r\n\t})\r\n\tfeature.display_descriptions.forEach(el => {\r\n\t\tif (!el.applicable_level || el.applicable_level <= classLevel){\r\n\t\t\tobj.displayDescriptions.push(displayDescriptionsFeature(el, source))\r\n\t\t}\r\n\t})\r\n\tif (feature.animal && feature.animal.animal_type === \"summoned\"){\r\n\t\tmodalAction(\"summonedAllies\", feature.animal, {name: \"Creature List\"})\r\n\t}\r\n}\r\n\r\nconst skillBonusFeature = (sk, source) => {\r\n  const { skill_id, bonus, bonus_type, duration, bonus_multiplier, bonus_multiplier_based_on_feature_level, custom, minimum_bonus, round_down, specific_statistic } = sk\r\n  return {\r\n    type: 'skill',\r\n    skill_id,\r\n    bonus,\r\n    bonus_type,\r\n    duration,\r\n\t\tbonus_multiplier,\r\n\t\tbonus_multiplier_based_on_feature_level,\r\n\t\tcustom,\r\n\t\tminimum_bonus,\r\n\t\tround_down,\r\n\t\tspecific_statistic,\r\n    source\r\n  }\r\n}\r\n\r\nexport const statBonusFeature = (sb, source) => {\r\n  const { statistic, bonus, bonus_type, duration, specific_statistic, bonus_multiplier, bonus_multiplier_based_on_feature_level } = sb\r\n  return {\r\n    type: 'stat',\r\n    statistic,\r\n    bonus,\r\n    bonus_type,\r\n    duration,\r\n    specific_statistic,\r\n    bonus_multiplier,\r\n\t\tbonus_multiplier_based_on_feature_level,\r\n    source\r\n  }\r\n}\r\n\r\nconst movementsFeature = (m, source, usage, applications, conditions) => {\r\n  const { movement, feet, bonus, penalty, permanent } = m\r\n  if (permanent){\r\n    return {\r\n      movement,\r\n      feet,\r\n      bonus,\r\n      penalty,\r\n      permanent,\r\n      usage,\r\n      applications,\r\n      conditions,\r\n      source\r\n    }\r\n  } else {\r\n    return {}\r\n  }\r\n}\r\n\r\nconst weaponArmorProficienciesFeature = (wap, source, obj, options) => {\r\n\tif (options.characterChoice){\r\n\t\tif (wap.player_choice && wap[options.characterChoice.column] === null){\r\n\t\t\twap[options.characterChoice.column] = parseInt(options.characterChoice.choice)\r\n\t\t\tsource = {...source, characterChoiceId: options.characterChoice.id}\r\n\t\t}\r\n\t}\r\n\r\n\tif (wap.proficiency_group){\r\n\t\tobj.groups.push({ source, proficiency_group: wap.proficiency_group, additive: wap.additive })\r\n\t}\r\n\tif (wap.armor_id){\r\n\t\tobj.individualIds.push({ source, armor_id: wap.armor_id, additive: wap.additive })\r\n\t}\r\n\tif (wap.weapon_id){\r\n\t\tobj.individualIds.push({ source, weapon_id: wap.weapon_id, additive: wap.additive })\r\n\t}\r\n\r\n}\r\n\r\nconst statusConditionsFeature = (sc, source) => {\r\n\treturn {\r\n\t\tcondition: sc.condition,\r\n\t\tsource\r\n\t}\r\n}\r\n\r\nexport const forbiddenFeature = (f, source) => {\r\n\treturn {\r\n\t\tforbidden: f,\r\n\t\tsource\r\n\t}\r\n}\r\n\r\nexport const displayDescriptionsFeature = (dd, source) => {\r\n\treturn {\r\n\t\taccess_alignment: dd.access_alignment,\r\n\t\tdescription: dd.description,\r\n\t\ttitle: dd.title,\r\n\t\tsource\r\n\t}\r\n}\r\n","import store from '../../store'\r\nimport { mod } from '../../fuf'\r\nimport { featureDistribution as removeFeature } from '../distributers/features'\r\nimport { patchFetch } from '../fetches'\r\nimport { replaceCharacterArrayAction } from '../action_creator/character'\r\nimport { locateFeatureFromSource } from '../fuf'\r\n\r\n\r\nexport const calculateFeaturePercentage = feature => {\r\n\tif (!feature.usage || (!feature.usage.limit && !feature.usage.base_limit)){return null}\r\n\t// CALCULATED DATA\r\n\tlet maxUsage = calculateMaxUsage(feature.baseFeatureAndAbility?.feature.usage ?? feature.usage, feature.klassId, {klassArchetypeId: feature.klassArchetypeId})\r\n\tlet timesUsed = calculateCurrentUsage(feature.usageSources)\r\n\r\n\treturn `${maxUsage - timesUsed}/${maxUsage}`\r\n}\r\n\r\nexport const calculateMaxUsage = (usage, klassId, options) => {\r\n\t// NEW DATA\r\n\tlet points = 0\r\n\r\n\t// STORED DATA\r\n\tlet reduxState = store.getState()\r\n\tlet abilityScores = reduxState.character_info.ability_scores\r\n\r\n\tlet classLvl = reduxState.character_info.classes.find(cl => {\r\n\t\tif (klassId){\r\n\t\t\treturn cl.id === klassId\r\n\t\t} else if (options.klassArchetypeId){\r\n\t\t\tlet arch = reduxState.character.archetypes.find(ar => ar.id === options.klassArchetypeId)\r\n\t\t\treturn cl.id === arch.klass_id\r\n\r\n\t\t}\r\n\t})?.level ?? 0\r\n\r\n\t// if it has a static limit, return that\r\n\tif (usage.limit){return usage.limit}\r\n\r\n\t// otherwise, calculate the limit\r\n\tpoints += usage.base_limit\r\n\tif (usage.base_limit_modifier){points += mod(abilityScores[usage.base_limit_modifier])}\r\n\tif (classLvl > 1){points += (usage.limit_increase_per_level * (classLvl - 1))}\r\n\r\n\t// if a feature has a float for its limit_increase_per_level, and the base_limit is 0, its probably not nothing at the 1st level, but the same as the limit_increase_per_level\r\n\tif (usage.base_limit === 0 && usage.limit_increase_per_level < 1){points += usage.limit_increase_per_level}\r\n\r\n\t// if it has a minimum, but that value is not met, replace points with the minimum\r\n\tif (usage.minimum_limit > points){points = usage.minimum_limit}\r\n\r\n\t// round down points\r\n\tpoints = Math.floor(points)\r\n\r\n\treturn points\r\n}\r\n\r\nexport const calculateCurrentUsage = used => {\r\n\tif (used.length === 0){return 0}\r\n\r\n\tif (used.length === 1){return used[0].current_usage}\r\n\tif (used.length > 1) {\r\n\t\tdebugger\r\n\t// \treturn used[0].current_usage\r\n\t}\r\n}\r\n\r\nexport const remainingUsage = feature => {\r\n\tif (!feature.usage || (!feature.usage.limit && !feature.usage.base_limit)){return 1000}\r\n\t// CALCULATED DATA\r\n\tlet maxUsage = calculateMaxUsage(feature.baseFeatureAndAbility?.feature.usage ?? feature.usage, feature.klassId, {klassArchetypeId: feature.klassArchetypeId})\r\n\tlet timesUsed = calculateCurrentUsage(feature.usageSources)\r\n\r\n\treturn maxUsage - timesUsed\r\n}\r\n\r\nexport const incrementFeatureUsage = async feature => {\r\n\tif (remainingUsage(feature) > 0){\r\n\t\tlet usage = feature.usageSources.length === 1 && feature.usageSources[0]\r\n\t\tawait alterCurrentUsage(usage, 1, usageArrayBasedOnSource(feature.source, {klassArchetypeId: feature.klassArchetypeId}))\r\n\t} else {\r\n\t\tlet options = feature.usage?.all_feature_usage_options || []\r\n\t\tif (options.length){\r\n\r\n\t\t\tconst { character_info } = store.getState()\r\n\r\n\t\t\t// this is used when a feature expends every round\r\n\t\t\t// once that feature runs out of points, it goes to here\r\n\t\t\t// the below code only works for klass features, not klass_specializations or other future features\r\n\t\t\tdebugger\r\n\t\t\t// placing a debugger here for future use, to make universal in the future\r\n\r\n\t\t\toptions.forEach(opt => {\r\n\t\t\t\tif (character_info.activeFeatures.find(af => af.featureId === opt.optionSource.featureId & af.sourceId === opt.optionSource.sourceId && af.source === opt.optionSource.source)) {\r\n\t\t\t\t\tremoveFeature({...locateFeatureFromSource(opt.optionSource), sourceId: opt.optionSource.sourceId, klassId: opt.optionSource.feature, source: \"applicable_klass_features\"})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tremoveFeature(feature)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const decrementFeatureUsage = async feature => {\r\n\tlet usage = feature.usageSources.length === 1 && feature.usageSources[0]\r\n\tif (!!usage.current_usage){\r\n\t\tawait alterCurrentUsage(usage, -1, usageArrayBasedOnSource(feature.source, {klassArchetypeId: feature.klassArchetypeId}))\r\n\t}\r\n}\r\n\r\nexport const alterCurrentUsage = async (usage, amount, url) => {\r\n\tawait patchFetch(url, {...usage, current_usage: usage.current_usage + amount})\r\n\t\t.then(data => {\r\n\t\t\treplaceCharacterArrayAction(url, data)\r\n\t\t})\r\n}\r\n\r\nexport const isThisFeatureActive = feature => {\r\n\tlet active = false\r\n\tconst { character_info } = store.getState()\r\n\tcharacter_info.activeFeatures.forEach(af => {\r\n\t\tif (af.featureId === feature.id && af.sourceId === feature.sourceId && af.source === feature.source){\r\n\t\t\tactive = true\r\n\t\t}\r\n\t\tlet options = feature.usage?.all_feature_usage_options || []\r\n\r\n\t\toptions.forEach(opt => {\r\n\t\t\tif (opt.optionSource.featureId === feature.id && opt.optionSource.sourceId === feature.sourceId && opt.optionSource.source === feature.source) {\r\n\t\t\t\tactive = true\r\n\t\t\t}\r\n\t\t})\r\n\t})\r\n\r\n\treturn active\r\n}\r\n\r\nconst usageArrayBasedOnSource = (source, options) => {\r\n\tswitch(source){\r\n\t\tcase \"applicable_klass_features\":\r\n\t\t\tif (options.klassArchetypeId){\r\n\t\t\t\treturn \"character_klass_archetype_feature_usages\"\r\n\t\t\t}\r\n\t\t\treturn \"character_klass_feature_usages\"\r\n\t\tcase \"klass_specializations\":\r\n\t\t\treturn \"character_klass_specialization_feature_usages\"\r\n\t\tdefault:\r\n\t\t\treturn null\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { remainingUsage, incrementFeatureUsage, decrementFeatureUsage } from '../../utils/calculations/feature_usage'\r\n\r\nconst Points = props => {\r\n\r\n\tconst [feature, setFeature] = React.useState(null)\r\n\r\n\tReact.useEffect(() => {\r\n\t\tsetFeature(props.feature)\r\n\t})\r\n\r\n\tconst renderClick = (operation) => {\r\n\t\tif (!feature.usageSources.length){\r\n\t\t\tfeature.usageSources.push({\r\n\t\t\t\tcharacter_id: props.character.id,\r\n\t\t\t\tklass_feature_id: feature.sourceId,\r\n\t\t\t\tfeature_usage_id: feature.usage.id,\r\n\t\t\t\tcurrent_usage: 0\r\n\t\t\t})\r\n\t\t}\r\n\t\tif (operation === \"+\" && feature.usageSources[0].current_usage) {\r\n\t\t\tdecrementFeatureUsage(feature)\r\n\t\t\tlet adjustedFeature = {...feature}\r\n\t\t\tadjustedFeature.usageSources[0].current_usage -= 1\r\n\t\t\tsetFeature(adjustedFeature)\r\n\t\t} else if (operation === \"-\" && !!remainingUsage(feature)) {\r\n\t\t\tincrementFeatureUsage(feature)\r\n\t\t\tlet adjustedFeature = {...feature}\r\n\t\t\tadjustedFeature.usageSources[0].current_usage += 1\r\n\t\t\tsetFeature(adjustedFeature)\r\n\t\t}\r\n\t}\r\n\r\n  const additionalContent = () => {\r\n    let name = props.character.name\r\n    if (name === 'Robby'){\r\n      return (\r\n        <React.Fragment>\r\n          <h4>Regain Panache</h4>\r\n          <ul>\r\n            <li><em><u>Critical Hit with a Light or One-Handed Piercing Melee Weapon:</u></em> Each time you confirm a critical hit with a light or one-handed piercing melee weapon, you regain 1 panache point. Confirming a critical hit on a helpless or unaware creature or a creature that has fewer Hit Dice than half your character level doesn’t restore panache.</li>\r\n            <li><em><u>Killing Blow with a Light or One-Handed Piercing Melee Weapon:</u></em> When you reduces a creature to 0 or fewer hit points with a light or one-handed piercing melee weapon attack while in combat, you regain 1 panache point. Destroying an unattended object, reducing a helpless or unaware creature to 0 or fewer hit points, or reducing a creature that has fewer Hit Dice than half your character level to 0 or fewer hit points doesn’t restore panache.</li>\r\n          </ul>\r\n        </React.Fragment>\r\n      )\r\n    }\r\n  }\r\n\r\n\t// NEW DATA\r\n\t// STORED DATA\r\n\t// CALCULATED DATA\r\n\r\n  return (\r\n    <>\r\n      <h3>Remaining: {feature && remainingUsage(feature)}</h3>\r\n      {additionalContent()}\r\n      <button className={feature && !feature.usageSources[0]?.current_usage ? \"inactive-button\" : \"\"} onClick={() => renderClick(\"+\")}>+</button>\r\n      <button className={feature && !remainingUsage(feature) ? \"inactive-button\" : \"\"} onClick={() => renderClick(\"-\")}>-</button>\r\n    </>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Points)\r\n","import Store from '../../store'\r\n\r\nconst { getState, dispatch } = Store\r\n\r\nexport const modalAction = (detail, obj, remove) => dispatch({type: \"MODAL\", detail, obj, remove})\r\nexport const exitModalAction = () => ({type: \"MODAL\", remove: true})\r\nexport const updateNotificationsAction = notifications => dispatch({type: \"UPDATE NOTIFICATIONS\", notifications})\r\nexport const updateStoredNotificationsAction = notifications => dispatch({type: \"UPDATE STORED NOTIFICATIONS\", notifications})\r\nexport const tooltipAction = (message, target) => dispatch({type: \"TOOLTIP\", message, target})\r\n","import React from 'react'\r\nimport store from '../store'\r\nimport _ from 'lodash'\r\nimport { modalAction } from './action_creator/popups'\r\n\r\n\r\n// FREQUENTLY USED FUNCTIONS\r\n\r\nexport const locateAbility = (source) => {\r\n\tconst { character } = store.getState()\r\n\treturn character[source.source].find(ability => ability.id === source.sourceId)\r\n}\r\n\r\nexport const locateFeatureThroughAbility = (ability, featureId) => {\r\n\treturn ability.features.find(f => f.id === featureId)\r\n}\r\n\r\nexport const locateFeatureFromSource = source => {\r\n\treturn locateFeatureThroughAbility(locateAbility(source), source.featureId)\r\n}\r\n\r\nexport const featureNameFromSource = source => {\r\n\tlet ability = locateAbility(source)\r\n\tlet feature = locateFeatureThroughAbility(ability, source.featureId)\r\n\treturn feature.name || ability.name\r\n}\r\n\r\nexport const locateFeatureAndAbilityFromSource = source => {\r\n\tlet ability = locateAbility(source)\r\n\tlet feature = locateFeatureThroughAbility(ability, source.featureId)\r\n\treturn {feature, ability}\r\n}\r\n\r\nexport const actionClass = a => {\r\n  switch(a){\r\n    case 'Standard Action':\r\n      return 'standard'\r\n    case 'Swift Action':\r\n      return 'swift'\r\n    case 'Move Action':\r\n      return 'move'\r\n    case 'Full-Round Action':\r\n      return 'full'\r\n    case 'Immediate Action':\r\n      return 'immediate'\r\n    case 'Free Action':\r\n      return 'free'\r\n    default:\r\n      return a\r\n  }\r\n}\r\n\r\nexport const renderTH = (num) => {\r\n\tswitch (parseInt(num)){\r\n\t\tcase 1:\r\n\t\t\treturn \"1st\"\r\n\t\tcase 2:\r\n\t\t\treturn \"2nd\"\r\n\t\tcase 3:\r\n\t\t\treturn \"3rd\"\r\n\t\tdefault:\r\n\t\t\treturn `${num}th`\r\n\t}\r\n}\r\n\r\nexport const classLevel = (klassId) => {\r\n\tlet classes = store.getState().character_info.classes\r\n\tlet klass = classes.find(cl => cl.id === klassId)\r\n\treturn klass?.level ?? null\r\n}\r\n\r\nexport const renderDamage = damage => {\r\n\treturn `${damage.num_of_dice}d${damage.damage_dice}`\r\n}\r\n\r\nexport const abbreviateDamageType = damageType => {\r\n\tif (!damageType){return null}\r\n\tif (damageType === \"positive\" || damageType === \"negative\"){\r\n\t\treturn _.capitalize(damageType.substring(0,3))\r\n\t} else {\r\n\t\treturn _.capitalize(damageType[0])\r\n\t}\r\n}\r\n\r\nexport const injectSpellIntoDescription = (description, spells, onClickFunction, functionOptions) => {\r\n\tlet domDescArray = [description]\r\n\tspells.forEach(sp => {\r\n\t\tlet name = sp.name.toLowerCase()\r\n\t\tfor (let i = 0; i < domDescArray.length; i++){\r\n\t\t\tif (typeof domDescArray[i] === \"string\" && domDescArray[i].includes(name)){\r\n\t\t\t\tlet splitDesc = domDescArray[i].split(name)\r\n\t\t\t\tlet onClick = () => onClickFunction(sp)\r\n\t\t\t\tsplitDesc.splice(1, 0, <em key={i*3+1} className=\"underline-hover\" onClick={onClick}>{name}</em>)\r\n\t\t\t\tdomDescArray[i] = splitDesc\r\n\t\t\t\tdomDescArray = domDescArray.flat()\r\n\t\t\t}\r\n\t\t// let descArray = description.split(name)\r\n\t\t// \tdomDescArray.push(descArray[i])\r\n\t\t// \tif (i + 1 < descArray.length){\r\n\t\t// \t\tdomDescArray.push(\" \")\r\n\t\t// \t\tdomDescArray.push(<em key={i*3+1} className=\"underline-hover\" onClick={onClick}>{name}</em>)\r\n\t\t// \t\tdomDescArray.push(\" \")\r\n\t\t// \t}\r\n\t\t}\r\n\t})\r\n\treturn <span>{domDescArray}</span>\r\n}\r\n\r\nexport const mod = (score) => {\r\n  return Math.floor( (score - 10) / 2 )\r\n}\r\n\r\nexport const pluser = (num) => {\r\n  return num < 0 ? num : `+${num}`\r\n}\r\n","import Store from '../../store'\r\n\r\nconst { getState, dispatch } = Store\r\n\r\nexport const bonusAction = (bonus, remove = false) => dispatch({type: 'BONUS', bonus, remove})\r\nexport const addMovementAction = (movement) => dispatch({type: 'ADD MOVEMENT', movement})\r\nexport const proficiencyAction = (proficiencies) => dispatch({type: 'NEW PROFICIENCY', proficiencies})\r\nexport const activeFeatureAction = (featureSource, options) => dispatch({type: 'ACTIVE FEATURE', featureSource, options})\r\nexport const addTemporaryHitPointsAction = tempHP => dispatch({type: 'ADD TEMP HP', tempHP})\r\nexport const removeTemporaryHitPointsAction = source => dispatch({type: 'REMOVE TEMP HP', source})\r\nexport const adjustStatusConditionsAction = conditions => dispatch({type: \"ADJUST STATUS CONDITION\", conditions})\r\nexport const forbiddenAction = (forbidden, remove = false) => dispatch({type: 'FORBIDDEN', forbidden, remove})\r\n","import Store from '../../store'\r\n\r\nconst { getState, dispatch } = Store\r\n\r\n\r\nexport const characterAction = (character) => dispatch({type: 'CHARACTER', character })\r\n\r\nexport const characterClassesAction = (array) => dispatch({type: 'CHARACTER_CLASSES', classes: array})\r\n\r\nexport const abilityScoreAction = ({ability, score}) => dispatch({type: 'ABILITY SCORE', ability, score })\r\n\r\nexport const abilityScoreImprovementAction = (ability_score) => dispatch({type: \"ABILITY SCORE IMPROVEMENT\", ability_score})\r\n\r\nexport const endTurnAction = () => dispatch({type: \"NEW TURN\"})\r\n\r\nexport const replaceCharacterArrayAction = (adjust, value) => dispatch({type: \"ADJUST CHARACTER REPLACE VALUE IN ARRAY\", adjust, value})\r\n\r\n// export const replaceCharacterInfoArrayAction = (adjust, value) => dispatch({type: \"ADJUST CHARACTER INFO REPLACE VALUE IN ARRAY\", adjust, value})\r\n\r\nexport const replaceCharacterInfoAction = (adjust, value, options) => dispatch({type: 'ADJUST CHARACTER INFO', adjust, value})\r\n\r\nexport const replaceCharacterAction = (adjust, value) => dispatch({type: 'ADJUST CHARACTER', adjust, value})\r\n\r\nexport const triggerTurnActionAction = action => dispatch({type: 'TRIGGER ACTION', action})\r\n","import store from '../../store'\r\nimport * as featureDistributions from './features'\r\nimport {\r\n  bonusAction,\r\n\tforbiddenAction\r\n} from '../action_creator/features'\r\nimport { replaceCharacterInfoAction } from '../action_creator/character'\r\n\r\nexport const statusConditionDistribution = statusCondition => {\r\n\tlet character_info = featureDistributions.defaultCharacterInfo()\r\n\tlet source = {...statusCondition.source, condition: statusCondition.condition}\r\n\tswitch (statusCondition.condition){\r\n\t\tcase \"Fatigued\":\r\n\t\t\tcharacter_info.bonuses.push(featureDistributions.statBonusFeature({statistic: \"strength\", bonus: -2, bonus_type: \"untyped\", duration: \"temporary\", specific_statistic: null, bonus_multiplier: null, bonus_multiplier_based_on_feature_level: null}, source))\r\n\t\t\tcharacter_info.bonuses.push(featureDistributions.statBonusFeature({statistic: \"dexterity\", bonus: -2, bonus_type: \"untyped\", duration: \"temporary\", specific_statistic: null, bonus_multiplier: null, bonus_multiplier_based_on_feature_level: null}, source))\r\n\t\t\tcharacter_info.forbidden.push(featureDistributions.forbiddenFeature(\"Run\", source))\r\n\t\t\tcharacter_info.forbidden.push(featureDistributions.forbiddenFeature(\"Charge\", source))\r\n\t\t\tbreak\r\n\t\tdefault:\r\n\t\t\tbreak\r\n\t}\r\n\tcharacter_info.bonuses.forEach(b => {\r\n\t\tbonusAction(b)\r\n\t})\r\n\r\n\tcharacter_info.forbidden.forEach(f => {\r\n\t\tforbiddenAction(f)\r\n\t})\r\n}\r\n\r\nexport const removeStatusConditionDistribution = statusCondition => {\r\n\tlet character_info = {...store.getState().character_info}\r\n\r\n\tlet bonuses = character_info.bonuses.filter(b => {\r\n\t\treturn b.source.condition !== statusCondition.condition\r\n\t})\r\n\treplaceCharacterInfoAction(\"bonuses\", bonuses)\r\n\r\n\tlet forbidden = character_info.forbidden.filter(f => {\r\n\t\treturn f.source.condition !== statusCondition.condition\r\n\t})\r\n\treplaceCharacterInfoAction(\"forbidden\", forbidden)\r\n}\r\n","import store from '../../store'\r\nimport * as WebsocketAction from '../action_creator/websocket'\r\nimport { websocketFeatureDistribution } from '../distributers/features'\r\nimport { updateNotificationsAction, updateStoredNotificationsAction } from '../action_creator/popups'\r\n// \tthis.props.cableApp.room =\r\n// \t\tthis.props.cableApp.cable.subscriptions.create({\r\n// \t\t\tchannel: \"RoomChannel\",\r\n// \t\t\troom: \"1\"\r\n// \t\t}, {\r\n// \t\t\treceived: (data) => {\r\n// \t\t\t\tconsole.log(data)\r\n// \t\t\t},\r\n// \t\t\tconnected: () => console.log(\"connected!\")\r\n// \t\t})\r\n\r\nexport const initializeCampaignWebsocket = async (character, options) => {\r\n\t// NEW DATA\r\n\tlet websocketCode\r\n\r\n\t// STORED DATA\r\n\tlet websocket = {...store.getState().websocket}\r\n\tif (options?.encounter){\r\n\t\twebsocketCode = options.websocketCode\r\n\t} else {\r\n\t\twebsocketCode = character.campaign?.websocket_code\r\n\t}\r\n\r\n\t// CALCULATED DATA\r\n\r\n\tif (websocket.cable === undefined){\r\n\t\treturn null\r\n\t}\r\n\r\n\r\n\twebsocket.campaign =\r\n\t\tawait {...websocket}.cable.subscriptions.create({\r\n\t\t\tchannel: \"CampaignsChannel\",\r\n\t\t\tcampaign_code: websocketCode\r\n\t\t}, {\r\n\t\t\tconnected: () => {\r\n\t\t\t\tconsole.log(\"connected!\")\r\n\t\t\t\tconsole.log(websocket)\r\n\t\t\t\tif (character){\r\n\t\t\t\t\twebsocket.campaign.send({character_id: character.id, message: `My name is ${character.name}`})\r\n\t\t\t\t} else if (options.encounter){\r\n\t\t\t\t\twebsocket.campaign.send({message: \"Initiating Encounter!\"})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\treceived: data => {\r\n\t\t\t\tconsole.log(\"received websocket data\", data.data)\r\n\t\t\t\tparseSentCampaignData(data.data)\r\n\t\t\t}\r\n\t\t})\r\n\r\n\tWebsocketAction.subscribeAction(websocket)\r\n}\r\n\r\nexport const sendCampaignWebsocket = (payload, source, options) => {\r\n\t// NEW DATA\r\n\t// STORED DATA\r\n\t// CALCULATED DATA\r\n\tconst { websocket, character } = {...store.getState()}\r\n\twebsocket.campaign.send({sender_id: character.id, payload, source, options})\r\n}\r\n\r\nconst parseSentCampaignData = data => {\r\n\tlet { sender_id, payload, source, options } = data\r\n\tif (sender_id){\r\n\t\tconst { character, notifications, storedNotifications } = store.getState()\r\n\t\tif (sender_id === character.id) {return null}\r\n\t\tlet sender = character.campaign.characters.find(ch => ch.id === sender_id)\r\n\r\n\r\n\t\t// distribute feature\r\n\t\tif (!options.toggleable){\r\n\t\t\twebsocketFeatureDistribution(payload, {...source, senderName: sender.name, senderId: sender_id}, options)\r\n\t\t}\r\n\r\n\t\t// craft message for notification\r\n\t\tif (options.remove){\r\n\t\t\t// remove active notification\r\n\t\t\t// remove stored notification\r\n\t\t\t// display new notification\r\n\t\t\tlet updatedNotifications = [...notifications]\r\n\t\t\tupdatedNotifications = updatedNotifications.filter(n => !n.message.includes(sender.name) && !n.message.includes(source.sourceName))\r\n\t\t\tlet message = `${sender.name} revoked the abilities of ${source.sourceName}.`\r\n\t\t\tlet notification = {message}\r\n\r\n\t\t\tupdatedNotifications.push(notification)\r\n\t\t\tupdateNotificationsAction(updatedNotifications)\r\n\r\n\t\t\tlet updatedStoredNotifications = [...storedNotifications]\r\n\t\t\tupdatedStoredNotifications = updatedStoredNotifications.filter(usn => usn.source.sourceName !== source.sourceName && usn.source.senderName !== sender.name)\r\n\r\n\t\t\tupdateStoredNotificationsAction(updatedStoredNotifications)\r\n\r\n\t\t} else {\r\n\t\t\tlet updatedNotifications = [...notifications]\r\n\t\t\tlet message = `${sender.name} gave you the abilities of ${source.sourceName}.`\r\n\t\t\tif (options.toggleable){message += \" Are you able to accept it?\"}\r\n\t\t\tlet notification = {message}\r\n\t\t\tif (options.toggleable){notification.toggleable = {payload, source:{...source, senderName: sender.name, senderId: sender_id}, options}}\r\n\r\n\t\t\tupdatedNotifications.push(notification)\r\n\t\t\tupdateNotificationsAction(updatedNotifications)\r\n\t\t}\r\n\t\t// don't distribute inherently if there is a togglable attribute\r\n\t}\r\n}\r\n","import Store from '../../store'\r\n\r\nconst { getState, dispatch } = Store\r\n\r\nexport const startWebsocketAction = websocket => dispatch({type: \"START WEBSOCKET\", websocket})\r\nexport const subscribeAction = websocket => dispatch({type: \"SUBSCRIBE WEBSOCKET\", websocket})\r\n","import store from '../../store'\r\nimport {\r\n  bonusAction,\r\n  addMovementAction,\r\n\tproficiencyAction,\r\n\tactiveFeatureAction,\r\n\taddTemporaryHitPointsAction,\r\n\tremoveTemporaryHitPointsAction,\r\n\tadjustStatusConditionsAction\r\n} from '../action_creator/features'\r\nimport { replaceCharacterInfoAction } from '../action_creator/character'\r\nimport { statusConditionDistribution, removeStatusConditionDistribution } from  './status_conditions'\r\nimport { sendCampaignWebsocket } from '../websocket/campaign'\r\nimport { locateAbility } from '../fuf'\r\n\r\nexport const defaultCharacterInfo = () => {\r\n\treturn {\r\n    bonuses: [],\r\n\t\tdisplayDescriptions: [],\r\n    effects: [],\r\n    features: [],\r\n\t\tforbidden: [],\r\n    proficiencies: { weapon: {groups: [], individualIds: []}, armor: {groups: [], individualIds: []} },\r\n    movement: [],\r\n\t\tstatusConditions: []\r\n  }\r\n}\r\n\r\nexport const doesThisFeatureNeedToBeDistributed = (ability) => {\r\n\tlet hasFeatures = false\r\n\tlet array = [\"skill_bonuses\", \"stat_bonuses\", \"display_descriptions\", \"conditions\", \"languages\", \"movements\", \"weapon_proficiencies\", \"armor_proficiencies\"]\r\n\tarray.forEach(feature => {\r\n\t\tif (ability[feature].length){hasFeatures = true}\r\n\t})\r\n\treturn hasFeatures\r\n}\r\n\r\nexport const initialCharacterDistribution = (character, options) => {\r\n\t// NEW DATA\r\n  let character_info = defaultCharacterInfo()\r\n\r\n\tlet characterLevel = store.getState().character_info?.classes?.reduce((agg, el) => (agg + el.level), 0)\r\n\r\n\tlet { specific_feature_id_to_be_updated } = options ?? {}\r\n\r\n  // racial traits\r\n  // klass features\r\n  character.applicable_klass_features.forEach(akf => {\r\n    akf.features.forEach((feature) => {\r\n      if (!feature.action && !feature.usage && (!specific_feature_id_to_be_updated || (specific_feature_id_to_be_updated && feature.id !== specific_feature_id_to_be_updated))) {\r\n\t\t\t\tlet characterChoice = character.character_choices.find(ccc => ccc.feature_id === feature.id)\r\n\t\t\t\tif (characterChoice){\r\n\t\t\t\t\tlet featureCC = feature.character_choices[0]\r\n\t\t\t\t\tcharacterChoice.column = featureCC.column\r\n\t\t\t\t\tcharacterChoice.sub_feature = featureCC.sub_feature\r\n\t\t\t\t}\r\n        klassFeaturesFeatureDistribution(feature, character_info, { sourceId: akf.id, source: \"applicable_klass_features\", featureId: feature.id }, {characterLevel, klassId: akf.klass_id, characterChoice})\r\n      }\r\n    })\r\n  })\r\n\r\n  // weapon\r\n  // armor\r\n  // magic items\r\n  character.character_magic_items.forEach(cmi => {\r\n    cmi.magic_item.features.forEach((feature) => {\r\n      if (!feature.action){\r\n        klassFeaturesFeatureDistribution(feature, character_info, { sourceId: cmi.id, source: \"character_magic_items\", featureId: feature.id }, {characterLevel})\r\n      }\r\n    })\r\n  })\r\n\r\n\r\n  character_info.bonuses.forEach(b => {\r\n    bonusAction(b)\r\n  })\r\n  // HARDCODE TESTING\r\n  character_info.movement.push({movement: \"Base\", feet: 30, bonus: false, penalty: false})\r\n\r\n  character_info.movement.forEach(addMovementAction)\r\n\r\n\tproficiencyAction(character_info.proficiencies)\r\n\r\n\treplaceCharacterInfoAction(\"displayDescriptions\", character_info.displayDescriptions)\r\n}\r\n\r\n\r\nexport const featureDistribution = (feature, options) => {\r\n\t// NEW DATA\r\n\tlet character_info = defaultCharacterInfo()\r\n\tlet source = {featureId: feature.id, sourceId: feature.sourceId, source: feature.source}\r\n\r\n\t// STORED DATA\r\n\tlet { activeFeatures, classes } = store.getState().character_info\r\n\tlet oldActiveFeaturesLength = activeFeatures.length\r\n\tlet characterLevel = classes.reduce((agg, el) => (agg + el.level), 0)\r\n\r\n\t// go through the feature, and add it to character_info\r\n\tklassFeaturesFeatureDistribution(feature, character_info, source, {characterLevel})\r\n\r\n\t// add/remove this feature to the list of active features in character_info.activeFeatures (redux)\r\n\tactiveFeatureAction(source)\r\n\r\n\t// check to see if this feature was added or removed\r\n\tactiveFeatures = store.getState().character_info.activeFeatures\r\n\r\n\tif(activeFeatures.length > oldActiveFeaturesLength){\r\n\t\t// if added\r\n\t\tcharacter_info.bonuses.forEach((b) => {\r\n\t\t\tif (b.statistic === \"Hit Points\" && b.bonus_type === \"temporary\"){\r\n\t\t\t\tlet redux = store.getState()\r\n\t\t\t\tlet tempHP = { source: {...b.source} }\r\n\t\t\t\tlet ability = redux.character[b.source.source].find(a => a.id === b.source.sourceId)\r\n\t\t\t\tlet multiplier = redux.character_info.classes.find(cl => cl.id === ability.klass_id).level\r\n\r\n\t\t\t\ttempHP.bonus = b.bonus * multiplier\r\n\t\t\t\taddTemporaryHitPointsAction(tempHP)\r\n\t\t\t} else {\r\n\t\t\t\tbonusAction(b)\r\n\t\t\t}\r\n\t\t})\r\n\t\t// v websockets! v\r\n\t\tif (feature.applications.find(app => app.affects_allies)){\r\n\t\t\tlet payload = {...character_info}\r\n\t\t\tlet ability = locateAbility(source)\r\n\t\t\tlet featureSource = {\r\n\t\t\t\tsourceName: ability.name,\r\n\t\t\t\tsourceId: ability.id,\r\n\t\t\t\tfeatureName: feature.name,\r\n\t\t\t\tfeatureId: feature.id\r\n\t\t\t}\r\n\t\t\tlet options = { additive: true, toggleable: !!feature.applications.find(app => app.toggleable) }\r\n\t\t\tif (ability.klass_id){featureSource.klassId = ability.klass_id}\r\n\t\t\tsendCampaignWebsocket(payload, featureSource, options)\r\n\t\t}\r\n\t} else {\r\n\t\t// if removed\r\n\t\tcharacter_info.bonuses.forEach((b) => {\r\n\t\t\tif (b.statistic === \"Hit Points\" && b.bonus_type === \"temporary\"){\r\n\t\t\t\tremoveTemporaryHitPointsAction(b.source)\r\n\t\t\t} else {\r\n\t\t\t\tbonusAction(b, true)\r\n\t\t\t}\r\n\t\t})\r\n\t\t// v websockets! v\r\n\t\tif (feature.applications.find(app => app.affects_allies)){\r\n\t\t\tlet payload = {...character_info}\r\n\t\t\tlet ability = locateAbility(source)\r\n\t\t\tlet featureSource = {\r\n\t\t\t\tsourceName: ability.name,\r\n\t\t\t\tsourceId: ability.id,\r\n\t\t\t\tfeatureName: feature.name,\r\n\t\t\t\tfeatureId: feature.id\r\n\t\t\t}\r\n\t\t\tlet options = {\r\n\t\t\t\tremove: true,\r\n\t\t\t\tadditive: false\r\n\t\t\t}\r\n\t\t\tif (ability.klass_id){featureSource.klassId = ability.klass_id}\r\n\t\t\tsendCampaignWebsocket(payload, featureSource, options)\r\n\t\t}\r\n\t\tcharacter_info.statusConditions.forEach(sc => {\r\n\t\t\tlet statusConditions = [...store.getState().character_info.statusConditions]\r\n\t\t\tstatusConditions = statusConditions.filter(c => c.condition !== sc.condition)\r\n\t\t\tadjustStatusConditionsAction(statusConditions)\r\n\t\t\tremoveStatusConditionDistribution(sc)\r\n\t\t})\r\n\t\t// AFTER THE MAIN FEATURE HAS ENDED\r\n\t\t// LOOK FOR ANY AFTER EFFECTS\r\n\t\tif (!feature.after){\r\n\t\t\tlet featureSource = store.getState().character[feature.source].find(ability => ability.id === feature.sourceId)\r\n\t\t\tlet featureSourceFeaturesAfter = featureSource.features.filter(fs => fs.after)\r\n\r\n\t\t\tcharacter_info = defaultCharacterInfo()\r\n\r\n\t\t\tfeatureSourceFeaturesAfter.forEach(after => {\r\n\t\t\t\tsource = {featureId: after.id, sourceId: feature.sourceId, source: feature.source}\r\n\t\t\t\tklassFeaturesFeatureDistribution(after, character_info, source, {characterLevel})\r\n\t\t\t})\r\n\r\n\t\t\tcharacter_info.statusConditions.forEach(sc => {\r\n\t\t\t\tlet statusConditions = [...store.getState().character_info.statusConditions]\r\n\t\t\t\tlet mappedSCs = [...statusConditions].map(c => c.condition)\r\n\t\t\t\tif (mappedSCs.includes(sc.condition)){\r\n\t\t\t\t\tstatusConditions = statusConditions.filter(rsc => rsc.condition !== sc.condition)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstatusConditions.push(sc)\r\n\t\t\t\t}\r\n\t\t\t\tactiveFeatureAction(sc.source)\r\n\t\t\t\tadjustStatusConditionsAction(statusConditions)\r\n\t\t\t\tstatusConditionDistribution(sc)\r\n\t\t\t})\r\n\r\n\t\t}\r\n\r\n\t}\r\n}\r\n\r\nexport const websocketFeatureDistribution = (payload, source, options) => {\r\n\tlet character_info = payload\r\n\r\n\tactiveFeatureAction(source, options)\r\n\r\n\tif (options.remove){\r\n\t\tcharacter_info.bonuses.forEach(b => {\r\n\t\t\tbonusAction(b, true)\r\n\t\t})\r\n\t} else {\r\n\t\tcharacter_info.bonuses.forEach(b => {\r\n\t\t\tbonusAction(b)\r\n\t\t})\r\n\t}\r\n\r\n}\r\n\r\n\r\nexport const klassFeaturesFeatureDistribution = (feature, obj, source, options) => {\r\n\tconst { characterLevel, klassId, characterChoice } = options\r\n\tlet classLevel = store.getState().character_info.classes?.find(cl => cl.id === klassId)?.level\r\n\r\n  feature.skill_bonuses.forEach((el) => {\r\n    obj.bonuses.push(skillBonusFeature(el, source))\r\n  })\r\n  feature.stat_bonuses.forEach((el) => {\r\n\t\tif (!el.applicable_level || el.applicable_level <= characterLevel){\r\n\t\t\tobj.bonuses.push(statBonusFeature(el, source))\r\n\t\t}\r\n  })\r\n  feature.movements.forEach((el) => {\r\n    obj.movement.push(movementsFeature(el, source, feature.usage, feature.applications, feature.conditions))\r\n  })\r\n\tfeature.armor_proficiencies.forEach(el => {\r\n\t\tweaponArmorProficienciesFeature(el, source, obj.proficiencies.armor, { characterChoice })\r\n\t})\r\n\tfeature.weapon_proficiencies.forEach(el => {\r\n\t\tweaponArmorProficienciesFeature(el, source, obj.proficiencies.weapon, { characterChoice })\r\n\t})\r\n\tfeature.status_conditions.forEach(el => {\r\n\t\tobj.statusConditions.push(statusConditionsFeature(el, source))\r\n\t})\r\n\tfeature.display_descriptions.forEach(el => {\r\n\t\tif (!el.applicable_level || el.applicable_level <= classLevel){\r\n\t\t\tobj.displayDescriptions.push(displayDescriptionsFeature(el, source))\r\n\t\t}\r\n\t})\r\n}\r\n\r\nconst skillBonusFeature = (sk, source) => {\r\n  const { skill_id, bonus, bonus_type, duration, bonus_multiplier, bonus_multiplier_based_on_feature_level, custom, minimum_bonus, round_down, specific_statistic } = sk\r\n  return {\r\n    type: 'skill',\r\n    skill_id,\r\n    bonus,\r\n    bonus_type,\r\n    duration,\r\n\t\tbonus_multiplier,\r\n\t\tbonus_multiplier_based_on_feature_level,\r\n\t\tcustom,\r\n\t\tminimum_bonus,\r\n\t\tround_down,\r\n\t\tspecific_statistic,\r\n    source\r\n  }\r\n}\r\n\r\nexport const statBonusFeature = (sb, source) => {\r\n  const { statistic, bonus, bonus_type, duration, specific_statistic, bonus_multiplier, bonus_multiplier_based_on_feature_level } = sb\r\n  return {\r\n    type: 'stat',\r\n    statistic,\r\n    bonus,\r\n    bonus_type,\r\n    duration,\r\n    specific_statistic,\r\n    bonus_multiplier,\r\n\t\tbonus_multiplier_based_on_feature_level,\r\n    source\r\n  }\r\n}\r\n\r\nconst movementsFeature = (m, source, usage, applications, conditions) => {\r\n  const { movement, feet, bonus, penalty, permanent } = m\r\n  if (permanent){\r\n    return {\r\n      movement,\r\n      feet,\r\n      bonus,\r\n      penalty,\r\n      permanent,\r\n      usage,\r\n      applications,\r\n      conditions,\r\n      source\r\n    }\r\n  } else {\r\n    return {}\r\n  }\r\n}\r\n\r\nconst weaponArmorProficienciesFeature = (wap, source, obj, options) => {\r\n\tif (options.characterChoice){\r\n\t\tif (wap.player_choice && wap[options.characterChoice.column] === null){\r\n\t\t\twap[options.characterChoice.column] = parseInt(options.characterChoice.choice)\r\n\t\t\tsource = {...source, characterChoiceId: options.characterChoice.id}\r\n\t\t}\r\n\t}\r\n\r\n\tif (wap.proficiency_group){\r\n\t\tobj.groups.push({ source, proficiency_group: wap.proficiency_group, additive: wap.additive })\r\n\t}\r\n\tif (wap.armor_id){\r\n\t\tobj.individualIds.push({ source, armor_id: wap.armor_id, additive: wap.additive })\r\n\t}\r\n\tif (wap.weapon_id){\r\n\t\tobj.individualIds.push({ source, weapon_id: wap.weapon_id, additive: wap.additive })\r\n\t}\r\n\r\n}\r\n\r\nconst statusConditionsFeature = (sc, source) => {\r\n\treturn {\r\n\t\tcondition: sc.condition,\r\n\t\tsource\r\n\t}\r\n}\r\n\r\nexport const forbiddenFeature = (f, source) => {\r\n\treturn {\r\n\t\tforbidden: f,\r\n\t\tsource\r\n\t}\r\n}\r\n\r\nexport const displayDescriptionsFeature = (dd, source) => {\r\n\treturn {\r\n\t\taccess_alignment: dd.access_alignment,\r\n\t\tdescription: dd.description,\r\n\t\ttitle: dd.title,\r\n\t\tsource\r\n\t}\r\n}\r\n","import localhost from '../localhost'\r\n\r\nexport const getFetch = url => {\r\n\treturn fetch(`${localhost}/api/v1/${url}`)\r\n\t\t.then(r => r.json())\r\n}\r\n\r\nexport const postFetch = (url, body) => {\r\n\treturn fetch(`${localhost}/api/v1/${url}`, {\r\n\t\tmethod: 'POST',\r\n\t\theaders: {\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\t'Response': 'application/json',\r\n\t\t\t'Authenticate': localStorage.token\r\n\t\t},\r\n\t\tbody: JSON.stringify(body)\r\n\t}).then(r => r.json())\r\n}\r\n\r\nexport const patchFetch = (url, body) => {\r\n\treturn fetch(`${localhost}/api/v1/${url}`, {\r\n\t\tmethod: 'PATCH',\r\n\t\theaders: {\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t\t'Response': 'application/json'\r\n\t\t},\r\n\t\tbody: JSON.stringify(body)\r\n\t}).then(r => r.json())\r\n}\r\n\r\nexport const deleteFetch = url => {\r\n\treturn fetch(`${localhost}/api/v1/${url}`, {\r\n\t\tmethod: 'DELETE'\r\n\t}).then(r => r.json())\r\n}\r\n","import store from '../../store'\r\nimport { mod } from '../../fuf'\r\nimport { featureDistribution as removeFeature } from '../distributers/features'\r\nimport { patchFetch } from '../fetches'\r\nimport { replaceCharacterArrayAction } from '../action_creator/character'\r\nimport { locateFeatureFromSource } from '../fuf'\r\n\r\n\r\nexport const calculateFeaturePercentage = feature => {\r\n\tif (!feature.usage){return null}\r\n\t// CALCULATED DATA\r\n\tlet maxUsage = calculateMaxUsage(feature.baseFeatureAndAbility?.feature.usage ?? feature.usage, feature.klassId, {klassArchetypeId: feature.klass_archetype_id})\r\n\tlet timesUsed = calculateCurrentUsage(feature.usageSources)\r\n\r\n\treturn `${maxUsage - timesUsed}/${maxUsage}`\r\n}\r\n\r\nexport const calculateMaxUsage = (usage, klassId, options) => {\r\n\t// NEW DATA\r\n\tlet points = 0\r\n\r\n\t// STORED DATA\r\n\tlet reduxState = store.getState()\r\n\tlet abilityScores = reduxState.character_info.ability_scores\r\n\r\n\tlet classLvl = reduxState.character_info.classes.find(cl => {\r\n\t\tif (klassId){\r\n\t\t\treturn cl.id === klassId\r\n\t\t} else if (options.klassArchetypeId){\r\n\t\t\tlet arch = reduxState.character.archetypes.find(ar => ar.id === options.klassArchetypeId)\r\n\t\t\treturn cl.id === arch.klass_id\r\n\r\n\t\t}\r\n\t}).level\r\n\r\n\t// if it has a static limit, return that\r\n\tif (usage.limit){return usage.limit}\r\n\r\n\t// otherwise, calculate the limit\r\n\tpoints += usage.base_limit\r\n\tif (usage.base_limit_modifier){points += mod(abilityScores[usage.base_limit_modifier])}\r\n\tif (classLvl > 1){points += (usage.limit_increase_per_level * (classLvl - 1))}\r\n\r\n\t// if it has a minimum, but that value is not met, replace points with the minimum\r\n\tif (usage.minimum_limit > points){points = usage.minimum_limit}\r\n\r\n\treturn points\r\n}\r\n\r\nexport const calculateCurrentUsage = used => {\r\n\tif (used.length === 0){return 0}\r\n\r\n\tif (used.length === 1){return used[0].current_usage}\r\n\tif (used.length > 1) {\r\n\t\tdebugger\r\n\t// \treturn used[0].current_usage\r\n\t}\r\n}\r\n\r\nexport const remainingUsage = feature => {\r\n\tif (!feature.usage){return 1000}\r\n\t// CALCULATED DATA\r\n\tlet maxUsage = calculateMaxUsage(feature.baseFeatureAndAbility?.feature.usage ?? feature.usage, feature.klassId)\r\n\tlet timesUsed = calculateCurrentUsage(feature.usageSources)\r\n\r\n\treturn maxUsage - timesUsed\r\n}\r\n\r\nexport const incrementFeatureUsage = async feature => {\r\n\tif (remainingUsage(feature) > 0){\r\n\t\tlet usage = feature.usageSources.length === 1 && feature.usageSources[0]\r\n\t\tawait alterCurrentUsage(usage, 1, usageArrayBasedOnSource(feature.source))\r\n\t} else {\r\n\t\tlet options = feature.usage?.all_feature_usage_options || []\r\n\t\tif (options.length){\r\n\r\n\t\t\tconst { character_info } = store.getState()\r\n\r\n\t\t\t// this is used when a feature expends every round\r\n\t\t\t// once that feature runs out of points, it goes to here\r\n\t\t\t// the below code only works for klass features, not klass_specializations or other future features\r\n\t\t\tdebugger\r\n\t\t\t// placing a debugger here for future use, to make universal in the future\r\n\r\n\t\t\toptions.forEach(opt => {\r\n\t\t\t\tif (character_info.activeFeatures.find(af => af.featureId === opt.optionSource.featureId & af.sourceId === opt.optionSource.sourceId && af.source === opt.optionSource.source)) {\r\n\t\t\t\t\tremoveFeature({...locateFeatureFromSource(opt.optionSource), sourceId: opt.optionSource.sourceId, klassId: opt.optionSource.feature, source: \"applicable_klass_features\"})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tremoveFeature(feature)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const decrementFeatureUsage = async feature => {\r\n\tlet usage = feature.usageSources.length === 1 && feature.usageSources[0]\r\n\tif (!!usage.current_usage){\r\n\t\tawait alterCurrentUsage(usage, -1, usageArrayBasedOnSource(feature.source))\r\n\t}\r\n}\r\n\r\nexport const alterCurrentUsage = async (usage, amount, url) => {\r\n\tawait patchFetch(url, {...usage, current_usage: usage.current_usage + amount})\r\n\t\t.then(data => {\r\n\t\t\treplaceCharacterArrayAction(url, data)\r\n\t\t})\r\n}\r\n\r\nexport const isThisFeatureActive = feature => {\r\n\tlet active = false\r\n\tconst { character_info } = store.getState()\r\n\tcharacter_info.activeFeatures.forEach(af => {\r\n\t\tif (af.featureId === feature.id && af.sourceId === feature.sourceId && af.source === feature.source){\r\n\t\t\tactive = true\r\n\t\t}\r\n\t\tlet options = feature.usage?.all_feature_usage_options || []\r\n\r\n\t\toptions.forEach(opt => {\r\n\t\t\tif (opt.optionSource.featureId === feature.id && opt.optionSource.sourceId === feature.sourceId && opt.optionSource.source === feature.source) {\r\n\t\t\t\tactive = true\r\n\t\t\t}\r\n\t\t})\r\n\t})\r\n\r\n\treturn active\r\n}\r\n\r\nconst usageArrayBasedOnSource = (source) => {\r\n\tswitch(source){\r\n\t\tcase \"applicable_klass_features\":\r\n\t\t\treturn \"character_klass_feature_usages\"\r\n\t\tcase \"klass_specializations\":\r\n\t\t\treturn \"character_klass_specialization_feature_usages\"\r\n\t\tdefault:\r\n\t\t\treturn null\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { featureNameFromSource, locateFeatureAndAbilityFromSource, actionClass } from '../../helper_functions/fuf'\r\nimport { calculateFeaturePercentage, calculateCurrentUsage } from '../../helper_functions/calculations/feature_usage'\r\nimport { featureDistribution } from '../../helper_functions/distributers/features'\r\nimport { patchFetch } from '../../helper_functions/fetches'\r\n\r\nconst FeatureUsageOptions = props => {\r\n\t// NEW DATA\r\n\t// STORED DATA\r\n\t// CALCULATED DATA\r\n\tlet source = {featureId: props.feature.id, source: props.feature.source, sourceId: props.feature.sourceId}\r\n\r\n\tconst renderOptions = () => {\r\n\r\n\t\treturn props.feature.usage.all_feature_usage_options.map(fuo => {\r\n\r\n\t\t\tconst { feature, ability } = locateFeatureAndAbilityFromSource(fuo.optionSource)\r\n\t\t\tlet name = feature.name || ability.name\r\n\t\t\tlet className = actionClass(feature.action?.name || props.feature.action.name)\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<li className=\"noStyleLi\">\r\n\t\t\t\t\t<button className={className} onClick={() => renderClick({...feature, sourceId: fuo.optionSource.sourceId, source: fuo.optionSource.source}, className)}>Activate</button> {name}\r\n\t\t\t\t</li>\r\n\t\t\t)\r\n\r\n\t\t})\r\n\r\n\t}\r\n\r\n\tconst renderClick = (feature, action) => {\r\n\t\tlet body = {\r\n\t\t\tcharacter_id: props.character.id,\r\n\t\t\tklass_feature_id: props.feature.sourceId,\r\n\t\t\tfeature_usage_id: props.feature.usage.id,\r\n\t\t\tcurrent_usage: calculateCurrentUsage(props.character.character_klass_feature_usages.filter(fu => fu.klass_feature_id === props.feature.sourceId)) + 1\r\n\t\t}\r\n\r\n\t\tpatchFetch(\"character_klass_feature_usages\", body)\r\n\t\t\t.then(data => {\r\n\t\t\t\tprops.dispatch({type: \"ADJUST CHARACTER REPLACE VALUE IN ARRAY\", adjust: \"character_klass_feature_usages\", value: data})\r\n\t\t\t\tfeatureDistribution(feature)\r\n\t\t\t})\r\n\r\n\t\tprops.dispatch({type: \"TRIGGER ACTION\", action})\r\n\t\tprops.exitModal()\r\n\t}\r\n\r\n  return (\r\n    <>\r\n\t\t\t<h3>{featureNameFromSource(source)} ({calculateFeaturePercentage(props.feature)})</h3>\r\n\t\t\t{renderOptions()}\r\n    </>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(FeatureUsageOptions)\r\n","import React from 'react'\r\nimport _ from 'lodash'\r\nimport { getFetch } from '../helper_functions/fetches'\r\n\r\nconst SpellDescription = props => {\r\n\r\n\tconst [spell, updateSpell] = React.useState({})\r\n\r\n\tReact.useEffect(() => {\r\n\t\tif (!props.spell.spell_list_spells) {\r\n\t\t\tgetFetch(`spells/${props.spell.id}`)\r\n\t\t\t\t.then(data => updateSpell(data.spell))\r\n\t\t} else {\r\n\t\t\tupdateSpell(props.spell)\r\n\t\t}\r\n\t}, [props.spell])\r\n\r\n  const renderComponentItems = () => {\r\n    // if any of the spell components have an item\r\n    if (spell.spell_components.find(sc => sc.item !== null)){\r\n      const { spell_components } = spell\r\n      let filtered = spell_components.filter(sc => sc.item)\r\n      let justItems = filtered.map(sc => sc.item)\r\n      let uniqItems = _.uniq(justItems)\r\n      return ` (${uniqItems.join(\", \")})`\r\n    } else {\r\n      return null\r\n    }\r\n  }\r\n\r\n  const renderFeet = () => {\r\n    const { spell_range } = spell\r\n    let arrayOfStrings = []\r\n    arrayOfStrings.push(spell_range.name)\r\n    if (spell_range.name === \"Close\"){\r\n      arrayOfStrings.push(\"(25 ft. + 5 ft./ 2 levels)\")\r\n    } else if (spell_range.name === \"Medium\"){\r\n      arrayOfStrings.push(\"(100 ft. + 10 ft./level)\")\r\n    } else if (spell_range.name === \"Long\"){\r\n      arrayOfStrings.push(\"(400 ft. + 40 ft./level)\")\r\n    }\r\n    return arrayOfStrings.join(\" \")\r\n  }\r\n\r\n  const renderDescription = () => {\r\n    let split = spell.description.split('\\n\\n')\r\n    return split.map(desc => <p>{desc}</p>)\r\n  }\r\n\r\n  const start = (e) => {\r\n    console.log(\"scroll?\")\r\n  }\r\n\r\n\tconsole.log(spell)\r\n\r\n\tif (!spell.id){\r\n\t\treturn null\r\n\t}\r\n\r\n  return (\r\n    <ul id='description-container' onScroll={start}>\r\n      <li><strong>{spell.name}</strong></li>\r\n      <li>School | {spell.magic_school.name} [{spell.subschools.map(ss => ss.name).join(\", \")}]</li>\r\n      <li>Level | {spell.spell_list_spells.map(sls => `${sls.spell_list.name.split(\" \")[0]} ${sls.spell_level}`).join(\", \")}</li>\r\n      <li><strong><u>Casting</u></strong></li>\r\n      <li>Casting Time | {spell.action.name}</li>\r\n      <li>Components | {spell.spell_components.map(sc => sc.component.abbreviation).join(\", \")}{renderComponentItems()}</li>\r\n      <li><strong><u>Effect</u></strong></li>\r\n      <li>Range | {renderFeet()}</li>\r\n      <li>Target | {spell.target}</li>\r\n      <li>Duration | {spell.duration}{spell.dismissible ? \" (D)\" : null}</li>\r\n      <li>Saving Throw | {spell.saving_throw} | Spell Resistance | {spell.spell_resistance ? \"Yes\" : \"No\"}</li>\r\n      <li><strong><u>Description</u></strong></li>\r\n      <li>{renderDescription()}</li>\r\n    </ul>\r\n  )\r\n}\r\n\r\nexport default SpellDescription\r\n","import store from '../../store'\r\nimport { mod, pluser } from '../../fuf'\r\n\r\n\r\nexport const abilityScore = (ability, permanent = false) => {\r\n\tlet array = abilityScoreArray(ability)\r\n\tif (permanent){\r\n\t\treturn array[0]\r\n\t} else {\r\n\t\treturn array[0] + array[1]\r\n\t}\r\n}\r\n\r\nexport const abilityScoreMod = (ability, permanent = false) => {\r\n\treturn mod(abilityScore(ability, permanent))\r\n}\r\n\r\nexport const abilityScoreModString = (ability, permanent =  false) => {\r\n\treturn pluser(abilityScoreMod(ability, permanent))\r\n}\r\n\r\nexport const abilityScoreArray = ability => {\r\n\t// NEW DATA\r\n\tlet array = []\r\n\tlet permanentScore = 0\r\n\tlet temporary = 0\r\n\t// STORED DATA\r\n\tlet ci = store.getState().character_info\r\n\tlet ability_scores = ci.ability_scores\r\n\tpermanentScore = ability_scores[ability]\r\n\t// CALCULATED DATA\r\n\tif (store.getState().character.any_bonus === ability){\r\n\t\tpermanentScore += 2\r\n\t}\r\n\r\n\tci.bonuses.forEach(b => {\r\n\t\tif (b.statistic === ability){\r\n\t\t\tif (b.duration === \"temporary\"){\r\n\t\t\t\ttemporary += b.bonus\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\t// 0 index has permanent score\r\n\t// 1 index has bonuses/penalties\r\n\r\n\tarray.push(permanentScore)\r\n\tarray.push(temporary)\r\n\treturn array\r\n}\r\n","import store from '../../store'\r\nimport { remainingUsage } from './feature_usage'\r\nimport { remainingSpellsPerDayFromSpellcasting } from './spellcasting'\r\nimport _ from 'lodash'\r\n\r\nexport const isThisActionAvailable = (feature, options = {}) => {\r\n\t// \tSTORED DATA\r\n\tlet action = feature.action\r\n\tlet actions = store.getState().character_info.actions\r\n\r\n\t// CALCULATED DATA\r\n\taction = actionClass(action.name)\r\n\r\n\t// if you are trying to do a standard or move, and you've already used your full\r\n\t// cannot use the action\r\n\tif ((action === 'standard' || action  === 'move') && actions.full){\r\n\t\treturn 'cannot-cast'\r\n\t// if you are trying to do a full, and you've already used your standard or move\r\n\t// cannot use the action\r\n\t} else if (action === 'full' && (actions.standard || actions.move)){\r\n\t\treturn 'cannot-cast'\r\n\t// if you've already used the action\r\n\t// cannot use the action\r\n\t} else if (actions[action]){\r\n\t\treturn 'cannot-cast'\r\n\t// if there are no points left\r\n\t// cannot use the action\r\n\t} else if (!options.spell && !remainingUsage(feature)) {\r\n\t\treturn 'cannot-cast'\r\n\t\t// if the cost of this feature is higher than the remaining points\r\n\t\t// cannot use the action\r\n\t} else if (!options.spell && sharingConditions(feature)) {\r\n\t\treturn 'cannot-cast'\r\n\t// if you are out of spells per day from a spell at this level\r\n\t// cannot use the action\r\n} else if (options.spell && !options.castAtWill && remainingSpellsPerDayFromSpellcasting(options.spellcasting, options.characterLevel).find(spd => spd.spell_level === options.spellLevel)?.spells <= 0) {\r\n\t\treturn 'cannot-cast'\r\n\t}\telse {\r\n\t\treturn action\r\n\t}\r\n\r\n}\r\n\r\nexport const actionClass = a => {\r\n  switch(a){\r\n    case 'Standard Action':\r\n      return 'standard'\r\n    case 'Swift Action':\r\n      return 'swift'\r\n    case 'Move Action':\r\n      return 'move'\r\n    case 'Full-Round Action':\r\n      return 'full'\r\n    case 'Immediate Action':\r\n      return 'immediate'\r\n    case 'Free Action':\r\n      return 'free'\r\n\t\tcase 'no-action':\r\n\t\t\treturn 'no-action'\r\n    default:\r\n      return 'long'\r\n  }\r\n}\r\n\r\nexport const sharingConditions = feature => {\r\n\tlet statusConditions = store.getState().character_info.statusConditions.map(c => c.condition.toLowerCase())\r\n\tlet preventativeConditions = feature.conditions?.filter(c => c.if_affected_by_condition).map(c => c.if_affected_by_condition.toLowerCase()) ?? []\r\n\treturn _.intersection(statusConditions, preventativeConditions).length ? true : false\r\n}\r\n","import store from '../../store'\r\nimport { abilityScoreMod } from './ability_scores'\r\nimport { isThisActionAvailable } from './round_actions'\r\nimport { actionClass, classLevel } from '../fuf'\r\nimport { postFetch, patchFetch } from '../fetches'\r\nimport { replaceCharacterAction, triggerTurnActionAction } from '../action_creator/character'\r\n\r\nexport const allSpellcastingKlassFeatures = () => {\r\n\tconst { character } = {...store.getState()}\r\n\r\n\treturn [...character.applicable_klass_features].filter(akf => {\r\n\t\tlet spellcasting = false\r\n\t\takf.features.forEach(f => {\r\n\t\t\tif (f.spellcasting){spellcasting = true}\r\n\t\t})\r\n\t\treturn spellcasting\r\n\t})\r\n}\r\n\r\nexport const locateSpellcastingFeatureThroughId = id => {\r\n\tlet spellcasting\r\n\tallSpellcastingKlassFeatures.forEach(sckf => {\r\n\t\tsckf.feature.forEach(f => {\r\n\t\t\tif (f.spellcasting.id === id){spellcasting = f.spellcasting}\r\n\t\t})\r\n\t})\r\n\treturn spellcasting\r\n}\r\n\r\nexport const locateBonusSpellSlotsKlassFeature = () => {\r\n\tconst { character } = {...store.getState()}\r\n\r\n\treturn [...character.applicable_klass_features].filter(akf => {\r\n\t\tlet bonusSpellSlot = false\r\n\t\takf.features.forEach(f => {\r\n\t\t\tif (f.bonus_spell_slot){bonusSpellSlot = true}\r\n\t\t})\r\n\t\treturn bonusSpellSlot\r\n\t})\r\n}\r\n\r\nexport const availableCastableSpellLevelsThroughKlassId = id => {\r\n\tlet spellcastingKlassFeatures = allSpellcastingKlassFeatures()\r\n\tlet spellcasting = spellcastingKlassFeatures.find(kf => kf.klass_id === id && kf.features.find(f => f.spellcasting))?.features.find(f => f.spellcasting)?.spellcasting\r\n\tlet level = classLevel(id)\r\n\treturn spellcasting.spells_per_day_per_level.filter(spdpl => spdpl.klass_level === level).map(spd => spd.spell_level)\r\n}\r\n\r\nexport const allRemainingSpellsPerDay = () => {\r\n\tlet spellcastingKlassFeatures = allSpellcastingKlassFeatures()\r\n\treturn spellcastingKlassFeatures.map(remainingSpellsPerDay)\r\n}\r\n\r\nexport const remainingSpellsPerDay = (klassFeature) => {\r\n\tlet array = []\r\n\tconst { character, character_info } = store.getState()\r\n\tlet level = character_info.classes.find(cl => cl.id === klassFeature.klass_id).level\r\n\tlet klassName = character.uniq_klasses.find(uk => uk.id === klassFeature.klass_id).name\r\n\tlet abilityScoreModifier\r\n\tlet spellcasting\r\n\r\n\tklassFeature.features.forEach(f => {\r\n\t\tif (f.spellcasting){\r\n\t\t\tspellcasting = f.spellcasting\r\n\t\t\tabilityScoreModifier = abilityScoreMod(spellcasting.ability_score)\r\n\r\n\t\t\tarray = remainingSpellsPerDayFromSpellcasting(spellcasting, level, abilityScoreModifier)\r\n\t\t}\r\n\t})\r\n\t// here, you'd remove spells per level, as well\r\n\treturn {spellsPerDay: array, klassFeature, klassName, abilityScoreModifier, level, spellcasting}\r\n}\r\n\r\nexport const remainingSpellsPerDayFromSpellcasting = (spellcasting, level) => {\r\n\tconst { character, character_info } = store.getState()\r\n\tlet abilityScoreModifier = abilityScoreMod(spellcasting.ability_score)\r\n\r\n\tlet source = spellcasting.prepared_spells_per_level.length ? spellcasting.prepared_spells_per_level : spellcasting.spells_per_day_per_level\r\n\tlet applicableSPD = [...source].filter(spd => spd.klass_level === level)\r\n\r\n\treturn applicableSPD = [...applicableSPD].map(spd => {\r\n\t\tlet bonusSpell = null\r\n\t\tlet increase = 0\r\n\t\tif (spd.spell_level <= abilityScoreModifier){increase = 1}\r\n\r\n\t\tlet decrease = 0\r\n\t\tcharacter.cast_spells.forEach(cs => {\r\n\t\t\tif (spd.spell_level === cs.spell_level){decrease++}\r\n\t\t})\r\n\t\tcharacter.prepared_spells.forEach(ps => {\r\n\t\t\tif (spd.spell_level === ps.spell_level && ps.cast && !ps.bonus_spell){decrease++}\r\n\t\t\tif (spd.spell_level === ps.spell_level && ps.bonus_spell){bonusSpell = true}\r\n\t\t\tif (spd.spell_level === ps.spell_level && ps.bonus_spell && ps.cast){bonusSpell = \"cast\"}\r\n\t\t})\r\n\r\n\t\treturn {...spd, spells: (spd.spells + increase - decrease), bonusSpell}\r\n\t})\r\n}\r\n\r\nexport const additionalSpellStats = (lvl, abilityScoreModifier) => {\r\n\treturn {casterLevel: lvl, concentration: lvl + abilityScoreModifier}\r\n}\r\n\r\nexport const remainingKnownSpellsArray = (spellcasting, level) => {\r\n\tconst { character } = store.getState()\r\n\r\n\tlet knownSpellsThisLevel = knownSpellsArray(spellcasting, level)\r\n\tlet characterKnownSpells = character.character_known_spells\r\n\tconsole.log(knownSpellsThisLevel)\r\n\tknownSpellsThisLevel = knownSpellsThisLevel.map(kspl => {\r\n\t\tlet knownSpells = characterKnownSpells.filter(cks => cks.spellcasting.id === kspl.feature_spellcasting_id && cks.spell_list_spell.spell_level === kspl.spell_level)\r\n\r\n\t\tlet remainingSpells = kspl.spells - knownSpells.length\r\n\t\tremainingSpells = remainingSpells < 0 ? 0 : remainingSpells\r\n\t\treturn {...kspl, spells: remainingSpells}\r\n\t})\r\n\r\n\treturn knownSpellsThisLevel\r\n}\r\n\r\nexport const remainingPreparedSpellsArray = (spellcasting, level) => {\r\n\tconst { character } = store.getState()\r\n\r\n\tlet preparedSpellsThisLevel = remainingSpellsPerDayFromSpellcasting(spellcasting, level)\r\n\tlet characterPreparedSpells = character.prepared_spells\r\n\r\n\tpreparedSpellsThisLevel = preparedSpellsThisLevel.map(pspl => {\r\n\t\tlet cpsThisSpellLevel = characterPreparedSpells.filter(cps => cps.feature_spellcasting_id === pspl.feature_spellcasting_id && cps.spell_level === pspl.spell_level)\r\n\r\n\t\tlet remainingSpells = pspl.spells - cpsThisSpellLevel.length\r\n\t\tremainingSpells = remainingSpells < 0 ? 0 : remainingSpells\r\n\t\treturn {...pspl, spells: remainingSpells}\r\n\t})\r\n\r\n\treturn preparedSpellsThisLevel\r\n}\r\n\r\nexport const knownSpellsArray = (spellcasting, level) => {\r\n\treturn spellcasting.known_spells_per_level.filter(kspl => kspl.klass_level === level)\r\n}\r\n\r\nexport const spellsPerDayArray = (spellcasting, level) => {\r\n\treturn spellcasting.spells_per_day_per_level.filter(spdpl => spdpl.klass_level === level)\r\n}\r\n\r\nexport const preparedSpellsPerLevelArray = (spellcasting, level) => {\r\n\treturn spellcasting.prepared_spells_per_level.filter(spdpl => spdpl.klass_level === level)\r\n}\r\n\r\nexport const allowedPreparedSpellLevels = (spellcasting, level) => {\r\n\tlet spdArray = spellcasting.prepared_spells_per_level.length ? preparedSpellsPerLevelArray(spellcasting, level) : spellsPerDayArray(spellcasting, level)\r\n\treturn spdArray.map(spd => ({spell_level: spd.spell_level}))\r\n}\r\n\r\nexport const areAllKnownSpellsFilled = (spellcasting, level) => {\r\n\tlet remainingKnownSpells = remainingKnownSpellsArray(spellcasting, level)\r\n\r\n\tlet areThereKnownSpellsMissing = false\r\n\tlet i = 0\r\n\r\n\twhile (i <= remainingKnownSpells.length){\r\n\t\tif (remainingKnownSpells[i]?.spells > 0){\r\n\t\t\tareThereKnownSpellsMissing = true\r\n\t\t}\r\n\t\ti++\r\n\t}\r\n\r\n\treturn areThereKnownSpellsMissing\r\n}\r\n\r\nexport const areAllPreparedSpellsFilled = (spellcasting, level) => {\r\n\tif (!spellcasting.prepare_spells){\r\n\t\treturn false\r\n\t}\r\n\tlet remainingPreparedSpells = remainingPreparedSpellsArray(spellcasting, level)\r\n\r\n\tlet areTherePreparedSpellsMissing = false\r\n\tlet i = 0\r\n\r\n\tlet preparedSpells = store.getState().character.prepared_spells\r\n\r\n\twhile (i <= remainingPreparedSpells.length){\r\n\t\tlet preparedSpellsThisLevel = preparedSpells.filter(ps => ps.spell_level === i)\r\n\t\tif (remainingPreparedSpells[i]?.spells > preparedSpellsThisLevel.length){\r\n\t\t\tareTherePreparedSpellsMissing = true\r\n\t\t}\r\n\t\ti++\r\n\t}\r\n\r\n\treturn areTherePreparedSpellsMissing\r\n}\r\n\r\nexport const spellsCastAtWill = () => {\r\n\tlet id = 0\r\n\tlet spellcastingKlassFeatures = allSpellcastingKlassFeatures()\r\n\t// let spellcasting = spellcastingKlassFeatures.find(kf => kf.klass_id === id && kf.features.find(f => f.spellcasting))?.features.find(f => f.spellcasting)?.spellcasting\r\n\tlet array = []\r\n\r\n\tlet { character, character_info } = store.getState()\r\n\tcharacter.klass_specializations.forEach(kspec => {\r\n\t\tkspec.klass_specialization_features.forEach(kspecFeature => {\r\n\t\t\tkspecFeature.features.forEach(f => {\r\n\t\t\t\tf.castable_spells.forEach(cs => {\r\n\t\t\t\t\tif (cs.cast_at_will){\r\n\t\t\t\t\t\tlet level = character_info.classes.find(cl => cl.id === kspec.klass_feature.klass_id).level\r\n\r\n\t\t\t\t\t\tlet spellcasting = spellcastingKlassFeatures.find(sckf => sckf.klass_id === kspec.klass_feature.klass_id)\r\n\t\t\t\t\t\tspellcasting.features.forEach(f => {\r\n\t\t\t\t\t\t\tif (f.spellcasting){spellcasting = f.spellcasting}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tarray.push({spellInfo: {...cs, level}, klassFeature: kspec.klass_feature, abilityName: kspecFeature.name, spellcasting})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t})\r\n\t})\r\n\treturn array\r\n}\r\n\r\nexport const areAllBonusSpellSlotsFilled = (spellcasting, level) => {\r\n\tlet spellLevels = spellsPerDayArray(spellcasting, level).map(spd => spd.spell_level)\r\n\tlet bssAbilities = locateBonusSpellSlotsKlassFeature()\r\n\tif (bssAbilities.length === 1) {\r\n\t\tlet featureBonusSpellSlot = bssAbilities[0].features.find(f => f.bonus_spell_slot).bonus_spell_slot\r\n\t\t// if (featureBonusSpellSlot.list_of_available_spells === \"klass specialization\"){\r\n\t\t\t//\r\n\t\t\t// \tstore.getState().character.klass_specializations\r\n\t\t\t// }\r\n\t\t\tlet preparedSpells = store.getState().character.prepared_spells\r\n\r\n\t\t\t// iterate through the preparedSpells, if you find a prepared spell, remove that spell level from the spellLevels array\r\n\r\n\t\t\t// if the array is empty, all spells have been prepared\r\n\r\n\t\t\treturn !!spellLevels.length\r\n\t}\r\n\r\n}\r\n\r\nexport const bonusSpellSlotOptions = (spellcasting, level) => {\r\n\tlet bssAbilities = locateBonusSpellSlotsKlassFeature()\r\n\tlet spellLevels = spellsPerDayArray(spellcasting, level).map(spd => spd.spell_level)\r\n\tlet spellOptions = []\r\n\r\n\tif (bssAbilities.length === 1) {\r\n\t\tlet featureBonusSpellSlot = bssAbilities[0].features.find(f => f.bonus_spell_slot).bonus_spell_slot\r\n\t\tif (featureBonusSpellSlot.list_of_available_spells === \"klass_specializations\"){\r\n\t\t\tlet characterKlassSpecializations = store.getState().character.klass_specializations\r\n\t\t\tcharacterKlassSpecializations.forEach(kspec => {\r\n\t\t\t\tkspec.klass_specialization_features.forEach(ksFeature => {\r\n\t\t\t\t\tksFeature.features.forEach(f => {\r\n\t\t\t\t\t\tf.castable_spells.forEach(cs => {\r\n\t\t\t\t\t\t\tif (cs.bonus_spell_slot_option && spellLevels.includes(cs.applicable_spell_level)) {\r\n\t\t\t\t\t\t\t\tspellOptions.push({...cs.spell, spell_level: cs.applicable_spell_level, sourceId: ksFeature.id, sourceAbility: \"klass_specialization_feature\"})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\treturn spellOptions\r\n}\r\n\r\nexport const characterSpells = (spellcasting) => {\r\n\tlet keyword = spellcasting.prepare_spells ? \"prepared_spells\" : \"character_known_spells\"\r\n\tconst spells = [...store.getState().character[keyword]]\r\n\r\n\tlet data = spells.filter(cks => cks.spellcasting.id === spellcasting.id)\r\n\tlet sortedData = []\r\n\tfor(let i = 0; i < 10; i++){\r\n\t\tlet thisLvl = data.filter(sp => sp.spell_level === i)\r\n\t\tsortedData.push(thisLvl.sort((a,b) => a.spell.name.localeCompare(b.spell.name)))\r\n\t}\r\n\tsortedData = sortedData.flat()\r\n\r\n\treturn sortedData\r\n}\r\n\r\nexport const spellData = (spellData, klassId, characterLevel) => {\r\n\tconst { character_info } = store.getState()\r\n\tlet { spell, spell_list_spell: sls, spellcasting, source } = spellData\r\n\tlet level = character_info.classes.find(cl => cl.id === klassId).level\r\n\tlet castAtWill = false\r\n\r\n\tif (spellData.cast === undefined){\r\n\t\tspellData.spell_level = spellData.applicable_spell_level\r\n\t\tcastAtWill = spellData.cast_at_will\r\n\t}\r\n\tlet spellLevel = sls?.spell_level ?? spellData.spell_level\r\n\tlet action = spellData.cast ? \"cannot-cast\" : isThisActionAvailable(spell, {spell: true, spellcasting, klassId, spellLevel, castAtWill, characterLevel})\r\n\tlet name = spell.name\r\n\tlet range = renderSpellRange(spell, level)\r\n\tlet duration = renderSpellDuration(spell, level)\r\n\tlet difficultyClass = renderSpellDC(spellData)\r\n\tlet hitModifier = \"\"\r\n\tlet spellResistance = spell.spell_resistance ? \"Y\" : \"N\"\r\n\tlet spellId = spell.id\r\n\r\n\tlet preparedSpellId\r\n\tif (spellcasting.prepare_spells) preparedSpellId = spellData.id\r\n\tif (spellData.bonus_spell && !spellData.cast){action = isThisActionAvailable(spell)}\r\n\r\n\treturn { spellLevel, action, name, range, duration, difficultyClass, hitModifier, spellResistance, spellId, spellcasting, preparedSpellId, source }\r\n}\r\n\r\nexport const renderSpellRange = (spell, level) => {\r\n\tlet rangeIncrease = spell.spell_range.increase_per_level * level\r\n\tif (rangeIncrease % 1 !== 0){\r\n\t\trangeIncrease -= spell.spell_range.increase_per_level\r\n\t}\r\n\tif (spell.spell_range.feet + rangeIncrease === 0){\r\n\t\tif (spell.spell_range.name === \"Touch\"){return \"Touch\"}\r\n\t\treturn \"-\"\r\n\t}\r\n\treturn Math.floor(spell.spell_range.feet + rangeIncrease) + \" ft\"\r\n}\r\n\r\nexport const renderSpellDuration = (spell, level) => {\r\n\tlet duration = spell.time + (spell.increase_per_level * (level - 1))\r\n\tlet unitOfTime = spell.unit_of_time\r\n\tif (duration !== 1){unitOfTime += \"s\"}\r\n\tif (duration === 0){\r\n\t\tif (spell.duration === \"instantaneous\"){return \"instant.\"}\r\n\t\tif (spell.duration === \"concentration\"){return \"concent.\"}\r\n\t}\r\n\tlet time = duration + \" \" + unitOfTime\r\n\tlet concentration = spell.concentration ? \"con./\" : \"\"\r\n\tlet dismissible = spell.dismissible ? \" (D)\" : \"\"\r\n\treturn concentration + time + dismissible\r\n}\r\n\r\nexport const renderSpellDC = (spellData) => {\r\n\tif (spellData.spell.saving_throw === \"none\"){return \"-\"}\r\n\tlet save = spellData.spell.saving_throw\r\n\tif (save === \"Fortitude\"){save = \"Fort\"}\r\n\tif (save === \"Reflex\"){save = \"Ref\"}\r\n\tlet score = (10 + abilityScoreMod(spellData.spellcasting.ability_score) + spellData.spell_level)\r\n\tif (spellData.spell.magic_school.name === \"Conjuration\"){\r\n\t\tconsole.log(\"something increase DC something\")\r\n\t}\r\n\treturn save + \" \" + score\r\n}\r\n\r\nexport const castSpell = (ksData, spellsPerDay) => {\r\n\tif (ksData.action !== \"cannot-cast\"){\r\n\t\ttriggerTurnActionAction(ksData.action)\r\n\t\tif (ksData.spellcasting.infinite_zero_level && ksData.spellLevel === 0){\r\n\t\t\tconsole.log(\"Zero-th level spell cast!\")\r\n\t\t} else {\r\n\t\t\tlet spellPerDay = spellsPerDay.find(spd => spd.spell_level === ksData.spellLevel)\r\n\t\t\tconst { character } = store.getState()\r\n\t\t\t// this does not account for any cast at will\r\n\t\t\t// if it breaks here, the cast_at_will boolean should be in the ksData.cast_at_will\r\n\t\t\t// put an exception here if need be\r\n\t\t\tif (spellPerDay.spells > 0 || ksData.castableBonusSpell){\r\n\t\t\t\tif (ksData.spellcasting.expend_prepared_spells){\r\n\t\t\t\t\tpostFetch(`cast_spells`, {id: ksData.preparedSpellId, expend: true})\r\n\t\t\t\t\t\t.then(data => {\r\n\t\t\t\t\t\t\tlet replacePreparedSpells = [...character.prepared_spells]\r\n\t\t\t\t\t\t\treplacePreparedSpells = replacePreparedSpells.map(ps => {\r\n\t\t\t\t\t\t\t\tif (ps.id === ksData.preparedSpellId){\r\n\t\t\t\t\t\t\t\t\treturn {...ps, cast: true}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn ps\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\treplaceCharacterAction('prepared_spells', replacePreparedSpells)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet body = {\r\n\t\t\t\t\t\tcharacter_id: character.id,\r\n\t\t\t\t\t\tfeature_spellcasting_id: ksData.spellcasting.id,\r\n\t\t\t\t\t\tspell_level: ksData.spellLevel\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpostFetch(\"cast_spells\", body)\r\n\t\t\t\t\t\t.then(data => {\r\n\t\t\t\t\t\t\tlet replaceCastSpells = [...character.cast_spells]\r\n\t\t\t\t\t\t\treplaceCastSpells.push(body)\r\n\t\t\t\t\t\t\treplaceCharacterAction('cast_spells', replaceCastSpells)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport SpellDescription from '../spell_description'\r\nimport { remainingKnownSpellsArray, knownSpellsArray, allowedPreparedSpellLevels } from '../../utils/calculations/spellcasting'\r\nimport { getFetch, postFetch, deleteFetch } from '../../utils/fetches'\r\nimport { replaceCharacterAction } from '../../utils/action_creator/character'\r\n\r\nconst KnownSpellManager = props => {\r\n\r\n\tlet { character_known_spells, id } = useSelector(state => state.character)\r\n\r\n\tconst [displayButton, toggleDisplayButton] = React.useState(\"All\")\r\n\tconst [spells, updateSpells] = React.useState([])\r\n\tconst [filterInput, updateFilter] = React.useState(\"\")\r\n\tconst [spellId, updateSpellId] = React.useState(0)\r\n\tconst [dragInfo, updateDragInfo] = React.useState({\r\n\t\tcharacterKlassSpellId: 0,\r\n\t\tspellListSpellId: 0,\r\n\t\tspellId: 0,\r\n\t\tdragging: false\r\n\t})\r\n\tconst [spellListId, updateSpellListId] = React.useState(0)\r\n\tconst [featureSpellcasting, updateFeatureSpellcasting] = React.useState({})\r\n\tconst [warning, updateWarning] = React.useState(null)\r\n\r\n\tReact.useEffect(() => {\r\n\t\tconst { spellcasting } = props.spellcastingData\r\n\r\n\t\tgetFetch(`spells?spell_list_id=${spellcasting.spell_list.id}`)\r\n\t\t\t.then(data => {\r\n\t\t\t\tlet mutatedData = data.map(spell => {\r\n\t\t\t\t\treturn {...spell, spell_level: spell.spell_list_spells.find(sls => sls.spell_list.id === spellcasting.spell_list.id).spell_level}\r\n\t\t\t\t})\r\n\t\t\t\tlet sortedData = []\r\n\t\t\t\tfor(let i = 0; i < 10; i++){\r\n\t\t\t\t\tlet thisLvl = mutatedData.filter(sp => sp.spell_level === i)\r\n\t\t\t\t\tsortedData.push(thisLvl.sort((a,b) => a.name.localeCompare(b.name)))\r\n\t\t\t\t}\r\n\t\t\t\tsortedData = sortedData.flat()\r\n\t\t\t\tupdateSpells(sortedData)\r\n\t\t\t\tupdateSpellListId(spellcasting.spell_list.id)\r\n\t\t\t\tupdateFeatureSpellcasting(spellcasting)\r\n\t\t\t})\r\n\t}, [])\r\n\r\n\tconst updateDrag = (spellListSpellId, spellId) => {\r\n\t\tupdateDragInfo({...dragInfo, spellListSpellId, spellId, dragging: true})\r\n\t}\r\n\r\n\tconst updateDrop = e => {\r\n\t\te.preventDefault()\r\n\r\n\t\tlet body = {\r\n\t\t\tspell_list_spell_id: dragInfo.spellListSpellId,\r\n\t\t\tfeature_spellcasting_id: featureSpellcasting.id,\r\n\t\t\tcharacter_id: id\r\n\t\t}\r\n\t\tif (character_known_spells.find(ks => ks.spell.id === dragInfo.spellId)){\r\n\t\t\t// if spell is already known\r\n\t\t\tlet spellName = character_known_spells.find(ks => ks.spell.id === dragInfo.spellId).spell.name\r\n\t\t\tupdateWarning(`You already know ${spellName}`)\r\n\t\t} else {\r\n\t\t\t// if spell is not known\r\n\t\t\tpostFetch('known_spells', body)\r\n\t\t\t.then(data => {\r\n\t\t\t\tif (data.errors) {\r\n\t\t\t\t\tupdateWarning(data.errors[0])\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet spell = spells.find(sp => sp.id === dragInfo.spellId)\r\n\t\t\t\t\tlet spellListSpell = spell.spell_list_spells.find(sls => sls.id === dragInfo.spellListSpellId)\r\n\t\t\t\t\tlet characterKnownSpell = {\r\n\t\t\t\t\t\tid: data.id,\r\n\t\t\t\t\t\tspell,\r\n\t\t\t\t\t\tspell_list_spell: spellListSpell,\r\n\t\t\t\t\t\tspellcasting: featureSpellcasting\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet replaceCharacterKnownSpells = [...character_known_spells]\r\n\t\t\t\t\treplaceCharacterKnownSpells.push(characterKnownSpell)\r\n\t\t\t\t\tcharacter_known_spells.push(characterKnownSpell)\r\n\t\t\t\t\treplaceCharacterAction('character_known_spells', replaceCharacterKnownSpells)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\tupdateDragInfo({\r\n\t\t\tspellListSpellId: 0,\r\n\t\t\tspellId: 0,\r\n\t\t\tdragging: false\r\n\t\t})\r\n\t}\r\n\r\n\tconst resetDrag = e => {\r\n\t\te.preventDefault()\r\n\t\tupdateDragInfo({\r\n\t\t\tspellListSpellId: 0,\r\n\t\t\tspellId: 0,\r\n\t\t\tdragging: false\r\n\t\t})\r\n\t}\r\n\r\n\tconst removeCharacterKnownSpell = characterKnownSpellId => {\r\n\t\tdeleteFetch(`known_spells/${characterKnownSpellId}`)\r\n\t\t\t.then(data => {\r\n\t\t\t\tlet replaceCharacterKnownSpells = [...character_known_spells].filter(ks => ks.id !== characterKnownSpellId)\r\n\t\t\t\tcharacter_known_spells = character_known_spells.filter(ks => ks.id !== characterKnownSpellId)\r\n\t\t\t\treplaceCharacterAction('character_known_spells', replaceCharacterKnownSpells)\r\n\t\t\t})\r\n\t}\r\n\r\n\r\n\tconst renderKnownSpells = () => {\r\n\t\t// render buttons, that flash\r\n\t\t// render known spells, and missing spells\r\n\t\tconst { level, spellcasting } = props.spellcastingData\r\n\r\n\t\tlet knownSpells = knownSpellsArray(spellcasting, level)\r\n\t\tlet remainingKnownSpells = remainingKnownSpellsArray(spellcasting, level)\r\n\t\t// if there are no specified spells to be known\r\n\t\t// class can know any amount of spells\r\n\t\t// find out what spells they can cast with spells_per_day_per_level\r\n\t\t// add buttons to show levels\r\n\t\tif (remainingKnownSpells.length === 0){\r\n\t\t\tremainingKnownSpells = allowedPreparedSpellLevels(spellcasting, level)\r\n\t\t\tknownSpells = [...remainingKnownSpells]\r\n\t\t}\r\n\t\tlet buttons = remainingKnownSpells.map(ks => {\r\n\t\t\tlet className = \"\"\r\n\t\t\tif (ks.spells > 0){className='attention-button-animation'}\r\n\r\n\t\t\treturn <button className={className} onClick={() => toggleDisplayButton(ks.spell_level)}>{ks.spell_level}</button>\r\n\t\t})\r\n\t\tlet allKnownSpells = []\r\n\t\tknownSpells.forEach(ks => {\r\n\t\t\tlet num = ks.spells || 0\r\n\t\t\tlet thisLevelKnownSpells = character_known_spells.filter(cks => cks.spell_list_spell.spell_level === ks.spell_level)\r\n\t\t\tnum -= thisLevelKnownSpells.length\r\n\t\t\tthisLevelKnownSpells.forEach(tlks => allKnownSpells.push({spellLevel: ks.spell_level, spellName: tlks.spell.name, spellId: tlks.spell.id, characterKnownSpellId: tlks.id}))\r\n\t\t\tfor (let i = 0; i < num; i++){\r\n\t\t\t\tallKnownSpells.push({spellLevel: ks.spell_level, spellName: \"\", spellId: 0, characterKnownSpellId: 0})\r\n\t\t\t}\r\n\t\t})\r\n\t\tbuttons.unshift(<button onClick={() => toggleDisplayButton(\"All\")}>All</button>)\r\n\r\n\t\tif (displayButton !== \"All\"){\r\n\t\t\tallKnownSpells = allKnownSpells.filter(ks => parseInt(displayButton) === ks.spellLevel)\r\n\t\t}\r\n\t\tlet knownSpellsListItems = allKnownSpells.map(sp => {\r\n\t\t\treturn (\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td>{sp.spellLevel}</td>\r\n\t\t\t\t\t<td><em className='underline-hover' onClick={() => updateSpellId(sp.spellId)}>{sp.spellName}</em></td>\r\n\t\t\t\t\t<td>{!!sp.characterKnownSpellId && <button style={{color: \"white\", background: \"red\", fontSize: \"0.9rem\", border: \"1px solid black\", textAlign: \"right\", borderRadius: \"6px\"}} onClick={() => removeCharacterKnownSpell(sp.characterKnownSpellId)}>Remove</button>}</td>\r\n\t\t\t\t</tr>\r\n\t\t\t)\r\n\t\t})\r\n\r\n\t\t// display all known spells by spell level\r\n\t\t// if there is a spell missing, have a gap\r\n\r\n\t\t// UI if adding a spell\r\n\t\tlet style = {gridArea: \"known\", overflowY: \"scroll\", position: \"relative\", border: \"2px solid transparent\"}\r\n\t\tlet plusIcon = null\r\n\t\tif (dragInfo.dragging){\r\n\t\t\tstyle.border = \"2px dashed black\"\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<aside style={style} onDrop={updateDrop} onDragOver={e => e.preventDefault()}>\r\n\t\t\t\t{buttons}\r\n\t\t\t\t{plusIcon}\r\n\t\t\t\t<table>\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>Lvl</th>\r\n\t\t\t\t\t\t\t<th>Name</th>\r\n\t\t\t\t\t\t\t<th>Remove</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t{knownSpellsListItems}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t</aside>\r\n\t\t)\r\n\t}\r\n\r\n\tconst renderSpellOptions = () => {\r\n\t\tconst { level } = props.spellcastingData\r\n\r\n\t\tlet filteredSpells = spells.filter(sp => {\r\n\t\t\tlet input = filterInput.toLowerCase()\r\n\t\t\tlet spellName = sp.name.toLowerCase()\r\n\t\t\treturn spellName.includes(input)\r\n\t\t})\r\n\r\n\t\tlet knownSpellsIDs = character_known_spells.map(ks => ks.spell.id)\r\n\r\n\r\n\t\tlet nodeSpells = filteredSpells.map(sp => {\r\n\t\t\tlet className = sp.spell_level > level ? \"mobile-active-tab\" : \"\"\r\n\t\t\tif (knownSpellsIDs.includes(sp.id)){className = \"mobile-active-tab\"}\r\n\t\t\tlet spellListSpellId = sp.spell_list_spells.find(sls => sls.spell_list.id === spellListId)?.id\r\n\t\t\treturn (\r\n\t\t\t\t<tr className={className}>\r\n\t\t\t\t\t<td>{sp.spell_level}</td>\r\n\t\t\t\t\t<td draggable=\"true\" onDragStart={() => updateDrag(spellListSpellId, sp.id)} onDragEnd={resetDrag}><em className='underline-hover' onClick={() => updateSpellId(sp.id)}>{sp.name}</em></td>\r\n\t\t\t\t</tr>\r\n\t\t\t)\r\n\t\t})\r\n\t\treturn (\r\n\t\t\t<aside style={{gridArea: \"all-spells\", maxHeight: '100%', overflowY: 'scroll', margin: \"5px\"}}>\r\n\t\t\t\t<label htmlFor=\"spell-filter\">Filter Spells</label>\r\n\t\t\t\t<input name=\"spell-filter\" id=\"spell-filter\" type=\"text\" value={filterInput} onChange={e => updateFilter(e.target.value)}/>\r\n\t\t\t\t<table>\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>Lvl</th>\r\n\t\t\t\t\t\t\t<th>Name</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t{nodeSpells}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t</aside>\r\n\t\t)\r\n\t}\r\n\r\n\tconst renderSpellDescription = () => {\r\n\t\tif (!spellId || !spells.length){\r\n\t\t\treturn <aside style={{gridArea: \"spell-description\", display: \"flex\", justifyContent: \"center\", margin: \"auto\"}}><strong>Click on a spell to see details</strong></aside>\r\n\t\t}\r\n\t\tlet spell = spells.find(sp => sp.id === spellId)\r\n\r\n\t\treturn (\r\n\t\t\t<aside style={{gridArea: \"spell-description\", textAlign: \"left\", overflowY: \"scroll\"}}>\r\n\t\t\t\t<SpellDescription spell={spell} />\r\n\t\t\t</aside>\r\n\t\t)\r\n\t}\r\n\r\n\tconst renderWarning = () => {\r\n\t\tif (warning){\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tupdateWarning(null)\r\n\t\t\t}, 3000)\r\n\t\t\treturn (\r\n\t\t\t\t<div style={{position: \"fixed\", zIndex: \"1001\", top: \"45%\", left: \"40%\", color: \"white\", background: \"black\", padding: \"20px\", width: \"20%\"}}>\r\n\t\t\t\t{warning}\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t} else {return null}\r\n\t}\r\n\r\n\r\n\treturn (\r\n\t\t<section id=\"known-spells-popup\">\r\n\t\t\t{renderKnownSpells()}\r\n\t\t\t{renderSpellOptions()}\r\n\t\t\t{renderSpellDescription()}\r\n\t\t\t{renderWarning()}\r\n\t\t</section>\r\n\t)\r\n}\r\n\r\nexport default KnownSpellManager\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport SpellDescription from '../spell_description'\r\nimport { remainingPreparedSpellsArray, spellsPerDayArray, preparedSpellsPerLevelArray } from '../../utils/calculations/spellcasting'\r\nimport { abilityScoreMod } from '../../utils/calculations/ability_scores'\r\nimport { getFetch, postFetch, deleteFetch, patchFetch } from '../../utils/fetches'\r\nimport { sortedSpellsByLevelAndName } from '../../utils/fuf'\r\nimport { replaceCharacterAction } from '../../utils/action_creator/character'\r\nimport { modalAction } from '../../utils/action_creator/popups'\r\n\r\nconst PreparedSpellManager = props => {\r\n\r\n\tlet { prepared_spells: preparedSpells, id, character_known_spells: knownSpells } = useSelector(state => state.character)\r\n\r\n\tconst [displayButton, toggleDisplayButton] = React.useState(\"All\")\r\n\tconst [filterInput, updateFilter] = React.useState(\"\")\r\n\tconst [spells, updateSpells] = React.useState([])\r\n\tconst [spellId, updateSpellId] = React.useState(0)\r\n\tconst [spellListId, updateSpellListId] = React.useState(0)\r\n\tconst [featureSpellcasting, updateFeatureSpellcasting] = React.useState({})\r\n\tconst [dragInfo, updateDragInfo] = React.useState({\r\n\t\tpreparedSpellId: 0,\r\n\t\tspellListSpellId: 0,\r\n\t\tspellId: 0,\r\n\t\tspellLevel: null,\r\n\t\tdragging: false\r\n\t})\r\n\r\n\r\n\r\n\tReact.useEffect(() => {\r\n\t\tconst { spellcasting } = props.spellcastingData\r\n\r\n\t\tif (!spellcasting.known_spell_list){\r\n\t\t\tgetFetch(`spells?spell_list_id=${spellcasting.spell_list.id}`)\r\n\t\t\t.then(data => {\r\n\t\t\t\tlet mutatedData = data.map(spell => {\r\n\t\t\t\t\treturn {...spell, spell_level: spell.spell_list_spells.find(sls => sls.spell_list.id === spellcasting.spell_list.id).spell_level}\r\n\t\t\t\t})\r\n\t\t\t\t// let sortedData = []\r\n\t\t\t\t// for(let i = 0; i < 10; i++){\r\n\t\t\t\t// \tlet thisLvl = mutatedData.filter(sp => sp.spell_level === i)\r\n\t\t\t\t// \tsortedData.push(thisLvl.sort((a,b) => a.name.localeCompare(b.name)))\r\n\t\t\t\t// }\r\n\t\t\t\tlet sortedData = sortedSpellsByLevelAndName(mutatedData)\r\n\t\t\t\tconsole.log(sortedData)\r\n\t\t\t\tupdateSpells(sortedData)\r\n\t\t\t\tupdateSpellListId(spellcasting.spell_list.id)\r\n\t\t\t\tupdateFeatureSpellcasting(spellcasting)\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tlet ks = knownSpells.map(ks => ({...ks.spell, spell_level: ks.spell_list_spell.spell_level}))\r\n\t\t\tupdateSpells(sortedSpellsByLevelAndName(ks))\r\n\t\t\tupdateSpellListId(spellcasting.spell_list.id)\r\n\t\t\tupdateFeatureSpellcasting(spellcasting)\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst updateDrag = (spellListSpellId, spellId, spellLevel) => {\r\n\t\tupdateDragInfo({...dragInfo, spellListSpellId, spellId, spellLevel, dragging: true})\r\n\t}\r\n\r\n\tconst resetDrag = e => {\r\n\t\te.preventDefault()\r\n\t\tupdateDragInfo({\r\n\t\t\tspellListSpellId: 0,\r\n\t\t\tspellId: 0,\r\n\t\t\tspellLevel: null,\r\n\t\t\tdragging: false\r\n\t\t})\r\n\t}\r\n\r\n\tconst updateDrop = e => {\r\n\t\te.preventDefault()\r\n\r\n\t\tconsole.log(dragInfo)\r\n\t\tlet body = {\r\n\t\t\tspell_list_spell_id: dragInfo.spellListSpellId,\r\n\t\t\tfeature_spellcasting_id: featureSpellcasting.id,\r\n\t\t\tcharacter_id: id,\r\n\t\t\tspell_level: dragInfo.spellLevel\r\n\t\t}\r\n\t\t// if (character_known_spells.find(ks => ks.spell.id === dragInfo.spellId)){\r\n\t\t// \t// if spell is already known\r\n\t\t// \tlet spellName = character_known_spells.find(ks => ks.spell.id === dragInfo.spellId).spell.name\r\n\t\t// \tupdateWarning(`You already know ${spellName}`)\r\n\t\t// } else {\r\n\t\t// \t// if spell is not known\r\n\t\tpostFetch('prepared_spells', body)\r\n\t\t.then(data => {\r\n\t\t\tif (data.errors) {\r\n\t\t\t\t// updateWarning(data.errors[0])\r\n\t\t\t} else {\r\n\t\t\t\tlet spell = spells.find(sp => sp.id === dragInfo.spellId)\r\n\t\t\t\tlet spellListSpell = spell.spell_list_spells.find(sls => sls.id === dragInfo.spellListSpellId)\r\n\t\t\t\tlet characterPreparedSpell = {\r\n\t\t\t\t\tid: data.id,\r\n\t\t\t\t\tspell,\r\n\t\t\t\t\tspell_list_spell: spellListSpell,\r\n\t\t\t\t\tspellcasting: featureSpellcasting,\r\n\t\t\t\t\tspell_level: dragInfo.spellLevel,\r\n\t\t\t\t\tcast: false\r\n\t\t\t\t}\r\n\t\t\t\tlet replacePreparedSpells = [...preparedSpells]\r\n\t\t\t\treplacePreparedSpells.push(characterPreparedSpell)\r\n\t\t\t\tpreparedSpells.push(characterPreparedSpell)\r\n\t\t\t\treplaceCharacterAction('prepared_spells', replacePreparedSpells)\r\n\t\t\t}\r\n\t\t})\r\n\t\tupdateDragInfo({\r\n\t\t\tspellListSpellId: 0,\r\n\t\t\tspellId: 0,\r\n\t\t\tspellLevel: null,\r\n\t\t\tdragging: false\r\n\t\t})\r\n\t}\r\n\r\n\tconst removeCharacterPreparedSpell = preparedSpellId => {\r\n\t\tdeleteFetch(`prepared_spells/${preparedSpellId}`)\r\n\t\t\t.then(data => {\r\n\t\t\t\tlet replacePreparedSpells = [...preparedSpells].filter(ps => ps.id !== preparedSpellId)\r\n\t\t\t\tpreparedSpells = preparedSpells.filter(ps => ps.id !== preparedSpellId)\r\n\t\t\t\treplaceCharacterAction('prepared_spells', replacePreparedSpells)\r\n\t\t\t})\r\n\t}\r\n\r\n\tconst togglePreparedSpellCastStatus = (preparedSpellId, cast) => {\r\n\t\tpatchFetch(`cast_spells/toggle_cast/${preparedSpellId}`, {cast: !cast})\r\n\t\t\t.then(data => {\r\n\t\t\t\tlet replacePreparedSpells = [...preparedSpells]\r\n\t\t\t\treplacePreparedSpells = replacePreparedSpells.map(ps => {\r\n\t\t\t\t\tif (ps.id === preparedSpellId){\r\n\t\t\t\t\t\treturn {...ps, cast: !cast}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn ps\r\n\t\t\t\t})\r\n\t\t\t\treplaceCharacterAction('prepared_spells', replacePreparedSpells)\r\n\t\t\t})\r\n\t}\r\n\r\n\tconst renderPreparedSpells = () => {\r\n\t\t// render buttons, that flash\r\n\t\t// render known spells, and missing spells\r\n\t\tconst { level, spellcasting } = props.spellcastingData\r\n\r\n\t\tlet preparedSpellsPerDay = spellcasting.prepared_spells_per_level.length ? preparedSpellsPerLevelArray(spellcasting, level) : spellsPerDayArray(spellcasting, level)\r\n\t\tlet remainingPreparedSpells = remainingPreparedSpellsArray(spellcasting, level)\r\n\t\tlet buttons = remainingPreparedSpells.map(ks => {\r\n\t\t\tlet className = \"\"\r\n\t\t\tif (ks.spells > 0){className='attention-button-animation'}\r\n\r\n\t\t\treturn <button className={className} onClick={() => toggleDisplayButton(ks.spell_level)}>{ks.spell_level}</button>\r\n\t\t})\r\n\t\tbuttons.unshift(<button onClick={() => toggleDisplayButton(\"All\")}>All</button>)\r\n\r\n\t\tpreparedSpellsPerDay = preparedSpellsPerDay.map(pspd => {\r\n\t\t\tlet abilityScoreModifier = abilityScoreMod(spellcasting.ability_score)\r\n\t\t\tlet increase = 0\r\n\t\t\tif (pspd.spell_level <= abilityScoreModifier){increase = 1}\r\n\t\t\treturn {...pspd, spells: pspd.spells + increase}\r\n\t\t})\r\n\r\n\t\tlet allPreparedSpells = []\r\n\t\tpreparedSpellsPerDay.forEach(ps => {\r\n\t\t\tlet num = ps.spells\r\n\t\t\tlet thisLevelPreparedSpells = preparedSpells.filter(cps => cps.spell_level === ps.spell_level && !cps.bonus_spell)\r\n\t\t\tnum -= thisLevelPreparedSpells.length\r\n\t\t\tthisLevelPreparedSpells.forEach(tlps => allPreparedSpells.push({spellLevel: ps.spell_level, spellName: tlps.spell.name, spellId: tlps.spell.id, preparedSpellId: tlps.id, cast: tlps.cast}))\r\n\r\n\t\t\tfor (let i = 0; i < num; i++){\r\n\t\t\t\tallPreparedSpells.push({spellLevel: ps.spell_level, spellName: \"\", spellId: 0, preparedSpellId: 0})\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tif (displayButton !== \"All\"){\r\n\t\t\tallPreparedSpells = allPreparedSpells.filter(ps => parseInt(displayButton) === ps.spellLevel)\r\n\t\t}\r\n\t\tlet preparedSpellsListItems = allPreparedSpells.map(sp => {\r\n\t\t\treturn (\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td>{sp.spellLevel}</td>\r\n\t\t\t\t\t<td><em className='underline-hover' onClick={() => modalAction(\"spellDescription\", {id: sp.spellId}, {name: sp.spellName})}>{sp.spellName}</em></td>\r\n\t\t\t\t\t<td>{!!sp.preparedSpellId && <button style={{color: \"white\", background: \"red\", fontSize: \"0.9rem\", border: \"1px solid black\", textAlign: \"right\", borderRadius: \"6px\"}} onClick={() => removeCharacterPreparedSpell(sp.preparedSpellId)}>Forget</button>}</td>\r\n\t\t\t\t\t<td>{sp.cast && <button onClick={() => togglePreparedSpellCastStatus(sp.preparedSpellId, sp.cast)}>Restore</button>}</td>\r\n\t\t\t\t</tr>\r\n\t\t\t)\r\n\t\t})\r\n\r\n\t\tlet style = {gridArea: \"known\", overflowY: \"scroll\", position: \"relative\", border: \"2px solid transparent\"}\r\n\t\tif (dragInfo.dragging){\r\n\t\t\tstyle.border = \"2px dashed black\"\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<aside style={style} onDrop={updateDrop} onDragOver={e => e.preventDefault()}>\r\n\t\t\t\t{buttons}\r\n\t\t\t\t<table>\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>Lvl</th>\r\n\t\t\t\t\t\t\t<th>Name</th>\r\n\t\t\t\t\t\t\t<th>Forget Prepared Spell</th>\r\n\t\t\t\t\t\t\t<th>UnCast</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t{preparedSpellsListItems}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t</aside>\r\n\t\t)\r\n\t}\r\n\r\n\tconst renderSpellOptions = () => {\r\n\t\tconst { level } = props.spellcastingData\r\n\r\n\t\tlet filteredSpells = spells.filter(sp => {\r\n\t\t\tlet input = filterInput.toLowerCase()\r\n\t\t\tlet spellName = sp.name.toLowerCase()\r\n\t\t\treturn spellName.includes(input)\r\n\t\t})\r\n\r\n\t\tlet preparedSpellsIDs = preparedSpells.map(ps => ps.spell.id)\r\n\r\n\t\tlet nodeSpells = filteredSpells.map(sp => {\r\n\t\t\tlet className = sp.spell_level > level ? \"mobile-active-tab\" : \"\"\r\n\t\t\tif (preparedSpellsIDs.includes(sp.id)){className = \"mobile-active-tab\"}\r\n\t\t\tlet spellListSpellId = sp.spell_list_spells.find(sls => sls.spell_list.id === spellListId)?.id\r\n\t\t\treturn (\r\n\t\t\t\t<tr className={className}>\r\n\t\t\t\t\t<td>{sp.spell_level}</td>\r\n\t\t\t\t\t<td draggable=\"true\" onDragStart={() => updateDrag(spellListSpellId, sp.id, sp.spell_level)} onDragEnd={resetDrag}><em className='underline-hover' onClick={() => modalAction(\"spellDescription\", sp, {name: sp.name})}>{sp.name}</em></td>\r\n\t\t\t\t</tr>\r\n\t\t\t)\r\n\t\t})\r\n\t\treturn (\r\n\t\t\t<aside style={{gridArea: \"all-spells\", maxHeight: '100%', overflowY: 'scroll', margin: \"5px\"}}>\r\n\t\t\t\t<label htmlFor=\"spell-filter\">Filter Spells</label>\r\n\t\t\t\t<input name=\"spell-filter\" id=\"spell-filter\" type=\"text\" value={filterInput} onChange={e => updateFilter(e.target.value)}/>\r\n\t\t\t\t<table>\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>Lvl</th>\r\n\t\t\t\t\t\t\t<th>Name</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t{nodeSpells}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t</aside>\r\n\t\t)\r\n\t}\r\n\r\n\tconst renderSpellDescription = () => {\r\n\t\tif (!spellId || !spells.length){\r\n\t\t\treturn <aside style={{gridArea: \"spell-description\", display: \"flex\", justifyContent: \"center\", margin: \"auto\"}}><strong>Click on a spell to see details</strong></aside>\r\n\t\t}\r\n\t\tlet spell = spells.find(sp => sp.id === spellId)\r\n\r\n\t\treturn (\r\n\t\t\t<aside style={{gridArea: \"spell-description\", textAlign: \"left\", overflowY: \"scroll\"}}>\r\n\t\t\t\t<SpellDescription spell={spell} />\r\n\t\t\t</aside>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<section id=\"known-spells-popup\">\r\n\t\t\t{renderPreparedSpells()}\r\n\t\t\t{renderSpellOptions()}\r\n\t\t</section>\r\n\t)\r\n}\r\n\r\nexport default PreparedSpellManager\r\n","import store from '../../store'\r\nimport { replaceCharacterInfoAction } from '../action_creator/character'\r\nimport _ from 'lodash'\r\n\r\nexport const replaceCharacterInfo = (where, data) => {\r\n\tlet adjust\r\n\tlet value\r\n\r\n\tlet ci = store.getState().character_info\r\n\r\n\tif (where.sub_feature.includes(\"proficiencies\")){\r\n\t\tadjust = \"proficiencies\"\r\n\t\tvalue = {...ci.proficiencies}\r\n\t\tlet key\r\n\t\tlet subKey\r\n\t\tif (where.specifics === \"weapon_id\"){\r\n\t\t\tkey = \"weapon\"\r\n\t\t\tsubKey=\"individualIds\"\r\n\t\t}\r\n\t\tvalue = mutateCharacterInfoArray(value, where, data, key, subKey)\r\n\t}\r\n\r\n\treplaceCharacterInfoAction(adjust, value)\r\n}\r\n\r\nexport const mutateCharacterInfoArray = (array, where, data, key, subKey) => {\r\n\tif (where.isNew) {\r\n\t\tarray[key][subKey].push({weapon_id: parseInt(data.choice), additive: true, source: {\r\n\t\t\tcharacterChoiceId: data.id,\r\n\t\t\tfeatureId: data.feature_id,\r\n\t\t\tsource: \"applicable_klass_features\",\r\n\t\t\tsourceId: where.sourceId\r\n\t\t}})\r\n\t} else {\r\n\t\tarray[key][subKey] = array[key][subKey].map(ii => {\r\n\t\t\treturn ii.source.characterChoiceId === data.id ? {...ii, weapon_id: parseInt(data.choice)} : ii\r\n\t\t})\r\n\t}\r\n\treturn array\r\n}\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { postFetch, getFetch } from '../../helper_functions/fetches'\r\nimport { replaceCharacterAction } from '../../helper_functions/action_creator/character'\r\nimport { replaceCharacterInfo } from '../../helper_functions/distributers/character_info'\r\nimport _ from 'lodash'\r\n\r\nconst CharacterChoice = props => {\r\n\r\n\tconst [options, setOptions] = React.useState(null)\r\n\tconst [filteredOptions, setFilteredOptions] = React.useState(null)\r\n\tconst [searchTerm, setSearchTerm] = React.useState(\"\")\r\n\r\n\tReact.useEffect(() => {\r\n\t\tlet url = null\r\n\t\tif (props.choiceObj.specifics === \"weapon_id\"){url = \"weapons\"}\r\n\r\n\t\tif (url){\r\n\t\t\tgetFetch(url)\r\n\t\t\t\t.then(data => {\r\n\t\t\t\t\tlet alphabetizedData = data.sort((a,b) => a.name.localeCompare(b.name))\r\n\t\t\t\t\tsetOptions(alphabetizedData)\r\n\t\t\t\t\tsetFilteredOptions(alphabetizedData)\r\n\t\t\t\t})\r\n\t\t}\r\n\t}, [props.choiceObj.specifics])\r\n\r\n\tReact.useEffect(() => {\r\n\t\tif (options){\r\n\t\t\tlet filtered = options.filter(op => op.name.toLowerCase().includes(searchTerm.toLowerCase()))\r\n\t\t\tsetFilteredOptions(filtered)\r\n\t\t}\r\n\t}, [searchTerm])\r\n\r\n\tlet character = useSelector(state => state.character)\r\n\tlet { feature, featureName, klassName, specifics } = props.choiceObj\r\n\r\n\tspecifics = _.startCase(specifics)\r\n\tif (_.endsWith(specifics, \" Id\")){\r\n\t\tspecifics = specifics.substring(0, specifics.length-3)\r\n\t}\r\n\r\n\tconst renderOptions = () => {\r\n\t\tif (filteredOptions){\r\n\t\t\treturn filteredOptions.map(op => {\r\n\t\t\t\tlet name = op.name\r\n\t\t\t\tif (character.character_choices.find(ccc => ccc.feature_id === feature.id && parseInt(ccc.choice) === op.id)){\r\n\t\t\t\t\tname = <strong>{name}</strong>\r\n\t\t\t\t}\r\n\t\t\t\treturn <button onClick={() => renderClick(op.id)}>{name}</button>\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\treturn feature.character_choices.map(cc => {\r\n\t\t\tlet name = _.capitalize(cc.option)\r\n\t\t\tif (character.character_choices.find(ccc => ccc.feature_id === feature.id && ccc.choice === cc.option)){\r\n\t\t\t\tname = <strong>{name}</strong>\r\n\t\t\t}\r\n\t\t\treturn (\r\n\t\t\t\t<button onClick={() => renderClick(cc.option)}>{name}</button>\r\n\t\t\t)\r\n\t\t})\r\n\t}\r\n\r\n\tconst renderClick = (choice) => {\r\n\t\tpostFetch('character_choice', {\r\n\t\t\tcharacter_id: character.id,\r\n\t\t\tfeature_id: feature.id,\r\n\t\t\tchoice\r\n\t\t})\r\n\t\t\t.then(data => {\r\n\t\t\t\tlet removedCharacterChoicesArray = character.character_choices.filter(cc => cc.id !== data.id)\r\n\t\t\t\tremovedCharacterChoicesArray.push(data)\r\n\t\t\t\treplaceCharacterAction(\"character_choices\", removedCharacterChoicesArray)\r\n\t\t\t\t// have to add to character_choices in redux\r\n\t\t\t\treplaceCharacterInfo(props.choiceObj, data)\r\n\t\t\t\tprops.exitModal()\r\n\t\t\t})\r\n\t}\r\n\r\n\tconst searchBar = () => {\r\n\t\tif (!options){return null}\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<label htmlFor=\"search-term\">Filter:</label>\r\n\t\t\t\t<input type=\"text\" name=\"search-term\" id=\"search-term\" value={searchTerm} onChange={e => setSearchTerm(e.target.value)}/><br/>\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<h3>{featureName} {specifics}</h3>\r\n\t\t\t{searchBar()}\r\n\t\t\t{renderOptions()}\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default CharacterChoice\r\n","import store from '../../store'\r\nimport { mod, pluser } from '../../fuf'\r\n\r\n\r\nexport const abilityScore = (ability, permanent = false) => {\r\n\tlet array = abilityScoreArray(ability)\r\n\tif (permanent){\r\n\t\treturn array[0]\r\n\t} else {\r\n\t\treturn array[0] + array[1]\r\n\t}\r\n}\r\n\r\nexport const abilityScoreMod = (ability, permanent = false) => {\r\n\treturn mod(abilityScore(ability, permanent))\r\n}\r\n\r\nexport const abilityScoreModString = (ability, permanent =  false) => {\r\n\treturn pluser(abilityScoreMod(ability, permanent))\r\n}\r\n\r\nexport const abilityScoreArray = ability => {\r\n\t// NEW DATA\r\n\tlet array = []\r\n\tlet permanentScore = 0\r\n\tlet temporary = 0\r\n\t// STORED DATA\r\n\tlet ci = store.getState().character_info\r\n\tlet ability_scores = ci.ability_scores\r\n\tpermanentScore = ability_scores[ability]\r\n\t// CALCULATED DATA\r\n\tci.bonuses.forEach(b => {\r\n\t\tif (b.statistic === ability){\r\n\t\t\tif (b.duration === \"temporary\"){\r\n\t\t\t\ttemporary += b.bonus\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\t// 0 index has permanent score\r\n\t// 1 index has bonuses/penalties\r\n\r\n\tarray.push(permanentScore)\r\n\tarray.push(temporary)\r\n\treturn array\r\n}\r\n","import store from '../../store'\r\nimport { remainingUsage } from './feature_usage'\r\nimport { remainingSpellsPerDayFromSpellcasting } from './spellcasting'\r\nimport _ from 'lodash'\r\n\r\nexport const isThisActionAvailable = (feature, options = {}) => {\r\n\t// \tSTORED DATA\r\n\tlet action = feature.action\r\n\tlet actions = store.getState().character_info.actions\r\n\r\n\t// CALCULATED DATA\r\n\taction = actionClass(action.name)\r\n\r\n\t// if you are trying to do a standard or move, and you've already used your full\r\n\t// cannot use the action\r\n\tif ((action === 'standard' || action  === 'move') && actions.full){\r\n\t\treturn 'cannot-cast'\r\n\t// if you are trying to do a full, and you've already used your standard or move\r\n\t// cannot use the action\r\n\t} else if (action === 'full' && (actions.standard || actions.move)){\r\n\t\treturn 'cannot-cast'\r\n\t// if you've already used the action\r\n\t// cannot use the action\r\n\t} else if (actions[action]){\r\n\t\treturn 'cannot-cast'\r\n\t// if there are no points left\r\n\t// cannot use the action\r\n\t} else if (!options.spell && !remainingUsage(feature)) {\r\n\t\treturn 'cannot-cast'\r\n\t\t// if the cost of this feature is higher than the remaining points\r\n\t\t// cannot use the action\r\n\t} else if (!options.spell && sharingConditions(feature)) {\r\n\t\treturn 'cannot-cast'\r\n\t// if you are out of spells per day from a spell at this level\r\n\t// cannot use the action\r\n\t} else if (options.spell && !options.castAtWill && remainingSpellsPerDayFromSpellcasting(options.spellcasting, options.spellLevel).find(spd => spd.spell_level === options.spellLevel)?.spells <= 0) {\r\n\t\treturn 'cannot-cast'\r\n\t}\telse {\r\n\t\treturn action\r\n\t}\r\n\r\n}\r\n\r\nexport const actionClass = a => {\r\n  switch(a){\r\n    case 'Standard Action':\r\n      return 'standard'\r\n    case 'Swift Action':\r\n      return 'swift'\r\n    case 'Move Action':\r\n      return 'move'\r\n    case 'Full-Round Action':\r\n      return 'full'\r\n    case 'Immediate Action':\r\n      return 'immediate'\r\n    case 'Free Action':\r\n      return 'free'\r\n\t\tcase 'no-action':\r\n\t\t\treturn 'no-action'\r\n    default:\r\n      return 'long'\r\n  }\r\n}\r\n\r\nexport const sharingConditions = feature => {\r\n\tlet statusConditions = store.getState().character_info.statusConditions.map(c => c.condition.toLowerCase())\r\n\tlet preventativeConditions = feature.conditions?.filter(c => c.if_affected_by_condition).map(c => c.if_affected_by_condition.toLowerCase()) ?? []\r\n\treturn _.intersection(statusConditions, preventativeConditions).length ? true : false\r\n}\r\n","import store from '../../store'\r\nimport { abilityScoreMod } from './ability_scores'\r\nimport { isThisActionAvailable } from './round_actions'\r\nimport { actionClass, classLevel } from '../fuf'\r\nimport { postFetch, patchFetch } from '../fetches'\r\nimport { replaceCharacterAction, triggerTurnActionAction } from '../action_creator/character'\r\n\r\nexport const allSpellcastingKlassFeatures = () => {\r\n\tconst { character } = {...store.getState()}\r\n\r\n\treturn [...character.applicable_klass_features].filter(akf => {\r\n\t\tlet spellcasting = false\r\n\t\takf.features.forEach(f => {\r\n\t\t\tif (f.spellcasting){spellcasting = true}\r\n\t\t})\r\n\t\treturn spellcasting\r\n\t})\r\n}\r\n\r\nexport const locateSpellcastingFeatureThroughId = id => {\r\n\tlet spellcasting\r\n\tallSpellcastingKlassFeatures.forEach(sckf => {\r\n\t\tsckf.feature.forEach(f => {\r\n\t\t\tif (f.spellcasting.id === id){spellcasting = f.spellcasting}\r\n\t\t})\r\n\t})\r\n\treturn spellcasting\r\n}\r\n\r\nexport const locateBonusSpellSlotsKlassFeature = () => {\r\n\tconst { character } = {...store.getState()}\r\n\r\n\treturn [...character.applicable_klass_features].filter(akf => {\r\n\t\tlet bonusSpellSlot = false\r\n\t\takf.features.forEach(f => {\r\n\t\t\tif (f.bonus_spell_slot){bonusSpellSlot = true}\r\n\t\t})\r\n\t\treturn bonusSpellSlot\r\n\t})\r\n}\r\n\r\nexport const availableCastableSpellLevelsThroughKlassId = id => {\r\n\tlet spellcastingKlassFeatures = allSpellcastingKlassFeatures()\r\n\tlet spellcasting = spellcastingKlassFeatures.find(kf => kf.klass_id === id && kf.features.find(f => f.spellcasting))?.features.find(f => f.spellcasting)?.spellcasting\r\n\tlet level = classLevel(id)\r\n\treturn spellcasting.spells_per_day_per_level.filter(spdpl => spdpl.klass_level === level).map(spd => spd.spell_level)\r\n}\r\n\r\nexport const allRemainingSpellsPerDay = () => {\r\n\tlet spellcastingKlassFeatures = allSpellcastingKlassFeatures()\r\n\treturn spellcastingKlassFeatures.map(remainingSpellsPerDay)\r\n}\r\n\r\nexport const remainingSpellsPerDay = (klassFeature) => {\r\n\tlet array = []\r\n\tconst { character, character_info } = store.getState()\r\n\tlet level = character_info.classes.find(cl => cl.id === klassFeature.klass_id).level\r\n\tlet klassName = character.uniq_klasses.find(uk => uk.id === klassFeature.klass_id).name\r\n\tlet abilityScoreModifier\r\n\tlet spellcasting\r\n\r\n\tklassFeature.features.forEach(f => {\r\n\t\tif (f.spellcasting){\r\n\t\t\tspellcasting = f.spellcasting\r\n\t\t\tabilityScoreModifier = abilityScoreMod(spellcasting.ability_score)\r\n\r\n\t\t\tarray = remainingSpellsPerDayFromSpellcasting(spellcasting, level, abilityScoreModifier)\r\n\t\t}\r\n\t})\r\n\t// here, you'd remove spells per level, as well\r\n\treturn {spellsPerDay: array, klassFeature, klassName, abilityScoreModifier, level, spellcasting}\r\n}\r\n\r\nexport const remainingSpellsPerDayFromSpellcasting = (spellcasting, level) => {\r\n\tconst { character, character_info } = store.getState()\r\n\tlet abilityScoreModifier = abilityScoreMod(spellcasting.ability_score)\r\n\r\n\tlet applicableSPD = [...spellcasting.spells_per_day_per_level].filter(spd => spd.klass_level === level)\r\n\r\n\treturn applicableSPD = [...applicableSPD].map(spd => {\r\n\t\tlet bonusSpell = null\r\n\t\tlet increase = 0\r\n\t\tif (spd.spell_level <= abilityScoreModifier){increase = 1}\r\n\r\n\t\tlet decrease = 0\r\n\t\tcharacter.cast_spells.forEach(cs => {\r\n\t\t\tif (spd.spell_level === cs.spell_level){decrease++}\r\n\t\t})\r\n\t\tcharacter.prepared_spells.forEach(ps => {\r\n\t\t\tif (spd.spell_level === ps.spell_level && ps.cast && !ps.bonus_spell){decrease++}\r\n\t\t\tif (spd.spell_level === ps.spell_level && ps.bonus_spell){bonusSpell = true}\r\n\t\t\tif (spd.spell_level === ps.spell_level && ps.bonus_spell && ps.cast){bonusSpell = \"cast\"}\r\n\t\t})\r\n\r\n\t\treturn {...spd, spells: (spd.spells + increase - decrease), bonusSpell}\r\n\t})\r\n}\r\n\r\nexport const additionalSpellStats = (lvl, abilityScoreModifier) => {\r\n\treturn {casterLevel: lvl, concentration: lvl + abilityScoreModifier}\r\n}\r\n\r\nexport const remainingKnownSpellsArray = (spellcasting, level) => {\r\n\tconst { character } = store.getState()\r\n\r\n\tlet knownSpellsThisLevel = knownSpellsArray(spellcasting, level)\r\n\tlet characterKnownSpells = character.character_known_spells\r\n\r\n\tknownSpellsThisLevel = knownSpellsThisLevel.map(kspl => {\r\n\t\tlet knownSpells = characterKnownSpells.filter(cks => cks.spellcasting.id === kspl.feature_spellcasting_id && cks.spell_list_spell.spell_level === kspl.spell_level)\r\n\r\n\t\tlet remainingSpells = kspl.spells - knownSpells.length\r\n\t\tremainingSpells = remainingSpells < 0 ? 0 : remainingSpells\r\n\t\treturn {...kspl, spells: remainingSpells}\r\n\t})\r\n\r\n\treturn knownSpellsThisLevel\r\n}\r\n\r\nexport const remainingPreparedSpellsArray = (spellcasting, level) => {\r\n\tconst { character } = store.getState()\r\n\r\n\tlet preparedSpellsThisLevel = remainingSpellsPerDayFromSpellcasting(spellcasting, level)\r\n\tlet characterPreparedSpells = character.prepared_spells\r\n\r\n\tpreparedSpellsThisLevel = preparedSpellsThisLevel.map(pspl => {\r\n\t\tlet cpsThisSpellLevel = characterPreparedSpells.filter(cps => cps.feature_spellcasting_id === pspl.feature_spellcasting_id && cps.spell_level === pspl.spell_level)\r\n\r\n\t\tlet remainingSpells = pspl.spells - cpsThisSpellLevel.length\r\n\t\tremainingSpells = remainingSpells < 0 ? 0 : remainingSpells\r\n\t\treturn {...pspl, spells: remainingSpells}\r\n\t})\r\n\r\n\treturn preparedSpellsThisLevel\r\n}\r\n\r\nexport const knownSpellsArray = (spellcasting, level) => {\r\n\treturn spellcasting.known_spells_per_level.filter(kspl => kspl.klass_level === level)\r\n}\r\n\r\nexport const spellsPerDayArray = (spellcasting, level) => {\r\n\treturn spellcasting.spells_per_day_per_level.filter(spdpl => spdpl.klass_level === level)\r\n}\r\n\r\nexport const areAllKnownSpellsFilled = (spellcasting, level) => {\r\n\tlet remainingKnownSpells = remainingKnownSpellsArray(spellcasting, level)\r\n\r\n\tlet areThereKnownSpellsMissing = false\r\n\tlet i = 0\r\n\r\n\twhile (i <= remainingKnownSpells.length){\r\n\t\tif (remainingKnownSpells[i]?.spells > 0){\r\n\t\t\tareThereKnownSpellsMissing = true\r\n\t\t}\r\n\t\ti++\r\n\t}\r\n\r\n\treturn areThereKnownSpellsMissing\r\n}\r\n\r\nexport const areAllPreparedSpellsFilled = (spellcasting, level) => {\r\n\tif (!spellcasting.prepare_spells){\r\n\t\treturn false\r\n\t}\r\n\tlet remainingPreparedSpells = remainingPreparedSpellsArray(spellcasting, level)\r\n\r\n\tlet areTherePreparedSpellsMissing = false\r\n\tlet i = 0\r\n\r\n\tlet preparedSpells = store.getState().character.prepared_spells\r\n\r\n\twhile (i <= remainingPreparedSpells.length){\r\n\t\tlet preparedSpellsThisLevel = preparedSpells.filter(ps => ps.spell_level === i)\r\n\t\tif (remainingPreparedSpells[i]?.spells > preparedSpellsThisLevel.length){\r\n\t\t\tareTherePreparedSpellsMissing = true\r\n\t\t}\r\n\t\ti++\r\n\t}\r\n\r\n\treturn areTherePreparedSpellsMissing\r\n}\r\n\r\nexport const spellsCastAtWill = () => {\r\n\tlet id = 0\r\n\tlet spellcastingKlassFeatures = allSpellcastingKlassFeatures()\r\n\t// let spellcasting = spellcastingKlassFeatures.find(kf => kf.klass_id === id && kf.features.find(f => f.spellcasting))?.features.find(f => f.spellcasting)?.spellcasting\r\n\tlet array = []\r\n\r\n\tlet { character, character_info } = store.getState()\r\n\tcharacter.klass_specializations.forEach(kspec => {\r\n\t\tkspec.klass_specialization_features.forEach(kspecFeature => {\r\n\t\t\tkspecFeature.features.forEach(f => {\r\n\t\t\t\tf.castable_spells.forEach(cs => {\r\n\t\t\t\t\tif (cs.cast_at_will){\r\n\t\t\t\t\t\tlet level = character_info.classes.find(cl => cl.id === kspec.klass_feature.klass_id).level\r\n\r\n\t\t\t\t\t\tlet spellcasting = spellcastingKlassFeatures.find(sckf => sckf.klass_id === kspec.klass_feature.klass_id)\r\n\t\t\t\t\t\tspellcasting.features.forEach(f => {\r\n\t\t\t\t\t\t\tif (f.spellcasting){spellcasting = f.spellcasting}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tarray.push({spellInfo: {...cs, level}, klassFeature: kspec.klass_feature, abilityName: kspecFeature.name, spellcasting})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t})\r\n\t})\r\n\treturn array\r\n}\r\n\r\nexport const areAllBonusSpellSlotsFilled = (spellcasting, level) => {\r\n\tlet spellLevels = spellsPerDayArray(spellcasting, level).map(spd => spd.spell_level)\r\n\tlet bssAbilities = locateBonusSpellSlotsKlassFeature()\r\n\tif (bssAbilities.length === 1) {\r\n\t\tlet featureBonusSpellSlot = bssAbilities[0].features.find(f => f.bonus_spell_slot).bonus_spell_slot\r\n\t\t// if (featureBonusSpellSlot.list_of_available_spells === \"klass specialization\"){\r\n\t\t\t//\r\n\t\t\t// \tstore.getState().character.klass_specializations\r\n\t\t\t// }\r\n\t\t\tlet preparedSpells = store.getState().character.prepared_spells\r\n\r\n\t\t\t// iterate through the preparedSpells, if you find a prepared spell, remove that spell level from the spellLevels array\r\n\r\n\t\t\t// if the array is empty, all spells have been prepared\r\n\r\n\t\t\treturn !!spellLevels.length\r\n\t}\r\n\r\n}\r\n\r\nexport const bonusSpellSlotOptions = (spellcasting, level) => {\r\n\tlet bssAbilities = locateBonusSpellSlotsKlassFeature()\r\n\tlet spellLevels = spellsPerDayArray(spellcasting, level).map(spd => spd.spell_level)\r\n\tlet spellOptions = []\r\n\r\n\tif (bssAbilities.length === 1) {\r\n\t\tlet featureBonusSpellSlot = bssAbilities[0].features.find(f => f.bonus_spell_slot).bonus_spell_slot\r\n\t\tif (featureBonusSpellSlot.list_of_available_spells === \"klass_specializations\"){\r\n\t\t\tlet characterKlassSpecializations = store.getState().character.klass_specializations\r\n\t\t\tcharacterKlassSpecializations.forEach(kspec => {\r\n\t\t\t\tkspec.klass_specialization_features.forEach(ksFeature => {\r\n\t\t\t\t\tksFeature.features.forEach(f => {\r\n\t\t\t\t\t\tf.castable_spells.forEach(cs => {\r\n\t\t\t\t\t\t\tif (cs.bonus_spell_slot_option && spellLevels.includes(cs.applicable_spell_level)) {\r\n\t\t\t\t\t\t\t\tspellOptions.push({...cs.spell, spell_level: cs.applicable_spell_level, sourceId: ksFeature.id, sourceAbility: \"klass_specialization_feature\"})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\treturn spellOptions\r\n}\r\n\r\nexport const characterSpells = (spellcasting) => {\r\n\tlet keyword = spellcasting.prepare_spells ? \"prepared_spells\" : \"character_known_spells\"\r\n\tconst spells = [...store.getState().character[keyword]]\r\n\r\n\tlet data = spells.filter(cks => cks.spellcasting.id === spellcasting.id)\r\n\tlet sortedData = []\r\n\tfor(let i = 0; i < 10; i++){\r\n\t\tlet thisLvl = data.filter(sp => sp.spell_level === i)\r\n\t\tsortedData.push(thisLvl.sort((a,b) => a.spell.name.localeCompare(b.spell.name)))\r\n\t}\r\n\tsortedData = sortedData.flat()\r\n\r\n\treturn sortedData\r\n}\r\n\r\nexport const spellData = (spellData, klassId) => {\r\n\tconst { character_info } = store.getState()\r\n\tlet { spell, spell_list_spell: sls, spellcasting, source } = spellData\r\n\tlet level = character_info.classes.find(cl => cl.id === klassId).level\r\n\tlet castAtWill = false\r\n\r\n\tif (spellData.cast === undefined){\r\n\t\tspellData.spell_level = spellData.applicable_spell_level\r\n\t\tcastAtWill = spellData.cast_at_will\r\n\t}\r\n\tlet spellLevel = sls?.spell_level ?? spellData.spell_level\r\n\tlet action = spellData.cast ? \"cannot-cast\" : isThisActionAvailable(spell, {spell: true, spellcasting, klassId, spellLevel, castAtWill})\r\n\tlet name = spell.name\r\n\tlet range = renderSpellRange(spell, level)\r\n\tlet duration = renderSpellDuration(spell, level)\r\n\tlet difficultyClass = renderSpellDC(spellData)\r\n\tlet hitModifier = \"\"\r\n\tlet spellResistance = spell.spell_resistance ? \"Y\" : \"N\"\r\n\tlet spellId = spell.id\r\n\r\n\tlet preparedSpellId\r\n\tif (spellcasting.prepare_spells) preparedSpellId = spellData.id\r\n\tif (spellData.bonus_spell && !spellData.cast){action = isThisActionAvailable(spell)}\r\n\r\n\treturn { spellLevel, action, name, range, duration, difficultyClass, hitModifier, spellResistance, spellId, spellcasting, preparedSpellId, source }\r\n}\r\n\r\nexport const renderSpellRange = (spell, level) => {\r\n\tlet rangeIncrease = spell.spell_range.increase_per_level * level\r\n\tif (rangeIncrease % 1 !== 0){\r\n\t\trangeIncrease -= spell.spell_range.increase_per_level\r\n\t}\r\n\tif (spell.spell_range.feet + rangeIncrease === 0){\r\n\t\tif (spell.spell_range.name === \"Touch\"){return \"Touch\"}\r\n\t\treturn \"-\"\r\n\t}\r\n\treturn Math.floor(spell.spell_range.feet + rangeIncrease) + \" ft\"\r\n}\r\n\r\nexport const renderSpellDuration = (spell, level) => {\r\n\tlet duration = spell.time + (spell.increase_per_level * (level - 1))\r\n\tlet unitOfTime = spell.unit_of_time\r\n\tif (duration !== 1){unitOfTime += \"s\"}\r\n\tif (duration === 0){\r\n\t\tif (spell.duration === \"instantaneous\"){return \"instant.\"}\r\n\t\tif (spell.duration === \"concentration\"){return \"concent.\"}\r\n\t}\r\n\tlet time = duration + \" \" + unitOfTime\r\n\tlet concentration = spell.concentration ? \"con./\" : \"\"\r\n\tlet dismissible = spell.dismissible ? \" (D)\" : \"\"\r\n\treturn concentration + time + dismissible\r\n}\r\n\r\nexport const renderSpellDC = (spellData) => {\r\n\tif (spellData.spell.saving_throw === \"none\"){return \"-\"}\r\n\tlet save = spellData.spell.saving_throw\r\n\tif (save === \"Fortitude\"){save = \"Fort\"}\r\n\tif (save === \"Reflex\"){save = \"Ref\"}\r\n\treturn save + \" \" + (10 + abilityScoreMod(spellData.spellcasting.ability_score) + spellData.spell_level)\r\n}\r\n\r\nexport const castSpell = (ksData, spellsPerDay) => {\r\n\tif (ksData.action !== \"cannot-cast\"){\r\n\t\ttriggerTurnActionAction(ksData.action)\r\n\t\tif (ksData.spellcasting.infinite_zero_level && ksData.spellLevel === 0){\r\n\t\t\tconsole.log(\"Zero-th level spell cast!\")\r\n\t\t} else {\r\n\t\t\tlet spellPerDay = spellsPerDay.find(spd => spd.spell_level === ksData.spellLevel)\r\n\t\t\tconst { character } = store.getState()\r\n\t\t\t// this does not account for any cast at will\r\n\t\t\t// if it breaks here, the cast_at_will boolean should be in the ksData.cast_at_will\r\n\t\t\t// put an exception here if need be\r\n\t\t\tif (spellPerDay.spells > 0 || ksData.castableBonusSpell){\r\n\t\t\t\tif (ksData.spellcasting.expend_prepared_spells){\r\n\t\t\t\t\tpostFetch(`cast_spells`, {id: ksData.preparedSpellId, expend: true})\r\n\t\t\t\t\t\t.then(data => {\r\n\t\t\t\t\t\t\tlet replacePreparedSpells = [...character.prepared_spells]\r\n\t\t\t\t\t\t\treplacePreparedSpells = replacePreparedSpells.map(ps => {\r\n\t\t\t\t\t\t\t\tif (ps.id === ksData.preparedSpellId){\r\n\t\t\t\t\t\t\t\t\treturn {...ps, cast: true}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn ps\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\treplaceCharacterAction('prepared_spells', replacePreparedSpells)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet body = {\r\n\t\t\t\t\t\tcharacter_id: character.id,\r\n\t\t\t\t\t\tfeature_spellcasting_id: ksData.spellcasting.id,\r\n\t\t\t\t\t\tspell_level: ksData.spellLevel\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpostFetch(\"cast_spells\", body)\r\n\t\t\t\t\t\t.then(data => {\r\n\t\t\t\t\t\t\tlet replaceCastSpells = [...character.cast_spells]\r\n\t\t\t\t\t\t\treplaceCastSpells.push(body)\r\n\t\t\t\t\t\t\treplaceCharacterAction('cast_spells', replaceCastSpells)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport _ from 'lodash'\r\nimport { getFetch, postFetch } from '../../helper_functions/fetches'\r\nimport { availableCastableSpellLevelsThroughKlassId } from '../../helper_functions/calculations/spellcasting'\r\nimport { renderTH } from '../../helper_functions/fuf'\r\nimport { replaceCharacterAction, triggerTurnActionAction } from '../../helper_functions/action_creator/character'\r\nimport { isThisActionAvailable, actionClass } from '../../helper_functions/calculations/round_actions'\r\nimport SpellDescription from '../spell_description'\r\n\r\nconst SpontaneousCasting = props => {\r\n\r\n\tconst { character } = useSelector(state => state)\r\n\tconst [spells, setSpells] = React.useState([])\r\n\tconst [chosenStatus, updateChosenStatus] = React.useState(true)\r\n\tconst [lostPreparedSpellId, setLostPreparedSpellId] = React.useState(0)\r\n\tconst [spontaneousSpellId, setSpontaneousSpellId] = React.useState(0)\r\n\r\n\tReact.useEffect(() => {\r\n\t\tif (chosenStatus){\r\n\t\t\tlet characterChoice = null\r\n\t\t\tif (props.feature.spontaneous_castings[0].player_choice){\r\n\r\n\t\t\t\tcharacterChoice = character.character_choices.find(ccc => ccc.feature_id === props.feature.id)\r\n\t\t\t\tlet options = _.uniqBy(props.feature.spontaneous_castings, 'keyword').map(sc => sc.keyword)\r\n\r\n\t\t\t\tif (!characterChoice || !options.includes(characterChoice.choice)){\r\n\t\t\t\t\tupdateChosenStatus(false)\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet spd = availableCastableSpellLevelsThroughKlassId(props.feature.klassId)\r\n\t\t\tprops.feature.spontaneous_castings.forEach(sp => {\r\n\t\t\t\tif (characterChoice && characterChoice?.choice !== sp.keyword){return null}\r\n\t\t\t\tif (spd.includes(sp.spell_level)){\r\n\t\t\t\t\tgetFetch(`spells/${sp.spell_id}`)\r\n\t\t\t\t\t\t.then(data => {\r\n\t\t\t\t\t\t\tlet spellsCopy = [...spells]\r\n\t\t\t\t\t\t\tspellsCopy.push({...data.spell, spell_level: sp.spell_level})\r\n\t\t\t\t\t\t\tsetSpells(spellsCopy)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t}\r\n\r\n\t}, [props.feature, chosenStatus])\r\n\r\n\tconst renderClick = (isThisSpellSpontaneous, id) => {\r\n\t\tif (isThisSpellSpontaneous){\r\n\t\t\tlet newID = spontaneousSpellId === id ? 0 : id\r\n\t\t\tsetSpontaneousSpellId(newID)\r\n\t\t} else if (!isThisSpellSpontaneous){\r\n\t\t\tlet newID = lostPreparedSpellId === id ? 0 : id\r\n\t\t\tsetLostPreparedSpellId(newID)\r\n\t\t}\r\n\t}\r\n\r\n\tconst renderSpells = (array, spontaneousSpells) => {\r\n\t\tlet spellNodes = array.map(sp => {\r\n\t\t\tlet name = sp.name.toLowerCase()\r\n\t\t\tif ((spontaneousSpells && spontaneousSpellId === sp.id) || (!spontaneousSpells && lostPreparedSpellId === sp.preparedSpellId)){\r\n\t\t\t\tname = <strong>{name}</strong>\r\n\t\t\t}\r\n\t\t\tlet id = spontaneousSpells ? sp.id : sp.preparedSpellId\r\n\t\t\treturn (\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td>{sp.spell_level}</td>\r\n\t\t\t\t\t<td className={isThisActionAvailable(sp)}>{sp.action.name}</td>\r\n\t\t\t\t\t<td><button onClick={() => renderClick(spontaneousSpells, id)}><em>{name}</em></button></td>\r\n\t\t\t\t</tr>\r\n\t\t\t)\r\n\t\t})\r\n\t\tif (!spellNodes.length) {\r\n\t\t\treturn <p>You have no available prepared spells that you can expend.</p>\r\n\t\t}\r\n\t\tlet header = spontaneousSpells ? \"Available Spontaneous Spells\" : \"Prepared Spells\"\r\n\t\treturn (\r\n\t\t\t<table style={{width: \"48%\", margin: \"1%\"}}>\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t<tr><th colspan=\"2\">{header}</th></tr>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>Lvl</th>\r\n\t\t\t\t\t\t<th>Action</th>\r\n\t\t\t\t\t\t<th>Name</th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t{spellNodes}\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t)\r\n\t}\r\n\r\n\tconst renderSpontaneousSpellSummary = () => {\r\n\t\tif (spontaneousSpellId){\r\n\t\t\tlet spell = spells.find(sp => spontaneousSpellId === sp.id)\r\n\t\t\treturn <SpellDescription spell={spell} />\r\n\t\t}\r\n\t}\r\n\r\n\tconst castSpell = () => {\r\n\t\tpostFetch(`cast_spells`, {id: lostPreparedSpellId, expend: true})\r\n\t\t\t.then(data => {\r\n\t\t\t\tlet replacePreparedSpells = [...character.prepared_spells]\r\n\t\t\t\treplacePreparedSpells = replacePreparedSpells.map(ps => {\r\n\t\t\t\t\tif (ps.id === lostPreparedSpellId){\r\n\t\t\t\t\t\treturn {...ps, cast: true}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn ps\r\n\t\t\t\t})\r\n\t\t\t\tlet spontaneousSpell = spells.find(sp => spontaneousSpellId === sp.id)\r\n\t\t\t\tsetLostPreparedSpellId(0)\r\n\t\t\t\treplaceCharacterAction('prepared_spells', replacePreparedSpells)\r\n\t\t\t\ttriggerTurnActionAction(actionClass(spontaneousSpell.action.name))\r\n\t\t\t\tprops.exitModal()\r\n\t\t\t})\r\n\t}\r\n\r\n\tconst formattedPreparedSpells = character.prepared_spells.filter(sp => !sp.cast && sp.spell_level > 0).map(sp => ({...sp.spell, spell_level: sp.spell_level, preparedSpellId: sp.id}))\r\n\r\n\tconst renderSpellSelection = () => {\r\n\t\tif (!lostPreparedSpellId || !spontaneousSpellId){return null}\r\n\r\n\t\tlet spontaneous = spells.find(sp => spontaneousSpellId === sp.id)\r\n\t\tlet prepared = formattedPreparedSpells.find(sp => lostPreparedSpellId === sp.preparedSpellId)\r\n\t\tif (isThisActionAvailable(spontaneous) === \"cannot-cast\") {return <p>You cannot cast this spell because you don't can't use a <strong>{spontaneous.action.name}</strong> right now.</p>}\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<p>You are casting <em><strong>{spontaneous.name}</strong></em> at {renderTH(spontaneous.spell_level)} level by expending <em><strong>{prepared.name}</strong></em></p>\r\n\t\t\t\t<p>You must expend a prepared spell of the same or higher level to cast this spell. {prepared.name} is a <strong>{renderTH(prepared.spell_level)}-level</strong> spell.</p>\r\n\t\t\t\t<button onClick={castSpell}>Cast {spontaneous.name}</button>\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<h3>Spontaneous Casting</h3>\r\n\t\t\t{!chosenStatus && <h3>You have not chosen a category of Spontaneous Casting. Please go to the menu and choose, and try again.</h3>}\r\n\t\t\t<section style={{display: \"flex\"}}>\r\n\t\t\t\t{chosenStatus && renderSpells(spells, true)}\r\n\t\t\t\t{chosenStatus && renderSpells(formattedPreparedSpells, false)}\r\n\t\t\t</section>\r\n\t\t\t{renderSpontaneousSpellSummary()}\r\n\t\t\t{renderSpellSelection()}\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default SpontaneousCasting\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { getFetch, postFetch, deleteFetch } from '../../helper_functions/fetches'\r\nimport { replaceCharacterAction } from '../../helper_functions/action_creator/character'\r\nimport { injectSpellIntoDescription } from '../../helper_functions/fuf'\r\nimport SpellDescription from '../spell_description'\r\n\r\nconst KlassSpecialization = props => {\r\n\r\n\tconst { character } = useSelector(state => state)\r\n\tconst [specializationOptions, setSpecializationOptions] = React.useState([])\r\n\tconst [specificSpecializationId, setSpecificSpecializationId] = React.useState(0)\r\n\tconst [knownKSpecs, setKnownKSpecs] = React.useState([])\r\n\tconst [spell, setSpell] = React.useState({})\r\n\tconst { klassFeature, klassName } = props.klassFeature\r\n\r\n\tReact.useEffect(() => {\r\n\t\tconsole.log(props.klassFeature)\r\n\t\tgetFetch(`klass_specializations?klass_id=${props.klassFeature.klassFeature.id}`)\r\n\t\t\t.then(setSpecializationOptions)\r\n\t}, [props.klassFeature])\r\n\r\n\tconst renderOptions = () => {\r\n\t\tlet kspecNodes = specializationOptions.map(kspec => {\r\n\t\t\tlet name = kspec.name\r\n\t\t\tif (character.klass_specializations.find(ks => ks.id === kspec.id)){name = <strong>{name}</strong>}\r\n\t\t\treturn (\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td><button onClick={() => setSpecificSpecializationId(kspec.id)}>{name}</button></td>\r\n\t\t\t\t</tr>\r\n\t\t\t)\r\n\t\t})\r\n\t\treturn (\r\n\t\t\t<table className=\"klass-specialization-options\">\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>{klassFeature.name} Options</th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t{kspecNodes}\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t)\r\n\t}\r\n\r\n\tconst renderDetails = () => {\r\n\t\tif (!specificSpecializationId){return null}\r\n\t\tlet kspec = specializationOptions.find(spec => spec.id === specificSpecializationId)\r\n\t\tlet { name, description, klass_specialization_features: features } = kspec\r\n\t\tlet featureNodes = features.map(f => {\r\n\t\t\tlet spells = []\r\n\t\t\tf.features.forEach(feature => {\r\n\t\t\t\tfeature.castable_spells.forEach(cs => {\r\n\t\t\t\t\tspells.push(cs.spell)\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\tlet desc = f.description\r\n\t\t\tif (spells.length){desc = injectSpellIntoDescription(desc, spells, renderSpellClick, {})}\r\n\t\t\treturn (\r\n\t\t\t\t<p><strong>{f.name}:</strong> {desc}</p>\r\n\t\t\t)\r\n\t\t})\r\n\t\treturn (\r\n\t\t\t<aside className=\"klass-specialization-details\">\r\n\t\t\t\t<h3>{name}</h3>\r\n\t\t\t\t<p><em>{description}</em></p>\r\n\t\t\t\t{featureNodes}\r\n\t\t\t</aside>\r\n\t\t)\r\n\t}\r\n\r\n\tconst renderSpellClick = (incomingSpell) => {\r\n\t\tif (spell.id === incomingSpell.id){setSpell({})}\r\n\t\telse {setSpell(incomingSpell)}\r\n\t}\r\n\r\n\tconst renderSpell = () => {\r\n\t\tif (!spell.id){return null}\r\n\t\treturn (\r\n\t\t\t<aside className=\"klass-specialization-spell-description\">\r\n\t\t\t\t<SpellDescription spell={spell} />\r\n\t\t\t</aside>\r\n\t\t)\r\n\t}\r\n\r\n\tconst selectSpec = () => {\r\n\t\tlet klassFeatureKSpec\r\n\t\tspecializationOptions.forEach(kspec => {\r\n\t\t\tkspec.klass_feature_klass_specializations.forEach(kfks => {\r\n\t\t\t\tif (kfks.klass_feature_id === klassFeature.id && kfks.klass_specialization_id === specificSpecializationId){klassFeatureKSpec = kfks}\r\n\t\t\t})\r\n\t\t})\r\n\t\tpostFetch('character_klass_specializations', {character_id: character.id, klass_feature_klass_specialization_id: klassFeatureKSpec.id})\r\n\t\t\t.then(data => {\r\n\t\t\t\tlet replacementKSpecs = [...character.klass_specializations]\r\n\t\t\t\treplacementKSpecs.push(data)\r\n\t\t\t\treplaceCharacterAction('klass_specializations', replacementKSpecs)\r\n\t\t\t\tprops.exitModal()\r\n\t\t\t})\r\n\t}\r\n\r\n\tconst removeSpec = () => {\r\n\t\tlet character_klass_specialization_id = character.klass_specializations.find(ckspec => ckspec.id === specificSpecializationId).character_klass_specialization_id\r\n\t\tdeleteFetch(`character_klass_specializations/${character_klass_specialization_id}`)\r\n\t\t\t.then(data => {\r\n\t\t\t\tlet replacementKSpecs = character.klass_specializations.filter(ckspec => ckspec.id !== specificSpecializationId)\r\n\t\t\t\treplaceCharacterAction('klass_specializations', replacementKSpecs)\r\n\t\t\t\tprops.exitModal()\r\n\t\t\t})\r\n\t}\r\n\r\n\tconst renderSpecializationSelection = () => {\r\n\t\tif (!specificSpecializationId){return null}\r\n\t\tlet kspec = specializationOptions.find(spec => spec.id === specificSpecializationId)\r\n\t\tlet specTitle = klassFeature.choice_amount > 1 ? `one of your ${klassFeature.name}` : `your ${klassFeature.name}`\r\n\t\tif (character.klass_specializations.find(ckspec => ckspec.id === specificSpecializationId)){\r\n\t\t\treturn (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<p><strong>{kspec.name}</strong> is already {specTitle}.</p>\r\n\t\t\t\t\t<button onClick={removeSpec}>Remove</button>\r\n\t\t\t\t</>\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<p>You are choosing <strong>{kspec.name}</strong> as {specTitle}.</p>\r\n\t\t\t\t<button onClick={selectSpec}>Select</button>\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<h2>{klassName} {klassFeature.name} - Please Select {klassFeature.choice_amount}</h2>\r\n\t\t\t<section id=\"klass-specialization-container\">\r\n\t\t\t\t{renderOptions()}\r\n\t\t\t\t{renderDetails()}\r\n\t\t\t\t{renderSpell()}\r\n\t\t\t</section>\r\n\t\t\t{renderSpecializationSelection()}\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default KlassSpecialization\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport SpellDescription from '../spell_description'\r\nimport { bonusSpellSlotOptions, knownSpellsArray, spellsPerDayArray } from '../../helper_functions/calculations/spellcasting'\r\nimport { postFetch, deleteFetch, patchFetch } from '../../helper_functions/fetches'\r\nimport { replaceCharacterAction } from '../../helper_functions/action_creator/character'\r\n\r\n\r\nconst BonusSpellSlotManager = props => {\r\n\r\n\tlet { prepared_spells, id } = useSelector(state => state.character)\r\n\r\n\tconst [spells, updateSpells] = React.useState([])\r\n\tconst [filterInput, updateFilter] = React.useState(\"\")\r\n\tconst [spellId, updateSpellId] = React.useState(0)\r\n\tconst [dragInfo, updateDragInfo] = React.useState({\r\n\t\tspellId: 0,\r\n\t\tdragging: false\r\n\t})\r\n\tconst [featureSpellcasting, updateFeatureSpellcasting] = React.useState({})\r\n\r\n\r\n\tReact.useEffect(() => {\r\n\t\tconst { level, spellcasting } = props.spellcastingData\r\n\t\tupdateSpells(bonusSpellSlotOptions(spellcasting, level))\r\n\t}, [])\r\n\r\n\tconst updateDrag = (spellId) => {\r\n\t\tupdateDragInfo({...dragInfo, spellId, dragging: true})\r\n\t}\r\n\r\n\tconst updateDrop = e => {\r\n\t\te.preventDefault()\r\n\t\tlet spell = spells.find(sp => sp.id === dragInfo.spellId)\r\n\t\tlet body = {\r\n\t\t\tfeature_spellcasting_id: props.spellcastingData.spellcasting.id,\r\n\t\t\tcharacter_id: id,\r\n\t\t\tspell_level: spell.spell_level,\r\n\t\t\tdirect_spell_id: spell.id,\r\n\t\t\tbonus_spell: true,\r\n\t\t\talternate_source_id: spell.sourceId,\r\n\t\t\talternate_source_ability: spell.sourceAbility\r\n\t\t}\r\n\t\tpostFetch('prepared_spells', body)\r\n\t\t.then(data => {\r\n\t\t\tif (data.errors) {\r\n\t\t\t\t// updateWarning(data.errors[0])\r\n\t\t\t} else {\r\n\t\t\t\tlet preparedSpell = {\r\n\t\t\t\t\tid: data.id,\r\n\t\t\t\t\tspell,\r\n\t\t\t\t\tspell_list_spell: null,\r\n\t\t\t\t\tspellcasting: props.spellcastingData.spellcasting,\r\n\t\t\t\t\tbonus_spell: true,\r\n\t\t\t\t\tspell_level: spell.spell_level,\r\n\t\t\t\t\tcharacter_id: id,\r\n\t\t\t\t\talternate_source: data.alternate_source\r\n\t\t\t\t}\r\n\t\t\t\tlet replacePreparedSpells = [...prepared_spells]\r\n\t\t\t\treplacePreparedSpells.push(preparedSpell)\r\n\t\t\t\tprepared_spells.push(preparedSpell)\r\n\t\t\t\treplaceCharacterAction('prepared_spells', replacePreparedSpells)\r\n\t\t\t}\r\n\t\t})\r\n\t\tupdateDragInfo({\r\n\t\t\tspellId: 0,\r\n\t\t\tdragging: false\r\n\t\t})\r\n\t}\r\n\r\n\tconst resetDrag = e => {\r\n\t\te.preventDefault()\r\n\t\tupdateDragInfo({\r\n\t\t\tspellId: 0,\r\n\t\t\tdragging: false\r\n\t\t})\r\n\t}\r\n\r\n\r\n\tconst removePreparedSpell = preparedSpellId => {\r\n\t\tdeleteFetch(`prepared_spells/${preparedSpellId}`)\r\n\t\t\t.then(data => {\r\n\t\t\t\tlet replacePreparedSpells = [...prepared_spells].filter(psp => psp.id !== preparedSpellId)\r\n\t\t\t\tprepared_spells = prepared_spells.filter(ks => ks.id !== preparedSpellId)\r\n\t\t\t\treplaceCharacterAction('prepared_spells', replacePreparedSpells)\r\n\t\t\t})\r\n\t}\r\n\r\n\tconst togglePreparedSpellCastStatus = (preparedSpellId, cast) => {\r\n\t\tpatchFetch(`cast_spells/toggle_cast/${preparedSpellId}`, {cast: !cast})\r\n\t\t\t.then(data => {\r\n\t\t\t\tlet replacePreparedSpells = [...prepared_spells]\r\n\t\t\t\treplacePreparedSpells = replacePreparedSpells.map(ps => {\r\n\t\t\t\t\tif (ps.id === preparedSpellId){\r\n\t\t\t\t\t\treturn {...ps, cast: !cast}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn ps\r\n\t\t\t\t})\r\n\t\t\t\treplaceCharacterAction('prepared_spells', replacePreparedSpells)\r\n\t\t\t})\r\n\t}\r\n\r\n\tconst renderPreparedBonusSpells = () => {\r\n\t\t// render buttons, that flash\r\n\t\t// render known spells, and missing spells\r\n\t\tconst { level, spellcasting } = props.spellcastingData\r\n\r\n\t\tlet spellLevels = spellsPerDayArray(spellcasting, level).map(spd => spd.spell_level)\r\n\t\tconst index = spellLevels.indexOf(0)\r\n\t\tif (index !== -1){spellLevels.splice(index, 1)}\r\n\r\n\t\tlet allPreparedBonusSpellSlotSpells = []\r\n\t\tspellLevels.forEach(spLvl => {\r\n\t\t\tlet preparedSpellThisLevel = prepared_spells.find(psp => psp.spell_level === spLvl && psp.bonus_spell)\r\n\t\t\tif (preparedSpellThisLevel){\r\n\t\t\t\tallPreparedBonusSpellSlotSpells.push({spellLevel: spLvl, spellName: preparedSpellThisLevel.spell.name, spellId: preparedSpellThisLevel.spell.id, preparedSpellId: preparedSpellThisLevel.id, cast: preparedSpellThisLevel.cast})\r\n\t\t\t} else {\r\n\t\t\t\tallPreparedBonusSpellSlotSpells.push({spellLevel: spLvl, spellName: \"\", preparedSpellId: 0, spellId: 0})\r\n\t\t\t}\r\n\t\t\t// let num = ks.spells\r\n\t\t\t// let thisLevelKnownSpells = prepared_spells.filter(cks => cks.spell_list_spell.spell_level === ks.spell_level)\r\n\t\t\t// num -= thisLevelKnownSpells.length\r\n\t\t\t// thisLevelKnownSpells.forEach(tlks => allKnownSpells.push({spellLevel: ks.spell_level, spellName: tlks.spell.name, spellId: tlks.spell.id, characterKnownSpellId: tlks.id}))\r\n\t\t\t// for (let i = 0; i < num; i++){\r\n\t\t\t// \tallKnownSpells.push({spellLevel: ks.spell_level, spellName: \"\", spellId: 0, characterKnownSpellId: 0})\r\n\t\t\t// }\r\n\t\t})\r\n\r\n\t\tlet knownSpellsListItems = allPreparedBonusSpellSlotSpells.map(sp => {\r\n\t\t\treturn (\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td>{sp.spellLevel}</td>\r\n\t\t\t\t\t<td><em className='underline-hover' onClick={() => updateSpellId(sp.spellId)}>{sp.spellName}</em></td>\r\n\t\t\t\t\t<td>{!!sp.preparedSpellId && <button style={{color: \"white\", background: \"red\", fontSize: \"0.9rem\", border: \"1px solid black\", textAlign: \"right\", borderRadius: \"6px\"}} onClick={() => removePreparedSpell(sp.preparedSpellId)}>Remove</button>}</td>\r\n\t\t\t\t\t<td>{sp.cast && <button onClick={() => togglePreparedSpellCastStatus(sp.preparedSpellId, sp.cast)}>Restore</button>}</td>\r\n\r\n\t\t\t\t</tr>\r\n\t\t\t)\r\n\t\t})\r\n\r\n\t\t// display all known spells by spell level\r\n\t\t// if there is a spell missing, have a gap\r\n\r\n\t\t// UI if adding a spell\r\n\t\tlet style = {gridArea: \"known\", overflowY: \"scroll\", position: \"relative\", border: \"2px solid transparent\"}\r\n\t\tlet plusIcon = null\r\n\t\tif (dragInfo.dragging){\r\n\t\t\tstyle.border = \"2px dashed black\"\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<aside style={style} onDrop={updateDrop} onDragOver={e => e.preventDefault()}>\r\n\t\t\t\t{plusIcon}\r\n\t\t\t\t<table>\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>Lvl</th>\r\n\t\t\t\t\t\t\t<th>Name</th>\r\n\t\t\t\t\t\t\t<th>Forget Prepared Spell</th>\r\n\t\t\t\t\t\t\t<th>UnCast</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t{knownSpellsListItems}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t</aside>\r\n\t\t)\r\n\t}\r\n\r\n\tconst renderSpellOptions = () => {\r\n\t\tconst { level } = props.spellcastingData\r\n\r\n\t\tlet filteredSpells = spells.filter(sp => {\r\n\t\t\tlet input = filterInput.toLowerCase()\r\n\t\t\tlet spellName = sp.name.toLowerCase()\r\n\t\t\treturn spellName.includes(input)\r\n\t\t})\r\n\r\n\t\tlet knownSpellsIDs = prepared_spells.map(ks => ks.spell.id)\r\n\r\n\r\n\t\tlet nodeSpells = filteredSpells.map(sp => {\r\n\t\t\tlet className = sp.spell_level > level ? \"mobile-active-tab\" : \"\"\r\n\t\t\tif (knownSpellsIDs.includes(sp.id)){className = \"mobile-active-tab\"}\r\n\t\t\treturn (\r\n\t\t\t\t<tr className={className}>\r\n\t\t\t\t\t<td>{sp.spell_level}</td>\r\n\t\t\t\t\t<td draggable=\"true\" onDragStart={() => updateDrag(sp.id)} onDragEnd={resetDrag}><em className='underline-hover' onClick={() => updateSpellId(sp.id)}>{sp.name}</em></td>\r\n\t\t\t\t</tr>\r\n\t\t\t)\r\n\t\t})\r\n\t\treturn (\r\n\t\t\t<aside style={{gridArea: \"all-spells\", maxHeight: '100%', overflowY: 'scroll', margin: \"5px\"}}>\r\n\t\t\t\t<label htmlFor=\"spell-filter\">Filter Spells</label>\r\n\t\t\t\t<input name=\"spell-filter\" id=\"spell-filter\" type=\"text\" value={filterInput} onChange={e => updateFilter(e.target.value)}/>\r\n\t\t\t\t<table>\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>Lvl</th>\r\n\t\t\t\t\t\t\t<th>Name</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t{nodeSpells}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t</aside>\r\n\t\t)\r\n\t}\r\n\r\n\r\n\tconst renderSpellDescription = () => {\r\n\t\tif (!spellId || !spells.length){\r\n\t\t\treturn <aside style={{gridArea: \"spell-description\", display: \"flex\", justifyContent: \"center\", margin: \"auto\"}}><strong>Click on a spell to see details</strong></aside>\r\n\t\t}\r\n\t\tlet spell = spells.find(sp => sp.id === spellId)\r\n\r\n\t\treturn (\r\n\t\t\t<aside style={{gridArea: \"spell-description\", textAlign: \"left\", overflowY: \"scroll\"}}>\r\n\t\t\t\t<SpellDescription spell={spell} />\r\n\t\t\t</aside>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<section id=\"known-spells-popup\">\r\n\t\t\t{renderPreparedBonusSpells()}\r\n\t\t\t{renderSpellOptions()}\r\n\t\t\t{renderSpellDescription()}\r\n\t\t</section>\r\n\t)\r\n}\r\n\r\nexport default BonusSpellSlotManager\r\n","import React from 'react'\r\n\r\nconst FeatDescription = props => {\r\n\r\n\tconst { name, description, benefit, normal, special, source } = props.feat\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<h3>{name}</h3>\r\n\t\t\t<p><em>{description}</em></p>\r\n\t\t\t{benefit && <p><strong>Benefit:</strong> {benefit}</p>}\r\n\t\t\t{normal && <p><strong>Normal:</strong> {normal}</p>}\r\n\t\t\t{special && <p><strong>Special:</strong> {special}</p>}\r\n\t\t</>\r\n\t)\r\n\r\n}\r\n\r\nexport default FeatDescription\r\n","import React from 'react'\r\nimport FeatDescription from '../feat_description'\r\n\r\nconst Feat = props => {\r\n\treturn (\r\n\t\t<article style={{textAlign: \"left\"}}>\r\n\t\t\t<FeatDescription feat={props.feat} />\r\n\t\t</article>\r\n\t)\r\n}\r\n\r\nexport default Feat\r\n","\r\nexport const sizeMod = (string) => {\r\n  switch(string){\r\n    case 'Fine':\r\n      return 8\r\n    case 'Diminutive':\r\n      return 4\r\n    case 'Tiny':\r\n      return 2\r\n    case 'Small':\r\n      return 1;\r\n    case 'Large':\r\n      return -1;\r\n    case 'Huge':\r\n      return -2\r\n    case 'Gargantuan':\r\n      return -4\r\n    case 'Colossal':\r\n      return -8\r\n    default:\r\n      return 0;\r\n  }\r\n}\r\n\r\nexport const specialSizeMod = (string) => {\r\n  switch(string){\r\n    case 'Fine':\r\n      return -8\r\n    case 'Diminutive':\r\n      return -4\r\n    case 'Tiny':\r\n      return -2\r\n    case 'Small':\r\n      return -1;\r\n    case 'Large':\r\n      return 1;\r\n    case 'Huge':\r\n      return 2\r\n    case 'Gargantuan':\r\n      return 4\r\n    case 'Colossal':\r\n      return 8\r\n    default:\r\n      return 0;\r\n  }\r\n}\r\n\r\nexport const flySizeMod = (string) => {\r\n  switch(string){\r\n    case 'Fine':\r\n      return 8\r\n    case 'Diminutive':\r\n      return 6\r\n    case 'Tiny':\r\n      return 4\r\n    case 'Small':\r\n      return 2;\r\n    case 'Large':\r\n      return -2;\r\n    case 'Huge':\r\n      return -4\r\n    case 'Gargantuan':\r\n      return -6\r\n    case 'Colossal':\r\n      return -8\r\n    default:\r\n      return 0;\r\n  }\r\n}\r\n\r\nexport const stealthSizeMod = (string) => {\r\n  switch(string){\r\n    case 'Fine':\r\n      return 16\r\n    case 'Diminutive':\r\n      return 12\r\n    case 'Tiny':\r\n      return 8\r\n    case 'Small':\r\n      return 4;\r\n    case 'Large':\r\n      return -4;\r\n    case 'Huge':\r\n      return -8\r\n    case 'Gargantuan':\r\n      return -12\r\n    case 'Colossal':\r\n      return -16\r\n    default:\r\n      return 0;\r\n  }\r\n}\r\n\r\nexport const sizeSpaceReach = (string) => {\r\n  switch(string){\r\n    case 'Fine':\r\n      return [\"1/2 ft.\", \"0 ft.\"]\r\n    case 'Diminutive':\r\n      return [\"1 ft.\", \"0 ft.\"]\r\n    case 'Tiny':\r\n      return [\"2 1/2 ft.\", \"0 ft.\"]\r\n    case 'Small':\r\n      return [\"5 ft.\", \"5 ft.\"]\r\n    case 'Large':\r\n      return [\"10 ft.\", \"10 ft.\"];\r\n    case 'Huge':\r\n      return [\"15 ft.\", \"15 ft.\"]\r\n    case 'Gargantuan':\r\n      return [\"20 ft.\", \"20 ft.\"]\r\n    case 'Colossal':\r\n      return [\"30 ft.\", \"30 ft.\"]\r\n    default:\r\n      return [\"5 ft.\", \"5 ft.\"];\r\n  }\r\n}\r\n\r\nexport const sizeStepsFromMedium = (size) => {\r\n\tlet sizes = [\"Fine\", \"Diminutive\", \"Tiny\", \"Small\", \"Medium\", \"Large\", \"Huge\", \"Gargantuan\", \"Colossal\"]\r\n\tlet mediumIndex = 4\r\n\tlet incomingSizeIndex = sizes.indexOf(size)\r\n\treturn incomingSizeIndex - mediumIndex\r\n}\r\n\r\nexport const sizeDamage = (size, damage) => {\r\n\tlet sizeAdjustment = sizeStepsFromMedium(size)\r\n\tlet diceSteps = [\"1\", \"1d2\", \"1d3\", \"1d4\", \"1d6\", \"1d8\", \"2d6\", \"2d8\", \"4d6\"]\r\n\tlet currentDamageIndex = diceSteps.indexOf(damage)\r\n\tlet newIndex = currentDamageIndex + sizeAdjustment\r\n\tif (newIndex < 0){newIndex = 0}\r\n\tif (newIndex > diceSteps.length - 1){newIndex = diceSteps.length - 1}\r\n\treturn diceSteps[newIndex]\r\n}\r\n","import React from 'react'\r\nimport _ from 'lodash'\r\nimport { mod, pluser } from '../fuf'\r\nimport { specialSizeMod, sizeMod, sizeDamage } from './size'\r\nimport { modalAction } from '../action_creator/popups'\r\n\r\nexport const crCalc = (cr) => {\r\n\tif (cr < 1){return `1/${Math.ceil(1/cr)}`}\r\n\treturn cr\r\n}\r\n\r\nexport const crXPCalc = cr => {\r\n\tlet starting = cr % 2 ? 400 : 600\r\n\tif (cr >= 1){\r\n\t\tlet exp = Math.ceil((cr/2.0)-1.0)\r\n\t\tlet mult = Math.pow(2, exp)\r\n\t\treturn starting * mult\r\n\t} else {\r\n\t\tswitch(Math.ceil(1/cr)){\r\n\t\t\tcase 2:\r\n\t\t\t\treturn 200\r\n\t\t\tcase 3:\r\n\t\t\t\treturn 135\r\n\t\t\tcase 4:\r\n\t\t\t\treturn 100\r\n\t\t\tcase 6:\r\n\t\t\t\treturn 65\r\n\t\t\tcase 8:\r\n\t\t\t\treturn 50\r\n\t\t\tdefault:\r\n\t\t\t\treturn 0\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const averageHP = (totalHitDice, creatureTypeHitDie, constitutionScore, options) => {\r\n\tlet averageDiceRoll = (creatureTypeHitDie + 1.0) / 2\r\n\tlet baseHP = Math.floor(totalHitDice * averageDiceRoll)\r\n\tlet con = totalHitDice * mod(constitutionScore)\r\n\tif (options.augmentSummoning){\r\n\t\tcon += 2 * totalHitDice\r\n\t}\r\n\tlet hp = baseHP + con\r\n\r\n\tlet modString = mod(constitutionScore) !== 0 ? pluser(con) : \"\"\r\n\treturn `${hp} (${totalHitDice}d${creatureTypeHitDie}${modString})`\r\n}\r\n\r\nexport const savingThrow = (save, abilityScore, totalHitDice, options) => {\r\n\tlet abilityMod = mod(abilityScore)\r\n\tlet bonus = Math.floor(abilityMod + (save * totalHitDice))\r\n\tif (save === 0.5){bonus += 2}\r\n\tif (options.augmentSummoning){bonus += 2}\r\n\treturn pluser(bonus)\r\n}\r\n\r\nexport const bab = (totalHitDice, creatureTypeHitDie) => {\r\n\tlet babMod = 1\r\n\tif (creatureTypeHitDie === 8){babMod = 0.75}\r\n\tif (creatureTypeHitDie === 6){babMod = 0.5}\r\n\treturn Math.floor(babMod * totalHitDice)\r\n}\r\n\r\nexport const babString = (totalHitDice, creatureTypeHitDie) => {\r\n\treturn pluser(bab(totalHitDice, creatureTypeHitDie))\r\n}\r\nexport const cmbString = (creature) => {\r\n\treturn pluser(cmb(creature))\r\n}\r\n\r\nexport const cmb = creature => {\r\n\tlet baseAttackBonus = bab(creature.hit_dice, creature.creature_type.hit_die)\r\n\tlet sizeModifier = specialSizeMod(creature.size)\r\n\tlet abilityMod = mod(creature.strength)\r\n\tif (sizeModifier <= -2){abilityMod = mod(creature.dexterity)}\r\n\tlet otherMods = 0\r\n\tif (creature.augmentSummoning){otherMods += 2}\r\n\treturn baseAttackBonus + sizeModifier + abilityMod + otherMods\r\n}\r\n\r\nexport const cmd = creature => {\r\n\tlet sizeModifier = specialSizeMod(creature.size)\r\n\tlet additionalAbilityMod = mod(creature.dexterity)\r\n\tif (sizeModifier <= -2){additionalAbilityMod = mod(creature.strength)}\r\n\treturn 10 + cmb(creature) + additionalAbilityMod\r\n}\r\n\r\nexport const acMods = creature => {\r\n\tlet array = []\r\n\r\n\tlet dexMod = mod(creature.dexterity)\r\n\tarray.push({name: \"Dex\", mod: dexMod})\r\n\r\n\tlet sizeModifier = sizeMod(creature.size)\r\n\tarray.push({name: \"size\", mod: sizeModifier})\r\n\r\n\treturn array\r\n}\r\nexport const acModsString = creature => {\r\n\tlet armorClassMods = acMods(creature)\r\n\tlet array = armorClassMods.map(mod => {\r\n\t\treturn `${pluser(mod.mod)} ${mod.name}`\r\n\t})\r\n\treturn `(${array.join(\", \")})`\r\n}\r\n\r\nexport const armorClassTotal = (creature) => {\r\n\t// NEW DATA\r\n\tlet ac = {armorClass: 10, touch: 10, flatFooted: 10}\r\n\r\n\t// CALCULATED DATA\r\n\tlet acModifiers = acMods(creature)\r\n\r\n\t// BASE ARMOR CLASS\r\n\tac.armorClass += _.sum(acModifiers.map(m => m.mod))\r\n\r\n\t// TOUCH ARMOR CLASS\r\n\tlet touchModifiers = acModifiers.filter(m => {\r\n\t\treturn (m.name !== \"armor\" && m.name !== \"natural\")\r\n\t})\r\n\tac.touch += _.sum(touchModifiers.map(m => m.mod))\r\n\r\n\t// FLAT FOOTED ARMOR CLASS\r\n\tlet flatFootedModifiers = acModifiers.filter(m => {\r\n\t\treturn (m.name !== \"Dex\" && m.name !== \"dodge\")\r\n\t})\r\n\tac.flatFooted += _.sum(flatFootedModifiers.map(m => m.mod))\r\n\r\n\treturn ac\r\n}\r\n\r\nexport const renderFeats = (feats) => {\r\n\tlet featNodes = []\r\n\tfor (let i = 0; i < feats.length; i++) {\r\n\t\tfeatNodes.push(<span className=\"underline-hover\" onClick={() => modalAction(\"feat\", feats[i])}>{feats[i].name}</span>)\r\n\t\tif (i + 1 < feats.length){\r\n\t\t\tfeatNodes.push(\", \")\r\n\t\t}\r\n\t}\r\n\treturn featNodes\r\n}\r\n\r\nexport const renderInitiative = (creature) => {\r\n\tlet dexMod = mod(creature.dexterity)\r\n\r\n\treturn pluser(dexMod)\r\n}\r\n\r\nexport const renderAttacks = (creature, attackType) => {\r\n\tlet typedAttacks = creature.weapons.filter(cw => cw.weapon.weapon_type === attackType)\r\n\tif (typedAttacks.length) {\r\n\t\tlet abilityModifier = attackType === \"Melee\" ? mod(creature.strength) : mod(creature.dexterity)\r\n\t\tif (creature.augmentSummoning && attackType === \"Melee\"){abilityModifier += 2}\r\n\t\tlet totalAttackBonus = renderAttackBonus(creature, attackType)\r\n\r\n\t\tlet attackNodes = typedAttacks.map(cw => {\r\n\t\t\tlet dice = cw.weapon.num_of_dice + \"d\" + cw.weapon.damage_dice\r\n\t\t\tdice = sizeDamage(creature.size, dice)\r\n\r\n\t\t\treturn `${cw.weapon.name} ${pluser(totalAttackBonus)} (${dice}${pluser(abilityModifier)})`\r\n\t\t})\r\n\r\n\t\treturn <p><strong>Melee</strong> {attackNodes.join(\", \")}</p>\r\n\t} else {\r\n\t\treturn null\r\n\t}\r\n}\r\n\r\nexport const renderAttackBonus = (creature, attackType) => {\r\n\tlet sizeModifier = sizeMod(creature.size)\r\n\tlet abilityModifier = attackType === \"Melee\" ? mod(creature.strength) : mod(creature.dexterity)\r\n\tif (creature.augmentSummoning && attackType === \"Melee\"){abilityModifier += 2}\r\n\r\n\tcreature.creatureInfo.effects.forEach(ef => {\r\n\t\tif (ef.could_apply_dex_for_attack_rolls === true && attackType === \"Melee\"){\r\n\t\t\tlet greaterAbilityScore = creature.strength > creature.dexterity ? creature.strength : creature.dexterity\r\n\t\t\tabilityModifier = mod(greaterAbilityScore)\r\n\t\t}\r\n\t})\r\n\r\n\treturn sizeModifier + abilityModifier + bab(creature.hit_dice, creature.creature_type.hit_die)\r\n}\r\n","\r\nexport const defaultCreatureInfo = () => {\r\n\treturn {\r\n\t\teffects: []\r\n\t}\r\n}\r\n\r\n\r\nexport const calculateCreatureInfo = (creature) => {\r\n\tlet creatureInfo = defaultCreatureInfo()\r\n\r\n\tcreature.feats.forEach(feat =>{\r\n\t\tfeat.features.forEach(f => renderFeature(f, {source: \"feats\", sourceId: feat.id, sourceName: feat.name}, creatureInfo))\r\n\t})\r\n\r\n\treturn {...creature, creatureInfo}\r\n}\r\n\r\nconst renderFeature = (feature, sourceObj, creatureInfo) => {\r\n\tfeature.weapon_applications.forEach(wa => {\r\n\t\tcreatureInfo.effects.push({...wa, source: sourceObj})\r\n\t})\r\n}\r\n","import React from 'react'\r\nimport * as CreatureCalc from '../utils/calculations/creatures'\r\nimport * as SizeCalc from '../utils/calculations/size'\r\nimport * as CreatureFeaturesCalc from '../utils/calculations/creature_features'\r\n\r\nconst CreatureStatBlock = props => {\r\n\r\n\tconst [creature, setCreature] = React.useState(null)\r\n\r\n\tReact.useEffect(() => {\r\n\t\tif (props.creature){\r\n\t\t\tlet parsedCreature = CreatureFeaturesCalc.calculateCreatureInfo(props.creature)\r\n\t\t\tsetCreature(parsedCreature)\r\n\t\t}\r\n\t}, [props.creature])\r\n\r\n\tconst renderCreature = () => {\r\n\t\tif (creature){\r\n\t\t\tconsole.log(creature)\r\n\t\t\tlet hitDice = creature.hit_dice\r\n\t\t\tlet fortitude = CreatureCalc.savingThrow(creature.creature_type.fortitude, creature.constitution, hitDice, {augmentSummoning: creature.augmentSummoning})\r\n\t\t\tlet reflex = CreatureCalc.savingThrow(creature.creature_type.reflex, creature.dexterity, hitDice, {})\r\n\t\t\tlet will = CreatureCalc.savingThrow(creature.creature_type.will, creature.wisdom, hitDice, {})\r\n\t\t\tlet armorClass = CreatureCalc.armorClassTotal(creature)\r\n\t\t\tlet armorClassModsString = CreatureCalc.acModsString(creature)\r\n\t\t\treturn (\r\n\t\t\t\t<article id=\"creature-details\">\r\n\t\t\t\t\t<h3><span>{creature.name}</span>CR {CreatureCalc.crCalc(creature.challenge_rating)}</h3>\r\n\t\t\t\t\t<h4>XP {CreatureCalc.crXPCalc(creature.challenge_rating)}</h4>\r\n\t\t\t\t\t<p>{creature.alignment[0].toUpperCase()} {creature.size} {creature.creature_type.name}</p>\r\n\t\t\t\t\t<p><strong>Init:</strong> {CreatureCalc.renderInitiative(creature)}; <strong>Senses</strong> INSERT SENSES; Perception INSERT PERCEPTION</p>\r\n\r\n\t\t\t\t\t<p className=\"creature-header\"><strong>DEFENSE</strong></p>\r\n\r\n\t\t\t\t\t<p><strong>AC</strong> {armorClass.armorClass}, touch {armorClass.touch}, flat-footed {armorClass.flatFooted} {armorClassModsString}</p>\r\n\t\t\t\t\t<p><strong>hp</strong> {CreatureCalc.averageHP(hitDice, creature.creature_type.hit_die, creature.constitution, {augmentSummoning: creature.augmentSummoning})}</p>\r\n\t\t\t\t\t<p><strong>Fort</strong> {fortitude}, <strong>Ref</strong> {reflex}, <strong>Will</strong> {will}</p>\r\n\r\n\t\t\t\t\t<p className=\"creature-header\"><strong>OFFENSE</strong></p>\r\n\r\n\t\t\t\t\t<p>INSERT SPEED</p>\r\n\t\t\t\t\t{CreatureCalc.renderAttacks(creature, \"Melee\")}\r\n\t\t\t\t\t{CreatureCalc.renderAttacks(creature, \"Ranged\")}\r\n\t\t\t\t\t<p><strong>Space</strong> {SizeCalc.sizeSpaceReach(creature.size)[0]}; <strong>Reach</strong> {SizeCalc.sizeSpaceReach(creature.size)[1]}</p>\r\n\r\n\t\t\t\t\t<p className=\"creature-header\"><strong>STATISTICS</strong></p>\r\n\r\n\t\t\t\t\t<p><strong>Str</strong> {creature.augmentSummoning ? creature.strength + 4 : creature.strength}, <strong>Dex</strong> {creature.dexterity}, <strong>Con</strong> {creature.augmentSummoning && creature.constitution ? creature.constitution + 4 : creature.constitution}, <strong>Int</strong> {creature.intelligence}, <strong>Wis</strong> {creature.wisdom}, <strong>Cha</strong> {creature.charisma}</p>\r\n\t\t\t\t\t<p><strong>Base Atk</strong> {CreatureCalc.babString(hitDice, creature.creature_type.hit_die)}; <strong>CMB</strong> {CreatureCalc.cmbString(creature)}; <strong>CMD</strong> {CreatureCalc.cmd(creature)}</p>\r\n\t\t\t\t\t<p><strong>Feats</strong> {CreatureCalc.renderFeats(creature.feats)}</p>\r\n\t\t\t\t\t<p><strong>Skills</strong> INSERT SKILLS; <strong>Racial Modifiers</strong> INSERT RACIAL MODIFIERS</p>\r\n\r\n\t\t\t\t\t<p className=\"creature-header\"><strong>ECOLOGY</strong></p>\r\n\r\n\t\t\t\t\t<p><strong>Environment</strong> INSERT ENVIRONMENT</p>\r\n\t\t\t\t\t<p><strong>Organization</strong> INSERT ORGANIZATION</p>\r\n\t\t\t\t\t<p><strong>Treasure</strong> INSERT TREASURE</p>\r\n\t\t\t\t\t<br/>\r\n\t\t\t\t\t<p>{creature.description}</p>\r\n\t\t\t\t</article>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{renderCreature()}\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default CreatureStatBlock\r\n","import Store from '../../store'\r\n\r\nconst { getState, dispatch } = Store\r\n\r\nexport const tooltipAction = (message, target) => dispatch({type: 'TOOLTIP', message, target})\r\nexport const addToSkillsAction = (skill) => dispatch({type: 'ADD SKILL', skill})\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { getFetch } from '../utils/fetches'\r\nimport { descriptionParser } from '../utils/fuf'\r\nimport { addToSkillsAction } from '../utils/action_creator/additional_info'\r\n\r\nconst SkillDescription = props => {\r\n\r\n\tconst [ skill, setSkill ] = React.useState({})\r\n\r\n\tReact.useState(() => {\r\n\t\tif (props.skillId){\r\n\t\t\tlet foundSkill = props.skills.find(sk => sk.id === props.skillId)\r\n\t\t\tif (foundSkill){\r\n\t\t\t\tsetSkill(foundSkill)\r\n\t\t\t} else {\r\n\t\t\t\tgetFetch(`skills/${props.skillId}`)\r\n\t\t\t\t\t.then(data => {\r\n\t\t\t\t\t\tif (!data.error){\r\n\t\t\t\t\t\t\tsetSkill(data.skill)\r\n\t\t\t\t\t\t\taddToSkillsAction(data.skill)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst renderSkill = () => {\r\n\t\tif (!skill.description && !props.skill){return null}\r\n\t\tconst { description, action, try_again, special } = props.skill || skill\r\n\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{descriptionParser(description)}\r\n\t\t\t\t<strong>Action:</strong> {descriptionParser(action)}\r\n\t\t\t\t{!!try_again && <><strong>Try Again:</strong> {descriptionParser(try_again)}</>}\r\n\t\t\t\t{!!special && <><strong>Special:</strong> {descriptionParser(special)}</>}\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\t// console.log(skill)\r\n\tconsole.log(\"New Skill\", props.skill)\r\n\treturn (\r\n\t\t<aside>\r\n\t\t\t<h2>{props.skill?.name || skill.name}</h2>\r\n\t\t\t<p><em>{props.skill?.blurb || skill.blurb}</em></p>\r\n\t\t\t{renderSkill()}\r\n\t\t</aside>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    skills: state.skills\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(SkillDescription)\r\n","import React from 'react'\r\n\r\nconst HarrowDeck = () => {\r\n\r\n\tconst [ playedCards, setPlayedCards ] = React.useState([])\r\n\tconst [ visibleCard, setVisibleCard ] = React.useState({})\r\n\tconst harrowDeck = [\r\n\t\t{name: \"The Winged Serpent\", img_url: \"https://i.imgur.com/bOYXoxq.png\", alignment: \"LG\", symbol: [\"Wisdom\", \"Star\"], traditional: \"Knowing when to strike\", misaligned: \"Failing to sieze the moment\"},\r\n\t\t{name: \"The Avalanche\", img_url: \"https://i.imgur.com/Zpou16q.png\", alignment: \"LE\", symbol: [\"Dexterity\", \"Key\"], traditional: \"Unrelenting disaster\", misaligned: \"Disaster can be averted\"},\r\n\t\t{name: \"The Unicorn\", img_url: \"https://i.imgur.com/RQPKsmn.png\", alignment: \"CG\", symbol: [\"Charisma\", \"Crown\"], traditional: \"What you seek is yours\", misaligned: \"Friends are untrustworthy\"},\r\n\t\t{name: \"The Wanderer\", img_url: \"https://i.imgur.com/KKAkoki.png\", alignment: \"NG\", symbol: [\"Intelligence\", \"Book\"], traditional: \"Finding worth in cast-offs\", misaligned: \"Inability to see value\"},\r\n\t\t{name: \"The Waxworks\", img_url: \"https://i.imgur.com/Gvt8Txi.png\", alignment: \"CE\", symbol: [\"Constitution\", \"Shield\"], traditional: \"Helplessness and entropy\", misaligned: \"Abundance of energy\"},\r\n\t\t{name: \"The Bear\", img_url: \"https://i.imgur.com/pgqXLKC.png\", alignment: \"N\", symbol: [\"Strength\", \"Hammer\"], traditional: \"Brute force reigns\", misaligned: \"Never misaligned\"},\r\n\t\t{name: \"The Beating\", img_url: \"https://i.imgur.com/nkRWkAz.png\", alignment: \"NE\", symbol: [\"Strength\", \"Hammer\"], traditional: \"Attack from all sides\", misaligned: \"Hidden Strength\"},\r\n\t\t{name: \"The Betrayal\", img_url: \"https://i.imgur.com/wDQqoQ7.png\", alignment: \"NE\", symbol: [\"Charisma\", \"Crown\"], traditional: \"Selfishness leads to ruin\", misaligned: \"Noble self-sacrifice\"},\r\n\t\t{name: \"The Big Sky\", img_url: \"https://i.imgur.com/fiELYn8.png\", alignment: \"CG\", symbol: [\"Strength\", \"Hammer\"], traditional: \"Freedom from bondage\", misaligned: \"New shackles replace the old\"},\r\n\t\t{name: \"the Brass Dwarf\", img_url: \"https://i.imgur.com/LLRsqY7.png\", alignment: \"LN\", symbol: [\"Constitution\", \"Shield\"], traditional: \"Invulnerability to peril\", misaligned: \"Never misaligned\"},\r\n\t\t{name: \"The Carnival\", img_url: \"https://i.imgur.com/bySnncn.png\", alignment: \"CN\", symbol: [\"Wisdom\", \"Star\"], traditional: \"Illusions and false dreams\", misaligned: \"Never misaligned\"},\r\n\t\t{name: \"The Courtesan\", img_url: \"https://i.imgur.com/d1xtvtT.png\", alignment: \"CN\", symbol: [\"Charisma\", \"Crown\"], traditional: \"Political intrigue\", misaligned: \"Never misaligned\"},\r\n\t\t{name: \"The Cricket\", img_url: \"https://i.imgur.com/vUchyiC.png\", alignment: \"NG\", symbol: [\"Dexterity\", \"Key\"], traditional: \"Speed and quick passage\", misaligned: \"The journey goes poorly\"},\r\n\t\t{name: \"The Crows\", img_url: \"https://i.imgur.com/o4myQCy.png\", alignment: \"NE\", symbol: [\"Dexterity\", \"Key\"], traditional: \"Taking of loved ones or items\", misaligned: \"Thievery can be stopped\"},\r\n\t\t{name: \"The Cyclone\", img_url: \"https://i.imgur.com/uRMFDaP.png\", alignment: \"CE\", symbol: [\"Strength\", \"Hammer\"], traditional: \"Tumultuous, evil plots\", misaligned: \"Renewal after a trial\"},\r\n\t\t{name: \"The Dance\", img_url: \"https://i.imgur.com/HBIXbNe.png\", alignment: \"LG\", symbol: [\"Dexterity\", \"Key\"], traditional: \"Staying in harmony\", misaligned: \"Lockstep is perilous\"},\r\n\t\t{name: \"The Demon's Lantern\", img_url: \"https://i.imgur.com/6k12CcK.png\", alignment: \"CE\", symbol: [\"Dexterity\", \"Key\"], traditional: \"An impossible situation\", misaligned: \"A guide lights the way out\"},\r\n\t\t{name: \"The Desert\", img_url: \"https://i.imgur.com/mT7MS8O.png\", alignment: \"CG\", symbol: [\"Constitution\", \"Shield\"], traditional: \"Traversing a bleak passage\", misaligned: \"A passage with little hope\"},\r\n\t\t{name: \"The Eclipse\", img_url: \"https://i.imgur.com/zaDqEn4.png\", alignment: \"LE\", symbol: [\"Wisdom\", \"Star\"], traditional: \"Self-doubt\", misaligned: \"Unheralded abilities\"},\r\n\t\t{name: \"The Empty Throne\", img_url: \"https://i.imgur.com/WKYUil9.png\", alignment: \"LG\", symbol: [\"Charisma\", \"Crown\"], traditional: \"Loss brings good fortune\", misaligned: \"Loss brings bad tidings\"},\r\n\t\t{name: \"The Fiend\", img_url: \"https://i.imgur.com/MyqKyDN.png\", alignment: \"LE\", symbol: [\"Strength\", \"Hammer\"], traditional: \"Many losses in a calamity\", misaligned: \"Salvation from a calamity\"},\r\n\t\t{name: \"The Foreign Trader\", img_url: \"https://i.imgur.com/vwtsxfq.png\", alignment: \"N\", symbol: [\"Intelligence\", \"Book\"], traditional: \"An informitive pact\", misaligned: \"Never misaligned\"},\r\n\t\t{name: \"The Forge\", img_url: \"https://i.imgur.com/SPhzWtD.png\", alignment: \"LN\", symbol: [\"Strength\", \"Hammer\"], traditional: \"Strength through diversity\", misaligned: \"Never misaligned\"},\r\n\t\t{name: \"The Hidden Truth\", img_url: \"https://i.imgur.com/35T4bCl.png\", alignment: \"LG\", symbol: [\"Intelligence\", \"Book\"], traditional: \"Seeing past the obvious\", misaligned: \"A dangerous secret\"},\r\n\t\t{name: \"The Idiot\", img_url: \"https://i.imgur.com/ZUObUcr.png\", alignment: \"NE\", symbol: [\"Intelligence\", \"Book\"], traditional: \"Grave foolishness and greed\", misaligned: \"Clever feigning or idiocy\"},\r\n\t\t{name: \"The Inquisitor\", img_url: \"https://i.imgur.com/dbhicSo.png\", alignment: \"LN\", symbol: [\"Intelligence\", \"Book\"], traditional: \"Immutable reality\", misaligned: \"Never misaligned\"},\r\n\t\t{name: \"The Joke\", img_url: \"https://i.imgur.com/SsfIZGg.png\", alignment: \"CG\", symbol: [\"Intelligence\", \"Book\"], traditional: \"Danger overcome by artifice\", misaligned: \"The joke is on you\"},\r\n\t\t{name: \"The Juggler\", img_url: \"https://i.imgur.com/T5vCqsY.png\", alignment: \"CG\", symbol: [\"Dexterity\", \"Key\"], traditional: \"Fate is on your side\", misaligned: \"Fate is not on your side\"},\r\n\t\t{name: \"The Keep\", img_url: \"https://i.imgur.com/wrNg7cI.png\", alignment: \"NG\", symbol: [\"Strength\", \"Hammer\"], traditional: \"Unshakable to threat\", misaligned: \"Temptation is stronger\"},\r\n\t\t{name: \"The Liar\", img_url: \"https://i.imgur.com/15lSLv7.png\", alignment: \"CE\", symbol: [\"Charisma\", \"Crown\"], traditional: \"Love at its most trecherous\", misaligned: \"A new relationship begins\"},\r\n\t\t{name: \"The Locksmith\", img_url: \"https://i.imgur.com/51WdWag.png\", alignment: \"LN\", symbol: [\"Dexterity\", \"Key\"], traditional: \"Keys to a new destiny\", misaligned: \"Never misaligned\"},\r\n\t\t{name: \"The Lost\", img_url: \"https://i.imgur.com/jNMMfS3.png\", alignment: \"CE\", symbol: [\"Wisdom\", \"Star\"], traditional: \"Loss of identity\", misaligned: \"Clarity of mind\"},\r\n\t\t{name: \"The Marriage\", img_url: \"https://i.imgur.com/Xe2b5W2.png\", alignment: \"LN\", symbol: [\"Charisma\", \"Crown\"], traditional: \"Union of persons or ideas\", misaligned: \"Never misaligned\"},\r\n\t\t{name: \"The Midwife\", img_url: \"https://i.imgur.com/MCsKDcs.png\", alignment: \"NG\", symbol: [\"Wisdom\", \"Star\"], traditional: \"New life or new information\", misaligned: \"Dangerous new arrivals\"},\r\n\t\t{name: \"The Mountain Man\", img_url: \"https://i.imgur.com/8w1ldsa.png\", alignment: \"CN\", symbol: [\"Constitution\", \"Shield\"], traditional: \"An external physical power\", misaligned: \"Never misaligned\"},\r\n\t\t{name: \"The Mute Hag\", img_url: \"https://i.imgur.com/QrRreDj.png\", alignment: \"CE\", symbol: [\"Wisdom\", \"Star\"], traditional: \"Blood pacts and dark secrets\", misaligned: \"Unwavering loyalty\"},\r\n\t\t{name: \"The Owl\", img_url: \"https://i.imgur.com/UOSPBm2.png\", alignment: \"N\", symbol: [\"Wisdom\", \"Star\"], traditional: \"Wisdom of the natural order\", misaligned: \"Never misaligned\"},\r\n\t\t{name: \"The Paladin\", img_url: \"https://i.imgur.com/TyNH8KM.png\", alignment: \"LG\", symbol: [\"Strength\", \"Hammer\"], traditional: \"Standing fast under adversity\", misaligned: \"Standing fast is foolish\"},\r\n\t\t{name: \"The Peacock\", img_url: \"https://i.imgur.com/pQeLlRF.png\", alignment: \"N\", symbol: [\"Dexterity\", \"Key\"], traditional: \"Suddern personal shift\", misaligned: \"Never misaligned\"},\r\n\t\t{name: \"The Publican\", img_url: \"https://i.imgur.com/gxbKvtL.png\", alignment: \"CG\", symbol: [\"Wisdom\", \"Star\"], traditional: \"Fellowship and camaraderie\", misaligned: \"Refuge cannot be found\"},\r\n\t\t{name: \"The Queen Mother\", img_url: \"https://i.imgur.com/B4DKI0j.png\", alignment: \"LN\", symbol: [\"Wisdom\", \"Star\"], traditional: \"Knowledge through fealty\", misaligned: \"Never misaligned\"},\r\n\t\t{name: \"The Rabbit Prince\", img_url: \"https://i.imgur.com/Tez2pyu.png\", alignment: \"CN\", symbol: [\"Dexterity\", \"Key\"], traditional: \"Capriciousness of combat\", misaligned: \"Never misaligned\"},\r\n\t\t{name: \"The Rakshasa\", img_url: \"https://i.imgur.com/yyyloyW.png\", alignment: \"LE\", symbol: [\"Intelligence\", \"Book\"], traditional: \"Dominance and mind control\", misaligned: \"Enslavement is shaken off\"},\r\n\t\t{name: \"The Sickness\", img_url: \"https://i.imgur.com/35CCsz8.png\", alignment: \"NE\", symbol: [\"Constitution\", \"Shield\"], traditional: \"Disease of body or soul\", misaligned: \"Great health in an epidemic\"},\r\n\t\t{name: \"The Snakebite\", img_url: \"https://i.imgur.com/BLBd18X.png\", alignment: \"CE\", symbol: [\"Intelligence\", \"Book\"], traditional: \"Poisonous powers or ideas\", misaligned: \"Mental leap or discovery\"},\r\n\t\t{name: \"The Survivor\", img_url: \"https://i.imgur.com/HkZbwZe.png\", alignment: \"NG\", symbol: [\"Constitution\", \"Shield\"], traditional: \"Rebirth through ordeal\", misaligned: \"Tragic news or profound loss\"},\r\n\t\t{name: \"The Tangled Briar\", img_url: \"https://i.imgur.com/wpeUgbc.png\", alignment: \"LE\", symbol: [\"Constitution\", \"Shield\"], traditional: \"Ancient triumphs return\", misaligned: \"Old evils endanger present\"},\r\n\t\t{name: \"The Teamster\", img_url: \"https://i.imgur.com/jLfpDYp.png\", alignment: \"N\", symbol: [\"Constitution\", \"Shield\"], traditional: \"Driving eternal pressure\", misaligned: \"Never misaligned\"},\r\n\t\t{name: \"The Theater\", img_url: \"https://i.imgur.com/AuO9j8u.png\", alignment: \"NG\", symbol: [\"Charisma\", \"Crown\"], traditional: \"Prophecy is true\", misaligned: \"Prophecy is unreliable\"},\r\n\t\t{name: \"The Trumpet\", img_url: \"https://i.imgur.com/2cBF2j7.png\", alignment: \"LG\", symbol: [\"Constitution\", \"Shield\"], traditional: \"Declaration of power\", misaligned: \"Power for power's sake\"},\r\n\t\t{name: \"The Twin\", img_url: \"https://i.imgur.com/1mputKc.png\", alignment: \"N\", symbol: [\"Charisma\", \"Crown\"], traditional: \"Duality of purpose\", misaligned: \"Never misaligned\"},\r\n\t\t{name: \"The Tyrant\", img_url: \"https://i.imgur.com/UtQYP41.png\", alignment: \"LE\", symbol: [\"Charisma\", \"Crown\"], traditional: \"Paternal influence brings pain\", misaligned: \"A dark influence is overruled\"},\r\n\t\t{name: \"The Uprising\", img_url: \"https://i.imgur.com/0QYTakI.png\", alignment: \"CN\", symbol: [\"Strength\", \"Hammer\"], traditional: \"Overwhelming groundswell\", misaligned: \"Never misaligned\"},\r\n\t\t{name: \"The Vision\", img_url: \"https://i.imgur.com/Zts2LoM.png\", alignment: \"CN\", symbol: [\"Intelligence\", \"Book\"], traditional: \"Arcane knowledge\", misaligned: \"Never misaligned\"}\r\n\t]\r\n\r\n\tconst style = {\r\n\t\tdisplay: \"grid\",\r\n\t\tgridTemplateColumns: \"30% 70%\",\r\n\t\tgridTemplateAreas: \" 'buttons card' 'cards cards'\"\r\n\t}\r\n\r\n\tconst displayCard = () => {\r\n\t\tlet { name, img_url, alignment, symbol, traditional, misaligned } = visibleCard\r\n\t\treturn (\r\n\t\t\t<aside style={{gridArea: \"card\", display: \"flex\"}}>\r\n\t\t\t\t<img src={img_url} alt={name} height=\"60%\"/>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li><h4>{name}</h4></li>\r\n\t\t\t\t\t<li>Alignment: <strong>{alignment}</strong></li>\r\n\t\t\t\t\t<li>Ability Score: <strong>{symbol[0]}</strong></li>\r\n\t\t\t\t\t<li>Suit: <strong>{symbol[1]}</strong></li>\r\n\t\t\t\t\t<br/>\r\n\t\t\t\t\t<li>Traditional: {traditional}</li>\r\n\t\t\t\t\t<li>Misaligned: {misaligned}</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</aside>\r\n\t\t)\r\n\t}\r\n\r\n\tconst drawCard = () => {\r\n\t\tlet card = selectRandomCard()\r\n\t\tsetVisibleCard(card)\r\n\t}\r\n\r\n\tconst selectRandomCard = () => {\r\n\t\tlet n = Math.floor(Math.random() * harrowDeck.length)\r\n\t\treturn harrowDeck[n]\r\n\t}\r\n\r\n\t// <button>Play a Card</button>\r\n\treturn (\r\n\t\t<section style={style}>\r\n\t\t\t<aside style={{gridArea: \"buttons\", display: \"flex\", flexDirection: \"column\"}}>\r\n\t\t\t\t<button onClick={drawCard}>Draw Random Card</button>\r\n\t\t\t</aside>\r\n\t\t\t{visibleCard.name && displayCard()}\r\n\t\t\t<aside style={{gridArea: \"cards\"}}>\r\n\t\t\t</aside>\r\n\t\t</section>\r\n\t)\r\n\r\n}\r\n\r\nexport default HarrowDeck\r\n","import React from 'react'\r\nimport _ from 'lodash'\r\nimport { descriptionParser } from '../../utils/fuf'\r\n\r\nconst ItemDescription = props => {\r\n\r\n\tconst renderItem = () => {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<h3 style={{display: 'inline-block'}}>{props.item.name}</h3>\r\n\r\n\t\t\t\t<div>{_.startCase(props.item.category)} <strong>Price</strong> {props.item.price_in_gp} gp; <strong>Weight</strong> {props.item.weight} lb;</div>\r\n\r\n\t\t\t\t<br/>\r\n\t\t\t\t<div style={{marginBottom: '1%', paddingBottom: '.8%', borderBottom: 'double'}}></div>\r\n\r\n\t\t\t\t{descriptionParser(props.item.description)}\r\n\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<section>\r\n\t\t\t{renderItem()}\r\n\t\t</section>\r\n\t)\r\n}\r\n\r\nexport default ItemDescription\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { patchFetch } from '../../utils/fetches'\r\nimport { replaceCharacterAction } from '../../utils/action_creator/character'\r\n\r\nconst CurrencyManager = props => {\r\n\r\n  let { character } = useSelector(state => state)\r\n  const [ modifiedCurrency, updateCurrency ] = React.useState({\r\n    pp: 1,\r\n    gp: 1,\r\n    sp: 1,\r\n    cp: 1\r\n  })\r\n  const [ disableButtons, toggleDisable ] = React.useState(false)\r\n\r\n  const renderChange = (e) => {\r\n    updateCurrency({...modifiedCurrency, [e.target.name]: parseInt(e.target.value) ?? \"\"})\r\n  }\r\n\r\n  const renderSubmit = (coin, btn) => {\r\n    if (disableButtons){\r\n      return\r\n    }\r\n    let value = btn === \"plus\" ? character[coin] + modifiedCurrency[coin] : character[coin] - modifiedCurrency[coin]\r\n    let body = {[coin]: value}\r\n    toggleDisable(true)\r\n    patchFetch(`characters/${character.id}`, body)\r\n      .then(data => {\r\n        replaceCharacterAction(coin, value)\r\n        updateCurrency({...modifiedCurrency, [coin]: 1})\r\n        character[coin] = value\r\n        toggleDisable(false)\r\n      })\r\n  }\r\n\r\n  const renderCurrency = () => {\r\n    let { pp, gp, sp, cp } = character\r\n    return (\r\n      <ul>\r\n        <li>{pp || 0} pp <input type=\"number\" name=\"pp\" value={modifiedCurrency.pp} onChange={renderChange} step=\"1\"/> <button onClick={() => renderSubmit(\"pp\", \"plus\")}>+</button> <button onClick={() => renderSubmit(\"pp\", \"minus\")}>-</button></li>\r\n        <li>{gp || 0} gp <input type=\"number\" name=\"gp\" value={modifiedCurrency.gp} onChange={renderChange} step=\"1\"/> <button onClick={() => renderSubmit(\"gp\", \"plus\")}>+</button> <button onClick={() => renderSubmit(\"gp\", \"minus\")}>-</button></li>\r\n        <li>{sp || 0} sp <input type=\"number\" name=\"sp\" value={modifiedCurrency.sp} onChange={renderChange} step=\"1\"/> <button onClick={() => renderSubmit(\"sp\", \"plus\")}>+</button> <button onClick={() => renderSubmit(\"sp\", \"minus\")}>-</button></li>\r\n        <li>{cp || 0} cp <input type=\"number\" name=\"cp\" value={modifiedCurrency.cp} onChange={renderChange} step=\"1\"/> <button onClick={() => renderSubmit(\"cp\", \"plus\")}>+</button> <button onClick={() => renderSubmit(\"cp\", \"minus\")}>-</button></li>\r\n      </ul>\r\n    )\r\n  }\r\n\r\n  let totalGP = (character.pp*10) + (character.gp) + (character.sp*0.1) + (character.cp*0.01)\r\n\r\n\r\n  return (\r\n    <section>\r\n      <p><strong>Total Money</strong>: {totalGP.toFixed(2)} gp</p>\r\n      {renderCurrency()}\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default CurrencyManager\r\n","import Store from '../../store'\r\n\r\nconst { getState, dispatch } = Store\r\n\r\nexport const updateColorThemeAction = (obj) => dispatch({type: \"UPDATE COLOR THEME\", obj})\r\n","const themes = [\r\n\t{name: \"Standard\", colors: {background1: \"cfb997\", background2: \"fff\", textColor: \"000\", bubbleColor: \"ebebeb\", borderColor: \"000\", shadeColor: \"800000\"}},\r\n\t{name: \"Noir\", colors: {background1: \"000\", background2: \"666\", textColor: \"ddd3d3\", bubbleColor: \"3e3b3b\", borderColor: \"c3bcbc\", shadeColor: \"a39c9c\"}},\r\n\t{name: \"Spring Pastels\", colors: {background1: \"dbd08f\", background2: \"fff\", textColor: \"965dae\", bubbleColor: \"ebebeb\", borderColor: \"d04ebd\", shadeColor: \"65bbd5\"}},\r\n\t{name: \"Sorbet Summer\", colors: {background1: \"EF4136\", background2: \"FFDF63\", textColor: \"000\", bubbleColor: \"F7D15F\", borderColor: \"87ceff\", shadeColor: \"B43692\"}},\r\n\t{name: \"Autumn Sunset\", colors: {background1: \"8f2323\", background2: \"cc9d3a\", textColor: \"000\", bubbleColor: \"bc7535\", borderColor: \"a7532d\", shadeColor: \"59200f\"}},\r\n\t{name: \"Crisp Winter\", colors: {background1: \"e3e3ff\", background2: \"CCCCFF\", textColor: \"230745\", bubbleColor: \"ebebeb\", borderColor: \"b3e3f4\", shadeColor: \"020b36\"}},\r\n\t{name: \"Ocean Floor\", colors: {background1: \"29ab87\", background2: \"93e9b3\", textColor: \"212121\", bubbleColor: \"c2b280\", borderColor: \"5a4d41\", shadeColor: \"4a3d32\"}},\r\n\t{name: \"Cyberpunk\", colors: {background1: \"7a04eb\", background2: \"fe75fe\", textColor: \"000\", bubbleColor: \"00b8ff\", borderColor: \"00ff9f\", shadeColor: \"120458\"}},\r\n\t{name: \"Gems and Treasure\", colors: {background1: \"ffba1f\", background2: \"74674e\", textColor: \"0f52ba\", bubbleColor: \"f5f7f7\", borderColor: \"046307\", shadeColor: \"dc143c\"}},\r\n\t{name: \"Overcast\", colors: {background1: \"636d83\", background2: \"6d7178\", textColor: \"d1d5d9\", bubbleColor: \"7d8287\", borderColor: \"415c5d\", shadeColor: \"7d9fb0\"}},\r\n\t{name: \"Azorius Senate\", colors: {background1: \"137cd8\", background2: \"fbfef7\", textColor: \"1c2d58\", bubbleColor: \"faecc7\", borderColor: \"1c2d58\", shadeColor: \"9fb7d3\"}},\r\n\t{name: \"Boros Legion\", colors: {background1: \"ecdac6\", background2: \"e2320b\", textColor: \"ba3209\", bubbleColor: \"f3f5ea\", borderColor: \"da973c\", shadeColor: \"7d2b06\"}},\r\n\t{name: \"House Dimir\", colors: {background1: \"1b1b21\", background2: \"163758\", textColor: \"0b5fa7\", bubbleColor: \"adadaf\", borderColor: \"045e93\", shadeColor: \"19241e\"}},\r\n\t{name: \"Golgari Swarm\", colors: {background1: \"00733e\", background2: \"282824\", textColor: \"dbe1e6\", bubbleColor: \"1d4a32\", borderColor: \"c9d2d1\", shadeColor: \"000\"}},\r\n\t{name: \"Gruul Clans\", colors: {background1: \"326d3f\", background2: \"f54329\", textColor: \"c22d12\", bubbleColor: \"183d20\", borderColor: \"8e8d7b\", shadeColor: \"392115\"}},\r\n\t{name: \"Izzet League\", colors: {background1: \"095ea1\", background2: \"f02908\", textColor: \"770902\", bubbleColor: \"67a7d7\", borderColor: \"e97335\", shadeColor: \"d74a43\"}},\r\n\t{name: \"Orzhov Syndicate\", colors: {background1: \"2a2623\", background2: \"fbfbf3\", textColor: \"f9f1c2\", bubbleColor: \"3d3b3c\", borderColor: \"e8ce81\", shadeColor: \"7a6756\"}},\r\n\t{name: \"Cult of Rakdos\", colors: {background1: \"a41316\", background2: \"363733\", textColor: \"ff5d2a\", bubbleColor: \"291d18\", borderColor: \"dd3935\", shadeColor: \"9c1f12\"}},\r\n\t{name: \"Selesnya Conclave\", colors: {background1: \"00733e\", background2: \"f9faf4\", textColor: \"000\", bubbleColor: \"2bd8c0\", borderColor: \"f9faf4\", shadeColor: \"f7e8a7\"}},\r\n\t{name: \"Simic Combine\", colors: {background1: \"24522b\", background2: \"4282c2\", textColor: \"222a4f\", bubbleColor: \"5c8462\", borderColor: \"b2cae6\", shadeColor: \"28303d\"}},\r\n]\r\n\r\nexport default themes\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { updateColorThemeAction } from '../../utils/action_creator/settings'\r\nimport themes from '../../themes'\r\n\r\nconst Settings = () => {\r\n\r\n\tlet settings = useSelector(state => state.settings)\r\n\r\n\tconst displayLayoutOptions = () => {\r\n\t\treturn (\r\n\t\t\t<form>\r\n\t\t\t\t<h4>Layout</h4>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\t<input type=\"radio\" name=\"layout\" value=\"detailed\" checked={settings.layout === \"detailed\"}/>\r\n\t\t\t\t\t\tDetailed\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\t<input type=\"radio\" name=\"layout\" value=\"brief\" checked={settings.layout === \"brief\"}/>\r\n\t\t\t\t\t\tBrief\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\t<input type=\"radio\" name=\"layout\" value=\"stat block\" checked={settings.layout === \"stat block\"}/>\r\n\t\t\t\t\t\tStat Block\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t)\r\n\t}\r\n\r\n\tconst displayColorThemeOptions = () => {\r\n\r\n\t\tconst clickFunction = (th) => {\r\n\t\t\tlocalStorage.setItem(\"theme\", th.name)\r\n\t\t\tupdateColorThemeAction(th.colors)\r\n\t\t}\r\n\r\n\t\tlet themeElements = themes.map(th => <li style={{color: `#${th.colors.textColor}`, backgroundImage: `linear-gradient(#${th.colors.background1} 30%, #${th.colors.background2} 50%, #${th.colors.bubbleColor})`, padding: \"0.8%\", border: `1px solid #${th.colors.borderColor}`, margin: \"0.5%\", borderRadius: \"0.5em\", boxShadow: `2px 1px 1px #${th.colors.shadeColor}`}}><label onClick={() => clickFunction(th)}>{th.name}</label></li>)\r\n\r\n\t\treturn (\r\n\t\t\t<form>\r\n\t\t\t\t<h4>Color Theme</h4>\r\n\t\t\t\t<ul style={{display: \"flex\", listStyleType: \"none\", margin: \"0\", padding: \"0\", flexWrap: \"wrap\"}}>\r\n\t\t\t\t\t{themeElements}\r\n\t\t\t\t</ul>\r\n\t\t\t</form>\r\n\t\t)\r\n\t}\r\n\r\n\tconsole.log(settings)\r\n\treturn (\r\n\t\t<section>\r\n\t\t\t<h3>Character Settings</h3>\r\n\t\t\t{displayColorThemeOptions()}\r\n\t\t</section>\r\n\t)\r\n}\r\n\r\nexport default Settings\r\n","import React from 'react'\r\nimport CreatureStatBlock from '../creature_stat_block'\r\n\r\nconst FamiliarDescription = props => {\r\n\r\n\tconst { creature } = props.familiar\r\n\r\n\treturn (\r\n\t\t<section>\r\n\t\t\t<CreatureStatBlock creature={creature} />\r\n\t\t</section>\r\n\t)\r\n}\r\n\r\nexport default FamiliarDescription\r\n","import React from 'react'\r\n\r\nconst PoisonDescription = props => {\r\n\r\n\tconst renderPoison = () => {\r\n\t\tconst { affliction_type, cure, effect, fortitude_dc, frequency, name, onset, price_in_gp } = props.item\r\n\t\t//\r\n\t\t//\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<h3 style={{display: 'inline-block'}}>{name}</h3>\r\n\t\t\t\t<div><strong>Price</strong> {price_in_gp} gp; <strong>Type</strong> {affliction_type}; <strong>Fortitude DC</strong> {fortitude_dc}</div>\r\n\t\t\t\t<div style={{marginBottom: '1%', paddingBottom: '.8%', borderBottom: 'double'}}></div>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<div><strong>Onset</strong> {onset}; <strong>Frequency</strong> {frequency}; <strong>Cure</strong> {cure}</div>\r\n\t\t\t\t<div><strong>Effect</strong> {effect}</div>\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\r\n\treturn (\r\n\t\t<section>\r\n\t\t\t{renderPoison()}\r\n\t\t</section>\r\n\t)\r\n}\r\n\r\nexport default PoisonDescription\r\n","import React from 'react'\r\nimport { descriptionParser } from '../../utils/fuf'\r\n\r\nconst GenericDescription = props => {\r\n\r\n\r\n\tconst renderDescription = () => {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<h3 style={{display: 'inline-block'}}>{props.name}</h3>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<div style={{marginBottom: '1%', paddingBottom: '.8%', borderBottom: 'double'}}></div>\r\n\r\n\t\t\t\t{descriptionParser(props.description)}\r\n\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<section>\r\n\t\t\t{renderDescription()}\r\n\t\t</section>\r\n\t)\r\n}\r\n\r\nexport default GenericDescription\r\n","import React from 'react'\r\nimport _ from 'lodash'\r\nimport localhost from '../../localhost'\r\nimport { modalAction } from '../../utils/action_creator/popups'\r\nimport { replaceCharacterAction } from '../../utils/action_creator/character'\r\nimport { postFetch } from '../../utils/fetches'\r\nimport { useSelector } from 'react-redux'\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faDiceD20 } from '@fortawesome/free-solid-svg-icons'\r\n\r\nconst AddCharacterEquipment = props => {\r\n\r\n\tlet character = useSelector(state => state.character)\r\n\r\n\tconst [searchString, updateSearchString] = React.useState(\"\")\r\n\tconst [loading, setLoading] = React.useState(false)\r\n\tconst [items, setItems] = React.useState([])\r\n\tconst [selectedItem, updateSelectedItem] = React.useState(null)\r\n\tconst [customData, updateCustomData] = React.useState({\r\n\t\tname: \"\",\r\n\t\tdescription: \"\",\r\n\t\tmasterwork: false\r\n\t})\r\n\r\n\tconst searchBar = () => {\r\n\t\tconsole.log(\"searchString hook\", searchString)\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<input type=\"text\" value={searchString} onChange={(e) => updateSearchString(e.target.value)} onKeyUp={debouncer} style={{marginRight: \"1%\"}}/>\r\n\t\t\t\t{loading && displayDice()}\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\tconst displayDice = () => {\r\n\t\t// let array = [faDiceOne, faDiceTwo, faDiceThree, faDiceFour, faDiceFive, faDiceSix]\r\n\t\t// let index = 5\r\n\t\t// setInterval(() => {\r\n\t\t// \tconsole.log(\"I am inside the loop, here is the index\", index)\r\n\t\t// \tindex = index === 5 ? 0 : index + 1\r\n\t\t// }, 200)\r\n\t\treturn <FontAwesomeIcon id=\"loading-dice-search\" icon={faDiceD20} size=\"2x\"/>\r\n\t}\r\n\r\n\r\n\tconst debouncer = () => {\r\n\t\tconst handle = _.debounce(fetchItems, 800)\r\n\t\thandle()\r\n\t\tif (searchString.length){\r\n\t\t\tsetLoading(true)\r\n\t\t\t// this.setState({loading: true, selectedItem: null})\r\n\t\t} else {\r\n\t\t\tsetLoading(false)\r\n\t\t\t// this.setState({loading: false})\r\n\t\t}\r\n\t}\r\n\r\n\tconst fetchItems = () => {\r\n\t\tif (searchString.length){\r\n\t\t\tfetch(`${localhost}/api/v1/item_search?q=${searchString}`)\r\n\t\t\t\t.then(r => r.json())\r\n\t\t\t\t.then(data => {\r\n\t\t\t\t\tsetItems(data)\r\n\t\t\t\t\tsetLoading(false)\r\n\t\t\t\t\t// this.setState({items: data, loading: false, didSearch: true})\r\n\t\t\t\t})\r\n\t\t} else {\r\n\t\t\tsetItems([])\r\n\t\t}\r\n\t}\r\n\r\n\tconst renderItems = () => {\r\n\t\treturn items.map(i => {\r\n\t\t\tlet modalKeyWord = \"item\"\r\n\t\t\tlet obj = i\r\n\t\t\tlet name = i.name\r\n\t\t\tif (i.weapon_type){\r\n\t\t\t\tmodalKeyWord = \"weapon\"\r\n\t\t\t\tobj = {weapon: i}\r\n\t\t\t}\r\n\t\t\telse if (i.max_dex_bonus){\r\n\t\t\t\tmodalKeyWord = \"armor\"\r\n\t\t\t\tobj = {armor: i}\r\n\t\t\t}\r\n\t\t\telse if (i.affliction_type){modalKeyWord = \"poison\"}\r\n\t\t\telse if (i.slot){modalKeyWord = \"magicItem\"}\r\n\t\t\treturn (\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<span>{i.name} </span>\r\n\t\t\t\t\t<span onClick={() => modalAction(modalKeyWord, obj, {name})}><button>Info</button></span>\r\n\t\t\t\t\t<span onClick={() => updateSelectedItem({item: i, type: modalKeyWord})}><button>+</button></span>\r\n\t\t\t\t</li>\r\n\t\t\t)\r\n\t\t})\r\n\t}\r\n\r\n\tconst createCharacterItem = () => {\r\n\t\tlet formData = (\r\n\t\t\t<>\r\n\t\t\t\t<label htmlfor=\"name\">\r\n\t\t\t\t\tIs there a specific name for this item? <input type=\"text\" id=\"name\" name=\"name\" onChange={formHandler} value={customData.name}/>\r\n\t\t\t\t</label><br/>\r\n\t\t\t\t<label htmlfor=\"description\">\r\n\t\t\t\t\tIs there a detailed description for this item? <input type=\"text\" id=\"description\" name=\"description\" onChange={formHandler} value={customData.description}/>\r\n\t\t\t\t</label><br/>\r\n\t\t\t\t<label htmlfor=\"masterwork\">\r\n\t\t\t\t\tIs this item a masterwork or handcrafted item? <input type=\"checkbox\" id=\"masterwork\" name=\"masterwork\" onChange={formHandler} value={customData.masterwork}/>\r\n\t\t\t\t</label><br/>\r\n\t\t\t</>\r\n\t\t)\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<h3>{selectedItem.item.name}</h3>\r\n\t\t\t\t<div style={{marginBottom: '1%', paddingBottom: '.8%', borderBottom: 'double'}}></div>\r\n\t\t\t\t<form onSubmit={renderSubmit}>\r\n\t\t\t\t\t{(selectedItem.type === \"weapon\" || selectedItem.type === \"armor\") && formData}\r\n\t\t\t\t\t<button>Add {customData.name || selectedItem.item.name}</button>\r\n\t\t\t\t</form>\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\tconst formHandler = e => {\r\n\t\tlet duplicateObj = {...customData}\r\n\t\tlet key = e.target.name\r\n\t\tlet value = e.target.value\r\n\t\tif (key === \"name\" || key === \"description\"){\r\n\t\t\tduplicateObj[key] = value\r\n\t\t} else if (key === \"masterwork\"){\r\n\t\t\tduplicateObj.masterwork = !duplicateObj.masterwork\r\n\t\t}\r\n\t\tupdateCustomData(duplicateObj)\r\n\t}\r\n\r\n\tconst renderSubmit = (e) => {\r\n\t\te.preventDefault()\r\n\r\n\t\tlet body = {\r\n\t\t\t...customData,\r\n\t\t\tknown: true,\r\n\t\t\tdiscovered: true,\r\n\t\t\titem_id: selectedItem.item.id,\r\n\t\t\tcharacter_id: character.id\r\n\t\t}\r\n\t\tlet url = \"character_\"\r\n\t\turl += selectedItem.type === \"magicItem\" ? \"magic_item\" : selectedItem.type\r\n\t\turl += \"s\"\r\n\r\n\t\tpostFetch(url, body)\r\n\t\t\t.then(data => {\r\n\t\t\t\tif (selectedItem.type === \"item\"){\r\n\t\t\t\t\treplaceCharacterAction(\"items\", [...character.items, data])\r\n\t\t\t\t} else {\r\n\t\t\t\t\treplaceCharacterAction(url, [...character[url], data])\r\n\t\t\t\t}\r\n\t\t\t\tmodalAction(selectedItem.type, data)\r\n\t\t\t\tupdateSelectedItem(null)\r\n\t\t\t\tupdateSearchString(\"\")\r\n\t\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<section>\r\n\t\t\t{searchBar()}\r\n\t\t\t{!selectedItem && renderItems()}\r\n\t\t\t{selectedItem && createCharacterItem()}\r\n\t\t</section>\r\n\t)\r\n}\r\n\r\nexport default AddCharacterEquipment\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { crCalc } from '../../utils/calculations/creatures'\r\nimport { modalAction } from '../../utils/action_creator/popups'\r\nimport { replaceCharacterInfoAction } from '../../utils/action_creator/character'\r\n\r\nconst SummonedCreatureOptions = props => {\r\n\r\n\tconst { character, character_info } = useSelector(state => state)\r\n\r\n\tconst renderDescription = () => {\r\n\t\treturn <p>All summoned creatures are conjured with a template that reflect your alignment. Please summon a creature with a Celestial (Good), Fiendish (Evil), Entropic (Chaotic), or Resolute (Lawful) template.</p>\r\n\t}\r\n\r\n\tconst displayCreatures = () => {\r\n\t\tlet sortedCreaturesByStep = props.featureAnimal.summoned_creature_list.sort((a, b) => a.step - b.step)\r\n\t\tlet tableElementsCreatures = sortedCreaturesByStep.map(c => {\r\n\t\t\tlet creature = c.creature\r\n\t\t\treturn (\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td className=\"underline-hover\" onClick={() => modalAction(\"statBlock\", creature, {name: creature.name})}>{creature.name}</td>\r\n\t\t\t\t\t<td>{crCalc(creature.challenge_rating)}</td>\r\n\t\t\t\t\t<td>{c.step}</td>\r\n\t\t\t\t\t<td><button onClick={() => renderSummon(creature, \"celestial\")}>Summon</button></td>\r\n\t\t\t\t\t<td><button onClick={() => renderSummon(creature, \"fiendish\")}>Summon</button></td>\r\n\t\t\t\t\t<td><button onClick={() => renderSummon(creature, \"entropic\")}>Summon</button></td>\r\n\t\t\t\t\t<td><button onClick={() => renderSummon(creature, \"resolute\")}>Summon</button></td>\r\n\t\t\t\t</tr>\r\n\t\t\t)\r\n\t\t})\r\n\r\n\t\treturn (\r\n\t\t\t<table>\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>Creature</th>\r\n\t\t\t\t\t\t<th>CR</th>\r\n\t\t\t\t\t\t<th><em>summon monster</em></th>\r\n\t\t\t\t\t\t<th className=\"underline-hover\" onClick={() => modalDetails(\"celestial\")}>Celestial</th>\r\n\t\t\t\t\t\t<th className=\"underline-hover\" onClick={() => modalDetails(\"fiendish\")}>Fiendish</th>\r\n\t\t\t\t\t\t<th className=\"underline-hover\" onClick={() => modalDetails(\"entropic\")}>Entropic</th>\r\n\t\t\t\t\t\t<th className=\"underline-hover\" onClick={() => modalDetails(\"resolute\")}>Resolute</th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t{tableElementsCreatures}\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t)\r\n\t}\r\n\r\n\tconst renderSummon = (creature, template) => {\r\n\t\tlet augmentSummoning = false\r\n\t\tif (character.name === \"Ildre\"){\r\n\t\t\taugmentSummoning = true\r\n\t\t}\r\n\t\tlet duplicateArr = [...character_info.summonedAllies]\r\n\t\tduplicateArr.push({creature, augmentSummoning, template})\r\n\r\n\t\treplaceCharacterInfoAction(\"summonedAllies\", duplicateArr)\r\n\t}\r\n\r\n\tconst modalDetails = (template) => {\r\n\t\tlet obj = {}\r\n\t\tobj.description = templateDescriptions[template]\r\n\t\tswitch (template){\r\n\t\t\tcase \"celestial\":\r\n\t\t\t\tobj.name = \"Celestial Template\"\r\n\t\t\t\tbreak\r\n\t\t\tcase \"fiendish\":\r\n\t\t\t\tobj.name = \"Fiendish Template\"\r\n\t\t\t\tbreak\r\n\t\t\tcase \"entropic\":\r\n\t\t\t\tobj.name = \"Entropic Template\"\r\n\t\t\t\tbreak\r\n\t\t\tcase \"resolute\":\r\n\t\t\t\tobj.name = \"Resolute Template\"\r\n\t\t\t\tbreak\r\n\t\t\tdefault:\r\n\t\t\t\tobj.name = \"\"\r\n\t\t}\r\n\t\tmodalAction(\"templateDescription\", obj)\r\n\t}\r\n\r\n\tlet templateDescriptions = {\r\n\t\tcelestial: \"Celestial creatures dwell in the higher planes, but can be summoned using spells such as summon monster and planar ally.\\n\\nA celestial creature’s CR increases by +1 only if the base creature has 5 or more HD.\\n\\nRebuild Rules\\n\\nSenses: The creature gains darkvision 60 ft.\\n\\nDefensive Abilities: The creature gains damage reduction and energy resistance as noted on the below table.\\n\\nSR: The creature gains spell resistance equal to its new CR +5.\\n\\nSpecial Attacks: The creature may smite evil 1/day as a swift action (it adds its Cha bonus to attack rolls, and a damage bonus equal to its HD against evil foes; smite persists until the target is dead or the creature rests).\\n\\n<table><thead><tr><th>Hit Dice</th><th>Resist Cold, Acid, and Electricity</th><th>DR</th></tr></thead></tbody><tr><td>1-4</td><td>5</td><td>-</td></tr><tr><td>5-10</td><td>10</td><td>5/evil</td></tr><tr><td>11+</td><td>15</td><td>10/evil</td></tr></tbody></table>\",\r\n\t\tfiendish: \"Creatures with the fiendish template live in the Lower Planes, such as the Abyss and Hell, but can be summoned using spells such as summon monster and planar ally. A fiendish creature’s CR increases by +1 only if the base creature has 5 or more HD.\\n\\nRebuild Rules\\n\\nSenses: The creature gains darkvision 60 ft.\\n\\nDefensive Abilities: The creature gains damage reduction and energy resistance as noted on the below table.\\n\\nSR: The creature gains spell resistance equal to its new CR +5.\\n\\nSpecial Attacks: The creature may smite good 1/day as a swift action (it adds its Cha bonus to attack rolls, and a damage bonus equal to its HD against good foes; smite persists until the target is dead or the creature rests).\\n\\n<table><thead><tr><th>Hit Dice</th><th>Resist Cold and Fire</th><th>DR</th></tr></thead></tbody><tr><td>1-4</td><td>5</td><td>-</td></tr><tr><td>5-10</td><td>10</td><td>5/good</td></tr><tr><td>11+</td><td>15</td><td>10/good</td></tr></tbody></table>\",\r\n\t\tentropic: \"Creatures with the entropic template live in planes where chaos is paramount. They can be summoned using spells such as summon monster and planar ally. An entropic creature’s CR increases by +1 only if the base creature has 5 or more HD.\\n\\nRebuild Rules\\n\\nSenses: The creature gains darkvision 60 ft.\\n\\nDefensive Abilities: The creature gains damage reduction and energy resistance as noted on the below table.\\n\\nSR: The creature gains spell resistance equal to its new CR +5.\\n\\nSpecial Attacks: The creature may smite law 1/day as a swift action (it adds its Cha bonus to attack rolls, and a damage bonus equal to its HD against law foes; smite persists until the target is dead or the creature rests).\\n\\n<table><thead><tr><th>Hit Dice</th><th>Resist Acid and Fire</th><th>DR</th></tr></thead></tbody><tr><td>1-4</td><td>5</td><td>-</td></tr><tr><td>5-10</td><td>10</td><td>5/lawful</td></tr><tr><td>11+</td><td>15</td><td>10/lawful</td></tr></tbody></table>\",\r\n\t\tresolute: \"Creatures with the resolute template live in planes where law is paramount. They can be summoned using spells such as summon monster and planar ally. A resolute Creature’s CR increases by +1 only if the base Creature has 5 or more HD.\\n\\nRebuild Rules\\n\\nSenses: The creature gains darkvision 60 ft.\\n\\nDefensive Abilities: The creature gains damage reduction and energy resistance as noted on the below table.\\n\\nSR: The creature gains spell resistance equal to its new CR +5.\\n\\nSpecial Attacks: The creature may smite chaos 1/day as a swift action (it adds its Cha bonus to attack rolls, and a damage bonus equal to its HD against chaotic foes; smite persists until the target is dead or the creature rests).\\n\\n<table><thead><tr><th>Hit Dice</th><th>Resist Acid and Fire</th><th>DR</th></tr></thead></tbody><tr><td>1-4</td><td>5</td><td>-</td></tr><tr><td>5-10</td><td>10</td><td>5/chaotic</td></tr><tr><td>11+</td><td>15</td><td>10/chaotic</td></tr></tbody></table>\",\r\n\t}\r\n\r\n\treturn (\r\n\t\t<section>\r\n\t\t\t{renderDescription()}\r\n\t\t\t{displayCreatures()}\r\n\t\t</section>\r\n\t)\r\n}\r\n\r\nexport default SummonedCreatureOptions\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport _ from 'lodash'\r\nimport localhost from '../localhost'\r\nimport { th } from '../fuf'\r\n\r\nimport UserItemAdjustment from './user_item_adjustment'\r\n\r\nconst MagicItemSummary = props => {\r\n\r\n  const { item } = props\r\n  const { known } = props.cmi\r\n\r\n  const renderDescription = (desc) => {\r\n    let descArray = desc.split(\"\\n\\n\")\r\n    let spellArray = item.features.map(f => {\r\n      return f.spells.map(sp => {\r\n        return _.lowerCase(sp.name)\r\n      })\r\n    })\r\n    spellArray = _.flatten(spellArray)\r\n    return descArray.map((para, idx) => {\r\n      let paraDupe = para\r\n      if (spellArray.length){\r\n\r\n        let array = ''\r\n\r\n        spellArray.forEach(s => {\r\n\r\n          if (array.length > 1){\r\n            array = array.map((ar, idx) => {\r\n              if (!spellArray.includes(ar)){\r\n\r\n                ar = ar.split(s)\r\n\r\n                if (ar.length > 1){\r\n                  ar.splice(1, 0, s)\r\n                }\r\n                return ar\r\n\r\n              } else {\r\n                return ar\r\n              }\r\n            })\r\n            array = _.flatten(array)\r\n          } else {\r\n\r\n            array = para.split(s)\r\n\r\n            if (array.length > 1){\r\n              array.splice(1, 0, s)\r\n            }\r\n          }\r\n\r\n        })\r\n\r\n        paraDupe = array.map(ar => {\r\n          if (spellArray.includes(ar)){\r\n            let spell\r\n            item.features.forEach(f => {\r\n              f.spells.forEach(sp => {\r\n                if (_.lowerCase(sp.name) === ar){\r\n                  spell = sp\r\n                }\r\n              })\r\n            })\r\n            return <em className='underline-hover' onClick={() => props.editModal('spell', null, spell.id)}>{ar}</em>\r\n          } else {\r\n            return <React.Fragment>{ar}</React.Fragment>\r\n          }\r\n        })\r\n\r\n      }\r\n      return <p key={idx*3+1}>{paraDupe}</p>\r\n    })\r\n  }\r\n\r\n\r\n  const renderMI = () => {\r\n    return (\r\n      <React.Fragment>\r\n        <h3 style={{display: 'inline-block'}}>{item.name}</h3>\r\n        <UserItemAdjustment characterItem={props.cmi} item={props.item} exitModal={props.exitModal} editModal={props.editModal} url='character_magic_item'/>\r\n        <div><strong>Price</strong> {item.price_in_gp} gp; <strong>Slot</strong> {item.slot}; <strong>CL</strong> {th(item.caster_level)}; <strong>Weight</strong> {item.weight} lb; <strong>Aura</strong> {item.aura}</div>\r\n        <br/>\r\n        <div style={{marginBottom: '1%', paddingBottom: '.8%', borderBottom: 'double'}}></div>\r\n        {renderDescription(item.description)}\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  const renderFalseDesc = () => {\r\n    return (\r\n      <React.Fragment>\r\n        <h3>{props.cmi.false_desc ?? \"Some sort of Magic Item...\"}</h3>\r\n        <UserItemAdjustment characterItem={props.cmi} item={props.item} exitModal={props.exitModal} editModal={props.editModal}/>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {known ? renderMI() : renderFalseDesc()}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(MagicItemSummary)\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M255.703 44.764c-6.176 0-12.353 1.384-17.137 4.152l-152.752 88.36c-9.57 5.535-9.57 14.29 0 19.826l152.752 88.359c9.57 5.536 24.703 5.536 34.272 0l152.754-88.36c9.57-5.534 9.57-14.289 0-19.824L272.838 48.916c-4.785-2.77-10.96-4.152-17.135-4.152zm-16.066 47.728c10.426.07 20.268 2.997 29.523 8.781 7.217 4.51 11.503 9.194 12.86 14.05 1.3 4.82-.311 9.735-4.838 14.745 9.307-2.952 18.48-3.867 27.521-2.746 9.034 1.059 17.655 4.151 25.863 9.282 12.23 7.643 17.511 15.88 15.842 24.71-1.724 8.796-10.313 17.83-25.767 27.102-5.452 3.271-11.452 6.23-17.998 8.875-6.444 2.651-13.363 4.946-20.758 6.887l-24.541-15.338c8.095-1.213 15.424-2.846 21.992-4.897 6.56-2.114 12.283-4.634 17.166-7.564 7.253-4.352 11.34-8.594 12.26-12.723.967-4.157-1.277-7.939-6.73-11.347-5.62-3.512-11.851-4.97-18.698-4.371-6.855.536-14.146 3.123-21.873 7.76l-10.951 6.57-20.494-12.809 11.52-6.912c6.873-4.125 10.755-7.97 11.642-11.54.832-3.603-1.314-7.006-6.438-10.208-4.737-2.961-10.036-4.268-15.896-3.924-5.86.344-11.779 2.309-17.752 5.893-4.41 2.645-8.286 5.68-11.633 9.105-3.347 3.425-6.119 7.18-8.316 11.266l-23.303-14.565a99.387 99.387 0 0 1 12.105-12.12 109.57 109.57 0 0 1 14.323-10.214c13.795-8.277 26.75-12.81 38.865-13.601a58.478 58.478 0 0 1 4.504-.147zm196.23 81.322c-1.938.074-4.218.858-6.955 2.413l-146.935 84.847c-9.57 5.527-17.14 18.638-17.14 29.69v157.699c0 11.05 7.57 15.419 17.14 9.89l146.937-84.843c9.57-5.527 17.137-18.636 17.137-29.688v-157.7c-2.497-8.048-5.23-12.495-10.184-12.308zm-359.763.48c-6.227 0-10.033 5.325-10.155 11.825v157.697c0 11.052 7.57 24.163 17.14 29.69l146.93 84.848c9.57 5.526 17.141 1.156 17.141-9.895v-157.7c0-11.051-7.57-24.159-17.14-29.687L83.09 176.225c-2.567-1.338-4.911-1.93-6.986-1.93zm36.19 57.757c6.391 1.269 12.707 3.12 18.95 5.553 6.243 2.373 12.363 5.36 18.36 8.958 13.173 7.905 23.398 17.558 30.673 28.961 7.324 11.433 10.985 23.444 10.985 36.03 0 7.277-1.548 13.148-4.645 17.613-3.097 4.405-9.61 8.908-19.539 13.508l-23.521 10.94L192 382.68V408l-80-48v-25.32l40.184-18.928c3.588-1.784 6.244-4.038 7.964-6.764 1.72-2.725 2.58-6.115 2.58-10.172 0-6.263-1.746-12.35-5.236-18.261-3.44-5.882-8.036-10.55-13.787-14-4.424-2.655-9.266-4.397-14.525-5.227-5.26-.889-10.888-.865-16.885.07v-29.347zm261.876 7.447v111.77L400 335.77V360l-79.316 47.59v-24.23l25.832-15.499v-87.904L320 302.424v-23.865l26.363-22.377 27.807-16.684z\",\n  fill: \"#000000\",\n  fillOpacity: 1\n});\n\nvar SvgD3 = function SvgD3(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    style: {\n      height: 512,\n      width: 512\n    },\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    className: \"\",\n    transform: \"translate(0,0)\",\n    style: {}\n  }, _ref2));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgD3, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/d3.58e63734.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M235.11 196.24l17.074-29.463v29.463H235.11zM486.95 456H25.05L256 56zm-358.631-54.833l41.212-22.943-6.702-12.075-59.699 33.303 5.458 9.805a11.278 11.278 0 0 1 2.645-.881 11.822 11.822 0 0 1 5.566-.085 12.534 12.534 0 0 1 6.34 4.01 59.3 59.3 0 0 1 5.071 7.353l7.994-4.456zM273.074 196.24h-7.74v-42.734H250.24l-25.14 41.515v11.749h27.072v14.72h13.162v-14.72h7.74v-10.518zm131.619 212.45q6.822-11.93.616-21.735-3.26-5.132-10.675-9.745l-6.484 11.338a22.677 22.677 0 0 1 6.533 5.483q2.873 4.19-.17 9.515a8.453 8.453 0 0 1-5.916 4.552 10.868 10.868 0 0 1-7.463-1.497 14.08 14.08 0 0 1-6.436-8.513 99.728 99.728 0 0 1-2.294-15.167q-1.316-13.089-5.82-18.982a32.144 32.144 0 0 0-10.095-9.418l-23.28 40.705 10.275 5.88 14.828-25.913a15.203 15.203 0 0 1 1.679 4.577q.47 2.415 1.062 8.585l.64 6.57a45.149 45.149 0 0 0 2.717 12.823 21.518 21.518 0 0 0 9.455 10.638q8.598 4.915 17.002 2.33 8.404-2.584 13.814-12.014z\",\n  fill: \"#000000\",\n  fillOpacity: 1\n});\n\nvar SvgD4 = function SvgD4(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    style: {\n      height: 512,\n      width: 512\n    },\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    className: \"\",\n    transform: \"translate(0,0)\",\n    style: {}\n  }, _ref2));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgD4, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/d4.0f472d02.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M255.703 44.764c-6.176 0-12.353 1.384-17.137 4.152l-152.752 88.36c-9.57 5.535-9.57 14.29 0 19.826l152.752 88.359c9.57 5.536 24.703 5.536 34.272 0l152.754-88.36c9.57-5.534 9.57-14.289 0-19.824L272.838 48.916c-4.785-2.77-10.96-4.152-17.135-4.152zM238.695 87.27l22.838 14.273c-6.747 1.007-12.586 2.28-17.515 3.818-4.985 1.504-9.272 3.334-12.864 5.489-7.721 4.633-11.09 9.897-10.105 15.793.93 5.86 6.223 12.247 15.875 19.16.26-3.467 1.457-6.652 3.59-9.553 2.077-2.936 5.159-5.629 9.244-8.08 10.28-6.168 22.259-8.83 35.935-7.98 13.722.821 26.568 4.973 38.537 12.455 13.239 8.274 20.334 17.024 21.284 26.251.894 9.194-4.584 17.346-16.436 24.458-13.064 7.838-28.593 10.533-46.588 8.085-18.004-2.508-36.964-9.986-56.877-22.431-20.41-12.756-32.258-25.276-35.547-37.56-3.299-12.347 2.348-22.895 16.938-31.65 4.624-2.774 9.554-5.192 14.79-7.253 5.238-2.061 10.871-3.82 16.901-5.275zm38.678 53.23c-4.169-.007-7.972 1.02-11.406 3.08-4.534 2.72-6.125 5.906-4.774 9.555 1.341 3.587 5.624 7.64 12.85 12.156 7.226 4.516 13.78 7.237 19.666 8.166 5.875.867 11.081-.059 15.615-2.78 4.58-2.747 6.198-5.915 4.858-9.503-1.351-3.65-5.64-7.732-12.866-12.248-7.226-4.516-13.777-7.207-19.652-8.074a27.826 27.826 0 0 0-4.291-.352zm158.494 33.314c-1.938.074-4.218.858-6.955 2.413l-146.935 84.847c-9.57 5.527-17.14 18.638-17.14 29.69v157.699c0 11.05 7.57 15.419 17.14 9.89l146.937-84.843c9.57-5.527 17.137-18.636 17.137-29.688v-157.7c-2.497-8.048-5.23-12.495-10.184-12.308zm-359.763.48c-6.227 0-10.033 5.325-10.155 11.825v157.697c0 11.052 7.57 24.163 17.14 29.69l146.93 84.848c9.57 5.526 17.141 1.156 17.141-9.895v-157.7c0-11.051-7.57-24.159-17.14-29.687L83.09 176.225c-2.567-1.338-4.911-1.93-6.986-1.93zm40.095 52.226l68.114 40.869v25.287l-46.262-27.758v20.64a43.279 43.279 0 0 1 6.262 2.151c2.135.864 4.341 1.98 6.619 3.346 12.953 7.772 23.037 17.902 30.25 30.39 7.212 12.43 10.818 25.912 10.818 40.448 0 14.416-3.938 23.342-11.814 26.777-7.83 3.464-18.72 1.01-32.67-7.36-6.026-3.615-12.005-7.948-17.936-12.996-5.884-4.96-11.744-10.68-17.58-17.16v-27.076c5.789 7.643 11.27 14.06 16.441 19.248 5.22 5.217 10.13 9.205 14.733 11.967 6.643 3.986 11.862 5.092 15.658 3.318 3.843-1.804 5.766-6.19 5.766-13.16 0-7.03-1.923-13.723-5.766-20.08-3.796-6.328-9.015-11.485-15.658-15.47a56.585 56.585 0 0 0-12.598-5.594c-4.46-1.426-9.252-2.335-14.377-2.729V226.52zm270.047 5.732v85.809L400 309.809v25.414l-13.754 8.252v24.777l-23.502 14.102v-24.778L320 383.223v-30.06l38.611-104.331 27.635-16.58zm-23.502 42.978l-27.248 73.28 27.248-16.348V275.23z\",\n  fill: \"#000000\",\n  fillOpacity: 1\n});\n\nvar SvgD6 = function SvgD6(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    style: {\n      height: 512,\n      width: 512\n    },\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    className: \"\",\n    transform: \"translate(0,0)\",\n    style: {}\n  }, _ref2));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgD6, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/d6.a3dc0163.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M256 37.143L77.896 343.853h356.208zM230.154 49.79L72 164.233v157.91zm51.69 0L440 322.144V164.232zm-132.516 90.02v21.786l-8.486 9.68v-16.942c-2.772 3.24-5.692 6.367-8.385 9.664 3.536.293 2.484 5.43 2.207 7.752-1.746 9.536-8.154 17.575-13.404 24.79-1.943 2.544-3.943 5.075-6.008 7.507-4.65 3.4-8.49 4.39-10.775-1.463.294-7.806 3.84-15.22 8.046-20.967l5.288-7.918c-.048 2.462.1 4.97-.072 7.405-2.34 4.347-6.766 9.46-5.758 14.608 7.76.874 12.22-10.863 14.522-16.58.832-2.76 2.108-5.458-1.418-5.434v-7.264zm212.13 1.21l44.853 54.464v7.262l-30.304-36.31v8.472l-6.06-7.262c-.155-4.15-1.424-8.377-2.425-12.103-1.86-2.936-3.96-5.704-6.06-8.47zM256.07 203.86c8.37 0 14.733 1.53 19.088 4.587 4.355 3.027 6.533 7.475 6.533 13.344 0 3.924-1.08 7.198-3.243 9.823-2.13 2.626-5.297 4.572-9.498 5.838 4.694 1.298 8.23 3.415 10.61 6.35 2.408 2.902 3.614 6.576 3.614 11.024 0 6.857-2.286 12.047-6.858 15.57-4.54 3.49-11.288 5.233-20.246 5.233-8.988 0-15.784-1.744-20.386-5.234-4.572-3.522-6.858-8.712-6.858-15.57 0-4.447 1.19-8.12 3.57-11.024 2.408-2.935 5.96-5.052 10.655-6.35-4.2-1.265-7.366-3.21-9.497-5.837-2.13-2.625-3.198-5.9-3.198-9.822 0-5.837 2.18-10.285 6.534-13.343 4.354-3.058 10.748-4.586 19.18-4.586zm0 11.212c-2.84 0-5.035.742-6.58 2.225-1.513 1.482-2.27 3.583-2.27 6.3 0 2.75.757 4.866 2.27 6.348 1.545 1.483 3.74 2.225 6.58 2.225 2.78 0 4.926-.742 6.44-2.225 1.513-1.482 2.27-3.598 2.27-6.347 0-2.75-.757-4.85-2.27-6.3-1.514-1.484-3.66-2.226-6.44-2.226zm0 28.262c-3.336 0-5.9.912-7.69 2.734-1.793 1.823-2.69 4.433-2.69 7.83 0 3.398.897 6.008 2.69 7.83 1.79 1.792 4.354 2.688 7.69 2.688 3.305 0 5.837-.896 7.598-2.687 1.76-1.824 2.64-4.434 2.64-7.832 0-3.428-.88-6.038-2.64-7.83-1.76-1.822-4.293-2.734-7.598-2.734zM88.7 359.852L256 480.912l167.3-121.06zm139.42 23.23h54.548v4.842c-14.406 5.942-21.582 12.897-27.88 25.416h-15.76c7.104-13.803 14.546-17.714 26.67-25.416h-37.58z\",\n  fill: \"#000000\",\n  fillOpacity: 1\n});\n\nvar SvgD8 = function SvgD8(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    style: {\n      height: 512,\n      width: 512\n    },\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    className: \"\",\n    transform: \"translate(0,0)\",\n    style: {}\n  }, _ref2));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgD8, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/d8.8b2ab880.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M375.483 251.243l-109.98 51.138.213 183.381L477.01 266.346l-86.993-21.81zm-12.736 108.626l-5.947 14.699-48.604-8.955 5.007-12.832a141.306 141.306 0 0 0 13.51-11.358 167.184 167.184 0 0 0 16.566-17.517 170.478 170.478 0 0 0 12.606-17.958 115.607 115.607 0 0 0 9.514-17.97l14.068 2.51q-9.37 22.334-30.361 44.43-13.296 13.64-20.645 18.636zM121.603 244.334l-84.71 21.763L246.474 486V302.38l-109.946-51.137zm19.147 50.852a28.72 28.72 0 0 1 24.273 6.802 53.052 53.052 0 0 1 11.226 14.188l-13.081 2.676a28.542 28.542 0 0 0-5.388-7.374q-5.185-4.876-11.262-3.853l-.487.095a6.458 6.458 0 0 0-5.162 4.448c-.856 2.378-.238 5.554 1.796 9.371q4.08 7.6 10.81 9.027a23.785 23.785 0 0 0 8.563-.203l1.867-.344 5.791 10.822q-6.398 1.427-8.23 3.282-3.21 3.14.429 9.93a17.042 17.042 0 0 0 6.089 6.696 10.406 10.406 0 0 0 7.385 1.534l.416-.083q4.757-.964 5.079-4.757c.261-2.57-.655-5.744-2.748-9.514l12.38-2.545a49.247 49.247 0 0 1 4.103 11.226 19.956 19.956 0 0 1-.642 9.383 11.702 11.702 0 0 1-3.96 5.411 19.575 19.575 0 0 1-8.027 3.235l-1.19.214a27.971 27.971 0 0 1-17.494-2.7 32.193 32.193 0 0 1-14.128-14.092q-3.627-6.79-2.604-12.19a8.396 8.396 0 0 1 2.521-4.947h-.071q-1.844.31-7.04-2.497a32.11 32.11 0 0 1-12.916-13.593q-5.245-9.764-3.282-18.398 1.962-8.634 13.676-11zM27.19 248.865l108.78-116.309a7.135 7.135 0 0 1 1.427 0h.154q3.14.345 2.842 3.71a19.36 19.36 0 0 1-3.294 8.1 39.376 39.376 0 0 1-9.728 10.405q-3.912 2.938-15.044 9.514-12.796 7.505-19.55 14.77a92.535 92.535 0 0 0-11.513 14.486l32.907 3.758 8.182-12.963-20.967-2.378a36.415 36.415 0 0 1 4.757-3.83q2.379-1.605 8.444-5.125l6.422-3.747a92.975 92.975 0 0 0 12.903-8.776 61.472 61.472 0 0 0 12.51-14.414q6.84-10.846 6.494-17.957c-.19-3.949-2.105-6.434-5.684-7.505l79.798-85.161-102.097 179.576-5.708 10.06zm367.238-71.974q-3.817-5.458-3.758-8.515c0-2.033 1.19-3.199 3.568-3.448h.57a11.892 11.892 0 0 1 6.91 2.247 29.85 29.85 0 0 1 7.837 8.051q3.687 5.28 3.71 8.397c0 2.093-1.188 3.258-3.496 3.567h-.594a11.75 11.75 0 0 1-6.957-2.378 29.79 29.79 0 0 1-7.79-7.885zm-109.41-141.52l83.948 89.634h-1.189c-.38 0-.975 0-1.463.107q-7.825.892-8.324 6.862-.5 5.97 5.03 13.747a53.778 53.778 0 0 0 6.375 7.374 37.901 37.901 0 0 0 10.144 6.897q-2.117 2.89-.702 7.98a37.283 37.283 0 0 0 5.613 11.096 55.122 55.122 0 0 0 15.223 14.806q8.098 5.268 16.066 4.935.81 0 1.618-.13 8.776-.988 9.228-7.873a16.114 16.114 0 0 0-.463-4.853l58.689 62.686-91.572-22.941-6.1-10.703zm98.22 104.927l2.45 2.617c.451.57.903 1.189 1.355 1.784 1.808 2.592 2.723 4.757 2.723 6.529 0 1.771-1.034 2.782-3.127 3.02h-.512a10.346 10.346 0 0 1-6.077-1.95 22.596 22.596 0 0 1-6.184-6.137c-1.974-2.83-2.937-5.102-2.878-6.814.06-1.713 1.118-2.7 3.187-2.937h.524a10.263 10.263 0 0 1 6.005 1.879 19.147 19.147 0 0 1 2.533 2.01zM255.987 26L137.456 231.026l118.532 55.05 118.604-55.05zm-1.19 208.463q-17.529 0-24.58-12.273-7.053-12.273-7.053-34.988 0-22.714 7.052-35.047 7.052-12.332 24.582-12.344 17.53 0 24.582 12.332 7.052 12.333 7.052 35.047 0 22.715-7.052 34.988-7.053 12.273-24.582 12.285zm10.538-71.807q2.497 7.968 2.497 24.546 0 15.817-2.497 24.201-2.498 8.384-10.537 8.325-8.04 0-10.632-8.325-2.593-8.324-2.593-24.2 0-16.579 2.593-24.547t10.632-7.968q8.015-.012 10.513 7.956z\",\n  fill: \"#000000\",\n  fillOpacity: 1\n});\n\nvar SvgD10 = function SvgD10(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    style: {\n      height: 512,\n      width: 512\n    },\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    className: \"\",\n    transform: \"translate(0,0)\",\n    style: {}\n  }, _ref2));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgD10, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/d10.14f6d8eb.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M450.169 181.354L379.685 84.29 265.629 47.325v92.652l96.384 70.031zm-91.46-28.416a19.735 19.735 0 0 1-3.004 6.606 16.563 16.563 0 0 1-11.924 6.857q-7.548.918-15.729-5.056-8.18-5.974-9.599-13.439a16.563 16.563 0 0 1 2.922-13.414 19.747 19.747 0 0 1 5.378-4.866q3.422-2.206 9.026-1.574a18.757 18.757 0 0 1-1.717-10.421 21.082 21.082 0 0 1 4.03-9.802 19.246 19.246 0 0 1 13.666-7.99q8.633-1.108 17.779 5.57 9.146 6.677 10.326 14.952a20.033 20.033 0 0 1-3.827 15.204 20.772 20.772 0 0 1-8.145 6.797 16.312 16.312 0 0 1-10.17 1.192q2.038 5.461.989 9.384zm-10.731-8.287a8.252 8.252 0 0 1-1.717 6.189 8.907 8.907 0 0 1-15.669-3.685 8.562 8.562 0 0 1 1.908-6.367 8.347 8.347 0 0 1 5.33-3.578 8.252 8.252 0 0 1 6.451 1.825 8.347 8.347 0 0 1 3.757 5.628zm9.54-11.77a10.732 10.732 0 0 1-11.472-8.346q-.548-3.709 2.504-7.894a10.851 10.851 0 0 1 6.654-4.77 10.732 10.732 0 0 1 11.543 8.43 10.851 10.851 0 0 1-2.469 7.775q-2.945 4.198-6.653 4.806zm-110.968 7.096V47.325L132.494 84.29 62.01 181.354l88.156 28.618zm-112.66-21.798l37.895-26.52a31.73 31.73 0 0 1 5.056 12.664q1.55 7.155-2.79 19.413a98.304 98.304 0 0 0-4.341 14.524 13.904 13.904 0 0 0 2.158 10.314 10.732 10.732 0 0 0 6.034 4.472 8.347 8.347 0 0 0 7.154-1.574q4.961-3.47 4.162-8.43a22.418 22.418 0 0 0-3.577-7.644l10.577-7.393q4.674 7.25 5.425 13.2 1.443 11.328-9.682 19.079-8.789 6.153-17.386 4.913-8.597-1.24-14.214-9.242a21.237 21.237 0 0 1-3.97-13.486 44.513 44.513 0 0 1 3.112-12.568l2.194-6.141q2.063-5.76 2.659-8.12a15.025 15.025 0 0 0 .43-4.77l-24.16 16.908zm64.7 215.412h114.998l35.51-109.37-93.009-67.598-93.009 67.599zm89.266-95.072a8.347 8.347 0 0 0-6.797-2.838q-6.058 0-8.24 4.52a22.382 22.382 0 0 0-1.49 8.346h-12.855q.322-8.62 3.124-13.927 5.319-10.112 18.889-10.112 10.731 0 17.063 5.962 6.332 5.962 6.237 15.633a21.25 21.25 0 0 1-4.484 13.32 44.585 44.585 0 0 1-9.659 8.62l-5.318 3.769q-4.996 3.577-6.832 5.127a15 15 0 0 0-3.1 3.685h29.488v11.685h-46.207a31.73 31.73 0 0 1 3.125-13.271q2.838-6.75 13.414-14.31a98.602 98.602 0 0 0 11.925-9.408 13.916 13.916 0 0 0 4.15-9.682 10.732 10.732 0 0 0-2.433-7.13zm-79.607-1.812a58.536 58.536 0 0 0 8.776-.835 12.377 12.377 0 0 0 6.511-3.577 11.686 11.686 0 0 0 2.6-4.842 11.125 11.125 0 0 0 .512-2.707h11.09v67.54h-13.606v-46.553H208.25v-9.038zM196.468 352.67l-54.434 75.04 114.055 36.965 114.056-36.965-54.434-75.04H196.468zm77.27 83.792q-5.64 7.226-17.517 7.214-12.76 0-18.817-10.672-4.71-8.347-4.71-21.464a97.78 97.78 0 0 1 .656-12.58 38.444 38.444 0 0 1 4.52-14.309 23.121 23.121 0 0 1 7.571-7.87 20.414 20.414 0 0 1 11.197-2.981q9.408 0 15 4.77a18.328 18.328 0 0 1 6.285 12.83h-13.165a6.773 6.773 0 0 0-1.252-3.577 7.286 7.286 0 0 0-6.475-3.172q-6.474 0-9.217 7.262a45.062 45.062 0 0 0-2.051 11.829 14.905 14.905 0 0 1 5.724-4.281 20.975 20.975 0 0 1 22.19 4.77 21.833 21.833 0 0 1 5.748 15.609 26.34 26.34 0 0 1-5.64 16.61zm-10.732-24.612q2.885 3.148 2.885 9.063a13.868 13.868 0 0 1-2.54 8.645 8.275 8.275 0 0 1-6.963 3.327 9.36 9.36 0 0 1-7.453-3.446 13.248 13.248 0 0 1-2.862-8.884q0-6.75 3.911-9.778a9.456 9.456 0 0 1 5.962-2.05 9.241 9.241 0 0 1 7.131 3.111zm119.147-112.195l27.879 8.347-4.77 16.157zm-14.31-71.546l-36.81 113.28 54.483 74.993L456 319.366V199.503zm66.073 86.952l-13.927-4.162-7.656 25.614-11.113-3.315-32.196-35.523 4.27-14.309 40.434 12.08 2.183-7.322 9.956 2.97-2.182 7.32 13.928 4.162zm-289.76-86.952L56 199.491v119.934l70.484 97.016 54.482-74.992zM72.54 286.24l44.43-14-4.77-15.143 8.621-2.719a58.536 58.536 0 0 0 3.435 8.12 12.377 12.377 0 0 0 5.33 5.14 11.686 11.686 0 0 0 5.401 1.026 11.137 11.137 0 0 0 2.731-.322l3.327 10.576-64.391 20.272zm18.47 58.596l-4.09-12.974 44.43-13.999-4.77-15.144 8.622-2.718a58.68 58.68 0 0 0 3.434 8.12 12.365 12.365 0 0 0 5.33 5.14 11.65 11.65 0 0 0 5.402 1.025 11.102 11.102 0 0 0 2.73-.322l3.328 10.577z\",\n  fill: \"#000000\",\n  fillOpacity: 1\n});\n\nvar SvgD12 = function SvgD12(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    style: {\n      height: 512,\n      width: 512\n    },\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    className: \"\",\n    transform: \"translate(0,0)\",\n    style: {}\n  }, _ref2));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgD12, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/d12.8f63d196.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M248 20.3L72.33 132.6 248 128.8zm16 0v108.5l175.7 3.8zm51.4 58.9c6.1 3.5 8.2 7.2 15.1 4.2 10.7.8 22.3 5.8 27.6 15.7 4.7 4.5 1.5 12.6-5.2 12.6-9.7.1-19.7-6.1-14.6-8.3 4.7-2 14.7.9 10-5.5-3.6-4.5-11-7.8-16.3-5.9-1.6 6.8-9.4 4-12-.7-2.3-5.8-9.1-8.2-15-7.9-6.1 2.7 1.6 8.8 5.3 9.9 7.9 2.2.2 7.5-4.1 5.1-4.2-2.4-15-9.6-13.5-18.3 5.8-7.39 15.8-4.62 22.7-.9zm-108.5-3.5c5.5.5 12.3 3 10.2 9.9-4.3 7-9.8 13.1-18.1 14.8-6.5 3.4-14.9 4.4-21.6 1.9-3.7-2.3-13.5-9.3-14.9-3.4-2.1 14.8.7 13.1-11.1 17.8V92.3c9.9-3.9 21.1-4.5 30.3 1.3 8 4.2 19.4 1.5 24.2-5.7 1.4-6.5-8.1-4.6-12.2-3.4-2.7-8.2 7.9-7.5 13.2-8.8zm35 69.2L55.39 149l71.21 192.9zm28.2 0l115.3 197L456.6 149zm-14.1 7.5L138.9 352.6h234.2zm133.3 21.1c13.9 8.3 21.5 26.2 22.1 43-1.3 13.6-.7 19.8-15.2 21.4-14.5 1.6-23.9-19.2-29.7-32.6-3.4-9.9-5.8-24 1.7-31.3 6.1-4.8 15-4.1 21.1-.5zm-223.7 16.1c2.1 4-.5 11.4-4.8 12.1-4.9.7-3.8-9.3-9.4-11.6-6.9-2.3-13.6 5.6-15 11.6 10.4-4 20.3 7.1 20.3 17-.4 11.7-7.9 24.8-19.7 28.1h-5.6c-12.7-.7-18.3-15.8-14.2-26.6 4.4-15.8 10.8-33.9 27.2-40.6 8.5-3.9 19 3.2 21.2 10zm213.9-8.4c-7.1-.1-4.4 10-3.3 14.5 3.5 11.5 7.3 26.6 18.9 30 6.8-1.2 4.4-12.8 3.7-16.5-4.7-10.9-7.1-23.3-19.3-28zM52 186v173.2l61.9-5.7zm408 0l-61.9 167.5 61.9 5.7zm-117.9.7l28.5 63.5-10 4.4-20-43.3c-6.1 3-13 8.9-14.6-1.4-1.3-3.9 8.5-5.1 8.1-11.9-.3-6.9 2.2-12.2 8-11.3zm-212 27.4c-2.4 5.1-4.1 10.3-2.7 15.9 1.7 8.8 13.5 6.4 15.6-.8 2.7-5 3.9-11.7-.5-15.7-4.1-3.4-8.9-2.8-12.4.6zm328.4 41.6c-.1 18.6 1.1 39.2-9.7 55.3-.9 1.2-2.2 1.9-3.7 2.5-5.8-4.1-3-11.3 1.2-15.5 1 7.3 5.5-2.9 6.6-5.6 1.3-3.2 3.6-17.7-1-10.2.7 4-6.8 13.1-9.3 8.1-5-14.4 0-30.5 7-43.5 5.7-6.2 9.9 4.4 8.9 8.9zM59.93 245.5c.59.1 1.34 1 2.48 3.6v61.1c-7.3-7-4.47-18-4.45-26.4 0-8.4 1.65-16.3-1.28-23.2-4.62-1.7-5.79-17-3.17-12.7 4.41 4.8 4.66-2.7 6.42-2.4zm178.77 7.6c8.1 4.5 13.8 14.4 10.8 23.6-2.1 15.2-27 21.1-30.4 29.7-1.2 3 25.4 1.6 30.2 1.6.5 4 1.5 10.7-3.8 11.7-14.5-1.2-29.9-.6-45.1-.6.4-11.2 7.4-21.3 17-26.8 6.9-4.9 15.4-9.3 18.1-17.9 1.8-4.5-.6-9.3-4.6-11.5-4.2-2.9-11-2.3-13.2 2.7-2 3.8-4.4 9.1-8.7 9.6-2.9.4-9 .5-7.2-4.9 1.4-5.6 3.4-11.5 8.2-15.2 8.8-6.3 19.9-6.7 28.7-2zm53.3-1.4c6.8 2.2 12 7.9 14.3 14.6 6.1 14.7 5.5 33.1-4.4 45.9-4.5 4.8-10.2 9.1-17 9.1-12.5-.1-22.4-11.1-24.8-22.8-3.1-13.4-1.8-28.7 6.9-39.8 6.8-7.6 16-10.3 25-7zm156.1 8.1c-1.6 5.9-3.3 13.4-.7 19.3 5.1-2 5.4-9.6 6.6-14.5.9-6.1-3.5-12.6-5.9-4.8zm-176.2 21.1c.6 10.5 1.7 22.8 9.7 28.2 4.9 1.8 9.7-2.2 11.1-6.7 1.9-6.3 2.3-12.9 2.4-19.4-.2-7.1-1.5-15-6.7-20.1-12.2-4.4-15.3 10.9-16.5 18zM434 266.8V328l-4.4 6.7v-42.3c-4.6 7.5-9.1 9.1-6.1-.9 6.1-7.1 4.8-17.4 10.5-24.7zM83.85 279c.8 3.6 5.12 17.8 2.04 14.8-1.97-1.3-3.62-4.9-3.41-6.1-1.55-3-2.96-6.1-4.21-9.2-2.95 4-3.96 8.3-3.14 13.4.2-1.6 1.18-2.3 3.39-.7 7.84 12.6 12.17 29.1 7.29 43.5l-2.22 1.1c-10.36-5.8-11.4-19.4-13.43-30-1.55-12.3-.79-24.7 2.3-36.7 5.2-3.8 9.16 5.4 11.39 9.9zm-7.05 20.2c-4.06 4.7-2.26 12.8-.38 18.4 1.11 5.5 6.92 10.2 6.06 1.6.69-11.1-2.33-12.7-5.68-20zm66.4 69.4L256 491.7l112.8-123.1zm-21.4.3l-53.84 4.9 64.24 41.1c-2.6-2.7-4.9-5.7-7.1-8.8-5.2-6.9-10.5-13.6-18.9-16.6-8.75-6.5-4.2-5.3 2.9-2.6-1-1.8-.7-2.6.1-2.6 2.2-.2 8.4 4.2 9.8 6.3l24.7 31.6 65.1 41.7zm268.4 0l-42.4 46.3c6.4-3.1 11.3-8.5 17-12.4 2.4-1.4 3.7-1.9 4.3-1.9 2.1 0-5.4 7.1-7.7 10.3-9.4 9.8-16 23-28.6 29.1l18.9-24.5c-2.3 1.3-6 3.2-8.2 4.1l-40.3 44 74.5-47.6c5.4-6.7 1.9-5.6-5.7-.9l-11.4 6c11.4-13.7 30.8-28.3 40-35.6 9.2-7.3 15.9-9.8 8.2-1.5l-12.6 16c10-7.6.9 3.9-4.5 5.5-.7 1-1.4 2-2.2 2.9l54.5-34.9zM236 385.8v43.4h-13.4v-30c-5-1.4-10.4 1.7-15.3-.3-3.8-2.9 1-6.8 4.5-5.9 3.3-.1 7.6.2 9.3-3.2 4.4-4.5 9.6-4.4 14.9-4zm29 .5c12.1 1.2 24.2.6 36.6.6 1.5 3 .8 7.8-3.3 7.9-7.7.3-21-1.6-25.9.6-8.2 10.5 5.7 3.8 11.4 5.2 7 1.1 15 2.9 19.1 9.2 2.1 3.1 2.7 7.3.7 10.7-5.8 6.8-17 11.5-25.3 10.9-7.3-.6-15.6-1.1-20.6-7.1-6.4-10.6 10.5-6.7 12.2-3.2 6 5.3 20.3 1.9 20.7-4.7.6-4.2-2.1-6.3-6.9-7.8-4.8-1.5-12.6 1-17.3 1.8-4.7.8-9.6.5-9-4.4.8-4.2 2.7-8.1 2.7-12.5.1-3 1.7-7 4.9-7.2zm133.5 5c-.2-.2-7 5.8-9.9 8.1l-15.8 13.1c10.6-6.5 19.3-12 25.7-21.2zm-247 14.2c2.4 0 7.5 4.6 9.4 7l26.1 31.1c-7.7-2.1-13.3-7.1-17.6-13.7-6.5-7.3-11.3-16.6-21.2-19.6-9-5-5.2-6.4 2.1-2.2-.3-1.9.2-2.6 1.2-2.6z\",\n  fill: \"#000000\",\n  fillOpacity: 1\n});\n\nvar SvgD20 = function SvgD20(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    style: {\n      height: 512,\n      width: 512\n    },\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    className: \"\",\n    transform: \"translate(0,0)\",\n    style: {}\n  }, _ref2));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgD20, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/d20.d4563f05.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M107.376 28.002c-7.475.147-15.469 2.625-21.11 5.318-12.971 6.287-26.097 18.123-36.622 32.412-10.526 14.29-18.463 30.992-21.854 46.35-3.371 15.272-2.164 28.759 3.705 38.08l89.178 117.861c-.323-1.676-.62-3.362-.877-5.062-4.594-30.313.962-64.488 17.356-95.967 16.393-31.479 40.677-54.6 67.261-66.51 9.26-4.148 18.853-6.918 28.473-8.152l-110.045-60.43c-5.044-2.575-10.19-3.83-15.465-3.9zm138.156 81.95c-11.029-.138-22.48 2.414-33.81 7.49-22.66 10.15-44.375 30.513-59.059 58.708-14.684 28.196-19.4 58.59-15.484 84.428 3.916 25.839 16.127 46.774 35.404 58.152 11.198 6.61 23.703 9.352 36.658 8.504-5.197-12.722-9.295-25.665-9.841-39.318 10.304-19.968 20.802-39.936 35.695-59.905 22.946-7.223 47.124-4.533 75.035-3.39 3.722-16.605 4.335-32.99 2.08-47.863-3.916-25.839-16.127-46.774-35.404-58.153-9.638-5.689-20.244-8.516-31.273-8.654zm71.481 132.306l-67.496 3.863 18.369 61.832 66.26-3.715c-2.435-21.315-10.232-41.558-17.133-61.98zm-80.666 15.195c-7.923 9.763-14.526 20.318-17.787 32.877 1.772 19.22 4.134 38.373 14.185 56.672l18.39-30.13zm173.738 59.95c-24.604 11.259-43.699 23.436-62.822 35.609l70.945 55.69 67.86-48.368c-22.714-15.182-47.656-29.62-75.983-42.932zm-82.357 6.152l-62.108 2.92-18.431 29.722c19.703-.995 38.332.695 59.717-4.502 10.37-9.38 14.824-18.76 20.822-28.14zm14.894 48.601c-5.018 19.188-5.258 39.333-5.73 59.43 17.198 23.68 40.384 36.581 61.943 52.412l8.658-62.232zm142.354 9.223l-58.973 42.498-8.88 56.496c19.434-11.58 37.82-24.417 52.605-41.574 8.266-19.14 11.495-38.28 15.248-57.42z\",\n  fill: \"#000000\",\n  fillOpacity: 1\n});\n\nvar SvgRollingDiceCup = function SvgRollingDiceCup(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    style: {\n      height: 512,\n      width: 512\n    },\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    className: \"\",\n    transform: \"translate(0,0)\",\n    style: {}\n  }, _ref2));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgRollingDiceCup, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/rolling-dice-cup.3cf54354.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react'\r\n\r\nimport { useSelector } from 'react-redux'\r\n\r\nimport d2 from '../../dice/d2.png'\r\nimport { ReactComponent as D3 } from '../../dice/d3.svg'\r\nimport { ReactComponent as D4 } from '../../dice/d4.svg'\r\nimport { ReactComponent as D6 } from '../../dice/d6.svg'\r\nimport { ReactComponent as D8 } from '../../dice/d8.svg'\r\nimport { ReactComponent as D10 } from '../../dice/d10.svg'\r\nimport { ReactComponent as D12 } from '../../dice/d12.svg'\r\nimport { ReactComponent as D20 } from '../../dice/d20.svg'\r\nimport { ReactComponent as RollingDiceCup } from '../../dice/rolling-dice-cup.svg'\r\n\r\nconst DiceRoller = props => {\r\n\r\n\tconst [diceToRoll, setDice] = React.useState({})\r\n\tconst [diceResults, setResults] = React.useState([])\r\n\tconst [baseModifier, setBaseModifier] = React.useState(0)\r\n\tconst [tempModifier, setTempModifier] = React.useState(0)\r\n\r\n\tconst { borderColor, textColor, background1 } = useSelector(state => state.settings)\r\n\r\n\tReact.useEffect(() => {\r\n\t\tif (props.diceObj){\r\n\t\t\tconst { rollName, modifier, die, count } = props.diceObj\r\n\r\n\t\t\tsetDice({rollName, [die]: count})\r\n\t\t\tsetBaseModifier(modifier)\r\n\t\t}\r\n\t}, [props.diceObj])\r\n\r\n\tconst chooseDice = () => {\r\n\t\treturn (\r\n\t\t\t<section style={{display: \"flex\", flexDirection: \"column-reverse\", marginBottom: \"auto\"}}>\r\n\t\t\t\t<div onClick={() => renderAddDice(100)}><D10 style={{height: \"4vh\", width: \"4vh\"}}/><D10 style={{height: \"4vh\", width: \"4vh\"}}/></div>\r\n\t\t\t\t<img src={d2} style={{height: \"5vh\", width: \"5vh\"}} onClick={() => renderAddDice(2)}/>\r\n\t\t\t\t<D3 style={{height: \"5vh\", width: \"5vh\"}} onClick={() => renderAddDice(3)}/>\r\n\t\t\t\t<D4 style={{height: \"5vh\", width: \"5vh\"}} onClick={() => renderAddDice(4)}/>\r\n\t\t\t\t<D6 style={{height: \"5vh\", width: \"5vh\"}} onClick={() => renderAddDice(6)}/>\r\n\t\t\t\t<D8 style={{height: \"5vh\", width: \"5vh\"}} onClick={() => renderAddDice(8)}/>\r\n\t\t\t\t<D10 style={{height: \"5vh\", width: \"5vh\"}} onClick={() => renderAddDice(10)}/>\r\n\t\t\t\t<D12 style={{height: \"5vh\", width: \"5vh\"}} onClick={() => renderAddDice(12)}/>\r\n\t\t\t\t<D20 style={{height: \"5vh\", width: \"5vh\"}} onClick={() => renderAddDice(20)}/>\r\n\t\t\t</section>\r\n\t\t)\r\n\t}\r\n\r\n\tconst renderAddDice = (d) => {\r\n\t\tlet objDupe = {...diceToRoll}\r\n\t\tif (objDupe[d]){\r\n\t\t\tobjDupe[d]++\r\n\t\t} else {\r\n\t\t\tobjDupe[d] = 1\r\n\t\t}\r\n\t\tsetDice(objDupe)\r\n\t}\r\n\r\n\tconst renderSubtractDice = (d) => {\r\n\t\tlet objDupe = {...diceToRoll}\r\n\t\tif (objDupe[d] === 1){\r\n\t\t\tdelete objDupe[d]\r\n\t\t} else {\r\n\t\t\tobjDupe[d]--\r\n\t\t}\r\n\t\tsetDice(objDupe)\r\n\t}\r\n\r\n\tconst clearDice = () => {\r\n\t\tsetDice({})\r\n\t\tsetBaseModifier(0)\r\n\t\tsetTempModifier(0)\r\n\t}\r\n\r\n\tconst roll = () => {\r\n\t\tlet total = []\r\n\t\tlet totalString = \"\"\r\n\t\tlet nums = [20, 12, 10, 8, 6, 4, 3, 2, 100]\r\n\t\tnums.forEach(n => {\r\n\t\t\tif (diceToRoll[n]){\r\n\t\t\t\tif (totalString !== \"\"){totalString += \"+\"}\r\n\t\t\t\ttotalString += `${diceToRoll[n]}d${n}`\r\n\t\t\t\tfor (let i = 0; i < diceToRoll[n]; i++){\r\n\t\t\t\t\tlet rollResult = Math.ceil(Math.random() * n)\r\n\t\t\t\t\tif (diceToRoll[n] == 1 && n === 20){\r\n\t\t\t\t\t\tif (rollResult === 20){\r\n\t\t\t\t\t\t\trollResult = <span style={{color: \"gold\", textShadow: \"1px 1px #000, 1px -1px #000, -1px 1px #000, -1px -1px #000\"}}>20</span>\r\n\t\t\t\t\t\t} else if (rollResult === 1){\r\n\t\t\t\t\t\t\trollResult = <span style={{color: \"red\", textShadow: \"1px 1px #fff, 1px -1px #fff, -1px 1px #fff, -1px -1px #fff\"}}>1</span>\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttotal.push(rollResult)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\tif (baseModifier){\r\n\t\t\ttotal.push(parseInt(baseModifier))\r\n\t\t\ttotalString += parseInt(baseModifier) >= 0 ? `+${baseModifier}` : baseModifier\r\n\t\t}\r\n\t\tif (tempModifier){\r\n\t\t\ttotal.push(parseInt(tempModifier))\r\n\t\t\ttotalString += parseInt(tempModifier) >= 0 ? `+${tempModifier}` : tempModifier\r\n\t\t}\r\n\t\tlet resultsDupe = [...diceResults, {name: diceToRoll.rollName || \"Custom Roll\", totalString, total}]\r\n\t\twhile (resultsDupe.length > 6){\r\n\t\t\tresultsDupe.shift()\r\n\t\t}\r\n\t\tsetResults(resultsDupe)\r\n\t}\r\n\r\n\tconst theCage = () => {\r\n\t\tif (!Object.keys(diceToRoll).length){return null}\r\n\t\tlet diceString = []\r\n\t\tlet diceElements = [];\r\n\t\t[20, 12, 10, 8, 6, 4, 3, 2, 100].forEach(n => {\r\n\t\t\tif (diceToRoll[n]){\r\n\t\t\t\tif (n === 2){\r\n\t\t\t\t\tdiceString.push(`${diceToRoll[n]}d2`)\r\n\t\t\t\t\tfor (let i = 0; i < diceToRoll[n]; i++){diceElements.push(<img src={d2} style={{height: \"5vh\", width: \"5vh\"}} onClick={() => renderSubtractDice(2)}/>)}\r\n\t\t\t\t}\r\n\t\t\t\tif (n === 3){\r\n\t\t\t\t\tdiceString.push(`${diceToRoll[n]}d3`)\r\n\t\t\t\t\tfor (let i = 0; i < diceToRoll[n]; i++){diceElements.push(<D3 style={{height: \"5vh\", width: \"5vh\"}} onClick={() => renderSubtractDice(3)}/>)}\r\n\t\t\t\t}\r\n\t\t\t\tif (n === 4){\r\n\t\t\t\t\tdiceString.push(`${diceToRoll[n]}d4`)\r\n\t\t\t\t\tfor (let i = 0; i < diceToRoll[n]; i++){diceElements.push(<D4 style={{height: \"5vh\", width: \"5vh\"}} onClick={() => renderSubtractDice(4)}/>)}\r\n\t\t\t\t}\r\n\t\t\t\tif (n === 6){\r\n\t\t\t\t\tdiceString.push(`${diceToRoll[n]}d6`)\r\n\t\t\t\t\tfor (let i = 0; i < diceToRoll[n]; i++){diceElements.push(<D6 style={{height: \"5vh\", width: \"5vh\"}} onClick={() => renderSubtractDice(6)}/>)}\r\n\t\t\t\t}\r\n\t\t\t\tif (n === 8){\r\n\t\t\t\t\tdiceString.push(`${diceToRoll[n]}d8`)\r\n\t\t\t\t\tfor (let i = 0; i < diceToRoll[n]; i++){diceElements.push(<D8 style={{height: \"5vh\", width: \"5vh\"}} onClick={() => renderSubtractDice(8)}/>)}\r\n\t\t\t\t}\r\n\t\t\t\tif (n === 100){\r\n\t\t\t\t\tdiceString.push(`${diceToRoll[n]}d100`)\r\n\t\t\t\t\tfor (let i = 0; i < diceToRoll[n]; i++){diceElements.push(<div onClick={() => renderSubtractDice(100)}><D10 style={{height: \"4vh\", width: \"4vh\"}}/><D10 style={{height: \"4vh\", width: \"4vh\"}}/></div>)}\r\n\t\t\t\t}\r\n\t\t\t\tif (n === 10){\r\n\t\t\t\t\tdiceString.push(`${diceToRoll[n]}d10`)\r\n\t\t\t\t\tfor (let i = 0; i < diceToRoll[n]; i++){diceElements.push(<D10 style={{height: \"5vh\", width: \"5vh\"}} onClick={() => renderSubtractDice(10)}/>)}\r\n\t\t\t\t}\r\n\t\t\t\tif (n === 12){\r\n\t\t\t\t\tdiceString.push(`${diceToRoll[n]}d12`)\r\n\t\t\t\t\tfor (let i = 0; i < diceToRoll[n]; i++){diceElements.push(<D12 style={{height: \"5vh\", width: \"5vh\"}} onClick={() => renderSubtractDice(12)}/>)}\r\n\t\t\t\t}\r\n\t\t\t\tif (n === 20){\r\n\t\t\t\t\tdiceString.push(`${diceToRoll[n]}d20`)\r\n\t\t\t\t\tfor (let i = 0; i < diceToRoll[n]; i++){diceElements.push(<D20 style={{height: \"5vh\", width: \"5vh\"}} onClick={() => renderSubtractDice(20)}/>)}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t})\r\n\t\tdiceString = diceString.join(\"+\")\r\n\t\tif (baseModifier){diceString += parseInt(baseModifier) >= 0 ? `+${baseModifier}` : baseModifier}\r\n\t\tif (tempModifier){diceString += parseInt(tempModifier) >= 0 ? `+${tempModifier}` : tempModifier}\r\n\t\treturn (\r\n\t\t\t<article>\r\n\t\t\t\t<section style={{border: `2px dashed #${borderColor}`, margin: \"1%\", color: `#${textColor}`, display: \"flex\", minHeight: \"20vh\", flexWrap: \"wrap\"}}>\r\n\t\t\t\t\t{diceElements}\r\n\t\t\t\t</section>\r\n\t\t\t\t<section style={{display: \"grid\", gridTemplateRows: \"1fr 2fr\"}}>\r\n\t\t\t\t\t<div style={{padding: \"4px\", display: \"flex\", justifyContent: \"space-between\"}}>\r\n\t\t\t\t\t\t<label>Base Mod <input type=\"number\" value={baseModifier} onChange={e => setBaseModifier(e.target.value)} style={{width: \"5vh\"}}/></label>\r\n\t\t\t\t\t\t<label>Temp Mod <input type=\"number\" value={tempModifier} onChange={e => setTempModifier(e.target.value)} style={{width: \"5vh\"}}/></label>\r\n\t\t\t\t\t\t<button onClick={clearDice}>Clear</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<button onClick={roll} style={{borderRadius: \"1em\", display: \"flex\", justifyContent: \"space-around\", width: \"100%\", alignItems: \"center\"}}>\r\n\t\t\t\t\t\t<RollingDiceCup style={{height: \"10vh\", width: \"10vh\"}}/>\r\n\t\t\t\t\t\t<p style={{fontSize: \"20px\", wordBreak: \"break-word\"}}>Roll {diceToRoll.rollName ? `${diceToRoll.rollName} (${diceString})` : diceString}</p>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</section>\r\n\t\t\t</article>\r\n\t\t)\r\n\t}\r\n\r\n\tconst results = () => {\r\n\t\t// if (diceResults.length === 0){return null}\r\n\t\tlet resultElements = diceResults.map(d => {\r\n\t\t\tlet joinEquation = \"\"\r\n\t\t\tlet joinTotal = 0\r\n\t\t\tif (typeof d.total[0] !== \"number\"){\r\n\t\t\t\tlet critical = d.total[0]\r\n\t\t\t\tlet remainder = d.total.slice(1).map(d => parseInt(d) >= 0 ? \"+\" + d : d).join(\"\")\r\n\t\t\t\t// if (remainder.length > 0){remainder = \"+\" + remainder}\r\n\t\t\t\tjoinEquation = <span>{critical}{remainder}</span>\r\n\r\n\t\t\t\tjoinTotal += parseInt(critical.props.children)\r\n\t\t\t\tjoinTotal += d.total.slice(1).reduce((agg, el) => (agg + el), 0)\r\n\r\n\t\t\t} else {\r\n\t\t\t\tjoinEquation = d.total.map((d, i) => parseInt(d) >= 0 && i !== 0 ? \"+\" + d : d).join(\"\")\r\n\t\t\t\tjoinTotal = d.total.reduce((agg, el) => agg + el)\r\n\t\t\t}\r\n\t\t\treturn (\r\n\t\t\t\t<li style={{borderTop: `1px solid #${borderColor}`, margin: \"1%\", wordBreak: \"break-word\"}}>\r\n\t\t\t\t\t<div><strong>{joinEquation} = <span style={{fontSize: \"1.25em\", textShadow: `1px 1px #${background1}, 1px -1px #${background1}, -1px 1px #${background1}, -1px -1px #${background1}`}}>{joinTotal}</span></strong></div>\r\n\t\t\t\t\t<div>{d.name} - {d.totalString}</div>\r\n\t\t\t\t</li>\r\n\t\t\t)\r\n\t\t})\r\n\t\treturn (\r\n\t\t\t<div style={{marginTop: \"auto\"}}>\r\n\t\t\t\t<ul style={{color: `#${textColor}`, display: \"flex\", flexDirection: \"column\", fontSize: \"1.1em\", marginTop: \"auto\"}}>\r\n\t\t\t\t\t{resultElements}\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<aside style={{display: \"grid\", gridTemplateColumns: \"15% 42% 43%\"}}>\r\n\t\t\t{chooseDice()}\r\n\t\t\t{theCage()}\r\n\t\t\t{results()}\r\n\t\t</aside>\r\n\t)\r\n}\r\n\r\nexport default DiceRoller\r\n","import React from 'react'\r\nimport _ from 'lodash'\r\n\r\nimport SpellDescription from '../spell_description'\r\n\r\n\r\nconst PotionDescription = props => {\r\n\r\n\tconst { known, caster_level, potion_or_oil, spell } = props.cp\r\n\r\n\tconst renderPotion = () => {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<h3>{_.capitalize(potion_or_oil)} of {spell.name}</h3>\r\n\t\t\t\t<div><strong>Caster Level</strong> {caster_level}</div>\r\n\t\t\t\t<div style={{marginBottom: '1%', paddingBottom: '.8%', borderBottom: 'double'}}></div>\r\n\t\t\t\t<SpellDescription spell={spell} />\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\tconst renderFalseDesc = () => {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<h3>Strange Mysterious Liquid</h3>\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<aside>\r\n\t\t\t{known ? renderPotion() : renderFalseDesc()}\r\n\t\t</aside>\r\n\t)\r\n\r\n}\r\n\r\nexport default PotionDescription\r\n","import React from 'react'\r\nimport _ from 'lodash'\r\n\r\nimport SpellDescription from '../spell_description'\r\n\r\n\r\nconst ScrollDescription = props => {\r\n\r\n\tconst { known, spell_level, scroll_type, spell } = props.cs\r\n\r\n\tconst renderScroll = () => {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<h3>Scroll of {spell.name}</h3>\r\n\t\t\t\t<div><strong>Spell Level</strong> {spell_level} | <strong>Scroll Type</strong> {scroll_type}</div>\r\n\t\t\t\t<div style={{marginBottom: '1%', paddingBottom: '.8%', borderBottom: 'double'}}></div>\r\n\t\t\t\t<SpellDescription spell={spell} />\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\tconst renderFalseDesc = () => {\r\n\t\tlet description = \"Unknown scroll of mysterious equations and formulae...\"\r\n\t\tif (scroll_type === \"divine\"){\r\n\t\t\tdescription = \"Unknown scroll with esoteric words and mantras...\"\r\n\t\t} else if (scroll_type === \"psychic\"){\r\n\t\t\tdescription = \"Unknown scroll of memories forgotten and beliefs fading...\"\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<h3>{description}</h3>\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<aside>\r\n\t\t\t{known ? renderScroll() : renderFalseDesc()}\r\n\t\t</aside>\r\n\t)\r\n\r\n}\r\n\r\nexport default ScrollDescription\r\n","import React from 'react'\r\nimport _ from 'lodash'\r\n\r\nimport SpellDescription from '../spell_description'\r\n\r\n\r\nconst WandDescription = props => {\r\n\r\n\tconst { known, caster_level, charges, spell, name, description } = props.cw\r\n\r\n\tconst renderWand = () => {\r\n\t\tlet displayName = `Wand of ${spell.name}`\r\n\t\tif (name){\r\n\t\t\tdisplayName = <span>{name}<em> ({displayName})</em></span>\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<h3>{displayName}</h3>\r\n\t\t\t\t<div><strong>Caster Level</strong> {caster_level} | <strong>Charges</strong> {charges}/50</div>\r\n\t\t\t\t<div>{description}</div>\r\n\t\t\t\t<div style={{marginBottom: '1%', paddingBottom: '.8%', borderBottom: 'double'}}></div>\r\n\t\t\t\t<SpellDescription spell={spell} />\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\tconst renderFalseDesc = () => {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<h3>Unknown Mystical Wand</h3>\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<aside>\r\n\t\t\t{known ? renderWand() : renderFalseDesc()}\r\n\t\t</aside>\r\n\t)\r\n\r\n}\r\n\r\nexport default WandDescription\r\n","import React from 'react'\r\nimport Portal from '../portal'\r\nimport { connect } from 'react-redux'\r\nimport { modalAction } from '../utils/action_creator/popups'\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faChevronDown, faChevronUp, faExpand, faCompress } from '@fortawesome/free-solid-svg-icons'\r\n\r\nimport HPChanges from '../components/hp_changes'\r\nimport Armor from '../components/armor_summary'\r\nimport Weapon from '../components/weapon_summary'\r\nimport Points from '../components/modals/points'\r\nimport FeatureUsageOptions from '../components/modals/feature_usage_options'\r\nimport KnownSpellManager from '../components/modals/known_spell_manager'\r\nimport SpellDescription from '../components/spell_description'\r\nimport PreparedSpellManager from '../components/modals/prepared_spell_manager'\r\nimport CharacterChoice from '../components/modals/character_choice'\r\nimport SpontaneousCasting from '../components/modals/spontaneous_casting'\r\nimport KlassSpecialization from '../components/modals/klass_specialization'\r\nimport BonusSpellSlotManager from '../components/modals/bonus_spell_slot_manager'\r\nimport Feat from '../components/modals/feat'\r\nimport CreatureStatBlock from '../components/creature_stat_block'\r\nimport SkillDescription from '../components/skill_description'\r\nimport HarrowDeck from '../components/modals/harrow'\r\nimport ItemDescription from '../components/modals/item_description'\r\nimport CurrencyManager from '../components/modals/currency_manager'\r\nimport Settings from '../components/modals/settings'\r\nimport FamiliarDescription from '../components/modals/familiar_description'\r\nimport PoisonDescription from '../components/modals/poison_description'\r\nimport GenericDescription from '../components/modals/generic_description'\r\nimport AddCharacterEquipment from '../components/modals/add_character_equipment'\r\nimport SummonedCreatureOptions from '../components/modals/summoned_creature_options'\r\nimport MagicItemSummary from '../components/magic_item_summary'\r\nimport DiceRoller from '../components/modals/dice_roller'\r\nimport PotionDescription from '../components/modals/potion_description'\r\nimport ScrollDescription from '../components/modals/scroll_description'\r\nimport WandDescription from '../components/modals/wand_description'\r\n\r\nconst ModalSkeleton = (props) => {\r\n\r\n  const renderComponent = (modal) => {\r\n    let m = modal\r\n    if (modal !== \"hitPoints\"){m = modal.detail}\r\n    switch(m){\r\n      case 'hitPoints':\r\n        return <HPChanges exitModal={exitModal} editModal={props.editModal} clickOut={clickOut} renderEdit={props.renderEdit}/>\r\n      case 'armor':\r\n        return <Armor characterArmor={modal.obj} exitModal={exitModal} clickOut={clickOut}/>\r\n      case 'adjust points':\r\n        return <Points feature={modal.obj} exitModal={exitModal} clickOut={clickOut}/>\r\n\t\t\tcase 'featureUsageOptions':\r\n\t\t\t\treturn <FeatureUsageOptions feature={modal.obj} exitModal={exitModal} clickOut={clickOut} />\r\n\t\t\tcase 'manageKnownSpells':\r\n\t\t\t\treturn <KnownSpellManager spellcastingData={modal.obj} exitModal={exitModal} clickOut={clickOut}/>\r\n\t\t\tcase 'spellDescription':\r\n\t\t\t\treturn <SpellDescription spell={modal.obj} exitModal={exitModal} clickOut={clickOut}/>\r\n\t\t\tcase 'managePreparedSpells':\r\n\t\t\t\treturn <PreparedSpellManager spellcastingData={modal.obj} exitModal={exitModal} clickOut={clickOut}/>\r\n\t\t\tcase 'characterChoice':\r\n\t\t\t\treturn <CharacterChoice choiceObj={modal.obj} exitModal={exitModal} clickOut={clickOut}/>\r\n\t\t\tcase 'spontaneousCasting':\r\n\t\t\t\treturn <SpontaneousCasting feature={modal.obj} exitModal={exitModal} clickOut={clickOut}/>\r\n\t\t\tcase 'klassSpecialization':\r\n\t\t\t\treturn <KlassSpecialization klassFeature={modal.obj} exitModal={exitModal} clickOut={clickOut}/>\r\n\t\t\tcase 'manageBonusSpellSlots':\r\n\t\t\t\treturn <BonusSpellSlotManager spellcastingData={modal.obj} exitModal={exitModal} clickOut={clickOut}/>\r\n\t\t\tcase 'feat':\r\n\t\t\t\treturn <Feat feat={modal.obj} exitModal={exitModal} clickOut={clickOut}/>\r\n\t\t\tcase 'statBlock':\r\n\t\t\t\treturn <CreatureStatBlock creature={modal.obj} exitModal={exitModal} clickOut={clickOut}/>\r\n\t\t\tcase 'skill':\r\n\t\t\t\treturn <SkillDescription skillId={modal.obj} />\r\n\t\t\tcase 'item':\r\n\t\t\t\treturn <ItemDescription item={modal.obj} />\r\n\t\t\tcase 'harrow':\r\n\t\t\t\treturn <HarrowDeck />\r\n\t\t\tcase 'currency':\r\n\t\t\t\treturn <CurrencyManager />\r\n\t\t\tcase 'settings':\r\n\t\t\t\treturn <Settings />\r\n\t\t\tcase 'weapon':\r\n\t\t\t\treturn <Weapon item={modal.obj.weapon} cw={modal.obj} exitModal={exitModal} clickOut={clickOut}/>\r\n\t\t\tcase \"familiar\":\r\n\t\t\t\treturn <FamiliarDescription familiar={modal.obj}/>\r\n\t\t\tcase \"poison\":\r\n\t\t\t\treturn <PoisonDescription item={modal.obj} />\r\n\t\t\tcase \"addEquipment\":\r\n\t\t\t\treturn <AddCharacterEquipment />\r\n\t\t\tcase \"summonedAllies\":\r\n\t\t\t\treturn <SummonedCreatureOptions featureAnimal={modal.obj} />\r\n\t\t\tcase \"magicItem\":\r\n\t\t\t\treturn <MagicItemSummary item={modal.obj.magic_item} cmi={modal.obj}/>\r\n\t\t\tcase \"rollDice\":\r\n\t\t\t\treturn <DiceRoller diceObj={modal.obj}/>\r\n\t\t\tcase \"potion\":\r\n\t\t\t\treturn <PotionDescription cp={modal.obj}/>\r\n\t\t\tcase \"scroll\":\r\n\t\t\t\treturn <ScrollDescription cs={modal.obj}/>\r\n\t\t\tcase \"wand\":\r\n\t\t\t\treturn <WandDescription cw={modal.obj}/>\r\n      default:\r\n\t\t\t\treturn <GenericDescription name={modal.obj.name} description={modal.obj.description}/>\r\n        break\r\n    }\r\n  }\r\n\r\n  const clickOut = (e) => {\r\n    if (e.target.classList[0] === 'page-dimmer'){\r\n      exitModal()\r\n    }\r\n  }\r\n\r\n  const exitModal = (index) => {\r\n    modalAction(null, null, {remove: true, indexToRemove: index})\r\n  }\r\n\t//\r\n  // return (\r\n  //   <Portal>\r\n  //     <div className=\"page-dimmer\" onClick={clickOut}>\r\n  //       <div className=\"edit-form\" name=\"background\">\r\n  //         {renderComponent(props.modal)}\r\n  //       </div>\r\n  //     </div>\r\n  //   </Portal>\r\n  // )\r\n\r\n\t// const [isThisBeingRemoved, setRemoval] = React.useState('slide-in')\r\n\t// const [isThisBeingRemovedTab, setRemovalTab] = React.useState('slide-in-folder-tab')\r\n\t// const [style, setStyle] = React.useState(null)\r\n\tconst [exitStyle, setExitStyle] = React.useState(null)\r\n\tconst [activeIndex, setActiveIndex] = React.useState(0)\r\n\tconst [collapsed, toggleCollapsed] = React.useState(false)\r\n\tconst [big, toggleBig] = React.useState(false)\r\n\tconst sidebarContainer = React.useRef(null)\r\n\r\n\tReact.useEffect(() => {\r\n\t\tif (sidebarContainer.current){\r\n\t\t\tlet tabStyleDuplicate = {...exitStyle}\r\n\t\t\ttabStyleDuplicate.width = `${window.innerWidth / 11}px`\r\n\t\t\ttabStyleDuplicate.bottom = `${window.innerHeight/2 - 4}px`\r\n\t\t\tsetExitStyle(tabStyleDuplicate)\r\n\t\t}\r\n\t}, [sidebarContainer])\r\n\r\n\tReact.useEffect(() => {\r\n\t\t\t// setStyle({width: '98%', height: '50%', bottom: '0px', zIndex: '1', overflowY: \"scroll\"})\r\n\t\t\t// setExitStyle({zIndex: '2', bottom: `${window.innerHeight/2 + 1}px`, width: '20%', textAlign: 'center', borderBottom: 'none', left: '10%'})\r\n\t\t\tlet bottomDenominator = big ? 1.25 : 2\r\n\t\t\tconsole.log(exitStyle)\r\n\t\t\tsetExitStyle({...exitStyle, bottom: `${window.innerHeight/bottomDenominator - 4}px`, width: `${window.innerWidth / 11}px`})\r\n\t}, [big])\r\n\r\n\r\n\r\n\tconst exiting = (e, closingIndex) => {\r\n\t\te.preventDefault()\r\n\t\t// setRemoval('slide-out')\r\n\t\t// setRemovalTab('slide-out-folder-tab')\r\n\t\t// setTimeout(() => setStyle({display: 'none'}), 775)\r\n\t\t// setTimeout(() => setExitStyle({display: 'none'}), 775)\r\n\t\t// setTimeout(() => exitModal(closingIndex), 800)\r\n\t\tlet newActiveIndex\r\n\t\tif (closingIndex === activeIndex){\r\n\t\t\tif (closingIndex === 0 || (props.modal.length - 1 > closingIndex)){\r\n\t\t\t\tnewActiveIndex = closingIndex\r\n\t\t\t} else if (props.modal.length - 1 === closingIndex){\r\n\t\t\t\tnewActiveIndex = closingIndex -1\r\n\t\t\t}\r\n\t\t} else if (closingIndex > activeIndex) {\r\n\t\t\tnewActiveIndex = activeIndex\r\n\t\t} else if (closingIndex < activeIndex){\r\n\t\t\tnewActiveIndex = activeIndex - 1\r\n\t\t}\r\n\t\tconsole.log(\"The index of the tab that is closing is\", closingIndex)\r\n\t\tconsole.log(\"The index you have open is\", activeIndex)\r\n\t\tconsole.log(\"The index that is going to be active is\", newActiveIndex)\r\n\r\n\t\tsetActiveIndex(newActiveIndex)\r\n\t\texitModal(closingIndex)\r\n\t}\r\n\tconst updateActiveIndex = i => {\r\n\t\tif (i !== activeIndex){\r\n\t\t\tsetActiveIndex(i)\r\n\t\t}\r\n\t\tif (collapsed){\r\n\t\t\ttoggleCollapsed(false)\r\n\t\t}\r\n\t}\r\n\r\n\tconst updateToggleButton = i => {\r\n\t\tif (!collapsed){\r\n\t\t\ttoggleCollapsed(true)\r\n\t\t\ttoggleBig(false)\r\n\t\t} else {\r\n\t\t\tupdateActiveIndex(i)\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tconst displayAllTabs = () => {\r\n\t\treturn props.modal.map((m, i) => {\r\n\t\t\tconsole.log(m)\r\n\t\t\tlet name = m.name || m.obj?.name || `Tab ${i+1}`\r\n\t\t\tlet tabStyle = {...exitStyle, backgroundColor: `#${props.settings.bubbleColor}`, borderColor: `#${props.settings.borderColor}`, color: `#${props.settings.textColor}`}\r\n\t\t\tconsole.log(tabStyle)\r\n\t\t\tif (sidebarContainer.current){\r\n\t\t\t\t// tabStyle.left = `${( i * Math.floor(sidebarContainer.current.clientWidth / 5) ) + (sidebarContainer.current.offsetLeft) + parseInt(window.getComputedStyle(sidebarContainer.current).getPropertyValue('padding-left'))}px`\r\n\t\t\t\tlet wiff = window.innerWidth\r\n\t\t\t\ttabStyle.left = `${(i * wiff/11) + (wiff * 0.03)}px`\r\n\t\t\t}\r\n\t\t\tif (i !== activeIndex){\r\n\t\t\t\ttabStyle.filter = \"brightness(85%)\"\r\n\t\t\t\ttabStyle.borderBottom = `2px solid #${props.settings.borderColor}`\r\n\t\t\t}\r\n\t\t\tif (collapsed){\r\n\t\t\t\ttabStyle.bottom = \"0px\"\r\n\t\t\t}\r\n\t\t\tlet cancelButton = <button onClick={(e) => exiting(e, i)}>X</button>\r\n\t\t\tlet toggleButton = <button onClick={() => updateToggleButton(i)}><FontAwesomeIcon icon={collapsed ? faChevronUp : faChevronDown}/></button>\r\n\t\t\tlet embiggenButton = <button onClick={() => toggleBig(!big)}><FontAwesomeIcon icon={big ? faCompress : faExpand}/></button>\r\n\t\t\treturn (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div id=\"sidebar-exit\" style={tabStyle}><span className=\"underline-hover\" onClick={() => updateActiveIndex(i)}>{name}</span><span style={{textAlign: \"center\"}}>{toggleButton}{cancelButton}{(i === activeIndex && !collapsed) && embiggenButton}</span></div>\r\n\t\t\t\t\t{i === activeIndex && renderComponent(m)}\r\n\t\t\t\t</>\r\n\t\t\t)\r\n\t\t})\r\n\t}\r\n\r\n\t// style={{boxShadow: `5px 4px 2px #${props.settings.shadeColor}`, opacity: \"0.95\", backgroundColor: `#${props.settings.bubbleColor}`, borderColor: `#${props.settings.borderColor}`}}\r\n\r\n\tconst collapsedStyle = () => {\r\n\t\tlet style = {backgroundColor: `#${props.settings.bubbleColor}`, borderColor: `#${props.settings.borderColor}`, color: `#${props.settings.textColor}`}\r\n\t\tif (collapsed){\r\n\t\t\tstyle.height = \"0px\"\r\n\t\t\tstyle.padding = \"0px\"\r\n\t\t\tstyle.border = \"0px\"\r\n\t\t\tstyle.margin = \"0px\"\r\n\t\t}\r\n\t\tif (big){\r\n\t\t\tstyle.height = \"80%\"\r\n\t\t\tstyle.width = \"65vw\"\r\n\t\t}\r\n\t\treturn style\r\n\t}\r\n\r\n\treturn (\r\n\t\t<aside id=\"sidebar\" ref={sidebarContainer} style={collapsedStyle()}>\r\n\t\t\t{displayAllTabs()}\r\n\t\t</aside>\r\n\t)\r\n\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    modal: state.modal,\r\n\t\tsettings: state.settings\r\n  }\r\n}\r\n\r\nconst mapDispatchtoProps = dispatch => {\r\n  return {\r\n    dispatch\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps, mapDispatchtoProps)(ModalSkeleton)\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { updateNotificationsAction, updateStoredNotificationsAction } from '../../utils/action_creator/popups'\r\nimport { websocketFeatureDistribution } from '../../utils/distributers/features'\r\n\r\n\r\nconst Notifications = props => {\r\n\r\n\tconst { notifications, storedNotifications } = useSelector(state => state)\r\n\r\n\tconst renderNotifications = () => {\r\n\t\treturn notifications.map((n, i) => {\r\n\t\t\tlet toggleable = null\r\n\t\t\tif (n.toggleable){\r\n\t\t\t\ttoggleable = <><button onClick={() => renderDistribution(n.toggleable, i)}>Accept</button>{!n.toggleable?.options?.acceptOnly && <button onClick={() => storeNotification(n.toggleable, i)}>Reject</button>}</>\r\n\t\t\t}\r\n\t\t\treturn (\r\n\t\t\t\t<li className=\"popup-notification\">\r\n\t\t\t\t\t<button className=\"popup-notification-close-button\" onClick={() => renderExit(i)}>x</button>\r\n\t\t\t\t\t{n.message}\r\n\t\t\t\t\t{toggleable}\r\n\t\t\t\t</li>\r\n\t\t\t)\r\n\t\t})\r\n\t}\r\n\r\n\tconst renderExit = (index) => {\r\n\t\tlet updatedNotifications = [...notifications]\r\n\t\tupdatedNotifications.splice(index, 1)\r\n\t\tupdateNotificationsAction(updatedNotifications)\r\n\t}\r\n\r\n\tconst storeNotification = (data, index) => {\r\n\t\tlet updateStoredNotifications = [...storedNotifications]\r\n\t\tupdateStoredNotifications.push(data)\r\n\t\tupdateStoredNotificationsAction(updateStoredNotifications)\r\n\t\trenderExit(index)\r\n\t}\r\n\r\n\tconst renderDistribution = (data, index) => {\r\n\t\tconst { payload, source, options } = data\r\n\t\twebsocketFeatureDistribution(payload, source, options)\r\n\t\trenderExit(index)\r\n\t}\r\n\r\n\r\n\treturn (\r\n\t\t<aside id=\"popup-notifications-container\">\r\n\t\t\t{renderNotifications()}\r\n\t\t</aside>\r\n\t)\r\n\r\n}\r\nexport default Notifications\r\n","import React from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faSortDown } from '@fortawesome/free-solid-svg-icons'\r\nimport { faCircle } from '@fortawesome/free-solid-svg-icons'\r\n\r\n\r\nconst Characters = props => {\r\n\r\n  const [show, setShow] = React.useState(false);\r\n\r\n  const renderClasses = (character) => {\r\n    // let klasses = {}\r\n    // character.klasses.forEach(klass => {\r\n    //   if (klasses[klass.name]) {\r\n    //     klasses[klass.name]++\r\n    //   } else {\r\n    //     klasses[klass.name] = 1\r\n    //   }\r\n    // })\r\n    // let classesLevels = []\r\n    // Object.entries(klasses).forEach(klass => {\r\n    //   classesLevels.push(`${klass[0]} ${klass[1]}`)\r\n    // })\r\n    let mappedClasses = character.uniq_klasses.map(kl => {\r\n      const level = character.class_obj.find(clo => clo.klass_id === kl.id).level\r\n      return `${kl.name} ${level}`\r\n    })\r\n    return mappedClasses.join(\", \")\r\n  }\r\n\r\n  const renderCharacters = () => {\r\n    const sortedCharacters = props.characters.sort((a,b) => a.name > b.name ? 1 : -1)\r\n    if (localStorage.computer === 'true'){\r\n      return sortedCharacters.map(char => {\r\n        return (\r\n          <div className='card' onClick={() => props.history.push(`/characters/${char.id}`)} key={char.id} >\r\n          <span className='card-char'>\r\n          <div style={{padding: '.5em', lineHeight: '1.2', fontSize: '1.5em'}}>{char.name}</div>\r\n          <div style={{padding: '.5em'}}>{char.race.name}</div>\r\n          <div style={{padding: '.5em', lineHeight: '1.2'}}>{renderClasses(char)}</div>\r\n          </span>\r\n          <div className=\"fade\"></div>\r\n\r\n          </div>\r\n        )\r\n      })\r\n    } else {\r\n      if (sortedCharacters.length > 4){\r\n        if (show){\r\n          return (\r\n            <>\r\n              <div onClick={() => setShow(!show)}>Characters <FontAwesomeIcon icon={faCircle}/></div>\r\n              {sortedCharacters.map(ch => <div className='mobile-character-button' onClick={() => props.history.push(`/characters/${ch.id}`)} key={ch.id * 3 - 1 }><strong>{ch.name}</strong> - {ch.race.name} {renderClasses(ch)}</div>)}\r\n            </>\r\n          )\r\n        } else {\r\n          return <div onClick={() => setShow(!show)}>Characters <FontAwesomeIcon icon={faSortDown}/></div>\r\n        }\r\n      } else {\r\n        // UNTESTED\r\n        return (\r\n          <>\r\n            {sortedCharacters.map(ch => <div className='mobile-character-button' onClick={() => props.history.push(`/characters/${ch.id}`)} key={ch.id * 3 - 1 }><strong>{ch.name}</strong> - {ch.race.name} {renderClasses(ch)}</div>)}\r\n          </>\r\n        )\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {props.currentUser && renderCharacters()}\r\n    </React.Fragment>\r\n  )\r\n\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(mapStatetoProps)(Characters))\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport localhost from '../../localhost'\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faPencilAlt, faTrashAlt } from '@fortawesome/free-solid-svg-icons'\r\n\r\n\r\nclass Skillset extends React.Component {\r\n\r\n  state = {\r\n    skillsets: {},\r\n    skills: {},\r\n    chosenSkills: [],\r\n    addSkillset: false,\r\n    name: \"\",\r\n    activeSkillset: 0,\r\n    editSkillset: false\r\n  }\r\n\r\n  componentDidMount() {\r\n    (this.state.activeSkillset !== this.props.currentUser.skillset_id) && this.setState({activeSkillset: this.props.currentUser.skillset_id})\r\n    fetch(`${localhost}/api/v1/skillsets`)\r\n    .then(r => r.json())\r\n    .then(data => this.setState({skillsets: data}), this.fetchSkills())\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    (this.state.activeSkillset !== this.props.currentUser.skillset_id) && this.setState({activeSkillset: this.props.currentUser.skillset_id})\r\n  }\r\n\r\n  renderSkillsetSubmit = (e) => {\r\n    e.preventDefault()\r\n    if (!this.state.editSkillset){\r\n      fetch(`${localhost}/api/v1/skillsets`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          name: this.state.name,\r\n          chosen_skills: this.state.chosenSkills\r\n        })\r\n      })\r\n      .then(r => r.json())\r\n      .then(data => {\r\n        if (!data.error){\r\n          this.setState({name: \"\", chosenSkills: [], addSkillset: false})\r\n        } else {\r\n          console.log(data.error)\r\n        }\r\n      })\r\n    } else {\r\n      fetch(`${localhost}/api/v1/skillsets/${this.state.activeSkillset}`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          name: this.state.name,\r\n          chosen_skills: this.state.chosenSkills\r\n        })\r\n      })\r\n      .then(r => r.json())\r\n      .then(data => {\r\n        if (!data.error){\r\n          const updated_obj = []\r\n          this.state.skillsets.forEach (skillset => {\r\n            if (skillset.id !== data.skillset.id){\r\n              updated_obj.push(skillset)\r\n            } else {\r\n              updated_obj.push(data.skillset)\r\n            }\r\n          })\r\n          this.setState({name: \"\", chosenSkills: [], addSkillset: false, editSkillset: false, skillsets: updated_obj}, this.fetchSkillsets())\r\n        } else {\r\n          console.log(data.error)\r\n        }\r\n      })\r\n\r\n    }\r\n  }\r\n\r\n  fetchSkills = () => {\r\n    fetch(`${localhost}/api/v1/skills`)\r\n    .then(r => r.json())\r\n    .then(data => this.setState({skills: data}))\r\n  }\r\n\r\n  fetchSkillsets = () => {\r\n    fetch(`${localhost}/api/v1/skillsets`)\r\n    .then(r => r.json())\r\n    .then(data => this.setState({skillsets: data}))\r\n  }\r\n\r\n  renderAddSkillset = () => {\r\n    this.setState({addSkillset: true})\r\n  }\r\n\r\n  renderChange = (e) => {\r\n    this.setState({[e.target.name]: e.target.value})\r\n  }\r\n\r\n  renderSkillChange = (id) => {\r\n    if (this.state.chosenSkills.includes(id)){\r\n      const filtered = this.state.chosenSkills.filter(skill => skill !== id)\r\n      this.setState({chosenSkills: filtered}, console.log(\"chosenSkills removed\", this.state.chosenSkills))\r\n    } else {\r\n      this.setState({chosenSkills: [...this.state.chosenSkills, id]}, console.log(\"chosenSkills added\", this.state.chosenSkills))\r\n    }\r\n  }\r\n\r\n  selectedSkill = (id) => {\r\n    return (this.state.chosenSkills.includes(id)) ? true : false\r\n  }\r\n\r\n  renderSkills = () => {\r\n    return this.state.skills.map(skill => {\r\n      return (<div>\r\n      <label>\r\n        {skill.name}:\r\n        <input type=\"checkbox\" name={skill.name} key={skill.id} checked={this.selectedSkill(skill.id)} onChange={() => this.renderSkillChange(skill.id)}/>\r\n      </label>\r\n      </div>\r\n    )\r\n    })\r\n  }\r\n\r\n  renderEditSkillset = () => {\r\n    const skillset = this.state.skillsets.find(el => el.id === this.state.activeSkillset)\r\n    const skillIdArray = skillset.skillset_skills.map(sss => sss.skill_id)\r\n    this.setState({addSkillset: true, chosenSkills: skillIdArray, name: skillset.name, editSkillset: true})\r\n  }\r\n\r\n  renderDelete = () => {\r\n    fetch(`${localhost}/api/v1/skillsets/${this.state.activeSkillset}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        id: this.state.activeSkillset      })\r\n    })\r\n    .then(r => r.json())\r\n    .then(data => {\r\n      if (!data.error){\r\n        console.log(data)\r\n        let updatedObj = this.state.skillsets.filter(ss => {\r\n          return ss.id !== data\r\n        })\r\n        this.setState({name: \"\", chosenSkills: [], addSkillset: false, editSkillset: false, skillsets: updatedObj}, this.fetchSkillsets())\r\n      } else {\r\n        console.log(data.error)\r\n      }\r\n    })\r\n  }\r\n\r\n  skillsetForm = () => {\r\n    return (\r\n      <span>\r\n      <label>\r\n        Skillset Name:\r\n        <input type=\"text\" name=\"name\" value={this.state.name} onChange={this.renderChange}/>\r\n      </label>\r\n        {this.renderSkills()}\r\n        <span>\r\n          <button onClick={this.renderSkillsetSubmit}>{!this.state.editSkillset ? \"Create\" : \"Edit\"}</button>\r\n        </span>\r\n        <span>\r\n          <button onClick={() => this.setState({addSkillset: false, chosenSkills: [], editSkillset: false})}>X</button>\r\n          {(this.state.editSkillset && this.props.admin) && <span onClick={this.renderDelete}><FontAwesomeIcon icon={faTrashAlt} /></span>}\r\n        </span>\r\n      </span>\r\n    )\r\n  }\r\n\r\n  renderActiveSkillsetChange = (e) =>{\r\n    const choice = e.target.value\r\n    fetch(`${localhost}/api/v1/users/active_skillset`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        id: this.props.currentUser.id,\r\n        active_skillset: choice\r\n      })\r\n    })\r\n    .then(r => r.json())\r\n    .then(data => {\r\n      if (!data.error){\r\n        console.log(data)\r\n\r\n        this.props.dispatch({type: 'SIGNIN', user: data.user, admin: data.user.admin })\r\n      } else {\r\n        console.log(data.error)\r\n      }\r\n    })\r\n  }\r\n\r\n  renderActiveSkillset = () => {\r\n    return (\r\n      <div>\r\n        <label>\r\n          Active Skillset:\r\n          <select name=\"activeSkillset\" value={this.state.activeSkillset} onChange={this.renderActiveSkillsetChange}>\r\n            {this.state.skillsets.map(ss => <option value={ss.id} key={ss.id}>{ss.name}</option>)}\r\n          </select>\r\n        </label>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  render(){\r\n    // console.log(\"skillset data\", this.state)\r\n    return(\r\n      <span>\r\n        {(!this.state.addSkillset && this.props.admin) && <button onClick={this.renderAddSkillset}>+</button>}\r\n        {this.state.addSkillset && this.skillsetForm()}\r\n        <div style={{display: \"inline-flex\"}}>\r\n          {(!!this.state.skillsets.keys && !this.state.addSkillset) && this.renderActiveSkillset()}\r\n          {(!this.state.addSkillset && this.props.admin) && <span        onClick={this.renderEditSkillset}><FontAwesomeIcon icon={faPencilAlt} /></span>}\r\n        </div>\r\n      </span>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Skillset)\r\n","import React from 'react'\r\n\r\nimport Skillset from '../components/settings/skillset'\r\n\r\nclass Settings extends React.Component {\r\n\r\n  render(){\r\n\r\n    return(\r\n      <span>\r\n        <Skillset />\r\n      </span>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Settings\r\n","import React from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faSortDown } from '@fortawesome/free-solid-svg-icons'\r\nimport { faCircle } from '@fortawesome/free-solid-svg-icons'\r\n\r\n\r\nconst Campaigns = props => {\r\n\r\n  const [show, setShow] = React.useState(false);\r\n\r\n  const campaigns = () => {\r\n    if (localStorage.computer === 'true'){\r\n      return props.currentUser.campaigns.map(camp => {\r\n        return (\r\n          <div className='card' onClick={() => props.history.push(`/campaigns/${camp.id}`)} key={camp.id} >\r\n          <span className='card-char'>\r\n          <div style={{padding: '.5em', lineHeight: '1.2', fontSize: '1.5em'}}>{camp.name}</div>\r\n          <div style={{padding: '.5em', lineHeight: '1.2'}}>Campaign</div>\r\n          </span>\r\n          <div className=\"fade\"></div>\r\n          </div>\r\n        )\r\n      })\r\n    } else {\r\n      if (props.currentUser.campaigns.length > 4){\r\n        if (show){\r\n          return (\r\n            <>\r\n              <div onClick={() => setShow(!show)}>Characters <FontAwesomeIcon icon={faCircle}/></div>\r\n              {props.currentUser.campaigns.map(camp => <div className='mobile-character-button' onClick={() => props.history.push(`/campaigns/${camp.id}`)} key={camp.id * 3 - 1 }><strong>{camp.name}</strong></div>)}\r\n            </>\r\n          )\r\n        } else {\r\n          return <div onClick={() => setShow(!show)}>Characters <FontAwesomeIcon icon={faSortDown}/></div>\r\n        }\r\n      } else {\r\n        return (\r\n          <>\r\n            {props.currentUser.campaigns.map(camp => <div className='mobile-character-button' onClick={() => props.history.push(`/campaigns/${camp.id}`)} key={camp.id * 3 - 1 }><strong>{camp.name}</strong></div>)}\r\n          </>\r\n        )\r\n      }\r\n    }\r\n  }\r\n\r\n    return (\r\n      <React.Fragment>\r\n        {!!props.currentUser && campaigns()}\r\n      </React.Fragment>\r\n    )\r\n\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(mapStatetoProps)(Campaigns))\r\n","import React from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport localhost from \"../localhost\";\r\n\r\nimport Characters from \"../components/characters\";\r\nimport Settings from \"./settings\";\r\nimport Campaigns from \"../components/campaigns\";\r\nimport {\r\n  getLocalStorageFromCookieToken,\r\n  prepareCookie\r\n} from \"../utils/cookies\";\r\n\r\nconst Home = props => {\r\n  const [characters, updateCharacters] = React.useState([]);\r\n\r\n  React.useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (props.currentUser) {\r\n      fetch(`${localhost}/api/v1/characters`, {\r\n        headers: {\r\n          User: props.currentUser.id\r\n        }\r\n      })\r\n        .then(r => r.json())\r\n        .then(data => {\r\n          if (!getLocalStorageFromCookieToken(token)) {\r\n            prepareCookie(token, data);\r\n          }\r\n          updateCharacters(data);\r\n        });\r\n    }\r\n    let lsCharacters = getLocalStorageFromCookieToken(token);\r\n    if (lsCharacters) {\r\n      updateCharacters(lsCharacters);\r\n    }\r\n  }, [props.currentUser]);\r\n\r\n  // COMMENTED OUT FOR TESTING PURPOSES\r\n  const renderSignUp = () => {\r\n    //   if (!props.currentUser){\r\n    //     props.history.push(\"/signup\")\r\n    //   }\r\n  };\r\n  // COMMENTED OUT FOR TESTING PURPOSES\r\n\r\n  renderSignUp();\r\n  let className =\r\n    localStorage.computer === \"true\" ? \"container-4\" : \"phone-container\";\r\n\r\n  return (\r\n    <main id=\"user-home\" className=\"background\">\r\n      <section id=\"user-characters\">\r\n        <button\r\n          className=\"home-btn-create-links\"\r\n          onClick={() => props.history.push(\"/creation\")}\r\n        >\r\n          Create Character\r\n        </button>\r\n        <Characters characters={characters} />\r\n      </section>\r\n      <section id=\"user-campaigns\">\r\n        <button\r\n          className=\"home-btn-create-links\"\r\n          onClick={() => props.history.push(\"/campaigns/new\")}\r\n        >\r\n          Create Campaign\r\n        </button>\r\n        <Campaigns />\r\n      </section>\r\n      <br />\r\n      <br />\r\n      <div className={className} style={{ margin: \"0 2em\" }}>\r\n        <Settings />\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nconst mapStatetoProps = state => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin\r\n  };\r\n};\r\n\r\nexport default withRouter(connect(mapStatetoProps)(Home));\r\n","import React from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\n// import _ from 'lodash'\r\nimport { connect } from 'react-redux'\r\nimport localhost from '../localhost'\r\n\r\nconst Classes = props => {\r\n\r\n  const renderClasses = () => {\r\n    const sortedClasses = props.classes.sort((a,b) => a.name.localeCompare(b.name))\r\n    return sortedClasses.map(klass => {return (\r\n      <div className='card' onClick={() => props.history.push(`/classes/${klass.name}`)} key={klass.id} >\r\n        <div className='fill'></div>\r\n        <span className='card-content'>\r\n        \t{klass.name}\r\n        </span>\r\n        <div className=\"fade\"></div>\r\n        <img className='card-img' alt={klass.name} src={klass.img_url}></img>\r\n      </div>\r\n    )})\r\n  }\r\n\r\n\r\n  // <button onClick={this.renderNewClass}>Create New Class</button>\r\n  return (\r\n    <div>\r\n      <div className='container-4'>\r\n        {renderClasses()}\r\n        {props.admin ? <div className='card' onClick={() => props.history.push('/classes-form')}><span className='card-content'>Create a new Class!</span></div> : null}\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n\t\tclasses: state.classes\r\n  }\r\n}\r\n\r\n\r\nexport default withRouter(connect(mapStateToProps)(Classes))\r\n","import React from 'react'\r\n// import _ from 'lodash'\r\nimport { connect } from 'react-redux'\r\nimport localhost from '../localhost'\r\n\r\nconst Races = props => {\r\n\r\n  const renderRaces = () => {\r\n    const sortedRaces = props.races.sort((a,b) => a.name.localeCompare(b.name))\r\n    return sortedRaces.map(race => {return (\r\n      <div className='card' onClick={() => props.history.push(`/ancestries/${race.name}`)} key={race.id} >\r\n        <div className='fill'></div>\r\n        <span className='card-content'>\r\n        \t{race.name}\r\n        </span>\r\n        <div className=\"fade\"></div>\r\n        <img className='card-img' alt={race.name} src={race.img_url}></img>\r\n      </div>\r\n    )})\r\n  }\r\n\r\n\r\n  return (\r\n    <div className='container-4'>\r\n      {renderRaces()}\r\n      {props.admin ? <div className='card' onClick={() => props.history.push('/ancestries-form')}><span className='card-content'>Create a Fantasy Ancestry!</span></div> : null}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n\t\traces: state.races\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Races)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport localhost from '../localhost'\r\n\r\nclass Skills extends React.Component {\r\n\r\n  state = {\r\n    skills: {}\r\n  }\r\n\r\n  componentDidMount() {\r\n    fetch(`${localhost}/api/v1/skills`)\r\n    .then(r => r.json())\r\n    .then(data => {\r\n      this.setState({skills: data})\r\n    })\r\n  }\r\n\r\n  renderSkills = () => {\r\n    const sortedSkills = this.state.skills.sort((a,b) => a.id - b.id)\r\n    return sortedSkills.map(skill => {return (\r\n      <div className='card' onClick={() => this.props.history.push(`/skills/${skill.name}`)} key={skill.id} >\r\n        <div className='fill'></div>\r\n        <span className='card-content'>\r\n        {skill.name}\r\n        </span>\r\n        <div className=\"fade\"></div>\r\n        <img className='card-img' src={skill.img_url} alt={skill.name}>\r\n        </img>\r\n      </div>\r\n    )})\r\n  }\r\n\r\n\r\n  // <button onClick={this.renderNewClass}>Create New Class</button>\r\n  render() {\r\n    return (\r\n      <div className='container-4'>\r\n        {this.state.skills[0] ? this.renderSkills() : null}\r\n        {this.props.admin ? <div className='card' onClick={() => this.props.history.push('/skills-form')}><span className='card-content'>Create a New Skill!</span></div> : null}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\n  const mapStateToProps = (state) => {\r\n    return {\r\n      currentUser: state.currentUser,\r\n      admin: state.admin\r\n    }\r\n  }\r\n\r\n  export default connect(mapStateToProps)(Skills)\r\n","import React from 'react'\r\n\r\nconst SpellCard = props => {\r\n  const { spell } = props\r\n\r\n  const truncate = (string) => {\r\n    return string.substring(0, 3)\r\n  }\r\n\r\n  const renderAction = (action) => {\r\n    switch(action){\r\n      case \"Standard Action\":\r\n        return \"standard\"\r\n      case \"Ten Minutes\":\r\n        return \"long\"\r\n      case \"One Hour\":\r\n        return \"long\"\r\n      case \"Eight Hours\":\r\n        return \"long\"\r\n      case \"One Minute\":\r\n        return \"long\"\r\n      case \"Immediate Action\":\r\n        return \"immediate\"\r\n      case \"Full-Round Action\":\r\n        return \"full\"\r\n      default:\r\n        return \"none\"\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className='spell-card' onClick={() => props.renderEdit(spell.id)}>\r\n      <span><strong>{spell.name}</strong></span>\r\n      <span>{truncate(spell.magic_school.name)}</span>\r\n      <span className={renderAction(spell.action.name)} style={{textAlign: 'center'}}>{spell.action.name}</span>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SpellCard\r\n","import React from 'react'\r\n\r\nimport SpellCard from '../components/spell_card'\r\n\r\nclass SpellsContainer extends React.Component{\r\n\r\n  renderSpells = () => {\r\n    return this.props.spells.map(sp => <SpellCard spell={sp} renderEdit={this.props.renderEdit}/>)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div id='all-spells'>\r\n        {this.renderSpells()}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nexport default SpellsContainer\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport localhost from '../localhost'\r\n\r\nimport SpellsContainer from './spells_container'\r\nimport SpellDescription from '../components/spell_description'\r\n\r\nclass Spells extends React.Component {\r\n\r\n  state = {\r\n    activeSpell: null,\r\n    alphabetizedSpells: []\r\n  }\r\n\r\n  componentDidMount(){\r\n    if(!this.props.spells.length){\r\n      fetch(`${localhost}/api/v1/spells`)\r\n      .then(r => r.json())\r\n      .then(data => {\r\n        this.props.dispatch({type: 'ALL SPELLS', spells: data })\r\n        this.alphabetize(data)\r\n      })\r\n    }\r\n  }\r\n\r\n  alphabetize = (spells) => {\r\n    let sortedSpells = [...spells].sort((sp1, sp2) => {\r\n      if (sp1.name > sp2.name){\r\n        return 1\r\n      } else if (sp1.name < sp2.name){\r\n        return -1\r\n      } else {\r\n        return 0\r\n      }\r\n    })\r\n    this.setState({alphabetizedSpells: sortedSpells})\r\n  }\r\n\r\n  renderSpells = () => {\r\n    return this.props.spells.map(sp => {\r\n      return <p>{sp.name}</p>\r\n    })\r\n  }\r\n\r\n  oneSpell = (id) => {\r\n    return this.props.spells.find(spell => spell.id === id)\r\n  }\r\n\r\n  renderEdit = (id) => {\r\n    if (this.state.activeSpell !== id){\r\n      this.setState({activeSpell: id})\r\n    } else {\r\n      this.setState({activeSpell: null})\r\n    }\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div id='spells-container'>\r\n        <span style={{height: \"90vh\", overflowY: \"scroll\"}}>\r\n          <SpellsContainer spells={this.state.alphabetizedSpells} renderEdit={this.renderEdit}/>\r\n        </span>\r\n        <span>\r\n          { this.state.activeSpell && <SpellDescription spell={this.oneSpell(this.state.activeSpell)}/>}\r\n        </span>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n    spells: state.spells\r\n  }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(Spells)\r\n","\r\nexport const compositeKlassFeatures = (klassFeatures, chosenArchetypes) => {\r\n\tlet features = []\r\n\tlet newFeatures = []\r\n\r\n\tklassFeatures.forEach(kf => {\r\n\t\tlet klassFeatureId = kf.id\r\n\t\tlet isFeatureReplaced = false\r\n\r\n\t\tchosenArchetypes.forEach(arch => {\r\n\t\t\tarch.klass_archetype_features.forEach(archF => {\r\n\t\t\t\tarchF.replaces_klass_features.forEach(replaceKF => {\r\n\t\t\t\t\tif (replaceKF.klass_feature_id === klassFeatureId){\r\n\t\t\t\t\t\tif (kf.has_klass_feature_options) {\r\n\t\t\t\t\t\t\t if (shouldOptionsKlassFeatureBeRemoved(kf, chosenArchetypes)){\r\n\t\t\t\t\t\t\t\t isFeatureReplaced = true\r\n\t\t\t\t\t\t\t }\r\n\t\t\t\t\t\t\t features.push(archF)\r\n\t\t\t\t\t\t} else if (replaceKF.replace_or_alter === \"replace\"){\r\n\t\t\t\t\t\t\tisFeatureReplaced = true\r\n\t\t\t\t\t\t\tfeatures.push(archF)\r\n\t\t\t\t\t\t} else if (replaceKF.replace_or_alter === \"alter\"){\r\n\t\t\t\t\t\t\tfeatures.push(archF)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t})\r\n\t\t// if (viewedArchetype.id){\r\n\t\t// \tviewedArchetype.klass_archetype_features.forEach(archF => {\r\n\t\t// \t\tarchF.replaces_klass_features.forEach(replaceKF => {\r\n\t\t// \t\t\tif (replaceKF.klass_feature_id === klassFeatureId && !isFeatureReplaced){\r\n\t\t// \t\t\t\tfeatures.push({...kf, color: \"darkgrey\"})\r\n\t\t// \t\t\t\tfeatures.push({...archF, color: \"forestgreen\"})\r\n\t\t// \t\t\t\tisFeatureReplaced = true\r\n\t\t// \t\t\t}\r\n\t\t// \t\t})\r\n\t\t// \t})\r\n\t\t// }\r\n\r\n\t\tif (!isFeatureReplaced){\r\n\t\t\tfeatures.push(kf)\r\n\t\t}\r\n\t})\r\n\r\n\tchosenArchetypes.forEach(arch => {\r\n\t\tarch.klass_archetype_features.forEach(archF => {\r\n\t\t\tarchF.replaces_klass_features.forEach(replaceKF => {\r\n\t\t\t\tif (!replaceKF.klass_feature_id){\r\n\t\t\t\t\tfeatures.push(archF)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t})\r\n\r\n\r\n\r\n\treturn features\r\n}\r\n\r\nexport const sortCompositeKlassFeatures = (klassFeatures, chosenArchetypes) => {\r\n\tlet features = compositeKlassFeatures(klassFeatures, chosenArchetypes)\r\n\r\n\tconst sortedFeatures = features.sort((a, b) => {\r\n\t\tlet lowestA = 20\r\n\t\tlet aLevels = a.feature_levels || a.klass_archetype_feature_levels\r\n\t\taLevels.forEach(fl => {\r\n\t\t\tif (fl.level < lowestA){lowestA = fl.level}\r\n\t\t})\r\n\r\n\t\tlet lowestB = 20\r\n\t\tlet bLevels = b.feature_levels || b.klass_archetype_feature_levels\r\n\t\tbLevels.forEach(fl => {\r\n\t\t\tif (fl.level < lowestB){lowestB = fl.level}\r\n\t\t})\r\n\t\tif (lowestA === lowestB) {\r\n\t\t\tif (a.klass_id && b.klass_id){return 0}\r\n\t\t\telse if (a.klass_id){return -1}\r\n\t\t\telse if (b.klass_id){return 1}\r\n\t\t}\r\n\t\treturn lowestA - lowestB\r\n\t})\r\n\r\n\treturn sortedFeatures\r\n}\r\n\r\nconst shouldOptionsKlassFeatureBeRemoved = (klassFeature, chosenArchetypes) => {\r\n\tlet klassFeatureLevels = klassFeature.feature_levels.map(fl => fl.level)\r\n\r\n\tchosenArchetypes.forEach(arch => {\r\n\t\tarch.klass_archetype_features.forEach(archF => {\r\n\t\t\tarchF.replaces_klass_features.forEach(replaceKF => {\r\n\t\t\t\tif (replaceKF.klass_feature_id === klassFeature.id){\r\n\t\t\t\t\tif (replaceKF.affects_specific_level){\r\n\t\t\t\t\t\tlet i = klassFeatureLevels.indexOf(replaceKF.affects_specific_level)\r\n\t\t\t\t\t\tklassFeatureLevels.splice(i, 1)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t})\r\n\r\n\treturn !klassFeatureLevels.length\r\n}\r\n\r\nexport const tableDescriptionsByLevel = (klassFeatures, viewedArchetype, chosenArchetypes) => {\r\n\tlet obj = {}\r\n\r\n\tchosenArchetypes.forEach(arch => {\r\n\t\tif (arch.id === viewedArchetype.id){\r\n\t\t\tviewedArchetype = {}\r\n\t\t}\r\n\t})\r\n\r\n\tklassFeatures.forEach(kf => {\r\n\t\tkf.feature_levels.forEach(fl => {\r\n\t\t\tif (!(fl.table_description === \"\" || fl.table_description === \"none\")){\r\n\r\n\t\t\t\tif (obj[fl.level] === undefined){obj[fl.level] = []}\r\n\r\n\t\t\t\tlet slug = kf.name.toLowerCase().split(\" \").join(\"-\")\r\n\t\t\t\tobj[fl.level].push({klassFeatureId: kf.id, slug, tableDescription: fl.table_description, color: \"black\"})\r\n\r\n\t\t\t}\r\n\t\t})\r\n\t})\r\n\r\n\tchosenArchetypes.forEach(arch => {\r\n\t\tarch.klass_archetype_features.forEach(archF => {\r\n\t\t\tarchF.klass_archetype_feature_levels.forEach(archFL => {\r\n\t\t\t\tif (!(archFL.table_description === \"\" || archFL.table_description === \"none\")){\r\n\r\n\t\t\t\t\tif (obj[archFL.level] === undefined){obj[archFL.level] = []}\r\n\r\n\r\n\t\t\t\t\t\tarchF.replaces_klass_features.forEach(replaceKF => {\r\n\t\t\t\t\t\t\tif (replaceKF.replace_or_alter === \"replace\"){\r\n\t\t\t\t\t\t\t\tif (replaceKF.klass_feature_id){\r\n\r\n\t\t\t\t\t\t\t\t\tadjustExistingTableDescription(replaceKF.klass_feature_id, obj, \"remove\", replaceKF.affects_specific_level)\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if (replaceKF.replace_or_alter === \"alter\"){\r\n\t\t\t\t\t\t\t\tadjustExistingTableDescription(replaceKF.klass_feature_id, obj, \"alter\", replaceKF.affects_specific_level)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\tlet slug = archF.name.toLowerCase().split(\" \").join(\"-\")\r\n\t\t\t\t\t\tobj[archFL.level].push({slug, tableDescription: archFL.table_description, color: \"darkblue\"})\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t})\r\n\t})\r\n\r\n\tif (viewedArchetype.id){\r\n\t\tviewedArchetype.klass_archetype_features.forEach(archF => {\r\n\t\t\tarchF.klass_archetype_feature_levels.forEach(archFL => {\r\n\t\t\t\tif (!(archFL.table_description === \"\" || archFL.table_description === \"none\")){\r\n\r\n\t\t\t\t\tif (obj[archFL.level] === undefined){obj[archFL.level] = []}\r\n\r\n\t\t\t\t\tlet featureWasFoundAndAdjusted = false\r\n\r\n\t\t\t\t\tarchF.replaces_klass_features.forEach(replaceKF => {\r\n\t\t\t\t\t\t\tif (replaceKF.klass_feature_id){\r\n\r\n\t\t\t\t\t\t\t\tfeatureWasFoundAndAdjusted = adjustExistingTableDescription(replaceKF.klass_feature_id, obj, \"strikethrough\", replaceKF.affects_specific_level)\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfeatureWasFoundAndAdjusted = true\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\tlet slug = archF.name.toLowerCase().split(\" \").join(\"-\")\r\n\t\t\t\t\t\tlet color = featureWasFoundAndAdjusted ? \"forestgreen\" : \"red\"\r\n\t\t\t\t\t\tobj[archFL.level].push({slug, tableDescription: archFL.table_description, color})\r\n\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\treturn obj\r\n}\r\n\r\nconst adjustExistingTableDescription = (klassFeatureId, obj, action, specificLevel) => {\r\n\r\n\tlet adjustmentMade = false\r\n\r\n\tfor (let i = 1; i < 21; i++) {\r\n\t\tif (obj[i] === undefined){return}\r\n\r\n\t\tlet j = obj[i].findIndex(td => td.klassFeatureId === klassFeatureId)\r\n\t\tif (j > -1){\r\n\t\t\tif (specificLevel === i || specificLevel === null){\r\n\r\n\t\t\t\tif (action === \"remove\"){\r\n\t\t\t\t\tobj[i].splice(j, 1)\r\n\t\t\t\t} else if (action === \"strikethrough\" && !obj[i][j].altered){\r\n\t\t\t\t\tobj[i][j] = {...obj[i][j], strikethrough: true, color: \"darkgrey\"}\r\n\t\t\t\t\tadjustmentMade = true\r\n\t\t\t\t} else if (action === \"alter\"){\r\n\t\t\t\t\tobj[i][j] = {...obj[i][j], altered: true}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn adjustmentMade\r\n}\r\n\r\nexport const tableDescriptionPerLevel = (lvl, klassFeatures, viewedArchetype, chosenArchetypes) => {\r\n\tlet features = tableDescriptionsByLevel(klassFeatures, viewedArchetype, chosenArchetypes)\r\n\r\n\tlet descriptions = []\r\n\r\n\tfeatures.forEach(f => {\r\n\t\tlet fls = f.feature_levels || f.klass_archetype_feature_levels\r\n\t\tlet strikethrough = false;\r\n\t\tif (f.color === \"darkgrey\"){\r\n\t\t\tstrikethrough = true\r\n\t\t}\r\n\r\n\t\tfls.forEach(fl => {\r\n\t\t\tif (fl.level === lvl && (fl.table_description !== \"none\" && fl.table_description !== \"\")){\r\n\t\t\t\tlet slug = f.name.toLowerCase().split(\" \").join(\"-\")\r\n\r\n\t\t\t\tdescriptions.push({slug, tableDescription: fl.table_description, color: f.color, strikethrough})\r\n\t\t\t}\r\n\t\t})\r\n\t})\r\n\r\n\treturn descriptions\r\n}\r\n\r\nexport const archetypeClassSkillNodes = (chosenArchetypes) => {\r\n\tlet arr = []\r\n\r\n\tchosenArchetypes.forEach(arch => {\r\n\t\tarch.klass_archetype_features.forEach(archF => {\r\n\t\t\tarchF.replaces_klass_features.forEach(replaceKF => {\r\n\t\t\t\tif (replaceKF.alters_class_skills){\r\n\t\t\t\t\tarr.push(archF.description)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t})\r\n\r\n\treturn arr\r\n}\r\n\r\nexport const doesKlassFeatureHaveOptions = (klass) => {\r\n\tlet id = 0\r\n\r\n\tklass.klass_features.forEach(kf => {\r\n\t\tif (kf.has_klass_feature_options){\r\n\t\t\tid = kf.id\r\n\t\t}\r\n\t})\r\n\r\n\treturn id\r\n}\r\n","import React from 'react'\r\nimport _ from 'lodash'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { archetypeClassSkillNodes } from '../../utils/calculations/class'\r\n\r\n\r\nclass Introduction extends React.Component {\r\n\r\n\tstate = {\r\n\t\tshowDetails: false\r\n\t}\r\n\r\n  renderDescription = () => {\r\n    if (this.props.klass.description){\r\n\t\t\tif (this.props.options?.displayDescription === false && !this.state.showDetails){return <p onClick={() => this.setState({showDetails: true})}>Show Details</p>}\r\n\r\n      let desc = this.props.klass.description\r\n\t\t\tthis.props.chosenArchetypes.forEach(arch => {\r\n\t\t\t\tdesc += `\\n\\n${arch.name}\\n\\n${arch.description}`\r\n\t\t\t})\r\n\r\n      desc = desc.split(\"\\n\\n\")\r\n\r\n\t\t\tlet onClick = this.props.options?.displayDescription === false ? () => this.setState({showDetails: false}) : null\r\n      return desc.map(para => <p key={_.random(1, 2000000)} onClick={onClick}>{para}</p>)\r\n    }\r\n  }\r\n\r\n  renderValidSkillsetSkills = () => {\r\n    let activeSkillsetClassSkills = this.props.klass.class_skillset_skills.filter(csss => csss.skillset_id === this.props.currentUser.skillset_id)\r\n    let remappedASCS = activeSkillsetClassSkills.map(csss => csss.skill_id)\r\n    let skillsetSkills = this.props.klass.skills.filter(skill => remappedASCS.includes(skill.id))\r\n    let skillsetSkillsUniq = []\r\n    skillsetSkills.forEach(skill => {\r\n      const emptyArray = skillsetSkillsUniq.filter(skill_uniq => skill_uniq.id === skill.id)\r\n      if (emptyArray.length === 0) {\r\n        skillsetSkillsUniq.push(skill)\r\n      }\r\n    })\r\n    return skillsetSkillsUniq\r\n  }\r\n\r\n  renderSkills = () => {\r\n    let validSkills = this.renderValidSkillsetSkills()\r\n\t\tvalidSkills = validSkills.sort((a, b) => a.name.localeCompare(b.name))\r\n    let domSkills = validSkills.map((skill, index, array) => {\r\n      return index === array.length -1 ? `and ${skill.name} (${skill.ability_score.slice(0, 3)}).` : `${skill.name} (${skill.ability_score.slice(0, 3)}), `\r\n    })\r\n\r\n\t\tarchetypeClassSkillNodes(this.props.chosenArchetypes).forEach(archDesc => {\r\n\t\t\tdomSkills.push(<><br/><br/>{archDesc}</>)\r\n\t\t})\r\n\r\n\r\n\t\treturn domSkills\r\n  }\r\n\r\n\trenderImage = () => {\r\n\t\tif (this.props.options?.displayImage === false){return null}\r\n\t\treturn (\r\n\t\t\t<span>\r\n\t\t\t\t<img id='class-img' alt={this.props.klass.name} src={this.props.klass.img_url}/>\r\n\t\t\t</span>\r\n\t\t)\r\n\t}\r\n\r\n\trenderName = () => {\r\n\t\tlet name = []\r\n\t\tthis.props.chosenArchetypes.forEach(arch => {\r\n\t\t\tname.push(arch.name)\r\n\t\t})\r\n\t\tname.push(this.props.klass.name)\r\n\t\treturn name.join(\" \")\r\n\t}\r\n\r\n  render () {\r\n    return (\r\n      <div className='show' id='class-intro'>\r\n        <span>\r\n          <h2>{this.renderName()}</h2>\r\n          {this.renderDescription()}\r\n          <p><strong>Hit Die</strong>: d{this.props.klass.hit_die}</p>\r\n          <p><strong>Starting Wealth</strong>: {this.props.klass.starting_wealth}</p>\r\n          {this.props.klass.skills[0] && <p><strong>Class Skills</strong>: The {_.lowerCase(this.props.klass.name)}'s class skills are {this.renderSkills()}</p>}\r\n\t\t\t\t\t<p><strong>Skill Ranks per Level</strong>: {this.props.klass.skill_ranks} + Int modifier</p>\r\n        </span>\r\n\t\t\t\t{this.renderImage()}\r\n      </div>\r\n    )\r\n  }\r\n\r\n\r\n\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Introduction)\r\n","import React from 'react'\r\nimport _ from 'lodash'\r\nimport { renderTH } from '../../utils/fuf'\r\nimport { tableDescriptionsByLevel } from '../../utils/calculations/class'\r\n\r\nconst Table = props => {\r\n\r\n\tconst tableDescriptions = tableDescriptionsByLevel(props.klass.klass_features || [], props.activeArchetype || {}, props.chosenArchetypes || [])\r\n\r\n  const renderBAB = () => {\r\n    switch (props.klass.hit_die){\r\n      case 6:\r\n        return 0.5;\r\n      case 8:\r\n        return 0.75;\r\n      case 10:\r\n        return 1;\r\n      case 12:\r\n        return 1;\r\n      default:\r\n        return 1;\r\n    }\r\n  }\r\n\r\n  const renderSave = (num, save) => {\r\n    if (save === 0.5){\r\n      return _.floor(num * save) + 2\r\n    } else if (save === 0.34){\r\n      return _.floor(num * save)\r\n    }\r\n  }\r\n\r\n  const renderLevelFeatures = (lvl) => {\r\n\t\t// converts class features into an array of the table description with a slug for href\r\n\t\tlet levelFeatures = tableDescriptions[lvl] ?? []\r\n\t\t// let klassFeatureIds = []\r\n\t\t//\r\n    // props.klass.klass_features.forEach(kf => {\r\n\t\t//\r\n\t\t// \tlet slug = kf.name.toLowerCase().split(\" \").join(\"-\")\r\n\t\t//\r\n\t\t// \tkf.feature_levels.forEach(fl => {\r\n\t\t//\r\n\t\t// \t\tconst {table_description, level} = fl\r\n\t\t// \t\t// filter all the features by their level\r\n\t\t// \t\tif (level === lvl && (table_description !== \"none\" && table_description !== \"\")){\r\n\t\t// \t\t\tlevelFeatures.push({klassFeatureId: kf.id, slug, featureLevel: fl, color: \"black\"})\r\n\t\t// \t\t\tklassFeatureIds.push(kf.id)\r\n\t\t// \t\t}\r\n\t\t//\r\n\t\t// \t})\r\n\t\t// })\r\n\t\t//\r\n\t\t// let desc  = tableDescriptionPerLevel(lvl, props.klass.klass_features, props.activeArchetype, props.chosenArchetypes)\r\n\t\t//\r\n\t\t// // if there is an activeArchetype\r\n\t\t// if (props.activeArchetype.id){\r\n\t\t// \tlevelFeatures = levelFeatures.map(feat => {\r\n\t\t// \t\tlet newFeature = false\r\n\t\t// \t\tprops.activeArchetype.klass_archetype_features.forEach(archF => {\r\n\t\t// \t\t\tarchF.replaces_klass_features.forEach(kf => {\r\n\t\t// \t\t\t\tif (kf.klass_feature_id === feat.featureLevel.klass_feature_id){\r\n\t\t// \t\t\t\t\tif (!kf.affects_specific_level || kf.affects_specific_level === lvl){\r\n\t\t// \t\t\t\t\t\tnewFeature = true\r\n\t\t// \t\t\t\t\t}\r\n\t\t// \t\t\t\t}\r\n\t\t// \t\t\t})\r\n\t\t// \t\t})\r\n\t\t// \t\tif (newFeature){return {...feat, strikethrough: true, color: \"darkgrey\"}}\r\n\t\t// \t\telse {return feat}\r\n\t\t// \t})\r\n\t\t// \tprops.activeArchetype.klass_archetype_features.forEach(archF => {\r\n\t\t// \t\tarchF.klass_archetype_feature_levels.forEach(archFL => {\r\n\t\t// \t\t\tif (archFL.table_description !== \"none\" && archFL.table_description !== \"\"){\r\n\t\t// \t\t\t\tif (archFL.level === lvl){\r\n\t\t// \t\t\t\t\tlet slug = archF.name.toLowerCase().split(\" \").join(\"-\")\r\n\t\t//\r\n\t\t// \t\t\t\t\tlevelFeatures.push({slug, featureLevel: archFL, color: \"forestgreen\"})\r\n\t\t// \t\t\t\t}\r\n\t\t// \t\t\t}\r\n\t\t// \t\t})\r\n\t\t// \t})\r\n\t\t// }\r\n\r\n\r\n\r\n\t\t// make dom element of description with slug href\r\n    const nameOfFeatures = levelFeatures.map(feature => {\r\n\t\t\t// return feature.featureLevel.table_description\r\n\t\t\tlet style = {color: feature.color}\r\n\t\t\tif (feature.strikethrough){\r\n\t\t\t\tstyle.textDecoration = \"line-through\"\r\n\t\t\t}\r\n\t\t\treturn <a className=\"underline-hover\" style={style} href={`#${feature.slug}`}>{feature.tableDescription}</a>\r\n\t\t})\r\n\r\n\t\t// join all of them with commas to become a string\r\n\t\tconst domFeatures = []\r\n\t\tfor (let i = 0; i < nameOfFeatures.length; i++){\r\n\t\t\tdomFeatures.push(nameOfFeatures[i])\r\n\t\t\tif (i < nameOfFeatures.length -1){\r\n\t\t\t\tdomFeatures.push(\", \")\r\n\t\t\t}\r\n\t\t}\r\n    return domFeatures\r\n  }\r\n\r\n  const renderClassTableRow = () => {\r\n    let level = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]\r\n    return level.map(num => {\r\n      return (\r\n        <tr key={_.random(1, 2000000)} className={renderTableStyling(num)}>\r\n          <td style={{textAlign: 'left'}}>{renderTH(num)}</td>\r\n          <td style={{textAlign: 'left'}}>{renderAttackBonus(num)}</td>\r\n          <td>+{renderSave(num, props.klass.fortitude)}</td>\r\n          <td>+{renderSave(num, props.klass.reflex)}</td>\r\n          <td>+{renderSave(num, props.klass.will)}</td>\r\n          <td style={{textAlign: 'left'}}>{props.klass.klass_features && renderLevelFeatures(num)}</td>\r\n          {spellsPerDay(num)}\r\n        </tr>\r\n      )\r\n    })\r\n  }\r\n\r\n\tconst renderAttackBonus = (level) => {\r\n\t\tlet bab = _.floor(level * renderBAB())\r\n\t\tlet string = \"\"\r\n\t\tfor (let i = bab; i > 0; i-=5){\r\n\t\t\tif (string.length){\r\n\t\t\t\tstring += \"/\"\r\n\t\t\t}\r\n\t\t\tstring += `+${i}`\r\n\t\t}\r\n\t\tif (!string.length){string = \"+0\"}\r\n\t\treturn string\r\n\t}\r\n\r\n  const renderTableStyling = (level) => {\r\n    return level%2 === 0 ? \"even\" : \"odd\"\r\n  }\r\n\r\n  const renderClassTable = () => {\r\n    return (\r\n      <table id=\"class-table\" className='show'>\r\n        <thead >\r\n          <tr >\r\n            <th id=\"class-table-level\">Lvl</th>\r\n            <th id=\"class-table-bab\">BAB</th>\r\n            <th id=\"class-table-fort\">Fort Save</th>\r\n            <th id=\"class-table-ref\">Reflex Save</th>\r\n            <th id=\"class-table-will\">Will Save</th>\r\n            <th id=\"class-table-features\">Features</th>\r\n            {spells()}\r\n          </tr>\r\n        </thead>\r\n        <tbody >\r\n          {renderClassTableRow()}\r\n        </tbody>\r\n      </table>\r\n    )\r\n  }\r\n\r\n\tconst findSpellcasting = klassFeatures => {\r\n\t\tlet spellcasting = null\r\n\t\tklassFeatures.forEach(kf => {\r\n\t\t\tkf.features.forEach(f => {\r\n\t\t\t\tspellcasting = f.spellcasting ?? spellcasting\r\n\t\t\t})\r\n\t\t})\r\n\t\treturn spellcasting\r\n\t}\r\n\r\n\tconst availableSpellLevels = spdpl => {\r\n\t\tlet arr = []\r\n\t\tfor (let i = 0; i < spdpl.length; i++){\r\n\t\t\tif (!arr.includes(spdpl[i].spell_level)){\r\n\t\t\t\tarr.push(spdpl[i].spell_level)\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn arr\r\n\t}\r\n\r\n  const spells = () => {\r\n\t\tlet spellcasting = findSpellcasting(props.klass.klass_features ?? [])\r\n    if (spellcasting){\r\n      console.log(\"Has spells per day!\")\r\n\t\t\tlet levels = availableSpellLevels(spellcasting.spells_per_day_per_level)\r\n      return (\r\n        <React.Fragment>\r\n          {levels.map(lvl => <th>{lvl}</th>)}\r\n        </React.Fragment>\r\n      )\r\n    }\r\n  }\r\n\r\n  const spellsPerDay = (lvl) => {\r\n\t\tlet spellcasting = findSpellcasting(props.klass.klass_features ?? [])\r\n    if (spellcasting){\r\n\t\t\tlet levels = availableSpellLevels(spellcasting.spells_per_day_per_level)\r\n      return (\r\n        <React.Fragment>\r\n\t\t\t\t\t{levels.map(level => <td>{renderSpellsPerDayPerLevel(lvl, level)}</td>)}\r\n        </React.Fragment>\r\n      )\r\n    }\r\n  }\r\n\r\n  const renderSpellsPerDayPerLevel = (lvl, sp_lvl) => {\r\n\t\tlet spellcasting = findSpellcasting(props.klass.klass_features ?? [])\r\n    const spd = spellcasting.spells_per_day_per_level.find(spd => {\r\n      return spd.klass_level === lvl && spd.spell_level === sp_lvl\r\n    })\r\n    return spd ? spd.spells : \"-\"\r\n  }\r\n\r\n  return (\r\n    <span className='show'>\r\n      {renderClassTable()}\r\n    </span>\r\n  )\r\n}\r\n\r\nexport default Table\r\n","import React from 'react'\r\n// import _ from 'lodash'\r\n\r\nclass NewFeature extends React.Component {\r\n\r\n  state = {\r\n    feature: {\r\n      name: \"\",\r\n      level_learned: \"\",\r\n      description: \"\"\r\n    }\r\n  }\r\n  componentDidMount() {\r\n    if (this.props.feature){\r\n      this.setState({\r\n        feature: {\r\n          name: this.props.feature.name,\r\n          level_learned: this.props.feature.level_learned,\r\n          description: this.props.feature.description\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  renderFeatureChange = (e) => {\r\n    this.setState({feature:{...this.state.feature, [e.target.name]: e.target.value}})\r\n  }\r\n\r\n  clearAddFeature = () => {\r\n    if (!this.props.feature) {\r\n\r\n      if (this.state.feature.name !== \"\" && this.state.feature.level_learned !== \"\" && this.state.feature.description !== \"\") {\r\n        this.setState({feature: {\r\n          name: \"\",\r\n          level_learned: \"\",\r\n          description: \"\"\r\n        }})\r\n      }\r\n    }\r\n  }\r\n\r\n  renderAddFeature = () => {\r\n    return (\r\n      <div>\r\n        <form onSubmit={(e) => {\r\n          this.props.renderSubmit(e, this.state.feature)\r\n        }}>\r\n          <label>\r\n             Feature Name:\r\n            <input type=\"text\" name=\"name\" value={this.state.feature.name} onChange={this.renderFeatureChange}/>\r\n          </label>\r\n          <br />\r\n          <br />\r\n          <label>\r\n            Description:\r\n            <textarea type=\"textfield\" rows=\"6\" className=\"desc-box\" name=\"description\" value={this.state.feature.description} onChange={this.renderFeatureChange}/>\r\n          </label>\r\n          <br />\r\n          <br />\r\n          <label>\r\n            Level Learned:\r\n            <input type=\"number\" name=\"level_learned\" value={this.state.feature.level_learned} onChange={this.renderFeatureChange}/>\r\n          </label>\r\n          <br />\r\n          <input type=\"submit\" name=\"submit\" />\r\n        </form>\r\n      </div>\r\n    )\r\n  }\r\n\r\n\r\n  render () {\r\n    return (\r\n      <div>\r\n        {this.props.toggleFeatureForm ? this.renderAddFeature() : this.clearAddFeature()}\r\n        {this.props.feature ? <button onClick={this.props.deleteFeature}>Delete Feature</button> : null}\r\n        < br />\r\n      </div>\r\n    )\r\n  }\r\n\r\n\r\n\r\n}\r\n\r\nexport default NewFeature\r\n","import React from 'react'\r\nimport _ from 'lodash'\r\nimport FeatureForm from './feature_form'\r\nimport { connect } from 'react-redux'\r\nimport localhost from '../../localhost'\r\nimport { descriptionParser } from '../../utils/fuf'\r\n\r\nclass Feature extends React.Component {\r\n\r\n  state ={\r\n    toggleFeatureForm: false,\r\n    deleteFeatureButton: false,\r\n    showEffects: false\r\n  }\r\n\r\n  renderClick = (option) => {\r\n    this.setState({toggleFeatureForm: !this.state.toggleFeatureForm})\r\n  }\r\n\r\n  renderSubmit = (e, feature) => {\r\n    e.preventDefault();\r\n    fetch(`${localhost}/api/v1/klass_features/${this.props.feature.id}`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        klass_feature_id: this.props.feature.id,\r\n        features: feature\r\n      })\r\n    })\r\n    .then(r => r.json())\r\n    .then(data => {\r\n      if (!data.error){\r\n        this.setState({toggleFeatureForm: false}, () => this.props.renderClassFeature(data.klass_feature))\r\n      } else {\r\n        console.log(data.error)\r\n      }\r\n    })\r\n  }\r\n\r\n  renderForm = () => {\r\n    return <FeatureForm toggleFeatureForm={this.state.toggleFeatureForm} feature={this.props.feature} renderSubmit={this.renderSubmit} deleteFeature={this.deleteFeature}/>\r\n  }\r\n\r\n  deleteFeature = () => {\r\n    this.setState({toggleFeatureForm: !this.state.toggleFeatureForm, deleteFeatureButton: !this.state.deleteFeatureButton })\r\n  }\r\n\r\n  deleteFeatureConfirm = (e, answer) => {\r\n    e.preventDefault();\r\n    if (answer === \"yes\") {\r\n\r\n      fetch(`${localhost}/api/v1/klass_features/${this.props.feature.id}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          klass_feature_id: this.props.feature.id\r\n        })\r\n      })\r\n      .then(r => r.json())\r\n      .then(id => {\r\n        this.setState({toggleFeatureForm: false, deleteFeatureButton: false}, () => this.props.renderClassFeature(id))\r\n      })\r\n    } else if (answer === \"no\"){\r\n      this.setState({toggleFeatureForm: false, deleteFeatureButton: false})\r\n    }\r\n  }\r\n\r\n  renderDescription = () => {\r\n    if (this.props.feature.description){\r\n\r\n      let desc = this.props.feature.description\r\n      return descriptionParser(desc)\r\n    }\r\n  }\r\n\r\n  effectsButton = () => {\r\n    if (\r\n      this.props.feature.spellcasting\r\n      && this.props.admin\r\n    ){\r\n      return <button onClick={() => this.setState({showEffects: !this.state.showEffects})}>Toggle Linked Effects</button>\r\n    }\r\n  }\r\n\r\n  showEffects = () => {\r\n    let display = []\r\n    if (this.props.feature.spellcasting){\r\n      const sp = this.props.feature.spellcasting\r\n      display.push(`Spellcasting: ${sp.ability_score}, ${sp.limited ? \"Limited Spells\" : \"All Spells\"}, ${sp.prepared ? \"Prepared\" : \"Spontaneous\"}`)\r\n    }\r\n    return <ul>{display.map(effect => <li>{effect}</li>)}</ul>\r\n  }\r\n\r\n  startingLevel = (feature) => {\r\n    let startingLevel = 20\r\n    feature.feature_levels.forEach(fl => {\r\n      if (fl.level < startingLevel){\r\n        startingLevel = fl.level\r\n      }\r\n    })\r\n    return startingLevel\r\n  }\r\n\r\n  render () {\r\n\t\tlet slug = this.props.feature.name.toLowerCase().split(\" \").join(\"-\")\r\n    return (\r\n      <>\r\n        <li id={slug} className=\"feature-title\"><strong>{this.props.feature.name}</strong></li>\r\n\r\n        {this.state.deleteFeatureButton ? <span><br/>Are you sure about that?<br/> <button onClick={(e) => this.deleteFeatureConfirm(e, \"no\")}>No</button><button onClick={(e) => this.deleteFeatureConfirm(e, \"yes\")}>Yes</button><br/><br/></span> : null}\r\n        {!this.state.deleteFeatureButton && this.props.admin ? <button onClick={this.renderClick}>Edit</button> : null}\r\n        {this.props.admin && <button onClick={() => this.props.toggleModal(this.props.feature.id)}>Toggle Feature Effect</button>}\r\n\r\n        <li>{this.renderDescription()}</li>\r\n        {this.effectsButton()}\r\n        {this.state.showEffects && this.showEffects()}\r\n        {this.state.toggleFeatureForm ? this.renderForm() : null}\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\n\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    currentUser: state.current,\r\n    admin: state.admin\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Feature)\r\n","import React from 'react'\r\n// import _ from 'lodash'\r\nimport { sortCompositeKlassFeatures } from '../../utils/calculations/class'\r\n\r\nimport Feature from './feature'\r\n\r\nconst Features = props => {\r\n\r\n  const renderFeatures = () => {\r\n\t\tconst sortedFeatures = sortCompositeKlassFeatures(props.klass.klass_features, props.chosenArchetypes || [])\r\n\r\n    return sortedFeatures.map(feature => {\r\n      return <Feature key={feature.id} feature={feature} klass_name={props.klass.name} renderClassFeature={props.renderClassFeature} modal={props.modal} toggleModal={props.toggleModal}/>\r\n    })\r\n  }\r\n\r\n  return (\r\n    <ul className='show'>\r\n      {props.klass.klass_features && renderFeatures()}\r\n    </ul>\r\n  )\r\n\r\n}\r\n\r\nexport default Features\r\n","import React from 'react'\r\n// import { Redirect } from 'react-router-dom'\r\nimport localhost from '../localhost'\r\n\r\nclass NewClass extends React.Component {\r\n\r\n  state = {\r\n    name: \"\",\r\n    description: \"\",\r\n    hit_die: 0,\r\n    skill_ranks: \"\",\r\n    fortitude: \"\",\r\n    reflex: \"\",\r\n    will: \"\",\r\n    img_url: \"\",\r\n    deleteClassButton: false\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.klass){\r\n      this.setState({\r\n        name: this.props.klass.name,\r\n        description: this.props.klass.description,\r\n        hit_die: this.props.klass.hit_die,\r\n        skill_ranks: this.props.klass.skill_ranks,\r\n        fortitude: [this.props.klass.fortitude ? this.props.klass.fortitude.toString() : this.props.klass.fortitude],\r\n        reflex: [this.props.klass.reflex ? this.props.klass.reflex.toString() : this.props.klass.reflex],\r\n        will: [this.props.klass.will ? this.props.klass.will.toString() : this.props.klass.will],\r\n        img_url: this.props.klass.img_url\r\n      })\r\n    }\r\n  }\r\n\r\n  renderSubmit = (e) => {\r\n    e.preventDefault()\r\n    fetch(`${localhost}/api/v1/klasses`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify(this.state)\r\n    })\r\n    .then(r => r.json())\r\n    .then(data => {\r\n      if (!data.error){\r\n        this.props.history.push(`/classes/${data.klass.name}`)\r\n        this.setState({name: \"\", description: \"\", hit_die: 0, skill_ranks: \"\", fortitude: \"\", reflex: \"\", will: \"\", img_url: \"\"})\r\n      } else {\r\n        console.log(data.error)\r\n      }\r\n    })\r\n  }\r\n\r\n  renderChange = (e) => {\r\n    this.setState({[e.target.name]: e.target.value})\r\n  }\r\n\r\n  renderFormSubmit = (e) => {\r\n    if (this.props.renderClassEdit){\r\n        this.props.renderClassEdit(e, this.state)\r\n    } else {\r\n      this.renderSubmit(e)\r\n    }\r\n  }\r\n\r\n  renderForm = () => {\r\n    return (\r\n      <form onSubmit={(e) => this.renderFormSubmit(e)} >\r\n      <label>\r\n      Class Name:\r\n      <input type=\"text\" name=\"name\" value={this.state.name} onChange={this.renderChange}/>\r\n      </label>\r\n      <br />\r\n      <br />\r\n      <label>\r\n      Description:\r\n      <textarea type=\"textfield\" className=\"desc-box\" rows=\"6\" name=\"description\" value={this.state.description} onChange={this.renderChange}/>\r\n      </label>\r\n      <br />\r\n      <br />\r\n      <label>\r\n      Hit Die:\r\n      <select name=\"hit_die\" value={this.state.hit_die} onChange={this.renderChange}>\r\n      <option value= \"\" >Select One</option>\r\n      <option value= \"12\" >d12</option>\r\n      <option value= \"10\" >d10</option>\r\n      <option value= \"8\" >d8</option>\r\n      <option value= \"6\" >d6</option>\r\n      </select>\r\n      </label>\r\n      <br />\r\n      <br />\r\n      <label>\r\n      Skill Ranks:\r\n      <input type=\"number\" name=\"skill_ranks\" value={this.state.skill_ranks} onChange={this.renderChange}/>\r\n      </label>\r\n      <br />\r\n      <label>\r\n      Saving Throws:\r\n      <br />\r\n      <label>\r\n      Fortitude\r\n      <select name=\"fortitude\" value={this.state.fortitude} onChange={this.renderChange}>\r\n      <option value= \"\" >Select One</option>\r\n      <option value= \"0.5\" >Good</option>\r\n      <option value= \"0.34\" >Poor</option>\r\n      </select>\r\n      </label>\r\n      <label>\r\n      Reflex\r\n      <select name=\"reflex\" value={this.state.reflex} onChange={this.renderChange}>\r\n      <option value= \"\" >Select One</option>\r\n      <option value= \"0.5\" >Good</option>\r\n      <option value= \"0.34\" >Poor</option>\r\n      </select>\r\n      </label>\r\n      <label>\r\n      Will\r\n      <select name=\"will\" value={this.state.will} onChange={this.renderChange}>\r\n      <option value= \"\" >Select One</option>\r\n      <option value= \"0.5\" >Good</option>\r\n      <option value= \"0.34\" >Poor</option>\r\n      </select>\r\n      </label>\r\n      </label>\r\n      < br />\r\n      < br />\r\n      <label>\r\n      Image Link:\r\n      <input type=\"text\" name=\"img_url\" value={this.state.img_url} onChange={this.renderChange}/>\r\n      </label>\r\n      <br />\r\n      <br />\r\n      <input type=\"submit\" name=\"submit\" />\r\n      </form>\r\n  )\r\n  }\r\n\r\n  deleteClass = () => {\r\n    this.setState({deleteClassButton: !this.state.deleteClassButton })\r\n  }\r\n\r\n  deleteClassConfirm = (e, answer) => {\r\n    e.preventDefault();\r\n    if (answer === \"yes\") {\r\n      fetch(`${localhost}/api/v1/klasses/${this.props.klass.id}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          klass_id: this.props.klass.id\r\n        })\r\n      })\r\n      .then(r => r.json())\r\n      .then(data => {\r\n        this.props.history.push('/classes')\r\n        this.setState({deleteClassButton: false})\r\n    })\r\n    } else if (answer === \"no\"){\r\n      this.setState({deleteClassButton: false})\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <span>\r\n        {(this.props.toggleClassForm || this.props.location.pathname === \"/classes-form\") ? this.renderForm() : null}\r\n        {this.props.klass ? <button onClick={this.deleteClass}>Delete Class</button> : null}\r\n        {this.state.deleteClassButton ? <span><br/>Are you sure about that?<br/> <button onClick={(e) => this.deleteClassConfirm(e, \"no\")}>No</button><button onClick={(e) => this.deleteClassConfirm(e, \"yes\")}>Yes</button><br/><br/></span> : null}\r\n\r\n      </span>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport default NewClass\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport localhost from '../localhost'\r\n\r\nclass ClassSkillsForm extends React.Component {\r\n\r\n  state = {\r\n    skillsIds:[],\r\n    skillsets: [],\r\n    skills: {},\r\n    method: \"POST\"\r\n  }\r\n\r\n\r\n  componentDidMount() {\r\n    if (this.props.klass.skills[0]){\r\n      let activeSkillsetClassSkills = this.props.klass.class_skillset_skills.filter(csss => csss.skillset_id === this.props.currentUser.skillset_id)\r\n      const mappedSkillsIds = activeSkillsetClassSkills.map(scs => scs.skill_id)\r\n      this.setState({skillsIds: mappedSkillsIds, method: \"PATCH\"})\r\n    }\r\n    this.fetchSkillsets()\r\n    this.fetchSkills()\r\n  }\r\n\r\n  fetchSkillsets = () => {\r\n    fetch(`${localhost}/api/v1/skillsets`)\r\n    .then(r => r.json())\r\n    .then(data => this.setState({skillsets: data}))\r\n  }\r\n\r\n  fetchSkills = () => {\r\n    fetch(`${localhost}/api/v1/skills`)\r\n    .then(r => r.json())\r\n    .then(data => this.setState({skills: data}))\r\n  }\r\n\r\n  renderSkillChange = (id) => {\r\n    if (this.state.skillsIds.includes(id)){\r\n      const filtered = this.state.skillsIds.filter(skill => skill !== id)\r\n      this.setState({skillsIds: filtered}, console.log(\"skillsIds removed\", this.state.skillsIds))\r\n    } else {\r\n      this.setState({skillsIds: [...this.state.skillsIds, id]}, console.log(\"skillsIds added\", this.state.skillsIds))\r\n    }\r\n  }\r\n\r\n  selectedSkill = (id) => {\r\n    return (this.state.skillsIds.includes(id)) ? true : false\r\n  }\r\n\r\n  renderActiveSkillset = () => {\r\n    const activeSkillset = this.state.skillsets.find(ss => ss.id === this.props.currentUser.skillset_id)\r\n    return <p>Current Skillset: {activeSkillset.name}</p>\r\n  }\r\n\r\n\r\n  renderSkillOptions = () => {\r\n    return this.state.skills.map(skill => {\r\n      return (<div>\r\n      <label>\r\n        <input type=\"checkbox\" name={skill.name} checked={this.selectedSkill(skill.id)} onChange={() => this.renderSkillChange(skill.id)}/>\r\n        {skill.name}\r\n      </label>\r\n      </div>\r\n    )\r\n    })\r\n  }\r\n\r\n  renderSkills = () => {\r\n\r\n  }\r\n\r\n\r\n\r\n  render () {\r\n    return (\r\n      <span>\r\n        {!!this.state.skillsets[0] && this.renderActiveSkillset()}\r\n        {!!this.state.skills.keys && this.renderSkillOptions()}\r\n        <button onClick={(e) => this.props.renderClassSkills(e, this.state.skillsIds, this.state.method)}>{this.state.method === \"POST\" ? \"Create Class Skills\" : \"Adjust Class Skills\"}</button>\r\n      </span>\r\n    )\r\n  }\r\n\r\n\r\n\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(ClassSkillsForm)\r\n","import React from 'react'\r\n\r\nclass SpellsForm extends React.Component {\r\n\r\n  state = {\r\n    spells: {\r\n      0: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n      1: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n      2: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n      3: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n      4: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n      5: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n      6: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n      7: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n      8: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n      9: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n\r\n    }\r\n  }\r\n\r\n  renderSpellsForm = () => {\r\n    return (\r\n      <table>\r\n        <thead >\r\n          <tr >\r\n            <th>Level</th>\r\n            <th>0</th>\r\n            <th>1</th>\r\n            <th>2</th>\r\n            <th>3</th>\r\n            <th>4</th>\r\n            <th>5</th>\r\n            <th>6</th>\r\n            <th>7</th>\r\n            <th>8</th>\r\n            <th>9</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody >\r\n          {this.renderSpellsRow()}\r\n        </tbody>\r\n      </table>\r\n    )\r\n  }\r\n\r\n  renderSpellsRow = () => {\r\n    let level = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]\r\n    return level.map(num => {\r\n      return (\r\n        <tr>\r\n          <td>{num}</td>\r\n          <td><input type=\"number\" style={{maxWidth: \"2.5em\"}} value={this.state.spells[0][num-1]} onChange={(e) => this.renderSpellChange(e, 0, num)}/></td>\r\n          <td><input type=\"number\" style={{maxWidth: \"2.5em\"}} value={this.state.spells[1][num-1]} onChange={(e) => this.renderSpellChange(e, 1, num)}/></td>\r\n          <td><input type=\"number\" style={{maxWidth: \"2.5em\"}} value={this.state.spells[2][num-1]} onChange={(e) => this.renderSpellChange(e, 2, num)}/></td>\r\n          <td><input type=\"number\" style={{maxWidth: \"2.5em\"}} value={this.state.spells[3][num-1]} onChange={(e) => this.renderSpellChange(e, 3, num)}/></td>\r\n          <td><input type=\"number\" style={{maxWidth: \"2.5em\"}} value={this.state.spells[4][num-1]} onChange={(e) => this.renderSpellChange(e, 4, num)}/></td>\r\n          <td><input type=\"number\" style={{maxWidth: \"2.5em\"}} value={this.state.spells[5][num-1]} onChange={(e) => this.renderSpellChange(e, 5, num)}/></td>\r\n          <td><input type=\"number\" style={{maxWidth: \"2.5em\"}} value={this.state.spells[6][num-1]} onChange={(e) => this.renderSpellChange(e, 6, num)}/></td>\r\n          <td><input type=\"number\" style={{maxWidth: \"2.5em\"}} value={this.state.spells[7][num-1]} onChange={(e) => this.renderSpellChange(e, 7, num)}/></td>\r\n          <td><input type=\"number\" style={{maxWidth: \"2.5em\"}} value={this.state.spells[8][num-1]} onChange={(e) => this.renderSpellChange(e, 8, num)}/></td>\r\n          <td><input type=\"number\" style={{maxWidth: \"2.5em\"}} value={this.state.spells[9][num-1]} onChange={(e) => this.renderSpellChange(e, 9, num)}/></td>\r\n        </tr>\r\n      )\r\n    })\r\n  }\r\n\r\n  renderSpellChange = (e, spell, klass) => {\r\n    const obj = {...this.state.spells}\r\n    obj[spell][klass -1] = e.target.value\r\n    this.setState({spells: obj})\r\n  }\r\n\r\n  render() {\r\n    console.log(\"class changing spells per day\", this.state.spells)\r\n    return (\r\n      <div>\r\n      {this.renderSpellsForm()}\r\n      <button onClick={() => this.props.submitSpellsPerDay(this.state.spells)}>Submit Spells per Day</button>\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport default SpellsForm\r\n","import React from 'react'\r\n\r\nclass Spellcasting extends React.Component {\r\n\r\n  state = {\r\n    abilityScore: \"\",\r\n    prepared: false,\r\n    limited: false\r\n  }\r\n\r\n  renderChange = (e) => {\r\n    this.setState({[e.target.name]: e.target.value})\r\n  }\r\n\r\n  renderForm = () => {\r\n    return (\r\n      <div>\r\n        <label>\r\n          Relevant Ability Score:\r\n          <select name=\"abilityScore\" value={this.state.abilityScore} onChange={this.renderChange}>\r\n            <option value=\"\">Select One</option>\r\n            <option value=\"Strength\">Strength</option>\r\n            <option value=\"Dexterity\">Dexterity</option>\r\n            <option value=\"Constitution\">Constitution</option>\r\n            <option value=\"Intelligence\">Intelligence</option>\r\n            <option value=\"Wisdom\">Wisdom</option>\r\n            <option value=\"Charisma\">Charisma</option>\r\n          </select>\r\n        </label>\r\n        <br/>\r\n        <label>\r\n          Do you have to prepare your spells?\r\n          <input type=\"checkbox\" name=\"prepared\" isSelected={this.state.prepared} onChange={this.renderChange}/>\r\n        </label>\r\n        <br/>\r\n        <label>\r\n          Are you limited by your spells you can choose?\r\n          <input type=\"checkbox\" name=\"limited\" isSelected={this.state.limited} onChange={this.renderChange}/>\r\n        </label>\r\n        <br /><br />\r\n        <button onClick={() => this.props.fetch(this.state, \"spellcasting\")}>Create Feature Effect</button>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        {this.renderForm()}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Spellcasting\r\n","import React from 'react'\r\nimport Portal from '../../portal'\r\n\r\nimport Spellcasting from '../../components/effects/spellcasting'\r\n\r\nclass FeatureEffect extends React.Component {\r\n\r\n  state = {\r\n    choice: \"\"\r\n  }\r\n\r\n  renderChange = (e) => {\r\n    this.setState({[e.target.name]: e.target.value})\r\n  }\r\n\r\n  renderSelection = () => {\r\n    return (\r\n      <div className='tab-list-active'>\r\n        <label>\r\n          Class Feature Effect:\r\n          <select name=\"choice\" value={this.state.choice} onChange={this.renderChange}>\r\n            <option value=\"\">Select One</option>\r\n            <option value=\"Spellcasting\">Spellcasting</option>\r\n          </select>\r\n        </label>\r\n\r\n      </div>\r\n    )\r\n  }\r\n\r\n  render(){\r\n\r\n    return(\r\n      <Portal>\r\n      <div className=\"page-dimmer\" onClick={this.props.clickOut}>\r\n        <div className=\"edit-form\" name=\"background\">\r\n          <div>\r\n            <p>Select an Effect</p>\r\n            {this.renderSelection()}\r\n            {this.state.choice === \"Spellcasting\" && <Spellcasting fetch={this.props.fetch}/>}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      </Portal>\r\n    )\r\n  }\r\n}\r\n\r\nexport default FeatureEffect\r\n","import React from 'react'\r\n// import _ from 'lodash'\r\n// import { Link } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport localhost from '../localhost'\r\n\r\n\r\nimport Introduction from '../components/class_show/introduction'\r\nimport Table from '../components/class_show/table'\r\nimport Features from '../components/class_show/feature_list'\r\nimport FeatureForm from '../components/class_show/feature_form'\r\nimport ClassForm from  '../components/class_form'\r\nimport ClassSkillsForm from '../components/class_skills_form'\r\nimport SpellsForm from '../components/spells_form'\r\n\r\nimport FeatureEffect from '../modals/classes/effect'\r\nimport FeatureOptions from '../components/class_show/feature_options'\r\n\r\nconst ClassShow = props => {\r\n\r\n\tconst [ klassDisplay, setKlassDisplay ] = React.useState({\r\n    klass : {},\r\n    toggleFeatureForm: false,\r\n    toggleClassForm: false,\r\n    toggleClassSkillsForm: false,\r\n    toggleSpellsForm: false,\r\n    modal: false,\r\n    features: true\r\n  })\r\n\r\n\r\n  const renderURL = () => {\r\n    let url = window.location.href\r\n    let urlArray = url.split(\"/\")\r\n    return urlArray[urlArray.length - 1]\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    const klass = renderURL()\r\n    let fw = \"\"\r\n    if (klass === \"Fate%20Weaver\"){\r\n      fw = \"Fate Weaver\"\r\n    }\r\n\t\tif (props.klass){\r\n\t\t\tsetKlassDisplay({...klassDisplay, klass: props.klass})\r\n\t\t} else if (props.classes.find(kl => kl.name === klass || kl.name === fw)){\r\n      let selectedClass = props.classes.find(kl => kl.name === klass || kl.name === fw)\r\n      setKlassDisplay({...klassDisplay, klass: selectedClass})\r\n    } else {\r\n      fetch(`${localhost}/api/v1/klasses/${klass}`)\r\n      .then(r => r.json())\r\n      .then(data => setKlassDisplay({...klassDisplay, klass: data.klass}))\r\n    }\r\n  }, [])\r\n\r\n  const changeAddFeatureToggle = () => {\r\n\t\tsetKlassDisplay({...klassDisplay, toggleFeatureForm: !klassDisplay.toggleFeatureForm})\r\n  }\r\n  const toggleClassForm = () => {\r\n\t\tsetKlassDisplay({...klassDisplay, toggleClassForm: !klassDisplay.toggleClassForm})\r\n  }\r\n  const toggleClassSkillsForm = () => {\r\n\t\tsetKlassDisplay({...klassDisplay, toggleClassSkillsForm: !klassDisplay.toggleClassSkillsForm})\r\n  }\r\n  const toggleSpellsForm = () => {\r\n\t\tsetKlassDisplay({...klassDisplay, toggleSpellsForm: !klassDisplay.toggleSpellsForm})\r\n  }\r\n\r\n  const renderSubmit = (e, feature) => {\r\n    e.preventDefault()\r\n\r\n    fetch(`${localhost}/api/v1/klass_features`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        klass_id: klassDisplay.klass.id,\r\n        features: feature\r\n      })\r\n    })\r\n    .then(r => r.json())\r\n    .then(data => {\r\n      if (!data.error){\r\n        renderClassFeature(data)\r\n      } else {\r\n        console.log(data.error)\r\n      }\r\n    })\r\n  }\r\n\r\n  const renderClassEdit = (e, klass_updates) => {\r\n    e.preventDefault()\r\n\r\n    fetch(`${localhost}/api/v1/klasses/${klassDisplay.klass.id}`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        klass_id: klassDisplay.klass.id,\r\n        updates: klass_updates\r\n      })\r\n    })\r\n    .then(r => r.json())\r\n    .then(data => {\r\n      if(!data.error){\r\n\t\t\t\tsetKlassDisplay({...klassDisplay, klass: data.klass, toggleClassForm: false})\r\n      } else {\r\n        console.log(data.error)\r\n      }\r\n    })\r\n  }\r\n\r\n  const renderClassSkillsFetch = (e, skills_data, method)=> {\r\n    e.preventDefault()\r\n    fetch(`${localhost}/api/v1/class_skillset_skills`, {\r\n      method: method,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        klass_id: klassDisplay.klass.id,\r\n        skills: skills_data,\r\n        skillset_id: props.currentUser.skillset_id\r\n      })\r\n    })\r\n    .then(r => r.json())\r\n    .then(data => {\r\n      if(!data.error){\r\n\t\t\t\tsetKlassDisplay({...klassDisplay, klass: data.klass, toggleClassSkillsForm: false})\r\n      } else {\r\n        console.log(data.error)\r\n      }\r\n    })\r\n  }\r\n\r\n  const submitSpellsPerDay = (nestedSpells) => {\r\n    fetch(`${localhost}/api/v1/spells_per_day`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        spells_per_day: nestedSpells,\r\n        klass_id: klassDisplay.klass.id\r\n      })\r\n    })\r\n    .then(r => r.json())\r\n    .then(data => {\r\n\t\t\tsetKlassDisplay({...klassDisplay, klass: data.klass, toggleSpellsForm: false})\r\n    })\r\n  }\r\n\r\n  const renderClassFeature = (newData) => {\r\n    let remappedFeatures\r\n    if (Number.isInteger(newData)) {\r\n      remappedFeatures = klassDisplay.klass.klass_features.filter(feature => {\r\n        return feature.id !== newData\r\n      })\r\n    } else if (!klassDisplay.klass.klass_features.find(el => el.id === newData.klass_feature.id)){\r\n      remappedFeatures = klassDisplay.klass.klass_features\r\n      remappedFeatures.push(newData.klass_feature)\r\n    } else if (typeof newData === 'object'){\r\n      remappedFeatures = klassDisplay.klass.klass_features.map(feature => {\r\n        return feature.id === newData.id ? newData : feature\r\n      })\r\n    }\r\n    setKlassDisplay({\r\n\t\t\t...klassDisplay,\r\n      klass: {\r\n        ...klassDisplay.klass,\r\n        klass_features: remappedFeatures\r\n      },\r\n      toggleFeatureForm: false\r\n    })\r\n  }\r\n\r\n  const fetchClassFeatureEffect = (state, effect) => {\r\n    fetch(`${localhost}/api/v1/${effect}`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        ability_score: state.abilityScore,\r\n        prepared: state.prepared,\r\n        limited: state.limited,\r\n        klass_feature_id: klassDisplay.modal\r\n      })\r\n    })\r\n    .then(r =>  r.json())\r\n    .then(data => {\r\n      setKlassDisplay({...klassDisplay, klass: data.klass, modal: false})\r\n      // confirm that this works?\r\n    })\r\n  }\r\n\r\n  const toggleModal = (id) => {\r\n    console.log(\"this feature is being adjusted\", id)\r\n    setKlassDisplay({...klassDisplay, modal: id})\r\n  }\r\n\r\n  const clickOut = (e) => {\r\n    if(e.target.classList[0] === \"page-dimmer\"){\r\n      setKlassDisplay({...klassDisplay, modal: false})\r\n    }\r\n  }\r\n  const exitModal = () => {\r\n    setKlassDisplay({...klassDisplay, modal: false})\r\n  }\r\n\r\n  const featuresTab = () => {\r\n    let featureOptions = false\r\n    let feature = \"\"\r\n    let featureOptionsArray = []\r\n    // klassDisplay.klass.klass_features.forEach(kf => {\r\n    //   if (kf.feature_options.length){\r\n    //     featureOptions = true\r\n    //     feature = kf.name\r\n    //     featureOptionsArray = kf.feature_options\r\n    //   }\r\n    // })\r\n    if (!featureOptions){\r\n      return <Features klass={klassDisplay.klass} renderClassFeature={renderClassFeature} modal={klassDisplay.modal} toggleModal={toggleModal} chosenArchetypes={props.chosenArchetypes}/>\r\n    } else {\r\n      return (\r\n        <div>\r\n          <div id='options-toggle'>\r\n            <span className={toggleFeatureOptionCSS(\"features\")} onClick={() => setKlassDisplay({...klassDisplay, features: true})}>Class Features</span><span className={toggleFeatureOptionCSS(\"options\")} onClick={() => setKlassDisplay({...klassDisplay, features: false})}>{feature}</span>\r\n          </div>\r\n          {\r\n            klassDisplay.features ?\r\n              <Features klass={klassDisplay.klass} renderClassFeature={renderClassFeature} modal={klassDisplay.modal} toggleModal={toggleModal}/>\r\n            :\r\n              <FeatureOptions options={featureOptionsArray} />\r\n          }\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const toggleFeatureOptionCSS = (feature) => {\r\n    if ((klassDisplay.features && feature === \"features\") || (!klassDisplay.features && feature === \"options\")){\r\n      return \"tab-list-active\"\r\n    } else {\r\n      return \"none\"\r\n    }\r\n  }\r\n\r\n\tconst displayTable = () => {\r\n\t\tif (props.options?.displayTable === false){return null}\r\n\t\treturn <Table klass={klassDisplay.klass}/>\r\n\t}\r\n\r\n  return (\r\n    <span className='roboto show'>\r\n      {klassDisplay.klass.name && <Introduction klass={klassDisplay.klass} options={props.options} chosenArchetypes={props.chosenArchetypes || []}/>}\r\n      {props.admin ? <button onClick={toggleClassForm}>{klassDisplay.toggleClassForm ? \"Hide Edit Class\" : \"Edit Class\"}</button> : null}\r\n      {klassDisplay.toggleClassForm ? <ClassForm toggleClassForm={klassDisplay.toggleClassForm} klass={klassDisplay.klass} renderClassEdit={renderClassEdit} history={props.history} /> : null }\r\n\r\n      {props.admin && <><button onClick={toggleClassSkillsForm}>{klassDisplay.toggleClassSkillsForm ? \"Hide Skills Form\" : \"Skills Form\"}</button><br/><button onClick={toggleSpellsForm}>{klassDisplay.toggleSpellsForm ? \"Hide Spells Form\" : \"Spells Form\"}</button></>}\r\n\r\n      {klassDisplay.toggleClassSkillsForm && <ClassSkillsForm toggleClassSkillsForm={klassDisplay.toggleClassSkillsForm} klass={klassDisplay.klass} renderClassSkills={renderClassSkillsFetch} />}\r\n\r\n      {klassDisplay.toggleSpellsForm && <SpellsForm submitSpellsPerDay={submitSpellsPerDay} toggleSpellsForm={klassDisplay.toggleSpellsForm} klass={klassDisplay.klass}/>}\r\n\r\n      {displayTable()}\r\n\r\n      {klassDisplay.klass.name && featuresTab()}\r\n      {props.admin ? <button onClick={changeAddFeatureToggle}>{klassDisplay.toggleFeatureForm ? \"Hide new Feature Form\" : \"Add a new Class Feature\"}</button> : null}\r\n\r\n      <FeatureForm toggleFeatureForm={klassDisplay.toggleFeatureForm} renderSubmit={renderSubmit}/>\r\n\r\n      {klassDisplay.modal && <FeatureEffect exitModal={exitModal} clickOut={clickOut} fetch={fetchClassFeatureEffect}/>}\r\n    </span>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n    classes: state.classes\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(ClassShow)\r\n","import React from 'react'\r\n\r\nclass FeatureOptions extends React.Component {\r\n\r\n  renderOptions = () => {\r\n    return this.props.options.map(kfo => {\r\n      return (\r\n        <ul style={{margin: '1em', listStyleType: 'none', marginBottom: '1.5em'}}>\r\n          <li style={{marginBottom: '.5em'}}><strong>{kfo.name}</strong></li>\r\n          <li>{this.renderParagraphs(kfo.description)}</li>\r\n        </ul>\r\n      )\r\n    })\r\n  }\r\n\r\n  renderParagraphs = (desc) => {\r\n    let splitDesc = desc.split('\\n\\n')\r\n    return splitDesc.map(p => <p>{p}</p>)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        {this.renderOptions()}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default FeatureOptions\r\n","import React from 'react'\r\nimport _ from 'lodash'\r\n\r\nclass Introduction extends React.Component {\r\n\r\n  renderDescription = () => {\r\n    if (this.props.race.description){\r\n\r\n      let desc = this.props.race.description\r\n      desc = desc.split(\"\\n\\n\")\r\n      return desc.map(para => <p key={_.random(1, 2000000)}>{para}</p>)\r\n    }\r\n  }\r\n\r\n  renderAbilityScoreModifiers = () => {\r\n    if(this.props.race.race_ability_score_modifiers){\r\n      let mods = this.props.race.race_ability_score_modifiers\r\n      let modStrings = []\r\n      mods.forEach(mod => {\r\n        let bonus = mod.bonus < 0 ? mod.bonus : `+${mod.bonus}`\r\n        modStrings.push(`${bonus} ${mod.ability_score}`)\r\n      })\r\n      return modStrings.join(\", \")\r\n    }\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className='show' id='class-intro'>\r\n\t\t\t\t<span>\r\n\t\t\t\t\t<h2>{this.props.race ? this.props.race.name : null}</h2>\r\n\t\t\t\t\t{this.renderDescription()}\r\n\t\t\t\t\t<p><strong>Size</strong>: {this.props.race ? this.props.race.size : null}</p>\r\n\t\t\t\t\t<p><strong>Speed</strong>: {this.props.race ? this.props.race.speed : null} ft</p>\r\n\t\t\t\t\t<p><strong>Ability Score Modifiers</strong>: {this.renderAbilityScoreModifiers()}</p>\r\n\t\t\t\t</span>\r\n\t\t\t\t<span>\r\n\t\t\t\t\t<img id='class-img' alt={this.props.race.name} src={this.props.race.img_url}/>\r\n\t\t\t\t</span>\r\n      </div>\r\n    )\r\n  }\r\n\r\n\r\n\r\n}\r\n\r\nexport default Introduction\r\n","import React from 'react'\r\n// import _ from 'lodash'\r\n\r\nclass NewTrait extends React.Component {\r\n\r\n  state = {\r\n    trait: {\r\n      name: \"\",\r\n      description: \"\"\r\n    }\r\n  }\r\n  componentDidMount() {\r\n    if (this.props.trait){\r\n      this.setState({\r\n        trait: {\r\n          name: this.props.trait.name,\r\n          description: this.props.trait.description\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  renderTraitChange = (e) => {\r\n    this.setState({trait:{...this.state.trait, [e.target.name]: e.target.value}})\r\n  }\r\n\r\n  clearAddTrait = () => {\r\n    if (!this.props.trait) {\r\n\r\n      if (this.state.trait.name !== \"\" && this.state.trait.level_learned !== \"\" && this.state.trait.description !== \"\") {\r\n        this.setState({trait: {\r\n          name: \"\",\r\n          level_learned: \"\",\r\n          description: \"\"\r\n        }})\r\n      }\r\n    }\r\n  }\r\n\r\n  renderAddTrait = () => {\r\n    return (\r\n      <div>\r\n        <form onSubmit={(e) => {\r\n          this.props.renderSubmit(e, this.state.trait)\r\n        }}>\r\n          <label>\r\n             Trait Name:\r\n            <input type=\"text\" name=\"name\" value={this.state.trait.name} onChange={this.renderTraitChange}/>\r\n          </label>\r\n          <br />\r\n          <br />\r\n          <label>\r\n            Description:\r\n            <textarea type=\"textfield\" rows=\"6\" className=\"desc-box\" name=\"description\" value={this.state.trait.description} onChange={this.renderTraitChange}/>\r\n          </label>\r\n          <br />\r\n          <br />\r\n          <input type=\"submit\" name=\"submit\" />\r\n        </form>\r\n      </div>\r\n    )\r\n  }\r\n\r\n\r\n  render () {\r\n    return (\r\n      <div>\r\n        {this.props.toggleTraitForm ? this.renderAddTrait() : this.clearAddTrait()}\r\n        {this.props.trait ? <button onClick={this.props.deleteTrait}>Delete Trait</button> : null}\r\n        < br />\r\n      </div>\r\n    )\r\n  }\r\n\r\n\r\n\r\n}\r\n\r\nexport default NewTrait\r\n","import React from 'react'\r\nimport _ from 'lodash'\r\nimport TraitForm from './trait_form'\r\nimport { connect } from 'react-redux'\r\nimport localhost from '../../localhost'\r\n\r\nclass Trait extends React.Component {\r\n\r\n  state ={\r\n    toggleTraitForm: false,\r\n    deleteTraitButton: false\r\n  }\r\n\r\n  renderClick = (option) => {\r\n    this.setState({toggleTraitForm: !this.state.toggleTraitForm})\r\n  }\r\n\r\n  renderSubmit = (e, trait) => {\r\n    e.preventDefault();\r\n    fetch(`${localhost}/api/v1/racial_traits/${this.props.trait.id}`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        racial_trait_id: this.props.trait.id,\r\n        traits: trait\r\n      })\r\n    })\r\n    .then(r => r.json())\r\n    .then(data => {\r\n      if (!data.error){\r\n        this.setState({toggleTraitForm: false}, () => this.props.renderRacialTrait(data.racial_trait))\r\n      } else {\r\n        console.log(data.error)\r\n      }\r\n    })\r\n  }\r\n\r\n  renderForm = () => {\r\n    return <TraitForm toggleTraitForm={this.state.toggleTraitForm} trait={this.props.trait} renderSubmit={this.renderSubmit} deleteTrait={this.deleteTrait}/>\r\n  }\r\n\r\n  deleteTrait = () => {\r\n    this.setState({toggleTraitForm: !this.state.toggleTraitForm, deleteTraitButton: !this.state.deleteTraitButton })\r\n  }\r\n\r\n  deleteTraitConfirm = (e, answer) => {\r\n    e.preventDefault();\r\n    if (answer === \"yes\") {\r\n\r\n      fetch(`${localhost}/api/v1/racial_traits/${this.props.trait.id}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          racial_trait_id: this.props.trait.id\r\n        })\r\n      })\r\n      .then(r => r.json())\r\n      .then(id => {\r\n        this.setState({toggleTraitForm: false, deleteTraitButton: false}, () => this.props.renderRacialTrait(id))\r\n      })\r\n    } else if (answer === \"no\"){\r\n      this.setState({toggleTraitForm: false, deleteTraitButton: false})\r\n    }\r\n  }\r\n\r\n  renderDescription = () => {\r\n    if (this.props.trait.description){\r\n\r\n      let desc = this.props.trait.description\r\n      desc = desc.split(\"\\n\\n\")\r\n      return desc.map(para => <span key={_.random(1, 2000000)}>{para}</span>)\r\n    }\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <span className=\"trait\">\r\n        <div className='show'><strong>{this.props.trait.name}</strong>: {this.renderDescription()}</div>\r\n        {this.state.deleteTraitButton ? <span><br/>Are you sure about that?<br/> <button onClick={(e) => this.deleteTraitConfirm(e, \"no\")}>No</button><button onClick={(e) => this.deleteTraitConfirm(e, \"yes\")}>Yes</button><br/><br/></span> : null}\r\n        {!this.state.deleteTraitButton && this.props.admin ? <button onClick={this.renderClick}>Edit</button> : null}\r\n        {this.state.toggleTraitForm ? this.renderForm() : null}\r\n        < br />\r\n      </span>\r\n    )\r\n  }\r\n}\r\n\r\n\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    currentUser: state.current,\r\n    admin: state.admin\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Trait)\r\n","import React from 'react'\r\n// import _ from 'lodash'\r\n\r\nimport Trait from './trait'\r\n\r\nclass Traits extends React.Component {\r\n\r\n  renderTraits = () => {\r\n\r\n    return this.props.race.racial_traits.map(trait => {\r\n\r\n      return <Trait key={trait.id} trait={trait}  race_name={this.props.race.name} renderRacialTrait={this.props.renderRacialTrait}/>\r\n    })\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <span>\r\n        {this.props.race.racial_traits && this.renderTraits()}\r\n      </span>\r\n    )\r\n  }\r\n\r\n\r\n\r\n}\r\n\r\nexport default Traits\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport localhost from '../localhost'\r\n\r\nclass NewRace extends React.Component {\r\n\r\n  state = {\r\n    name: \"\",\r\n    description: \"\",\r\n    size: \"Medium\",\r\n    speed: \"\",\r\n    abilityScoreModifiers: [{ability_score: \"\", bonus: 0}],\r\n    img_url: \"\",\r\n    deleteRaceButton: false\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.race){\r\n      this.setState({\r\n        name: this.props.race.name,\r\n        description: this.props.race.description,\r\n        size: this.props.race.size,\r\n        speed: this.props.race.speed,\r\n        abilityScoreModifiers: this.props.race.race_ability_score_modifiers,\r\n        img_url: this.props.race.img_url\r\n      })\r\n    }\r\n  }\r\n\r\n  renderSubmit = (e) => {\r\n    e.preventDefault()\r\n    fetch(`${localhost}/api/v1/races`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify(this.state)\r\n    })\r\n    .then(r => r.json())\r\n    .then(data => {\r\n      if (!data.error){\r\n        this.props.history.push(`/races/${data.race.name}`)\r\n        this.setState({name: \"\", description: \"\", size: \"Medium\", speed: 0, abilityScoreModifiers: [{ability_score: \"\", bonus: 0}], img_url: \"\"})\r\n      } else {\r\n        console.log(data.error)\r\n      }\r\n    })\r\n  }\r\n\r\n  renderChange = (e) => {\r\n    this.setState({[e.target.name]: e.target.value})\r\n  }\r\n\r\n  renderFormSubmit = (e) => {\r\n\r\n    if (this.props.renderRaceEdit){\r\n        this.props.renderRaceEdit(e, this.state)\r\n    } else {\r\n      this.renderSubmit(e)\r\n    }\r\n  }\r\n\r\n  renderForm = () => {\r\n    return (\r\n      <form onSubmit={(e) => this.renderFormSubmit(e)} >\r\n        <label>\r\n          Ancestry Name:\r\n          <input type=\"text\" name=\"name\" value={this.state.name} onChange={this.renderChange}/>\r\n        </label>\r\n        <br /><br />\r\n        <label>\r\n          Description:\r\n          <textarea type=\"textfield\" className=\"desc-box\" rows=\"6\" name=\"description\" value={this.state.description} onChange={this.renderChange}/>\r\n        </label>\r\n        <br /><br />\r\n        <label>\r\n          Size:\r\n          <select name=\"size\" value={this.state.size} onChange={this.renderChange}>\r\n            <option value= \"Fine\" >Fine</option>\r\n            <option value= \"Diminutive\" >Diminutive</option>\r\n            <option value= \"Tiny\" >Tiny</option>\r\n            <option value= \"Small\" >Small</option>\r\n            <option value= \"Medium\" >Medium</option>\r\n            <option value= \"Large\" >Large</option>\r\n            <option value= \"Huge\" >Huge</option>\r\n            <option value= \"Gargantuan\" >Gargantuan</option>\r\n            <option value= \"Colossal\" >Colossal</option>\r\n          </select>\r\n        </label>\r\n        <br /><br />\r\n        <label>\r\n          Speed:\r\n          <input type=\"number\" name=\"speed\" value={this.state.speed} onChange={this.renderChange}/>\r\n        </label>\r\n        < br />< br />\r\n        {this.mapAbilityScoreDynamicFields()}\r\n        <button onClick={(e) => this.addAbilityScoreModifierField(e, \"plus\")}>+</button>\r\n        {this.state.abilityScoreModifiers.length > 1 ? <button onClick={(e) => this.addAbilityScoreModifierField(e, \"minus\")}>-</button> : null}\r\n        < br />< br />\r\n        <label>\r\n          Image Link:\r\n          <input type=\"text\" name=\"img_url\" value={this.state.img_url} onChange={this.renderChange}/>\r\n        </label>\r\n        <br /><br />\r\n        <input type=\"submit\" name=\"submit\" />\r\n      </form>\r\n    )\r\n  }\r\n\r\n  mapAbilityScoreDynamicFields = () => {\r\n    return this.state.abilityScoreModifiers.map((val, idx)=> {\r\n      let abilityId = `ability-${idx}`, bonusId = `bonus-${idx}`\r\n      return (\r\n        <div key={idx}>\r\n          <label htmlFor={abilityId}>{`Ability Score Modifier #${idx + 1}`}</label>\r\n            <select name={abilityId} data-id={idx} id={abilityId} value={this.state.abilityScoreModifiers[idx].ability_score} className=\"ability_score\" onChange={this.renderDynamicChanges}>\r\n              <option value= \"\" >Choose One</option>\r\n              <option value= \"Strength\" >Strength</option>\r\n              <option value= \"Dexterity\" >Dexterity</option>\r\n              <option value= \"Constitution\" >Constitution</option>\r\n              <option value= \"Intelligence\" >Intelligence</option>\r\n              <option value= \"Wisdom\" >Wisdom</option>\r\n              <option value= \"Charisma\" >Charisma</option>\r\n              <option value= \"Any\" >Any</option>\r\n            </select>\r\n          <label htmlFor={bonusId}>Bonus</label>\r\n          <input\r\n            type=\"number\"\r\n            name={bonusId}\r\n            data-id={idx}\r\n            id={bonusId}\r\n            value = {this.state.abilityScoreModifiers[idx].bonus}\r\n            className=\"bonus\"\r\n            onChange={this.renderDynamicChanges}\r\n          />\r\n        </div>\r\n      )\r\n    })\r\n  }\r\n\r\n  addAbilityScoreModifierField = (e, change) => {\r\n    e.preventDefault()\r\n    if (change === \"plus\") {\r\n\r\n      this.setState({abilityScoreModifiers: [...this.state.abilityScoreModifiers, {ability_score: \"\", bonus: 0}]})\r\n    } else if (change === \"minus\") {\r\n      this.state.abilityScoreModifiers.pop()\r\n      this.setState({abilityScoreModifiers: this.state.abilityScoreModifiers})\r\n    }\r\n  }\r\n\r\n  renderDynamicChanges = (e) => {\r\n    if ([\"ability_score\", \"bonus\"].includes(e.target.className)){\r\n      let abilityScoreModifiers = [...this.state.abilityScoreModifiers]\r\n      abilityScoreModifiers[e.target.dataset.id][e.target.className] = e.target.value\r\n      this.setState({ abilityScoreModifiers })\r\n    }\r\n  }\r\n\r\n  deleteRace = () => {\r\n    this.setState({deleteRaceButton: !this.state.deleteRaceButton })\r\n  }\r\n\r\n  deleteRaceConfirm = (e, answer) => {\r\n    e.preventDefault();\r\n    if (answer === \"yes\") {\r\n      fetch(`${localhost}/api/v1/races/${this.props.race.id}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          race_id: this.props.race.id\r\n        })\r\n      })\r\n      .then(r => r.json())\r\n      .then(data => {\r\n        this.props.history.push('/races')\r\n        this.setState({deleteRaceButton: false})\r\n    })\r\n    } else if (answer === \"no\"){\r\n      this.setState({deleteRaceButton: false})\r\n    }\r\n  }\r\n\r\n  render() {\r\n    console.log(\"the state\", this.state)\r\n    console.log(\"the props\", this.props.race)\r\n    return (\r\n      <span>\r\n        {(this.props.toggleRaceForm || this.props.location.pathname === \"/ancestries-form\") ? this.renderForm() : null}\r\n        {this.props.race ? <button onClick={this.deleteRace}>Delete Ancestry</button> : null}\r\n        {this.state.deleteRaceButton ? <span><br/>Are you sure about that?<br/> <button onClick={(e) => this.deleteRaceConfirm(e, \"no\")}>No</button><button onClick={(e) => this.deleteRaceConfirm(e, \"yes\")}>Yes</button><br/><br/></span> : null}\r\n\r\n      </span>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(NewRace)\r\n","import React from 'react'\r\n// import _ from 'lodash'\r\n// import { Link } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport localhost from '../localhost'\r\n\r\n\r\nimport Introduction from '../components/race_show/introduction'\r\nimport Traits from '../components/race_show/trait_list'\r\nimport TraitForm from '../components/race_show/trait_form'\r\nimport RaceForm from  '../components/race_form'\r\n\r\nclass Race extends React.Component {\r\n\r\n  state ={\r\n    race : {},\r\n    toggleTraitForm: false,\r\n    toggleRaceForm: false\r\n  }\r\n\r\n  renderURL = () => {\r\n    let url = window.location.href\r\n    let urlArray = url.split(\"/\")\r\n    return urlArray[urlArray.length - 1]\r\n  }\r\n\r\n  componentDidMount() {\r\n    const raceId = this.renderURL()\r\n\t\tif (this.props.race){\r\n\t\t\tthis.setState({race: this.props.race})\r\n\t\t} else {\r\n\t\t\tfetch(`${localhost}/api/v1/races/${raceId}`)\r\n\t\t\t.then(r => r.json())\r\n\t\t\t.then(data => this.setState({race: data}))\r\n\t\t}\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  changeAddTraitToggle = () => {\r\n    this.setState({toggleTraitForm: !this.state.toggleTraitForm})\r\n  }\r\n  toggleRaceForm = () => {\r\n    this.setState({toggleRaceForm: !this.state.toggleRaceForm})\r\n  }\r\n\r\n  renderSubmit = (e, trait) => {\r\n    e.preventDefault()\r\n\r\n    fetch(`${localhost}/api/v1/racial_traits`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        race_id: this.state.race.id,\r\n        traits: trait\r\n      })\r\n    })\r\n    .then(r => r.json())\r\n    .then(data => {\r\n      if (!data.error){\r\n        this.renderRacialTrait(data)\r\n      } else {\r\n        console.log(data.error)\r\n      }\r\n    })\r\n  }\r\n\r\n  renderRaceEdit = (e, race_updates) => {\r\n    e.preventDefault()\r\n    fetch(`${localhost}/api/v1/races/${this.state.race.id}`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        race_id: this.state.race.id,\r\n        updates: race_updates\r\n      })\r\n    })\r\n    .then(r => r.json())\r\n    .then(data => {\r\n      if(!data.error){\r\n        this.setState({race: data.race, toggleRaceForm: false})\r\n      } else {\r\n        console.log(data.error)\r\n      }\r\n    })\r\n  }\r\n\r\n  renderRacialTrait = (newData) => {\r\n    let remappedTraits\r\n    if (Number.isInteger(newData)) {\r\n      remappedTraits = this.state.race.racial_traits.filter(trait => {\r\n        return trait.id !== newData\r\n      })\r\n    } else if (!this.state.race.racial_traits.find(el => el.id === newData.id)){\r\n      remappedTraits = this.state.race.racial_traits\r\n      remappedTraits.push(newData.racial_trait)\r\n    } else if (typeof newData === 'object'){\r\n      remappedTraits = this.state.race.racial_traits.map(trait => {\r\n        return trait.id === newData.id ? newData : trait\r\n      })\r\n    }\r\n    // console.log(\"this is the remapped traits\", remappedTraits)\r\n    // debugger\r\n    return this.setState({\r\n      race: {\r\n        ...this.state.race,\r\n        racial_traits: remappedTraits\r\n      },\r\n      toggleTraitForm: false\r\n    })\r\n  }\r\n\r\n\r\n  render() {\r\n    console.log(\"This is the race state\", this.state.race.race_ability_score_modifiers)\r\n    return (\r\n      <span className='roboto show'>\r\n        <Introduction race={this.state.race}/>\r\n        {this.props.admin ? <button onClick={this.toggleRaceForm}>{this.state.toggleRaceForm ? \"Hide Edit Race\" : \"Edit Race\"}</button> : null}\r\n        < br />\r\n        {this.state.toggleRaceForm ? <RaceForm toggleRaceForm={this.state.toggleRaceForm} race={this.state.race} renderRaceEdit={this.renderRaceEdit} history={this.props.history} /> : null }\r\n        <div className='header' style={{marginLeft: '2em'}}>Racial Traits</div>\r\n        <Traits race={this.state.race} renderRacialTrait={this.renderRacialTrait} />\r\n\r\n        {this.props.admin ? <button onClick={this.changeAddTraitToggle}>{this.state.toggleTraitForm ? \"Hide new Trait Form\" : \"Add a new Race Feature\"}</button> : null}\r\n        < br />\r\n        < br />\r\n        <TraitForm toggleTraitForm={this.state.toggleTraitForm} renderSubmit={this.renderSubmit}/>\r\n\r\n      </span>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Race)\r\n","import React from 'react'\r\nimport _ from 'lodash'\r\n\r\nclass Introduction extends React.Component {\r\n\r\n  renderDescription = () => {\r\n    if (this.props.skill.description){\r\n\r\n      let desc = this.props.skill.description\r\n      desc = desc.split(\"\\n\\n\")\r\n      return desc.map(para => <p key={_.random(1, 2000000)}>{para}</p>)\r\n    }\r\n  }\r\n\r\n\r\n  render () {\r\n    return (\r\n      <div className='show'>\r\n        <h2>{this.props.skill ? this.props.skill.name : null}</h2>\r\n        <p><strong>{this.props.skill && this.props.skill.ability_score ? this.props.skill.ability_score : null}{this.props.skill && !this.props.skill.untrained ? \"; Trained Only\" : null}{this.props.skill && (this.props.skill.abilityScore === \"Strength\" || this.props.skill.abilityScore === \"Dexterity\") ? \"; Armor Check Ability\" : null}</strong></p>\r\n        {this.renderDescription()}\r\n      </div>\r\n    )\r\n  }\r\n\r\n\r\n\r\n}\r\n\r\nexport default Introduction\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport localhost from '../localhost'\r\n\r\nimport Introduction from '../components/skill_show/introduction'\r\n\r\n\r\nclass Skill extends React.Component {\r\n\r\n  state ={\r\n    skill : {},\r\n  }\r\n\r\n  renderURL = () => {\r\n    let url = window.location.href\r\n    let urlArray = url.split(\"/\")\r\n    return urlArray[urlArray.length - 1]\r\n  }\r\n\r\n  componentDidMount() {\r\n    const skill = this.renderURL()\r\n    fetch(`${localhost}/api/v1/skills/${skill}`)\r\n    .then(r => r.json())\r\n    .then(data => this.setState({skill: data.skill}))\r\n  }\r\n\r\n  // <Introduction skill={this.state.skill}/>\r\n  // {this.props.admin ? <button onClick={this.toggleRaceForm}>{this.state.toggleRaceForm ? \"Hide Edit Race\" : \"Edit Race\"}</button> : null}\r\n  // < br />\r\n  // {this.state.toggleRaceForm ? <RaceForm toggleRaceForm={this.state.toggleRaceForm} skill={this.state.skill} renderRaceEdit={this.renderRaceEdit} history={this.props.history} /> : null }\r\n  // <div className='header' style={{marginLeft: '2em'}}>Racial Traits</div>\r\n  // <Traits skill={this.state.skill} renderRacialTrait={this.renderRacialTrait} />\r\n  //\r\n  // {this.props.admin ? <button onClick={this.changeAddTraitToggle}>{this.state.toggleTraitForm ? \"Hide new Trait Form\" : \"Add a new Race Feature\"}</button> : null}\r\n  // < br />\r\n  // < br />\r\n  // <TraitForm toggleTraitForm={this.state.toggleTraitForm} renderSubmit={this.renderSubmit}/>\r\n\r\n  render() {\r\n    console.log(this.state.skill)\r\n    return (\r\n      <span className='roboto show'>\r\n      <Introduction skill={this.state.skill}/>\r\n      {this.props.admin ? <button onClick={this.toggleSkillForm}>{this.state.toggleSkillForm ? \"Hide Edit Skill\" : \"Edit Skill\"}</button> : null}\r\n      </span>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\nreturn {\r\n  currentUser: state.currentUser,\r\n  admin: state.admin\r\n}\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Skill)\r\n","import React from 'react'\r\n\r\nconst CharacterHome = props => {\r\n\r\n\tconst renderName = () => {\r\n\t\treturn (\r\n\t\t\t<section id=\"new-character-home-name\" className=\"standard-container-bubble\">\r\n\t\t\t\t<label htmlFor=\"new-character-name\" className=\"new-character-label\"><strong>Character Name</strong></label>:\r\n\t\t\t\t<input className=\"new-character-text-input\" type=\"text\"id=\"new-character-name\" name=\"name\" value={props.name} onChange={props.renderChange} autocomplete=\"off\"/>\r\n\t\t\t</section>\r\n\t\t)\r\n\t}\r\n\r\n\tconst renderCampaignCode = () => {\r\n\t\treturn (\r\n\t\t\t<section id=\"new-character-home-campaign\" className=\"standard-container-bubble\">\r\n\t\t\t\t<label htmlFor=\"new-character-campaign\" className=\"new-character-label\"><strong>Campaign Code</strong></label>:\r\n\t\t\t\t<input className=\"new-character-text-input\" type=\"number\"id=\"new-character-campaign\" name=\"campaign_id\" value={props.campaign_id} onChange={props.renderChange} autocomplete=\"off\"/>\r\n\t\t\t\t{props.campaignDetails && <span>{props.campaignDetails.name}</span>}\r\n\t\t\t</section>\r\n\t\t)\r\n\t}\r\n\r\n\tconst renderSelectedCampaign = () => {\r\n\t\tconst { name, setting, theme, notes } = props.campaignDetails\r\n\t\treturn (\r\n\t\t\t<section id=\"character-creation-home-campaign-details\" className=\"standard-container-bubble\">\r\n\t\t\t\t<h4>{name}</h4>\r\n\t\t\t\t<p><strong>Theme:</strong> {theme}</p>\r\n\t\t\t\t<p><strong>Setting:</strong> {setting}</p>\r\n\t\t\t\t<p><strong>Notes:</strong> {notes}</p>\r\n\t\t\t</section>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<main id=\"character-creation-home\">\r\n\t\t\t{renderName()}\r\n\t\t\t{renderCampaignCode()}\r\n\t\t\t{props.campaignDetails?.id && renderSelectedCampaign()}\r\n\t\t</main>\r\n\t)\r\n}\r\n\r\nexport default CharacterHome\r\n","import React from 'react'\r\nimport _ from 'lodash'\r\nimport { withRouter, Link } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport { pluser } from '../../utils/fuf'\r\n\r\nconst Race = props => {\r\n\r\n\tconst [ ancestryDetails, setAncestryDetails ] = React.useState({\r\n    races: [],\r\n    raceAnyModifier: false\r\n  })\r\n\tconst [ showDetails, toggleDetails ] = React.useState(false)\r\n\r\n  const renderAnyChoiceField = () => {\r\n    if (!props.doesRacehaveAnyBonus){\r\n      props.renderdoesHaveAnyBonus()\r\n    }\r\n    return (\r\n      <div>\r\n        <label>For your Race, you can choose any one score to give a +2 bonus to any one Ability of your Choice!</label>\r\n        <select value={props.anyBonus} onChange={(e) => props.renderChange(e)} name='anyBonus'>\r\n          <option value= \"\" >Choose One</option>\r\n          <option value= \"Strength\" >Strength</option>\r\n          <option value= \"Dexterity\" >Dexterity</option>\r\n          <option value= \"Constitution\" >Constitution</option>\r\n          <option value= \"Intelligence\" >Intelligence</option>\r\n          <option value= \"Wisdom\" >Wisdom</option>\r\n          <option value= \"Charisma\" >Charisma</option>\r\n        </select>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const renderRaces = () => {\r\n    return props.races.map(race => {\r\n      return <option key={race.id} value={race.id}>{race.name}</option>\r\n    })\r\n  }\r\n\r\n  const renderRacialAbilityModifiers = () => {\r\n    let chosen = props.races.find(el => el.id === _.toNumber(props.chosenRaceId))\r\n    return <span>{renderAbilityScoreModifiers(chosen)}</span>\r\n  }\r\n\r\n  const renderAbilityScoreModifiers = (chosen) => {\r\n    let mods = chosen.race_ability_score_modifiers\r\n    let modStrings = []\r\n    mods.forEach(mod => {\r\n      if (mod.ability_score === 'Any' && !ancestryDetails.raceAnyModifier) {\r\n        setAncestryDetails({...ancestryDetails, raceAnyModifier: true})\r\n      }\r\n      let bonus = mod.bonus < 0 ? mod.bonus : `+${mod.bonus}`\r\n      modStrings.push(`${bonus} ${mod.ability_score}`)\r\n    })\r\n    return modStrings.join(\", \")\r\n  }\r\n\r\n\tconst renderAncestryCard = ancestry => {\r\n\t\t// let style = {border: \"4px solid transparent\"}\r\n\t\t// let styleID = \"\"\r\n\t\t// if (parseInt(props.chosenRaceId) === ancestry.id){\r\n\t\t// \tstyle = {}\r\n\t\t// \tstyleID += \"chosen-ancestry-card\"\r\n\t\t// }\r\n\t\treturn (\r\n\t\t\t<div className=\"dynamic-card\" style={{border: \"4px solid transparent\"}} onClick={() => props.renderAncestryChange(ancestry.id)}>\r\n\t\t\t\t<img className='dynamic-card-img' alt={ancestry.name} src={ancestry.img_url}></img>\r\n\t\t\t\t<p className='dynamic-card-content-button'> {ancestry.name} </p>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tconst renderAncestryOptions = () => {\r\n\t\tlet ancestries = props.races\r\n\t\tif (props.campaignDetails?.races.length > 1) {\r\n\t\t\tancestries = props.campaignDetails.races\r\n\t\t}\r\n\r\n\t\tlet ancestryCards = ancestries.filter(an => an.id !== props.chosenRaceId)\r\n\t\tlet chosenAncestry = ancestries.find(an => an.id === props.chosenRaceId)\r\n\r\n\t\tancestryCards = ancestryCards.sort((a, b) => a.name.localeCompare(b.name)).map(renderAncestryCard)\r\n\r\n\r\n\t\treturn (\r\n\t\t\t<section id=\"character-creation-ancestry-all\">\r\n\t\t\t\t{ancestryCards}\r\n\t\t\t</section>\r\n\t\t)\r\n\r\n\t\t// return (\r\n\t\t// \t<>\r\n\t\t// \t\t<label>Race Options </label>\r\n\t\t// \t\t\t<select name=\"race\" value={this.props.chosenRaceId} onChange={(e) => this.props.renderChange(e)}>\r\n\t\t// \t\t\t<option value= \"\" >Select One</option>\r\n\t\t// \t\t\t{this.props.races[0] ? this.renderRaces() : null}\r\n\t\t// \t\t</select>\r\n\t\t// \t\t{this.props.races[0] && this.props.chosenRaceId ? this.renderChosenRace() : null}\r\n\t\t// \t\t{this.props.races[0] && this.props.chosenRaceId ? this.renderRacialAbilityModifiers() : null}\r\n\t\t// \t\t{this.state.raceAnyModifier ? this.renderAnyChoiceField() : null}\r\n\t\t// \t</>\r\n\t\t// )\r\n\t}\r\n\r\n\tconst renderAncestryImage = () => {\r\n\t\tlet ancestry = props.races.find(an => an.id === props.chosenRaceId)\r\n\t\treturn (\r\n\t\t\t<div id=\"chosen-ancestry-card\" className=\"dynamic-card\" onClick={() => props.renderAncestryChange(ancestry.id)}>\r\n\t\t\t\t<img className='dynamic-card-img' alt={ancestry.name} src={ancestry.img_url}></img>\r\n\t\t\t\t<p className='dynamic-card-content-button'> {ancestry.name} </p>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tconst renderAncestryDetails = () => {\r\n\t\tlet selectedAncestry = props.races.find(a => a.id === props.chosenRaceId)\r\n\t\tconst { name, size, speed, description } = selectedAncestry\r\n\r\n\t\tlet abilityScores = selectedAncestry.race_ability_score_modifiers.map(asm => {\r\n\t\t\treturn `${pluser(asm.bonus)} ${asm.ability_score}`\r\n\t\t}).join(\", \")\r\n\r\n\t\tlet traits = selectedAncestry.racial_traits.map(tr => {\r\n\t\t\treturn <li><strong>{tr.name}:</strong> {tr.description}</li>\r\n\t\t})\r\n\r\n\t\tlet details = description.split(\"\\n\\n\").map(d => <p>{d}</p>)\r\n\r\n\t\treturn (\r\n\t\t\t<aside id=\"character-creation-ancestry-chosen\">\r\n\t\t\t\t<h4>{name}</h4>\r\n\t\t\t\t<p onClick={() => toggleDetails(!showDetails)}>{showDetails ? details : \"Show Details\"}</p>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li><strong>{abilityScores}</strong></li>\r\n\t\t\t\t\t<li><strong>Size:</strong> {size}</li>\r\n\t\t\t\t\t<li><strong>Speed:</strong> {speed} ft</li>\r\n\t\t\t\t\t{traits}\r\n\t\t\t\t</ul>\r\n\t\t\t</aside>\r\n\t\t)\r\n\t}\r\n\r\n\tconst className = !!props.chosenRaceId ? \"chosen-ancestry\" : \"\"\r\n\r\n  return (\r\n    <section id=\"character-creation-ancestry\" className={className}>\r\n\t\t\t{!props.chosenRaceId && renderAncestryOptions()}\r\n\t\t\t{!!props.chosenRaceId && renderAncestryImage()}\r\n\t\t\t{!!props.chosenRaceId && renderAncestryDetails()}\r\n\t\t\t{!!props.chosenRaceId && <button onClick={() => props.renderAncestryChange(0)}>Go Back</button>}\r\n    </section>\r\n  )\r\n\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n    races: state.races\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps)(Race))\r\n","import React from 'react'\r\n\r\nconst ClassTile = props => {\r\n\r\n\tconst [displayHoverButtons, toggleHoverButtons] = React.useState(false)\r\n\r\n\tconst buttons = () => {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<button onClick={() => props.renderClassChange(props.klass.id)}>+</button>\r\n\t\t\t\t<button onClick={() => props.displayChosenClass(props.klass.id)}>?</button>\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\tconst areHoverButtonsDisplayed = () => {\r\n\t\tif (!displayHoverButtons){\r\n\t\t\ttoggleHoverButtons(true)\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"dynamic-card\" style={{border: \"4px solid transparent\"}} onMouseEnter={() => toggleHoverButtons(true)} onMouseLeave={() => toggleHoverButtons(false)} onMouseOver={areHoverButtonsDisplayed}>\r\n\t\t\t<img className='dynamic-card-img' alt={props.klass.name} src={props.klass.img_url}></img>\r\n\t\t\t<p className='dynamic-card-content-button'>\r\n\t\t\t\t{props.klass.name}\r\n\t\t\t\t{displayHoverButtons && buttons()}\r\n\t\t\t</p>\r\n\t\t</div>\r\n\t)\r\n}\r\nexport default ClassTile\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nclass Tab extends React.Component {\r\n\r\n  renderCancel = () => {\r\n    if (this.props.allies && (this.props.character === \"Nettie\")){\r\n      return <button onClick={() => this.props.removeAlly(this.props.index)}>X</button>\r\n    }\r\n  }\r\n\r\n  render(){\r\n\r\n    let className = 'tab-list-item';\r\n\r\n    if (this.props.activeTab === this.props.label) {\r\n      className += ' tab-list-active';\r\n    }\r\n\r\n    return(\r\n      <span className={className} style={{borderColor: `#${this.props.settings.borderColor}`}} onClick={() => this.props.renderTabClick(this.props.label, this.props.index)}>\r\n        {this.props.label}\r\n        {this.renderCancel()}\r\n      </span>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n\t\tsettings: state.settings\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Tab)\r\n","import React from 'react'\r\nimport Tab from '../character_show/tab'\r\n\r\nconst ClassTabs = props => {\r\n\r\n\tconst tabOptions = () => {\r\n\t\tlet array = [\"Base Features\", \"Archetypes\"]\r\n\t\tif (props.optionsTabName){\r\n\t\t\tarray.push(props.optionsTabName)\r\n\t\t}\r\n\t\treturn array.map(lbl => {\r\n\t\t\treturn <Tab label={lbl} renderTabClick={props.renderTabClick} activeTab={props.activeTab}/>\r\n\t\t})\r\n\t}\r\n\r\n\treturn(\r\n\t\t<span className='tab-list'>\r\n\t\t\t{tabOptions()}\r\n\t\t</span>\r\n\t)\r\n}\r\n\r\nexport default ClassTabs\r\n","import Store from '../../store'\r\n\r\nconst { getState, dispatch } = Store\r\n\r\nexport const addArchetypesAction = (klassId, archetypes) => dispatch({type: 'STORE ARCHETYPES', klassId, archetypes})\r\nexport const addOptionsAction = (klassId, klassFeatureId, options) => dispatch({type: 'STORE OPTIONS', klassId, klassFeatureId, options})\r\n","import React from 'react'\r\nimport _ from 'lodash'\r\nimport { descriptionParser } from '../../utils/fuf'\r\n\r\nconst ArchetypeFeature = props => {\r\n\r\n\tconst { name, description } = props.feature\r\n\r\n\tconst renderDescription = () => {\r\n\t\treturn descriptionParser(description)\r\n\t}\r\n\r\n\tlet slug = name.toLowerCase().split(\" \").join(\"-\")\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<li id={slug} className=\"feature-title\"><strong>{name}</strong></li>\r\n\t\t\t<li>{renderDescription()}</li>\r\n\t\t</>\r\n\t)\r\n\r\n}\r\n\r\nexport default ArchetypeFeature\r\n","import React from 'react'\r\nimport ArchetypeFeature from './archetype_feature'\r\n\r\nconst ArchetypeShow = props => {\r\n\r\n\tconst [ displayFeatures, toggleDisplayFeatures ] = React.useState(false)\r\n\r\n\tconst { name, description, klass_archetype_features: features, id } = props.archetype\r\n\r\n\tconst renderBanner = () => {\r\n\t\tif (!displayFeatures){\r\n\t\t\treturn <h4><strong>{name}</strong></h4>\r\n\t\t} else {\r\n\t\t\treturn (\r\n\t\t\t\t<div style={{display: \"flex\", justifyContent: \"space-between\"}}>\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\t<h4><strong>{name}</strong></h4>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\t<button onClick={() => props.archetypeChange(id)}>{props.chosen ? \"Remove\" : \"Add\"} Archetype</button>\r\n\t\t\t\t\t\t<button onClick={collapseContent}>Collapse</button>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tconst archetypeFeatures = () => {\r\n\t\treturn features.map(feat => {\r\n\t\t\treturn <ArchetypeFeature feature={feat} />\r\n\t\t})\r\n\t}\r\n\r\n\tconst expandContent = () => {\r\n\t\tif (!displayFeatures){\r\n\t\t\ttoggleDisplayFeatures(true)\r\n\t\t\tprops.displayKlassArchetype(props.archetype)\r\n\t\t}\r\n\t}\r\n\r\n\tconst collapseContent = () => {\r\n\t\ttoggleDisplayFeatures(false)\r\n\t\tprops.displayKlassArchetype(props.archetype)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<li className=\"chosen-class-archetype\" onClick={expandContent}>\r\n\t\t\t{renderBanner()}\r\n\t\t\t<p>{description}</p>\r\n\t\t\t<ul>\r\n\t\t\t\t{displayFeatures && archetypeFeatures()}\r\n\t\t\t</ul>\r\n\t\t</li>\r\n\t)\r\n}\r\n\r\nexport default ArchetypeShow\r\n","import React from 'react'\r\nimport ArchetypeShow from '../components/archetypes/archetype_show'\r\n\r\nconst ClassArchetypes = props => {\r\n\r\n\tconst renderArchetypes = () => {\r\n\t\tif (!props.archetypes.length){ return null }\r\n\t\treturn props.archetypes.map(arch => {\r\n\t\t\tlet chosen = props.chosenArchetypeIds.includes(arch.id)\r\n\t\t\treturn <ArchetypeShow archetype={arch} displayKlassArchetype={props.displayKlassArchetype} archetypeChange={props.archetypeChange} chosen={chosen}/>\r\n\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<ul id=\"chosen-class-archetype-container\">\r\n\t\t\t{renderArchetypes()}\r\n\t\t</ul>\r\n\t)\r\n}\r\n\r\nexport default ClassArchetypes\r\n","import React from 'react'\r\n\r\nconst OptionShow = props => {\r\n\r\n\r\n\tconst { name, description } = props.option\r\n\r\n\t// const renderBanner = () => {\r\n\t// \tif (!displayFeatures){\r\n\t// \t\treturn <h4><strong>{name}</strong></h4>\r\n\t// \t} else {\r\n\t// \t\treturn (\r\n\t// \t\t\t<div style={{display: \"flex\", justifyContent: \"space-between\"}}>\r\n\t// \t\t\t\t<span>\r\n\t// \t\t\t\t\t<h4><strong>{name}</strong></h4>\r\n\t// \t\t\t\t</span>\r\n\t// \t\t\t\t<span>\r\n\t// \t\t\t\t\t<button onClick={() => props.archetypeChange(id)}>{props.chosen ? \"Remove\" : \"Add\"} Archetype</button>\r\n\t// \t\t\t\t\t<button onClick={collapseContent}>Collapse</button>\r\n\t// \t\t\t\t</span>\r\n\t// \t\t\t</div>\r\n\t// \t\t)\r\n\t// \t}\r\n\t// }\r\n\t//\r\n\t// const archetypeFeatures = () => {\r\n\t// \treturn features.map(feat => {\r\n\t// \t\treturn <ArchetypeFeature feature={feat} />\r\n\t// \t})\r\n\t// }\r\n\t//\r\n\t// const expandContent = () => {\r\n\t// \tif (!displayFeatures){\r\n\t// \t\ttoggleDisplayFeatures(true)\r\n\t// \t\tprops.displayKlassArchetype(props.archetype)\r\n\t// \t}\r\n\t// }\r\n\t//\r\n\t// const collapseContent = () => {\r\n\t// \ttoggleDisplayFeatures(false)\r\n\t// \tprops.displayKlassArchetype(props.archetype)\r\n\t// }\r\n\r\n\treturn (\r\n\t\t<li className=\"chosen-class-option\">\r\n\t\t\t<h4>{name}</h4>\r\n\t\t\t<p>{description}</p>\r\n\t\t</li>\r\n\t)\r\n}\r\n\r\nexport default OptionShow\r\n","import React from 'react'\r\nimport OptionShow from '../components/class_show/option_show'\r\n\r\nconst ClassOptions = props => {\r\n\r\n\tconst renderOptions = () => {\r\n\t\treturn props.options.map(opt => {\r\n\t\t\treturn <OptionShow option={opt} />\r\n\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<ul id=\"chosen-class-options-container\">\r\n\t\t\t{renderOptions()}\r\n\t\t</ul>\r\n\t)\r\n}\r\n\r\nexport default ClassOptions\r\n","import React from 'react'\r\nimport _ from 'lodash'\r\nimport { withRouter, Link } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport localhost from '../../localhost'\r\nimport ClassTile from './class_tile'\r\nimport ClassShow from '../../container/class_show'\r\nimport ClassTable from '../class_show/table'\r\nimport ClassTabs from './class_tabs'\r\nimport { getFetch } from '../../utils/fetches'\r\nimport { addArchetypesAction, addOptionsAction } from '../../utils/action_creator/classes'\r\nimport { doesKlassFeatureHaveOptions } from '../../utils/calculations/class'\r\nimport ClassArchetypes from '../../container/class_archetypes'\r\nimport ClassOptions from '../../container/class_options'\r\n\r\nconst Class = props => {\r\n\r\n  const [ classDetails, setClassDetails ] = React.useState({\r\n    classes: [],\r\n    activeSkillset: 0,\r\n    skillsets: {},\r\n\t\tviewSpecificClassDetails: 0,\r\n\t\tviewSpecificArchetype: {},\r\n\t\tactiveTab: \"Base Features\",\r\n\t\thasOptions: false,\r\n\t\toptionsTabName: null\r\n  })\r\n\t//\r\n  // componentDidMount = () => {\r\n  //   fetch(`${localhost}/api/v1/klasses`)\r\n  //   .then(r => r.json())\r\n  //   .then(data => {\r\n  //     this.setState({classes: data})\r\n  //   })\r\n  // }\r\n\r\n\tReact.useEffect(() => {\r\n\t\tif (classDetails.viewSpecificClassDetails){\r\n\t\t\tlet klass = props.classes.find(kl => kl.id === classDetails.viewSpecificClassDetails)\r\n\t\t\tif (!klass.archetypes){\r\n\t\t\t\tgetFetch(`klasses/${classDetails.viewSpecificClassDetails}/archetypes`)\r\n\t\t\t\t.then(data => {\r\n\t\t\t\t\tif (!data.error){\r\n\t\t\t\t\t\taddArchetypesAction(klass.id, data)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tlet id = doesKlassFeatureHaveOptions(klass)\r\n\t\t\tif (id){\r\n\t\t\t\tgetFetch(`klass_features/${id}/options`)\r\n\t\t\t\t\t.then(data => {\r\n\t\t\t\t\t\tif (!data.error){\r\n\t\t\t\t\t\t\taddOptionsAction(klass.id, id, data)\r\n\t\t\t\t\t\t\tlet optionsTabName = klass.klass_features.find(kf => kf.id === id)?.name\r\n\t\t\t\t\t\t\tsetClassDetails({...classDetails, hasOptions: true, optionsTabName})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}, [classDetails.viewSpecificClassDetails])\r\n\r\n  const renderClasses = () => {\r\n    return props.classes.map(klass => {\r\n      return <option key={klass.id} value={klass.id}>{klass.name}</option>\r\n    })\r\n  }\r\n\r\n\tconst chosenClasses = () => {\r\n\t\tlet arr = [...props.chosenClasses, 0]\r\n\t\treturn arr.map((klid, idx) => {\r\n\t\t\tif (klid > 0){\r\n\t\t\t\tlet klass = props.classes.find(kl => kl.id == klid)\r\n\t\t\t\tlet button = null\r\n\t\t\t\tif (idx == arr.length - 2){\r\n\t\t\t\t\tbutton = <button onClick={props.removeLatestClass}> - </button>\r\n\t\t\t\t}\r\n\t\t\t\treturn <li className=\"selected-class-list-item\"><span>Level {idx+1} - {klass.name}</span>{button}</li>\r\n\t\t\t} else {\r\n\t\t\t\treturn <li className=\"empty-class-list-item\">Level {idx+1}</li>\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n  const displayChosenClass = (id) => {\r\n\t\tif (id === classDetails.viewSpecificClassDetails){\r\n\t\t\tsetClassDetails({...classDetails, viewSpecificClassDetails: 0})\r\n\t\t} else {\r\n\t\t\tsetClassDetails({...classDetails, viewSpecificClassDetails: id})\r\n\t\t}\r\n  }\r\n\r\n\tconst displayKlassArchetype = (arch) => {\r\n\t\tif (arch.id === classDetails.viewSpecificArchetype.id){\r\n\t\t\tsetClassDetails({...classDetails, viewSpecificArchetype: {}})\r\n\t\t} else {\r\n\t\t\tsetClassDetails({...classDetails, viewSpecificArchetype: arch})\r\n\t\t}\r\n\t}\r\n\r\n  const mapClassDynamicFields = () => {\r\n    return props.classes.map((val, idx)=> {\r\n      let classId = `class-${idx}`\r\n      return (\r\n        <div key={idx}>\r\n          <label htmlFor={classId}>{`Class #${idx + 1}`} </label>\r\n            <select\r\n              name={classId}\r\n              value={props.classes[idx]}\r\n              onChange={(e) => props.renderDynamicChanges(e, idx)}\r\n            >\r\n              <option value= \"\" >Choose One</option>\r\n              {props.classes && renderClasses()}\r\n            </select>\r\n            {`Level ${idx + 1}`}\r\n        </div>\r\n      )\r\n    })\r\n  }\r\n\r\n  const checkForValidLevels = () => {\r\n    let valid = true\r\n    props.classes.forEach(klass => {\r\n      if (klass.level > 20 || klass.level < 1){\r\n        valid = false\r\n      }\r\n    })\r\n    if (!valid) {\r\n      return <div>You must choose a class level between 1 and 20!</div>\r\n    }\r\n  }\r\n\r\n\r\n  // <label>\r\n  //   Class Options:\r\n  //   <select name=\"class\" value={this.props.chosenClassId} onChange={(e) => this.props.renderChange(e)}>\r\n  //     <option value= \"\" >Select One</option>\r\n  //     {this.props.classes[0] ? this.renderClasses() : null}\r\n  //   </select>\r\n  // </label>\r\n\r\n\tconst renderClassOptions = () => {\r\n\t\tlet classes = props.classes ?? []\r\n\t\tif (props.campaignDetails?.klasses.length > 1) {\r\n\t\t\tclasses = props.campaignDetails.klasses\r\n\t\t}\r\n\t\tlet classCards = classes.sort((a,b) => a.name.localeCompare(b.name)).map(klass => <ClassTile klass={klass} renderClassChange={props.renderClassChange} displayChosenClass={displayChosenClass}/>)\r\n\t\treturn (\r\n\t\t\t<section style={{display: \"flex\", flexWrap: \"wrap\"}}>\r\n\t\t\t\t{classCards}\r\n\t\t\t</section>\r\n\t\t)\r\n\t}\r\n\r\n\t// const renderClassImage = () => {\r\n\t// \tlet klass = props.classes.find(kl => kl.id === classDetails.viewSpecificClassDetails)\r\n\t// \treturn (\r\n\t// \t\t<div id=\"chosen-class-card\" className=\"dynamic-card\" onClick={() => displayChosenClass(klass.id)}>\r\n\t// \t\t\t<img className='dynamic-card-img' alt={klass.name} src={klass.img_url}></img>\r\n\t// \t\t\t<p className='dynamic-card-content-button'> {klass.name} </p>\r\n\t// \t\t</div>\r\n\t// \t)\r\n\t// }\r\n\r\n\tconst renderTabs = () => {\r\n\r\n\t\tconst renderTabClick = (tab) => {\r\n\t\t\tlet resetSpecificArchetype = classDetails.viewSpecificArchetype\r\n\t\t\tif (tab !== \"Archetypes\"){\r\n\t\t\t\tresetSpecificArchetype = {}\r\n\t\t\t}\r\n\r\n\t\t\tsetClassDetails({...classDetails, activeTab: tab, viewSpecificArchetype: resetSpecificArchetype})\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<nav id=\"chosen-class-tabs\">\r\n\t\t\t\t<ClassTabs activeTab={classDetails.activeTab} renderTabClick={renderTabClick} optionsTabName={classDetails.optionsTabName}/>\r\n\t\t\t</nav>\r\n\t\t)\r\n\t}\r\n\r\n\tconst renderClassTable = () => {\r\n\t\tlet klass = props.classes.find(kl => kl.id === classDetails.viewSpecificClassDetails)\r\n\t\tlet archetypes = props.chosenArchetypes.map(id => {\r\n\t\t\tif (!klass.archetypes){return null}\r\n\t\t\treturn klass.archetypes.find(klar => klar.id === id) || null\r\n\t\t})\r\n\t\tarchetypes = archetypes.filter(arch => arch)\r\n\t\treturn (\r\n\t\t\t<div id=\"chosen-class-card\">\r\n\t\t\t\t<ClassTable klass={klass} activeArchetype={classDetails.viewSpecificArchetype} chosenArchetypes={archetypes}/>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tconst archetypeChange = (id) => {\r\n\t\tsetClassDetails({...classDetails, viewSpecificArchetype: {}, activeTab: \"Base Features\", hasOptions: false})\r\n\t\tprops.archetypeChange(id)\r\n\t}\r\n\r\n\tconst renderClassDetails = () => {\r\n\t\tlet klass = props.classes.find(kl => kl.id === classDetails.viewSpecificClassDetails)\r\n\t\tlet archetypes = props.chosenArchetypes.map(id => {\r\n\t\t\tif (!klass.archetypes){return null}\r\n\t\t\treturn klass.archetypes.find(klar => klar.id === id) || null\r\n\t\t})\r\n\t\tarchetypes = archetypes.filter(arch => arch)\r\n\t\tlet optionsId = doesKlassFeatureHaveOptions(klass)\r\n\t\tlet options = klass.klass_features.find(kf => kf.id === optionsId)?.options\r\n\r\n\t\tlet content\r\n\t\tswitch (classDetails.activeTab){\r\n\t\t\tcase \"Base Features\":\r\n\t\t\t\tcontent = <ClassShow klass={klass} options={{displayImage: false, displayDescription: false, displayTable: false}} chosenArchetypes={archetypes}/>\r\n\t\t\t\tbreak\r\n\t\t\tcase \"Archetypes\":\r\n\t\t\t\tcontent = <ClassArchetypes archetypes={klass.archetypes} displayKlassArchetype={displayKlassArchetype} chosenArchetypeIds={props.chosenArchetypes} archetypeChange={archetypeChange}/>\r\n\t\t\t\tbreak\r\n\t\t\tcase `${classDetails.optionsTabName}`:\r\n\t\t\t\tcontent = <ClassOptions options={options} />\r\n\t\t\t\tbreak\r\n\t\t\tdefault:\r\n\t\t\t\tcontent = <ClassShow klass={klass} options={{displayImage: false, displayDescription: false, displayTable: false}}/>\r\n\t\t\t\tbreak\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<aside id=\"character-creation-class-chosen-details\">\r\n\t\t\t\t{content}\r\n\t\t\t</aside>\r\n\t\t)\r\n\t}\r\n\r\n\t// <span>Class Options </span>\r\n\t// <br/>\r\n\t// <button onClick={(e) => this.props.addClassField(e, \"plus\", this.props.classes.length-1)}>{`Level ${this.props.classes.length + 1}`}</button>\r\n\t// {this.mapClassDynamicFields()}\r\n\t// {this.props.classes.length > 1 ? <button onClick={(e) => this.props.addClassField(e, \"minus\")}>Delevel</button> : null}\r\n\t// {this.checkForValidLevels()}\r\n\t// {this.props.classes[0] && this.props.chosenClassId ? this.renderChosenClass() : null}\r\n\r\n\tconst className = !!classDetails.viewSpecificClassDetails ? \"chosen-class\" : \"\"\r\n\tconst id = !!classDetails.viewSpecificClassDetails ? \"character-creation-chosen-class\" : \"character-creation-class\"\r\n\r\n  return (\r\n    <section id=\"character-creation-class\">\r\n\t\t\t<ul>{chosenClasses()}</ul>\r\n\t\t\t{!classDetails.viewSpecificClassDetails && renderClassOptions()}\r\n\t\t\t<section className={className}>\r\n\t\t\t\t{!!classDetails.viewSpecificClassDetails && renderClassTable()}\r\n\t\t\t\t{!!classDetails.viewSpecificClassDetails && renderTabs()}\r\n\t\t\t\t{!!classDetails.viewSpecificClassDetails && renderClassDetails()}\r\n\t\t\t\t{!!classDetails.viewSpecificClassDetails && <button onClick={() => setClassDetails({...classDetails, viewSpecificClassDetails: 0, viewSpecificArchetype: {}, activeTab: \"Base Features\", hasOptions: false, optionsTabName: null})}>Go Back</button>}\r\n\t\t\t</section>\r\n    </section>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n\t\tclasses: state.classes\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps)(Class))\r\n","import React from 'react'\r\nimport _ from 'lodash'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport { mod, pluser } from '../../utils/fuf'\r\n\r\nclass AbilityForm extends React.Component{\r\n\r\n  state = {\r\n    numbers: []\r\n  }\r\n\r\n  generateRandomAbilityScores = () => {\r\n    let array = []\r\n    for (var i = 0; i < 6; i++){\r\n      array.push(this.generateOneScore())\r\n    }\r\n    this.setState({numbers: array})\r\n  }\r\n\r\n  generateOneScore = () => {\r\n    const score = []\r\n    for (var i = 0; i < 4; i++){\r\n      score.push(_.random(1,6))\r\n    }\r\n\r\n    score.sort((a, b) => b - a)\r\n    score.pop()\r\n    return score.reduce((agg, el) => {\r\n      return agg + el\r\n    })\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div id=\"new-character-details-ability-scores\" className=\"standard-container-bubble\">\r\n        <p> You can roll your own numbers, or you can generate some sample scores with the button below! Place the numbers to whatever score you'd like, or map them directly to the ability scores in order!{this.state.numbers.length === 6 ? <p style={{textAlign: \"center\"}}>{this.state.numbers.join(\", \")}</p> : <p  style={{textAlign: \"center\"}}>0, 0, 0, 0, 0, 0</p>}</p>\r\n\r\n        <button onClick={this.generateRandomAbilityScores}>Generate 6 numbers!</button>\r\n        {this.state.numbers.length === 6 && <button onClick={() => this.props.mapAbilityScores(this.state.numbers)}>Map directly to Abilities!</button>}\r\n        <br /><br />\r\n        <div id=\"character-creation-display-ability-scores\" >\r\n          <label className=\"new-character-label\"><strong>Strength</strong></label>\r\n            <input type=\"number\" name=\"strength\" className=\"new-character-text-input\" value={this.props.strength} onChange={this.props.renderChange}/>\r\n\t\t\t\t\t\t<span> Modifier: {pluser(mod(this.props.strength))}</span>\r\n\r\n          <label className=\"new-character-label\"><strong>Dexterity</strong></label>\r\n            <input type=\"number\" name=\"dexterity\" className=\"new-character-text-input\" value={this.props.dexterity} onChange={this.props.renderChange}/>\r\n\t\t\t\t\t\t<span> Modifier: {pluser(mod(this.props.dexterity))}</span>\r\n\r\n          <label className=\"new-character-label\"><strong>Constitution</strong></label>\r\n            <input type=\"number\" name=\"constitution\" className=\"new-character-text-input\" value={this.props.constitution} onChange={this.props.renderChange}/>\r\n\t\t\t\t\t\t<span> Modifier: {pluser(mod(this.props.constitution))}</span>\r\n\r\n          <label className=\"new-character-label\"><strong>Intelligence</strong></label>\r\n            <input type=\"number\" name=\"intelligence\" className=\"new-character-text-input\" value={this.props.intelligence} onChange={this.props.renderChange}/>\r\n\t\t\t\t\t\t<span> Modifier: {pluser(mod(this.props.intelligence))}</span>\r\n\r\n          <label className=\"new-character-label\"><strong>Wisdom</strong></label>\r\n            <input type=\"number\" name=\"wisdom\" className=\"new-character-text-input\" value={this.props.wisdom} onChange={this.props.renderChange}/>\r\n\t\t\t\t\t\t<span> Modifier: {pluser(mod(this.props.wisdom))}</span>\r\n\r\n          <label className=\"new-character-label\"><strong>Charisma</strong></label>\r\n            <input type=\"number\" name=\"charisma\" className=\"new-character-text-input\" value={this.props.charisma} onChange={this.props.renderChange}/>\r\n\t\t\t\t\t\t<span> Modifier: {pluser(mod(this.props.charisma))}</span>\r\n\t\t\t\t</div>\r\n      </div>\r\n\r\n    )\r\n  }\r\n\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps)(AbilityForm))\r\n","import React from 'react'\r\nimport AbilityForm from './ability_scores'\r\n// import _ from 'lodash'\r\n\r\nconst Details = props => {\r\n\r\n  const renderAlignment = () => {\r\n    return (\r\n      <section id=\"new-characte-details-alignment\" className=\"standard-container-bubble\">\r\n        <section className=\"square-container-9\">\r\n          <button className=\"square-btn top-left-corner\" style={{backgroundColor: selectedAlignment(\"Lawful Good\")}} name=\"alignment\" value=\"Lawful Good\" onClick={props.renderChange}>LG</button>\r\n          <button className=\"square-btn\" style={{backgroundColor: selectedAlignment(\"Neutral Good\")}} name=\"alignment\" value=\"Neutral Good\" onClick={props.renderChange}>NG</button>\r\n          <button className=\"square-btn top-right-corner\" style={{backgroundColor: selectedAlignment(\"Chaotic Good\")}} name=\"alignment\" value=\"Chaotic Good\" onClick={props.renderChange}>CG</button>\r\n          <button className=\"square-btn\" style={{backgroundColor: selectedAlignment(\"Lawful Neutral\")}} name=\"alignment\" value=\"Lawful Neutral\" onClick={props.renderChange}>LN</button>\r\n          <button className=\"square-btn\" style={{backgroundColor: selectedAlignment(\"Neutral\")}} name=\"alignment\" value=\"Neutral\" onClick={props.renderChange}>N</button>\r\n          <button className=\"square-btn\" style={{backgroundColor: selectedAlignment(\"Chaotic Neutral\")}} name=\"alignment\" value=\"Chaotic Neutral\" onClick={props.renderChange}>CN</button>\r\n          <button className=\"square-btn bottom-left-corner\" style={{backgroundColor: selectedAlignment(\"Lawful Evil\")}} name=\"alignment\" value=\"Lawful Evil\" onClick={props.renderChange}>LE</button>\r\n          <button className=\"square-btn\" style={{backgroundColor: selectedAlignment(\"Neutral Evil\")}} name=\"alignment\" value=\"Neutral Evil\" onClick={props.renderChange}>NE</button>\r\n          <button className=\"square-btn bottom-right-corner\" style={{backgroundColor: selectedAlignment(\"Chaotic Evil\")}} name=\"alignment\" value=\"Chaotic Evil\" onClick={props.renderChange}>CE</button>\r\n          <button style={{gridArea: \"clear\", padding: \"0.5em\", height: \"2.5em\", marginTop: \"0.5em\"}} value=\"\" name=\"alignment\" onClick={props.renderChange}>Clear Alignment</button>\r\n        </section>\r\n      </section>\r\n    )\r\n  }\r\n\r\n  const selectedAlignment = (al) => {\r\n    return props.alignment === al ? \"#9b111e\" : \"#fff\"\r\n  }\r\n\r\n  const renderName = () => {\r\n    return (\r\n      <section id=\"new-character-details-name\" className=\"standard-container-bubble\">\r\n\t\t\t\t<label htmlFor=\"new-character-name\" className=\"new-character-label\"><strong>Character Name</strong></label>:\r\n\t\t\t\t<input className=\"new-character-text-input\" type=\"text\"id=\"new-character-name\" name=\"name\" value={props.name} onChange={props.renderChange} autocomplete=\"off\"/>\r\n      </section>\r\n    )\r\n  }\r\n\r\n  const renderCampaign = () => {\r\n    return (\r\n      <section id=\"new-character-details-campaign\" className=\"standard-container-bubble\">\r\n\t\t\t\t<label htmlFor=\"new-character-campaign\" className=\"new-character-label\"><strong>Campaign Code</strong></label>:\r\n\t\t\t\t<input className=\"new-character-text-input\" type=\"number\"id=\"new-character-campaign\" name=\"campaign_id\" value={props.campaign_id} onChange={props.renderChange} autocomplete=\"off\"/>\r\n\t\t\t\t{props.campaignDetails && <span>{props.campaignDetails.name}</span>}\r\n      </section>\r\n    )\r\n  }\r\n\r\n\t// const renderAbilityForm = () => {\r\n\t// \treturn (\r\n\t// \t\t\t<AbilityForm renderChange={props.renderChange} strength={props.strength}  dexterity={props.dexterity} constitution={props.constitution} intelligence={props.intelligence} wisdom={props.wisdom} charisma={props.charisma} mapAbilityScores={props.mapAbilityScores}/>\r\n\t// \t)\r\n\t// }\r\n\r\n  const renderDescription = () => {\r\n    return (\r\n      <section id=\"new-character-details-description\" className=\"standard-container-bubble\">\r\n\t\t\t\t<span style={{gridArea: \"description\"}}>\r\n        \t<label htmlFor=\"new-character-description\" className=\"new-character-label\"><strong>Description</strong></label>:\r\n        \t<textarea className=\"new-character-text-input\" type=\"textfield\" rows=\"6\" id=\"new-character-description\" name=\"description\" value={props.description} onChange={props.renderChange} placeholder=\"Appearance, outfit, aesthetic, attitude, etc.\" autocomplete=\"off\"/>\r\n\t\t\t\t</span>\r\n\r\n\t\t\t\t<span style={{gridArea: \"background\"}}>\r\n        \t<label htmlFor=\"new-character-background\" className=\"new-character-label\"><strong>Background</strong></label>:\r\n        \t<textarea className=\"new-character-text-input\" type=\"textfield\" rows=\"6\" id=\"new-character-background\" name=\"background\" value={props.background} onChange={props.renderChange} placeholder=\"Family, motivation, goals, experiences, education, career, training, upbringing, etc.\" autocomplete=\"off\"/>\r\n\t\t\t\t</span>\r\n\r\n\t\t\t\t<span style={{gridArea: \"extras\"}}>\r\n\t\t\t\t\t<div>\r\n\t        \t<label htmlFor=\"new-character-age\" className=\"new-character-label\"><strong>Age</strong></label>:\r\n\t        \t<input className=\"new-character-text-input\" type=\"number\" id=\"new-character-age\" name=\"age\" value={props.age} onChange={props.renderChange} placeholder=\"25\" autocomplete=\"off\"/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div>\r\n\t        \t<label htmlFor=\"new-character-gender\" className=\"new-character-label\"><strong>Gender</strong></label>:\r\n\t        \t<input className=\"new-character-text-input\" type=\"text\" id=\"new-character-gender\" name=\"gender\" value={props.gender} onChange={props.renderChange} placeholder=\"Non-Binary\" autocomplete=\"off\"/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div>\r\n\t        \t<label htmlFor=\"new-character-hair\" className=\"new-character-label\"><strong>Hair</strong></label>:\r\n\t        \t<input className=\"new-character-text-input\" type=\"text\" id=\"new-character-hair\" name=\"hair\" value={props.hair} onChange={props.renderChange} placeholder=\"too much\" autocomplete=\"off\"/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div>\r\n\t        \t<label htmlFor=\"new-character-eyes\" className=\"new-character-label\"><strong>Eye Color</strong></label>:\r\n\t        \t<input className=\"new-character-text-input\" type=\"text\" id=\"new-character-eyes\" name=\"eyes\" value={props.eyes} onChange={props.renderChange} placeholder=\"piercing\" autocomplete=\"off\"/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div>\r\n\t        \t<label htmlFor=\"new-character-height\" className=\"new-character-label\"><strong>Height</strong></label>:\r\n\t        \t<input className=\"new-character-text-input\" type=\"text\" id=\"new-character-height\" name=\"height\" value={props.height} onChange={props.renderChange} placeholder=\"just so\" autocomplete=\"off\"/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div>\r\n\t        \t<label htmlFor=\"new-character-weight\" className=\"new-character-label\"><strong>Weight</strong></label>:\r\n\t        \t<input className=\"new-character-text-input\" type=\"text\" id=\"new-character-weight\" name=\"weight\" value={props.weight} onChange={props.renderChange} placeholder=\"just right\" autocomplete=\"off\"/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<label htmlFor=\"new-character-homeland\" className=\"new-character-label\"><strong>Homeland</strong></label>:\r\n\t\t\t\t\t\t<input className=\"new-character-text-input\" type=\"text\" id=\"new-character-homeland\" name=\"homeland\" value={props.homeland} onChange={props.renderChange} placeholder=\"Arcadia\" autocomplete=\"off\"/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<label htmlFor=\"new-character-deity\" className=\"new-character-label\"><strong>Deity</strong></label>:\r\n\t\t\t\t\t\t<input className=\"new-character-text-input\" type=\"text\" id=\"new-character-deity\" name=\"deity\" value={props.deity} onChange={props.renderChange} placeholder=\"Pharasma\" autocomplete=\"off\"/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</span>\r\n\r\n      </section>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <section id=\"new-character-details\">\r\n      {renderName()}\r\n\t\t\t{renderCampaign()}\r\n      {renderAlignment()}\r\n      {renderDescription()}\r\n    </section>\r\n  )\r\n}\r\n\r\n\r\nexport default Details\r\n","import store from '../../store'\r\n\r\nexport const proficientWeapons = () => {\r\n\r\n}\r\n\r\nexport const proficientArmors = () => {\r\n\r\n}\r\n\r\nexport const areYouProficientWithThisWeapon = () => {\r\n\r\n}\r\n\r\nexport const proficienctWithCurrentArmor = () => {\r\n\treturn areYouProficientWithThisArmor(currentEquippedCharacterArmor())\r\n}\r\n\r\nexport const areYouProficientWithThisArmor = (characterArmor) => {\r\n\tconst { armor } = store.getState().character_info.proficiencies\r\n\tlet isProficient = false\r\n\r\n\tarmor.groups.forEach(gr => {\r\n\t\tif (characterArmor.armor.proficiency === gr.proficiency_group){\r\n\t\t\tisProficient = true\r\n\t\t}\r\n\t})\r\n\r\n\tarmor.individualIds.forEach(ii => {\r\n\t\tif (ii.armor_id === characterArmor.armor.id){\r\n\t\t\tif (ii.additive){\r\n\t\t\t\tisProficient = true\r\n\t\t\t} else {\r\n\t\t\t\tisProficient = false\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\r\n\treturn isProficient\r\n}\r\n\r\nexport const currentEquippedCharacterArmor = () => {\r\n\tconst { character_armors } = store.getState().character\r\n\treturn character_armors.find(ca => ca.equipped) ||  false\r\n}\r\n\r\nexport const armorCheckPenalty = () => {\r\n\tlet ceca = currentEquippedCharacterArmor()\r\n\tlet penalty = ceca.armor?.armor_check_penalty || 0\r\n\tif (penalty < 0 && ceca.masterwork){\r\n\t\tpenalty += 1\r\n\t}\r\n\treturn penalty\r\n}\r\n\r\nexport const armorCheckPenaltyOnOtherAbilities = () =>{\r\n\tlet characterArmor = currentEquippedCharacterArmor()\r\n\treturn (!characterArmor || areYouProficientWithThisArmor(characterArmor)) ? 0 : characterArmor.armor.armor_check_penalty\r\n}\r\n","import React from 'react'\r\nimport store from '../../store'\r\nimport { abilityScoreMod } from './ability_scores'\r\nimport { stealthSizeMod } from './size'\r\nimport { armorCheckPenalty } from './proficiencies'\r\nimport { pluser } from '../../fuf'\r\nimport { locateAbility, locateFeatureThroughAbility } from '../fuf'\r\nimport { modalAction } from '../action_creator/popups'\r\n\r\nexport const skillBonusArray = (skillObj) => {\r\n\tlet permanent = 0\r\n\tlet temporary = 0\r\n\r\n\tconst { character, character_info } = store.getState()\r\n\r\n\t// are there ranks\r\n\tlet ranks = skillRanks(skillObj, character)\r\n\tpermanent += ranks\r\n\r\n\t// is this a class skill?\r\n\tlet classSkill = isThisAClassSkill(skillObj, character)\r\n\tpermanent += (ranks > 0 && classSkill) ? 3 : 0\r\n\r\n\t// += ability score\r\n\tlet mod = abilityScoreMod(skillObj.ability_score.toLowerCase())\r\n\tpermanent += mod\r\n\r\n\t// any bonuses?\r\n\tlet bonuses = calculateBonuses(skillObj, character_info, character)\r\n\tpermanent += bonuses.permanent.map(b => b.bonus).reduce((b, agg) => (agg + b), 0)\r\n\ttemporary += bonuses.temporary.map(b => b.bonus).reduce((b, agg) => (agg + b), 0)\r\n\tif (skillObj.name === \"Stealth\"){permanent += stealthSizeMod(character.race.size)}\r\n\r\n\t// armor check penalty\r\n\tlet acp = armorCheckPenalty()\r\n\tif (skillObj.ability_score === \"Strength\" || skillObj.ability_score === \"Dexterity\"){\r\n\t\tpermanent += acp\r\n\t}\r\n\r\n\t// HARDCODE\r\n\tif (skillObj.name === \"Swim\" && character.name === \"Fire-Roasted Tomatoes\"){permanent += 2}\r\n\tif (skillObj.name === \"Profession (chef)\" && character.name === \"Fire-Roasted Tomatoes\"){permanent += 3}\r\n\tif (skillObj.name === \"Acrobatics\" && character.name === \"Iyugi\"){permanent += 2}\r\n\tif (skillObj.name === \"Perception\" && character.name === \"Natesse\"){permanent += 2}\r\n\tif (skillObj.name === \"Sense Motive\" && character.name === \"Natesse\"){permanent += -4}\r\n\tif (skillObj.name === \"Climb\" && character.name === \"Dz'eyn\"){permanent += 8}\r\n\tif (skillObj.name === \"Perception\" && character.name === \"Dink Weatherbyrst\"){permanent += 2}\r\n\t// Alertness from Scimitar\r\n\tif (skillObj.name === \"Perception\" && character.name === \"Natesse\"){permanent += 2}\r\n\tif (skillObj.name === \"Sense Motive\" && character.name === \"Natesse\"){permanent += 2}\r\n\t// HARDCODE\r\n\r\n\treturn [permanent, temporary]\r\n}\r\n\r\nconst calculateBonuses = (skillObj, character_info, character) => {\r\n\tlet permanent = []\r\n\tlet temporary = []\r\n\r\n\tcharacter_info.bonuses.forEach(b => {\r\n\t\tif (b.type === \"skill\" && b.skill_id === skillObj.id){\r\n\t\t\t// if (b.duration === \"permanent\"){\r\n\t\t\t// \tpermanent += b.bonus\r\n\t\t\t// } else {\r\n\t\t\t// \ttemporary += b.bonus\r\n\t\t\t// }\r\n\t\t} else if (b.type === \"skill\" && !b.skill_id) {\r\n\t\t\tif (b.specific_statistic === \"Knowledge\" && skillObj.knowledge){\r\n\t\t\t\tlet level\r\n\t\t\t\tif (b.bonus_multiplier_based_on_feature_level){\r\n\t\t\t\t\t// occasionally getting an error on load\r\n\t\t\t\t\t// typeerror, cannot do \"klass_id\" on undefined\r\n\t\t\t\t\t// when id refresh, error doesn't exist\r\n\t\t\t\t\t// would occur with classes that didn't have bonuses, i.e. Cleric\r\n\t\t\t\t\t// could be vestigial from another class, like Bard? Bardic Knowledge?\r\n\t\t\t\t\tdebugger\r\n\t\t\t\t\tlet klassId = character[b.source.source].find(ability => ability.id === b.source.sourceId).klass_id\r\n\t\t\t\t\tlevel = character_info.classes.find(cl => cl.id === klassId).level\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcharacter_info.classes.forEach(cl => level += cl.level)\r\n\t\t\t\t}\r\n\t\t\t\tlet specificBonus = b.bonus * level\r\n\t\t\t\tif (b.round_down){specificBonus = Math.floor(specificBonus)}\r\n\t\t\t\tif (specificBonus < b.minimum_bonus){specificBonus = b.minimum_bonus}\r\n\t\t\t\tif (b.duration === \"permanent\"){\r\n\t\t\t\t\tpermanent.push({bonus: specificBonus, sourceName: renderBonusName(b), source: b.source})\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttemporary.push({bonus: specificBonus, sourceName: renderBonusName(b), source: b.source})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\r\n\treturn {permanent, temporary}\r\n}\r\n\r\nexport const skillBonus = skillObj => {\r\n\tlet array = skillBonusArray(skillObj)\r\n\treturn array[0] + array[1]\r\n}\r\n\r\nexport const skillBonusPluser = skillObj => {\r\n\treturn pluser(skillBonus(skillObj))\r\n}\r\n\r\nexport const isThisAClassSkill = (skillObj, character) => {\r\n\tlet classSkill = false\r\n\tcharacter.uniq_klasses.forEach(uk => {\r\n\r\n\t\tlet validClassSkill = uk.class_skillset_skills.find(css => css.skill_id === skillObj.id && css.skillset_id === character.skillset.id)\r\n\r\n\t\tif (validClassSkill){\r\n\t\t\tclassSkill = true\r\n\t\t}\r\n\r\n\t\t// HARDCODE\r\n\t\tif (character.name === \"Fire-Roasted Tomatoes\" && skillObj.name === \"Handle Animal\"){\r\n\t\t\tclassSkill = true\r\n\t\t}\r\n\t\t// HARDCODE\r\n\r\n\t})\r\n\treturn classSkill\r\n}\r\n\r\nexport const skillRanks = (skillObj, character) => {\r\n\tlet skillsetSkill = character.character_skillset_skills.find(css => {\r\n\t\tif (css.skill_id === skillObj.id){\r\n\t\t\tif (!css.detail){return true}\r\n\t\t\tif (css.detail === skillObj.detail){return true}\r\n\t\t\treturn false\r\n\t\t} else {\r\n\t\t\treturn false\r\n\t\t}\r\n\t})?.ranks || 0\r\n\treturn skillsetSkill\r\n}\r\n\r\nexport const renderBonusName = (bonus) => {\r\n\tlet ability = locateAbility(bonus.source)\r\n\tlet feature = locateFeatureThroughAbility(ability, bonus.source.featureId)\r\n\treturn feature.name || ability.name\r\n}\r\n\r\nexport const renderSkillTooltip = (skillObj) => {\r\n\t// NEW DATA\r\n\tlet tooltips = []\r\n\r\n\t// STORED DATA\r\n\tconst { character_info, character } = store.getState()\r\n\r\n\t// CALCULATED DATA\r\n\tlet bonuses = calculateBonuses(skillObj, character_info, character)\r\n\r\n\tfor (const category in bonuses) {\r\n\t\tbonuses[category].forEach(b => {\r\n\t\t\ttooltips.push(`${pluser(b.bonus)} from ${b.sourceName}`)\r\n\t\t})\r\n\t}\r\n\r\n\tlet acp = armorCheckPenalty()\r\n\tif ((skillObj.ability_score === \"Strength\" || skillObj.ability_score === \"Dexterity\") && acp < 0){\r\n\t\ttooltips.push(`${pluser(acp)} from Armor Check Penalty`)\r\n\t}\r\n\r\n\tif (tooltips.length){\r\n\t\treturn tooltips.join(\", \")\r\n\t} else {\r\n\t\treturn null\r\n\t}\r\n\r\n}\r\n\r\nexport const renderSkillName = skillObj => {\r\n\tlet hasACP = null\r\n\tlet asterisk = null\r\n\tlet name = skillObj.name\r\n\r\n\tlet acp = armorCheckPenalty()\r\n\tif ((skillObj.ability_score === \"Strength\" || skillObj.ability_score === \"Dexterity\") && acp < 0){\r\n\t\thasACP = <sup>acp</sup>\r\n\t}\r\n\tlet tooltips = renderSkillTooltip(skillObj)\r\n\tif ((!!hasACP && !!tooltips && tooltips.includes(\",\")) || (!hasACP && !!tooltips)){\r\n\t\tasterisk = <sup>*</sup>\r\n\t}\r\n\r\n\r\n\treturn <><span className=\"underline-hover\" onClick={() => modalAction(\"skill\", skillObj.id, {name})}>{name}</span>{hasACP}{asterisk}</>\r\n}\r\n\r\nexport const addCustomSkills = (css, skills) => {\r\n\tlet arr = []\r\n\r\n\tcss.forEach(ss => {\r\n\t\tif (ss.detail){\r\n\t\t\tlet skill = skills.find(sk => sk.id === ss.skill_id)\r\n\t\t\tarr.push({...skill, name: `${skill.name} (${ss.detail})`, detail: ss.detail})\r\n\t\t}\r\n\t})\r\n\r\n\treturn arr\r\n}\r\n\r\nexport const sortSkills = (skills) => {\r\n\treturn skills.sort((a, b) => {\r\n\t\tif (a.id !== b.id){return a.name.localeCompare(b.name)}\r\n\t\tif ((a.detail && !b.detail)){return -1}\r\n\t\tif ((!a.detail && b.detail)){return 1}\r\n\t\tlet aSubstring = a.name.split(\"(\")[1].slice(0, -1)\r\n\t\tlet bSubstring = b.name.split(\"(\")[1].slice(0, -1)\r\n\t\treturn aSubstring.localeCompare(bSubstring)\r\n\t})\r\n}\r\n","import React from 'react'\r\nimport _ from 'lodash'\r\nimport localhost from '../../localhost'\r\nimport { isThisAClassSkill } from '../../utils/calculations/skills'\r\nimport { mod, pluser } from '../../utils/fuf'\r\nimport SkillDescription from '../skill_description'\r\n\r\nconst Skills = props => {\r\n\r\n\tconst [ skillsets, setSkillsets ] = React.useState([])\r\n\tconst [ skillDetails, setDetails ] = React.useState({})\r\n\tconst [ customizable, customize ] = React.useState([])\r\n\tconst [ customSkillDetails, setCustomDetails ] = React.useState([])\r\n\r\n\tReact.useEffect(() => {\r\n\t\tfetch(`${localhost}/api/v1/skillsets`)\r\n\t\t.then(r => r.json())\r\n\t\t.then(data => {\r\n\t\t\tsetSkillsets(data)\r\n\t\t})\r\n\t\tif (props.campaignDetails){\r\n\t\t\tif (props.activeSkillset !== props.campaignDetails.skillset.id){\r\n\t\t\t\tprops.renderChange({target: {value: props.campaignDetails.skillset.id, name: \"activeSkillset\"}})\r\n\t\t\t}\r\n\t\t}\r\n\t}, [])\r\n\r\n  const renderActiveSkillset = () => {\r\n\t\tif (props.campaignDetails?.skillset?.id){\r\n\t\t\treturn (\r\n\t\t\t\t<div>Active Skillset: <strong>{props.campaignDetails.skillset.name}</strong></div>\r\n\t\t\t)\r\n\t\t}\r\n    return (\r\n      <div>\r\n        <label>\r\n          Active Skillset:\r\n          <select name=\"activeSkillset\" value={props.activeSkillset} onChange={props.renderChange}>\r\n            {skillsets.map(ss => <option value={ss.id}>{ss.name}</option>)}\r\n          </select>\r\n        </label>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const renderClassSkill = (skill) => {\r\n    let isThisAClassSkill = false\r\n    props.character.klasses.forEach(klass => {\r\n      klass.class_skillset_skills.forEach(csss => {\r\n        if (csss.skill_id === skill.id && csss.skillset_id === props.character.skillset.id) {\r\n          isThisAClassSkill = true\r\n        }\r\n      })\r\n    })\r\n    return isThisAClassSkill\r\n  }\r\n\r\n\tconst renderSkillName = (skill) => {\r\n\t\treturn skill.detail ? `${skill.name} (${skill.detail})` : skill.name\r\n\t}\r\n\r\n  const renderSkillTableRow = () => {\r\n\t\tconst skillset = skillsets.find(ss => ss.id === parseInt(props.activeSkillset)) ?? {}\r\n\t\tlet skills = skillset?.skills ?? []\r\n\r\n\t\tif (props.skillRanks){\r\n\t\t\tlet customSkill = false\r\n\t\t\tprops.skillRanks.forEach(sr => {\r\n\t\t\t\tif (sr.detail){\r\n\t\t\t\t\tif (!skills.find(sk => sk.id === sr.skill.id && sr.detail === sk.detail))\r\n\t\t\t\t\tskills.push({...sr.skill, detail: sr.detail})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tconst sortedSkills = skills.sort((a,b) => a.name.localeCompare(b.name)) ?? []\r\n\t\tlet character = {\r\n\t\t\tskillset: {id: props.activeSkillset},\r\n\t\t\tuniq_klasses: props.classes.filter(cl => props.chosenClasses.includes(cl.id))\r\n\t\t}\r\n\t\treturn sortedSkills.map(skill => {\r\n\t\t\treturn (\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td>{isThisAClassSkill(skill, character) ? \"X\" : \"\"}</td>\r\n\t\t\t\t\t<td><strong>{skill.ability_score.slice(0, 3)}</strong></td>\r\n\t\t\t\t\t<td className=\"underline-hover\" style={{color: \"black\"}} onClick={() => setDetails(skill)}>{renderSkillName(skill)}</td>\r\n\t\t\t\t\t<td>{renderBonus(skill, character)}</td>\r\n\t\t\t\t\t<td><strong>{props.skillRanks.find(sr => sr.skill?.id === skill.id)?.ranks ?? 0}</strong></td>\r\n\t\t\t\t\t<td>{renderOptions(skill)}</td>\r\n\t\t\t\t</tr>\r\n\t\t\t)\r\n\t\t})\r\n  }\r\n\r\n\tconst renderBonus = (skill, character) => {\r\n\t\tlet abilityScore = props.[skill.ability_score.toLowerCase()]\r\n\t\tlet abilityMod = mod(abilityScore)\r\n\t\tlet ranks = props.skillRanks.find(sr => sr.skill?.id === skill.id)?.ranks ?? 0\r\n\t\tlet classSkill = isThisAClassSkill(skill, character) && ranks > 0 ? 3 : 0\r\n\r\n\t\treturn pluser(abilityMod + ranks + classSkill)\r\n\t}\r\n\r\n\tconst renderOptions = skill => {\r\n\r\n\t\tlet ranks = props.skillRanks.find(sr => sr.skill?.id === skill.id)?.ranks ?? 0\r\n\t\tlet level = props.chosenClasses.length\r\n\t\tlet canAddRanks = true\r\n\t\tif (calculateSkillRanks() <= 0){\r\n\t\t\tcanAddRanks = false\r\n\t\t}\r\n\r\n\t\tconst addRank = () => {\r\n\t\t\tlet newRanks = [...props.skillRanks]\r\n\t\t\tlet i = newRanks.findIndex(sr => {\r\n\t\t\t\treturn skill.detail ? sr.skill?.id === skill.id && sr.detail === skill.detail : sr.skill?.id === skill.id\r\n\t\t\t})\r\n\t\t\tif (i > -1){\r\n\t\t\t\tnewRanks[i] = {...newRanks[i], ranks: newRanks[i].ranks + 1}\r\n\t\t\t} else {\r\n\t\t\t\tnewRanks.push({skill, ranks: 1})\r\n\t\t\t}\r\n\r\n\t\t\tprops.renderChange({target: {name: \"skillRanks\", value: newRanks}})\r\n\t\t}\r\n\r\n\t\tconst removeRank = () => {\r\n\t\t\tlet newRanks = [...props.skillRanks]\r\n\t\t\tlet i = newRanks.findIndex(sr => {\r\n\t\t\t\treturn skill.detail ? sr.skill?.id === skill.id && sr.detail === skill.detail : sr.skill?.id === skill.id\r\n\t\t\t})\r\n\t\t\tif (newRanks[i].ranks > 1){\r\n\t\t\t\tnewRanks[i] = {...newRanks[i], ranks: newRanks[i].ranks - 1}\r\n\t\t\t} else {\r\n\t\t\t\tnewRanks.splice(i, 1)\r\n\t\t\t}\r\n\t\t\tprops.renderChange({target: {name: \"skillRanks\", value: newRanks}})\r\n\t\t}\r\n\r\n\t\tif (skill.customizable && !skill.detail){\r\n\t\t\tconst customizeSkill = () => {\r\n\t\t\t\tlet newRanks = [...props.skillRanks]\r\n\r\n\t\t\t\tlet arr = [...customSkillDetails]\r\n\t\t\t\tlet i = arr.findIndex(sd => sd.id === skill.id)\r\n\t\t\t\tlet arr2 = [...customizable]\r\n\t\t\t\tlet j = arr.indexOf(skill.id)\r\n\r\n\t\t\t\tnewRanks.push({skill, ranks: 0, detail: arr[i].text})\r\n\t\t\t\tprops.renderChange({target: {name: \"skillRanks\", value: newRanks}})\r\n\r\n\t\t\t\tarr.splice(i, 1)\r\n\t\t\t\tsetCustomDetails(arr)\r\n\t\t\t\tarr2.splice(j, 1)\r\n\t\t\t\tcustomize(arr2)\r\n\t\t\t}\r\n\t\t\tif (customizable.includes(skill.id)){\r\n\t\t\t\tlet i = customSkillDetails.findIndex(sd => sd.id === skill.id)\r\n\t\t\t\tconst updateText = e => {\r\n\t\t\t\t\tlet arr = [...customSkillDetails]\r\n\t\t\t\t\tarr = arr.map((sd, j) => {\r\n\t\t\t\t\t\tif (j !== i){return sd}\r\n\t\t\t\t\t\treturn {...sd, text: e.target.value.toLowerCase()}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tsetCustomDetails(arr)\r\n\t\t\t\t}\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<input type=\"text\" value={customSkillDetails[i].text} onChange={updateText}/>\r\n\t\t\t\t\t\t<button onClick={customizeSkill}>OK</button>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)\r\n\t\t\t} else {\r\n\t\t\t\tconst makeCustomizable = () => {\r\n\t\t\t\t\tcustomize([...customizable, skill.id])\r\n\t\t\t\t\tsetCustomDetails([...customSkillDetails, {id: skill.id, text: \"\"}])\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn (<button onClick={makeCustomizable}>Customize</button>)\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{(ranks < level && canAddRanks) ? <button onClick={addRank}>+</button> : <button className=\"inactive-button\">+</button>}\r\n\t\t\t\t{ranks > 0 ? <button onClick={removeRank}>-</button> : <button className=\"inactive-button\">-</button>}\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\tconst numberOfRanks = () => {\r\n\t\tif (!props.chosenClasses.length){\r\n\t\t\treturn (<p>Make sure your Character has at least one class chosen and rolls your stats if you haven't yet!</p>)\r\n\t\t}\r\n\t\tlet skillRanks = calculateSkillRanks()\r\n\t\treturn (<p>Total Skill Ranks Remaining: <strong>{skillRanks}</strong></p>)\r\n\t}\r\n\r\n\tconst calculateSkillRanks = () => {\r\n\t\tlet total = 0\r\n\r\n\t\tprops.chosenClasses.forEach(cc => {\r\n\t\t\tlet klass = props.classes.find(cl => cl.id === cc)\r\n\t\t\ttotal += klass.skill_ranks\r\n\t\t\ttotal += mod(props.intelligence)\r\n\t\t})\r\n\r\n\t\tprops.skillRanks.forEach(sr => {\r\n\t\t\ttotal -= sr.ranks\r\n\t\t})\r\n\r\n\t\treturn total\r\n\t}\r\n\r\n\tconst renderSkillDetails = () => {\r\n\t\treturn (\r\n\t\t\t<div style={{textAlign: \"left\", height: \"80vh\", overflowY: \"scroll\", padding: \"0.4em\"}}>\r\n\t\t\t\t<SkillDescription skill={skillDetails}/>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n  return(\r\n    <div>\r\n      <span>Skillset</span>\r\n      {skillsets && renderActiveSkillset()}\r\n\t\t\t{numberOfRanks()}\r\n\t\t\t<section id=\"character-creation-skills\">\r\n\t      <table>\r\n\t        <thead>\r\n\t          <tr>\r\n\t            <th>Class</th>\r\n\t            <th>Ability</th>\r\n\t            <th>Skill</th>\r\n\t\t\t\t\t\t\t<th>Bonus</th>\r\n\t            <th>Ranks</th>\r\n\t            <th></th>\r\n\t          </tr>\r\n\t        </thead>\r\n\t        <tbody>\r\n\t          {skillsets && renderSkillTableRow()}\r\n\t        </tbody>\r\n\t      </table>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li>Add Ranks to increase your proficiency in certain skills. Click on a skill to see more details!</li>\r\n\t\t\t\t\t<li>The <strong>Bonus</strong> calculation does not include Racial Ability Score Adjustments. Jack didn't have time for that srry.</li>\r\n\t\t\t\t\t<li>For the skills with a <strong>Customize</strong> button, you choose a specific field that you specialize in. See the skill details for Craft, Perform, and Profession for more details. For Knowledge, you automatically are proficient in Knowledge about your given Guild. If you have reason to, you can be proficient in another Guild. Run it by Jack!</li>\r\n\t\t\t\t</ul>\r\n\t\t\t\t{!!skillDetails.id && renderSkillDetails()}\r\n\t\t\t</section>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default Skills\r\n","import React from 'react'\r\nimport localhost from '../../localhost'\r\nimport { withRouter } from 'react-router-dom'\r\n\r\n\r\nconst Confirmation = props => {\r\n\r\n\tconst { name } = props.characterInfo\r\n\r\n\tconst createCharacter = () => {\r\n\t\tfetch(`${localhost}/api/v1/characters`, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tcharacter: props.characterInfo,\r\n\t\t\t\tuser_id: props.user_id\r\n\t\t\t})\r\n\t\t})\r\n\t\t.then(res => res.json())\r\n\t\t.then(data => {\r\n\t\t\tconsole.log(data)\r\n\t\t\tcreateCharacterClass(data.character.id)\r\n\t\t})\r\n\t}\r\n\r\n\tconst createCharacterClass = (characterId) => {\r\n\t\tfetch(`${localhost}/api/v1/character_klasses`, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tcharacter_id: characterId,\r\n\t\t\t\tclasses: props.characterInfo.classes\r\n\t\t\t})\r\n\t\t})\r\n\t\t.then(res => res.json())\r\n\t\t.then(data => {\r\n\t\t\tconsole.log(data)\r\n\t\t\tprops.history.push('/characters/'+ characterId)\r\n\t\t})\r\n\t}\r\n\r\n\tconst displayCharacterDetails = () => {\r\n\r\n\t}\r\n\r\n\tconst renderButton = () => {\r\n\t\treturn <button onClick={createCharacter}>Create {name}</button>\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{displayCharacterDetails()}\r\n\t\t\t{renderButton()}\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default withRouter(Confirmation)\r\n","import React from 'react'\r\n\r\nconst Navbar = props => {\r\n\r\n\tconst renderTabs = () => {\r\n\t\t// {renderTab(\"Feats\")}\r\n\t\t// {renderTab(\"Gold & Equipment\")}\r\n\t\treturn (\r\n\t\t\t<ul>\r\n\t\t\t\t{renderTab(\"Home\")}\r\n\t\t\t\t{renderTab(\"Ancestry\")}\r\n\t\t\t\t{renderTab(\"Class\")}\r\n\t\t\t\t{renderTab(\"Ability Scores\")}\r\n\t\t\t\t{renderTab(\"Skills\")}\r\n\t\t\t\t{renderTab(\"Details\")}\r\n\t\t\t\t{renderTab(\"Create Character\")}\r\n\t\t\t</ul>\r\n\t\t)\r\n\t}\r\n\r\n\tconst renderTab = (name) => {\r\n\t\tlet style = props.activeTab === name ? \"character-creation-tab active-tab\" : \"character-creation-tab\"\r\n\t\treturn (\r\n\t\t\t<li className={style} onClick={() => props.renderTabClick(name)}>{name}</li>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<nav id=\"character-creation-tabs\">\r\n\t\t\t{renderTabs()}\r\n\t\t</nav>\r\n\t)\r\n}\r\n\r\nexport default Navbar\r\n","import React from 'react'\r\n// import _ from 'lodash'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport localhost from '../localhost'\r\nimport { getFetch } from '../utils/fetches'\r\n\r\nimport CharacterHome from '../components/character_forms/home'\r\nimport Race from '../components/character_forms/race'\r\nimport Class from '../components/character_forms/class'\r\nimport Details from '../components/character_forms/details'\r\nimport Skills from '../components/character_forms/skills'\r\nimport AbilityForm from '../components/character_forms/ability_scores'\r\nimport CharacterCreationConfirmation from '../components/character_forms/character_creation_confirmation'\r\n\r\nimport CreationTabs from './creation_tabs'\r\nimport Navbar from '../components/character_forms/navbar'\r\n\r\nconst CharacterCreation = props => {\r\n\r\n\tconst [ characterInfo, setCharacterInfo ] = React.useState({\r\n\t\tactiveField: \"\",\r\n\t\tclasses: [],\r\n\t\tarchetypes: [],\r\n\t\trace: 0,\r\n\t\tstrength: 10,\r\n\t\tdexterity: 10,\r\n\t\tconstitution: 10,\r\n\t\tintelligence: 10,\r\n\t\twisdom: 10,\r\n\t\tcharisma: 10,\r\n\t\tname: \"\",\r\n\t\tdescription: \"\",\r\n\t\tbackground: \"\",\r\n\t\thomeland: \"\",\r\n\t\tage: 0,\r\n\t\tgender: \"\",\r\n\t\thair: \"\",\r\n\t\teyes: \"\",\r\n\t\theight: \"\",\r\n\t\tweight: \"\",\r\n\t\talignment: \"\",\r\n\t\tanyBonus: \"\",\r\n\t\tdoesRacehaveAnyBonus: false,\r\n\t\tactiveSkillset: 2,\r\n\t\tskillRanks: [],\r\n\t\tactiveTab: \"Home\",\r\n\t\tcampaign_id: null,\r\n\t\tcampaignDetails: null\r\n\t})\r\n\r\n  // componentDidMount() {\r\n    // COMMENTED OUT FOR TESTING PURPOSES\r\n    // if (!props.currentUser){\r\n    //   this.props.history.push(\"/signup\")\r\n    // } else {\r\n    //   this.setState({activeSkillset: this.props.currentUser.skillset_id})\r\n    // }\r\n    // COMMENTED OUT FOR TESTING PURPOSES\r\n  // }\r\n\r\n\tReact.useEffect(() => {\r\n\t\tif (!!characterInfo.campaign_id){\r\n\t\t\tgetFetch(`campaigns/${characterInfo.campaign_id}`)\r\n\t\t\t\t.then(data => {\r\n\t\t\t\t\tif (!data.error){\r\n\t\t\t\t\t\tsetCharacterInfo({...characterInfo, campaignDetails: data})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// debugger\r\n\t\t\t\t\t\tif (data.status === 404 && data.error === \"Not Found\"){\r\n\t\t\t\t\t\t\tsetCharacterInfo({...characterInfo, campaignDetails: {name: \"Campaign Does Not Exist\"}})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tconsole.log(\"Error with fetching campaign\", err.status, err.exception)\r\n\t\t\t\t})\r\n\t\t}\r\n\t}, [characterInfo.campaign_id])\r\n\r\n\t// componentWillUpdate() {\r\n\t// \tif ((characterInfo.campaignDetails === null && !!characterInfo.campaign_id) || parseInt(characterInfo.campaign_id) !== characterInfo.campaignDetails?.id && !!characterInfo.campaign_id){\r\n\t// \t\tgetFetch(`campaigns/${characterInfo.campaign_id}`)\r\n\t// \t\t\t.then(data => {\r\n\t// \t\t\t\t// debugger\r\n\t// \t\t\t\tthis.setState({campaignDetails: data})\r\n\t// \t\t\t})\r\n\t// \t\t\t.catch(err => {\r\n\t// \t\t\t\tconsole.log(\"Error with fetching campaign\", err.status, err.exception)\r\n\t// \t\t\t})\r\n\t// \t}\r\n\t// }\r\n\r\n  // const renderButtonClick = (field) => {\r\n  //   if (state.activeField === field){\r\n  //     this.setState({activeField: \"\"})\r\n  //   } else {\r\n  //     this.setState({activeField: field})\r\n  //   }\r\n  // }\r\n\r\n  const renderChange = (e) => {\r\n\t\tconsole.log(e.target.name)\r\n\t\tconsole.log(e.target.value)\r\n\t\tsetCharacterInfo({...characterInfo, [e.target.name]: e.target.value})\r\n\t\t// if (e.target.name === \"campaign_id\"){\r\n\t\t// \tsetCharacterInfo({...characterInfo, campaignDetails: null})\r\n\t\t// }\r\n  }\r\n\r\n\tconst renderAncestryChange = (id) => {\r\n\t\tlet data = characterInfo.race === id ? 0 : id\r\n\t\tsetCharacterInfo({...characterInfo, race: data})\r\n\t}\r\n\r\n\tconst renderClassChange = (id) => {\r\n\t\tsetCharacterInfo({...characterInfo, classes: [...characterInfo.classes, id]})\r\n\t}\r\n\r\n\tconst archetypeChange = (id) => {\r\n\t\tlet archetypeDupe = [...characterInfo.archetypes]\r\n\t\tif (archetypeDupe.includes(id)){\r\n\t\t\tlet i = archetypeDupe.indexOf(id)\r\n\t\t\tarchetypeDupe.splice(i, 1)\r\n\t\t} else {\r\n\t\t\tarchetypeDupe.push(id)\r\n\t\t}\r\n\t\tsetCharacterInfo({...characterInfo, archetypes: archetypeDupe})\r\n\t}\r\n\r\n\tconst removeLatestClass = () => {\r\n\t\tlet classesDuplicate =  [...characterInfo.classes]\r\n\t\tclassesDuplicate.splice(classesDuplicate.length - 1, 1)\r\n\t\tsetCharacterInfo({...characterInfo, classes: classesDuplicate})\r\n\t}\r\n\r\n  const renderTabClick = (choice) => {\r\n    setCharacterInfo({...characterInfo, activeTab: choice})\r\n  }\r\n\r\n  // const renderSubmit = () => {\r\n\t// \tconst {name, strength, dexterity, constitution, intelligence, wisdom, charisma, race, doesRacehaveAnyBonus, anyBonus} = characterInfo\r\n  //   if (name && strength && dexterity && constitution && intelligence && wisdom && charisma && validClasses() && race && (doesRacehaveAnyBonus ? anyBonus : true)) {\r\n  //     return <button className='create-btn' onClick={createCharacter}>Create Character!</button>\r\n  //   }\r\n  // }\r\n\r\n  const renderDynamicChanges = (e, index) => {\r\n    let classes = [...characterInfo.classes]\r\n\r\n    classes[index] = e.target.value\r\n    setCharacterInfo({ ...characterInfo, classes })\r\n  }\r\n\r\n  const addClassField = (e, change, index) => {\r\n    e.preventDefault()\r\n    if (change === \"plus\") {\r\n      setCharacterInfo( { ...characterInfo, classes: [...characterInfo.classes, characterInfo.classes[index]] } )\r\n    } else if (change === \"minus\") {\r\n      let removedClasses = [...characterInfo.classes]\r\n      removedClasses.pop()\r\n      setCharacterInfo({...characterInfo, classes: removedClasses})\r\n    }\r\n  }\r\n\r\n  const validClasses = () => {\r\n    let valid = true\r\n    // characterInfo.classes.forEach(klass => {\r\n    //   if (klass.level > 20 || klass.level < 1){\r\n    //     valid = false\r\n    //   }\r\n    //   if (klass.classId === 0){\r\n    //     valid = false\r\n    //   }\r\n    // })\r\n    if (characterInfo.classes[characterInfo.classes.length - 1] === 0 || characterInfo.classes[characterInfo.classes.length - 1] === \"\"){\r\n      valid = false\r\n    }\r\n    return valid\r\n  }\r\n\r\n  const renderdoesHaveAnyBonus = () => {\r\n    setCharacterInfo({...characterInfo, doesRacehaveAnyBonus: true})\r\n  }\r\n\r\n  const mapAbilityScores = (array) => {\r\n    setCharacterInfo({\r\n\t\t\t...characterInfo,\r\n      strength: array[0],\r\n      dexterity: array[1],\r\n      constitution: array[2],\r\n      intelligence: array[3],\r\n      wisdom: array[4],\r\n      charisma: array[5]\r\n    })\r\n  }\r\n\r\n\r\n  // {characterInfo.strength && characterInfo.dexterity && characterInfo.constitution && characterInfo.intelligence && characterInfo.wisdom && characterInfo.charisma && characterInfo.activeField !== \"abilityScores\" ? <div><strong>Ability Scores Picked!</strong></div> : null}\r\n  // {characterInfo.race && (characterInfo.activeField !== \"race\") && (characterInfo.doesRacehaveAnyBonus ? characterInfo.anyBonus : true) ? <div><strong>Race Picked!</strong></div> : null}\r\n  // {this.validClasses() && characterInfo.activeField !== \"class\" ? <div><strong>Class Picked!</strong></div> : null}\r\n  // <div className='header' style={{marginLeft: '2em'}}>Character Form</div>\r\n\r\n  // campaign tab?\r\n  // deity selected (way in the future)\r\n  // equipment\r\n  // spell selection?\r\n  // familiar selection?\r\n  // help/how to section?\r\n\r\n\tconst displayValidation = () => {\r\n\t\tconst {strength, dexterity, constitution, intelligence, wisdom, charisma, name, race} = characterInfo\r\n\t\treturn (\r\n\t\t\t<div id=\"new-character-validation-bubbles\" className='centered'>\r\n\t\t\t\t{(strength && constitution && dexterity && intelligence && wisdom && charisma) ? <span className='complete'>Ability Scores</span> : <span className='incomplete'>Ability Scores</span>}\r\n\t\t\t\t{(name) ? <span className='complete'>Character Name</span> : <span className='incomplete' >Character Name</span>}\r\n\t\t\t\t{(this.validClasses()) ? <span className='complete' >Character Class(es)</span> : <span className='incomplete' >Character Class(es)</span>}\r\n\t\t\t\t{(race) ? <span className='complete' >Character Ancestry</span> : <span className='incomplete' >Character Ancestry</span>}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n  const displayForm = () => {\r\n    switch(characterInfo.activeTab){\r\n\t\t\tcase \"Home\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<CharacterHome renderChange={renderChange} name={characterInfo.name} campaign_id={characterInfo.campaign_id} campaignDetails={characterInfo.campaignDetails}/>\r\n\t\t\t\t)\r\n      case \"Details\":\r\n        return (\r\n            <Details renderChange={renderChange} name={characterInfo.name} description={characterInfo.description} alignment={characterInfo.alignment} background={characterInfo.background} age={characterInfo.age} gender={characterInfo.gender} hair={characterInfo.hair} eyes={characterInfo.eyes} height={characterInfo.height} weight={characterInfo.weight} homeland={characterInfo.homeland} deity={characterInfo.deity} strength={characterInfo.strength}  dexterity={characterInfo.dexterity} constitution={characterInfo.constitution} intelligence={characterInfo.intelligence} wisdom={characterInfo.wisdom} charisma={characterInfo.charisma} mapAbilityScores={mapAbilityScores} campaign_id={characterInfo.campaign_id} campaignDetails={characterInfo.campaignDetails}/>\r\n        )\r\n      case \"Ancestry\":\r\n        return (\r\n            <Race renderAncestryChange={renderAncestryChange} chosenRaceId={characterInfo.race} anyBonus={characterInfo.anyBonus} doesRacehaveAnyBonus={characterInfo.doesRacehaveAnyBonus} renderdoesHaveAnyBonus={renderdoesHaveAnyBonus} campaignDetails={characterInfo.campaignDetails}/>\r\n        )\r\n      case \"Class\":\r\n        return (\r\n            <Class renderChange={renderChange} renderDynamicChanges={renderDynamicChanges} addClassField={addClassField} chosenClasses={characterInfo.classes} renderClassChange={renderClassChange} campaignDetails={characterInfo.campaignDetails} removeLatestClass={removeLatestClass} chosenArchetypes={characterInfo.archetypes} archetypeChange={archetypeChange}/>\r\n        )\r\n      case \"Skills\":\r\n        return (\r\n            <Skills activeSkillset={characterInfo.activeSkillset} renderChange={renderChange} classes={props.classes} chosenClasses={characterInfo.classes} campaignDetails={characterInfo.campaignDetails} skillRanks={characterInfo.skillRanks} strength={characterInfo.strength}  dexterity={characterInfo.dexterity} constitution={characterInfo.constitution} intelligence={characterInfo.intelligence} wisdom={characterInfo.wisdom} charisma={characterInfo.charisma}/>\r\n        )\r\n\t\t\tcase \"Ability Scores\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t\t<AbilityForm renderChange={renderChange} strength={characterInfo.strength}  dexterity={characterInfo.dexterity} constitution={characterInfo.constitution} intelligence={characterInfo.intelligence} wisdom={characterInfo.wisdom} charisma={characterInfo.charisma} mapAbilityScores={mapAbilityScores}/>\r\n\t\t\t\t)\r\n\t\t\tcase \"Create Character\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<CharacterCreationConfirmation characterInfo={characterInfo} user_id={props.currentUser.id}/>\r\n\t\t\t\t)\r\n      default:\r\n        return <>Ya</>\r\n    }\r\n  }\r\n\r\n\tconsole.log(\"character creation state\", characterInfo)\r\n\t// <CreationTabs renderTabClick={renderTabClick} activeTab={characterInfo.activeTab}/>\r\n  return (\r\n    <main id=\"character-creation-page\">\r\n\t\t\t<Navbar renderTabClick={renderTabClick} activeTab={characterInfo.activeTab}/>\r\n      <section id='creation-form'>\r\n        {displayForm()}\r\n        {/*<button onClick={() => renderButtonClick(\"abilityScores\")}>{characterInfo.activeField === \"abilityScores\" ? \"Hide Ability Score Form\": \"Create Your Ability Scores\"}</button>*/}\r\n        {/*<button onClick={() => renderButtonClick(\"race\")}>{characterInfo.activeField === \"race\" ? \"Hide Race Form\": \"Choose Your Fantasy Race\"}</button>*/}\r\n        {/*<button onClick={() => renderButtonClick(\"class\")}>{characterInfo.activeField === \"class\" ? \"Hide Class Form\": \"Choose Your Class\"}</button>*/}\r\n      </section>\r\n\r\n    </main>\r\n  )\r\n\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n\t\tclasses: state.classes\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(CharacterCreation)\r\n","import localhost from './localhost'\r\n\r\nexport const fetchCharacter = (data) => {\r\n  return (dispatch) => {\r\n    data.character.character_magic_items.forEach(cmi => {\r\n      if (cmi.equipped){\r\n        cmi.magic_item.features.forEach(f => {\r\n          if (!!f.skill_bonuses.length){\r\n            f.skill_bonuses.forEach(sk => {\r\n              const { skill_id, bonus, bonus_type, duration } = sk\r\n              // const conditions = sk.feature_skill_bonus_conditions.map(c => {return {condition: c.condition}})\r\n              console.log(\"Skill Bonus\")\r\n              dispatch({type: 'BONUS', bonus: {type: 'skill', skill_id, bonus, bonus_type, duration, source: cmi.magic_item.name}})\r\n            })\r\n          }\r\n          if (!!f.stat_bonuses.length){\r\n            f.stat_bonuses.forEach(st => {\r\n              const { statistic, bonus, bonus_type, duration } = st\r\n              const conditions = st.feature_stat_bonus_conditions.map(c => {return {condition: c.condition}})\r\n              dispatch({type: 'BONUS', bonus: {type: 'stat', statistic, bonus, bonus_type, duration, source: cmi.magic_item.name, conditions}})\r\n            })\r\n          }\r\n          if (!!f.skill_notes.length){\r\n            f.skill_notes.forEach(sk => {\r\n              const { skill_id, note} = sk\r\n              dispatch({type: 'BONUS', bonus: {type: 'note', skill_id, note, source: cmi.magic_item.name}})\r\n            })\r\n          }\r\n          if (!!f.languages.length){\r\n            f.languages.forEach(l => {\r\n              const { language, note } = l\r\n              dispatch({type: 'EFFECT', effect: {type: 'language', language, note, source: cmi.magic_item.name}})\r\n            })\r\n          }\r\n        })\r\n      }\r\n    })\r\n    data.character.uniq_klasses.forEach(kl => {\r\n      kl.klass_features.forEach(kf => {\r\n        kf.features.forEach(f =>{\r\n          if (!!f.skill_bonuses.length){\r\n            f.skill_bonuses.forEach(sk => {\r\n              const { skill_id, bonus, bonus_type, duration } = sk\r\n              // const conditions = sk.feature_skill_bonus_conditions.map(c => {return {condition: c.condition}})\r\n              dispatch({type: 'BONUS', bonus: {type: 'skill', skill_id, bonus, bonus_type, duration, source: kf.name}})\r\n            })\r\n          }\r\n          if (!!f.skill_notes.length){\r\n            f.skill_notes.forEach(sk => {\r\n              const { skill_id, note} = sk\r\n              // debugger\r\n              dispatch({type: 'BONUS', bonus: {type: 'note', skill_id, note, source: kf.name}})\r\n            })\r\n          }\r\n        })\r\n      })\r\n    })\r\n    data.character.applicable_klass_features.forEach((kf) => renderFeaturesFromClass(kf, dispatch))\r\n  }\r\n}\r\n\r\nconst renderFeaturesFromClass = (kf, dispatch) => {\r\n  if (kf.features.length){\r\n    kf.features.forEach(feature => {\r\n      if (feature.weapon_proficiencies.length){\r\n        feature.weapon_proficiencies.forEach((wp) => dispatchWeaponProficiencies(wp, dispatch))\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nconst dispatchWeaponProficiencies = (wp, dispatch) => {\r\n  const { additive, proficiency_group, weapon_id } = wp\r\n  dispatch({type: \"PROFICIENCY\", detail: {\r\n    type: \"weapon\", additive, proficiency_group, weapon_id\r\n  }})\r\n}\r\n\r\nexport function changeAmmo(characterWeapon, stringAmmoId) {\r\n  return function (dispatch) {\r\n    let ammoId = parseInt(stringAmmoId)\r\n\r\n    fetch(`${localhost}/api/v1/character_weapons_ammo/${characterWeapon.id}`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Response\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({ammo_id: ammoId})\r\n    })\r\n      .then(r => r.json())\r\n      .then(data => {\r\n        dispatch({type: \"CHANGE AMMO\", characterWeapon, ammoId})\r\n      })\r\n  }\r\n}\r\n\r\nexport function expendAmmo(characterWeapon, characterWeaponAmmo){\r\n  return function (dispatch){\r\n    let ammunition_amount = characterWeaponAmmo ? characterWeaponAmmo.ammunition_amount - 1 : 0\r\n\r\n    fetch(`${localhost}/api/v1/character_weapons_update_ammo/${characterWeapon.id}`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Response\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({magazine: characterWeapon.magazine - 1, ammunition_amount})\r\n    })\r\n      .then(r => r.json())\r\n      .then(data => {\r\n        dispatch({type: \"UPDATE AMMO\", cw: characterWeapon, magazine: characterWeapon.magazine - 1, ammunition_amount})\r\n      })\r\n  }\r\n}\r\n\r\nexport function reloadAmmo(characterWeapon, magazine){\r\n  return function (dispatch){\r\n    fetch(`${localhost}/api/v1/character_weapons_update_ammo/${characterWeapon.id}`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Response\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({magazine: magazine})\r\n    })\r\n      .then(r => r.json())\r\n      .then(data => {\r\n        dispatch({type: \"UPDATE AMMO\", cw: characterWeapon, magazine})\r\n      })\r\n  }\r\n}\r\n\r\nexport const exitModal = (index) => ({type: \"MODAL\", remove: true, indexToRemove: index})\r\n","import _ from 'lodash'\r\n\r\nexport const dispatchClassLevels = (character) => {\r\n  let cKArray = []\r\n  let completedClasses = []\r\n  character.character_klasses.forEach(cK => {\r\n    const id = cK.klass_id\r\n    if (!completedClasses.includes(id)){\r\n      let characterKlass = character.character_klasses.filter(ck => ck.klass_id === id)\r\n      const level = characterKlass.length\r\n      let klass = character.uniq_klasses.find(k => k.id === id)\r\n\r\n      completedClasses.push(id)\r\n      const classInfo = {id, level}\r\n\r\n      // changing fetch data, this part is not applicable with starting fetch\r\n\r\n\t\t\t// DELETE BELOW CODE ONCE REFACTORING OF SPELLS IS COMPLETE\r\n      // let spellsFeature = klass.klass_features.find(f => f.name === 'Spells' || f.name === 'Alchemy')\r\n      // let spellcasting = spellsFeature ? spellsFeature.spellcasting : null\r\n\t\t\t//\r\n      // // look to see if there are any cast spells for the given class\r\n      // const castSpellsForThisClass = character.cast_spells.filter(cs => cs.klass_id === id)\r\n      // // if (castSpellsForThisClass[0]){\r\n      // const castSpells = {}\r\n      // const transformedCastSpellsToLevelCast = castSpellsForThisClass.map(cs => cs.spell_level)\r\n      // transformedCastSpellsToLevelCast.forEach(lvl => {\r\n      //   castSpells[lvl] ? castSpells[lvl] = castSpells[lvl] + 1 : castSpells[lvl] = 1\r\n      // })\r\n      // classInfo.castSpells = castSpells\r\n      // classInfo.spellcasting = spellcasting\r\n      // // hardcoded start\r\n      // let name = character.name\r\n      //   if (name === \"Nettie\" || name === \"Persephone\" || name === \"Maddox\"){\r\n      //     classInfo.spellcastingAbility = 'intelligence'\r\n      //   } else if (name === \"Sylvester\"){\r\n      //     classInfo.spellcastingAbility = 'charisma'\r\n      //   }\r\n      // hardcoded end\r\n      // }\r\n\t\t\t// DELETE ABOVE CODE ONCE REFACTORING OF SPELLS IS COMPLETE\r\n\r\n      // relocate to a new function when data is applcable\r\n\r\n      cKArray.push(classInfo)\r\n    }\r\n  })\r\n  // debugger\r\n  return cKArray\r\n  // dispatch({type: 'CHARACTER_CLASSES', classes: cKArray})\r\n}\r\n\r\nexport const renderAbilityScoreCalc = (ability, character) => {\r\n  const downcaseAbility = _.lowerCase(ability)\r\n  let score = character[downcaseAbility]\r\n  character.race.race_ability_score_modifiers.forEach(mod => {\r\n    if (ability === mod.ability_score){\r\n      score += mod.bonus\r\n    }\r\n  })\r\n  if (character.any_bonus === ability){\r\n    score +=2\r\n  }\r\n  return { ability: downcaseAbility, score }\r\n}\r\n\r\nexport const calculateWeight = (character, character_info) => {\r\n  let weight = 0;\r\n\r\n  character.character_weapons.forEach(cw => {\r\n    weight += cw.weapon.weight\r\n  })\r\n  character.character_armors.forEach(ca => {\r\n    weight += ca.armor.weight\r\n  })\r\n\r\n\r\n  return weight\r\n}\r\n\r\nexport const equippedWeapons = characterWeapons => {\r\n  return characterWeapons.filter(cw => cw.equipped !== \"\")\r\n}\r\n\r\nexport const calculateLoad = (weight, strength) => {\r\n  let carryingCapacityByStrength = carryingCapacity(strength)\r\n  if (weight <= carryingCapacityByStrength[0]){return \"Light\"}\r\n  if (weight <= carryingCapacityByStrength[1]){return \"Medium\"}\r\n  if (weight <= carryingCapacityByStrength[2]){return \"Heavy\"}\r\n  return \"Overload\"\r\n}\r\n\r\nexport const carryingCapacity = strength => {\r\n  switch(strength){\r\n    case 1: return [3, 6, 10]\r\n    case 2: return [6, 13, 20]\r\n    case 3: return [10, 20, 30]\r\n    case 4: return [13, 26, 40]\r\n    case 5: return [16, 33, 50]\r\n    case 6: return [20, 40, 60]\r\n    case 7: return [23, 46, 70]\r\n    case 8: return [26, 53, 80]\r\n    case 9: return [30, 60, 90]\r\n    case 10: return [33, 66, 100]\r\n    case 11: return [38, 76, 115]\r\n    case 12: return [43, 86, 130]\r\n    case 13: return [50, 100, 150]\r\n    case 14: return [58, 116, 175]\r\n    case 15: return [66, 133, 200]\r\n    case 16: return [76, 153, 230]\r\n    case 17: return [86, 173, 260]\r\n    case 18: return [100, 200, 300]\r\n    case 19: return [116, 233, 350]\r\n    case 20: return [133, 266, 400]\r\n    case 21: return [153, 306, 460]\r\n    case 22: return [173, 346, 520]\r\n    case 23: return [200, 400, 600]\r\n    case 24: return [233, 466, 700]\r\n    case 25: return [266, 533, 800]\r\n    case 26: return [306, 613, 920]\r\n    case 27: return [346, 693, 1040]\r\n    case 28: return [400, 800, 1200]\r\n    case 29: return [466, 933, 1400]\r\n    case 30: return [532, 1064, 1600]\r\n    default: return [0, 0, 0]\r\n  }\r\n}\r\n\r\nexport const reducedSpeed = (speed) => {\r\n\tswitch(speed){\r\n\t\tcase 15: return 10\r\n\t\tcase 20: return 15\r\n\t\tcase 25: return 20\r\n\t\tcase 30: return 20\r\n\t\tcase 35: return 25\r\n\t\tcase 40: return 30\r\n\t\tcase 45: return 30\r\n\t\tcase 50: return 35\r\n\t\tcase 55: return 40\r\n\t\tcase 60: return 40\r\n\t\tcase 65: return 45\r\n\t\tcase 70: return 50\r\n\t\tcase 75: return 50\r\n\t\tcase 80: return 55\r\n\t\tcase 85: return 60\r\n\t\tcase 90: return 60\r\n\t\tcase 95: return 65\r\n\t\tcase 100: return 70\r\n\t\tcase 105: return 70\r\n\t\tcase 110: return 75\r\n\t\tcase 115: return 80\r\n\t\tcase 120: return 80\r\n\r\n\t\tdefault: return speed\r\n\t}\r\n}\r\n\r\nexport const characterLevel = character => {\r\n\tlet { class_obj: classObj, uniq_klasses: klasses } = character\r\n\tlet string = \"\"\r\n\r\n\tclassObj.forEach(cl => {\r\n\t\tlet klass = klasses.find(kl => kl.id === cl.klass_id)\r\n\t\tif (string.length > 0){ string += \" \"}\r\n\t\tstring += klass.name + \" \" + cl.level\r\n\t})\r\n\r\n\treturn string\r\n}\r\n","import {\r\n  characterAction,\r\n  characterClassesAction,\r\n  abilityScoreAction,\r\n  abilityScoreImprovementAction\r\n} from '../action_creator/character'\r\nimport {\r\n  dispatchClassLevels,\r\n  renderAbilityScoreCalc\r\n} from '../calculations/character'\r\nimport { initialCharacterDistribution } from './features'\r\n\r\n\r\nexport const characterDistributer = (character) => {\r\n  characterAction(character)\r\n\r\n  abilityScoreAction(renderAbilityScoreCalc(\"Strength\", character))\r\n  abilityScoreAction(renderAbilityScoreCalc(\"Dexterity\", character))\r\n  abilityScoreAction(renderAbilityScoreCalc(\"Constitution\", character))\r\n  abilityScoreAction(renderAbilityScoreCalc(\"Intelligence\", character))\r\n  abilityScoreAction(renderAbilityScoreCalc(\"Wisdom\", character))\r\n  abilityScoreAction(renderAbilityScoreCalc(\"Charisma\", character))\r\n\r\n  characterClassesAction(dispatchClassLevels(character))\r\n\r\n  character.character_klasses.forEach(lvl => {\r\n    if (lvl.ability_score_improvement){\r\n      abilityScoreImprovementAction(lvl.ability_score_improvement)\r\n    }\r\n  })\r\n\r\n  initialCharacterDistribution(character)\r\n}\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport _ from 'lodash'\r\nimport { abilityScore, abilityScoreModString } from '../../utils/calculations/ability_scores'\r\nimport { diceAction } from '../../utils/action_creator/popups'\r\n\r\nfunction AbilityScore (props) {\r\n\r\n  // const mod = Math.floor((props.ability_score - 10) / 2)\r\n  const truncate = _.upperCase(props.name.substring(0,3))\r\n  const name = props.character.name\r\n\r\n  let score = props.ability_score\r\n  const hc = props.character_info.hardcode\r\n  const largeMorph = ['Bull - Major', 'Condor - Major', 'Frog - Major', 'Squid - Major', 'Chameleon - Major'].includes(hc.major)\r\n  const enlarger = hc.enlarge\r\n  const reducer = hc.reduce\r\n  const activeMutagen = hc.activeMutagen ? hc.mutagen : false\r\n  const age = name === 'Maddox' && hc.age\r\n\r\n  // console.log('what is activeMutagen?', activeMutagen)\r\n\r\n  if (props.name === \"Strength\"){\r\n    if (largeMorph){\r\n      score += 4\r\n    }\r\n    score += enlarger ? 2 : 0\r\n    score += reducer ? -2 : 0\r\n\r\n    score += age === 'Young' ? -2 : 0\r\n    score += age === 'Middle' ? -1 : 0\r\n    score += age === 'Old' ? -2 : 0\r\n    score += age === 'Venerable' ? -3 : 0\r\n\r\n    score += activeMutagen === 'strength' ? 4 : 0\r\n  } else if (props.name === \"Dexterity\"){\r\n    if (largeMorph){\r\n      score -= 2\r\n    }\r\n    if (name === \"Cedrick\"){\r\n      score += 2\r\n    }\r\n    score += enlarger ? -2 : 0\r\n    score += reducer ? 2 : 0\r\n\r\n    score += age === 'Young' ? 2 : 0\r\n    score += age === 'Middle' ? -1 : 0\r\n    score += age === 'Old' ? -2 : 0\r\n    score += age === 'Venerable' ? -3 : 0\r\n\r\n    score += activeMutagen === 'dexterity' ? 4 : 0\r\n  } else if (props.name === 'Constitution'){\r\n\r\n    score += age === 'Young' ? -2 : 0\r\n    score += age === 'Middle' ? -1 : 0\r\n    score += age === 'Old' ? -2 : 0\r\n    score += age === 'Venerable' ? -3 : 0\r\n\r\n    score += activeMutagen === 'constitution' ? 4 : 0\r\n  } else if (props.name === \"Intelligence\"){\r\n    if (name === \"Persephone\"){\r\n      score += 2\r\n    }\r\n\r\n    score += age === 'Middle' ? 1 : 0\r\n    score += age === 'Old' ? 1 : 0\r\n    score += age === 'Venerable' ? 1 : 0\r\n\r\n    score += activeMutagen === 'strength' ? -2 : 0\r\n  } else if (props.name === 'Wisdom'){\r\n    score += age === 'Young' ? -2 : 0\r\n    score += age === 'Middle' ? 1 : 0\r\n    score += age === 'Old' ? 1 : 0\r\n    score += age === 'Venerable' ? 1 : 0\r\n\r\n    score += activeMutagen === 'dexterity' ? -2 : 0\r\n  } else if (props.name === 'Charisma'){\r\n    score += age === 'Middle' ? 1 : 0\r\n    score += age === 'Old' ? 1 : 0\r\n    score += age === 'Venerable' ? 1 : 0\r\n\r\n    score += activeMutagen === 'constitution' ? -2 : 0\r\n  }\r\n\r\n\tconst rollAbility = (modifier) => {\r\n\t\tlet obj = {rollName: _.capitalize(props.name), modifier: parseInt(modifier), die: 20, count: 1}\r\n\t\tdiceAction(obj)\r\n\t}\r\n\r\n  const renderAbilityScore = () => {\r\n    if (localStorage.computer === \"true\"){\r\n      return (\r\n        <span className='centered egg shadow shrink' style={{boxShadow: `5px 4px 2px #${props.settings.shadeColor}`, opacity: \"0.95\", backgroundColor: `#${props.settings.bubbleColor}`, borderColor: `#${props.settings.borderColor}`, cursor: \"default\", display: \"flex\", flexDirection: \"column\", justifyContent: \"center\"}} onClick={() => rollAbility(abilityScoreModString(props.name))}>\r\n          <div className='enhanced'>{abilityScoreModString(props.name)}</div>\r\n          <div className='muted'><strong>{truncate}</strong></div>\r\n          <div>{abilityScore(props.name, true)}</div>\r\n        </span>\r\n      )\r\n    } else {\r\n      return (\r\n        <span className='centered shrink mobile-tab-ability' >\r\n          <div><strong>{truncate}</strong></div>\r\n          <div className='enhanced white-outline'>{abilityScoreModString(props.name)}</div>\r\n          <span className='muted'>{abilityScore(props.name, true)}</span>\r\n        </span>\r\n      )\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {renderAbilityScore()}\r\n    </>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info,\r\n\t\tsettings: state.settings\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(AbilityScore)\r\n","import React from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\n// import _ from 'lodash'\r\nimport { connect } from 'react-redux'\r\nimport Ability from './ability'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faPencilAlt } from '@fortawesome/free-solid-svg-icons'\r\n\r\nclass AbilityScores extends React.Component {\r\n\r\n  renderAbilityScoreModifiers = () => {\r\n    if(this.props.race.race_ability_score_modifiers){\r\n      let mods = this.props.race.race_ability_score_modifiers\r\n      let modStrings = []\r\n      mods.forEach(mod => {\r\n        let bonus = mod.bonus < 0 ? mod.bonus : `+${mod.bonus}`\r\n        modStrings.push(`${bonus} ${mod.ability_score}`)\r\n      })\r\n      return modStrings.join(\", \")\r\n    }\r\n  }\r\n\r\n  renderEditAbilityToggle = () => {\r\n    let numOfContainers = 'ability'\r\n    if (localStorage.computer === \"true\" && this.props.character.user_id === this.props.currentUser.id){\r\n      numOfContainers += ' container-7'\r\n    } else {\r\n      numOfContainers += ' container-6'\r\n    }\r\n    return numOfContainers\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className={this.renderEditAbilityToggle()}>\r\n        <Ability name={'strength'} ability_score={this.props.character_info.ability_scores.strength}/>\r\n        <Ability name={'dexterity'} ability_score={this.props.character_info.ability_scores.dexterity}/>\r\n        <Ability name={'constitution'} ability_score={this.props.character_info.ability_scores.constitution}/>\r\n        <Ability name={'intelligence'} ability_score={this.props.character_info.ability_scores.intelligence}/>\r\n        <Ability name={'wisdom'} ability_score={this.props.character_info.ability_scores.wisdom}/>\r\n        <Ability name={'charisma'} ability_score={this.props.character_info.ability_scores.charisma}/>\r\n        {localStorage.computer === \"true\" && this.props.character.user_id === this.props.currentUser.id && <span className='edit' onClick={() => this.props.editModal('ability')}><FontAwesomeIcon icon={faPencilAlt} /></span>}\r\n\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\n\r\nexport default withRouter(connect(mapStateToProps)(AbilityScores))\r\n","import React from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faPencilAlt } from '@fortawesome/free-solid-svg-icons'\r\n\r\n// import { faDungeon } from '@fortawesome/free-solid-svg-icons'\r\n\r\nclass CharacterName extends React.Component {\r\n\r\n  // renderClasses = () => {\r\n  //   let klasses = this.props.character.klasses.map(klass => {\r\n  //     let char_klass = this.props.character.character_klasses.find(char_k => klass.id === char_k.klass_id)\r\n  //     return `${klass.name} ${char_klass.level}`\r\n  //   })\r\n  //   return klasses.join(\", \")\r\n  // }\r\n\r\n  renderClasses = () => {\r\n    if (!this.props.character_info || !this.props.classes.length){\r\n      return null\r\n    }\r\n    let remapped = this.props.character_info.classes.map(cl => {\r\n      let name = this.props.character.uniq_klasses.find(k => k.id === cl.id).name\r\n      // switch(name){\r\n      //   case 'Barbarian':\r\n      //     name = 'Drunken Brute Invulnerable Rager ' + name\r\n      //     break\r\n      //   case 'Rogue':\r\n      //     name = 'Pirate ' + name\r\n      //     break\r\n      //   case 'Shifter':\r\n      //     name = 'Chimera Weapon ' + name\r\n      //     break\r\n      //   case 'Witch':\r\n      //     name = 'Autumn Season ' + name\r\n      //     break\r\n      //   case 'Vigilante':\r\n      //     name = 'Magical Child ' + name\r\n      //     break\r\n      //   case 'Arcanist':\r\n      //     name = 'Chronomancer ' + name\r\n      //     break\r\n      //   case 'Bard':\r\n      //     name = 'Chronicler of Worlds ' + name\r\n      //     break\r\n      //   default:\r\n      //     break\r\n      // }\r\n      return `${name} ${cl.level}`\r\n    })\r\n    return remapped.join(\", \")\r\n  }\r\n\r\n  name = () => {\r\n    let name = this.props.character.name\r\n    let major = this.props.character_info.hardcode.major\r\n    if (this.props.character_info.hardcode.autumn){\r\n      name = 'The Autumn Equinox'\r\n    }\r\n    if (major){\r\n      switch (major){\r\n        case 'Bull - Major':\r\n          name += ', but a Bull'\r\n          break\r\n        case 'Frog - Major':\r\n          name += ', but a big Frog'\r\n          break\r\n        case 'Condor - Major':\r\n          name += ', but a Condor'\r\n          break\r\n        case 'Squid - Major':\r\n          name += ', but a Squid'\r\n          break\r\n        case 'Chameleon - Major':\r\n          name += ', but a Chameleon'\r\n          break\r\n        case 'Tiger':\r\n          name += ', but a Tiger'\r\n          break\r\n        default:\r\n          break\r\n      }\r\n    }\r\n    if (this.props.character_info.hardcode.alterSelf){\r\n      name = 'Not Harry Styles'\r\n    }\r\n    if (name === 'Maddox'){\r\n      let age = this.props.character_info.hardcode.age\r\n      name = age + ' '+ name\r\n      if (age === 'Middle'){\r\n        name = 'Middle Age Maddox'\r\n      }\r\n    }\r\n    return name\r\n  }\r\n\r\n\r\n\r\n  render(){\r\n    console.log('REDUX', this.props)\r\n    return(\r\n      <div>\r\n        <div className='first-row' style={{padding: '.25em'}} id='title'>{this.name()}</div>\r\n        <div className='second-row' style={{padding: '.5em'}}>{this.props.character.race.name} {this.renderClasses()}</div>\r\n        {this.props.character.user_id === this.props.currentUser.id && localStorage.computer === \"true\" && <span className='edit' onClick={() => this.props.editModal('character')}><FontAwesomeIcon icon={faPencilAlt} /></span>}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n    character: state.character,\r\n    character_info: state.character_info,\r\n    classes: state.classes\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(mapStatetoProps)(CharacterName))\r\n","import _ from 'lodash'\r\nimport { pluser } from '../../fuf'\r\nimport store from '../../store'\r\nimport { abilityScoreMod } from './ability_scores'\r\n\r\nexport const renderSave = (save, ability) => {\r\n\t// return an array\r\n\t// first value is base\r\n\t// second value is temporary bonuses/penalties\r\n\tlet savesArray = calculateSave(save, ability)\r\n\treturn pluser(savesArray[0] + savesArray[1])\r\n}\r\n\r\nexport const calculateSave = (save, ability) => {\r\n\t// NEW DATA\r\n\tlet array = []\r\n\tlet permanent = 0\r\n\tlet temporary = 0\r\n\r\n\r\n\t// STORED DATA\r\n\tlet characterInfo = store.getState().character_info\r\n\tlet klasses = store.getState().character.uniq_klasses\r\n\r\n\t// CALCULATED DATA\r\n\tlet abilityMod = abilityScoreMod(ability)\r\n\tlet permAbilityMod = abilityScoreMod(ability, true)\r\n\tlet classSaves = characterInfo.classes.map((cl) => {\r\n\t\tlet classInfo = klasses.find(kl => kl.id === cl.id)\r\n\t\treturn renderBaseClassSave(cl.level, classInfo[save])\r\n\t})\r\n\tlet classSavesTotal = _.sum(classSaves)\r\n\tlet bonusObjs = characterInfo.bonuses.filter(b => {\r\n\t\treturn (b.statistic === \"Saving Throw\" || b.statistic === \"Fortitude\" || b.statistic === \"Reflex\" || b.statistic === \"Will\")\r\n\t})\r\n\r\n\tif (permAbilityMod !== abilityMod) {\r\n\t\ttemporary += abilityMod - permAbilityMod\r\n\t\tpermanent += permAbilityMod\r\n\t} else {\r\n\t\tpermanent += abilityMod\r\n\t}\r\n\r\n\tpermanent += classSavesTotal\r\n\r\n\tbonusObjs.forEach(bo => {\r\n\t\tif (bo.statistic === \"Saving Throw\" || bo.statistic === _.capitalize(save)) {\r\n\t\t\tif (bo.duration === \"temporary\"){\r\n\t\t\t\ttemporary += bo.bonus\r\n\t\t\t} else if (bo.duration === \"permanent\"){\r\n\t\t\t\tpermanent += bo.bonus\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\r\n\tarray.push(permanent)\r\n\tarray.push(temporary)\r\n\treturn array\r\n}\r\n\r\nexport const renderBaseClassSave = (num, save) => {\r\n\tlet base = num * save\r\n\tif (save === 0.5){base +=2}\r\n\treturn _.floor(base)\r\n}\r\n\r\nexport const bonusPenaltySave = (save, ability) => {\r\n\tlet temp = calculateSave(save, ability)[1]\r\n\tlet color = \"black\"\r\n\tif (temp > 0){color = \"green\"}\r\n\tif (temp < 0){color = \"maroon\"}\r\n\treturn color\r\n}\r\n","import React from 'react'\r\nimport _ from 'lodash'\r\nimport { connect } from 'react-redux'\r\nimport { renderSave, bonusPenaltySave } from '../../helper_functions/calculations/saving_throws'\r\nimport { diceAction } from '../../utils/action_creator/popups'\r\n\r\nconst Saves = props => {\r\n\r\n  // const renderSave = (num, save) => {\r\n  //   if (save === 0.5){\r\n  //     return _.floor(num * save) + 2\r\n  //   } else if (save === 0.34){\r\n  //     return _.floor(num * save)\r\n  //   }\r\n  // }\r\n\t//\r\n  // const renderCharacterSave = (save, score, style) => {\r\n  //   if (!props.character.uniq_klasses.length){\r\n  //     return null\r\n  //   } else {\r\n  //     let totalSavingThrow = 0\r\n\t//\r\n  //     props.character_info.classes.forEach(klass => {\r\n  //       let currentClass = findCurrentClass(klass.id)\r\n  //       totalSavingThrow += renderSave(klass.level, currentClass[save])\r\n  //     })\r\n  //     const hc = props.character_info.hardcode\r\n  //     const age = props.character.name === 'Maddox' && hc.age\r\n\t//\r\n  //     let abilityScore = props.character_info.ability_scores[score]\r\n  //     if (score === 'dexterity'){\r\n  //       abilityScore += age === 'Young' ? 2 : 0\r\n  //       abilityScore += age === 'Middle' ? -1 : 0\r\n  //       abilityScore += age === 'Old' ? -2 : 0\r\n  //       abilityScore += age === 'Venerable' ? -3 : 0\r\n  //     } else if (score === 'constitution'){\r\n  //       abilityScore += age === 'Young' ? -2 : 0\r\n  //       abilityScore += age === 'Middle' ? -1 : 0\r\n  //       abilityScore += age === 'Old' ? -2 : 0\r\n  //       abilityScore += age === 'Venerable' ? -3 : 0\r\n  //     } else if (score === 'wisdom'){\r\n  //       abilityScore += age === 'Young' ? -2 : 0\r\n  //       abilityScore += age === 'Middle' ? 1 : 0\r\n  //       abilityScore += age === 'Old' ? 1 : 0\r\n  //       abilityScore += age === 'Venerable' ? 1 : 0\r\n  //     }\r\n  //     const mod = Math.floor((abilityScore - 10) / 2)\r\n  //     totalSavingThrow += mod\r\n  //     if (save === 'reflex' && props.character.name === \"Cedrick\"){\r\n  //       totalSavingThrow += 1\r\n  //     }\r\n  //     const ogST = totalSavingThrow\r\n  //     // hardcoding\r\n\t//\r\n  //     if (save === 'will' && hc.rage){\r\n  //       totalSavingThrow += 2\r\n  //     }\r\n  //     const largeMorph = ['Bull - Major', 'Condor - Major', 'Frog - Major', 'Squid - Major', 'Chameleon - Major'].includes(hc.major)\r\n  //     const enlarger = hc.enlarge\r\n  //     const reducer = hc.reduce\r\n  //     const charmedActive = hc.charmedActive\r\n  //     const stealTime = hc.stealTime\r\n  //     const activeMutagen = hc.activeMutagen ? hc.mutagen : false\r\n  //     if (save === 'reflex'){\r\n  //       if (largeMorph){\r\n  //         totalSavingThrow += -1\r\n  //       }\r\n  //       totalSavingThrow += enlarger ? -1 : 0\r\n  //       totalSavingThrow += reducer ? 1 : 0\r\n  //       totalSavingThrow += stealTime ? 1 : 0\r\n\t//\r\n  //       totalSavingThrow += activeMutagen === 'dexterity' ? 2 : 0\r\n  //     } else if (save === 'will'){\r\n  //       totalSavingThrow += activeMutagen === 'dexterity' ? -1 : 0\r\n  //     } else if (save === 'fortitude'){\r\n  //       totalSavingThrow += activeMutagen === 'constitution' ? 2 : 0\r\n  //     }\r\n  //     totalSavingThrow += charmedActive ? 4 : 0\r\n  //     if (!style){\r\n  //       return totalSavingThrow < 0 ? totalSavingThrow : `+${totalSavingThrow}`\r\n  //     } else {\r\n  //       if (ogST > totalSavingThrow){\r\n  //         return {color: 'maroon'}\r\n  //       } else if (ogST < totalSavingThrow){\r\n  //         return {color: 'green'}\r\n  //       } else {\r\n  //         return {color: 'black'}\r\n  //       }\r\n  //     }\r\n  //   }\r\n    // iterating over the character_info.classes in redux\r\n    // this is written as a key value pair\r\n    // first value is the class' id\r\n    // second value is the character's level for that class\r\n\r\n\r\n    // for (var klassId in props.character_info.classes){\r\n    //   // find the class' info from the id\r\n    //   let currentClass = findCurrentClass(klass.id)\r\n    //   // send the character's level in that class, and the relevant saving throw value\r\n    //   totalSavingThrow += renderSave(props.character_info.classes[klassId], currentClass[save])\r\n    // }\r\n\r\n    // grab the character's ability score, and render its bonus\r\n  // }\r\n\r\n  const findCurrentClass = (klassId) => {\r\n    return props.character.uniq_klasses.find(ck => ck.id === klassId)\r\n  }\r\n\r\n  // let ast = props.character.name === 'Robby' ? '*' : null\r\n  // ast = props.character_info.hardcode.quick ? '*' : ast\r\n\t// ast means asterix\r\n  const ast = (type) => {\r\n    let ast = false\r\n\r\n    let validBonuses = props.character_info.bonuses.filter(b => b.statistic === type)\r\n    ast = !!validBonuses.length ? true : ast\r\n\r\n    if (type === 'Save'){\r\n      if (props.character.name === 'Robby' || props.character.name === \"Natesse\"){\r\n        ast = true\r\n      }\r\n    } else if (type === 'Reflex'){\r\n      if (props.character_info.hardcode.quick){\r\n        ast = true\r\n      }\r\n    }\r\n    if (ast){\r\n      return '*'\r\n    }\r\n  }\r\n\r\n  const renderTooltip = (e, type) => {\r\n    let comment = ''\r\n\r\n    let validBonuses = props.character_info.bonuses.filter(b => b.statistic === type)\r\n    validBonuses.forEach(b => {\r\n      if (b.conditions.length){\r\n        comment = `${b.bonus < 0 ? b.bonus : `+${b.bonus}`} ${b.bonus_type} for ${b.conditions.map(c => c.condition).join(', ')}`\r\n      }\r\n    })\r\n\r\n    if (props.character.name === 'Robby'){\r\n      if (type === 'all'){\r\n        comment = '+1 to fear and mind-affecting effects'\r\n      } else if (type === 'Reflex'){\r\n        comment = 'If you succeed on a saving throw to take half damage, take no damage instead'\r\n      }\r\n    } else if (props.character_info.hardcode.quick && type === 'Reflex'){\r\n      comment = 'Advantage on Reflex saving throws'\r\n    } else if (props.character.name === \"Natesse\"){\r\n\t\t\tif (type === \"all\"){\r\n\t\t\t\tcomment = \"Constructed: +4 to mind-affecting effects, paralysis, poison, and stun\"\r\n\t\t\t}\r\n\t\t}\r\n    if (!!comment){\r\n      props.renderTooltip(e, comment)\r\n    }\r\n  }\r\n\r\n  const modifiers = () => {\r\n    let modifiers = props.character_info.bonuses.reduce((agg, b) => {\r\n      if (b.statistic === 'Save'){\r\n        if (!b.conditions.length){\r\n          agg += b.bonus\r\n        }\r\n      }\r\n      return agg\r\n    }, 0)\r\n    return modifiers\r\n  }\r\n\r\n\tconst rollSave = (name, modifier) => {\r\n\t\tlet obj = {rollName: name, modifier: parseInt(modifier), die: 20, count: 1}\r\n\t\tdiceAction(obj)\r\n\t}\r\n\r\n\tconst displayIndividualSave = (isAComputer) => {\r\n\t\t// NEW DATA\r\n\t\tlet saveDetails = [\r\n\t\t\t{save: \"fortitude\", ability: \"constitution\"},\r\n\t\t\t{save: \"reflex\", ability: \"dexterity\"},\r\n\t\t\t{save: \"will\", ability: \"wisdom\"}\r\n\t\t]\r\n\t\t// STORED DATA\r\n\t\t// CALCULATED DATA\r\n\r\n\t\treturn saveDetails.map((saveDetail, i) => {\r\n\t\t\tlet capitalizedSave = _.capitalize(saveDetail.save)\r\n      if (!isAComputer){\r\n        capitalizedSave = capitalizedSave.substring(0, 3)\r\n      }\r\n\r\n\t\t\tlet modifier = renderSave(saveDetail.save, saveDetail.ability)\r\n\t\t\t// removed dynamic color change because it clashed with theme color setting\r\n\t\t\t// let color = bonusPenaltySave(saveDetail.save, saveDetail.ability)\r\n\t\t\treturn (\r\n\t      <span key={i*3+1} className='centered' style={{flexGrow: \"1\", margin: \"0 0.7em\"}} onClick={() => rollSave(capitalizedSave, modifier)}>\r\n\t        <div className='enhanced' style={{border: `1px solid #${props.settings.borderColor}`, borderRadius: \"0.3em\"}}>{modifier}</div>\r\n\t        <div className='muted dynamic-size-small'><strong>{capitalizedSave}</strong></div>\r\n\t      </span>\r\n\t\t\t)\r\n\t\t})\r\n\t}\r\n\r\n\tconst displaySaves = () => {\r\n\t\t// NEW DATA\r\n\t\tlet className = \"shadow\"\r\n\t\tlet savingThrowTitle = <div id=\"saving-throw-title\">Saving Throws</div>\r\n\r\n\t\t// STORED DATA\r\n\t\t// CALCULATED DATA\r\n\t\tlet isAComputer = localStorage.computer === \"true\"\r\n\r\n\t\tif (!isAComputer) {\r\n\t\t\tclassName += \" mobile-centering\"\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div id=\"saves\" className={className} style={{boxShadow: `5px 4px 2px #${props.settings.shadeColor}`, opacity: \"0.95\", backgroundColor: `#${props.settings.bubbleColor}`, borderColor: `#${props.settings.borderColor}`, cursor: \"default\"}}>\r\n\t\t\t{isAComputer && savingThrowTitle}\r\n\t\t\t\t<div style={{display: \"flex\", justifyContent: \"center\"}}>\r\n\t\t\t\t\t{displayIndividualSave(isAComputer)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n  // if (localStorage.computer === \"true\"){\r\n  //   return (\r\n  //     <div id='saves' className='container-3 shadow shrink' >\r\n  //       <div id='saving-throw-title' onMouseOver={e => renderTooltip(e, 'Save')} onMouseOut={props.mouseOut}>Saving Throws{ast('Save')}</div>\r\n  //       <span className='centered' >\r\n  //         <div className='enhanced' style={renderCharacterSave('fortitude', 'constitution', true)}>{renderCharacterSave('fortitude', 'constitution')}</div>\r\n  //         <div className='muted'><strong>Fortitude</strong></div>\r\n  //       </span>\r\n  //       <span className='centered' onMouseOver={e => renderTooltip(e, 'Reflex')} onMouseOut={props.mouseOut}>\r\n  //         <div className='enhanced' style={renderCharacterSave('reflex', 'dexterity', true)}>{renderCharacterSave('reflex', 'dexterity')}{ast('Reflex')}</div>\r\n  //         <div className='muted'><strong>Reflex</strong></div>\r\n  //       </span>\r\n  //       <span className='centered' >\r\n  //         <div className='enhanced' style={renderCharacterSave('will', 'wisdom', true)}>{renderCharacterSave('will', 'wisdom')}</div>\r\n  //         <div className='muted'><strong>Will</strong></div>\r\n  //       </span>\r\n  //     </div>\r\n  //   )\r\n  // } else if (localStorage.computer === \"false\"){\r\n  //   return (\r\n  //     <div id='saves' className='shadow mobile-centering'>\r\n  //       {/* when implementing tooltips, also include renderTooltip (e, 'Save'), because I removed the Saving Throw title */}\r\n  //       {/* the title has that feature */}\r\n  //       <span className='centered' style={{display: 'inline-block', margin: '0.3em'}}>\r\n  //         <div className='enhanced' style={renderCharacterSave('fortitude', 'constitution', true)}>{renderCharacterSave('fortitude', 'constitution')}</div>\r\n  //         <div className='muted'><strong>Fort</strong></div>\r\n  //       </span>\r\n  //       <span className='centered' style={{display: 'inline-block', margin: '0.3em'}} onMouseOver={e => renderTooltip(e, 'Reflex')} onMouseOut={props.mouseOut}>\r\n  //         <div className='enhanced' style={renderCharacterSave('reflex', 'dexterity', true)}>{renderCharacterSave('reflex', 'dexterity')}{ast('Reflex')}</div>\r\n  //         <div className='muted'><strong>Refl</strong></div>\r\n  //       </span>\r\n  //       <span className='centered' style={{display: 'inline-block', margin: '0.3em'}}>\r\n  //         <div className='enhanced' style={renderCharacterSave('will', 'wisdom', true)}>{renderCharacterSave('will', 'wisdom')}</div>\r\n  //         <div className='muted'><strong>Will</strong></div>\r\n  //       </span>\r\n  //     </div>\r\n  //   )\r\n  // }\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{displaySaves()}\r\n\t\t</>\r\n\t)\r\n\r\n\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n    character: state.character,\r\n    character_info: state.character_info,\r\n    classes: state.classes,\r\n\t\tsettings: state.settings\r\n  }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(Saves)\r\n","import React from 'react'\r\nimport _ from 'lodash'\r\nimport { connect } from 'react-redux'\r\nimport localhost from '../../localhost'\r\nimport HPChanges from '../hp_changes'\r\nimport { abilityScoreMod } from '../../helper_functions/calculations/ability_scores'\r\n\r\n\r\nconst HP = props => {\r\n\r\n  const [mobileHPChange, setMobileHPChange] = React.useState(false);\r\n\r\n  // const conMod = () => {\r\n  //   let con = props.character_info.ability_scores.constitution\r\n  //   const age = props.character.name === 'Maddox' && props.character_info.hardcode.age\r\n  //   const activeMutagen = props.character_info.hardcode.activeMutagen ? props.character_info.hardcode.mutagen : false\r\n\t//\r\n  //   con += age === 'Young' ? -2 : 0\r\n  //   con += age === 'Middle' ? -1 : 0\r\n  //   con += age === 'Old' ? -2 : 0\r\n  //   con += age === 'Venerable' ? -3 : 0\r\n\t//\r\n  //   con += activeMutagen === 'constitution' ? 4 : 0\r\n\t//\r\n  //   return Math.floor((con  - 10) / 2)\r\n  // }\r\n\r\n\r\n  const renderDamaged = () => {\r\n    // oh GOD please refactor\r\n\r\n    let id = \"none\"\r\n    if (props.character.lethal_damage && props.character.temp_hp){\r\n      id = \"temp-damage\"\r\n    } else if (props.character.lethal_damage){\r\n      id = \"damaged\"\r\n    } else if (props.character.temp_hp){\r\n      id = \"temporary\"\r\n    }\r\n    return id\r\n  }\r\n\r\n\tconst renderClick = () => {\r\n\t\tprops.dispatch({type: \"MODAL\", detail: \"hitPoints\"})\r\n\t}\r\n\r\n  const renderCharacterHP = () => {\r\n\t\t// NEW DATA\r\n\t\tlet totalHP = 0\r\n\t\tlet additionalTempHP = 0\r\n\r\n\t\t// STORED DATA\r\n\t\tlet storedLethalDamage = props.character.lethal_damage\r\n\t\tlet storedTemporary = props.character.temp_hp\r\n \t\tlet hitPointBonuses =  props.character_info.temporaryHitPoints\r\n\r\n\t\t// CALCULATED DATA\r\n\t\tconst conMod = abilityScoreMod(\"constitution\")\r\n\r\n    props.character.character_klasses.forEach(klass => {\r\n      if (klass.hp !== null) {\r\n        totalHP += klass.hp\r\n      }\r\n      totalHP += conMod\r\n    })\r\n\t\thitPointBonuses.forEach(bonus => {\r\n\t\t\tadditionalTempHP += bonus.bonus - bonus.damage\r\n\t\t// \tif (bonus.bonus_multiplier){\r\n\t\t// \t\tlet multiplier = 0\r\n\t\t// \t\tif (bonus.bonus_multiplier === \"level\"){\r\n\t\t// \t\t\tif (bonus.bonus_multiplier_based_on_feature_level){\r\n\t\t// \t\t\t\tlet ability = props.character[bonus.source.source].find(a => a.id === bonus.source.sourceId)\r\n\t\t// \t\t\t\tif (ability.klass_id){\r\n\t\t// \t\t\t\t\tmultiplier = props.character_info.classes.find(cl => cl.id === ability.klass_id).level\r\n\t\t// \t\t\t\t}\r\n\t\t// \t\t\t}\r\n\t\t// \t\t}\r\n\t\t// \t\tif (bonus.bonus_type === \"temporary\"){\r\n\t\t// \t\t\tadditionalTempHP += multiplier * bonus.bonus\r\n\t\t// \t\t}\r\n\t\t// \t}\r\n\t\t})\r\n\t\tif (props.character.name === \"Fire-Roasted Tomatoes\"){\r\n\t\t\ttotalHP += 6\r\n\t\t}\r\n\r\n\t\tlet currentHP = totalHP - storedLethalDamage + storedTemporary + additionalTempHP\r\n\t\tconsole.log(currentHP)\r\n\r\n    if (props.character.max_hp !== totalHP){\r\n      fetch (`${localhost}/api/v1/character_max_hp/${props.character.id}`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json'\r\n        },\r\n        body: JSON.stringify({max_hp: totalHP})\r\n      })\r\n        .then(r => r.json())\r\n        .then(console.log)\r\n    }\r\n\r\n    if (localStorage.computer === \"true\"){\r\n      return (\r\n        <span className='centered'>\r\n          <div><strong>Hit Points</strong></div>\r\n          <div className='middle'>\r\n            <span id={renderDamaged()} className='enhanced'>{currentHP}</span>\r\n            <span className='enhanced'>/{totalHP}</span>\r\n            <span><button className='spacing' style={{boxShadow: `1px 1px 2px #${props.settings.shadeColor}`, borderRadius: \".5em\", backgroundColor: `#${props.settings.background1}`, borderColor: `#${props.settings.borderColor}`, color: `#${props.settings.textColor}`}} onClick={renderClick}>Adjust</button></span>\r\n          </div>\r\n          {!!props.character.non_lethal_damage && <div><small>Non-Lethal: {props.character.non_lethal_damage}</small></div>}\r\n        </span>\r\n      )\r\n    } else {\r\n      // currentHP is equal to the total amount hp you have, minus lethal damage, plus temp hp\r\n      // however, for this health bar calculation, we want temp hp to be separate\r\n      let noTempCurrentHP = currentHP - props.character.temp_hp\r\n\r\n      let percentageHP = (noTempCurrentHP/totalHP) * 100\r\n      let tempPercentage = (props.character.temp_hp/totalHP) * 100\r\n\r\n      let color = 'green'\r\n      // v if you have more than full hp through temp hp, change color to electric blue\r\n      color = percentageHP+tempPercentage > 100 ? '#0892D0' : color\r\n      percentageHP = percentageHP+tempPercentage > 100 ? 100 : percentageHP\r\n      // ^ and make it equal to 100 so it doesn't overflow the width\r\n      // v if HP is less than half, make it yellow\r\n      color = percentageHP <= 50 && percentageHP > 25 ? 'yellow' : color\r\n      // v if HP is less than 25%, make it red\r\n      color = percentageHP <= 25 ? 'red' : color\r\n\r\n      // objective:\r\n      // if character has damage, and they also have temp hp\r\n      // part of their hp bar is green/yellow/red, and part is electric blue\r\n      //\r\n      return (\r\n        <section onClick={() => setMobileHPChange(true)}>\r\n          <span>\r\n            <div className='health-box'>\r\n              <span className='green-health-bar' style={{background: `linear-gradient(to right, ${color} ${percentageHP}%, #0892D0 ${percentageHP}%, #0892D0 ${percentageHP+tempPercentage}%, white ${percentageHP+tempPercentage}%)`}}/>\r\n            </div>\r\n          </span>\r\n          <span style={{textAlign: 'center', display: 'inline-block', width: '18%'}}>\r\n            {currentHP}/{totalHP}\r\n          </span>\r\n        </section>\r\n      )\r\n    }\r\n  }\r\n\r\n  const closeHPChanges = () => {\r\n    setMobileHPChange(false)\r\n  }\r\n\r\n  return (\r\n    <div className='hp shadow' style={{boxShadow: `5px 4px 2px #${props.settings.shadeColor}`, opacity: \"0.95\", backgroundColor: `#${props.settings.bubbleColor}`, borderColor: `#${props.settings.borderColor}`}}>\r\n      {renderCharacterHP()}\r\n      {mobileHPChange && <HPChanges renderEdit={props.renderEdit} closeHPChanges={closeHPChanges}/>}\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n    character: state.character,\r\n    character_info: state.character_info,\r\n\t\tsettings: state.settings\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(HP)\r\n","import store from '../../store'\r\nimport _ from 'lodash'\r\nimport { size } from '../../fuf'\r\nimport { areYouProficientWithThisArmor } from './proficiencies'\r\nimport { abilityScoreMod } from './ability_scores'\r\n\r\nexport const armorClassModifiers = () => {\r\n\t// NEW DATA\r\n\tlet acModifiers = []\r\n\r\n\t// STORED DATA\r\n\tconst { character, character_info } = store.getState()\r\n\tlet equippedCharacterArmor = character.character_armors.find(ca => ca.equipped) || null\r\n\tconst bonuses = character_info.bonuses.filter(b => b.statistic === \"Armor Class\")\r\n\r\n\t// CALCULATED DATA\r\n\tlet dexMod = abilityScoreMod(\"dexterity\")\r\n\tlet wornArmorBonus = wornArmor(equippedCharacterArmor, character.character_armors)\r\n\r\n\t// DEXTERITY BONUS\r\n\tacModifiers.push({\r\n\t\tbonus: \"dex\",\r\n\t\tmod: equippedCharacterArmor?.armor.max_dex_bonus < dexMod ? equippedCharacterArmor.armor.max_dex_bonus : dexMod\r\n\t})\r\n\r\n\t// ARMOR BONUS\r\n\tacModifiers.push({\r\n\t\tbonus: \"armor\",\r\n\t\tmod: wornArmorBonus\r\n\t})\r\n\r\n\t// SIZE BONUS\r\n\tacModifiers.push({\r\n\t\tbonus: \"size\",\r\n\t\tmod: size(character.race.size)\r\n\t})\r\n\r\n\t// does not account for shields, adjust equippedCharacterArmor to not seek shields\r\n\t// no other modifiers calculated\r\n\t// alchemical\r\n\t// circumstance\r\n\t// competence\r\n\t// deflection\r\n\t// dodge\r\n\t// enhancement\r\n\t// insight\r\n\t// luck\r\n\t// morale\r\n\t// natural\r\n\tif (character.name === \"Majestik\"){\r\n\t\tacModifiers.push({\r\n\t\t\tbonus: \"natural\",\r\n\t\t\tmod: 1\r\n\t\t})\r\n\t}\r\n\t// profane\r\n\t// resistance\r\n\t// sacred\r\n\t// shield\r\n\t// untyped (take name from ability/item/spell)\r\n\tbonuses.forEach(bonus => {\r\n\t\tif (bonus.bonus_type === \"untyped\"){\r\n\t\t\tlet sourceName = character[bonus.source.source].find(ability => ability.id === bonus.source.sourceId).name\r\n\t\t\tsourceName = sourceName.toLowerCase()\r\n\t\t\tacModifiers.push({\r\n\t\t\t\tbonus: \"untyped\",\r\n\t\t\t\tduration: bonus.duration,\r\n\t\t\t\tsource: sourceName,\r\n\t\t\t\tmod: bonus.bonus\r\n\t\t\t})\r\n\t\t}\r\n\t})\r\n\r\n\r\n\treturn acModifiers\r\n}\r\n\r\nconst wornArmor = (equipped, all) => {\r\n\tlet bonus = 0\r\n\t// if not wearing any armor\r\n\tif (equipped === null){return bonus}\r\n\r\n\tif (equipped.extra_armor_options.length){\r\n\t\tlet extraCharacterArmorIds = equipped.extra_armor_options.map(ex => ex.id)\r\n\t\tall.forEach(ca => {\r\n\t\t\tif(extraCharacterArmorIds.includes(ca.id)){\r\n\t\t\t\tbonus += ca.armor.bonus\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\tbonus += equipped.armor.bonus\r\n\r\n\treturn bonus\r\n}\r\n\r\nexport const armorClassTotal = () => {\r\n\t// NEW DATA\r\n\tlet ac = {armorClass: 10, touch: 10, flatFooted: 10}\r\n\r\n\t// CALCULATED DATA\r\n\tlet acModifiers = armorClassModifiers()\r\n\r\n\t// BASE ARMOR CLASS\r\n\tac.armorClass += _.sum(acModifiers.map(m => m.mod))\r\n\r\n\t// TOUCH ARMOR CLASS\r\n\tlet touchModifiers = acModifiers.filter(m => {\r\n\t\treturn (m.bonus !== \"armor\" && m.bonus !== \"natural\")\r\n\t})\r\n\tac.touch += _.sum(touchModifiers.map(m => m.mod))\r\n\r\n\t// FLAT FOOTED ARMOR CLASS\r\n\tlet flatFootedModifiers = acModifiers.filter(m => {\r\n\t\tif (m.bonus === \"dex\" && m.mod < 0){return true}\r\n\t\treturn ((m.bonus !== \"dex\") && m.bonus !== \"dodge\")\r\n\t})\r\n\tac.flatFooted += _.sum(flatFootedModifiers.map(m => m.mod))\r\n\r\n\treturn ac\r\n}\r\n","import React from 'react'\r\nimport _  from 'lodash'\r\nimport { connect } from 'react-redux'\r\nimport { armorClassModifiers, armorClassTotal } from '../../utils/calculations/armor_class'\r\nimport { tooltipAction } from '../../utils/action_creator/additional_info'\r\nimport { pluser } from '../../fuf'\r\n\r\n\r\nconst ArmorClass = props => {\r\n\r\n\t// CALCULATED DATA\r\n\tlet acModifiers = armorClassModifiers()\r\n\tlet acTotal = armorClassTotal()\r\n\r\n  const hc = props.character_info.hardcode\r\n  const raging = hc.rage ? -2 : 0\r\n  const fd = hc.fd\r\n  const charging = hc.charge ? -2 : 0\r\n  const largeMorph = ['Bull - Major', 'Condor - Major', 'Frog - Major', 'Squid - Major', 'Chameleon - Major'].includes(hc.major)\r\n  const cleave = hc.cleave ? -2 : 0\r\n  const dodgingPanache = hc.dodgingPanache ? 4 : 0\r\n  const name = props.character.name\r\n  const armor = hc.armor\r\n  const enlarger = hc.enlarge\r\n  const reducer = hc.reduce\r\n  const stealTime = hc.stealTime ? 1 : 0\r\n  const activeMutagen = hc.activeMutagen ? hc.mutagen : false\r\n  const age = name === 'Maddox' && hc.age\r\n\r\n  const quick = hc.quick ? 2 : 0\r\n  // for enlarge person, you automatically have a -1 penalty to AC\r\n  const enlarge = enlarger ? -1 : 0\r\n  const reduce = reducer ? 1 : 0\r\n\r\n  const cedrick = name === \"Cedrick\" ? 5 : 0\r\n\r\n  const dexMod = () => {\r\n    let dex = props.character.dexterity\r\n    props.character.race.race_ability_score_modifiers.forEach(mod => {\r\n      if ('Dexterity' === mod.ability_score){\r\n        dex += mod.bonus\r\n      }\r\n    })\r\n    if (props.character.anyBonus === 'Dexterity'){\r\n      dex +=2\r\n    }\r\n    if (largeMorph){\r\n      dex-=2\r\n    }\r\n    if (name === \"Cedrick\"){\r\n      dex+=2\r\n    }\r\n    dex += enlarger ? -2 : 0\r\n    dex += reducer ? 2 : 0\r\n\r\n    dex += age === 'Young' ? 2 : 0\r\n    dex += age === 'Middle' ? -1 : 0\r\n    dex += age === 'Old' ? -2 : 0\r\n    dex += age === 'Venerable' ? -3 : 0\r\n    if (armor){\r\n      // Mex Dex Bonus from Armor\r\n      if (armor === 'Wooden' && dex > 17){\r\n        dex = 17\r\n      }\r\n      if (armor === '+1 chain shirt' && dex > 19){\r\n        dex = 19\r\n      }\r\n      if (armor === 'Padded' && dex > 27){\r\n        dex = 27\r\n      }\r\n    }\r\n    dex += activeMutagen === 'dexterity' ? 4 : 0\r\n    return Math.floor((dex - 10) / 2)\r\n  }\r\n\r\n  const renderSize = () => {\r\n    switch (props.character_info.size){\r\n      case 'Tiny':\r\n        return 2\r\n      case 'Small':\r\n        return 1;\r\n      case 'Large':\r\n        return -1;\r\n      default:\r\n        return 0;\r\n    }\r\n  }\r\n\r\n  const dodge = () => {\r\n    let bonus = 0\r\n    if (fd){bonus += 2}\r\n    if (name === \"Persephone\"){bonus+=1}\r\n    if (name === \"Robby\"){bonus+=1}\r\n    return bonus\r\n  }\r\n\r\n  const natural = () => {\r\n    let bonus = 0\r\n    if (largeMorph){bonus +=4}\r\n    if (name === \"Persephone\"){bonus+=1}\r\n    if (name === \"Grackle\"){bonus+=1}\r\n    if (activeMutagen){bonus +=2}\r\n    return bonus\r\n  }\r\n\r\n  const armorBonus = () => {\r\n    let bonus = 0\r\n    if (armor){\r\n      if (armor === \"Wooden\"){bonus += 3}\r\n      if (armor === \"+1 chain shirt\"){bonus += 5}\r\n      if (armor === 'Padded'){bonus += 1}\r\n    }\r\n    return bonus\r\n  }\r\n\r\n  const deflection = () => {\r\n    let bonus = 0\r\n\r\n    // fabric of reality\r\n    bonus += name === 'Merg' ? 2 : 0\r\n\r\n    return bonus\r\n  }\r\n\r\n  const acCalc = (type) => {\r\n\r\n\t\tif(![\"Cedrick\", \"Nettie\", \"Persephone\", \"Merg\", \"Grackle\", \"Robby\", \"Maddox\"].includes(name)){\r\n\t\t\tswitch(type){\r\n\t\t\t\tcase 'ac':\r\n\t\t\t\t\treturn acTotal.armorClass\r\n\t\t\t\tcase 't':\r\n\t\t\t\t\treturn acTotal.touch\r\n\t\t\t\tcase 'ff':\r\n\t\t\t\t\treturn acTotal.flatFooted\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn 10\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\r\n    switch(type){\r\n      case 'ac':\r\n        return (10 + dexMod() + renderSize() + armorBonus() + dodge() + natural() + deflection() + raging + charging + cleave + cedrick + enlarge + reduce + dodgingPanache + quick + stealTime)\r\n      case 't':\r\n        return (10 + dexMod() + renderSize() + dodge() + deflection() + raging + charging + cleave + cedrick + enlarge + reduce + dodgingPanache + quick + stealTime)\r\n      case 'ff':\r\n        return (10 + (dexMod() > 0 ? 0 : dexMod()) + renderSize() + armorBonus() + natural() + deflection() + raging + charging + cleave + cedrick + enlarge + reduce + dodgingPanache + quick + stealTime)\r\n      default:\r\n        return 10\r\n    }\r\n  }\r\n\r\n  // const colorStyle = (type) => {\r\n  //   let dex = Math.floor((props.character_info.ability_scores.dexterity-10)/2)\r\n  //   let size = 0\r\n  //   if (name === 'Cedrick'){\r\n  //     size = 1\r\n  //     dex += 1\r\n  //   } else if (name === 'Nettie'){\r\n  //     size = 2\r\n  //   }\r\n  //   let natural = 0\r\n  //   let bonus = 0\r\n  //   if (name === 'Cedrick'){\r\n  //     bonus = 5\r\n  //   }\r\n  //   let armorBonus = 0\r\n  //   if (armor){\r\n  //     armorBonus += armor === 'Wooden' ? 3 : 0\r\n  //     dex = armor === 'Wooden' && dex > 3 ? 3 : dex\r\n  //     armorBonus += armor === '+1 chain shirt' ? 5 : 0\r\n  //     dex = armor === '+1 chain shirt' && dex > 4 ? 4 : dex\r\n  //     armorBonus += armor === 'Padded' ? 1 : 0\r\n  //     dex = armor === 'Padded' && dex > 8 ? 8 : dex\r\n  //   }\r\n  //   let defaultAC = 10 + dex + size + armorBonus + natural + bonus\r\n  //   defaultAC += name === \"Robby\" ? 1 : 0 // nimble feature\r\n  //   defaultAC += name === \"Persephone\" ? 1 : 0 // dodge feat\r\n  //   defaultAC += name === \"Persephone\" ? 1 : 0 // natural armor\r\n  //   defaultAC += name === \"Grackle\" ? 1 : 0 // natural armor\r\n  //   defaultAC += name === \"Merg\" ? 2 : 0 // fabric of reality\r\n  //   if (type === 't'){\r\n  //     defaultAC = 10 + dex + size + bonus\r\n  //     defaultAC += name === \"Robby\" ? 1 : 0 // nimble feature\r\n  //     defaultAC += name === \"Persephone\" ? 1 : 0 // dodge feat\r\n  //     defaultAC += name === \"Merg\" ? 2 : 0 // fabric of reality\r\n  //   } else if (type === 'ff'){\r\n  //     defaultAC = 10 + size + armorBonus + natural + bonus\r\n  //     defaultAC += name === \"Persephone\" ? 1 : 0 // natural armor\r\n  //     defaultAC += name === \"Grackle\" ? 1 : 0 // natural armor\r\n  //     defaultAC += name === \"Merg\" ? 2 : 0 // fabric of reality\r\n  //   }\r\n  //   if (defaultAC > acCalc(type)){\r\n  //     return {color: 'maroon'}\r\n  //   } else if (defaultAC < acCalc(type)){\r\n  //     return {color: 'green'}\r\n  //   } else {\r\n  //     return {color: 'black'}\r\n  //   }\r\n  // }\r\n\r\n\tconst dispatchTooltip = e => {\r\n\t\tlet element = e.target\r\n\t\twhile(element.id !== \"ac\"){\r\n\t\t\telement = element.parentElement\r\n\t\t}\r\n\r\n\t\tlet armorClassBreakdown = acModifiers.map(m => {\r\n\t\t\tlet bonusType = m.bonus !== \"untyped\" ? m.bonus : m.source\r\n\t\t\treturn <li>{pluser(m.mod)} {bonusType}</li>\r\n\t\t})\r\n\r\n\t\ttooltipAction(<ul style={{listStyle: \"none\", paddingLeft: \"0px\", margin: '0px'}}>{armorClassBreakdown}</ul>, element)\r\n\t}\r\n\r\n  if (localStorage.computer === \"true\"){\r\n    return (\r\n      <div id='ac' className='shadow shrink' onMouseOver={dispatchTooltip} onMouseOut={dispatchTooltip} style={{boxShadow: `5px 4px 2px #${props.settings.shadeColor}`, opacity: \"0.95\", backgroundColor: `#${props.settings.bubbleColor}`, borderColor: `#${props.settings.borderColor}`}}>\r\n        <span className='centered container-3'>\r\n          <section>\r\n            <div className='enhanced'>{acCalc('ac')}</div>\r\n            <div><strong>AC</strong></div>\r\n          </section>\r\n          <section>\r\n            <div className='enhanced'>{acCalc('t')}</div>\r\n            <div><strong>T</strong></div>\r\n          </section>\r\n          <section>\r\n            <div className='enhanced'>{acCalc('ff')}</div>\r\n            <div><strong>FF</strong></div>\r\n          </section>\r\n        </span>\r\n      </div>\r\n    )\r\n  } else if (localStorage.computer === \"false\"){\r\n    return (\r\n      <div className='shadow mobile-flex-boxes mobile-centering'>\r\n        <span style={{display: 'inline-block', margin: '0.3em', textAlign: 'center'}}>\r\n          <div className='enhanced'>{acCalc('ac')}</div>\r\n          <div><strong>AC</strong></div>\r\n        </span>\r\n        <span style={{display: 'inline-block', margin: '0.3em', textAlign: 'center'}}>\r\n          <div className='enhanced'>{acCalc('t')}</div>\r\n          <div><strong>T</strong></div>\r\n        </span>\r\n        <span style={{display: 'inline-block', margin: '0.3em', textAlign: 'center'}}>\r\n          <div className='enhanced'>{acCalc('ff')}</div>\r\n          <div><strong>FF</strong></div>\r\n        </span>\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info,\r\n\t\tsettings: state.settings\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(ArmorClass)\r\n","import { mod, pluser } from '../../fuf'\r\nimport { abilityScoreMod } from './ability_scores'\r\nimport { armorCheckPenaltyOnOtherAbilities } from './proficiencies'\r\nimport { sizeMod, specialSizeMod } from './size'\r\n\r\nexport const ab = (characterObj, characterInfoObj, type, options = {}) => {\r\n\t// NEW DATA\r\n\tlet array = []\r\n\tlet permanent = 0\r\n\tlet temporary = 0\r\n  let attackBonus = 0\r\n  let bab = baseAttackBonus(characterInfoObj.classes, characterObj.uniq_klasses)\r\n\tlet abilityMod\r\n\tlet permAbilityMod\r\n\r\n\tlet str = abilityScoreMod(\"strength\")\r\n\tlet dex = abilityScoreMod(\"dexterity\")\r\n\r\n\tlet permSTR = abilityScoreMod(\"strength\", true)\r\n\tlet permDEX = abilityScoreMod(\"dexterity\", true)\r\n\r\n\r\n\r\n  if (type === \"melee\"){\r\n    abilityMod = str\r\n\t\tpermAbilityMod = permSTR\r\n  } else if (type === \"range\"){\r\n    abilityMod = dex\r\n\t\tpermAbilityMod = permDEX\r\n  }\r\n\r\n\tif (options.finesse){\r\n\t\tabilityMod = dex\r\n\t\tpermAbilityMod = permDEX\r\n\t}\r\n\r\n\tlet bonuses = additionalBonuses(characterInfoObj.bonuses, type)\r\n\t\t.map(b => b.bonus)\r\n\t\t.reduce((agg, el) => {\r\n\t\t\treturn agg + el\r\n\t\t}, 0)\r\n\t// if you aren't proficient with your equipped armor\r\n\t// armor check penalty applies to attack rolls\r\n\tlet armorCheckPenalty = armorCheckPenaltyOnOtherAbilities()\r\n\r\n\tpermanent += bab\r\n\tpermanent += armorCheckPenalty\r\n\tpermanent += sizeMod(characterObj.race.size)\r\n\r\n\tif (permAbilityMod !== abilityMod) {\r\n\t\ttemporary += abilityMod - permAbilityMod\r\n\t\tpermanent += permAbilityMod\r\n\t} else {\r\n\t\tpermanent += abilityMod\r\n\t}\r\n\r\n\ttemporary += bonuses\r\n\r\n\tarray.push(permanent)\r\n\tarray.push(temporary)\r\n\treturn array\r\n}\r\n\r\nexport const renderAB = (characterObj, characterInfoObj, type, options) => {\r\n\tlet abArray = ab(characterObj, characterInfoObj, type, options)\r\n\treturn (abArray[0] + abArray[1])\r\n}\r\n\r\nexport const pluserAB = (characterObj, characterInfoObj, type) => {\r\n\treturn pluser(renderAB(characterObj, characterInfoObj, type))\r\n}\r\n\r\n export const baseAttackBonus = (klassLevels, allKlasses) => {\r\n\t let bab = 0\r\n\t klassLevels.forEach(cl => {\r\n     let klass = allKlasses.find(uk => uk.id === cl.id)\r\n     let preBAB = 1\r\n     preBAB = parseInt(klass.hit_die) === 8 ? 0.75 : preBAB\r\n     preBAB = parseInt(klass.hit_die) === 6 ? 0.5 : preBAB\r\n     bab += preBAB * cl.level\r\n   })\r\n\t return Math.floor(bab)\r\n }\r\n\r\nexport const additionalBonuses = (bonuses, type) => {\r\n\tlet applicableBonuses = []\r\n\r\n\tbonuses.forEach(b => {\r\n\t\tif (b.statistic === \"Attack\" && (b.specific_statistic === null || b.specific_statistic === type)){\r\n\t\t\tapplicableBonuses.push(b)\r\n\t\t}\r\n\t})\r\n\r\n\treturn applicableBonuses\r\n}\r\n\r\nexport const bonusPenaltyAB = (characterObj, characterInfoObj, type) => {\r\n\tlet temp = ab(characterObj, characterInfoObj, type)[1]\r\n\tlet color = \"black\"\r\n\tif (temp > 0){color = \"green\"}\r\n\tif (temp < 0){color = \"maroon\"}\r\n\treturn color\r\n}\r\n\r\nexport const combatManeuvers = (characterObj, characterInfoObj) => {\r\n\tlet obj = {}\r\n\r\n\tlet bab = baseAttackBonus(characterInfoObj.classes, characterObj.uniq_klasses)\r\n\tlet str = abilityScoreMod(\"strength\")\r\n\tlet dex = abilityScoreMod(\"dexterity\")\r\n\tlet size = specialSizeMod(characterObj.race.size)\r\n\r\n\tobj.bonus = str + bab + size\r\n\tobj.defense = 10 + str + dex + bab + size\r\n\r\n\treturn obj\r\n}\r\n","import React from 'react'\r\nimport _ from 'lodash'\r\nimport { connect } from 'react-redux'\r\nimport { pluserAB, bonusPenaltyAB } from '../../utils/calculations/attack_bonus'\r\n\r\n\r\nclass AttackBonus extends React.Component {\r\n\r\n  renderAbilityScoreModifiers = (scoreName) => {\r\n    let score = this.props.character[scoreName]\r\n    this.props.character.race.race_ability_score_modifiers.forEach(mod => {\r\n      if (_.capitalize(scoreName) === mod.ability_score){\r\n        score += mod.bonus\r\n      }\r\n    })\r\n    if (this.props.character.any_bonus === _.capitalize(scoreName)){\r\n      score +=2\r\n    }\r\n    const age = this.props.character.name === 'Maddox' && this.props.character_info.hardcode.age\r\n\r\n    if (scoreName === 'strength'){\r\n      score += age === 'Young' ? -2 : 0\r\n      score += age === 'Middle' ? -1 : 0\r\n      score += age === 'Old' ? -2 : 0\r\n      score += age === 'Venerable' ? -3 : 0\r\n    }\r\n    if (scoreName === 'dexterity'){\r\n      score += age === 'Young' ? 2 : 0\r\n      score += age === 'Middle' ? -1 : 0\r\n      score += age === 'Old' ? -2 : 0\r\n      score += age === 'Venerable' ? -3 : 0\r\n    }\r\n\r\n    return Math.floor( ( score - 10 ) / 2)\r\n  }\r\n\r\n  renderPolymorph = (ability) => {\r\n    let bonus = 0\r\n    const hc = this.props.character_info.hardcode\r\n    let minor = hc.minor\r\n    let major = hc.major\r\n    let name = this.props.character.name\r\n    const largeMorph = ['Bull - Major', 'Condor - Major', 'Frog - Major', 'Squid - Major', 'Chameleon - Major'].includes(major)\r\n    const enlarger = hc.enlarge\r\n    const reducer = hc.reduce\r\n    const activeMutagen = hc.activeMutagen ? hc.mutagen : false\r\n\r\n\r\n    switch(ability){\r\n      case \"strength\":\r\n        if (minor === \"Bull - Minor\"){\r\n          bonus++\r\n        }\r\n        if (largeMorph){\r\n          bonus +=2\r\n        }\r\n        bonus += enlarger ? 1 : 0\r\n        bonus += enlarger ? -1 : 0\r\n\r\n        bonus += reducer ? 1 : 0\r\n        bonus += reducer ? -1 : 0\r\n\r\n        bonus += activeMutagen === 'strength' ? 2 : 0\r\n        break\r\n      case \"dexterity\":\r\n        if (largeMorph){\r\n          bonus--\r\n        }\r\n        bonus += enlarger ? -1 : 0\r\n        bonus += enlarger ? -1 : 0\r\n\r\n        bonus += reducer ? 1 : 0\r\n        bonus += reducer ? 1 : 0\r\n\r\n        bonus += activeMutagen === 'dexterity' ? 2 : 0\r\n        break\r\n      default:\r\n        break\r\n    }\r\n    return bonus\r\n  }\r\n\r\n  renderBAB = (hd) => {\r\n    switch (hd){\r\n      case 6:\r\n        return 0.5;\r\n      case 8:\r\n        return 0.75;\r\n      case 10:\r\n        return 1;\r\n      case 12:\r\n        return 1;\r\n      default:\r\n        return 1;\r\n    }\r\n  }\r\n\r\n  renderSize = (size) => {\r\n    switch(size){\r\n      case \"Fine\":\r\n        return 8;\r\n      case \"Diminutive\":\r\n        return 4;\r\n      case \"Tiny\":\r\n        return 2;\r\n      case \"Small\":\r\n        return 1;\r\n      case \"Large\":\r\n        return -1;\r\n      case \"Huge\":\r\n        return -2;\r\n      case \"Gargantuan\":\r\n        return -4;\r\n      case \"Colossal\":\r\n        return -8;\r\n      default:\r\n        return 0;\r\n    }\r\n  }\r\n\r\n  renderAB = (ability, style) => {\r\n    if(this.props.character_info.classes && this.props.classes){\r\n\r\n      let ab = 0\r\n      this.props.character_info.classes.forEach(klass => {\r\n        let currentClass = this.props.classes.find(ck => ck.id === parseInt(klass.id))\r\n        ab += Math.floor(this.renderBAB(currentClass.hit_die) * klass.level)\r\n\r\n      })\r\n      // for (var klass_id in this.props.character_info.classes){\r\n      //   // find the class' info from the id\r\n      //   let currentClass = this.props.character.klasses.find(ck => ck.id === parseInt(klass.id))\r\n      //   // send the character's level in that class, and the relevant saving throw value\r\n      //   ab += Math.floor(this.renderBAB(currentClass.hit_die) * this.props.character_info.classes[klass_id])\r\n      // }\r\n      ab += this.renderAbilityScoreModifiers(ability)\r\n      ab += this.renderSize(this.props.character_info.size)\r\n      let ogAB = ab\r\n      ab += this.renderPolymorph(ability)\r\n      if (style){\r\n        if (ogAB > ab){\r\n          return {color: 'maroon'}\r\n        } else if (ogAB < ab){\r\n          return {color: 'green'}\r\n        } else {\r\n          return {color: 'black'}\r\n        }\r\n      } else {\r\n        return ab < 0 ? ab : `+${ab}`\r\n      }\r\n    }\r\n  }\r\n\r\n  render () {\r\n    return(\r\n      <div id='attack-bonus' className='shadow shrink'>\r\n        <span className='centered'>\r\n          <div className='duller'><strong>Attack Bonus</strong></div>\r\n          <div className='container-2'>\r\n            {!!this.props.classes.length && <span className='enhanced' style={{color: bonusPenaltyAB(this.props.character, this.props.character_info, \"melee\")}}>{pluserAB(this.props.character, this.props.character_info, \"melee\")}</span>}\r\n            {!!this.props.classes.length && <span className='enhanced' style={{color: bonusPenaltyAB(this.props.character, this.props.character_info, 'range')}}>{pluserAB(this.props.character, this.props.character_info, 'range')}</span>}\r\n            <span>Melee</span>\r\n            <span>Ranged</span>\r\n          </div>\r\n        </span>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n    character_info: state.character_info,\r\n    classes: state.classes\r\n  }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(AttackBonus)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faPencilAlt } from '@fortawesome/free-solid-svg-icons'\r\nimport { modalAction } from '../../utils/action_creator/popups'\r\nimport _ from 'lodash'\r\n\r\n\r\nconst Details = props => {\r\n\r\n  const [mobileDisplayDetails, setMobileDisplayDetails] = React.useState(false);\r\n\r\n\r\n  const languages = (name) => {\r\n    let knownLanguages = []\r\n    switch(name){\r\n      case \"Nettie\":\r\n        knownLanguages = [\"Common\", \"Draconic\", \"Aklo\", \"Infernal\", \"Sylvan\", \"Terran\", \"Undercommon\", \"Abyssal\", \"Celestial\", \"Sphinx\", \"Auran\"]\r\n        break\r\n      case \"Cedrick\":\r\n        knownLanguages = [\"Common\", \"Grippli\", \"Druidic\", \"Infernal\", \"Draconic\", \"Sylvan\"]\r\n        break\r\n      case 'Maddox':\r\n        knownLanguages = [\"Common\", \"Samsaran\", 'Celestrial, Infernal', 'Protean', 'Aklo', 'Draconic', 'Sphinx', 'Elven', 'Gnome', 'Abyssal', 'Sylvan', 'Drow']\r\n        break\r\n      case 'Merg':\r\n        knownLanguages = ['Common', 'Orc', 'Sylvan', 'Terran', 'Draconic', 'Giant', 'Undercommon']\r\n        break\r\n      case 'Robby':\r\n        knownLanguages = ['Common', 'Aquan', 'Auran', 'Ignan', 'Halfling (Jabberjaw Gem)', 'Abyssal (Jabberjaw Gem)', 'Dwarven (Jabberjaw Gem)', 'Sylvan (Jabberjaw Gem)', 'Undercommon (Jabberjaw Gem)']\r\n        break\r\n      case 'Fire-Roasted Tomatoes':\r\n        knownLanguages = ['Common', 'Sylvan', 'Aklo']\r\n        break\r\n      case 'Ildre':\r\n        knownLanguages = ['Common', 'Goblin', 'Draconic', \"Elven\", \"Undercommon\", \"Sylvan\", \"Abyssal\"]\r\n        break\r\n      case 'Iyugi':\r\n        knownLanguages = ['Common', \"Elven\", \"Sylvan\"]\r\n        break\r\n      case 'Natesse':\r\n        knownLanguages = ['Common', \"Hexadecimal\", \"Elven\", \"Goblin\", \"Draconic\"]\r\n        break\r\n      case \"Dz'eyn\":\r\n        knownLanguages = ['Common', \"Grippli\", \"Aquan\", \"Read Lips\"]\r\n        break\r\n      case \"Dink Weatherbyrst\":\r\n        knownLanguages = ['Common', \"Gnome\"]\r\n        break\r\n      default:\r\n        break\r\n    }\r\n    props.character_info.effects.forEach(e => {\r\n      if (e.type === 'language'){\r\n        knownLanguages.push(!!e.note.length ? `${e.language} (${e.note})` : e.language)\r\n      }\r\n    })\r\n    return knownLanguages\r\n  }\r\n\r\n\tconst renderDisplayDescription = () => {\r\n\t\tconst { displayDescriptions } = props.character_info\r\n\r\n\t\treturn displayDescriptions.map(dd => {\r\n\t\t\tlet description = dd.description\r\n\t\t\tif (dd.access_alignment){\r\n\t\t\t\tdescription += ` ${_.startCase(props.character.alignment)}`\r\n\t\t\t}\r\n\t\t\treturn <li><strong>{dd.title}</strong>: {description}</li>\r\n\t\t})\r\n\t}\r\n\r\n  if (localStorage.computer === \"true\"){\r\n    return(\r\n      <>\r\n        <span className='header' style={{borderColor: `#${props.settings.borderColor}`}}>Background</span>\r\n        {props.character.user_id === props.currentUser.id && <span className='edit' onClick={() => props.editModal('background')}><FontAwesomeIcon icon={faPencilAlt} /></span>}\r\n          <div className='nested'>\r\n            <div><strong>Full Name:</strong> {props.character.full_name}</div>\r\n            <div><strong>Background:</strong> {props.character.background}</div>\r\n            <div><strong>Age:</strong> {props.character.age}</div>\r\n            <div><strong>Size:</strong> {props.character.race.size}</div>\r\n            <div><strong>Alignment:</strong> {props.character.alignment}</div>\r\n            <div><strong>Deity:</strong> {props.character.deity}</div>\r\n            <div><strong>Homeland:</strong> {props.character.homeland}</div>\r\n          </div>\r\n        <div className='header' style={{borderColor: `#${props.settings.borderColor}`}}>Appearance</div>\r\n          <div className='nested'>\r\n            <div><strong>Description:</strong> {props.character.description}</div>\r\n            <div><strong>Gender:</strong> {props.character.gender}</div>\r\n            <div><strong>Hair:</strong> {props.character.hair}</div>\r\n            <div><strong>Eyes:</strong> {props.character.eyes}</div>\r\n            <div><strong>Height:</strong> {props.character.height}</div>\r\n            <div><strong>Weight:</strong> {props.character.weight}</div>\r\n          </div>\r\n        <div className='header' style={{borderColor: `#${props.settings.borderColor}`}}>Languages</div>\r\n          <div className='nested'>\r\n          {languages(props.character.name).join(\", \")}\r\n          </div>\r\n\t\t\t\t<div className='header' style={{borderColor: `#${props.settings.borderColor}`}}>Statistics</div>\r\n\t\t\t\t\t<div className='nested'>\r\n\t\t\t\t\t\t{renderDisplayDescription()}\r\n\t\t\t\t\t</div>\r\n      </>\r\n    )\r\n  } else if (localStorage.computer === \"false\"){\r\n    let titleWidth = mobileDisplayDetails ? '85%' : '100%'\r\n    return (\r\n      <>\r\n        <section className='mobile-feature-tab'>\r\n          <span style={{display: 'inline-block', width: titleWidth}} onClick={() => setMobileDisplayDetails(true)}>Character Details </span>\r\n          {mobileDisplayDetails && <span><button className='mobile-close-button' onClick={() => setMobileDisplayDetails(false)}>X</button></span>}\r\n          {mobileDisplayDetails &&\r\n            <section style={{maxHeight: `${window.outerHeight * 0.25}px`, overflow: 'scroll'}}>\r\n              <div className='header'>Background</div>\r\n              <div className='nested'>\r\n                <div><strong>Full Name:</strong> {props.character.full_name}</div>\r\n                <div><strong>Background:</strong> {props.character.background}</div>\r\n                <div><strong>Age:</strong> {props.character.age}</div>\r\n                <div><strong>Size:</strong> {props.character.race.size}</div>\r\n                <div><strong>Alignment:</strong> {props.character.alignment}</div>\r\n                <div><strong>Deity:</strong> {props.character.deity}</div>\r\n                <div><strong>Homeland:</strong> {props.character.homeland}</div>\r\n              </div>\r\n              <div className='header'>Appearance</div>\r\n                <div className='nested'>\r\n                  <div><strong>Description:</strong> {props.character.description}</div>\r\n                  <div><strong>Gender:</strong> {props.character.gender}</div>\r\n                  <div><strong>Hair:</strong> {props.character.hair}</div>\r\n                  <div><strong>Eyes:</strong> {props.character.eyes}</div>\r\n                  <div><strong>Height:</strong> {props.character.height}</div>\r\n                  <div><strong>Weight:</strong> {props.character.weight}</div>\r\n                </div>\r\n              <div className='header'>Languages</div>\r\n              <div className='nested'>\r\n              {languages(props.character.name).join(\", \")}\r\n              </div>\r\n            </section>\r\n          }\r\n        </section>\r\n      </>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n    character: state.character,\r\n    character_info: state.character_info,\r\n\t\tsettings: state.settings\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Details)\r\n","import React from 'react'\r\nimport _ from 'lodash'\r\nimport { connect } from 'react-redux'\r\nimport localhost from '../../localhost'\r\nimport { abilityScoreMod } from '../../utils/calculations/ability_scores'\r\nimport { skillBonusPluser, isThisAClassSkill, skillRanks, renderSkillTooltip, renderSkillName, addCustomSkills, sortSkills } from '../../utils/calculations/skills'\r\nimport { diceAction } from '../../utils/action_creator/popups'\r\n\r\nclass Skills extends React.Component {\r\n\r\n  state = {\r\n    skillset: false\r\n  }\r\n\r\n  componentDidMount() {\r\n    fetch(`${localhost}/api/v1/skillsets/${this.props.character.skillset.id}`)\r\n    .then(r => r.json())\r\n    .then(data => {\r\n      this.setState({skillset: data.skillset})\r\n    })\r\n  }\r\n\r\n  // TODO\r\n  // A lot of this is outdated, since updating the modified skills function\r\n  // renderSkillBonus is still used for changes to stats,\r\n  // and for Persephone's headband of intellect, which gives her a full bonus to Religion checks\r\n  // modifiedSkills should be renamed and abstracted\r\n  // one all the hardcoding is removed, strip a lot of this down\r\n  // note: current name generation is in the asterisk function\r\n  // to account for craft and profession and the like with detailed skill names\r\n\r\n  renderSkillBonus = (skill, style) => {\r\n    let score = this.props.character_info.ability_scores[_.lowerCase(skill.ability_score)]\r\n    const age = this.props.character.name === 'Maddox' && this.props.character_info.hardcode.age\r\n    if (skill.ability_score === \"Strength\"){\r\n      score += age === 'Young' ? -2 : 0\r\n      score += age === 'Middle' ? -1 : 0\r\n      score += age === 'Old' ? -2 : 0\r\n      score += age === 'Venerable' ? -3 : 0\r\n    }\r\n    if (skill.ability_score === \"Dexterity\"){\r\n      score += age === 'Young' ? 2 : 0\r\n      score += age === 'Middle' ? -1 : 0\r\n      score += age === 'Old' ? -2 : 0\r\n      score += age === 'Venerable' ? -3 : 0\r\n\r\n    }\r\n    if (skill.ability_score === 'Constitution'){\r\n      score += age === 'Young' ? -2 : 0\r\n      score += age === 'Middle' ? -1 : 0\r\n      score += age === 'Old' ? -2 : 0\r\n      score += age === 'Venerable' ? -3 : 0\r\n\r\n    }\r\n    if (skill.ability_score === \"Intelligence\"){\r\n      score += age === 'Middle' ? 1 : 0\r\n      score += age === 'Old' ? 1 : 0\r\n      score += age === 'Venerable' ? 1 : 0\r\n\r\n    }\r\n    if (skill.ability_score === 'Wisdom'){\r\n      score += age === 'Young' ? -2 : 0\r\n      score += age === 'Middle' ? 1 : 0\r\n      score += age === 'Old' ? 1 : 0\r\n      score += age === 'Venerable' ? 1 : 0\r\n\r\n    }\r\n    if (skill.ability_score === 'Charisma'){\r\n      score += age === 'Middle' ? 1 : 0\r\n      score += age === 'Old' ? 1 : 0\r\n      score += age === 'Venerable' ? 1 : 0\r\n\r\n    }\r\n    let mod = abilityScoreMod(_.lowerCase(skill.ability_score))\r\n    let skillRanks = this.renderNumOfRanks(skill)\r\n      mod += skillRanks\r\n    if (this.renderClassSkill(skill) && skillRanks > 0){\r\n      mod += 3\r\n    }\r\n    // hardcode\r\n    const hc = this.props.character_info.hardcode\r\n    const name = this.props.character.name\r\n    const size = this.props.character_info.size\r\n    const largeMorph = ['Bull - Major', 'Condor - Major', 'Frog - Major', 'Squid - Major', 'Chameleon - Major'].includes(hc.major)\r\n    const armor = hc.armor\r\n    const enlarger = hc.enlarge\r\n    const reducer = hc.reduce\r\n    if (skill.name === \"Stealth\"){\r\n      const size = this.props.character_info.size\r\n      if (size === \"Small\"){\r\n        mod += 4\r\n      } else if (size === \"Large\"){\r\n        mod -= 4\r\n      } else if (size === \"Tiny\"){\r\n        mod += 8\r\n      }\r\n    }\r\n    if (skill.ability_score === 'Dexterity' && name === 'Cedrick'){\r\n      mod += 1\r\n    }\r\n    if (armor){\r\n      // ARMOR CHECK PENALTY FROM ARMOR\r\n      if (skill.ability_score === 'Dexterity' || skill.ability_score === 'Strength'){\r\n        mod += armor === 'Wooden' ? -1 : 0\r\n        mod += armor === '+1 chain shirt' ? -1 : 0\r\n      }\r\n    }\r\n    if (skill.ability_score === \"Intelligence\" && name === \"Persephone\"){\r\n      mod += 1\r\n    }\r\n    // agile trait\r\n    mod += skill.name === 'Acrobatics' && name === 'Robby' ? 2 : 0\r\n    // sea legs\r\n    mod += skill.name === 'Acrobatics' && name === 'Robby' ? 2 : 0\r\n    mod += skill.name === 'Climb' && name === 'Robby' ? 2 : 0\r\n    mod += skill.name === 'Swim' && name === 'Robby' ? 2 : 0\r\n    //  skilled trait\r\n    mod += skill.name === 'Bluff' && name === 'Grackle' ? 2 : 0\r\n    mod += skill.name === 'Stealth' && name === 'Grackle' ? 2 : 0\r\n\r\n\r\n\r\n    let bonus = 0\r\n    this.props.character_info.bonuses.forEach(b => {\r\n      if (b.type === 'skill' && b.skill_id === skill.id && b.duration === 'permanent'){\r\n        bonus += b.bonus\r\n      }\r\n    })\r\n    mod += bonus\r\n    // check to see if the starting mod is modified\r\n    let ogMod = mod\r\n    const activeMutagen = hc.activeMutagen ? hc.mutagen : false\r\n    if (skill.ability_score === 'Strength'){\r\n      if (largeMorph){\r\n        mod += 2\r\n      }\r\n      if (hc.minor === 'Bull - Minor'){\r\n        mod +=1\r\n      }\r\n      mod += enlarger ? 1 : 0\r\n      mod += reducer ? -1 : 0\r\n\r\n      mod += activeMutagen === 'strength' ? 4 : 0\r\n    }\r\n    if (skill.ability_score === 'Dexterity'){\r\n      if (largeMorph){\r\n        mod -= 1\r\n      }\r\n      mod += enlarger ? -1 : 0\r\n      mod += reducer ? 1 : 0\r\n\r\n      mod += activeMutagen === 'dexterity' ? 4 : 0\r\n    }\r\n    if (skill.ability_score === 'Constitution'){\r\n      mod += activeMutagen === 'constitution' ? 4 : 0\r\n    }\r\n    if (skill.ability_score === 'Intelligence'){\r\n      mod += activeMutagen === 'strength' ? -2 : 0\r\n    }\r\n    if (skill.ability_score === 'Wisdom'){\r\n      mod += activeMutagen === 'dexterity' ? -2 : 0\r\n    }\r\n    if (skill.ability_score === 'Charisma'){\r\n      mod += activeMutagen === 'constitution' ? -2 : 0\r\n    }\r\n    if (skill.name === 'Swim'){\r\n      if (hc.minor === 'Frog - Minor'){\r\n        mod += 2\r\n      }\r\n      if (hc.major === 'Frog - Major'){\r\n        mod += 8\r\n      }\r\n      if (size === 'Tiny'){\r\n        mod -= Math.floor((score-10)/2)\r\n        const dex = this.props.character_info.ability_scores.dexterity\r\n        const dexMod = Math.floor((dex-10)/2)\r\n        mod += dexMod\r\n      }\r\n    }\r\n    if (skill.name === 'Climb'){\r\n      if (size === 'Tiny'){\r\n        mod -= Math.floor((score-10)/2)\r\n        const dex = this.props.character_info.ability_scores.dexterity\r\n        const dexMod = Math.floor((dex-10)/2)\r\n        mod += dexMod\r\n      }\r\n    }\r\n    if (skill.name === 'Intimidate'){\r\n      if (name === \"Cedrick\"){\r\n        mod += 1\r\n        ogMod += 1\r\n      }\r\n    }\r\n    if (!style){\r\n      return mod < 0 ? mod : `+${mod}`\r\n    } else {\r\n      if (ogMod > mod){\r\n        return {color: 'maroon'}\r\n      } else if (ogMod < mod){\r\n        return {color: 'green'}\r\n      } else {\r\n        return {color: 'black'}\r\n      }\r\n    }\r\n  }\r\n\r\n  renderNumOfRanks = (skill) => {\r\n    let name = this.props.character.name\r\n    let skillRanks = this.props.character.character_skillset_skills.find(chsss => chsss.skill_id === skill.id)\r\n    if (skill.name === 'Religion' && name === \"Persephone\"){\r\n      skillRanks = skillRanks || {ranks: this.props.character.character_klasses.length}\r\n    }\r\n    if (skill.name === 'Perform (percussion)' && name === \"Nettie\"){\r\n      skillRanks = {ranks: 100}\r\n    }\r\n    if (skill.name === 'Perform (strings)' && name === \"Nettie\"){\r\n      skillRanks = {ranks: 100}\r\n    }\r\n    return skillRanks !== undefined ? skillRanks.ranks : 0\r\n  }\r\n\r\n  renderClassSkill = (skill) => {\r\n    let isThisAClassSkill = false\r\n    this.props.character.uniq_klasses.forEach(klass => {\r\n      klass.class_skillset_skills.forEach(csss => {\r\n        if (klass.name === \"Vigilante\" && this.props.character.name === \"Persephone\"){\r\n          let validClassSkills = ['Acrobatics', 'Bluff', 'Climb', 'Craft', 'Diplomacy', 'Disguise', 'Intimidate', 'Perform', 'Profession', 'Sense Motive', 'Stealth', 'Swim', 'Investigation', 'Society', 'Spellcraft', 'Religion']\r\n          if (csss.skill_id === skill.id && csss.skillset_id === this.props.character.skillset.id && validClassSkills.includes(skill.name)){\r\n            isThisAClassSkill = true\r\n          }\r\n        } else if (csss.skill_id === skill.id && csss.skillset_id === this.props.character.skillset.id) {\r\n          isThisAClassSkill = true\r\n        }\r\n      })\r\n    })\r\n    return isThisAClassSkill\r\n  }\r\n\r\n  renderAbilityScoreAbbreviation = (skill) => {\r\n    const name = skill.name === \"Climb\" || skill.name === \"Swim\"\r\n    const size = this.props.character_info.size === 'Tiny'\r\n    let armor = this.props.character_info.hardcode.armor\r\n    let abbrev\r\n    if (name && size){\r\n      abbrev = 'Dex'\r\n    } else {\r\n      abbrev = skill.ability_score.slice(0, 3)\r\n    }\r\n    if (armor){\r\n      if (abbrev === 'Dex' || abbrev === 'Str'){\r\n        abbrev += armor === 'Wooden' ? '*' : ''\r\n        abbrev += armor === '+1 chain shirt' ? '*' : ''\r\n      }\r\n    }\r\n    if (this.props.character_info.hardcode.quick){\r\n      if (abbrev === 'Dex' || abbrev === 'Cha'){\r\n        abbrev += '*'\r\n      }\r\n    }\r\n    return abbrev\r\n  }\r\n\r\n  modifiedSkills = () => {\r\n    let skills = [...this.state.skillset.skills]\r\n    let name = this.props.character.name\r\n    if (name === 'Merg'){\r\n      skills.push({name: 'Profession (fence)', ability_score: 'Wisdom'})\r\n      skills.push({name: 'Profession (sailor)', ability_score: 'Wisdom'})\r\n      skills = skills.filter(sk => sk.name !== 'Profession')\r\n    }\r\n    if (name === 'Robby'){\r\n      skills.push({name: 'Profession (sailor)', ability_score: 'Wisdom'})\r\n      skills.push({name: 'Perform (acting)', ability_score: 'Charisma'})\r\n      skills = skills.filter(sk => sk.name !== 'Profession')\r\n      skills = skills.filter(sk => sk.name !== 'Perform')\r\n    }\r\n    if (name === 'Nettie'){\r\n      skills.push({name: 'Perform (percussion)', ability_score: 'Charisma'})\r\n      skills.push({name: 'Perform (strings)', ability_score: 'Charisma'})\r\n      skills = skills.filter(sk => sk.name !== 'Perform')\r\n    }\r\n    let clearlyDefinedSkills = []\r\n    skills.forEach(sk => {\r\n      let skill = {...sk}\r\n      let cskSkill = this.props.character.character_skillset_skills.filter(css => css.skill_id === skill.id)\r\n      if (cskSkill.length === 1){\r\n        cskSkill = cskSkill[0]\r\n        skill.detail = cskSkill.detail ? `${skill.name} (${cskSkill.detail})` : cskSkill.detail\r\n        skill.ranks = cskSkill.ranks\r\n        skill.classSkill = this.renderClassSkill(skill)\r\n        skill.bonus = this.renderSkillBonus(skill)\r\n        clearlyDefinedSkills.push(skill)\r\n      } else if (cskSkill.length > 1){\r\n        cskSkill.forEach(css => {\r\n          let currentSkill = {...skill}\r\n          currentSkill.detail = css.detail ? `${skill.name} (${css.detail})` : css.detail\r\n          currentSkill.ranks = css.ranks\r\n          currentSkill.classSkill = this.renderClassSkill(currentSkill)\r\n          currentSkill.bonus = this.renderSkillBonus(currentSkill)\r\n          clearlyDefinedSkills.push(currentSkill)\r\n        })\r\n      } else if (cskSkill.length === 0){\r\n        skill.detail = null\r\n        skill.ranks = 0\r\n        skill.classSkill = this.renderClassSkill(skill)\r\n        skill.bonus = this.renderSkillBonus(skill)\r\n        clearlyDefinedSkills.push(skill)\r\n      }\r\n    })\r\n    return clearlyDefinedSkills.sort((a,b) => a.name > b.name ? 1 : -1)\r\n  }\r\n\r\n  renderSkillTableRow = () => {\r\n    // const sortedSkills = this.modifiedSkills()\r\n\t\tlet skills = this.props.character.skillset.skills\r\n\t\tskills = [...skills, ...addCustomSkills(this.props.character.character_skillset_skills, skills)]\r\n\t\tskills = sortSkills(skills)\r\n\t\treturn skills.map(skill => {\r\n\t\t\t// console.log(skill.name, skillBonusPluser(skill))\r\n\t\t\tlet modifier = skillBonusPluser(skill)\r\n      return (\r\n        <tr key={_.random(1, 2000000)}>\r\n          <td>{isThisAClassSkill(skill, this.props.character) ? \"X\" : null}</td>\r\n          <td onMouseOver={(e) => this.renderTooltip(e, null, skill.ability_score)} onMouseOut={this.props.mouseOut}><strong>{this.renderAbilityScoreAbbreviation(skill)}</strong></td>\r\n          <td className={this.raging(skill.name)} style={{color: `#${this.props.settings.textColor}`}} onMouseOver={(e) => this.renderTooltip(e, skill)} onMouseOut={(e) => this.renderTooltip(e, skill)}>{renderSkillName(skill)}</td>\r\n          <td style={{color: `#${this.props.settings.textColor}`, border: `1px solid #${this.props.settings.borderColor}`, borderRadius: \"0.3em\", textAlign: \"center\", cursor: \"default\"}} onClick={() => this.rollSkill(skill.name, modifier)}>{modifier}</td>\r\n          <td style={{textAlign: \"center\"}}>{skillRanks(skill, this.props.character)}</td>\r\n        </tr>\r\n      )}\r\n    )\r\n  }\r\n\r\n\trollSkill = (name, modifier) => {\r\n\t\tlet obj = {rollName: name, modifier: parseInt(modifier), die: 20, count: 1}\r\n\t\tdiceAction(obj)\r\n\t}\r\n\r\n  renderMobileSkillsRow = () => {\r\n    const sortedSkills = this.modifiedSkills()\r\n    return sortedSkills.map((skill, i) => {\r\n      return <p key={i*3-1} style={{fontSize: '14px', textAlign: 'center', marginBottom: '2%'}}><strong style={{fontSize: '11px'}}>{skill.name}</strong> {skillBonusPluser(skill)}</p>\r\n    })\r\n  }\r\n\r\n// HARDCODING INSTEAD OF DYNAMIC\r\n  // cheatingSize = (skill) => {\r\n  //   if (this.props.character.name === \"Nettie\"){\r\n  //     return \"+19\"\r\n  //   } else if (this.props.character.name === \"Cedrick\"){\r\n  //     return \"LOOK UP THE DANG NUMBER\"\r\n  //   } else {\r\n  //     return this.renderSkillBonus(skill)\r\n  //   }\r\n  // }\r\n\r\n  asterisk = (skillObj) => {\r\n    let skill = skillObj.detail ? skillObj.detail : skillObj.name\r\n    let asterisk = skill + \"*\"\r\n    let name = this.props.character.name\r\n    let hc = this.props.character_info.hardcode\r\n    if(skillObj.customizable){\r\n      let cskSkill = this.props.character.character_skillset_skills.filter(css => css.skill_id === skillObj.id)\r\n    }\r\n    let isThereAnAsterisk = false\r\n\r\n    // REFACTOR\r\n    // THIS DOES NOT ACCOUNT FOR BONUSES TO DIFFERENT KINDS OF THE SAME SKILL\r\n    // IE CRAFT, PROFESSION, PERFORM\r\n    this.props.character_info.bonuses.forEach(b => {\r\n      if (skill && b.skill_id && b.skill_id === skillObj.id && b.note){\r\n        isThereAnAsterisk = true\r\n      }\r\n    })\r\n    if (isThereAnAsterisk){\r\n      return asterisk\r\n    }\r\n\r\n    switch(skill){\r\n      case 'Acrobatics':\r\n        if (hc.minor === 'Frog - Minor' || hc.major === 'Frog - Major' || hc.major === 'Condor - Major' || name === 'Festus' || name === 'Robby'){\r\n          return asterisk\r\n        } else {\r\n          return skill\r\n        }\r\n      case 'Heal':\r\n        if (name === 'Nettie'){\r\n          return asterisk\r\n        } else {\r\n          return skill\r\n        }\r\n      case 'Survival':\r\n        if (name === 'Nettie'){\r\n          return asterisk\r\n        } else {\r\n          return skill\r\n        }\r\n      case 'Swim':\r\n        if (hc.major === 'Frog - Major' || name === 'Robby'){\r\n          return asterisk\r\n        } else {\r\n          return skill\r\n        }\r\n      case 'Stealth':\r\n        if (name === 'Cedrick' || name === 'Grackle'){\r\n          return asterisk\r\n        } else if (hc.major === 'Chameleon - Major') {\r\n          return asterisk\r\n        } else {\r\n          return skill\r\n        }\r\n      case 'Intimidate':\r\n        if (name === 'Cedrick' || name === 'Robby'){\r\n          return asterisk\r\n        } else {\r\n          return skill\r\n        }\r\n      case 'Religion':\r\n        if (name === 'Persephone'){\r\n          return asterisk\r\n        } else {\r\n          return skill\r\n        }\r\n      case 'Disguise':\r\n        if (name === 'Persephone'){\r\n          return asterisk\r\n        } else {\r\n          return skill\r\n        }\r\n      case 'Finesse':\r\n        if (name === 'Robby'){\r\n          return asterisk\r\n        } else {\r\n          return skill\r\n        }\r\n      case 'Handle Animal':\r\n        if (name === 'Robby'){\r\n          return asterisk\r\n        } else {\r\n          return skill\r\n        }\r\n      case 'Climb':\r\n        if (name === 'Robby'){\r\n          return asterisk\r\n        } else {\r\n          return skill\r\n        }\r\n      case 'Sense Motive':\r\n        if (name === 'Merg'){\r\n          return asterisk\r\n        } else {\r\n          return skill\r\n        }\r\n      case 'Bluff':\r\n        if (name === 'Grackle'){\r\n          return asterisk\r\n        } else {\r\n          return skill\r\n        }\r\n      default:\r\n        return skill\r\n    }\r\n  }\r\n\r\n  raging = (skill) => {\r\n    let array = [\"Bluff\", \"Craft\", \"Diplomacy\", \"Disguise\", \"Finesse\", \"Handle Animal\", \"Investigation\", \"Linguistics\", \"Nature\", \"Perform\", \"Religion\", \"Society\", \"Spellcraft\", \"Stealth\"]\r\n    if (array.includes(skill) && this.props.character_info.hardcode.rage){\r\n      return 'strike'\r\n    }\r\n  }\r\n\r\n  renderTooltip = (e, skillObj, ability) => {\r\n    let comment = []\r\n    let name = this.props.character.name\r\n    let hc = this.props.character_info.hardcode\r\n    let armor = hc.armor\r\n    let skill = skillObj ? skillObj.name : skillObj\r\n\r\n    this.props.character_info.bonuses.forEach(b => {\r\n      if (skill && b.skill_id === skillObj.id && b.note){\r\n        comment.push(_.capitalize(b.note))\r\n      }\r\n    })\r\n\r\n\t\tif (skillObj) {\r\n\t\t\tlet tooltipString = renderSkillTooltip(skillObj)\r\n\t\t\tif (tooltipString) {\r\n\t\t\t\tthis.props.dispatch({type: \"TOOLTIP\", message: tooltipString, target: e.target})\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n    if ((skill === \"Survival\" || skill === \"Heal\") && name === \"Nettie\"){\r\n      comment.push(\"Scrivener's Versatility\")\r\n    }\r\n    if (skill === \"Acrobatics\"){\r\n      if (hc.minor === 'Frog - Minor'){\r\n        comment.push('+4 when jumping')\r\n      } else if (hc.major === 'Frog - Major'){\r\n        comment.push('Treat all jumps as if you had a running start')\r\n      } else if (hc.major === 'Condor - Major' || name === 'Festus'){\r\n        comment.push('+8 to flying check from Fly Speed')\r\n      } else if (name === 'Robby'){\r\n        comment.push('Derring-Do: Spend 1 Panache to add +1d6, up to 4 times')\r\n      }\r\n    }\r\n    if (skill === \"Swim\"){\r\n      if (hc.major === 'Frog - Major'){\r\n        comment.push('Swim Speed')\r\n      } else if (name === 'Robby'){\r\n        comment.push('Derring-Do: Spend 1 Panache to add +1d6, up to 4 times')\r\n      }\r\n    }\r\n    if (skill === \"Stealth\"){\r\n      if (name === 'Cedrick'){\r\n        comment.push('+4 bonus in Marshes and Forests')\r\n      }\r\n      if (hc.major === 'Chameleon - Major'){\r\n        comment.push(comment + ', +10 bonus if you are standing still')\r\n      }\r\n      if (name === \"Grackle\"){\r\n        comment.push('+2 racial bonus from Skilled trait')\r\n      }\r\n    }\r\n    if (skill === 'Intimidate'){\r\n      if (name === 'Cedrick'){\r\n        comment.push(<span>+1 enchancement bonus from <em>ominous</em> from Ta'al'mon Ancestral Handwraps</span>)\r\n      } else if (name === 'Robby'){\r\n        comment.push('Meanacing Swordplay: If you have at least 1 Panache, after a melee attack, Demoralize as a swift action instead of standard action')\r\n      }\r\n    }\r\n    if (skill === 'Religion'){\r\n      if (name === 'Persephone'){\r\n        comment.push(<span>{this.props.character.character_klasses.length} skill ranks from <em>Headband of Vast Intelligence +2</em></span>)\r\n      }\r\n    }\r\n    if (skill === 'Disguise'){\r\n      if (name === 'Persephone'){\r\n        let currently = 'Persephone'\r\n        let alterEgo = 'the Autumn Equinox'\r\n        if (hc.autumn) {\r\n          currently = 'the Autumn Equinox'\r\n          alterEgo = 'Persephone'\r\n        }\r\n        comment.push(<span>+20 circumstance bonus to appear as {currently} if suspected to be {alterEgo}</span>)\r\n      }\r\n    }\r\n    if (skill === 'Finesse'){\r\n      if (name === 'Robby'){\r\n        comment.push('Derring-Do: Spend 1 Panache to add +1d6, up to 4 times')\r\n      }\r\n    }\r\n    if (skill === 'Handle Animal'){\r\n      if (name === 'Robby'){\r\n        comment.push('Derring-Do: Spend 1 Panache to add +1d6 to ride checks, up to 4 times')\r\n      }\r\n    }\r\n    if (skill === 'Climb'){\r\n      if (name === 'Robby'){\r\n        comment.push('Derring-Do: Spend 1 Panache to add +1d6, up to 4 times')\r\n      }\r\n    }\r\n    if (skill === 'Sense Motive'){\r\n      if (name === 'Merg'){\r\n        comment.push('If the Fabric of Reality is draped over your eyes, +4 bonus.')\r\n      }\r\n    }\r\n    if (skill === 'Bluff'){\r\n      if (name === \"Grackle\"){\r\n        comment.push('+2 racial bonus from Skilled trait')\r\n      }\r\n    }\r\n    if (ability){\r\n      let armor = hc.armor\r\n      if (armor && (ability === 'Strength' || ability === 'Dexterity')){\r\n        comment.push(armor === 'Wooden' ? 'Armor Check Penalty: -1' : comment)\r\n        comment.push(armor === '+1 chain shirt' ? 'Armor Check Penalty: -1' : comment)\r\n      }\r\n      if (hc.quick && (ability === 'Dexterity' || ability === 'Charisma')){\r\n        comment.push(`Advantage on ${ability}-based checks`)\r\n      }\r\n    }\r\n    if (!!comment.length){\r\n      this.props.renderTooltip(e, comment.join(', '))\r\n    }\r\n  }\r\n\r\n\r\n// HARDCODING INSTEAD OF DYNAMIC\r\n\r\n  renderSkillsTable = () => {\r\n    return (\r\n      <table>\r\n        <thead className=\"dynamic-size-smaller\">\r\n          <tr >\r\n            <th>Class</th>\r\n            <th>Ability</th>\r\n            <th>Skill</th>\r\n            <th>Bonus</th>\r\n            <th>Ranks</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody >\r\n          {this.renderSkillTableRow()}\r\n        </tbody>\r\n      </table>\r\n    )\r\n  }\r\n\r\n  renderMobileSkills = () => {\r\n    return (\r\n      <div style={{display: 'grid', gridTemplateColumns: '1fr 1fr'}}>\r\n        {this.renderMobileSkillsRow()}\r\n      </div>\r\n    )\r\n  }\r\n\r\n\r\n  render(){\r\n\r\n    if (localStorage.computer === \"true\"){\r\n      return(\r\n        <div id='skills' className='shadow' style={{boxShadow: `5px 4px 2px #${this.props.settings.shadeColor}`, opacity: \"0.95\", backgroundColor: `#${this.props.settings.bubbleColor}`, borderColor: `#${this.props.settings.borderColor}`}}>\r\n          <div className=\"dynamic-size\" name=\"skill list\">\r\n            {!!this.state.skillset ? this.renderSkillsTable() : null}\r\n          </div>\r\n        </div>\r\n      )\r\n    } else if (localStorage.computer === \"false\"){\r\n      return (\r\n        <section className='mobile-flex-boxes shadow'>\r\n          {!!this.state.skillset ? this.renderMobileSkills() : null}\r\n        </section>\r\n      )\r\n    }\r\n\r\n  }\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n    character: state.character,\r\n    character_info: state.character_info,\r\n\t\tsettings: state.settings\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Skills)\r\n","import React from 'react'\r\nimport _ from 'lodash'\r\nimport { connect } from 'react-redux'\r\nimport { modalAction } from '../../utils/action_creator/popups'\r\nimport { injectSpellIntoDescription, descriptionParser } from '../../utils/fuf'\r\n\r\nclass Features extends React.Component {\r\n\r\n  state = {\r\n    activeFeature: 0\r\n  }\r\n\r\n  changeActiveFeature = (id) => {\r\n    if (this.state.activeFeature === id) {\r\n      this.setState({activeFeature: 0})\r\n    } else {\r\n      this.setState({activeFeature: id})\r\n    }\r\n  }\r\n\r\n\r\n  renderClassFeatures = () => {\r\n    // let klass_ids = {}\r\n    // this.props.character.character_klasses.forEach(klass => {\r\n    //   klass_ids[klass.klass_id] = klass.level\r\n    // })\r\n    let klasses = [...this.props.character.uniq_klasses]\r\n    let justFeatures = klasses.map(kl => kl.klass_features)\r\n    // let features = _.flatten(justFeatures)\r\n\t\tlet kspecFeatures = this.props.character.klass_specializations.map(ckspec => {\r\n\t\t\treturn ckspec.klass_specialization_features.map(kspecFeature => {\r\n\t\t\t\treturn {...kspecFeature, name: `${ckspec.name} - ${kspecFeature.name}`}\r\n\t\t\t})\r\n\t\t}).flat()\r\n    let features = [...this.props.character.applicable_klass_features, ...kspecFeatures]\r\n    features = this.circumventFeatures(this.props.character.name, features)\r\n    return features.map(feature => {\r\n      // let level = this.props.character_info.classes.find(cl => cl.id === feature.klass_id).level\r\n      // let startingLevel = 20\r\n      // feature.feature_levels.forEach(fl => {\r\n      //   if (fl.level < startingLevel){\r\n      //     startingLevel = fl.level\r\n      //   }\r\n      // })\r\n      // if (startingLevel <= level){\r\n        let klass = klasses.find(cl => cl.id === feature.klass_id)\r\n        let name = feature.name\r\n        if (klass && feature.name === \"Weapon and Armor Proficiency\"){\r\n          name = `${feature.name} - ${klass.name}`\r\n        }\r\n\t\t\t\tlet description = feature.description\r\n\t\t\t\tif (feature.associated_spells?.length) {\r\n\t\t\t\t\tlet spells = feature.associated_spells\r\n\t\t\t\t\tif (spells.length){description = injectSpellIntoDescription(description, spells, this.renderSpellClick, {})}\r\n\t\t\t\t}\r\n\t\t\t\tif (feature.features.find(f => f.castable_spells.length)) {\r\n\t\t\t\t\tlet spells = []\r\n\t\t\t\t\tfeature.features.forEach(f => {\r\n\t\t\t\t\t\tf.castable_spells.forEach(cs => {\r\n\t\t\t\t\t\t\tspells.push(cs.spell)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\tif (spells.length){description = injectSpellIntoDescription(description, spells, this.renderSpellClick, {})}\r\n\t\t\t\t}\r\n\t\t\t\tif (typeof description === \"string\"){description = descriptionParser(description)}\r\n\r\n        return (\r\n          <li key={(feature.id * 3) -1} onClick={() => modalAction(\"generic\", feature, {name: feature.name})} className='highlight mobile-selected-tab-content' style={{maxHeight: window.outerHeight * 0.4}}>\r\n            <strong>{name}</strong>\r\n          </li>\r\n        )\r\n      // } else {\r\n      //   return null\r\n      // }\r\n\r\n    })\r\n  }\r\n\r\n\trenderSpellClick = (incomingSpell) => {\r\n\t\tmodalAction(\"spellDescription\", incomingSpell)\r\n\t}\r\n\r\n  circumventFeatures = (name, features) => {\r\n    let newFeatures = []\r\n    let replacedFeatures = []\r\n    let addedFeatures = []\r\n    if (name === 'Nettie'){\r\n      replacedFeatures = [\"Bardic Knowledge\", \"Well-Versed\", \"Versatile Performance\"]\r\n      addedFeatures = [\r\n        {\r\n          id: 1001,\r\n          actions: [],\r\n          description: 'A chronicler of worlds can take 10 on Religion checks. A number of times per day equal to her Intelligence modifier, she can take 20 on a Religion check. This ability stacks with that gained by lore master at 5th level.\\n\\nA chronicler of worlds can attempt all Knowledge checks untrained.',\r\n          feature_levels: [{level: 1}],\r\n          feature_options: [],\r\n          klass_id: 10,\r\n          name: \"Planar Lore\",\r\n          spellcasting: null\r\n        },\r\n        {\r\n          id: 1002,\r\n          actions: [],\r\n          description: 'A chronicler of worlds rejects cosmic morality. At 2nd level, she does not take penalties imposed by planar alignment traits, and she gains a +4 bonus on saving throws against spells and effects that vary based on their target’s alignment.',\r\n          feature_levels: [{level: 2}],\r\n          feature_options: [],\r\n          klass_id: 10,\r\n          name: \"Amoral Scholar\",\r\n          spellcasting: null\r\n        },\r\n        {\r\n          id: 1003,\r\n          actions: [],\r\n          description: 'A chronicler of worlds seeks to emulate history’s greatest scribe; gaining insight into widely varying subjects, from anatomy to discourse. At 2nd level, a chronicler of worlds selects a skill from the following list: Bluff, Diplomacy, Finesse, Heal, Intimidate, Profession (scribe), Sense Motive, or Survival. When attempting skill checks of that type, a chronicler can use her Linguistics skill bonus in place of her bonus with the chosen skill. At 6th level and every 4 levels thereafter, a chronicler of worlds selects an additional skill to gain this benefit.',\r\n          feature_levels: [{level: 2}, {level: 6}, {level: 10}, {level: 14}, {level: 18}],\r\n          feature_options: [],\r\n          klass_id: 10,\r\n          name: \"Scrivener’s Versatility\",\r\n          spellcasting: null\r\n        }\r\n      ]\r\n    } else if (name === 'Persephone'){\r\n      replacedFeatures = ['Weapon and Armor Proficiency - Vigilante', 'Vigilante Specialization']\r\n      addedFeatures = [\r\n        {\r\n          id: 2000,\r\n          actions: [],\r\n          description: <div><p>A season witch observes the cycles of life through symbolic festivals and the very real passage of time. Their covens celebrate the seasons and their impact on magic. These seasonal cycles alter their magic and mind-set, focusing their spells and hexes on a predominant energy type and philosophy.</p><p>A season witch makes a commitment to embody the sacred symbolism of a season year round, and learns her spells through communion with nature, divining secrets from shapes in the clouds or the play of leaves on the wind. At 1st level, a season witch chooses the season that defines her abilities as her patron; this choice also provides her certain benefits.</p><p>An autumn witch has dominion over the provision of the land and the passing of life. The save DCs of her spells that deal acid damage increase by 1. At 1st level, she gains either the blight hex or slumber hex as a bonus hex.</p><p>A winter witch has dominion over hearth and home. The save DCs of her spells that deal cold damage increase by 1. At 1st level, she gains either the healing hex or ward hex as a bonus hex.</p><p>This alters patron and the hex gained at 1st level.</p></div>,\r\n          feature_levels: [{level: 1}],\r\n          feature_options: [],\r\n          klass_id: 6,\r\n          name: \"Season of the Witch\",\r\n          spellcasting: null\r\n        },\r\n        {\r\n          id: 2001,\r\n          actions: [],\r\n          description: <span>At 1st level, the witch can use <em className='underline-hover' onClick={() => this.props.editModal('spell', null, 18)}>feather fall</em> at will and gains a +4 racial bonus on Swim checks. At 3rd level, she can cast <em className='underline-hover' onClick={() => this.props.editModal('spell', null, 56)}>levitate</em> once per day. At 5th level, she can <em className='underline-hover' onClick={() => this.props.editModal('spell', null, 57)}>fly</em>, as per the spell, for a number of minutes per day equal to her level. These minutes do not need to be consecutive, but they must be spent in 1-minute increments. This hex only affects the witch.</span>,\r\n          feature_levels: [{level: 1}],\r\n          feature_options: [],\r\n          klass_id: 6,\r\n          name: \"Flight Hex\",\r\n          spellcasting: null\r\n        },\r\n        {\r\n          id: 2002,\r\n          actions: [],\r\n          description: <span><p>A witch can cause a creature within 30 feet to fall into a deep, magical sleep, as per the spell <em className='underline-hover' onClick={() => this.props.editModal('spell', null, 58)}>sleep</em>. The creature receives a Will save to negate the effect. If the save fails, the creature falls asleep for a number of rounds equal to the witch’s level.</p><p>This hex can affect a creature of any HD. The creature will not wake due to noise or light, but others can rouse it with a standard action. This hex ends immediately if the creature takes damage. Whether or not the save is successful, a creature cannot be the target of this hex again for 1 day.</p></span>,\r\n          feature_levels: [{level: 1}],\r\n          feature_options: [],\r\n          klass_id: 6,\r\n          name: \"Slumber Hex\",\r\n          spellcasting: null\r\n        },\r\n        {\r\n          id: 2003,\r\n          actions: [],\r\n          description: 'The witch can grant a creature within 30 feet a bit of good luck for 1 round. The target can call upon this good luck once per round, allowing him to reroll any ability check, attack roll, saving throw, or skill check, taking the better result. He must decide to use this ability before the first roll is made. At 8th level and 16th level, the duration of this hex is extended by 1 round. Once a creature has benefited from the fortune hex, it cannot benefit from it again for 24 hours.',\r\n          feature_levels: [{level: 2}],\r\n          feature_options: [],\r\n          klass_id: 6,\r\n          name: \"Fortune Hex\",\r\n          spellcasting: null\r\n        },\r\n        {\r\n          id: 2004,\r\n          actions: [],\r\n          description: <div><p>The witch can cause fate to twist so that it benefits a creature within 30 feet for 1 round. Whenever that creature is targeted by an effect that requires an attack roll, including weapon attacks, the attacker must roll twice and take the worse result.</p><p>At 8th level and 16th level, the duration of this hex is extended by 1 round. A witch cannot use this ability on herself. Hexes that affect the fortune hex, such as cackle, also affect protective luck.</p></div>,\r\n          feature_levels: [{level: 4}],\r\n          feature_options: [],\r\n          klass_id: 6,\r\n          name: \"Protective Luck Hex\",\r\n          spellcasting: null\r\n        },\r\n        {\r\n          id: 2005,\r\n          actions: [],\r\n          description: <div><p>At 1st level, when a witch gains her familiar, she must also select a patron. This patron is a vague and mysterious force, granting the witch power for reasons that she might not entirely understand. While these forces need not be named, they typically hold influence over one of the following forces.</p><p>At 2nd level, and every two levels thereafter, a witch’s patron adds new spells to a witch’s list of spells known. These spells are also automatically added to the list of spells stored by the familiar. The spells gained depend upon the patron chosen. Each patron is listed by its theme. Its actual name is up to the GM and the witch to decide.</p><p>Autumn Patron: 2nd - <em className='underline-hover' onClick={() => this.props.editModal('spell', null, 50)}>ray of enfeeblement</em>, 4th - <em className='underline-hover' onClick={() => this.props.editModal('spell', null, 42)}>create pit</em></p></div>,\r\n          feature_levels: [{level: 1}],\r\n          feature_options: [],\r\n          klass_id: 6,\r\n          name: \"Patron: Autumn\",\r\n          spellcasting: null\r\n        },\r\n        {\r\n          id: 2006,\r\n          actions: [],\r\n          description: <div><p>At 1st level, a witch forms a close bond with a familiar, a creature that teaches her magic and helps to guide her along her path. Familiars also aid a witch by granting her skill bonuses, additional spells, and help with some types of magic. This functions like the wizard’s arcane bond class feature, except as noted in the Witch’s Familiar section.</p><p>A witch must commune with her familiar each day to prepare her spells. Familiars store all of the spells that a witch knows, and a witch cannot prepare a spell that is not stored by her familiar. A witch’s familiar begins play storing all of the 0-level witch spells plus three 1st level spells of the witch’s choice. The witch also selects a number of additional 1st-level spells equal to her Intelligence modifier to store in her familiar. At each new witch level, she adds two new spells of any spell level or levels that she can cast (based on her new witch level) to her familiar. A witch can also add additional spells to her familiar through a special ritual.</p></div>,\r\n          feature_levels: [{level: 1}],\r\n          feature_options: [],\r\n          klass_id: 6,\r\n          name: \"Witch's Familiar: Chubbs\",\r\n          spellcasting: null\r\n        },\r\n        {\r\n          id: 2007,\r\n          actions: [],\r\n          description: 'Vigilantes are proficient with all simple and martial weapons, light armor, and shields (except tower shields). They can cast summoner spells (see spellcasting below) while wearing light armor without incurring the normal arcane spell failure chance.',\r\n          feature_levels: [{level: 1}],\r\n          feature_options: [],\r\n          klass_id: 7,\r\n          name: \"Weapon and Armor Proficiency - Vigilante - Magical Child\",\r\n          spellcasting: null\r\n        },\r\n        {\r\n          id: 2008,\r\n          actions: [],\r\n          description: 'A magical child’s transformation between identities is assisted by magic. This makes it faster than usual, but also more noticeable. A magical child can normally transform between her identities in 5 rounds, though this improves to a standard action with the quick change social talent and a swift action with the immediate change social talent. However, the transformation is quite a spectacle, involving loud sounds or music, brilliant colorful energies, and swift motions.',\r\n          feature_levels: [{level: 1}],\r\n          feature_options: [],\r\n          klass_id: 7,\r\n          name: \"Transformation Sequence\",\r\n          spellcasting: null\r\n        },\r\n        {\r\n          id: 2009,\r\n          actions: [],\r\n          description: <span><p>A magical child starts play with a magical spirit guide in the form of a familiar, using her vigilante level as her effective wizard level. The familiar also has a social identity as a seemingly normal animal, though vigilantes with outlandish familiars might still need to hide the familiar.</p><p>At 3rd level, the magical child’s familiar reveals another aspect of its form, and its vigilante identity changes into a creature on the Improved Familiar list that would be available to a 3rd-level spellcaster (the animal guide’s social identity always remains as the original normal animal).</p><p>The familiar can change its vigilante identity again when the magical child reaches 5th and 7th level, each time to familiars available at those levels. The Improved Familiar feat’s alignment restrictions apply to this ability, but only the magical child’s vigilante identity needs to have an alignment that fulfills the alignment requirements of the improved familiar. The familiar’s new vigilante form choices are permanent, and it cannot transform back into its former vigilante identities until 9th level, when the familiar gains the change shape universal monster ability if it doesn’t already have it. It can use this ability at will when in its vigilante identity to transform into any of its four vigilante identities.</p><p>In vigilante form, a magical child’s familiar gains an amount of DR/magic equal to her vigilante level.</p><p>This doesn’t stack with any DR/magic that her vigilante form might already possess.</p><p>If a magical child’s familiar dies, its consciousness simply leaves its body, and the magical child can replace its body after 24 hours. To do so, she must conduct an 8-hour ritual that costs 200 gp per her vigilante level, but once the ritual is complete, the familiar returns in a new body. It retains all of its memories from its earlier service to the magical child.</p></span>,\r\n          feature_levels: [{level: 1}, {level: 3}, {level: 5}, {level: 7}, {level: 9}],\r\n          feature_options: [],\r\n          klass_id: 7,\r\n          name: \"Animal Guide\",\r\n          spellcasting: null\r\n        },\r\n        {\r\n          id: 2010,\r\n          actions: [],\r\n          description: 'A magical child casts arcane spells and cantrips as an unchained summoner. She can cast any spell she knows without preparing it ahead of time, assuming she has not yet used up her allotment of spells per day for the spell’s level, and she chooses her spells known from the summoner spell list (she cannot choose spells that would affect an eidolon). A magical child’s selection of spells is extremely limited; use Table: Unchained Summoner Spells Known to determine how many spells the magical child knows at each level. A magical child needs to commune with her animal guide for 1 hour in order to replenish her daily spell slots.',\r\n          feature_levels: [{level: 1}],\r\n          feature_options: [],\r\n          klass_id: 7,\r\n          name: \"Spellcasting\",\r\n          spellcasting: true\r\n        },\r\n        {\r\n          id: 2011,\r\n          actions: [],\r\n          description: 'The vigilante becomes known for deeds and abilities regardless of his current identity. This renown grants him favorable treatment in civilized company and lends him an air of menace while facing down his enemies. While he is in his social identity, a vigilante can spend 1 week gaining renown among the locals of any community of no more than about 200 individuals (a village, if using settlement population ranges). This could be the entire community or a smaller neighborhood in a larger settlement. He must spend at least 4 hours each day socializing and making contacts. After spending 1 week doing this, whenever he is in his social identity, all NPCs in the community have a starting attitude toward him that is one category better, as long as each person’s initial attitude would have at least been indifferent (see the Diplomacy skill description). While he gains renown in an area using his social identity, he also spreads rumors and tales about his vigilante identity. Once he has gained renown in a community, he gains a +4 circumstance bonus on Intimidate checks whenever he is in his vigilante identity. This bonus applies only while he is near the community in which he has gained renown; he must be within a number of miles equal to his vigilante level. A vigilante can hold renown in a limited number of communities (normally one, with other social talents allowing two). If he gains renown in a new community, he must decide which one of his previous communities to lose. These effects are subject to GM approval. For example, the GM might rule that an NPC or monster has not heard any tales about the vigilante. Or, a foe may have a starting attitude toward him that’s one category worse, rather than one category better.',\r\n          feature_levels: [{level: 1}],\r\n          feature_options: [],\r\n          klass_id: 7,\r\n          name: \"Social Talent - Renown\",\r\n          spellcasting: false\r\n        },\r\n        {\r\n          id: 2012,\r\n          actions: [],\r\n          description: 'Needs to be picked',\r\n          feature_levels: [{level: 2}],\r\n          feature_options: [],\r\n          klass_id: 7,\r\n          name: \"Vigilante Talent - None\",\r\n          spellcasting: false\r\n        },\r\n      ]\r\n    } else if (name === 'Cedrick'){\r\n      replacedFeatures = []\r\n      addedFeatures = [\r\n        {\r\n          id: 3000,\r\n          actions: [],\r\n          description: 'The bull is a fierce charger and is adept at trampling its foes, pounding them to a bloody pulp.',\r\n          feature_levels: [{level: 1}],\r\n          feature_options: [],\r\n          klass_id: 4,\r\n          name: \"Shifter Aspect - Bull\",\r\n          spellcasting: false\r\n        },\r\n        {\r\n          id: 3001,\r\n          actions: [],\r\n          description: 'The aspect of the frog grants great mobility in leaping through the air and swimming in water, and surprising tactics in combat. The poison secreted by a frog can cause hallucinations, and poison damage at a high enough dosage.',\r\n          feature_levels: [{level: 1}],\r\n          feature_options: [],\r\n          klass_id: 4,\r\n          name: \"Shifter Aspect - Frog\",\r\n          spellcasting: false\r\n        },\r\n        {\r\n          id: 3002,\r\n          actions: [],\r\n          description: 'The aspect of the chameleon grants the power of near invisibility to the shifter. Combined with a powerful tongue and quick movement, the chameleon can be a dangerous threat even when visible.',\r\n          feature_levels: [{level: 2}],\r\n          feature_options: [],\r\n          klass_id: 4,\r\n          name: \"Shifter Aspect - Chameleon\",\r\n          spellcasting: false\r\n        },\r\n        {\r\n          id: 3003,\r\n          actions: [],\r\n          description: 'The aspect of the squid embodies its aggressive underwater tactics, striking with multiple tentacles, and disorienting targets with ink clouds and quick movements.',\r\n          feature_levels: [{level: 4}],\r\n          feature_options: [],\r\n          klass_id: 4,\r\n          name: \"Shifter Aspect - Squid\",\r\n          spellcasting: false\r\n        },\r\n        {\r\n          id: 3004,\r\n          actions: [],\r\n          description: 'The aspect of the condor assumes a creature with a large wingspan that can be used to create great gusts that propel the condor across the world.',\r\n          feature_levels: [{level: 6}],\r\n          feature_options: [],\r\n          klass_id: 4,\r\n          name: \"Shifter Aspect - Condor\",\r\n          spellcasting: false\r\n        },\r\n      ]\r\n    } else if (name === 'Maddox'){\r\n      replacedFeatures = []\r\n      addedFeatures = [\r\n        {\r\n          id: 4000,\r\n          actions: [],\r\n          description: 'An arcanist with this exploit can acquire a familiar as the arcane bond wizard class feature, using her arcanist level as her wizard level to determine any of the statistics and abilities of the familiar. If the arcanist receives a familiar from another class, her levels of arcanist stack with the levels from that class when determining the familiar’s statistics and abilities (this ability does not stack with a familiar gained through the bloodline development exploit; she must choose one or the other).',\r\n          feature_levels: [{level: 6}],\r\n          feature_options: [],\r\n          klass_id: 8,\r\n          name: 'Arcanist Exploit - Familiar',\r\n          spellcasting: false\r\n        },\r\n        {\r\n          id: 4001,\r\n          actions: [],\r\n          description: 'The arcanist can expend 1 point from her arcane reservoir to create a dimensional crack that she can step through to reach another location. This ability is used as part of a move action or withdraw action, allowing her to move up to 10 feet per arcanist level to any location she can see. This counts as 5 feet of movement. She can only use this ability once per round. She does not provoke attacks of opportunity when moving in this way, but any other movement she attempts as part of her move action provokes as normal.',\r\n          feature_levels: [{level: 5}],\r\n          feature_options: [],\r\n          klass_id: 8,\r\n          name: 'Arcanist Exploit - Dimensional Slide',\r\n          spellcasting: false\r\n        },\r\n        {\r\n          id: 4002,\r\n          actions: [],\r\n          description: 'The arcanist can expend 1 point from his arcane reservoir when he rolls initiative to allow himself or an ally within 30 feet to roll 1d4 and add it to that character’s initiative result. At 5th level, the chronomancer can expend 2 points from his arcane reservoir as an immediate action to apply this benefit to a saving throw he has just rolled (but before the result is revealed). At 10th level, the die size increases to 1d6.',\r\n          feature_levels: [{level: 1}],\r\n          feature_options: [],\r\n          klass_id: 8,\r\n          name: 'Arcanist Exploit - Forewarned',\r\n          spellcasting: false\r\n        },\r\n        {\r\n          id: 4003,\r\n          actions: [],\r\n          description: 'As an immediate action after losing a spell due to a failed concentration check or after casting a spell that had no effect (such as due to successful saving throws, a failed caster level check to overcome spell resistance, or other immunities), the arcanist can expend a number of points from his arcane reservoir equal to half the spell’s level (minimum 1) to immediately prepare the spell again, as if it had not been cast. Any material components expended in the original casting remain expended, as are actions used to cast the original spell.',\r\n          feature_levels: [{level: 3}],\r\n          feature_options: [],\r\n          klass_id: 8,\r\n          name: 'Arcanist Exploit - Rewind',\r\n          spellcasting: false\r\n        },\r\n        {\r\n          id: 4004,\r\n          actions: [],\r\n          description: \"As an immediate action the arcanist can steal time from a target. The arcanist spends 1 point from his arcane reservoir and makes a melee touch attack. If successful, the target must make a Will save (DC 10 +  half of the arcanist's level + his Charisma modifier) or suffer a penalty to AC, Reflex saving throws, and base speed. Tis effect lasts for 1 round per arcanist level. The penalty suffered is equal to -1 to AC and Reflex saves as well as a 5-foot penalty to base speed, and increases to -2 and -10-foot at 8th level, and -3 and -15-foot at 16th level. The arcanist gains a bonus to AC and Reflex saving throws and an enhancement bonus to base speed equal to the penalty inflicted on the target for the duration of this effect.\",\r\n          feature_levels: [{level: 7}],\r\n          feature_options: [],\r\n          klass_id: 8,\r\n          name: 'Arcanist Exploit - Steal Time',\r\n          spellcasting: false\r\n        },\r\n      ]\r\n    } else if (name === 'Merg'){\r\n      replacedFeatures = ['Fast Movement', 'Uncanny Dodge', 'Improved Uncanny Dodge', 'Damage Reduction', 'Danger Sense']\r\n      addedFeatures = [\r\n        {\r\n          id: 4999,\r\n          actions: [],\r\n          description: 'While raging, the drunken brute can drink a potion, or a tankard of ale or similar quantity of alcohol, as a move action that does not provoke attacks of opportunity. A potion has its normal effect, while an alcoholic drink allows the barbarian to maintain her rage that round without expending a round of rage for the day (instead of the alcohol’s normal effects). For each alcoholic drink consumed while raging, the barbarian is nauseated for 1 round when her rage expires, in addition to the normal fatigue that follows a rage. Tireless rage does not negate this nauseated condition but the internal fortitude rage power does. ',\r\n          feature_levels: [{level: 1}],\r\n          feature_options: [],\r\n          klass_id: 5,\r\n          name: 'Drunken Brute - Raging Drunk',\r\n          spellcasting: false\r\n        },\r\n        {\r\n          id: 5000,\r\n          actions: [],\r\n          description: 'Choose an energy type: acid, cold, fire, or electricity. While raging, as a swift action up to three times a day, the barbarian can imbue her melee attacks with elemental energy, dealing an additional 1d6 points of damage of the chosen energy type for 1 round.',\r\n          feature_levels: [{level: 2}],\r\n          feature_options: [],\r\n          klass_id: 5,\r\n          name: 'Rage Power - Lesser Elemental Blood',\r\n          spellcasting: false\r\n        },\r\n        {\r\n          id: 5001,\r\n          actions: [],\r\n          description: 'While raging, you gain a +1 morale bonus on Intimidate checks and to the save DC of any fear effects you create for each alcoholic drink you have consumed during your rage, to a maximum of +1 per four barbarian levels.',\r\n          feature_levels: [{level: 4}],\r\n          feature_options: [],\r\n          klass_id: 5,\r\n          name: 'Rage Power - Roaring Drunk',\r\n          spellcasting: false\r\n        },\r\n        {\r\n          id: 5002,\r\n          actions: [],\r\n          description: 'While raging, the barbarian gains energy resistance 10 against the energy type chosen when she took lesser elemental blood.',\r\n          feature_levels: [{level: 6}],\r\n          feature_options: [],\r\n          klass_id: 5,\r\n          name: 'Rage Power - Elemental Blood',\r\n          spellcasting: false\r\n        },\r\n        {\r\n          id: 5003,\r\n          actions: [],\r\n          description: 'At 2nd level, the invulnerable rager gains DR/— equal to half her barbarian level. This damage reduction is doubled against nonlethal damage.',\r\n          feature_levels: [{level: 2}],\r\n          feature_options: [],\r\n          klass_id: 5,\r\n          name: 'Invulnerable Rager - Invulnerability',\r\n          spellcasting: false\r\n        },\r\n        {\r\n          id: 5004,\r\n          actions: [],\r\n          description: 'At 3rd level, the invulnerable rager is inured to either hot or cold climate effects (choose one) as if using endure elements. In addition, the barbarian gains 1 point of fire or cold resistance for every three levels beyond 3rd.',\r\n          feature_levels: [{level: 3}],\r\n          feature_options: [],\r\n          klass_id: 5,\r\n          name: 'Invulnerable Rager - Extreme Endurance',\r\n          spellcasting: false\r\n        },\r\n      ]\r\n    } else if (name === 'Robby'){\r\n      replacedFeatures = ['Trapfinding', 'Danger Sense']\r\n      addedFeatures = [\r\n        {\r\n          id: 6000,\r\n          actions: [],\r\n          description: 'At 1st level, a swashbuckler can spend 1 panache point when she makes an Acrobatics, Climb, Finesse, Animal Handling (Ride), or Swim check to roll 1d6 and add the result to the check. She can do this after she makes the check but before the result is revealed. If the result of the d6 roll is a natural 6, she rolls another 1d6 and adds it to the check. She can continue to do this as long as she rolls natural 6s, up to a number of times equal to her Dexterity modifier (minimum 1).',\r\n          feature_levels: [{level: 1}],\r\n          feature_options: [],\r\n          klass_id: 2,\r\n          name: 'Deed - Derring-Do',\r\n          spellcasting: false\r\n        },\r\n        {\r\n          id: 6001,\r\n          actions: [],\r\n          description: 'At 1st level, when an opponent attempts a melee attack against the swashbuckler, the swashbuckler can as an immediate action spend 1 panache point to move 5 feet; doing so grants the swashbuckler a dodge bonus to AC equal to her Charisma modifier (minimum 0) against the triggering attack. This movement doesn’t negate the attack, which is still resolved as if the swashbuckler had not moved from the original square. This movement is not a 5-foot step; it provokes attacks of opportunity from creatures other than the one who triggered this deed. The swashbuckler can only perform this deed while wearing light or no armor, and while carrying no heavier than a light load.',\r\n          feature_levels: [{level: 1}],\r\n          feature_options: [],\r\n          klass_id: 2,\r\n          name: 'Deed - Dodging Panache',\r\n          spellcasting: false\r\n        },\r\n        {\r\n          id: 6002,\r\n          actions: [],\r\n          description: 'At 1st level, when an opponent makes a melee attack against the swashbuckler, she can spend 1 panache point and expend a use of an attack of opportunity to attempt to parry that attack. The swashbuckler makes an attack roll as if she were making an attack of opportunity; for each size category the attacking creature is larger than the swashbuckler, the swashbuckler takes a –2 penalty on this roll. If her result is greater than the attacking creature’s result, the creature’s attack automatically misses. The swashbuckler must declare the use of this ability after the creature’s attack is announced, but before its attack roll is made. Upon performing a successful parry and if she has at least 1 panache point, the swashbuckler can as an immediate action make an attack against the creature whose attack she parried, provided that creature is within her reach. This deed’s cost cannot be reduced by any ability or effect that reduces the number of panache points a deed costs.',\r\n          feature_levels: [{level: 1}],\r\n          feature_options: [],\r\n          klass_id: 2,\r\n          name: 'Deed - Opportune Parry and Riposte',\r\n          spellcasting: false\r\n        },\r\n        {\r\n          id: 6003,\r\n          actions: [],\r\n          description: 'At 3rd level, while the swashbuckler has at least 1 panache point, she can kip-up from prone as a move action without provoking an attack of opportunity. She can kip-up as a swift action instead by spending 1 panache point.',\r\n          feature_levels: [{level: 3}],\r\n          feature_options: [],\r\n          klass_id: 2,\r\n          name: 'Deed - Kip-Up',\r\n          spellcasting: false\r\n        },\r\n        {\r\n          id: 6004,\r\n          actions: [],\r\n          description: 'At 3rd level, while she has at least 1 panache point, when a swashbuckler hits an opponent with a light or one-handed piercing melee weapon, she can choose to use Intimidate to demoralize that opponent as a swift action instead of a standard action.',\r\n          feature_levels: [{level: 3}],\r\n          feature_options: [],\r\n          klass_id: 2,\r\n          name: 'Deed - Meanacing Swordplay',\r\n          spellcasting: false\r\n        },\r\n        {\r\n          id: 6005,\r\n          actions: [],\r\n          description: 'At 3rd level, while she has at least 1 panache point, a swashbuckler gains the ability to strike precisely with a light or one-handed piercing melee weapon (though not natural weapon attacks), adding her swashbuckler level to the damage dealt. To use this deed, a swashbuckler cannot attack with a weapon in her other hand or use a shield other than a buckler. She can even use this ability with thrown light or one-handed piercing melee weapons, so long as the target is within 30 feet of her. Any creature that is immune to sneak attacks is immune to the additional damage granted by precise strike, and any item or ability that protects a creature from critical hits also protects a creature from the additional damage of a precise strike. This additional damage is precision damage, and isn’t multiplied on a critical hit. As a swift action, a swashbuckler can spend 1 panache point to double her precise strike’s damage bonus on the next attack. This benefit must be used before the end of her turn, or it is lost. This deed’s cost cannot be reduced by any ability or effect that reduces the amount of panache points a deed costs (such as the Signature Deed feat).',\r\n          feature_levels: [{level: 3}],\r\n          feature_options: [],\r\n          klass_id: 2,\r\n          name: 'Deed - Precise Strike',\r\n          spellcasting: false\r\n        },\r\n        {\r\n          id: 6006,\r\n          actions: [],\r\n          description: 'At 3rd level, while the swashbuckler has at least 1 panache point, she gains a +2 bonus on initiative checks. In addition, if she has the Quick Draw feat, her hands are free and unrestrained, and she has any single light or one-handed piercing melee weapon that isn’t hidden, she can draw that weapon as part of the initiative check.',\r\n          feature_levels: [{level: 3}],\r\n          feature_options: [],\r\n          klass_id: 2,\r\n          name: 'Deed - Swashbuckler Initiative',\r\n          spellcasting: false\r\n        },\r\n        {\r\n          id: 6007,\r\n          actions: [],\r\n          description: 'Whenever she makes a successful melee attack with the selected weapon, she adds her Dexterity modifier instead of her Strength modifier to the damage roll. If any effect would prevent the rogue from adding her Strength modifier to the damage roll, she does not add her Dexterity modifier.',\r\n          feature_levels: [{level: 3}],\r\n          feature_options: [],\r\n          klass_id: 3,\r\n          name: 'Finesse Training - Trident',\r\n          spellcasting: false\r\n        },\r\n        {\r\n          id: 6008,\r\n          actions: [],\r\n          description: 'At 1st level, a pirate becomes adept at moving on ships, boats, and similar vessels. She gains the Sea Legs feat as a bonus feat, even if she does not meet the prerequisites.',\r\n          feature_levels: [{level: 1}],\r\n          feature_options: [],\r\n          klass_id: 3,\r\n          name: 'Sea Legs',\r\n          spellcasting: false\r\n        },\r\n        {\r\n          id: 6009,\r\n          actions: [],\r\n          description: 'At 2nd level, a pirate incorporates a ship’s masts, rigging, ropes, sails, and other such structures into her combat style. Provided she is wearing light armor or no armor, when fighting in an environment where such structures exist, the rogue incorporates them into her movement, and does not have to move in a straight line when making either a charge attack or bull rush combat maneuver. Once she completes her attack or maneuver, she can reposition herself. Immediately after making the charge or bull rush, she can move 5 feet as a free action, even if the charge ends her turn. This movement does not provoke attacks of opportunity.',\r\n          feature_levels: [{level: 2}],\r\n          feature_options: [],\r\n          klass_id: 3,\r\n          name: 'Swinging Reposition',\r\n          spellcasting: false\r\n        },\r\n        {\r\n          id: 6010,\r\n          actions: [],\r\n          description: 'Pirates are a salty and steadfast lot. At 3rd level, a pirate gains a +1 bonus on saving throws against fear and mind-affecting effects. This bonus increases by +1 for every three levels, to a maximum of +6 at 18th level.',\r\n          feature_levels: [{level: 3}],\r\n          feature_options: [],\r\n          klass_id: 3,\r\n          name: 'Unflinching',\r\n          spellcasting: false\r\n        },\r\n        {\r\n          id: 6011,\r\n          actions: [],\r\n          description: 'Needs to be picked',\r\n          feature_levels: [{level: 4}],\r\n          feature_options: [],\r\n          klass_id: 3,\r\n          name: 'Rogue Talent - None',\r\n          spellcasting: false\r\n        },\r\n      ]\r\n    } else if (name === 'Fire-Roasted Tomatoes'){\r\n      replacedFeatures = [\"Trapfinding\", \"Sneak Attack\"]\r\n      addedFeatures = [\r\n        {\r\n          id: 7000,\r\n          actions: [],\r\n          description: \"Element(s) fire; Type utility (Sp)\\n\\nLevel 1; Burn 0\\n\\nYou can use your inner flame to reproduce the effects of a flare, light, or spark cantrip, except that the ligh t you create with ligh t produces heat like a normal flame; using any of the three abilities ends any previous ligh t effect from this wild talent.\",\r\n          feature_levels: [{level: 1}],\r\n          feature_options: [],\r\n          klass_id: 9,\r\n          name: 'Basic Pyrokinesis',\r\n          features: [],\r\n\t\t\t\t\tassociated_spells: [\r\n\t\t\t\t\t\t{name: \"Flare\", id: 221},\r\n\t\t\t\t\t\t{name: \"Light\", id: 5},\r\n\t\t\t\t\t\t{name: \"Spark\", id: 98}\r\n\t\t\t\t\t]\r\n        },\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 7001,\r\n\t\t\t\t\tactions: [],\r\n\t\t\t\t\tdescription: \"Element(s) fire; Type simple blast (Sp); Level —; Burn 0\\n\\nBlast Type: energy; Damage fire\\n\\nYou unleash a gout of flickering fire to burn a single foe.\",\r\n\t\t\t\t\tfeature_levels: [{level: 1}],\r\n\t\t\t\t\tfeature_options: [],\r\n\t\t\t\t\tklass_id: 9,\r\n\t\t\t\t\tname: 'Fire Blast',\r\n\t\t\t\t\tfeatures: [],\r\n\t\t\t\t\tassociated_spells: []\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 7002,\r\n\t\t\t\t\tactions: [],\r\n\t\t\t\t\tdescription: \"Element(s) fire; Type defense (Su); Level —; Burn 0\\n\\nYour body becomes painfully hot. Whenever a creature hits you with a natural attack or an unarmed strike, that creature takes 1 point of fire damage per 4 kineticist levels you possess (minimum 1 point of fire damage). A creature in a grapple with you takes double this amount of damage at the end of each of its turns.\\n\\nWeapons that strike you also take this damage, though the damage is unlikely to penetrate the weapon’s hardness. By accepting 1 point of burn, you can increase this damage by 1 point per 4 kineticist levels you possess until the next time your burn is removed. You can increase the damage in this way up to seven times.\\n\\n\\Whenever you accept burn while using a fire wild talent, the surging flame causes your searing flesh to deal double its current amount of damage for 1 round (a creature in a grapple with you takes a total of four times as much damage as normal). You can dismiss or restore this effect as an immediate action.\",\r\n\t\t\t\t\tfeature_levels: [{level: 1}],\r\n\t\t\t\t\tfeature_options: [],\r\n\t\t\t\t\tklass_id: 9,\r\n\t\t\t\t\tname: 'Searing Flesh',\r\n\t\t\t\t\tfeatures: [],\r\n\t\t\t\t\tassociated_spells: []\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 7003,\r\n\t\t\t\t\tactions: [],\r\n\t\t\t\t\tdescription: \"Element(s) fire; Type substance infusion; Level 1; Burn 1\\n\\nAssociated Blasts blue flame, fire, magma, plasma\\n\\nSaving Throw Reflex negates\\n\\nYour kinetic blast ignites your foes. Whenever an infused blast hits a foe and penetrates its spell resistance, that foe catches on fire, regardless of whether it takes damage. A foe that catches fire takes 1d6 points of fire damage each round until the fire is extinguished. Against a creature on fire from this infusion, any fire kinetic blasts gain a +2 bonus on attack rolls, to DCs, and on caster level checks to overcome spell resistance.\",\r\n\t\t\t\t\tfeature_levels: [{level: 1}],\r\n\t\t\t\t\tfeature_options: [],\r\n\t\t\t\t\tklass_id: 9,\r\n\t\t\t\t\tname: 'Infusion - Burning Infusion',\r\n\t\t\t\t\tfeatures: [],\r\n\t\t\t\t\tassociated_spells: []\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 7004,\r\n\t\t\t\t\tactions: [],\r\n\t\t\t\t\tdescription: \"Element fire, water; Type utility (Sp); Level 1; Burn 0\\n\\nYou are constantly protected by endure elements against hot temperatures only. You gain an amount of fire resistance equal to twice your current amount of burn.\",\r\n\t\t\t\t\tfeature_levels: [{level: 1}],\r\n\t\t\t\t\tfeature_options: [],\r\n\t\t\t\t\tklass_id: 9,\r\n\t\t\t\t\tname: 'Utility Talent - Heat Adaptation',\r\n\t\t\t\t\tfeatures: [],\r\n\t\t\t\t\tassociated_spells: []\r\n\t\t\t\t}\r\n      ]\r\n    } else if (name === \"Majestik\"){\r\n\t\t\treplacedFeatures = [\"Witch's Familiar\"]\r\n\t\t\taddedFeatures = [\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 8000,\r\n\t\t\t\t\tactions: [],\r\n\t\t\t\t\tdescription: \"The target takes a –2 penalty on one of the following (witch’s choice): AC, ability checks, attack rolls, saving throws, or skill checks. This hex lasts for a number of rounds equal to 3 + the witch’s Intelligence modifier. A Will save reduces this to just 1 round.\\n\\nThis is a mind-affecting effect. At 8th level the penalty increases to –4.\",\r\n\t\t\t\t\tfeature_levels: [{level: 1}],\r\n\t\t\t\t\tfeature_options: [],\r\n\t\t\t\t\tklass_id: 9,\r\n\t\t\t\t\tname: 'Hex: Evil Eye',\r\n\t\t\t\t\tfeatures: [],\r\n\t\t\t\t\tassociated_spells: []\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 8001,\r\n\t\t\t\t\tactions: [],\r\n\t\t\t\t\tdescription: \"Each cartomancer carries a special harrow deck that allows her to communicate with her patron. Its ability to hold spells functions identically to the way a witch’s spells are granted by her familiar. The cartomancer must consult her harrow deck each day to prepare her spells and cannot prepare spells that are not stored in the deck. The spell deck cannot be used for this purpose if any cards are missing.\\n\\nThis ability replaces the witch’s familiar.\",\r\n\t\t\t\t\tfeature_levels: [{level: 1}],\r\n\t\t\t\t\tfeature_options: [],\r\n\t\t\t\t\tklass_id: 9,\r\n\t\t\t\t\tname: 'Spell Deck',\r\n\t\t\t\t\tfeatures: [],\r\n\t\t\t\t\tassociated_spells: []\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 8002,\r\n\t\t\t\t\tactions: [],\r\n\t\t\t\t\tdescription: \"At 2nd level, a cartomancer gains the Deadly Dealer feat as a bonus feat, even if she does not meet the prerequisites. The cartomancer gains the benefits of the Arcane Strike feat, but only for the purposes of using Deadly Dealer.\\n\\nThis replaces the witch’s 2nd-level hex.\\n\\nYou can throw a card as though it were a dart, with the same damage, range, and other features. You must use the Arcane Strike feat when throwing a card in this way, or else the card lacks the magical force and precision to deal lethal damage. A card is destroyed when thrown in this way.\\n\\nHarrow cards are treated as masterwork weapons when thrown using this feat, but are still destroyed after they are thrown. A harrow deck can no longer be used as a fortune-telling device after even a single card is thrown.\\n\\nA spellcaster with this feat can enhance a deck of cards as though it were a ranged weapon with 54 pieces of ammunition. This enhancement functions only when used in tandem with this feat, and has no affect on any other way the cards might be used.\\n\\nOnly a character who possesses this feat can use an enhanced deck of cards; she must still use the Arcane Strike feat to activate the cards’ enhancement.\",\r\n\t\t\t\t\tfeature_levels: [{level: 2}],\r\n\t\t\t\t\tfeature_options: [],\r\n\t\t\t\t\tklass_id: 9,\r\n\t\t\t\t\tname: 'Deadly Dealer',\r\n\t\t\t\t\tfeatures: [],\r\n\t\t\t\t\tassociated_spells: []\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t} else if (name === \"Ildre\"){\r\n\t\t\treplacedFeatures = []\r\n\t\t\taddedFeatures = [\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 9000,\r\n\t\t\t\t\tactions: [],\r\n\t\t\t\t\tdescription: 'The arcanist can expend 1 point from her arcane reservoir to create a dimensional crack that she can step through to reach another location. This ability is used as part of a move action or withdraw action, allowing her to move up to 10 feet per arcanist level to any location she can see. This counts as 5 feet of movement. She can only use this ability once per round. She does not provoke attacks of opportunity when moving in this way, but any other movement she attempts as part of her move action provokes as normal.',\r\n\t\t\t\t\tfeature_levels: [{level: 1}],\r\n\t\t\t\t\tfeature_options: [],\r\n\t\t\t\t\tklass_id: 13,\r\n\t\t\t\t\tname: 'Arcanist Exploit - Dimensional Slide',\r\n\t\t\t\t\tfeatures: [],\r\n\t\t\t\t\tassociated_spells: []\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t} else if (name === \"Iyugi\"){\r\n\t\t\treplacedFeatures = []\r\n\t\t\taddedFeatures = [\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 10000,\r\n\t\t\t\t\tactions: [],\r\n\t\t\t\t\tdescription: 'A rogue that selects this talent gains a bonus combat feat.\\n\\nTwo-Weapon Fighting\\n\\nYour penalties on attack rolls for fighting with two weapons are reduced. The penalty for your primary hand lessens by 2 and the one for your off hand lessens by 6.',\r\n\t\t\t\t\tfeature_levels: [{level: 2}],\r\n\t\t\t\t\tfeature_options: [],\r\n\t\t\t\t\tklass_id: 13,\r\n\t\t\t\t\tname: 'Rogue Talent - Combat Trick - Two-Weapon Fighting',\r\n\t\t\t\t\tfeatures: [],\r\n\t\t\t\t\tassociated_spells: []\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t} else if (name === \"Dz'eyn\"){\r\n\t\t\treplacedFeatures = []\r\n\t\t\taddedFeatures = [\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 10000,\r\n\t\t\t\t\tactions: [],\r\n\t\t\t\t\tdescription: 'The slayer selects a ranger combat style (such as archery or two-weapon combat) and gains a combat feat from the first feat list of that style. He can choose feats from his selected combat style, even if he does not have the normal prerequisites. At 6th level, he may select this talent again and add the 6th-level ranger combat feats from his chosen style to the list. At 10th level, he may select this talent again and add the 10th-level ranger combat feats from his chosen style to the list.\\n\\nThrown Weapon\\n\\nPrecise Shot\\n\\nYou can shoot or throw ranged weapons at an opponent engaged in melee without taking the standard –4 penalty on your attack roll. Note: Two characters are engaged in melee if they are enemies of each other and either threatens the other.',\r\n\t\t\t\t\tfeature_levels: [{level: 2}],\r\n\t\t\t\t\tfeature_options: [],\r\n\t\t\t\t\tklass_id: 13,\r\n\t\t\t\t\tname: 'Slayer Talent - Ranger Combat Style - Thrown Style - Precise Shot',\r\n\t\t\t\t\tfeatures: [],\r\n\t\t\t\t\tassociated_spells: []\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\r\n\r\n    newFeatures = features.filter(f => {\r\n      let klass = this.props.character.uniq_klasses.find(cl => cl.id === f.klass_id)\r\n      let name = f.name\r\n      if (klass && f.name === \"Weapon and Armor Proficiency\"){\r\n        name = `${f.name} - ${klass.name}`\r\n      }\r\n      return !replacedFeatures.includes(name)\r\n    })\r\n    addedFeatures.forEach(af => newFeatures.push(af))\r\n    return newFeatures\r\n  }\r\n\r\n  // renderFeatures = (max_lvl, id) => {\r\n  //   this.props.character.klass_features.map(feature => {\r\n  //     if (feature.level_learned <= max_lvl && feature.klass_id === id){\r\n  //       return (\r\n  //         <div>\r\n  //           <span>{feature.name}</span>\r\n  //           <span>{feature.description}</span>\r\n  //         </div>\r\n  //       )\r\n  //     }\r\n  //   })\r\n  // }\r\n\r\n  render () {\r\n    return(\r\n      <div style={{padding: '1em'}} className={localStorage.computer === \"false\" ? 'mobile-tab-selected-tab-container shadow' : 'none'}>\r\n      {this.renderClassFeatures()}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n    character: state.character,\r\n    character_info: state.character_info,\r\n    classes: state.classes\r\n  }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(Features)\r\n","import React from 'react'\r\nimport _ from 'lodash'\r\nimport { connect } from 'react-redux'\r\nimport { injectSpellIntoDescription } from '../../utils/fuf'\r\nimport { modalAction } from '../../utils/action_creator/popups'\r\n\r\nclass Traits extends React.Component {\r\n\r\n  state = {\r\n    activeTrait: 0\r\n  }\r\n\r\n  changeActiveFeature = (e) => {\r\n    let id = _.parseInt(e.target.dataset.id)\r\n    if (this.state.activeTrait === id) {\r\n      this.setState({activeTrait: 0})\r\n    } else {\r\n      this.setState({activeTrait: id})\r\n    }\r\n  }\r\n\r\n  renderRacialTraits = () => {\r\n    let traits = this.props.character.race.racial_traits\r\n    traits = this.circumventTraits(this.props.character.name, traits)\r\n\t\ttraits = this.alternateTraits(traits, this.props.character.alternate_racial_traits)\r\n\r\n    return traits.map((trait, i) => {\r\n\t\t\tlet desc = trait.description\r\n\t\t\tif (trait.associated_spells?.length) {\r\n\t\t\t\tlet spells = trait.associated_spells\r\n\t\t\t\tif (spells.length){desc = injectSpellIntoDescription(desc, spells, this.renderSpellClick, {})}\r\n\t\t\t}\r\n        return (\r\n          <li data-id={i * 3 + 1} onClick={() => modalAction(\"generic\", trait, {name: trait.name})} className='highlight mobile-selected-tab-content'  style={{maxHeight: window.outerHeight * 0.4}}>\r\n            <strong data-id={i * 3 + 1}>{trait.name}</strong>\r\n          </li>\r\n        )\r\n\r\n    })\r\n  }\r\n\r\n\trenderSpellClick = (incomingSpell) => {\r\n\t\tmodalAction(\"spellDescription\", incomingSpell)\r\n\t}\r\n\r\n\talternateTraits = (traits, alternates) => {\r\n\t\tlet arr = []\r\n\r\n\t\ttraits.forEach(tr => {\r\n\t\t\tlet found = false\r\n\r\n\t\t\talternates.forEach(alt => {\r\n\t\t\t\talt.alternate_trait_replace_racial_traits.forEach(atrrt => {\r\n\t\t\t\t\tif (atrrt.racial_trait_id === tr.id){found = true}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\r\n\t\t\tif (!found){arr.push(tr)}\r\n\t\t})\r\n\r\n\t\tarr = [...arr, ...alternates]\r\n\t\treturn arr\r\n\t}\r\n\r\n  circumventTraits = (name, traits) => {\r\n    let newTraits = []\r\n    let replacedTraits = []\r\n    let addedTraits = []\r\n    if (name === \"Persephone\"){\r\n      replacedTraits = ['Green Widow', 'Hulking Changeling', 'Sea Lungs']\r\n      addedTraits = [\r\n        {\r\n          id: 1000,\r\n          name: 'Object of Desire',\r\n          description: <div>The changeling adds +1 to her caster level when casting <em>charm person</em> and <em>charm monster</em>.</div>\r\n        }\r\n      ]\r\n    }\r\n    if (name === \"Cedrick\"){\r\n      replacedTraits = ['Swamp Stride']\r\n      addedTraits = [\r\n        {\r\n          id: 2000,\r\n          name: 'Glider',\r\n          description: 'Gripplis’ aerodynamic bodies and thick webbing between the toes enable a falling grippli to treat the distance fallen as half the actual distance. The grippli can steer himself while falling, moving horizontally up to a number of feet equal to half the vertical distance fallen. The grippli cannot use this trait if it is wearing heavy armor, is carrying a heavy load, or is unable to react to the fall (such as being helpless).'\r\n        }\r\n      ]\r\n    }\r\n    if (name === \"Maddox\"){\r\n      replacedTraits = ['Shards of the Past']\r\n      addedTraits = [\r\n        {\r\n          id: 3000,\r\n          name: 'Mystic Past Life',\r\n          description: <span>You can add spells from another spellcasting class to the spell list of your current spellcasting class. You add a number of spells equal to 1 + your spellcasting class’s key ability score bonus (Wisdom for clerics, and so on). The spells must be the same type (arcane or divine) as the spellcasting class you’re adding them to. These spells do not have to be spells you can cast as a 1st-level character. The number of spells granted by this ability is set at 1st level. Changes to your ability score do not change the number of spells gained.<p><ul><li><em>Lay of the Land</em></li><li><em>Kiss of the First World</em></li><li><em>Mass Cure Light Wounds</em></li><li><em>Music of the Spheres</em></li><li><em>Mass Cure Moderate Wounds</em></li></ul></p></span>\r\n        }\r\n      ]\r\n    }\r\n    if (name === \"Grackle\"){\r\n      replacedTraits = ['Fiendish Sorcery', 'Spell-like Ability', 'Fiendish Resistance']\r\n      addedTraits = [\r\n        {\r\n          id: 4000,\r\n          name: 'Soul Seer',\r\n          description: <span>Rare tieflings have a peculiar sight that allows them to see the state of a creature’s soul. They can use <em>deathwatch</em> at will as spell-like ability.</span>\r\n        },\r\n        {\r\n          id: 4001,\r\n          name: 'Scaled Skin',\r\n          description: <span>The skin of these tieflings provides some energy resistance, but is also as hard as armor. Choose one of the following energy types: cold, electricity, or <strong>fire</strong>. A tiefling with this trait gains resistance 5 in the chosen energy type and also gains a +1 natural armor bonus to AC.</span>\r\n        }\r\n      ]\r\n    }\r\n    newTraits = traits.filter(f => !replacedTraits.includes(f.name))\r\n    addedTraits.forEach(af => newTraits.push(af))\r\n    return newTraits\r\n  }\r\n\r\n  render(){\r\n    return(\r\n      <div style={{padding: '1em'}} className={localStorage.computer === \"false\" ? 'mobile-tab-selected-tab-container shadow' : 'none'}>\r\n        {this.renderRacialTraits()}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    character: state.character\r\n  }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(Traits)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport _ from 'lodash'\r\nimport { modalAction } from '../../utils/action_creator/popups'\r\n\r\nclass Feats extends React.Component {\r\n\r\n  state = {\r\n    activeFeat: 0\r\n  }\r\n\r\n  changeActiveFeature = (id) => {\r\n    if (this.state.activeFeat === id) {\r\n      this.setState({activeFeat: 0})\r\n    } else {\r\n      this.setState({activeFeat: id})\r\n    }\r\n  }\r\n\r\n  renderDescription = (desc) => {\r\n    desc = desc.split(\"\\n\\n\")\r\n    return desc.map(para => <p key={_.random(1, 2000000)}>{para}</p>)\r\n  }\r\n\r\n  renderFeats = () => {\r\n    let feats = []\r\n    switch(this.props.character.name){\r\n      case(\"Nettie\"):\r\n        feats = this.nettie()\r\n        break\r\n      case(\"Cedrick\"):\r\n        feats = this.cedrick()\r\n        break\r\n      case(\"Persephone\"):\r\n        feats = this.pepper()\r\n        break\r\n      case(\"Maddox\"):\r\n        feats = this.maddox()\r\n        break\r\n      case(\"Merg\"):\r\n        feats = this.merg()\r\n        break\r\n      case 'Robby':\r\n        feats = this.robby()\r\n        break\r\n      case 'Festus':\r\n        feats = this.festus()\r\n        break\r\n      case 'Grackle':\r\n        feats = this.grackle()\r\n        break\r\n      case 'Majestik':\r\n        feats = this.majestik()\r\n        break\r\n      case 'Ildre':\r\n        feats = this.ildre()\r\n        break\r\n      case 'Fire-Roasted Tomatoes':\r\n        feats = this.fireRoastedTomatoes()\r\n        break\r\n      case 'Iyugi':\r\n        feats = this.iyugi()\r\n        break\r\n      case 'Natesse':\r\n        feats = this.natesse()\r\n        break\r\n      case \"Dz'eyn\":\r\n        feats = this.dzeyn()\r\n        break\r\n      default:\r\n        break\r\n    }\r\n\r\n\t\tfeats = [...this.props.character.character_klasses.filter(ck => ck.feat).map(ck => ck.feat), ...feats]\r\n\r\n    return feats.map(f => {\r\n      return (\r\n        <li onClick={() => modalAction(\"feat\", f, {name: f.name})} className='highlight mobile-selected-tab-content' style={{maxHeight: window.outerHeight * 0.4}}>\r\n          <strong data-id={f.id}>{f.name}</strong>\r\n        </li>\r\n      )\r\n    })\r\n\t\t// {this.state.activeFeat === f.id && <div style={{color: '#000'}}>{typeof f.description === 'string' ? this.renderDescription(f.description) : f.description}</div>}\r\n  }\r\n\r\n  nettie = () => {\r\n    return [\r\n      {\r\n        id: 1001,\r\n        description: 'You can prepare for future contingencies without defining what those preparations are until they are relevant. As a part of this preparation, while in a settlement for at least 24 hours, you can take 8 hours and spend up to 50 gp per character level, which becomes your brilliant plan fund. While you have a brilliant plan pending, you are always treated as carrying 20 additional pounds of weight, even before you define your brilliant plan.\\n\\nOnce per day, you can take 10 minutes to enact a brilliant plan, withdrawing an item that would have been available in a settlement you visited or procuring a mundane service that your character planned ahead of time. Once you enact the plan, subtract the price of the item or service from this feat’s fund. Any item procured must weigh 10 pounds or less. Likewise, the GM must approve any non-magical service you gain by using this feat as being appropriate for the location selected.\\n\\nOnce you have spent all the money in your brilliant plan fund or procured 20 pounds of objects with this feat, you cannot use the feat again until you replenish your brilliant plan fund.',\r\n        name: \"Brilliant Planner\"\r\n      },\r\n      {\r\n        id: 1002,\r\n        description: \"Add one spell from your class’s spell list to your list of spells known. This is in addition to the number of spells normally gained at each new level in your class. You may instead add two spells from your class’s spell list to your list of spells known, but both of these spells must be at least one level lower than the highest level spell you can cast in that class. Once made, these choices cannot be changed.\",\r\n        name: \"Expanded Arcana\"\r\n      },\r\n      {\r\n        id: 1003,\r\n        description: \"The bonuses and penalties from your bardic performance continue for 2 rounds after you cease performing. Any other requirement, such as range or specific conditions, must still be met for the effect to continue. If you begin a new bardic performance during this time, the effects of the previous performance immediately cease.\",\r\n        name: \"Lingering Performance\"\r\n      },\r\n      {\r\n        id: 1004,\r\n        description: \"Add +1 to the Difficulty Class for all saving throws against spells from the school of magic you select.\",\r\n        name: \"Spell Focus (conjuration)\"\r\n      }\r\n    ]\r\n  }\r\n\r\n  cedrick = () => {\r\n    return [\r\n      {\r\n        id: 2000,\r\n        description: \"You gain +3 hit points. For every Hit Die you possess beyond 3, you gain an additional +1 hit point. If you have more than 3 Hit Dice, you gain +1 hit points whenever you gain a Hit Die (such as when you gain a level).\",\r\n        name: \"Toughness\"\r\n      },\r\n      {\r\n        id: 2001,\r\n        description: \"You make attack rolls with simple weapons without penalty.\",\r\n        name: \"Simple Weapon Proficiency\"\r\n      },\r\n      {\r\n        id: 2002,\r\n        description: \"You can choose to take a –1 penalty on all melee attack rolls and combat maneuver checks to gain a +2 bonus on all melee damage rolls. This bonus to damage is increased by half (+50%) if you are making an attack with a two-handed weapon, a one handed weapon using two hands, or a primary natural weapon that adds 1-1/2 times your Strength modifier on damage rolls. This bonus to damage is halved (–50%) if you are making an attack with an off-hand weapon or secondary natural weapon. When your base attack bonus reaches +4, and every 4 points thereafter, the penalty increases by –1 and the bonus to damage increases by +2. You must choose to use this feat before making an attack roll, and its effects last until your next turn. The bonus damage does not apply to touch attacks or effects that do not deal hit point damage.\",\r\n        name: \"Power Attack\"\r\n      },\r\n      {\r\n        id: 2003,\r\n        description: \"You do not provoke an attack of opportunity when performing a bull rush combat maneuver. In addition, you receive a +2 bonus on checks made to bull rush a foe. You also receive a +2 bonus to your Combat Maneuver Defense whenever an opponent tries to bull rush you.\",\r\n        name: \"Improved Bull Rush\"\r\n      },\r\n      {\r\n        id: 2004,\r\n        description: \"You gain a +1 bonus on all attack rolls you make using the selected weapon.\",\r\n        name: \"Weapon Focus (shifter claws)\"\r\n      }\r\n    ]\r\n  }\r\n\r\n  pepper = () => {\r\n    return [\r\n      {\r\n        id: 3000,\r\n        description: \"You gain a +1 dodge bonus to your AC. A condition that makes you lose your Dex bonus to AC also makes you lose the benefits of this feat.\",\r\n        name: \"Dodge\"\r\n      },\r\n      {\r\n        id: 3001,\r\n        description: \"As a swift action, you can imbue your weapons with a fraction of your power. For 1 round, your weapons deal +1 damage and are treated as magic for the purpose of overcoming damage reduction. For every five caster levels you possess, this bonus increases by +1, to a maximum of +5 at 20th level.\",\r\n        name: \"Arcane Strike\"\r\n      },\r\n      {\r\n        id: 3002,\r\n        description: \"You get a +1 bonus on attack and damage rolls with ranged weapons at ranges of up to 30 feet.\",\r\n        name: \"Point-Blank Shot\"\r\n      }\r\n    ]\r\n  }\r\n\r\n  maddox = () => {\r\n    return [\r\n      {\r\n        id: 4000,\r\n        description: 'You get a +4 bonus on initiative checks.',\r\n        name: 'Improved Initiative'\r\n      },\r\n      {\r\n        id: 4001,\r\n        description: 'You get a +2 bonus on caster level checks (1d20 + caster level) made to overcome a creature’s spell resistance.',\r\n        name: 'Spell Penetration'\r\n      },\r\n      {\r\n        id: 4002,\r\n        description: 'You get a +2 bonus on caster level checks (1d20 + caster level) made to overcome a creature’s spell resistance. This bonus stacks with the one from Spell Penetration.',\r\n        name: 'Greater Spell Penetration'\r\n      },\r\n      {\r\n        id: 4003,\r\n        description: 'You can react to danger before your senses would normally allow you to do so. You cannot be caught flat-footed, nor do you lose your Dex bonus to AC if the attacker is invisible. You still loses your Dexterity bonus to AC if immobilized. You can still lose her Dexterity bonus to AC if an opponent successfully uses the feint action against you.',\r\n        name: 'Uncanny Timing'\r\n      },\r\n    ]\r\n  }\r\n\r\n  merg = () => {\r\n    return [\r\n      {\r\n        id: 5000,\r\n        description: \"You can choose to take a –1 penalty on all melee attack rolls and combat maneuver checks to gain a +2 bonus on all melee damage rolls. This bonus to damage is increased by half (+50%) if you are making an attack with a two-handed weapon, a one handed weapon using two hands, or a primary natural weapon that adds 1-1/2 times your Strength modifier on damage rolls. This bonus to damage is halved (–50%) if you are making an attack with an off-hand weapon or secondary natural weapon. When your base attack bonus reaches +4, and every 4 points thereafter, the penalty increases by –1 and the bonus to damage increases by +2. You must choose to use this feat before making an attack roll, and its effects last until your next turn. The bonus damage does not apply to touch attacks or effects that do not deal hit point damage.\",\r\n        name: \"Power Attack\"\r\n      },\r\n      {\r\n        id: 5001,\r\n        description: 'Your penalties on attack rolls for fighting with two weapons are reduced. The penalty for your primary hand lessens by 2 and the one for your off hand lessens by 6.',\r\n        name: 'Two-Weapon Fighting'\r\n      },\r\n      {\r\n        id: 5002,\r\n        description: 'If you are dying and a creature gives you at least a sip of alcohol (a standard action for an adjacent creature), you immediately stabilize.',\r\n        name: \"Drunkard's Recovery\"\r\n      },\r\n      {\r\n        id: 5003,\r\n        description: \"You gain a +1 bonus on all attack rolls you make using the selected weapon.\",\r\n        name: 'Weapon Focus (Orc Double-Axe)'\r\n      }\r\n    ]\r\n  }\r\n\r\n  robby = () => {\r\n    return [\r\n      {\r\n        id: 6000,\r\n        description: 'With a light weapon, elven curve blade, rapier, whip, or spiked chain made for a creature of your size category, you may use your Dexterity modifier instead of your Strength modifier on attack rolls. If you carry a shield, its armor check penalty applies to your attack rolls.',\r\n        name: 'Weapon Finesse'\r\n      },\r\n      {\r\n        id: 6001,\r\n        description: <span>You gain a new spell-like ability, each usable twice per day, from the following list, in order: <em className='underline-hover' onClick={() => this.props.editModal('spell', null, 55)}>disguise self</em>, <em className='underline-hover' onClick={() => this.props.editModal('spell', null, 1)}>charm person</em>, <em className='underline-hover' onClick={() => this.props.editModal('spell', null, 47)}>misdirection</em>, <em className='underline-hover' onClick={() => this.props.editModal('spell', null, 16)}>invisibility</em>, <em className='underline-hover' onClick={() => this.props.editModal('spell', null, 1)}>suggestion</em>, displacement, confusion, <em className='underline-hover' onClick={() => this.props.editModal('spell', null, 29)}>dominate person</em>. Your caster level for these spells is equal to your Hit Dice. The DCs for these abilities are Charisma-based.</span>,\r\n        name: 'Magical Tails'\r\n      },\r\n      {\r\n        id: 6002,\r\n        description: 'You make attack rolls with the weapon normally.',\r\n        name: 'Exotic Weapon Proficiency - Net'\r\n      },\r\n      {\r\n        id: 6003,\r\n        description: 'You can draw a weapon as a free action instead of as a move action. You can draw a hidden weapon (see the Sleight of Hand skill) as a move action. A character who has selected this feat may throw weapons at his full normal rate of attacks (much like a character with a bow). Alchemical items, potions, scrolls, and wands cannot be drawn quickly using this feat.',\r\n        name: 'Quick Draw'\r\n      },\r\n      {\r\n        id: 6004,\r\n        description: 'You gain a +2 bonus on Acrobatics, Climb, and Swim checks.',\r\n        name: 'Sea Legs'\r\n      },\r\n    ]\r\n  }\r\n\r\n  festus = () => {\r\n    return [\r\n      {\r\n        id: 7000,\r\n        description: 'While you are wearing light or no armor, your base speed increases by 5 feet. You lose the benefits of this feat if you carry a medium or heavy load.',\r\n        name: 'Fleet'\r\n      },\r\n      {\r\n        id: 7001,\r\n        description: \"You gain a +1 dodge bonus to your AC. A condition that makes you lose your Dex bonus to AC also makes you lose the benefits of this feat.\",\r\n        name: 'Dodge'\r\n      },\r\n    ]\r\n  }\r\n\r\n  grackle = () => {\r\n    return [\r\n      {\r\n        id: 8000,\r\n        description: 'You do not suffer any penalties for using an improvised ranged weapon. You receive a +1 circumstance bonus on attack rolls made with thrown splash weapons.',\r\n        name: 'Throw Anything'\r\n      },\r\n      {\r\n        id: 8001,\r\n        description: \"You gain one additional discovery. You must meet all of the prerequisites for this discovery.\",\r\n        name: 'Extra Discovery'\r\n      },\r\n      {\r\n        id: 8002,\r\n        description: \"You get a +1 bonus on attack and damage rolls with ranged weapons at ranges of up to 30 feet.\",\r\n        name: \"Point-Blank Shot\"\r\n      },\r\n      {\r\n        id: 8003,\r\n        description: \"You can shoot or throw ranged weapons at an opponent engaged in melee without taking the standard –4 penalty on your attack roll.\",\r\n        name: \"Precise Shot\"\r\n      },\r\n      {\r\n        id: 8004,\r\n        description: \"You get a +4 bonus on initiative checks.\",\r\n        name: \"Improved Initiative\"\r\n      }\r\n    ]\r\n  }\r\n\r\n\tmajestik = () => {\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\tid: 9000,\r\n\t\t\t\tdescription: 'You get a +1 bonus on all Will saves made to resist enchantment effects. Once per day, you may draw a card from a Harrow deck you own. At any one time for the rest of that day, you may apply a +2 bonus on any d20 roll modified by the card’s suit. For example, if you drew a card from the suit of Dexterity, you could apply this +2 bonus on an Initiative check, a Reflex save, a Dexterity-based skill check, or a ranged attack roll. You may assign this +2 bonus after you make the roll, but you must do so before you know whether the roll was a success or not.',\r\n\t\t\t\tname: 'Harrowed'\r\n\t\t\t},\r\n\t\t]\r\n\t}\r\n\r\n\tildre = () => {\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\tid: 10001,\r\n\t\t\t\tbenefit: 'Each time you cast a summoning spell that conjures more than one creature, add one to the total number of creatures summoned.',\r\n\t\t\t\tprerequisites: \"Augment Summoning, caster level 3rd.\",\r\n\t\t\t\tblurb: \"You can summon more creatures.\",\r\n\t\t\t\tname: 'Superior Summoning'\r\n\t\t\t},\r\n\t\t]\r\n\t}\r\n\r\n\tfireRoastedTomatoes = () => {\r\n\t\treturn [\r\n\t\t]\r\n\t}\r\n\r\n\tiyugi = () => {\r\n\t\treturn [\r\n\t\t]\r\n\t}\r\n\r\n\tnatesse = () => {\r\n\t\treturn [\r\n\t\t]\r\n\t}\r\n\r\n\tdzeyn = () => {\r\n\t\treturn [\r\n\t\t]\r\n\t}\r\n\r\n\r\n  render () {\r\n    return(\r\n      <div style={{padding: '1em'}} className={localStorage.computer === \"false\" ? 'mobile-tab-selected-tab-container shadow' : 'none'}>\r\n      {this.renderFeats()}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    character: state.character\r\n  }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(Feats)\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { modalAction } from '../../utils/action_creator/popups'\r\n\r\nconst Traits = props => {\r\n\r\n\tconst { name } = useSelector(state => state.character)\r\n\r\n\tconst renderTraits = () => {\r\n\t\tlet arr = []\r\n\t\tswitch(name){\r\n\t\t\tcase \"Iyugi\":\r\n\t\t\t\tarr.push({name: \"Reactionary\", description: \"You were bullied often as a child, but never quite developed an offensive response. Instead, you became adept at anticipating sudden attacks and reacting to danger quickly. You gain a +2 trait bonus on initiative checks.\"})\r\n\t\t\t\tarr.push({name: \"Extremely Fashionable\", description: \"You really know how to make a good impression when you’re dressed well. Whenever you are wearing clothing and/or jewelry worth at least 150 gp (and not otherwise covered in gore, sewage, or other things that mar your overall look), you gain a +1 trait bonus on Bluff, Diplomacy, and Intimidate checks. One of these skills (your choice) is a class skill for you.\"})\r\n\t\t\t\tbreak\r\n\t\t\tcase \"Natesse\":\r\n\t\t\t\tarr.push({name: \"Magical Lineage\", description: \"One of your parents was a gifted spellcaster who not only used metamagic often, but also developed many magical items and perhaps even a new spell or two—and you have inherited a fragment of this greatness. Pick one spell when you choose this trait. When you apply metamagic feats to this spell that add at least 1 level to the spell, treat its actual level as 1 lower for determining the spell’s final adjusted level.\"})\r\n\t\t\t\tarr.push({name: \"Nanite Revival\", description: \"You can instinctively activate your nanites to save your life. Once per day as an immediate action, you can command your nanites to stabilize you while you are dying, even while unconscious or helpless. This does not count as a use of your nanite surge ability.\"})\r\n\t\t\t\tbreak\r\n\t\t\tdefault:\r\n\t\t\t\tbreak\r\n\t\t}\r\n\t\treturn arr.map((trait, i) => {\r\n\t\t\treturn (\r\n\t\t\t\t<li data-id={i * 3 + 1} onClick={() => modalAction(\"generic\", trait, {name: trait.name})} className='highlight mobile-selected-tab-content'  style={{maxHeight: window.outerHeight * 0.4}}>\r\n\t\t\t\t\t<strong data-id={i * 3 + 1}>{trait.name}</strong>\r\n\t\t\t\t</li>\r\n\t\t\t)\r\n\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div style={{padding: '1em'}} className={localStorage.computer === \"false\" ? 'mobile-tab-selected-tab-container shadow' : 'none'}>\r\n\t\t\t{renderTraits()}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Traits\r\n","import React from 'react'\r\nimport Features from './features'\r\nimport RacialTraits from './racial_traits'\r\nimport Feats from './feats'\r\nimport Traits from './traits'\r\n\r\nconst FeaturesTraits = (props) => {\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<h4 style={{marginTop: \"0.7em\", marginBottom: \"0.5em\"}}>Class Features</h4>\r\n\t\t\t<Features editModal={props.editModal}/>\r\n\t\t\t<h4 style={{marginTop: \"0.7em\", marginBottom: \"0.5em\"}}>Ancestral Traits</h4>\r\n\t\t\t<RacialTraits />\r\n\t\t\t<h4 style={{marginTop: \"0.7em\", marginBottom: \"0.5em\"}}>Feats</h4>\r\n\t\t\t<Feats />\r\n\t\t\t<h4 style={{marginTop: \"0.7em\", marginBottom: \"0.5em\"}}>Character Traits</h4>\r\n\t\t\t<Traits />\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default FeaturesTraits\r\n","import React from 'react'\r\nimport _ from 'lodash'\r\nimport { actionClass } from '../../fuf'\r\n\r\nconst EquipmentItem = props => {\r\n\r\n\tlet { item, index, group } = props\r\n\r\n\tconst remappedActions = (actions) => {\r\n\t\treturn actions.map(actionClass)\r\n\t}\r\n\r\n\tconst renderPercentage = (magicItem) => {\r\n\t\tlet mi = magicItem.features.find(f => f.usage)\r\n\t\tif (mi){\r\n\t\t\tlet usage = mi.usage\r\n\t\t\tlet limit = usage.limit\r\n\t\t\tif ((limit === 1 && usage.destroy_after_use) || limit === 1000){\r\n\t\t\t\treturn null\r\n\t\t\t}\r\n\t\t\tlet cmifus = this.props.character.character_magic_item_feature_usages\r\n\t\t\tlet fu = cmifus.find(fu => fu.feature_usage_id === usage.id) || 0\r\n\t\t\tlet currentUsage = fu.current_usage || 0\r\n\t\t\tlet remaining = limit - currentUsage\r\n\t\t\treturn ` (${remaining}/${limit})`\r\n\t\t} else {\r\n\t\t\treturn null\r\n\t\t}\r\n\t}\r\n\r\n\tconst isThisStored = (item, group) => {\r\n\t\tif (group === 'magic_item'){\r\n\t\t\treturn item.stored_character_magic_item\r\n\t\t}\r\n\t\t// ADD NEW STORAGE METHODS FOR NEW ITEM WHEN YOU GET TO IT\r\n\t\t// debugger\r\n\t\treturn null\r\n\t}\r\n\r\n\r\n\r\n\tconst renderTitle = () => {\r\n\r\n\t\tconsole.log(\"specific item in equipment tab\", props)\r\n\r\n\r\n\t\tlet keyWord = group\r\n\t\tkeyWord = group === 'Wondrous Item' || group === \"Magic Item\"? 'magic_item' : keyWord\r\n\r\n\t\tlet known = (group === 'Magic Item' || group === \"Potion\" || group === \"Scroll\" || group === \"Wand\") && !item.known ? false : true\r\n\t\t// debugger\r\n\t\tlet name = known ? item.name || item[keyWord.toLowerCase()]?.name || item?.spell?.name : item.false_desc ?? \"Unknown\"\r\n\t\tif (item.masterwork && !item.name){name = \"mwk \" + name}\r\n\t\tif (item.potion_or_oil && known){name = `${_.capitalize(item.potion_or_oil)} of ${item.spell.name}`}\r\n\t\tif (item.scroll_type && known){name = `Scroll of ${item.spell.name}`}\r\n\t\tif (item.charges && known){name = item.name || `Wand of ${item.spell.name}`}\r\n\t\tlet percentages = known && item[keyWord]?.features ? renderPercentage(item[keyWord]) : null\r\n\t\t// find feature usage, find limit, and find relevant cmifu, and have a fraction of current usage\r\n\t\tlet equipped = item.equipped\r\n\t\tlet stored = isThisStored(item, keyWord)\r\n\t\tlet id = item.id\r\n\r\n\t\t// {equipped ? <span className='equipped'>{equipped === true ? \"E\" : equipped[0]}</span> : null}\r\n\t\t// {stored ? <span className='equipped'>S</span> : null}\r\n\t\treturn (\r\n\t\t\t<tr key={index*item.id*3-1} onClick={() => props.changeSelectedItem(item.id, group.toLowerCase(), item)}>\r\n\t\t\t\t<td>{name} {percentages}</td>\r\n\t\t\t\t<td>{group}</td>\r\n\t\t\t\t<td>0 lbs</td>\r\n\t\t\t\t<td>0 gp</td>\r\n\t\t\t</tr>\r\n\t\t)\r\n\t}\r\n\r\n\tconst renderAction = () => {\r\n\t\tlet known = group === 'unknown' ? false : true\r\n\t\tlet keyWord = group\r\n\t\tkeyWord = group === 'Wondrous Item' || group === \"Potion\" ? 'magic_item' : keyWord\r\n\t\tlet actions = known && item[keyWord]?.features ? item[keyWord].features.map(f => f.action ? f.action.name : null) : []\r\n\t\tlet mappedActions = remappedActions(actions)\r\n\t\tlet id = item.id\r\n\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{!!actions.length && mappedActions.map((a, index) => <span key={index*3+1} className={a} style={{borderRadius: '100%', paddingLeft: '8%', margin: '1.5%'}}>{'  '}</span>)}\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{renderTitle()}\r\n\t\t</>\r\n\t)\r\n\r\n\r\n}\r\n\r\nexport default EquipmentItem\r\n","import React from 'react'\r\nimport _ from 'lodash'\r\nimport { connect } from 'react-redux'\r\nimport localhost from '../../localhost'\r\nimport { modalAction } from '../../utils/action_creator/popups'\r\nimport { calculateWeight, carryingCapacity, calculateLoad } from '../../utils/calculations/character'\r\nimport { abilityScore } from '../../utils/calculations/ability_scores'\r\n\r\n\r\nimport MagicItemSummary from '../magic_item_summary'\r\nimport EquipmentItem from './equipment_item'\r\n\r\n\r\nclass Equipment extends React.Component {\r\n\r\n  state = {\r\n    activeItemGroup: null,\r\n    itemObject: null,\r\n    descriptionAvailable: false\r\n  }\r\n\r\n  changeActiveFeature = (name) => {\r\n    if (this.state.activeItemGroup === name) {\r\n      this.setState({activeItemGroup: null})\r\n    } else {\r\n      this.setState({activeItemGroup: name, descriptionAvailable: false})\r\n    }\r\n  }\r\n\r\n  changeSelectedItem = (itemID, detail, obj) => {\r\n    if (this.props.cmidId === itemID) {\r\n      this.props.exitModal()\r\n      // this.setState({itemObject: null})\r\n    } else {\r\n      let changingState = 'magicItem'\r\n      changingState = detail === 'weapon' ? 'weapon' : changingState\r\n      changingState = detail === 'armor' ? 'armor' : changingState\r\n      changingState = detail === 'poison' ? 'poison' : changingState\r\n      changingState = detail === 'potion' ? 'potion' : changingState\r\n      changingState = detail === 'scroll' ? 'scroll' : changingState\r\n      changingState = detail === 'wand' ? 'wand' : changingState\r\n\t\t\tchangingState = [\"unknown\", \"weapon\", \"armor\", \"harrow\", \"magic item\", \"Wondrous Item\", \"poison\", \"potion\", \"scroll\", \"wand\"].includes(detail) ? changingState : \"item\"\r\n\t\t\tmodalAction(changingState, obj, {name: obj.name || obj.weapon?.name || obj.armor?.name || null})\r\n\t\t\t// debugger\r\n      // this.props.editModal(changingState, null, itemID)\r\n      // if (detail === 'armor'){\r\n      //   modalAction(\"armor\", obj)\r\n      // } else if (changingState === \"item\"){\r\n\t\t\t// \tmodalAction(\"item\", obj)\r\n\t\t\t// }\r\n      // this.setState({itemObject: obj, descriptionAvailable: false})\r\n    }\r\n  }\r\n\r\n  renderEquipment = () => {\r\n\r\n    let cmis = this.props.character.character_magic_items.filter(cmi => cmi.discovered)\r\n    let cws = this.props.character.character_weapons.filter(cw => cw.discovered)\r\n    let cas = this.props.character.character_armors.filter(cw => cw.discovered)\r\n    let weapons = cws.map(w => w.weapon)\r\n\t\tlet items = this.props.character.items\r\n\t\tlet itemGroups = _.uniq(items.map(i => i.category))\r\n\r\n    let equipment = [...cmis]\r\n    let cmifus = this.props.character.character_magic_item_feature_usages\r\n    let unknowns = equipment.filter(eq => !eq.known)\r\n    let knowns = equipment.filter(eq => eq.known)\r\n    let magicalItems = knowns.map(cmi => cmi.magic_item)\r\n    let groupings = _.uniq(magicalItems.map(mi => mi.group))\r\n    if (unknowns.length){\r\n      groupings.push('unknown')\r\n    }\r\n    if (cws.length){groupings.push('weapon')}\r\n    if (cas.length){groupings.push('armor')}\r\n\t\tgroupings = [...groupings, ...itemGroups]\r\n\r\n\t\t// HARDCODE\r\n\t\tif (this.props.character.name === \"Majestik\"){groupings.push(\"harrow\")}\r\n\t\t// if (this.props.character.name === \"Natesse\"){groupings.push(\"wand\")}\r\n\t\t// if (this.props.character.name === \"Natesse\"){groupings.push(\"scroll\")}\r\n\t\t// if (this.props.character.name === \"Dz'eyn\"){groupings.push(\"poison\")}\r\n\t\t// HARDCODE\r\n\r\n    return groupings.map((group, idx) => {\r\n\r\n\t\t\tif (group === \"harrow\"){\r\n\t\t\t\treturn (<div><strong onClick={() => modalAction(\"harrow\", {})}>Harrow Deck</strong></div>)\r\n\t\t\t}\r\n\r\n\r\n\r\n\r\n      let groupedItems = cmis.filter(cmi => cmi.magic_item.group === group)\r\n      groupedItems = group === 'unknown' ? unknowns : groupedItems\r\n      groupedItems = group === 'weapon' ? cws : groupedItems\r\n      groupedItems = group === 'armor' ? cas : groupedItems\r\n\r\n      // remove unarmed as a valid weapon\r\n      if (group === \"weapon\"){ groupedItems = groupedItems.filter(gi => gi.weapon.name !== \"Unarmed\") }\r\n\r\n\t\t\tif (!groupedItems.length){groupedItems = items.filter(i => i.category === group)}\r\n\r\n      let chosen = this.state.activeItemGroup === group\r\n\t\t\tlet label = [\"unknown\", \"weapon\", \"armor\", \"harrow\"].includes(group) ? group + \"s\" : group\r\n\t\t\t// if (![\"unknown\", \"weapon\", \"armor\", \"harrow\"].includes(group)){label = group}\r\n      return (\r\n        <div key={idx * 6 - 1} label={label}>\r\n          <div key={idx*3-1} onClick={() => this.changeActiveFeature(group)}><strong>{_.capitalize(label)} ({groupedItems.length})</strong></div>\r\n          {chosen && <ul style={{margin: '0', padding: '0'}}>\r\n            {groupedItems.map((i, idx) => {\r\n\r\n\t\t\t\t\t\t\treturn <EquipmentItem item={i} index={idx} group={group} changeSelectedItem={this.changeSelectedItem}/>\r\n\r\n            })}\r\n          </ul>}\r\n        </div>\r\n      )\r\n      // display grouping in a div\r\n      // i.e. Potions (1) or Wondrous Items (4)\r\n      // if div is clicked, change state\r\n      // display all items in a list\r\n      // if that item is clicked, display item details on right side of the box\r\n    })\r\n    // return traits.map(trait => {\r\n    //     return (\r\n    //       <li data-id={trait.id} onClick={this.changeActiveFeature} className='highlight'>\r\n    //         <strong data-id={trait.id}>{trait.name}</strong>\r\n    //         {this.state.activeItemGroup === trait.id && <div style={{color: '#000'}}>{trait.description}</div>}\r\n    //       </li>\r\n    //     )\r\n    //\r\n    // })\r\n  }\r\n\r\n\trenderEquipmentList = () => {\r\n\t\tlet items = []\r\n\r\n\t\tlet cmis = this.props.character.character_magic_items.filter(cmi => cmi.discovered)\r\n\t\tlet cps = this.props.character.character_potions.filter(cp => cp.discovered)\r\n\t\tlet css = this.props.character.character_scrolls.filter(cs => cs.discovered)\r\n\t\tlet cwas = this.props.character.character_wands.filter(cw => cw.discovered)\r\n\t\tlet cws = this.props.character.character_weapons.filter(cw => cw.discovered)\r\n\t\tlet cas = this.props.character.character_armors.filter(cw => cw.discovered)\r\n\r\n\t\tcmis.forEach(cmi => {\r\n\t\t\titems.push({...cmi, category: \"Magic Item\"})\r\n\t\t})\r\n\r\n\t\tcps.forEach(cp => {\r\n\t\t\titems.push({...cp, category: \"Potion\"})\r\n\t\t})\r\n\r\n\t\tcss.forEach(cs => {\r\n\t\t\titems.push({...cs, category: \"Scroll\"})\r\n\t\t})\r\n\r\n\t\tcwas.forEach(cw => {\r\n\t\t\titems.push({...cw, category: \"Wand\"})\r\n\t\t})\r\n\r\n\t\tcws.forEach(cw => {\r\n\t\t\tif (cw.weapon.name !== \"Unarmed\"){\r\n\t\t\t\titems.push({...cw, category: \"Weapon\"})\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tif (this.props.character.name === \"Majestik\"){items.push({category: \"harrow\"})}\r\n\r\n\r\n\t\tcas.forEach(ca => {\r\n\t\t\titems.push({...ca, category: \"Armor\"})\r\n\t\t})\r\n\r\n\t\titems = [...items, ...this.props.character.items]\r\n\r\n\t\tthis.props.character.poisons.forEach(cp => {\r\n\t\t\titems.push({...cp, category: \"Poison\"})\r\n\t\t})\r\n\r\n\t\tlet itemRows = items.map((item, idx) => {\r\n\t\t\tif (item.category === \"harrow\"){\r\n\t\t\t\treturn (<div onClick={() => modalAction(\"harrow\", {})}>Harrow Deck</div>)\r\n\t\t\t}\r\n\r\n\t\t\treturn <EquipmentItem item={item} index={idx} group={item.category} changeSelectedItem={this.changeSelectedItem}/>\r\n\t\t})\r\n\r\n\t\treturn (\r\n\t\t\t<table>\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>Name</th>\r\n\t\t\t\t\t\t<th>Category</th>\r\n\t\t\t\t\t\t<th>Weight</th>\r\n\t\t\t\t\t\t<th>Cost</th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t{itemRows}\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t)\r\n\t}\r\n\r\n\r\n\trenderCurrency = () => {\r\n\t\tlet { pp, gp, sp, cp } = this.props.character\r\n\t\tlet totalGP = (pp*10) + (gp) + (sp*0.1) + (cp*0.01)\r\n\t\treturn (\r\n\t\t\t<header style={{display: \"flex\", justifyContent: \"space-between\"}}>\r\n\t\t\t\t<span>\r\n\t\t\t\t\t<strong>Money</strong>: {totalGP.toFixed(2)} gp <small><em>({pp ?? 0} pp, {gp ?? 0} gp, {sp ?? 0} sp, {cp ?? 0} cp)</em></small>\r\n        </span>\r\n        <button onClick={() => modalAction(\"currency\", null, {name: \"Currency\"})}>Manage</button>\r\n\t\t\t</header>\r\n\t\t)\r\n\t}\r\n\r\n\trenderCarryWeight = () => {\r\n\t\tlet weight = calculateWeight(this.props.character, this.props.character_info)\r\n\t\tlet cc = carryingCapacity(abilityScore(\"strength\"))\r\n\t\tlet load = calculateLoad(weight, abilityScore(\"strength\"))\r\n\t\treturn (\r\n\t\t\t<footer style={{display: \"flex\", justifyContent: \"space-between\", position: \"sticky\", bottom: \"-5px\", opacity: \"0.95\", backgroundColor: `#${this.props.settings.bubbleColor}`, padding: \"5px\"}}>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<strong>Carrying</strong>: {weight} lbs (<em>{load} Load</em>)\r\n\t\t\t\t</div>\r\n\t\t\t\t<table>\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th style={{textAlign: \"center\", borderRight: `1px solid #${this.props.settings.borderColor}`}}>Light</th>\r\n\t\t\t\t\t\t\t<th style={{textAlign: \"center\", borderRight: `1px solid #${this.props.settings.borderColor}`}}>Medium</th>\r\n\t\t\t\t\t\t\t<th style={{textAlign: \"center\"}}>Heavy</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td style={{borderRight: `1px solid #${this.props.settings.borderColor}`}}>{cc[0]} lbs or less</td>\r\n\t\t\t\t\t\t\t<td style={{borderRight: `1px solid #${this.props.settings.borderColor}`}}>{cc[0]+1} - {cc[1]} lbs</td>\r\n\t\t\t\t\t\t\t<td>{cc[1]+1} - {cc[2]} lbs</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t</footer>\r\n\t\t)\r\n\t}\r\n\r\n\r\n\r\n  render(){\r\n    return(\r\n\t\t\t<>\r\n\t\t\t\t{this.renderCurrency()}\r\n\t\t    <div style={{padding: '1em', display: 'grid', gridTemplateColumns: 'auto'}} className={localStorage.computer === \"false\" ? 'mobile-tab-selected-tab-container mobile-tab-bottom shadow' : 'none'}>\r\n\t\t      {this.renderEquipmentList()}\r\n\t\t    </div>\r\n\t\t\t\t<button onClick={() => modalAction(\"addEquipment\", null, {name: \"Add Equipment\"})}>Add Equipment</button>\r\n\t\t\t\t{this.renderCarryWeight()}\r\n\t\t\t</>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info,\r\n\t\tsettings: state.settings\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Equipment)\r\n","import React from 'react'\r\n\r\nimport Tab from '../components/character_show/tab'\r\n\r\nclass FeatureTabs extends React.Component {\r\n\r\n  render(){\r\n\r\n    return(\r\n      <span className='tab-list dynamic-size-small'>\r\n        <Tab label=\"Features/Traits/Feats\" renderTabClick={this.props.renderTabClick} activeTab={this.props.activeTab}/>\r\n        <Tab label=\"Equipment\" renderTabClick={this.props.renderTabClick} activeTab={this.props.activeTab}/>\r\n        <Tab label=\"Details\" renderTabClick={this.props.renderTabClick} activeTab={this.props.activeTab}/>\r\n        {!!this.props.alliedCreaturesTab && <Tab label=\"Allied Creatures\" renderTabClick={this.props.renderTabClick} activeTab={this.props.activeTab}/>}\r\n      </span>\r\n    )\r\n  }\r\n}\r\n\r\nexport default FeatureTabs\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { modalAction } from '../utils/action_creator/popups'\r\nimport { replaceCharacterInfoAction } from '../utils/action_creator/character'\r\nimport _ from 'lodash'\r\n\r\n\r\nconst AlliesContainer = props => {\r\n\r\n\tlet { character_creatures: characterCreatures } = useSelector(state => state.character)\r\n\tlet summonedAllies = useSelector(state => state.character_info.summonedAllies)\r\n\r\n\tconst renderFamiliars = () => {\r\n\t\treturn characterCreatures.filter(cc => cc.relationship === \"familiar\").map(cc => {\r\n\t\t\treturn <p><div className=\"underline-hover\" onClick={() => modalAction(\"familiar\", cc)}>{cc.creature.name}</div></p>\r\n\t\t})\r\n\t}\r\n\r\n\tconst renderSummonedAllies = () => {\r\n\t\treturn summonedAllies.map((sa, i) => {\r\n\t\t\tlet name = `${_.capitalize(sa.template)} ${sa.creature.name}`\r\n\t\t\treturn <p><div className=\"underline-hover\" onClick={() => modalAction(\"statBlock\", {...sa.creature, augmentSummoning: sa.augmentSummoning, template: sa.template}, {name})}>{name} </div> <button onClick={() => removeSummonedAlly(i)}>Dismiss</button></p>\r\n\t\t})\r\n\t}\r\n\r\n\tconst removeSummonedAlly = idx => {\r\n\t\tlet duplicateArr = [...summonedAllies]\r\n\t\tduplicateArr.splice(idx, 1)\r\n\r\n\t\treplaceCharacterInfoAction(\"summonedAllies\", duplicateArr)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<section>\r\n\t\t\t{renderFamiliars()}\r\n\t\t\t{renderSummonedAllies()}\r\n\t\t</section>\r\n\t)\r\n}\r\n\r\nexport default AlliesContainer\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport Features from '../components/character_show/features'\r\nimport FeaturesTraitsFeatsContainer from '../components/character_show/feature_traits'\r\nimport Traits from '../components/character_show/racial_traits'\r\nimport Feats from '../components/character_show/feats'\r\nimport Equipment from '../components/character_show/equipment'\r\nimport FeatureTabs from './feature_tabs'\r\nimport AlliesContainer from './allies_container'\r\nimport Details from '../components/character_show/details'\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faSortDown } from '@fortawesome/free-solid-svg-icons'\r\nimport { faCircle } from '@fortawesome/free-solid-svg-icons'\r\n\r\nclass FeaturesTraits extends React.Component {\r\n\r\n  state= {\r\n    activeTab: \"Features/Traits/Feats\"\r\n  }\r\n\r\n  componentDidMount(){\r\n    if (localStorage.computer === \"false\"){\r\n      this.setState({activeTab: 'none'})\r\n    }\r\n  }\r\n\r\n  renderTabClick = (choice) => {\r\n    if (localStorage.computer === \"false\"){\r\n      if (choice === this.state.activeTab){\r\n        this.setState({activeTab: 'none'})\r\n      } else {\r\n        this.setState({activeTab: choice})\r\n      }\r\n    } else {\r\n      this.setState({activeTab: choice})\r\n    }\r\n  }\r\n\r\n  renderMobileTabClassNames = (tab) => {\r\n    let className = ''\r\n    if (tab === this.state.activeTab){\r\n      className += 'mobile-feature-selected-tab'\r\n    } else {\r\n      className += 'mobile-feature-tab'\r\n    }\r\n    className = tab === 'Features' ? className + ' mobile-tab-top' : className\r\n    className = tab === 'Equipment' && tab !== this.state.activeTab ? className + ' mobile-tab-bottom' : className\r\n    className += ' shadow'\r\n    return className\r\n  }\r\n\r\n\talliedCreaturesTab = () => {\r\n\t\tlet makeTheTab = false\r\n\t\tif (this.props.character.character_creatures.length){\r\n\t\t\tmakeTheTab = true\r\n\t\t}\r\n\t\tif (this.props.character_info.summonedAllies.length){\r\n\t\t\tmakeTheTab = true\r\n\t\t}\r\n\r\n\t\treturn makeTheTab\r\n\t}\r\n\r\n  renderFeaturesTraits = () => {\r\n    if (localStorage.computer === \"true\"){\r\n      return (\r\n        <div id='features-traits' className=\"character-show shadow\" style={{boxShadow: `5px 4px 2px #${this.props.settings.shadeColor}`, opacity: \"0.95\", backgroundColor: `#${this.props.settings.bubbleColor}`, borderColor: `#${this.props.settings.borderColor}`}}>\r\n          <FeatureTabs renderTabClick={this.renderTabClick} activeTab={this.state.activeTab} alliedCreaturesTab={this.alliedCreaturesTab()}/>\r\n          <div className=\"dynamic-size\" style={{height: 'auto'}}>\r\n            {this.state.activeTab === \"Features/Traits/Feats\" && <FeaturesTraitsFeatsContainer editModal={this.props.editModal}/>}\r\n            {this.state.activeTab === \"Equipment\" && <Equipment editModal={this.props.editModal} exitModal={this.props.exitModal} cmiId={this.props.characterItemID}/>}\r\n            {this.state.activeTab === \"Details\" && <Details />}\r\n            {this.state.activeTab === \"Allied Creatures\" && <AlliesContainer />}\r\n          </div>\r\n        </div>\r\n      )\r\n    } else {\r\n      return (\r\n        <>\r\n          <div className={this.renderMobileTabClassNames('Features')} onClick={() => this.renderTabClick('Features')}>Features {this.state.activeTab === 'Features' ? <FontAwesomeIcon icon={faCircle}/> : <FontAwesomeIcon icon={faSortDown}/>}</div>\r\n          {this.state.activeTab === \"Features\" && <Features editModal={this.props.editModal}/>}\r\n          <div className={this.renderMobileTabClassNames('Traits')} onClick={() => this.renderTabClick('Traits')}>Traits {this.state.activeTab === 'Traits' ? <FontAwesomeIcon icon={faCircle}/> : <FontAwesomeIcon icon={faSortDown}/>}</div>\r\n          {this.state.activeTab === \"Traits\" && <Traits/>}\r\n          <div className={this.renderMobileTabClassNames('Feats')} onClick={() => this.renderTabClick('Feats')}>Feats {this.state.activeTab === 'Feats' ? <FontAwesomeIcon icon={faCircle}/> : <FontAwesomeIcon icon={faSortDown}/>}</div>\r\n          {this.state.activeTab === \"Feats\" && <Feats editModal={this.props.editModal}/>}\r\n          <div className={this.renderMobileTabClassNames('Equipment')} onClick={() => this.renderTabClick('Equipment')}>Equipment {this.state.activeTab === 'Equipment' ? <FontAwesomeIcon icon={faCircle}/> : <FontAwesomeIcon icon={faSortDown}/>}</div>\r\n          {this.state.activeTab === \"Equipment\" && <Equipment editModal={this.props.editModal} exitModal={this.props.exitModal} cmiId={this.props.characterItemID}/>}\r\n        </>\r\n      )\r\n    }\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <>\r\n        {this.renderFeaturesTraits()}\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    character_info: state.character_info,\r\n\t\tsettings: state.settings\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps)(FeaturesTraits)\r\n","import React from 'react'\r\n\r\nimport Tab from '../components/character_show/tab'\r\n\r\nclass ActionTabs extends React.Component {\r\n\r\n  render(){\r\n\r\n    return(\r\n      <span className='tab-list dynamic-size-small'>\r\n        <Tab label=\"Attacks\" renderTabClick={this.props.renderTabClick} activeTab={this.props.activeTab}/>\r\n        <Tab label=\"Tactics\" renderTabClick={this.props.renderTabClick} activeTab={this.props.activeTab}/>\r\n        <Tab label=\"Combat Maneuvers\" renderTabClick={this.props.renderTabClick} activeTab={this.props.activeTab}/>\r\n        <Tab label=\"Spells\" renderTabClick={this.props.renderTabClick} activeTab={this.props.activeTab}/>\r\n        <Tab label=\"Abilities\" renderTabClick={this.props.renderTabClick} activeTab={this.props.activeTab}/>\r\n      </span>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ActionTabs\r\n","import React from 'react'\r\nimport * as SpellcastingCalculations from '../../utils/calculations/spellcasting'\r\nimport { modalAction, tooltipAction } from '../../utils/action_creator/popups'\r\nimport { renderTH } from '../../utils/fuf'\r\nimport { useSelector } from 'react-redux'\r\n\r\nconst Spellcasting = props => {\r\n\r\n\tconst { character } = useSelector(store => store)\r\n\r\n\tconst renderAllSpellcasting = () => {\r\n\t\tlet spellcastingData = SpellcastingCalculations.allRemainingSpellsPerDay()\r\n\t\tlet spellcastingArray = []\r\n\t\tspellcastingArray.push(spellcastingData.map((scData, i) => {\r\n\t\t\treturn (\r\n\t\t\t\t<>\r\n\t\t\t\t\t{renderSPD(scData.spellsPerDay, scData.klassName, scData.level, i)}\r\n\t\t\t\t\t<br/>\r\n\t\t\t\t\t{renderAddionalSpellcastingStats(scData.level, scData.abilityScoreModifier)}\r\n\t\t\t\t\t{SpellcastingCalculations.areAllKnownSpellsFilled(scData.spellcasting, scData.level) && renderManageKnownSpells(scData)}\r\n\t\t\t\t\t{SpellcastingCalculations.areAllPreparedSpellsFilled(scData.spellcasting, scData.level) && renderManagePreparedSpells(scData)}\r\n\t\t\t\t\t{SpellcastingCalculations.areAllBonusSpellSlotsFilled(scData.spellcasting, scData.level) && renderManageBonusSpellSlots(scData)}\r\n\t\t\t\t\t{renderSpellTable(scData, i)}\r\n\t\t\t\t</>\r\n\t\t\t)\r\n\t\t}))\r\n\t\tlet castAtWill = SpellcastingCalculations.spellsCastAtWill()\r\n\t\tlet castAtWillSpells = castAtWill.map((el) => {\r\n\t\t\treturn renderSpell(el.spellInfo, {spellcasting: el.spellcasting, klassFeature: el.klassFeature, abilityName: el.abilityName})\r\n\t\t})\r\n\t\tif (castAtWill.length){\r\n\t\t\tspellcastingArray.push(\r\n\t\t\t\t<>\r\n\t\t\t\t{renderSpellTable({}, 0, castAtWillSpells)}\r\n\t\t\t\t</>\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn spellcastingArray.flat()\r\n\t}\r\n\r\n\tconst renderSPD = (spds, klassName, level, i) => {\r\n\t\tlet interpolatedSPD = spds.map((spd, ind) => {\r\n\t\t\tlet bonusSpell = null\r\n\t\t\tif (spd.bonusSpell === true){bonusSpell = \"+1\"}\r\n\t\t\treturn (\r\n\t\t\t\t<React.Fragment key={ind*3+1}>\r\n\t\t\t\t\t<strong> | </strong>\r\n\t\t\t\t\t<i>{renderTH(spd.spell_level)}</i>\r\n\t\t\t\t\t: <strong>{spd.spells}{bonusSpell}</strong>\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t)\r\n\t\t})\r\n\r\n\t\treturn (\r\n\t\t\t<span key={i*3-1}>\r\n\t\t\t\t{klassName} Lvl <strong>{level}</strong>\r\n\t\t\t\t{interpolatedSPD}\r\n\t\t\t</span>\r\n\t\t)\r\n\t}\r\n\r\n\tconst renderAddionalSpellcastingStats = (level, abilityScoreModifier) => {\r\n\t\tconst { casterLevel, concentration } = SpellcastingCalculations.additionalSpellStats(level, abilityScoreModifier)\r\n\t\treturn <span> SR check: <strong>+{casterLevel} |</strong> Concentration: <strong>+{concentration}</strong></span>\r\n\t}\r\n\r\n\tconst renderManageKnownSpells = (spellcastingData) => {\r\n\t\tconst renderClick = () => {\r\n\t\t\tmodalAction(\"manageKnownSpells\", spellcastingData)\r\n\t\t}\r\n\r\n\t\treturn <button className=\"attention-button-animation\" onClick={renderClick}>Learn New Spells</button>\r\n\t}\r\n\r\n\tconst renderManagePreparedSpells = spellcastingData => {\r\n\t\tconst renderClick = () => {\r\n\t\t\tmodalAction(\"managePreparedSpells\", spellcastingData)\r\n\t\t}\r\n\r\n\t\treturn <button className=\"attention-button-animation\" onClick={renderClick}>Prepare Spells</button>\r\n\t}\r\n\r\n\tconst renderManageBonusSpellSlots = spellcastingData => {\r\n\t\tconst renderClick = () => {\r\n\t\t\tmodalAction(\"manageBonusSpellSlots\", spellcastingData)\r\n\t\t}\r\n\r\n\t\treturn <button className=\"attention-button-animation\" onClick={renderClick}>Prepare Bonus Spells</button>\r\n\t}\r\n\r\n\tconst renderSpellTable = (scData, index, spells) => {\r\n\t\treturn (\r\n      <table key={index*3+1}>\r\n        <thead>\r\n          <tr>\r\n            <th>Lvl</th>\r\n            <th>Action</th>\r\n            <th>Name</th>\r\n            <th>Range</th>\r\n            <th>Duration</th>\r\n            <th>Hit / DC</th>\r\n            <th>SR</th>\r\n\t\t\t\t\t\t<th>Source</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n\t\t\t\t\t{spells || renderSpellTableRows(scData)}\r\n        </tbody>\r\n      </table>\r\n    )\r\n\t}\r\n\r\n\tconst renderSpellTableRows = (scData) => {\r\n\t\tlet spells = SpellcastingCalculations.characterSpells(scData.spellcasting)\r\n\r\n\t\treturn spells.map((spell) => renderSpell(spell, scData))\r\n\t}\r\n\r\n\tconst renderSpell = (spell, scData) => {\r\n\t\tlet source = scData.abilityName ? `${scData.abilityName}` : `${scData.klassName} - ${scData.klassFeature.name}`\r\n\r\n\t\tlet spellData = SpellcastingCalculations.spellData({...spell, spellcasting: scData.spellcasting, source}, scData.klassFeature.klass_id, character.character_klasses.length)\r\n\t\tspellData.castableBonusSpell = !!spell.bonus_spell === true\r\n\t\tlet buttonName = spell.cast ? \"Spent\" : \"Cast\"\r\n\t\tlet isBonus = spell.bonus_spell ? renderBonusSpellSlotTooltip(spell) : null\r\n\t\treturn (\r\n\t\t\t<tr>\r\n\t\t\t\t<td>{spellData.spellLevel}{isBonus}</td>\r\n\t\t\t\t<td><button className={spellData.action} onClick={() => SpellcastingCalculations.castSpell(spellData, scData.spellsPerDay)}><strong>{buttonName}</strong></button></td>\r\n\t\t\t\t<td><em className='underline-hover' onClick={() => modalAction(\"spellDescription\", spell.spell)}>{spellData.name}</em></td>\r\n\t\t\t\t<td>{spellData.range}</td>\r\n\t\t\t\t<td>{spellData.duration}</td>\r\n\t\t\t\t<td>{spellData.difficultyClass}</td>\r\n\t\t\t\t<td>{spellData.spellResistance}</td>\r\n\t\t\t\t<td>{spellData.source}</td>\r\n\t\t\t</tr>\r\n\t\t)\r\n\t}\r\n\r\n\tconst renderBonusSpellSlotTooltip = (spell) => {\r\n\t\tlet message\r\n\t\tif (spell.alternate_source.klass_specialization_id){\r\n\t\t\tlet kSpec = character.klass_specializations.find(kspec => kspec.id === spell.alternate_source.klass_specialization_id)\r\n\t\t\tmessage = kSpec.name + \" Bonus Spell Slot\"\r\n\t\t}\r\n\t\tlet callback = (e) => tooltipAction(message, e.target)\r\n\t\treturn <sup onMouseOver={callback} onMouseOut={callback}><em>B</em></sup>\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{renderAllSpellcasting()}\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default Spellcasting\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport _ from 'lodash'\r\nimport { isThisActionAvailable } from '../../utils/calculations/round_actions'\r\nimport { abilityScoreMod } from '../../utils/calculations/ability_scores'\r\nimport { calculateFeaturePercentage, remainingUsage, calculateCurrentUsage, isThisFeatureActive } from '../../utils/calculations/feature_usage'\r\nimport { featureDistribution, doesThisFeatureNeedToBeDistributed } from '../../utils/distributers/features'\r\nimport { patchFetch } from '../../utils/fetches'\r\nimport { locateFeatureAndAbilityFromSource, classLevel, renderDamage, abbreviateDamageType } from '../../utils/fuf'\r\nimport { modalAction, diceAction } from '../../utils/action_creator/popups'\r\n\r\nclass Abilities extends React.Component {\r\n\r\n  // check all class features learned by this level (that are activatable),\r\n  // class feature options (that are activatable),\r\n  // racial traits (that are activatable)\r\n  // list them with their action buttons\r\n\r\n  renderAbilities = () => {\r\n    // let option = this.collectClassFeatureOptions()\r\n    switch(this.props.character.name){\r\n      case 'Nettie':\r\n        return this.nettie()\r\n      case 'Merg':\r\n        return this.merg()\r\n      case 'Cedrick':\r\n        return this.cedrick()\r\n      case 'Maddox':\r\n        return this.maddox()\r\n      case 'Persephone':\r\n        return this.pepper()\r\n      case 'Robby':\r\n        return this.robby()\r\n      case 'Festus':\r\n        return this.festus()\r\n      case 'Grackle':\r\n        return this.grackle()\r\n      default:\r\n        break\r\n    }\r\n    let activatableAbilities = []\r\n    this.props.character.applicable_klass_features.forEach(akf => {\r\n      // if an akf has a feature with an action, display it\r\n\t\t\takf.features.forEach(f => {\r\n\t\t\t\tif (f.action && !f.usage?.feature_usage_base){\r\n\t\t\t\t\tlet ckfus = this.props.character.character_klass_feature_usages.filter(fu => fu.klass_feature_id === akf.id)\r\n\t\t\t\t\tif (akf.klass_archetype_id){\r\n\t\t\t\t\t\tckfus = this.props.character.character_klass_archetype_feature_usages.filter(fu => fu.klass_archetype_feature_id === akf.id)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// the id value in the below object refers to the id of the character[type]\r\n\t\t\t\t\t// so that specific klass_feature, magic_item_feature, etc. can be found by id\r\n\t\t\t\t\tactivatableAbilities.push({...f, sourceId: akf.id, klassFeatureName: akf.name, klassId: akf.klass_id, klassArchetypeId: akf.klass_archetype_id, usageSources: ckfus, source: \"applicable_klass_features\"})\r\n\t\t\t\t} else if (f.usage?.feature_usage_base) {\r\n\t\t\t\t// if a feature is a choice of another action (i.e. Bardic Performances)\r\n\t\t\t\t\tlet baseFeatureAndAbility = locateFeatureAndAbilityFromSource(f.usage.feature_usage_base.baseSource)\r\n\t\t\t\t\tlet ckfus = this.props.character.character_klass_feature_usages.filter(fu => fu.klass_feature_id === baseFeatureAndAbility.ability.id)\r\n\r\n\t\t\t\t\t//cant use the same code from above to chane ght ckfus\r\n\t\t\t\t\t// because the baseFeatureAndAbility that is the source of the usage points\r\n\t\t\t\t\t// probably isn't an archetype thing\r\n\t\t\t\t\t// so need to account for that\r\n\r\n\t\t\t\t\tactivatableAbilities.push({...f, sourceId: akf.id, klassFeatureName: akf.name, klassId: akf.klass_id, klassArchetypeId: akf.klass_archetype_id, usageSources: ckfus, source: \"applicable_klass_features\", baseFeatureAndAbility, action: f.action || baseFeatureAndAbility.feature.action})\r\n\t\t\t\t}\r\n\t\t\t\t// if a feature is spontaneous casting, like Cleric or Druid\r\n\t\t\t\tif (akf.name === \"Spontaneous Casting\" && f.spontaneous_castings.length){\r\n\t\t\t\t\tactivatableAbilities.push({...f, sourceId: akf.id, klassFeatureName: akf.name, klassId: akf.klass_id, klassArchetypeId: akf.klass_archetype_id, action: {name: \"no-action\"}, source: \"applicable_klass_features\", options: {spontaneous_casting: true}})\r\n\t\t\t\t}\r\n\t\t\t})\r\n      // only display the feature, but the text should be from the akf\r\n    })\r\n\t\tthis.props.character.klass_specializations.forEach(cKSpec => {\r\n\t\t\tcKSpec.klass_specialization_features.forEach(kspecFeature => {\r\n\t\t\t\tif (classLevel(cKSpec.klass_feature.klass_id) >= kspecFeature.level){\r\n\t\t\t\t\tkspecFeature.features.forEach(f => {\r\n\t\t\t\t\t\tif (f.usage){\r\n\t\t\t\t\t\t\tlet action = f.action || {name: \"no-action\"}\r\n\t\t\t\t\t\t\tlet cksfus = this.props.character.character_klass_specialization_feature_usages.filter(fu => fu.klass_specialization_feature_id === kspecFeature.id)\r\n\t\t\t\t\t\t\tactivatableAbilities.push({...f, action, source: 'klass_specializations', sourceId: cKSpec.id, subSourceId: kspecFeature.id, kspecFeatureName: kspecFeature.name, klassId: cKSpec.klass_feature.klass_id, usageSources: cksfus})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t\tthis.props.character.character_klasses.forEach(cK => {\r\n\t\t\tif (cK.feat){\r\n\t\t\t\tcK.feat.features.forEach(f => {\r\n\t\t\t\t\tif (f.usage){\r\n\t\t\t\t\t\tlet action = f.action || {name: \"no-action\"}\r\n\t\t\t\t\t\t// at the time of creation, the only feats im using are used once per round, so no data needs to persist to the backend\r\n\t\t\t\t\t\tactivatableAbilities.push({...f, action, source: \"character_klasses\", sourceId: cK.id, featName: cK.feat.name})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\t// HARDCODE\r\n\t\tif (this.props.character.name === \"Majestik\"){\r\n\t\t\t// evil eye\r\n\t\t\tactivatableAbilities.push({action: {name: \"Standard Action\"}, sourceId: 1001, klassFeatureName: \"Evil Eye\", klassId: 19, usageSources: [], source: \"hardcoded\", damages: [], saving_throws: []})\r\n\t\t\t// arcane strike\r\n\t\t\tactivatableAbilities.push({action: {name: \"Swift Action\"}, sourceId: 1001, klassFeatureName: \"Arcane Strike\", klassId: 1001, usageSources: [], source: \"hardcoded\", damages: [], saving_throws: []})\r\n\t\t\t// prehensile tail\r\n\t\t\tactivatableAbilities.push({action: {name: \"Swift Action\"}, sourceId: 1001, klassFeatureName: \"Prehensile Tail\", klassId: 1001, usageSources: [], source: \"hardcoded\", damages: [], saving_throws: []})\r\n\t\t} else if (this.props.character.name === \"Fire-Roasted Tomatoes\"){\r\n\t\t\t// Pyrokinesis\r\n\t\t\tactivatableAbilities.push({action: {name: \"Standard Action\"}, sourceId: 1001, klassFeatureName: \"Basic Pyrokinesis\", klassId: 15, usageSources: [], source: \"hardcoded\", damages: [], saving_throws: []})\r\n\t\t\t// Searing Flesh\r\n\t\t\tactivatableAbilities.push({action: {name: \"Standard Action\"}, sourceId: 1001, klassFeatureName: \"Searing Flesh\", klassId: 15, usageSources: [], source: \"hardcoded\", damages: [], saving_throws: []})\r\n\t\t} else if (this.props.character.name === \"Ildre\"){\r\n\t\t\tactivatableAbilities.push({action: {name: \"Move Action\"}, sourceId: 1001, klassFeatureName: \"Dimensional Slide\", klassId: 15, usageSources: [], source: \"hardcoded\", damages: [], saving_throws: []})\r\n\t\t} else if (this.props.character.name === \"Iyugi\"){\r\n\t\t\tactivatableAbilities.push({action: {name: \"Move Action\"}, sourceId: 1001, klassFeatureName: \"Change Shape\", klassId: 15, usageSources: [], source: \"hardcoded\", damages: [], saving_throws: []})\r\n\t\t} else if (this.props.character.name === \"Natesse\"){\r\n\t\t\tactivatableAbilities.push({action: {name: \"Immediate Action\"}, sourceId: 1001, klassFeatureName: \"Nanite Surge\", klassId: 15, usageSources: [], source: \"hardcoded\", damages: [], saving_throws: []})\r\n\t\t\tactivatableAbilities.push({action: {name: \"Immediate Action\"}, sourceId: 1001, klassFeatureName: \"Nanite Revival\", klassId: 15, usageSources: [], source: \"hardcoded\", damages: [], saving_throws: []})\r\n\t\t} else if (this.props.character.name === \"Dz'eyn\"){\r\n\t\t\tactivatableAbilities.push({action: {name: \"Move Action\"}, sourceId: 1001, klassFeatureName: \"Climb 20 ft\", klassId: 15, usageSources: [], source: \"hardcoded\", damages: [], saving_throws: []})\r\n\t\t\tactivatableAbilities.push({action: {name: \"Swift Action\"}, sourceId: 1001, klassFeatureName: \"Toxic Skin - Poison Weapon\", klassId: 15, usageSources: [], source: \"hardcoded\", damages: [], saving_throws: []})\r\n\t\t\tactivatableAbilities.push({action: {name: \"Standard Action\"}, sourceId: 1001, klassFeatureName: \"Toxic Skin - Poison Self\", klassId: 15, usageSources: [], source: \"hardcoded\", damages: [], saving_throws: []})\r\n\t\t}\r\n\t\t// HARDCODE\r\n\r\n    return activatableAbilities.map((ability, idx) => {\r\n\t\t\tlet name = ability.klassFeatureName\r\n\t\t\tif (!name){name = ability.kspecFeatureName || ability.featName}\r\n\t\t\tlet dice = this.renderDice(ability)\r\n\t\t\treturn (\r\n\t\t\t\t<tr key={idx * 3 - 1}>\r\n\t\t\t\t\t<td><button className={this.canThisAbilityBeUsed(ability)} onClick={() => this.newRenderClick(ability)}><strong>Click</strong></button></td>\r\n\t\t\t\t\t<td>{name}</td>\r\n\t\t\t\t\t<td>{this.renderUsage(ability)}</td>\r\n\t\t\t\t\t<td>{dice && <span style={{border: `1px solid #${this.props.settings.borderColor}`, borderRadius: \"0.3em\", cursor: \"default\", padding: \"2px\"}} onClick={() => this.rollAbility(name, dice)}>{dice}</span>}</td>\r\n\t\t\t\t\t<td>{this.renderDC(ability)}</td>\r\n\t\t\t\t\t<td>Nothin'</td>\r\n\t\t\t\t</tr>\r\n\t\t\t)\r\n\t\t})\r\n  }\r\n\r\n\tcanThisAbilityBeUsed = ability => {\r\n\t\tlet actionClass = isThisActionAvailable(ability)\r\n\r\n\t\tactionClass = !!remainingUsage(ability) ? actionClass : 'cannot-cast'\r\n\r\n\r\n\t\treturn actionClass\r\n\t}\r\n\r\n\trenderUsage = (ability) => {\r\n\t\tlet display = calculateFeaturePercentage(ability)\r\n\t\tif (display){\r\n\t\t\treturn (\r\n\t\t\t\t<button className=\"ability-usage-buttons\" onClick={() => {modalAction(\"adjust points\", ability)}}>\r\n\t\t\t\t\t{display}\r\n\t\t\t\t</button>\r\n\t\t\t)\r\n\t\t} else {\r\n\t\t\treturn null\r\n\t\t}\r\n\t}\r\n\r\n\trenderDice = (ability) => {\r\n\t\tif (ability.damages.length){\r\n\t\t\tlet level = classLevel(ability.klassId)\r\n\r\n\t\t\tconsole.log(ability)\r\n\r\n\t\t\tlet damage = null\r\n\t\t\t// find the greatest value without going over the specified level\r\n\t\t\t// i.e., if you get a bonus at odd levels, and you are level 12\r\n\t\t\t// you will get the level 11 bonus\r\n\t\t\tfor (let i = 0; i < ability.damages.length; i++) {\r\n\t\t\t\tif (ability.damages[i].applicable_level === null){ continue }\r\n\t\t\t\tif (ability.damages[i].applicable_level <= level){\r\n\t\t\t\t\tif (i+1 >= ability.damages.length || ability.damages[i+1].applicable_level > level){\r\n\t\t\t\t\t\tdamage = ability.damages[i]\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!damage){\r\n\t\t\t\tlet step = null\r\n\t\t\t\tfor (let i = 0; i < ability.steps.length; i++) {\r\n\t\t\t\t\tif (ability.steps[i].applicable_level <= level){\r\n\t\t\t\t\t\tif (i+1 >= ability.steps.length || ability.steps[i+1].applicable_level > level){\r\n\t\t\t\t\t\t\tstep = ability.steps[i].step\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tdamage = ability.damages.find(d => d.applicable_step === step)\r\n\t\t\t}\r\n\r\n\t\t\tlet damageType = abbreviateDamageType(damage.damage_type)\r\n\r\n\t\t\tif (ability.character_choices.length && ability.character_choices[0].sub_feature === \"damage\" && ability.character_choices[0].column === \"damage_type\"){\r\n\t\t\t\tlet characterChoice = this.props.character.character_choices.find(ccc => ccc.feature_id === ability.id)\r\n\t\t\t\tif (characterChoice){damageType = abbreviateDamageType(characterChoice.choice)}\r\n\t\t\t}\r\n\r\n\t\t\tlet string = renderDamage(damage)\r\n\t\t\tif(damageType){\r\n\t\t\t\tstring += \" \" + damageType\r\n\t\t\t}\r\n\t\t\treturn string\r\n\t\t}\r\n\t}\r\n\r\n\trollAbility = (name, dice) => {\r\n\t\tlet count = parseInt(dice)\r\n\t\tlet die = parseInt(dice.split(\"d\")[1])\r\n\t\tlet modifier = parseInt(dice.split(\"+\")[1]) || parseInt(dice.split(\"-\")[1]) || 0\r\n\r\n\t\tlet obj = {rollName: name, modifier, die, count}\r\n\t\tdiceAction(obj)\r\n\t}\r\n\r\n\trenderDC = ability => {\r\n\t\tlet st = ability.saving_throws[0]\r\n\t\tif (ability.klassFeatureName === \"Basic Pyrokinesis\"){return \"14\"}\r\n\t\tif (ability.klassFeatureName?.includes(\"Toxic Skin\")){return \"Fort 13\"}\r\n\t\tif (st){\r\n\t\t\tlet save = _.capitalize(st.saving_throw)\r\n\t\t\tlet asMod = abilityScoreMod(st.ability_score_modifier, true)\r\n\t\t\tlet klassId = ability.klassId\r\n\t\t\tlet lvl = this.props.character_info.classes.find(cl => cl.id === klassId).level\r\n\r\n\t\t\tlet dc = st.base + asMod + (Math.floor(lvl * st.level_modifier))\r\n\t\t\treturn `${save} ${dc}`\r\n\t\t} else {return \"-\"}\r\n\t}\r\n\r\n  dispatchManager = (action, pointsDirection, specific, points) => {\r\n    if (typeof points !== 'number' || points){\r\n      if (!this.props.character_info.actions[action]){\r\n        this.props.dispatch({type: 'TRIGGER ACTION', action})\r\n        if (specific !== 'mutagen' && specific){\r\n          this.props.dispatch({type: specific})\r\n        } else if (specific === 'mutagen'){\r\n\r\n          this.props.editModal('mutagen')\r\n        }\r\n      }\r\n      if (pointsDirection){\r\n        this.props.dispatch({type: 'POINTS CHANGE', amount: pointsDirection})\r\n      }\r\n    }\r\n  }\r\n\r\n\tnewRenderClick = ability => {\r\n\t\t// NEW DATA\r\n\r\n\t\t// STORED DATA\r\n\r\n\t\t// CALCULATED DATA\r\n\t\tlet areThereEnoughPoints = !!remainingUsage(ability)\r\n\t\tlet isThereAnAction = isThisActionAvailable(ability) !== \"cannot-cast\" ? true : false\r\n\r\n\t\tif (!areThereEnoughPoints || !isThereAnAction){return null}\r\n\r\n\t\tif (isThisFeatureActive(ability)){\r\n\t\t\tfeatureDistribution(ability)\r\n\t\t} else {\r\n\r\n\t\t\tif (ability.usage?.all_feature_usage_options.length){\r\n\t\t\t\tthis.props.dispatch({type: \"MODAL\", detail: \"featureUsageOptions\", obj: ability})\r\n\t\t\t\treturn null\r\n\t\t\t} else if (ability.klassFeatureName === \"Spontaneous Casting\" && ability.spontaneous_castings.length){\r\n\t\t\t\tmodalAction('spontaneousCasting', ability)\r\n\t\t\t\treturn null\r\n\t\t\t}\r\n\r\n\t\t\tif (ability.usageSource) {\r\n\t\t\t\tlet body = {\r\n\t\t\t\t\tcharacter_id: this.props.character.id,\r\n\t\t\t\t\tklass_feature_id: ability.sourceId,\r\n\t\t\t\t\tfeature_usage_id: ability.usage.id,\r\n\t\t\t\t\tcurrent_usage: calculateCurrentUsage(ability.usageSources) + 1\r\n\t\t\t\t}\r\n\t\t\t\tif (ability.baseFeatureAndAbility){\r\n\t\t\t\t\tif (ability.usageSources.length === 1){\r\n\t\t\t\t\t\tlet ckfu = ability.usageSources[0]\r\n\t\t\t\t\t\tbody = {...ckfu, current_usage: ckfu.current_usage + 1}\r\n\t\t\t\t\t} else if (ability.usageSources.length === 0){\r\n\t\t\t\t\t\tbody.feature_usage_id = ability.baseFeatureAndAbility.feature.usage.id\r\n\t\t\t\t\t\tbody.klass_feature_id = ability.baseFeatureAndAbility.ability.id\r\n\t\t\t\t\t\tbody.current_usage = 1\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (ability.kspecFeatureName){\r\n\t\t\t\t\tdelete body.klass_feature_id\r\n\t\t\t\t\tbody.klass_specialization_feature_id = ability.subSourceId\r\n\t\t\t\t} else if (ability.klassArchetypeId){\r\n\t\t\t\t\tdelete body.klass_feature_id\r\n\t\t\t\t\tbody.klass_archetype_feature_id = ability.sourceId\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet url\r\n\t\t\t\tswitch(ability.source){\r\n\t\t\t\t\tcase \"applicable_klass_features\":\r\n\t\t\t\t\t\turl = \"character_klass_feature_usages\"\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tcase \"klass_specializations\":\r\n\t\t\t\t\t\turl = \"character_klass_specialization_feature_usages\"\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\turl = \"character_klass_feature_usages\"\r\n\t\t\t\t}\r\n\t\t\t\tif (ability.klassArchetypeId){\r\n\t\t\t\t\turl = \"character_klass_archetype_feature_usages\"\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpatchFetch(url, body)\r\n\t\t\t\t\t.then(data => {\r\n\t\t\t\t\t\tthis.props.dispatch({type: \"ADJUST CHARACTER REPLACE VALUE IN ARRAY\", adjust: url, value: data})\r\n\t\t\t\t\t\t if (doesThisFeatureNeedToBeDistributed(ability)){\r\n\t\t\t\t\t\t\t featureDistribution(ability)\r\n\t\t\t\t\t\t }\r\n\t\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tif (doesThisFeatureNeedToBeDistributed(ability)){\r\n\t\t\t\t\tfeatureDistribution(ability)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tthis.props.dispatch({type: 'TRIGGER ACTION', action: isThisActionAvailable(ability)})\r\n\r\n\t\t}\r\n\r\n\t\t// use action\r\n\t\t// reduce points\r\n\t}\r\n\r\n  renderClick = (ability, amount) => {\r\n    let { modal, action, limit, starting, name, points, redux } = ability\r\n    if (modal){\r\n      this.props.editModal(modal)\r\n    }\r\n    if (action !== 'free' && amount !== 0 && action !== 'long'){\r\n      this.props.dispatch({type: 'TRIGGER ACTION', action})\r\n    }\r\n    if (points && this.props.character_info.hardcode.points >= points){\r\n      this.props.dispatch({type: 'POINTS CHANGE', amount: 'decrease'})\r\n      if (points > 1){\r\n        this.props.dispatch({type: 'POINTS CHANGE', amount: 'decrease'})\r\n      }\r\n    }\r\n    if (redux){\r\n      this.props.dispatch({type: redux})\r\n    }\r\n    if (limit){\r\n      // if limits exist in redux\r\n      let limits = this.props.character_info.hardcode.limits\r\n      // if limits doesn't exist, dispatch\r\n      // if limits does exist, try to find the specifc one\r\n      // if that one isn't found, dispatch\r\n      // if that one is found, check to see if the number of casts is equal to the limit\r\n      // if casts is less than limit, dispatch\r\n      // if casts is equal to limit, don't\r\n      if (limits){\r\n        let found = this.props.character_info.hardcode.limits.find(l => l.name === name)\r\n        if (found){\r\n          if (starting && found.cast < starting){\r\n            this.props.dispatch({type: 'LIMIT CASTING', name})\r\n          } else if (found.cast < limit){\r\n            this.props.dispatch({type: 'LIMIT CASTING', name})\r\n          }\r\n        } else {\r\n          this.props.dispatch({type: 'LIMIT CASTING', name})\r\n        }\r\n      } else {\r\n        this.props.dispatch({type: 'LIMIT CASTING', name})\r\n      }\r\n    }\r\n  }\r\n\r\n  nettie = () => {\r\n    const perf = this.props.character_info.hardcode.performance\r\n    let className = 'move'\r\n    if (perf){\r\n      className = 'free'\r\n    }\r\n    let action = 'Activate'\r\n    if (perf){\r\n      action = 'Maintain'\r\n    }\r\n    return(\r\n      <React.Fragment>\r\n        <tr>\r\n          <td><button className={className} onClick={() => this.props.editModal('performance', className)}><strong>{action}</strong></button></td>\r\n          <td>Bardic Performance</td>\r\n          <td>Select a performance to start</td>\r\n        </tr>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  merg = () => {\r\n    const actions = this.props.character_info.actions\r\n    const power = this.props.character_info.hardcode.power\r\n    const rage = this.props.character_info.hardcode.rage\r\n    const teleswap = this.props.character_info.hardcode.teleswap\r\n    const hats = this.props.character_info.hardcode.magicalHats\r\n    const manipulate = this.props.character_info.hardcode.manipulate || 0\r\n    const auraRead = this.props.character_info.hardcode.auraRead\r\n    let powerClassName = 'free'\r\n    if (power){\r\n      powerClassName = 'cannot-cast'\r\n    }\r\n    let powerAction = 'Activate'\r\n    if (power){\r\n      powerAction = 'Active'\r\n    }\r\n    return(\r\n      <React.Fragment>\r\n        <tr>\r\n          <td><button className={rage ? 'cannot-cast' : 'free'} onClick={() => this.props.editModal('rage')}><strong>{rage ? 'Active' : 'Activate'}</strong></button></td>\r\n          <td>Rage</td>\r\n          <td>+2 to melee attacks, thrown attacks, melee damage, will saves. -2 to AC. +14 temp hp</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={powerClassName} onClick={() => this.props.dispatch({type: 'POWER ATTACK'})}><strong>{powerAction}</strong></button></td>\r\n          <td>Power Attack</td>\r\n          <td>-2 to melee attacks, +4 to melee attack damage</td>\r\n        </tr>\r\n        {this.props.character_info.hardcode.rage && this.sparks()}\r\n        <tr>\r\n          <td><button className={actions.standard ? 'cannot-cast' : 'standard'} onClick={() => this.props.dispatch({type: 'TRIGGER ACTION', action: 'standard'})}><strong>Swipe</strong></button></td>\r\n          <td>Fabric of Reality - Swipe Fabric</td>\r\n          <td>Teleport to a point within line-of-sight up to 30 ft away. You can use this ability again after 1d10 rounds.</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={actions.move || teleswap ? 'cannot-cast' : 'move'} onClick={() => this.dispatchManager('move', false, 'TELESWAP')}><strong>Swap</strong></button></td>\r\n          <td>Fabric of Reality - Spacial Entanglement</td>\r\n          <td>Select a willing ally within line-of-sight up to 30 ft away. Switch places. This ability counts as the Swipe Fabric ability, and therefore can only be used again after 1d10 rounds.</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={actions.standard || hats ? 'cannot-cast' : 'standard'} onClick={() => this.dispatchManager('standard', false, 'MAGICAL HATS')}><strong>Wisp</strong></button></td>\r\n          <td>Fabric of Reality - Whipping Wisps</td>\r\n          <td>Summon 4 whipping cloths, and diguise yourself in one. Touch AC, DC 20 Will disbelieve. If a blank is struck, attacker takes 1d6 per remaining clothes + Cha mod psychic damage (Will 15 for half damage).</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={actions.swift || manipulate >= 2 ? 'cannot-cast' : 'swift'} onClick={() => this.dispatchManager('swift', false, 'REALITY BEND')}><strong>Bend</strong></button></td>\r\n          <td>Fabric of Reality - Reality Bending ({2-manipulate}/2)</td>\r\n          <td>Make a Combat Maneuver check (bonus equal to your class level + highest mental bonus) against creature to manipulate them or their immediate area.</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={auraRead ? 'cannot-cast' : 'long'} onClick={() => this.props.dispatch({type: 'AURA READ'})}><strong>Read</strong></button></td>\r\n          <td>Fabric of Reality - No Illusion</td>\r\n          <td>If draped over your head, +4 to sense motive checks, affected by <em className='underline-hover' onClick={() => this.props.editModal('spell', null, 46)}>see invisibility</em>, and activate to <span className='underline-hover' onClick={() => this.props.editModal('aura')}>Read Auras</span></td>\r\n        </tr>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  maddox = () => {\r\n    // const power = this.props.character_info.hardcode.power\r\n    // let powerClassName = 'free'\r\n    // if (power){\r\n    //   powerClassName = 'cannot-cast'\r\n    // }\r\n    // let powerAction = 'Activate'\r\n    // if (power){\r\n    //   powerAction = 'Active'\r\n    // }\r\n    let abilities = [\r\n      {\r\n        id: 4000,\r\n        name: 'Change Age',\r\n        description: 'Alter Age',\r\n        button: 'Alter',\r\n        modal: 'age',\r\n        action: 'free'\r\n      },\r\n      {\r\n        id: 4001,\r\n        name: 'Augment Spell',\r\n        description: 'When you cast a spell, expend a point from your reservoir to either incrase the caster level by 1, or increase the DC by +1. You can spend no more than 1 point from your reservoir on a given spell this way.',\r\n        button: 'Augment',\r\n        modal: 'reservoir',\r\n        action: 'free'\r\n      },\r\n      {\r\n        id: 4002,\r\n        name: 'Zamantash Delta Chronometer - Insight Bonus',\r\n        description: 'Thrice a day, the wielder can add a +2 insight bonus to any roll involving a d20. You can add this bonus after rolling, but before knowing the result of the check.',\r\n        button: 'Foresight',\r\n        action: 'free',\r\n        limit: 3\r\n      },\r\n      {\r\n        id: 4003,\r\n        name: 'Zamantash Delta Chronometer - Instant Rest',\r\n        description: 'Once every three days, as a move action, the wielder, and any companion, familiar, or mount within 5 ft of them, feels as though they received an 8-hour rest.',\r\n        button: 'Rest',\r\n        action: 'move',\r\n        limit: 1\r\n      },\r\n      {\r\n        id: 4004,\r\n        name: 'Zamantash Delta Chronometer - Time Ritual',\r\n        description: 'Once a month, the wielder and all others can participate in a ritual that takes 20 minutes. The moment the ritual ends becomes a fixed point in time.',\r\n        button: 'Lock',\r\n        action: 'long',\r\n        limit: 1\r\n      },\r\n      {\r\n        id: 4005,\r\n        name: 'Zamantash Delta Chronometer - Ritual Break',\r\n        description: 'Within 24 hours of completing this ritual, the wielder can trigger the Curio as a 3-round action that requires concentration, and provokes an attack of opportunity. Time is rewound back to the fixed point in time, which becomes no longer fixed, and all of the participants of the ritual are aware of the events that they experienced.',\r\n        button: 'Rewind',\r\n        action: 'long',\r\n        limit: 1,\r\n        dependent: 4004\r\n      },\r\n      {\r\n        id: 4006,\r\n        name: 'Zamantash Delta Chronometer - Quick Reaction',\r\n        description: 'You can select one creature within 30 ft of you. That target gains +10 to their speed, a +2 insight bonus to their AC, and on their next attack roll, Reflex saving throw, or Dexterity-based or Charisma-based skill check, they may roll twice and take the higher of the two results. This effect lasts until the beginning of your next turn.',\r\n        button: 'Enhance',\r\n        action: 'standard'\r\n      },\r\n      {\r\n        id: 4007,\r\n        name: 'Arcanist Exploit - Forewarned',\r\n        description: 'Expend 1 point when you or ally within 30 ft rolls initiative, add 1d4 to that roll.',\r\n        button: 'Warn',\r\n        action: 'free',\r\n        points: 1\r\n      },\r\n      {\r\n        id: 4008,\r\n        name: 'Arcanist Exploit - Forewarned',\r\n        description: 'Expend 2 points when you or ally within 30 ft rolls a saving throw, add 1d4 to that roll.',\r\n        button: 'Save',\r\n        action: 'immediate',\r\n        points: 2\r\n      },\r\n      {\r\n        id: 4009,\r\n        name: 'Arcanist Exploit - Rewind',\r\n        description: 'After a spell fizzles or breaks, spend points equal to half the spell level to immediately prepare that spell again. (NOTE: feature not built, change points manually, and spell should still be available.)',\r\n        button: 'Rewind',\r\n        action: 'immediate'\r\n      },\r\n      {\r\n        id: 4010,\r\n        name: 'Arcanist Exploit - Steal Time',\r\n        description: 'Make a melee touch attack, then target needs to make a DC 16 Will save. If they fail, they take a -1 penalty to AC and Reflex saves, and a -5-foot penalty to base speed. You gain a +1 bonus to AC and Reflex saves, and a +5-foot bonus to base speed. This effect lasts for 7 rounds.',\r\n        button: 'Sap',\r\n        action: 'immediate',\r\n        points: 1,\r\n        redux: 'STEAL TIME'\r\n      }\r\n    ]\r\n    return(\r\n      <React.Fragment>\r\n        {abilities.map((a, idx) => {\r\n          let points = this.props.character_info.hardcode.points\r\n          let limits = this.props.character_info.hardcode.limits\r\n          let amount = true\r\n          if (limits && a.limit){\r\n            let found = limits.find(l => l.name === a.name)\r\n            if (a.starting){\r\n              amount = found ? a.starting - found.cast : a.starting\r\n            } else {\r\n              amount = found ? a.limit - found.cast : a.limit\r\n            }\r\n          } else {\r\n            if (a.limit){\r\n              amount = a.starting ? a.starting : a.limit\r\n            }\r\n          }\r\n          let className = !this.props.character_info.actions[a.action] && amount && (a.points ? points >= a.points : true) ? a.action : 'cannot-cast'\r\n          if (a.dependent){\r\n            if (!limits || !limits.find(l => l.name === abilities.find(ability => ability.id === a.dependent).name)){\r\n              return null\r\n            }\r\n          }\r\n          return (\r\n            <tr key={idx*a.id*3-1}>\r\n            <td><button className={className} onClick={() => this.renderClick(a, amount)}>{a.button}</button></td>\r\n            <td>{a.name}{a.limit ? ` (${amount}/${a.limit})` : null}{a.points ? ` ${a.points}${a.points === 1 ? 'pt' : 'pts'}` : null}</td>\r\n            <td>{a.description}</td>\r\n            </tr>\r\n          )\r\n        })}\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  pepper = () => {\r\n    // const power = this.props.character_info.hardcode.power\r\n    let hex = 'standard'\r\n    if (this.props.character_info.actions.standard){\r\n      hex = 'cast-standard'\r\n    }\r\n    let arcane = 'swift'\r\n    if (this.props.character_info.actions.swift){\r\n      arcane = 'cast-swift'\r\n    }\r\n    return(\r\n      <React.Fragment>\r\n        <tr>\r\n          <td><button className='long' onClick={() => this.props.dispatch({type: 'AUTUMN EQUINOX'})}><strong>Transform</strong></button></td>\r\n          <td>Transformation Sequence</td>\r\n          <td>As an action that takes 5 rounds (30 seconds), <a className='underline-hover' href='https://youtu.be/cirhQ8iLdbw?t=1m21s' target='_blank' rel='noopener noreferrer'>transform</a> into {this.props.character_info.hardcode.autumn ? 'Persephone' : 'the Autumn Equinox'}.</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={hex} onClick={() => this.props.dispatch({type: 'TRIGGER ACTION', action: 'standard'})}><strong>Hex</strong></button></td>\r\n          <td>Protective Luck Hex</td>\r\n          <td>Target creature within 30 ft, if it's targeted by an attack roll, attacker must roll twice and take the worse result</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={hex} onClick={() => this.props.dispatch({type: 'TRIGGER ACTION', action: 'standard'})}><strong>Hex</strong></button></td>\r\n          <td>Fortune Hex</td>\r\n          <td>Target creature within 30 ft, for one round, once a round, may reroll any ability check, attack roll, saving throw, or skill check, and take the better result. A creature can only benefit from this hex every 24 hours.</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={arcane} onClick={this.arcaneStrike}><strong>Activate</strong></button></td>\r\n          <td>Arcane Strike</td>\r\n          <td>As a swift action, you can imbue your weapons with a fraction of your power. For 1 round, your weapons deal +2 damage and are treated as magic for the purpose of overcoming damage reduction.</td>\r\n        </tr>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  cedrick = () => {\r\n    const hc = this.props.character_info.hardcode\r\n    const power = this.props.character_info.hardcode.power\r\n    const swift = this.props.character_info.actions.swift\r\n    let powerClassName = 'free'\r\n    if (power){\r\n      powerClassName = 'cannot-cast'\r\n    }\r\n    let powerAction = 'Activate'\r\n    if (power){\r\n      powerAction = 'Active'\r\n    }\r\n    return(\r\n      <React.Fragment>\r\n        <tr>\r\n          <td><button className={powerClassName} onClick={() => this.props.dispatch({type: 'POWER ATTACK'})}><strong>{powerAction}</strong></button></td>\r\n          <td>Power Attack</td>\r\n          <td>-2 to melee attacks, +4 to melee attack damage</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={hc.init_reroll || swift ? 'cannot-cast' : 'swift'} onClick={() => this.taalmon('init')}><strong>Reroll</strong></button></td>\r\n          <td>Ta'al'mon Ancestral Handwraps - Initiative Reroll</td>\r\n          <td>Reroll Initiative with a bonus equal to your Dex mod</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={hc.double_damage ? 'cannot-cast' : 'free'} onClick={() => this.taalmon('damage')}><strong>Damage</strong></button></td>\r\n          <td>Ta'al'mon Ancestral Handwraps - Additional Damage</td>\r\n          <td>On your next attack, if you hit, roll double the dice for damage. Stacks on critical hits, does not stack with precision damage.</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={hc.taal_tele || swift ? 'cannot-cast' : 'swift'} onClick={() => this.taalmon('teleport')}><strong>Teleport</strong></button></td>\r\n          <td>Ta'al'mon Ancestral Handwraps - Teleport</td>\r\n          <td>If you make an unarmed attack on a creature your size or smaller, teleport to the opposite side of them.</td>\r\n        </tr>\r\n        {hc.combat === 'Squid - Combat' ? this.squidCombat() : null}\r\n        {hc.minor === 'Squid - Minor' ? this.squidMinor() : null}\r\n        {hc.major === 'Squid - Major' ? this.squidMajor() : null}\r\n        <tr>\r\n          <td><button className={this.renderShifterFormClass('Bull - Combat', 'combat', 'class', 'swift', 1)} onClick={() => this.shift('Bull - Combat', 'combat', 1, 'swift')}><strong>{this.renderShifterFormClass('Bull - Combat', 'combat', 'button', null, 1)}</strong></button></td>\r\n          <td>Bull - Combat Form (1 pt)</td>\r\n          <td>On successful Bull Rush, make a melee attack against FF AC, push target back +5ft, and if impact hard surface deal melee attack damage (7 rounds)</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={this.renderShifterFormClass('Bull - Minor', 'minor', 'class', 'swift', 1)} onClick={() => this.shift('Bull - Minor', 'minor', 1, 'swift')}><strong>{this.renderShifterFormClass('Bull - Minor', 'minor', 'button', null, 1)}</strong></button></td>\r\n          <td>Bull - Minor Form (1 pt)</td>\r\n          <td>+2 bonus to Strength</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={this.renderShifterFormClass('Bull - Major', 'major', 'class', 'standard', 1)} onClick={() => this.shift('Bull - Major', 'major', 2, 'standard', 'Large')}><strong>{this.renderShifterFormClass('Bull - Major', 'major', 'button', null, 1)}</strong></button></td>\r\n          <td>Bull - Major Form (2 pts)</td>\r\n          <td>Polymorph into Bull</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={this.renderShifterFormClass('Chameleon - Combat', 'combat', 'class', 'swift', 1)} onClick={() => this.shift('Chameleon - Combat', 'combat', 1, 'swift')}><strong>{this.renderShifterFormClass('Chameleon - Combat', 'combat', 'button', null, 1)}</strong></button></td>\r\n          <td>Chameleon - Combat Form (1 pt)</td>\r\n          <td>If you make an attack against an enemy who was not aware of your presence, add a competence bonus equal to your Wisdom modifier to your attack roll. </td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={this.renderShifterFormClass('Chameleon - Minor', 'minor', 'class', 'swift', 1)} onClick={() => this.shift('Chameleon - Minor', 'minor', 1, 'swift')}><strong>{this.renderShifterFormClass('Chameleon - Minor', 'minor', 'button', null, 1)}</strong></button></td>\r\n          <td>Chameleon - Minor Form (1 pt)</td>\r\n          <td>Can change the color of hair, eyes, or skin, and can cast <em className='underline-hover' onClick={() => this.props.editModal('spell', null, 13)}>prestidigitation</em> on your equipment</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={this.renderShifterFormClass('Chameleon - Major', 'major', 'class', 'standard', 1)} onClick={() => this.shift('Chameleon - Major', 'major', 2, 'standard', 'Large')}><strong>{this.renderShifterFormClass('Chameleon - Major', 'major', 'button', null, 1)}</strong></button></td>\r\n          <td>Chameleon - Major Form (2 pts)</td>\r\n          <td>Polymorph into Chameleon</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={this.renderShifterFormClass('Condor - Combat', 'combat', 'class', 'swift', 1)} onClick={() => this.shift('Condor - Combat', 'combat', 1, 'swift')}><strong>{this.renderShifterFormClass('Condor - Combat', 'combat', 'button', null, 1)}</strong></button></td>\r\n          <td>Condor - Combat Form (1 pt)</td>\r\n          <td>Gain <em>Cleave</em> feat</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={this.renderShifterFormClass('Condor - Minor', 'minor', 'class', 'swift', 1)} onClick={() => this.shift('Condor - Minor', 'minor', 1, 'swift')}><strong>{this.renderShifterFormClass('Condor - Minor', 'minor', 'button', null, 1)}</strong></button></td>\r\n          <td>Condor - Minor Form (1 pt)</td>\r\n          <td>Can cast <em className='underline-hover' onClick={() => this.props.editModal('spell', null, 18)}>feather fall</em></td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={this.renderShifterFormClass('Condor - Major', 'major', 'class', 'standard', 1)} onClick={() => this.shift('Condor - Major', 'major', 2, 'standard', 'Large')}><strong>{this.renderShifterFormClass('Condor - Major', 'major', 'button', null, 1)}</strong></button></td>\r\n          <td>Condor - Major Form (2 pts)</td>\r\n          <td>Polymorph into Condor</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={this.renderShifterFormClass('Frog - Combat', 'combat', 'class', 'swift', 1)} onClick={() => this.shift('Frog - Combat', 'combat', 1, 'swift')}><strong>{this.renderShifterFormClass('Frog - Combat', 'combat', 'button', null, 1)}</strong></button></td>\r\n          <td>Frog - Combat Form (1 pt)</td>\r\n          <td>Excrete a poison through claws. Select the type of Poison. Creatures that fail a DC 17 Fortitude save are affected.</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={this.renderShifterFormClass('Frog - Minor', 'minor', 'class', 'swift', 1)} onClick={() => this.shift('Frog - Minor', 'minor', 1, 'swift')}><strong>{this.renderShifterFormClass('Frog - Minor', 'minor', 'button', null, 1)}</strong></button></td>\r\n          <td>Frog - Minor Form (1 pt)</td>\r\n          <td>+4 bonus to Acrobatics when jumping and a +2 bonus to Swim</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={this.renderShifterFormClass('Frog - Major', 'major', 'class', 'standard', 1)} onClick={() => this.shift('Frog - Major', 'major', 2, 'standard', 'Large')}><strong>{this.renderShifterFormClass('Frog - Major', 'major', 'button', null, 1)}</strong></button></td>\r\n          <td>Frog - Major Form (2 pts)</td>\r\n          <td>Polymorph into Frog</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={this.renderShifterFormClass('Squid - Combat', 'combat', 'class', 'swift', 1)} onClick={() => this.shift('Squid - Combat', 'combat', 1, 'swift')}><strong>{this.renderShifterFormClass('Squid - Combat', 'combat', 'button', null, 1)}</strong></button></td>\r\n          <td>Squid - Combat Form (1 pt)</td>\r\n          <td>Summon ink cloud for 1 round, or longer if underwater. Grow two tentacle appendages.</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={this.renderShifterFormClass('Squid - Minor', 'minor', 'class', 'swift', 1)} onClick={() => this.shift('Squid - Minor', 'minor', 1, 'swift')}><strong>{this.renderShifterFormClass('Squid - Minor', 'minor', 'button', null, 1)}</strong></button></td>\r\n          <td>Squid - Minor Form (1 pt)</td>\r\n          <td>Jet up to {hc.speed * 2} ft in any direction</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={this.renderShifterFormClass('Squid - Major', 'major', 'class', 'standard', 1)} onClick={() => this.shift('Squid - Major', 'major', 2, 'standard', 'Large')}><strong>{this.renderShifterFormClass('Squid - Major', 'major', 'button', null, 1)}</strong></button></td>\r\n          <td>Squid - Major Form (2 pts)</td>\r\n          <td>Polymorph into Squid</td>\r\n        </tr>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  robby = () => {\r\n    let actions = this.props.character_info.actions\r\n    let hc = this.props.character_info.hardcode\r\n    let panache = hc.points\r\n    let charmedLife = this.props.character_info.hardcode.charmedLife\r\n    let charmedActive = this.props.character_info.hardcode.charmedActive\r\n    return(\r\n      <React.Fragment>\r\n        <tr>\r\n          <td><button className={actions.standard ? 'cannot-cast' : 'standard'} onClick={() => this.dispatchManager('standard', null, 'ALTER SELF')}><strong>Change</strong></button></td>\r\n          <td>Change Shape</td>\r\n          <td>You can assume the appearance of a specific single human form of the same sex. You always take this specific form when you use this ability. Functions as <em className='underline-hover' onClick={() => this.props.editModal('spell', null, 76)}>alter self</em>.</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={actions.immediate || charmedLife >= 3 || charmedActive ? 'cannot-cast' : 'immediate'} onClick={() => this.dispatchManager('immediate', null, 'CHARMED', 3-charmedLife)}><strong>Lucky</strong></button></td>\r\n          <td>Charmed Life ({3-charmedLife}/3)</td>\r\n          <td>Add your Charisma bonus to your saving throw</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={actions.immediate || panache <= 0 ? 'cannot-cast' : 'immediate'} onClick={() => this.dispatchManager('immediate', 'decrease', 'DODGING PANACHE', panache)}><strong>Dodge</strong></button></td>\r\n          <td>Dodging Panache</td>\r\n          <td>1 panache: Move 5 ft (AoO from anyone besides attacker), add Charisma mod to AC</td>\r\n        </tr>\r\n        {!hc.parry && <tr>\r\n          <td><button className={actions.free || panache <= 0 ? 'cannot-cast' : 'free'} onClick={() => this.dispatchManager('free', 'decrease', 'PARRY', panache)}><strong>Parry</strong></button></td>\r\n          <td>Opportune Parry</td>\r\n          <td>1 panache: Use your AoO to make a melee attack on an attacker making a melee attack (for each size larger attacker is, -2 penalty). If your attack roll is higher, the target misses.</td>\r\n        </tr>}\r\n        {hc.parry && <tr>\r\n          <td><button className={actions.immediate || panache <= 0 ? 'cannot-cast' : 'immediate'} onClick={() => this.dispatchManager('immediate', null, null, panache)}><strong>Riposte</strong></button></td>\r\n          <td>Opportune Riposte</td>\r\n          <td>If you parried, you may make a melee attack, as long as you have at least 1 panache point.</td>\r\n        </tr>}\r\n        <tr>\r\n          <td><button className={actions.move || panache <= 0 ? 'cannot-cast' : 'move'} onClick={() => this.dispatchManager('move', null, null, panache)}><strong>Stand</strong></button></td>\r\n          <td>Kip-Up</td>\r\n          <td>Stand up from prone without provoking an AoO</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={actions.swift || panache <= 0 ? 'cannot-cast' : 'swift'} onClick={() => this.dispatchManager('swift', 'decrease', null, panache)}><strong>Stand</strong></button></td>\r\n          <td>Kip-Up</td>\r\n          <td>1 panache: Stand up from prone without provoking an AoO</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={actions.swift || panache <= 0 ? 'cannot-cast' : 'swift'} onClick={() => this.dispatchManager('swift', 'decrease', 'PRECISE STRIKE', panache)}><strong>Damage</strong></button></td>\r\n          <td>Precise Strike</td>\r\n          <td>1 panache: Double Precise Strike damage bonus (+3 to +6)</td>\r\n        </tr>\r\n        {this.props.character_info.hardcode.helmsman && this.besmara()}\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  festus = () => {\r\n    let actions = this.props.character_info.actions\r\n    return(\r\n      <React.Fragment>\r\n        <tr>\r\n          <td><button className={actions.move ? 'cannot-cast': 'move'} onClick={() => this.dispatchManager('move')}><strong>Teleport</strong></button></td>\r\n          <td>Long Step</td>\r\n          <td>Teleport 60 ft. You can use this feature again after 1d4 rounds.</td>\r\n        </tr>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  grackle = () => {\r\n    let actions = this.props.character_info.actions\r\n    return(\r\n      <React.Fragment>\r\n        {!this.props.character_info.hardcode.mutagen && <tr>\r\n          <td><button className={actions.move ? 'cannot-cast': 'long'} onClick={() => this.dispatchManager('long', null, 'mutagen')}><strong>Brew</strong></button></td>\r\n          <td>Brew Mutagen</td>\r\n          <td>Create a mutagen. +2 to AC, +4 to selected ability score, -2 to opposite ability score. Options: Strength/Intelligence, Dexterity/Wisdom, Constitution/Charisma.</td>\r\n        </tr>}\r\n        {this.props.character_info.hardcode.mutagen && this.renderMutagen()}\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  renderMutagen = () => {\r\n    let actions = this.props.character_info.actions\r\n    let chosenMutagen = this.props.character_info.hardcode.mutagen\r\n    let activeMutagen = this.props.character_info.hardcode.activeMutagen || false\r\n    let positiveAbilityScore\r\n    let negativeAbilityScore\r\n    switch(chosenMutagen){\r\n      case \"strength\":\r\n        positiveAbilityScore = 'Strength'\r\n        negativeAbilityScore = 'Intelligence'\r\n        break\r\n      case \"dexterity\":\r\n        positiveAbilityScore = 'Dexterity'\r\n        negativeAbilityScore = 'Wisdom'\r\n        break\r\n      case \"constitution\":\r\n        positiveAbilityScore = 'Constitution'\r\n        negativeAbilityScore = 'Charisma'\r\n        break\r\n      default:\r\n        break\r\n    }\r\n    let className = actions.move ? 'cannot-cast': 'standard'\r\n    className = activeMutagen ? 'cannot-cast' : className\r\n    return (\r\n      <tr>\r\n        <td><button className={className} onClick={() => this.dispatchManager(className, null, 'TOGGLE MUTAGEN')}><strong>Imbibe</strong></button></td>\r\n        <td>{positiveAbilityScore}/{negativeAbilityScore} Mutagen</td>\r\n        <td>70 minutes, +2 natural armor bonus to AC, +4 alchemical bonus to {positiveAbilityScore}, -2 penalty to {negativeAbilityScore}</td>\r\n      </tr>\r\n    )\r\n  }\r\n\r\n  renderShifterFormClass = (form, type, location, action, points) => {\r\n    const activeForm = this.props.character_info.hardcode[type]\r\n    const isActionAvailable = !this.props.character_info.actions[action]\r\n    let className = action\r\n    let button = 'Activate'\r\n    if (activeForm === form && isActionAvailable){\r\n      button = 'End'\r\n      className = 'free'\r\n    } else if (activeForm === form && !isActionAvailable){\r\n      button = 'End'\r\n      className = `cast-${action}`\r\n    } else if (activeForm !== form && !isActionAvailable){\r\n      className = 'cannot-cast'\r\n    } else if (points > this.props.character_info.hardcode.points){\r\n      className = 'cannot-cast'\r\n    }\r\n    return location === 'class' ? className : button\r\n  }\r\n\r\n  collectClassFeatureOptions = () => {\r\n    let featuresNested = this.props.character.character_klasses.map(ck => {\r\n      return ck.feature_options\r\n    })\r\n    let features = _.flatten(featuresNested)\r\n    return features\r\n  }\r\n\r\n  besmara = () => {\r\n    let actions = this.props.character_info.actions\r\n    return (\r\n      <tr>\r\n        <td><button className={actions.full ? 'cannot-cast' : 'full'} onClick={() => this.dispatchManager('full')}><strong>Toggle</strong></button></td>\r\n        <td>Store/Withdraw Siege Weapon</td>\r\n        <td>Must have a siege weapon installed on the ship to store or withdraw it.</td>\r\n      </tr>\r\n    )\r\n  }\r\n\r\n  sparks = () => {\r\n    let className = 'swift'\r\n    let eBlood = this.props.character_info.hardcode.eBlood || 0\r\n    if (this.props.character_info.hardcode.eBloodActive){\r\n      className = `cast-${className}`\r\n    }\r\n    if (eBlood === 3){\r\n      className = 'cannot-cast'\r\n    }\r\n    let status = `Activate  (${3 - eBlood})`\r\n    if (this.props.character_info.hardcode.eBloodActive){\r\n      status = 'Active'\r\n    }\r\n    if (eBlood === 3){\r\n      status = 'Spent'\r\n    }\r\n    return (\r\n      <tr>\r\n        <td><button className={className} onClick={() => this.props.dispatch({type: 'SPARKS'})}><strong>{status}</strong></button></td>\r\n        <td>Lesser Elemental Blood (electricity)</td>\r\n        <td>Deal +1d6 electricity damage on all Melee Attack this turn</td>\r\n      </tr>\r\n    )\r\n  }\r\n\r\n  shift = (detail, form, points, action, size) => {\r\n    // if the action is available\r\n    if (!this.props.character_info.actions[action]){\r\n      // if the form the user clicked is already active\r\n      if (this.props.character_info.hardcode[form] === detail){\r\n        // clear it\r\n        this.props.dispatch({type: 'SHIFT', detail: null, form, points: 0})\r\n        // if you have enough point when you click\r\n      } else if (this.props.character_info.hardcode.points >= points){\r\n        // shift and fire off the action\r\n        this.props.dispatch({type: 'SHIFT', detail, form, points})\r\n        this.props.dispatch({type: 'TRIGGER ACTION', action})\r\n      }\r\n      if (size){\r\n        console.log('dispatching size', size)\r\n        this.props.dispatch({type: 'CHANGE SIZE', size, detail, form})\r\n      }\r\n      if (detail === 'Condor - Major'){\r\n        this.props.dispatch({type: 'SPEED SHIFT', speed: 20})\r\n      }\r\n      if (detail === 'Chameleon - Major'){\r\n        this.props.dispatch({type: 'SPEED SHIFT', speed: 40})\r\n      }\r\n      if (detail === 'Frog - Combat'){\r\n        if (this.props.character_info.hardcode.frogCombat){\r\n          this.props.dispatch({type: 'FROG COMBAT', name: null})\r\n        } else {\r\n          this.props.editModal('frogCombat')\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  arcaneStrike = () => {\r\n    if (!this.props.character_info.actions.swift){\r\n      this.props.dispatch({type: 'TRIGGER ACTION', action: 'swift'})\r\n      this.props.dispatch({type: 'ARCANE STRIKE'})\r\n    }\r\n  }\r\n\r\n  taalmon = (type) => {\r\n    if (!this.props.character_info.actions.swift && !this.props.character_info.hardcode.init_reroll && type === 'init'){\r\n      this.props.dispatch({type: 'TRIGGER ACTION', action: 'swift'})\r\n      this.props.dispatch({type: 'INIT REROLL'})\r\n    }\r\n    if (!this.props.character_info.actions.swift && !this.props.character_info.hardcode.init_reroll && type === 'damage'){\r\n      this.props.dispatch({type: 'DOUBLE DAMAGE'})\r\n    }\r\n    if (!this.props.character_info.actions.swift && !this.props.character_info.hardcode.taal_tele && type === 'teleport'){\r\n      this.props.dispatch({type: 'TRIGGER ACTION', action: 'swift'})\r\n      this.props.dispatch({type: 'TAALMON TELEPORT'})\r\n    }\r\n  }\r\n\r\n  chronometer = type => {\r\n\r\n  }\r\n\r\n  squidCombat = () => {\r\n    let className = !this.props.character_info.actions.standard ? 'standard' :'cannot-cast'\r\n    return (\r\n      <tr>\r\n        <td><button className={className} onClick={() => this.props.dispatch({type: 'TRIGGER ACTION', action: 'standard'})}><strong>Create</strong></button></td>\r\n        <td>Ink Cloud</td>\r\n        <td>Fills a 5-foot square with an ink cloud for 1 round, or 4 rounds underwater. If any attack would go through the cloud, the defending creature gains a +5 circumstance bonus. This effect otherwise acts as <em className='underline-hover' onClick={() => this.props.editModal('spell', null, 63)}>obscuring mist</em>.</td>\r\n      </tr>\r\n    )\r\n  }\r\n\r\n  squidMinor = () => {\r\n    let className = !this.props.character_info.actions.move ? 'move' :'cannot-cast'\r\n    let limits = this.props.character_info.hardcode.limits\r\n    let amount\r\n    if (limits){\r\n      let found = limits.find(l => l.name === 'Squid - Minor')\r\n      amount = found ? 4 - found.cast : 4\r\n    } else {\r\n      amount = 4\r\n    }\r\n    className = amount === 0 ? 'cannot-cast' : className\r\n    return (\r\n      <tr>\r\n        <td><button className={className} onClick={className !== 'cannot-cast' ? () => this.renderLimit('Squid - Minor', 4) : null}><strong>Jet</strong></button></td>\r\n        <td>Squid Jet ({amount}/4)</td>\r\n        <td>Jet up to {this.props.character_info.hardcode.speed * 2} ft in one direction. If you impact a surface, take 2d8 bludgeoning damage. If you are underwater, you move up to {this.props.character_info.hardcode.speed * 4} ft, and if you impact a surface, take 2d4 bludgeoning damage.</td>\r\n      </tr>\r\n    )\r\n  }\r\n\r\n  squidMajor = () => {\r\n    let className = !this.props.character_info.actions.full ? 'full' :'cannot-cast'\r\n    let dispatch = !this.props.character_info.actions.full ? () => this.props.dispatch({type: 'TRIGGER ACTION', action: 'full'}) : null\r\n    return (\r\n      <React.Fragment>\r\n        <tr>\r\n          <td><button className='free'><strong>Ink</strong></button></td>\r\n          <td>Ink Cloud</td>\r\n          <td>Emit a 10-foot-radius cloud of ink once per minute while underwater. This cloud provides total concealment, and persists for 1 minute.</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={className} onClick={dispatch}><strong>Jet</strong></button></td>\r\n          <td>Jet</td>\r\n          <td>Move in a straight line up to 260 ft.</td>\r\n        </tr>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  renderLimit = (name, limit, startingValue) => {\r\n    if (limit){\r\n      // if limits exist in redux\r\n      let limits = this.props.character_info.hardcode.limits\r\n      // if limits doesn't exist, dispatch\r\n      // if limits does exist, try to find the specifc one\r\n      // if that one isn't found, dispatch\r\n      // if that one is found, check to see if the number of casts is equal to the limit\r\n      // if casts is less than limit, dispatch\r\n      // if casts is equal to limit, don't\r\n      if (limits){\r\n        let found = this.props.character_info.hardcode.limits.find(l => l.name === name)\r\n        if (found){\r\n          if (startingValue && found.cast < startingValue){\r\n            this.props.dispatch({type: 'LIMIT CASTING', name})\r\n          } else if (found.cast < limit){\r\n            this.props.dispatch({type: 'LIMIT CASTING', name})\r\n          }\r\n        } else {\r\n          this.props.dispatch({type: 'LIMIT CASTING', name})\r\n        }\r\n      } else {\r\n        this.props.dispatch({type: 'LIMIT CASTING', name})\r\n      }\r\n    }\r\n    if (name === 'Squid - Minor'){\r\n      this.props.dispatch({type: 'TRIGGER ACTION', action: 'move'})\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return(\r\n      <section>\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>Action</th>\r\n              <th>Name</th>\r\n              <th>Usage</th>\r\n\t\t\t\t\t\t\t<th>Dice</th>\r\n              <th>DC</th>\r\n              <th>Details</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {this.renderAbilities()}\r\n          </tbody>\r\n        </table>\r\n      </section>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info,\r\n\t\tsettings: state.settings\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Abilities)\r\n","import React from 'react'\r\nimport { connect, useDispatch } from 'react-redux'\r\nimport { pluser, mod } from '../../fuf'\r\nimport { renderAB } from '../../utils/calculations/attack_bonus'\r\nimport { abilityScoreMod } from '../../utils/calculations/ability_scores'\r\nimport { isThisActionAvailable } from '../../utils/calculations/round_actions'\r\n// import { tooltip } from '../../dispatches/tooltip'\r\nimport { expendAmmo, reloadAmmo } from '../../dispatch'\r\nimport _ from 'lodash'\r\nimport { diceAction, modalAction } from '../../utils/action_creator/popups'\r\n\r\n\r\nconst Attacks = props => {\r\n\r\n  const dispatch = useDispatch()\r\n\r\n  const [bombs, setBombs] = React.useState(false);\r\n\r\n  const referenceState = (specific) => {\r\n    switch(specific){\r\n\t  case 'bombs':\r\n\t    return bombs\r\n\t  default:\r\n\t    break\r\n    }\r\n  }\r\n\r\n  const renderCharacter = (name) => {\r\n    switch(name){\r\n      case \"Nettie\":\r\n        return nettie()\r\n      case \"Merg\":\r\n        return merg()\r\n      case \"Cedrick\":\r\n        return cedrick()\r\n      case \"Persephone\":\r\n        return pepper()\r\n      case 'Maddox':\r\n        return maddox()\r\n      case 'Robby':\r\n        return robby()\r\n      case 'Festus':\r\n        return festus()\r\n      case 'Grackle':\r\n        return grackle()\r\n      default:\r\n        return renderAttacks()\r\n    }\r\n  }\r\n\r\n  const renderAttacks = () => {\r\n    // let onlyEquippedWeapons = props.character.character_weapons.filter(cw => cw.equipped)\r\n\t\tlet weapons = []\r\n\t\t// make a list of only uniquely named items\r\n\t\tprops.character.character_weapons.forEach(cw => {\r\n\t\t\tif (cw.masterwork || cw.name) {\r\n\t\t\t\tweapons.push({...cw, count: 1})\r\n\t\t\t} else {\r\n\t\t\t\tlet existingWeapon = weapons.find(w => w.weapon.name === cw.weapon.name)\r\n\t\t\t\tif (!existingWeapon || existingWeapon.equipped !== cw.equipped){\r\n\t\t\t\t\tweapons.push({...cw, count: 1})\r\n\t\t\t\t} else {\r\n\t\t\t\t\texistingWeapon.count++\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n    // let nonUnarmedWeapons = [...onlyEquippedWeapons]\r\n\t\tlet nonUnarmedWeapons = [...weapons]\r\n\r\n\t\t//HARDCODE\r\n\t\tif (props.character.name === \"Majestik\"){\r\n\t\t\tweapons.push({\r\n\t\t\t\tid: 1001,\r\n\t\t\t\tname: \"Harrow Card\",\r\n\t\t\t\tdescription: \"\",\r\n\t\t\t\tequipped: null,\r\n\t\t\t\tknown: true,\r\n\t\t\t\tmasterwork: true,\r\n\t\t\t\tweapon: {\r\n\t\t\t\t\tid: 1001,\r\n\t\t\t\t\tname: \"Harrow Card\",\r\n\t\t\t\t\tcategory: \"Ranged\",\r\n\t\t\t\t\tdamage_type: \"Piercing\",\r\n\t\t\t\t\tcritical: 2,\r\n\t\t\t\t\tcritical_range: 20,\r\n\t\t\t\t\tdamage_dice: 4,\r\n\t\t\t\t\tnum_of_dice: 1,\r\n\t\t\t\t\tfeatures: [],\r\n\t\t\t\t\tprice_in_gp: 1,\r\n\t\t\t\t\tsource: {id: 1001},\r\n\t\t\t\t\tthrown: true,\r\n\t\t\t\t\trange: 20,\r\n\t\t\t\t\tproficiency: \"Simple\",\r\n\t\t\t\t\tweapon_type: \"Range\"\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t} else if (props.character.name === \"Fire-Roasted Tomatoes\"){\r\n\t\t\tweapons.push({\r\n\t\t\t\tid: 1001,\r\n\t\t\t\tname: \"Fire Blast\",\r\n\t\t\t\tdescription: \"\",\r\n\t\t\t\tequipped: null,\r\n\t\t\t\tknown: true,\r\n\t\t\t\tmasterwork: false,\r\n\t\t\t\tweapon: {\r\n\t\t\t\t\tid: 1001,\r\n\t\t\t\t\tname: \"Fire Blast\",\r\n\t\t\t\t\tcategory: \"Ranged\",\r\n\t\t\t\t\tdamage_type: \"Fire\",\r\n\t\t\t\t\tcritical: 2,\r\n\t\t\t\t\tcritical_range: 20,\r\n\t\t\t\t\tdamage_dice: 8,\r\n\t\t\t\t\tnum_of_dice: 1,\r\n\t\t\t\t\tfeatures: [],\r\n\t\t\t\t\tprice_in_gp: 0,\r\n\t\t\t\t\tsource: {id: 1001},\r\n\t\t\t\t\tthrown: true,\r\n\t\t\t\t\trange: 30,\r\n\t\t\t\t\tproficiency: \"Simple\",\r\n\t\t\t\t\tweapon_type: \"Range\"\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t} else if (props.character.name === \"Iyugi\"){\r\n\t\t\tweapons.push({\r\n\t\t\t\tid: 1001,\r\n\t\t\t\tname: \"Bite\",\r\n\t\t\t\tdescription: \"\",\r\n\t\t\t\tequipped: null,\r\n\t\t\t\tknown: true,\r\n\t\t\t\tmasterwork: false,\r\n\t\t\t\tweapon: {\r\n\t\t\t\t\tid: 1001,\r\n\t\t\t\t\tname: \"Bite\",\r\n\t\t\t\t\tcategory: \"Light\",\r\n\t\t\t\t\tdamage_type: \"Piercing\",\r\n\t\t\t\t\tcritical: 2,\r\n\t\t\t\t\tcritical_range: 20,\r\n\t\t\t\t\tdamage_dice: 4,\r\n\t\t\t\t\tnum_of_dice: 1,\r\n\t\t\t\t\tfeatures: [],\r\n\t\t\t\t\tprice_in_gp: 0,\r\n\t\t\t\t\tsource: {id: 1001},\r\n\t\t\t\t\tthrown: true,\r\n\t\t\t\t\trange: 0,\r\n\t\t\t\t\tproficiency: \"Simple\",\r\n\t\t\t\t\tweapon_type: \"Melee\"\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\t//HARDCODE\r\n\r\n\t\t// add unarmed attack to end\r\n\t\tweapons = weapons.filter(cw => !(cw.weapon.name === \"Unarmed\" || cw.weapon.ammunition))\r\n    let unarmed = props.character.character_weapons.find(cw => cw.weapon.name === \"Unarmed\")\r\n\t\tif (!!unarmed){\r\n\t\t\t// there seems to be a bug on database reset\r\n\t\t\t// unarmed is not attached to the character's weapons\r\n\t\t\t// unknown if this is in the frontend or backend\r\n\t\t\tweapons.push(unarmed)\r\n\t\t}\r\n\r\n\r\n    let attacks = weapons.map(renderTableElement)\r\n    // two weapon fighting\r\n\t\tlet onlyEquippedWeapons = weapons.filter(cw => cw.equipped)\r\n\r\n    if (onlyEquippedWeapons.length > 1 || weapons.find(ew => ew.equipped === \"Double\")){\r\n      attacks.push(renderTwoWeaponTableElement())\r\n    }\r\n\r\n\t\t// multi attacks from high BAB\r\n\r\n    return attacks\r\n  }\r\n\r\n  const renderTableElement = (cw, index) => {\r\n    let name = cw.name !== \"\" ? cw.name : cw.weapon.name\r\n\t\tif (cw.masterwork && !cw.name){name = \"mwk \" + name}\r\n\t\tif (cw.count > 1){ name += ` (x${cw.count})`}\r\n    let damageDice = cw.weapon.num_of_dice + \"d\" + cw.weapon.damage_dice\r\n    let damageType = cw.weapon.damage_type\r\n    let damageDiceSizeChange = null\r\n\r\n    let action = \"standard\"\r\n    let buttonName = \"Attack\"\r\n\t\tlet styling = canCast(action)\r\n\r\n\t\t// if (cw.equipped === \"\" && (cw.name !== \"Unarmed\" && cw.weapon.name !== \"Unarmed\")){\r\n\t\t// \tbuttonName = \"Equip\"\r\n\t\t// \taction = \"move\"\r\n\t\t// \tstyling = \"move\"\r\n\t\t// }\r\n\r\n\t\tlet clickAction = () => newRenderDispatch(action, {characterWeapon: cw, buttonName})\r\n\r\n    if (cw.weapon.features.find(f => f.loading)){\r\n      let loading = cw.weapon.features.find(f => f.loading)\r\n      if(!cw.magazine || cw.magazine < 0){\r\n\r\n        switch(loading.action.name){\r\n          case \"Move Action\":\r\n            action = \"move\"\r\n\t\t\t\t\t\tstyling = isThisActionAvailable(loading)\r\n            break\r\n          default:\r\n            break\r\n        }\r\n        buttonName = \"Reload\"\r\n        clickAction = () => dispatchReload(cw, action)\r\n        if ((cw.equipped === \"Off\" && props.character.character_weapons.find(w => w.equipped === \"Primary\")) || (cw.equipped === \"Primary\" && props.character.character_weapons.find(w => w.equipped === \"Off\"))){\r\n          action = \"none\"\r\n          buttonName = \"Cannot Reload\"\r\n          clickAction = null\r\n        }\r\n      }\r\n      if ((!cw.character_weapon_ammunition_id || !props.character.character_weapons.find(wc => wc.id === cw.character_weapon_ammunition_id).ammunition_amount) && !cw.improvised_ammunition){\r\n        action = \"none\"\r\n        buttonName = \"No Ammo\"\r\n\t\t\t\tstyling = \"cannot-cast\"\r\n        clickAction = null\r\n      }\r\n    }\r\n    if (localStorage.computer === \"true\"){\r\n\t\t\tlet attackRoll = calculateAttackBonuses(cw)\r\n\t\t\tlet damageRoll = renderDamage(cw)\r\n      return (\r\n        <tr key={index * 3 - 1}>\r\n          <td><button className={styling} onClick={clickAction}><strong>{buttonName}</strong></button></td>\r\n          <td><div className=\"underline-hover\" onClick={() => modalAction(\"weapon\", cw, {name: cw.name || cw.weapon.name})}>{name}</div></td>\r\n          <td style={{display: \"flex\", flexWrap: \"wrap\"}}>{attackRoll}</td>\r\n          <td>{cw.weapon.range ? cw.weapon.range + \" ft\" : \"-\"}</td>\r\n          <td><div style={{border: `1px solid #${props.settings.borderColor}`, borderRadius: \"0.3em\", padding: \"2px\", cursor: \"default\"}} onClick={() => rollDamage(((cw.name || cw.weapon.name) + \" Damage Roll\"), damageRoll)}>{damageRoll}</div></td>\r\n          <td>{renderCritical(cw)}</td>\r\n          <td>{collectAdditionalInfo(cw).map(renderAdditionalInfo)}</td>\r\n        </tr>\r\n      )\r\n    } else if (localStorage.computer === \"false\"){\r\n      let sidebarInfo = {characterWeapon: cw, critical: renderCritical(cw), additionalInfo: collectAdditionalInfo(cw)}\r\n\r\n      return (\r\n        <tr key={index * 3 - 1}>\r\n          <td><button className={styling} onClick={clickAction}><strong>{buttonName}</strong></button></td>\r\n          <td>{name}</td>\r\n          <td style={renderNum('abS', null, true)}>{calculateAttackBonuses(cw)}</td>\r\n          <td>{renderDamage(cw)}</td>\r\n          <td style={{fontSize: '12px', border: '2px solid black', borderRadius: '0.5em'}} onClick={() => props.editSidebar(true, 'bottom', 'attack', sidebarInfo)}>See More</td>\r\n        </tr>\r\n      )\r\n    }\r\n  }\r\n\r\n  const calculateAttackBonuses = (cw, bonus = 0) => {\r\n    // attackBonus is ability score modifier + class bab\r\n    let meleeAttackBonus = null\r\n    let rangeAttackBonus = null\r\n\t\tlet options = {}\r\n\r\n\t\tif ((props.character.name === \"Natesse\" || props.character.name === \"Iyugi\") && (cw.weapon.category === \"Light\" || cw.weapon.category === \"Unarmed\" || cw.weapon.name === \"Rapier\") ){\r\n\t\t\toptions.finesse = true\r\n\t\t}\r\n\t\tif (props.character.name === \"Natesse\" && cw.weapon.name === \"Scimitar\"){\r\n\t\t\toptions.finesse = true\r\n\t\t}\r\n\r\n\r\n    if (cw.weapon.weapon_type === \"Melee\"){\r\n      meleeAttackBonus = renderAB(props.character, props.character_info, \"melee\", options)\r\n    }\r\n    if (cw.weapon.weapon_type === \"Range\" || cw.weapon.thrown){\r\n      rangeAttackBonus = renderAB(props.character, props.character_info, \"range\", options)\r\n    }\r\n    // is the character proficient with this weapon\r\n    // if it's proficiencyGroup can't be found, or if it's id isn't specifically found\r\n    // not proficient -4\r\n\r\n    let proficiencyPenalty = proficiency(cw) ? 0 : -4\r\n\r\n    bonus = cw.improvised_ammunition ? bonus - 1 : bonus\r\n\t\tbonus = cw.masterwork ? bonus + 1 : bonus\r\n\r\n\t\tif ((props.character.name === \"Dink Weatherbyrst\" ) && (cw.weapon.name === \"Heavy Pick\") || (props.character.name === \"Natesse\" ) && (cw.weapon.name === \"Scimitar\") ){\r\n\t\t\tbonus += 1\r\n\t\t}\r\n    // add everything together\r\n    // use pluser on Each\r\n    // shovel into array\r\n    let attackBonuses = []\r\n    if (meleeAttackBonus !== null) {attackBonuses.push(pluser(meleeAttackBonus + proficiencyPenalty + bonus))}\r\n    if (rangeAttackBonus !== null) {attackBonuses.push(pluser(rangeAttackBonus + proficiencyPenalty + bonus))}\r\n\r\n    // join that array together\r\n\r\n\t\tif (cw.weapon.thrown && attackBonuses.length === 2 && attackBonuses[0] !== attackBonuses[1]) {\r\n\t\t\t// return attackBonuses[0] + \" (T \" + attackBonuses[1] + \")\"\r\n\t\t\treturn attackBonuses.map((ab, i) => <span style={{border: `1px solid #${props.settings.borderColor}`, borderRadius: \"0.3em\", padding: \"2px\", margin: \"2px\", cursor: \"default\"}} onClick={() => rollAttack(((cw.name || cw.weapon.name) + \" Attack Roll\"), ab)}>{i === 1 ? ` (T ${ab})` : ab}</span>)\r\n\t\t} else if (attackBonuses[0] === attackBonuses[1]){\r\n\t\t\treturn attackBonuses.map(ab => <span style={{border: `1px solid #${props.settings.borderColor}`, borderRadius: \"0.3em\", padding: \"2px\", margin: \"2px\", cursor: \"default\"}} onClick={() => rollAttack(((cw.name || cw.weapon.name) + \" Attack Roll\"), ab)}>{ab}</span>)[0]\r\n\t\t}\r\n    return attackBonuses.map(ab => <span style={{border: `1px solid #${props.settings.borderColor}`, borderRadius: \"0.3em\", padding: \"2px\", margin: \"2px\", cursor: \"default\"}} onClick={() => rollAttack(((cw.name || cw.weapon.name) + \" Attack Roll\"), ab)}>{ab}</span>)\r\n  }\r\n\r\n\tconst rollAttack = (name, modifier) => {\r\n\t\tlet obj = {rollName: name, modifier: parseInt(modifier), die: 20, count: 1}\r\n\t\tdiceAction(obj)\r\n\t}\r\n\r\n\tconst rollDamage = (name, dice) => {\r\n\t\tlet count = parseInt(dice)\r\n\t\tlet die = parseInt(dice.split(\"d\")[1])\r\n\t\tlet modifier = parseInt(dice.split(\"+\")[1]) || parseInt(dice.split(\"-\")[1]) || 0\r\n\r\n\t\t// if there is no dice, i.e.\"1+4 B\", then you don't need to roll\r\n\t\tif (!die){ return }\r\n\r\n\t\tlet obj = {rollName: name, modifier, die, count}\r\n\t\tdiceAction(obj)\r\n\t}\r\n\r\n\tconst renderDamage = (cw, options) => {\r\n\r\n\t\t// NEW DATA\r\n\t\tlet damageDiceSizeChange = null\r\n\t\tlet baseDamage\r\n\t\tlet thrownDamage\r\n\r\n\t\t// STORED DATA\r\n\t\tlet damageType = cw.weapon.damage_type\r\n\r\n\t\t// CALCULATED DATA\r\n\t\tlet baseDamageDice = cw.weapon.num_of_dice + \"d\" + cw.weapon.damage_dice\r\n\t\tlet damageDice = renderDamageDice(baseDamageDice, damageDiceSizeChange)\r\n\r\n\t\tif (cw.weapon.features.find(f => f.loading)){\r\n\t\t\tif (cw.improvised_ammunition){\r\n\t\t\t\tdamageDiceSizeChange = \"-1\"\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (options?.double) {\r\n\t\t\tlet baseDoubleDamageDice = cw.weapon.double_num_of_dice + \"d\" + cw.weapon.double_damage_dice\r\n\t\t\tlet doubleDamageType = cw.weapon.double_damage_type\r\n\r\n\t\t\tlet doubleDamageDice = renderDamageDice(baseDoubleDamageDice, damageDiceSizeChange)\r\n\r\n\t\t\t// REFACTOR\r\n\t\t\t// THIS DOESN'T WORK IF A DOUBLE WEAPON IS MELEE ON ONE SIDE AND RANGED ON THE OTHER\r\n\t\t\tlet additionalDamage = renderAdditionalDamage(cw, cw.weapon.weapon_type)\r\n\r\n\t\t\treturn `${damageDice}${additionalDamage[0]} ${damageType[0]}/${doubleDamageDice}${additionalDamage[1]} ${doubleDamageType[0]}`\r\n\t\t}\r\n\r\n\r\n\t\tif (cw.weapon.weapon_type === \"Melee\"){\r\n\t\t\tbaseDamage = `${damageDice}${typeof renderAdditionalDamage(cw, \"Melee\") === \"string\" ? renderAdditionalDamage(cw, \"Melee\") : renderAdditionalDamage(cw, \"Melee\")[0]} ${damageType[0]}`\r\n\t\t} else if (cw.weapon.weapon_type === \"Range\" && !cw.weapon.thrown){\r\n\t\t\tbaseDamage = `${damageDice}${typeof renderAdditionalDamage(cw, \"Range\") === \"string\" ? renderAdditionalDamage(cw, \"Range\") : renderAdditionalDamage(cw, \"Range\")[0]} ${damageType[0]}`\r\n\t\t}\r\n\t\tif (cw.weapon.thrown){\r\n\t\t\tthrownDamage = `${damageDice}${typeof renderAdditionalDamage(cw, \"Thrown\") === \"string\" ? renderAdditionalDamage(cw, \"Thrown\") : renderAdditionalDamage(cw, \"Thrown\")[0]} ${damageType[0]}`\r\n\t\t\tif (cw.weapon.weapon_type === \"Range\"){\r\n\t\t\t\tbaseDamage = thrownDamage\r\n\t\t\t\tthrownDamage = null\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (baseDamage == thrownDamage || !thrownDamage){\r\n\t\t\treturn baseDamage\r\n\t\t} else {\r\n\t\t\treturn `${baseDamage} (T ${thrownDamage})`\r\n\t\t}\r\n\t}\r\n\r\n\tconst renderTwoWeaponTableElement = () => {\r\n\t\t// NEW DATA\r\n\t\tlet penalties = [-6, -10]\r\n\t\tlet damageDiceSizeChange = null\r\n\t\tlet twfAttackBonuses\r\n\t\tlet twfRange\r\n\t\tlet twfDamage\r\n\t\tlet allAttacks\r\n\r\n\t\t// STORED DATA\r\n\t\tlet onlyEquippedWeapons = props.character.character_weapons.filter(cw => cw.equipped)\r\n\t\tlet primary = onlyEquippedWeapons.find(cw => cw.equipped === \"Primary\")\r\n\t\tlet off = onlyEquippedWeapons.find(cw => cw.equipped === \"Off\")\r\n\t\tlet double = onlyEquippedWeapons.find(cw => cw.equipped === \"Double\")\r\n\r\n\t\t// CALCULATED DATA\r\n\t\tfunction name(cw){return cw.name !== \"\" ? cw.name : cw.weapon.name}\r\n\t\tfunction damageDice(cw){return cw.weapon.num_of_dice + \"d\" + cw.weapon.damage_dice}\r\n\t\tfunction range(cw){return cw.weapon.range ? cw.weapon.range + \" ft\" : \"-\"}\r\n\t\tfunction damageType(cw){return cw.weapon.damage_type}\r\n\t\tif ((double) || (off && off.weapon.category === \"Light\")){\r\n\t\t\tpenalties[0] = penalties[0] + 2\r\n\t\t\tpenalties[1] = penalties[1] + 2\r\n\t\t}\r\n\r\n\t\tif (props.character.name === \"Iyugi\"){\r\n\t\t\tpenalties[0] = penalties[0] + 2\r\n\t\t\tpenalties[1] = penalties[1] + 6\r\n\t\t}\r\n\r\n\t\tif (double) {\r\n\t\t\ttwfAttackBonuses = <div style={{display: \"flex\", flexWrap: \"wrap\"}}>{calculateAttackBonuses(double, penalties[0])}/{calculateAttackBonuses(double, penalties[1])}</div>\r\n\t\t\ttwfRange = range(double)\r\n\t\t\ttwfDamage = renderDamage(double, {double: true})\r\n\r\n\t\t\tallAttacks = [double]\r\n\r\n\t\t} else if (primary && off) {\r\n\t\t\ttwfAttackBonuses = <div style={{display: \"flex\", flexWrap: \"wrap\"}}>{calculateAttackBonuses(primary, penalties[0])}/{calculateAttackBonuses(off, penalties[1])}</div>\r\n\t\t\ttwfRange = range(primary) === range(off) ? `${range(primary)}` : `${range(primary)}/${range(off)}`\r\n\t\t\ttwfDamage = renderDamage(primary) === renderDamage(off) ? `${renderDamage(primary)}` : `${renderDamage(primary)}/${renderDamage(off)}`\r\n\t\t\tallAttacks = [primary, off]\r\n\t\t}\r\n\r\n    return (\r\n      <tr style={{color: `#${props.settings.textColor}`}}>\r\n        <td><button className={canCast('full')} onClick={() => renderMultipleDispatch(allAttacks)}><strong>Attack</strong></button></td>\r\n        <td>{double ? name(double) : `${name(primary)} / ${name(off)}`}</td>\r\n        <td>{twfAttackBonuses}</td>\r\n        <td>{twfRange}</td>\r\n        <td>{twfDamage}</td>\r\n        <td>{}</td>\r\n        <td></td>\r\n      </tr>\r\n    )\r\n  }\r\n\r\n\r\n  const proficiency = (cw) => {\r\n    let isProficient = true\r\n    let weaponProficiencies = props.character_info.proficiencies.weapon\r\n    if (!weaponProficiencies.groups.find(wp => wp.proficiency_group === cw.weapon.proficiency) && !weaponProficiencies.individualIds.find(wp => cw.weapon.id === wp.weapon_id)){isProficient = false}\r\n    if (cw.weapon.name === \"Bastard Sword\"){\r\n      if (weaponProficiencies.groups.includes(\"Martial\") && cw.equipped === \"Two\"){isProficient = true}\r\n      else if (weaponProficiencies.individualIds.includes(cw.weapon.id)){isProficient = true}\r\n      else {isProficient = false}\r\n    }\r\n    return isProficient\r\n  }\r\n\r\n  const renderCritical = (characterWeapon) => {\r\n    let weapon = characterWeapon.weapon\r\n    let crit = \"\"\r\n    if (weapon.critical_range < 20){\r\n      crit = weapon.critical_range + \"-20/\"\r\n    }\r\n    crit += \"x\"+ weapon.critical\r\n    return crit\r\n  }\r\n\r\n  const collectAdditionalInfo = (characterWeapon) => {\r\n    let additionalArray = []\r\n    if (!proficiency(characterWeapon)){additionalArray.push({name: \"Not Proficient\", tooltip: \"-4 penalty to attack rolls if you are not proficient\", sidebarRules: 0, italics: false})}\r\n    if (characterWeapon.improvised_ammunition){additionalArray.push({name: \"Improvised Ammo\", tooltip: \"-1 penalty to attack rolls, 1 size category smaller damage die\", sidebarRules: 0, italics: false})}\r\n    if (characterWeapon.weapon.category !== \"Ranged\"){\r\n      if (characterWeapon.equipped === \"Primary\"){\r\n        additionalArray.push({name: \"Primary\", tooltip: \"Wielded in primary hand, 1x Str bonus to damage\", sidebarRules: 0, italics: false})\r\n      }\r\n      if (characterWeapon.equipped === \"Off\"){\r\n        additionalArray.push({name: \"Off\", tooltip: \"Wielded in off hand, 0.5x Str bonus to damage\", sidebarRules: 0, italics: false})\r\n      }\r\n      if (characterWeapon.equipped === \"Two\"){\r\n        additionalArray.push({name: \"Two-Handed\", tooltip: \"Wielded in both hands, 1.5x Str bonus to damage\", sidebarRules: 0, italics: false})\r\n      }\r\n      if (characterWeapon.equipped === \"Double\"){\r\n        additionalArray.push({name: \"Double Weapon\", tooltip: \"Wielded in both hands, 1x Str bonus to damage on primary attack, 0.5x Str bonus to damage on off attack\", sidebarRules: 0, italics: false})\r\n      }\r\n      if (characterWeapon.weapon.weapon_type === \"Melee\" && characterWeapon.weapon.thrown){\r\n        additionalArray.push({name: \"Thrown\", tooltip: \"If throwing, use second attack bonus (T)\", sidebarRules: 0, italics: false})\r\n      }\r\n    }\r\n\t\tif (characterWeapon.character_weapon_ammunition_id){\r\n\t\t\tadditionalArray.push({name: renderAmmo(characterWeapon), tooltip: null, italics: false, sidebarRules: 0})\r\n\t\t}\r\n\t\t//HARDCODE\r\n\t\tif (characterWeapon.name === \"Harrow Card\"){\r\n\t\t\tadditionalArray.push({name: \"Magic Weapon\", tooltip: \"You must use your Swift Action on Arcane Strike to enchant these cards to be used as weapons.\", sidebarRules: 0, italics: false})\r\n\t\t}\r\n\t\tif (characterWeapon.name === \"Fire Blast\"){\r\n\t\t\tadditionalArray.push({name: \"Touch AC\", tooltip: \"This attack resolves against Touch AC.\", sidebarRules: 0, italics: false})\r\n\t\t\tadditionalArray.push({name: \"Wild Talents\", tooltip: \"Can augment with your Substance Infusions (DC 14) or Form Infusions (DC 12)\", sidebarRules: 0, italics: false})\r\n\t\t}\r\n\t\tif (props.character.name === \"Iyugi\"){\r\n\t\t\tif (characterWeapon.weapon.name === \"Dagger\"){\r\n\t\t\t\tadditionalArray.push({name: \"Sneak Attack +2d8\", tooltip: \"If target is Denied Dex bonus to AC, or you are Flanking their, +2d8 Precision Damage\", sidebarRules: 0, italics: false})\r\n\t\t\t} else {\r\n\t\t\t\tadditionalArray.push({name: \"Sneak Attack +2d4\", tooltip: \"If target is Denied Dex bonus to AC, or you are Flanking their, +2d4 Precision Damage\", sidebarRules: 0, italics: false})\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (props.character.name === \"Dz'eyn\"){\r\n\t\t\tadditionalArray.push({name: \"Studied Target\", tooltip: \"+1 to Attacks and Damage if target is studied\", sidebarRules: 0, italics: false})\r\n\t\t\tadditionalArray.push({name: \"Sneak Attack +1d6\", tooltip: \"If target is Denied Dex bonus to AC, or you are Flanking their, +1d6 Precision Damage\", sidebarRules: 0, italics: false})\r\n\t\t\tif (characterWeapon.weapon.thrown || characterWeapon.weapon.category === \"Ranged\"){\r\n\t\t\t\tadditionalArray.push({name: \"Point-Blank Shot\", tooltip: \"+1 to Attacks and Damage if within 30 ft\", sidebarRules: 0, italics: false})\r\n\t\t\t\tadditionalArray.push({name: \"Precise Shot\", tooltip: \"Attack engaged target without penalty\", sidebarRules: 0, italics: false})\r\n\t\t\t}\r\n\t\t}\r\n\t\t//HARDCODE\r\n    return additionalArray\r\n  }\r\n\r\n  const renderAdditionalInfo = (obj, i, arr) => {\r\n    let comma = \", \"\r\n    if (i === arr.length-1){comma = \"\"}\r\n    if (obj.italics){\r\n      return <em>{obj.name}{comma}</em>\r\n    } else {\r\n      return <span key={i * 3 - 1} onMouseOver={(e) => dispatchTooltip(obj, e)} onMouseOut={(e) => dispatchTooltip(obj, e)}>{obj.name}{comma}</span>\r\n    }\r\n  }\r\n\r\n  const dispatchTooltip = (obj, e) => {\r\n    // debugger\r\n    props.tooltip(obj.tooltip, e.target)\r\n  }\r\n\r\n  const renderMultipleDispatch = (array) => {\r\n    array.forEach((el, i) => {\r\n      if (i === 0){\r\n        newRenderDispatch('full', {characterWeapon: el})\r\n      } else {\r\n        newRenderDispatch('free', {characterWeapon: el})\r\n      }\r\n    })\r\n  }\r\n\r\n  const newRenderDispatch = (action, details) => {\r\n    let actions = props.character_info.actions\r\n    if ((action === 'standard' || action  === 'move' || action === 'swift') && actions.full){\r\n      return null\r\n    } else if (action === 'full' && (actions.standard || actions.move || actions.swift)){\r\n      return null\r\n    } else if (!actions[action]){\r\n      props.dispatch({type: 'TRIGGER ACTION', action})\r\n\r\n      if (details.characterWeapon){\r\n        let cw = details.characterWeapon\r\n\t\t\t\tif (action === \"move\" && !cw.equipped && details.buttonName === \"Equip\"){\r\n\t\t\t\t\tconsole.log(\"do something here\")\r\n\t\t\t\t}\r\n        if (cw.weapon.category === \"Ranged\"){\r\n          if ((cw.character_weapon_ammunition_id || cw.improvised_ammunition) && cw.weapon.features.find(f => f.loading?.id)){\r\n            let cwAmmo = props.character.character_weapons.find(cwa => cwa.id === cw.character_weapon_ammunition_id)\r\n            dispatch(expendAmmo(cw, cwAmmo))\r\n          }\r\n        }\r\n      }\r\n\r\n    } else {\r\n      return null\r\n    }\r\n  }\r\n\r\n  const renderDispatch = (action, details) => {\r\n    let actions = props.character_info.actions\r\n    if ((action === 'standard' || action  === 'move' || action === 'swift') && actions.full){\r\n      return null\r\n    } else if (action === 'full' && (actions.standard || actions.move || actions.swift)){\r\n      return null\r\n    } else if (!actions[action]){\r\n      props.dispatch({type: 'TRIGGER ACTION', action})\r\n      if (details === 'charge'){\r\n        props.dispatch({type: 'CHARGE'})\r\n      }\r\n      if (details === 'cleave'){\r\n        props.dispatch({type: 'CLEAVE'})\r\n      }\r\n      if (details === 'Long Bow' || details === 'Revolver'){\r\n        props.dispatch({type: 'SPEND AMMO', weapon: details})\r\n      }\r\n      if (details === 'bomb'){\r\n        props.dispatch({type: 'POINTS CHANGE', amount: 'increase'})\r\n      }\r\n    } else {\r\n      return null\r\n    }\r\n  }\r\n\r\n  const dispatchReload = (cw, action) => {\r\n    let loading = cw.weapon.features.find(f => f.loading)\r\n    let magazine = loading.loading.capacity\r\n    let cwAmmo = props.character.character_weapons.find(cwa => cwa.id === cw.character_weapon_ammunition_id)\r\n    // patch fetch with new magazine amount\r\n    // dispatch\r\n    dispatch(reloadAmmo(cw, magazine))\r\n    newRenderDispatch(action, {})\r\n  }\r\n\r\n  const canCast = (action) => {\r\n    let actions = props.character_info.actions\r\n    if ((action === 'standard' || action  === 'move' || action === 'swift') && actions.full){\r\n      return \"cannot-cast\"\r\n    } else if (action === 'full' && (actions.standard || actions.move || actions.swift)){\r\n      return \"cannot-cast\"\r\n    } else if (!actions[action]){\r\n      return action\r\n    } else {\r\n      return \"cannot-cast\"\r\n    }\r\n  }\r\n\r\n  const nettie = () => {\r\n    return (\r\n      <React.Fragment>\r\n        <tr>\r\n          <td><button className={canCast('standard')} onClick={() => renderDispatch('standard')}><strong>Attack</strong></button></td>\r\n          <td><em>+1 Glammered Rapier</em></td>\r\n          <td>+10</td>\r\n          <td>-</td>\r\n          <td>{renderDamageDice('1d6')}+3 P</td>\r\n          <td>18-20/x2</td>\r\n          <td>Finesse</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={canCast('standard')} onClick={() => renderDispatch('standard')}><strong>Attack</strong></button></td>\r\n          <td>Unarmed</td>\r\n          <td>+9</td>\r\n          <td>-</td>\r\n          <td>3 B</td>\r\n          <td>x2</td>\r\n          <td>Non-lethal</td>\r\n        </tr>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  const festus = () => {\r\n    return (\r\n      <React.Fragment>\r\n        <tr>\r\n          <td><button className={canCast('standard')} onClick={() => renderDispatch('standard')}><strong>Attack</strong></button></td>\r\n          <td>Unarmed Strike</td>\r\n          <td style={renderNum('abS', null, true)}>{renderNum('abS') >= 0 ? '+' + renderNum('abS') : renderNum('abS')}</td>\r\n          <td>-</td>\r\n          <td>{renderDamageDice('1d8')}<span style={renderNum('damageS', null, true)}>{renderNum('damageS') >= 0 ? '+' + (renderNum('damageS')) : (renderNum('damageS'))}</span> B</td>\r\n          <td>x2</td>\r\n          <td>Ignore DR/magic</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={canCast('full')} onClick={() => renderDispatch('full')}><strong>Attack</strong></button></td>\r\n          <td>Unarmed Strikes</td>\r\n          <td style={renderNum('abS', null, true)}>{renderNum('abS')-2 >= 0 ? '+' + (renderNum('abS')-2) : (renderNum('abS')-2)}/{renderNum('abS')-2 >= 0 ? '+' + (renderNum('abS')-2) : (renderNum('abS')-2)}/{renderNum('abS')-2 >= 0 ? '+' + (renderNum('abS')-2) : (renderNum('abS')-2)}</td>\r\n          <td>-</td>\r\n          <td>{renderDamageDice('1d8')}<span style={renderNum('damageS', null, true)}>{renderNum('damageS') >= 0 ? '+' + (renderNum('damageS')) : (renderNum('damageS'))}</span> B</td>\r\n          <td>x2</td>\r\n          <td>Ignore DR/magic</td>\r\n        </tr>\r\n\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  const grackle = () => {\r\n    if (localStorage.computer === \"false\"){\r\n      return [\r\n        {\r\n          name: 'Bomb',\r\n          action: null,\r\n          buttonName: 'Expand',\r\n          attackBonus: 'Dexterity',\r\n          hardcodeAttackBonus: 1,\r\n          range: 20,\r\n          damageDice: '4d6',\r\n          hardcodeDamageBonus: 6,\r\n          damageBonus: 'Dexterity',\r\n          damageType: 'Fire',\r\n          strengthMultiplier: null,\r\n          finesse: null,\r\n          additionalDetails: 'bomb',\r\n          critical: 'x2',\r\n          special: <><span onMouseOver={e =>\r\n            (e, 'Splash')} onMouseOut={props.mouseOut}>Splash</span>, Those caught in the splash damage can attempt a Reflex save for half damage.</>,\r\n          toggle: ['bombs', setBombs],\r\n          displayIfTrue: null\r\n        },\r\n        {\r\n          name: 'Frost Bomb',\r\n          action: 'standard',\r\n          dispatchDetails: 'bomb',\r\n          buttonName: 'Attack',\r\n          attackBonus: null,\r\n          hardcodeAttackBonus: 0,\r\n          range: null,\r\n          damageDice: '4d6',\r\n          hardcodeDamageBonus: 6,\r\n          damageBonus: 'Dexterity',\r\n          damageType: 'Cold',\r\n          strengthMultiplier: null,\r\n          finesse: null,\r\n          additionalDetails: 'bomb',\r\n          critical: 'x2',\r\n          special: <>Creatures that take a direct hit from a frost bomb are staggered on their next turn unless they succeed on a Fortitude save.</>,\r\n          toggle: null,\r\n          displayIfTrue: 'bombs'\r\n        },\r\n      ]\r\n    }\r\n    // <td><button className={canCast('standard')} onClick={() => renderDispatch('standard')}><strong>Attack</strong></button></td>\r\n    return (\r\n      <React.Fragment>\r\n        <tr>\r\n          <td><button onClick={() => setBombs(!bombs)}>{bombs ? \"v\" : \">\"}</button></td>\r\n          <td>Bomb</td>\r\n          <td style={renderNum('abD', null, true)}>{renderNum('abD')+1 >= 0 ? '+' + (renderNum('abD')+1) : (renderNum('abD')+1)}</td>\r\n          <td>20 ft</td>\r\n          <td>{renderDamageDice('4d6')}<span style={renderNum('damageD', null, true)}>{renderNum('damageD', null, null, null, 'bomb')+6 >= 0 ? '+' + (renderNum('damageD', null, null, null, 'bomb')+6) : (renderNum('damageD', null, null, null, 'bomb')+6)}</span> Fire</td>\r\n          <td>x2</td>\r\n          <td><span onMouseOver={e => renderTooltip(e, 'Splash')} onMouseOut={props.mouseOut}>Splash</span>, Those caught in the splash damage can attempt a Reflex save for half damage.</td>\r\n        </tr>\r\n        {bombs && <>\r\n          <tr>\r\n            <td><button className={canCast('standard')} onClick={() => renderDispatch('standard', 'bomb')}><strong>Attack</strong></button></td>\r\n            <td>Frost Bomb</td>\r\n            <td></td>\r\n            <td></td>\r\n            <td>{renderDamageDice('4d6')}<span style={renderNum('damageD', null, true)}>{renderNum('damageD', null, null, null, 'bomb')+6 >= 0 ? '+' + (renderNum('damageD', null, null, null, 'bomb')+6) : (renderNum('damageD', null, null, null, 'bomb')+6)}</span> Cold</td>\r\n            <td></td>\r\n            <td>Creatures that take a direct hit from a frost bomb are staggered on their next turn unless they succeed on a Fortitude save.</td>\r\n          </tr>\r\n          <tr>\r\n            <td><button className={canCast('standard')} onClick={() => renderDispatch('standard', 'bomb')}><strong>Attack</strong></button></td>\r\n            <td>Healing Bomb</td>\r\n            <td></td>\r\n            <td></td>\r\n            <td></td>\r\n            <td></td>\r\n            <td>Creating a healing bomb requires the alchemist to expend an infused extract or potion containing a <em>cure</em> spell. A creature that takes a direct hit from a healing bomb is healed as if she had imbibed the infusion or potion used to create the bomb.</td>\r\n          </tr>\r\n          <tr>\r\n            <td><button className={canCast('standard')} onClick={() => renderDispatch('standard', 'bomb')}><strong>Attack</strong></button></td>\r\n            <td>Stink Bomb</td>\r\n            <td></td>\r\n            <td></td>\r\n            <td></td>\r\n            <td></td>\r\n            <td>Duplicate the effects of <em>stinking cloud</em> instead of <em>fog cloud</em>, filling an area equal to twice the bomb's splash radius for 1 round.</td>\r\n          </tr>\r\n        </>}\r\n        <tr>\r\n          <td><button className={canCast('standard')} onClick={() => renderDispatch('standard', 'Long Bow')}><strong>Attack</strong></button></td>\r\n          <td onClick={() => props.editModal('ammo', null, null, {name: 'weapon', type: 'ACTIVE WEAPON', weapon: 'Long Bow'})}>Long Bow {renderAmmo('Long Bow')}</td>\r\n          <td style={renderNum('abD', null, true)}>{renderNum('abD') >= 0 ? '+' + (renderNum('abD')) : (renderNum('abD'))}</td>\r\n          <td>100 ft</td>\r\n          <td>{renderDamageDice('1d8')}<span style={renderNum('damageD', null, true)}>{renderNum('damageD') >= 0 ? '+' + (renderNum('damageD')) : (renderNum('damageD'))}</span> P</td>\r\n          <td>x3</td>\r\n          <td></td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={canCast('standard')} onClick={() => renderDispatch('standard')}><strong>Attack</strong></button></td>\r\n          <td>Unarmed</td>\r\n          <td style={renderNum('abS', null, true)}>+{renderNum('abS')}</td>\r\n          <td>-</td>\r\n          <td>{renderDamageDice('1d3')}<span style={renderNum('damageS', null, true)}>+{renderNum('damageS')}</span> B {sparks()}</td>\r\n          <td>x2</td>\r\n          <td>Non-lethal</td>\r\n        </tr>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  const merg = () => {\r\n    return (\r\n      <React.Fragment>\r\n        <tr>\r\n          <td><button className={canCast('standard')} onClick={() => renderDispatch('standard')}><strong>Attack</strong></button></td>\r\n          <td><em>+3 unholy/- Orc Double Axe</em></td>\r\n          <td style={renderNum('abS', null, true)}>+{renderNum('abS')+3+1 /*Weapon Focus*/}</td>\r\n          <td>-</td>\r\n          <td>{renderDamageDice('1d8')}+<span style={renderNum('damageS', null, true)}>{renderNum('damageS')+3}</span> S {sparks()}(+2d6 v. good)</td>\r\n          <td>x2</td>\r\n          <td>Double, <em onMouseOver={e => renderTooltip(e, 'unholy')} onMouseOut={props.mouseOut}>unholy</em> on one blade</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={canCast('standard')} onClick={() => renderDispatch('standard')}><strong>Attack</strong></button></td>\r\n          <td><em>+1 construct bane Morningstar</em></td>\r\n          <td style={renderNum('abS', null, true)}>+{renderNum('abS')+1}</td>\r\n          <td>-</td>\r\n          <td>{renderDamageDice('1d10')}+<span style={renderNum('damageS', null, true)}>{renderNum('damageS')+1}</span> S {sparks()}</td>\r\n          <td>x2</td>\r\n          <td><em onMouseOver={e => renderTooltip(e, 'bane')} onMouseOut={props.mouseOut}>bane</em></td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={canCast('full')} onClick={() => renderDispatch('full')}><strong>Attack</strong></button></td>\r\n          <td><em>+3 unholy/- Orc Double Axe</em></td>\r\n          <td style={renderNum('abS', null, true)}>+{renderNum('abS')+3-2+1 /*Weapon Focus*/}/+{renderNum('abS')-2+1 /*Weapon Focus*/}/+{renderNum('abS')-2-5+1 /*Weapon Focus*/}</td>\r\n          <td>-</td>\r\n          <td>{renderDamageDice('1d8')}+<span style={renderNum('damageS', null, true)}>{renderNum('damageS')+3}</span> S {sparks()}/ {renderDamageDice('1d8')}+<span style={renderNum('damageS', null, true)}>{renderNum('damageS')}</span> S {sparks()}</td>\r\n          <td>x2</td>\r\n          <td>Double, <em onMouseOver={e => renderTooltip(e, 'unholy')} onMouseOut={props.mouseOut}>unholy</em> on one blade</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={canCast('standard')} onClick={() => renderDispatch('standard')}><strong>Attack</strong></button></td>\r\n          <td>Dagger</td>\r\n          <td style={renderNum('abS', null, true)}>{renderNum('abS') >= 0 ? '+' + renderNum('abS') : renderNum('abS')}, {renderNum('abD') >= 0 ? '+' + renderNum('abD') : renderNum('abD')}</td>\r\n          <td>10 ft.</td>\r\n          <td>{renderDamageDice('1d4')}<span style={renderNum('damageS', null, true)}>{renderNum('damageS') >= 0 ? '+' + renderNum('damageS') : renderNum('damageS')}</span> S/P</td>\r\n          <td>19-20/x2</td>\r\n          <td>If thrown, use second attack bonus</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={canCast('standard')} onClick={() => renderDispatch('standard')}><strong>Attack</strong></button></td>\r\n          <td>Unarmed</td>\r\n          <td style={renderNum('abS', null, true)}>+{renderNum('abS')}</td>\r\n          <td>-</td>\r\n          <td><span style={renderNum('damageS', null, true)}>{renderNum('damageS')+1}</span> B {sparks()}</td>\r\n          <td>x2</td>\r\n          <td>Non-lethal</td>\r\n        </tr>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  const pepper = () => {\r\n    return (\r\n      <React.Fragment>\r\n        <tr>\r\n          <td><button className={canCast('standard')} onClick={() => renderDispatch('standard')}><strong>Attack</strong></button></td>\r\n          <td onClick={() => props.editModal('ammo', null, null, {name: 'weapon', type: 'ACTIVE WEAPON', weapon: 'Light Crossbow'})}>Light Crossbow {renderAmmo('Light Crossbow')}</td>\r\n          <td style={renderNum('abD', null, true)} onMouseOver={e => renderTooltip(e, 'PBS')} onMouseOut={props.mouseOut}>+{renderNum('abD')/*There was an extra +1 from here but, i removed it. Unsure what it came from*/}*</td>\r\n          <td>80 ft</td>\r\n          <td onMouseOver={e => renderTooltip(e, 'PBS')} onMouseOut={props.mouseOut}>{renderDamageDice('1d8')}+<span style={renderNum('damageD', null, true)}>{renderNum('damageD')}*</span> P</td>\r\n          <td>19-20/x2</td>\r\n          <td><span onMouseOver={e => renderTooltip(e, 'Load Light')} onMouseOut={props.mouseOut}>Load*</span>{props.character_info.hardcode.arcane_strike ? ', Ignore DR/magic' : null}</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={canCast('standard')} onClick={() => renderDispatch('standard')}><strong>Attack</strong></button></td>\r\n          <td>Claws</td>\r\n          <td style={renderNum('abS', null, true)} onMouseOver={e => renderTooltip(e, 'PBS')} onMouseOut={props.mouseOut}>+{renderNum('abS')}</td>\r\n          <td>-</td>\r\n          <td>{renderDamageDice('1d4')}<span style={renderNum('damageS', null, true)}>{renderNum('damageS')}</span> S</td>\r\n          <td>x2</td>\r\n          <td>{props.character_info.hardcode.arcane_strike ? ', Ignore DR/magic' : null}</td>\r\n        </tr>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  const cedrick = () => {\r\n    return (\r\n      <React.Fragment>\r\n        {polymorph()}\r\n        {props.character_info.hardcode.combat === 'Condor - Combat' &&\r\n          <tr>\r\n            <td><button className={canCast('standard')} onClick={() => renderDispatch('standard', 'cleave')}><strong>Attack</strong></button></td>\r\n            <td>Cleave - Shifter Claws</td>\r\n            <td style={renderNum('abS', null, true)}>+{renderNum('abS')+1+1 /*Ta'al'mon wraps*/}/+{renderNum('abS')+1+1 /*Ta'al'mon wraps*/}</td>\r\n            <td>-</td>\r\n            <td>{renderDamageDice('1d8')}+<span style={renderNum('damageS', null, true)}>{renderNum('damageS')+1 /*Ta'al'mon wraps*/}</span> P</td>\r\n            <td>x2</td>\r\n            <td>If you hit the first target, you may make a second attack on a target adjacent to the first and within reach{props.character_info.hardcode.combat === 'Chameleon - Combat' && ', if hidden from attacker, +4 to attack roll'}</td>\r\n          </tr>\r\n        }\r\n        {props.character_info.hardcode.combat === 'Squid - Combat' &&\r\n          <tr>\r\n            <td><button className={canCast('standard')} onClick={() => renderDispatch('standard', 'cleave')}><strong>Attack</strong></button></td>\r\n            <td>Tentacle</td>\r\n            <td style={renderNum('abS', null, true)}>+{renderNum('abS')-5}</td>\r\n            <td>-</td>\r\n            <td>{renderDamageDice('1d3')}+<span style={renderNum('damageS', null, true)}>{renderNum('damageS')}</span> B</td>\r\n            <td>x2</td>\r\n            <td>Secondary natural attack{props.character_info.hardcode.combat === 'Chameleon - Combat' && ', if hidden from attacker, +4 to attack roll'}</td>\r\n          </tr>\r\n        }\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  const maddox = () => {\r\n    return (\r\n      <React.Fragment>\r\n        <tr>\r\n          <td><button className={canCast('standard')} onClick={() => renderDispatch('standard')}><strong>Attack</strong></button></td>\r\n          <td>Quarterstaff</td>\r\n          <td style={renderNum('abS', null, true)}>+{renderNum('abS')}</td>\r\n          <td>-</td>\r\n          <td>{renderDamageDice('1d6')}<span style={renderNum('damageS', null, true)}>{renderNum('damageS') >= 0 ? '+' + renderNum('damageS') : renderNum('damageS')}</span> B</td>\r\n          <td>x2</td>\r\n          <td>Double</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={canCast('standard')} onClick={() => renderDispatch('standard')}><strong>Attack</strong></button></td>\r\n          <td>Dagger</td>\r\n          <td style={renderNum('abS', null, true)}>{renderNum('abS') >= 0 ? '+' + renderNum('abS') : renderNum('abS')}, {renderNum('abD') >= 0 ? '+' + renderNum('abD') : renderNum('abD')}</td>\r\n          <td>10 ft.</td>\r\n          <td>{renderDamageDice('1d4')}<span style={renderNum('damageS', null, true)}>{renderNum('damageS') >= 0 ? '+' + renderNum('damageS') : renderNum('damageS')}</span> S/P</td>\r\n          <td>19-20/x2</td>\r\n          <td>If thrown, use second attack bonus</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={canCast('standard')} onClick={() => renderDispatch('standard')}><strong>Attack</strong></button></td>\r\n          <td><em>+1 Flaming Cestus</em></td>\r\n          <td style={renderNum('abS', null, true)}>{renderNum('abS')+1 >= 0 ? '+' + (renderNum('abS')+1) : (renderNum('abS')+1)}</td>\r\n          <td>-</td>\r\n          <td>{renderDamageDice('1d4')}<span style={renderNum('damageS', null, true)}>{renderNum('damageS')+1 >= 0 ? '+' + (renderNum('damageS')+1) : (renderNum('damageS')+1)}</span> B/P +1d6 fire</td>\r\n          <td>19-20/x2</td>\r\n          <td>If wielded, -2 penalty to precision-based tasks with that hand, <em onMouseOver={e => renderTooltip(e, 'flaming')} onMouseOut={props.mouseOut}>flaming</em></td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={canCast('standard')} onClick={() => renderDispatch('standard')}><strong>Attack</strong></button></td>\r\n          <td>Augmented Shortsword AN-7f</td>\r\n          <td style={renderNum('abS', null, true)}>{renderNum('abS')+1 >= 0 ? '+' + (renderNum('abS')+1) : (renderNum('abS')+1)}</td>\r\n          <td>-</td>\r\n          <td>{renderDamageDice('1d6')}<span style={renderNum('damageS', null, true)}>{renderNum('damageS')+1 >= 0 ? '+' + (renderNum('damageS')+1) : (renderNum('damageS')+1)}</span> B/P +1d4 cold</td>\r\n          <td>19-20/x3</td>\r\n          <td>+2 to Trip and Disarm Combat Maneuvers, <span onMouseOver={e => renderTooltip(e, 'crazed')} onMouseOut={props.mouseOut}>crazed energy</span></td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={canCast('full')} onClick={() => renderDispatch('full')}><strong>Attack</strong></button></td>\r\n          <td>Quarterstaff</td>\r\n          <td style={renderNum('abS', null, true)}>{renderNum('abS')-4 >= 0 ? '+' + renderNum('abS')-4 : renderNum('abS')-4}/{renderNum('abS')-8 >= 0 ? '+' + renderNum('abS')-8 : renderNum('abS')-8}</td>\r\n          <td>-</td>\r\n          <td>{renderDamageDice('1d6')}<span style={renderNum('damageS', null, true)}>{renderNum('damageS') >= 0 ? '+' + renderNum('damageS') : renderNum('damageS')}</span> B/{renderDamageDice('1d6')} <span style={renderNum('damageS', null, true)}>{renderNum('damageS') >= 0 ? '+' + renderNum('damageS') : renderNum('damageS')}</span> B</td>\r\n          <td>x2</td>\r\n          <td>Double</td>\r\n        </tr>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  const robby = () => {\r\n    let precise = props.character_info.hardcode.precise ? 6 : 3\r\n    let panache = props.character_info.hardcode.points\r\n    precise = panache > 0|| precise === 6 ? precise : 0\r\n    return (\r\n      <React.Fragment>\r\n        <tr>\r\n          <td><button className={canCast('standard')} onClick={() => renderDispatch('standard')}><strong>Attack</strong></button></td>\r\n          <td>Trident (Tempest Trishula)</td>\r\n          <td style={renderNum('abD', null, true, true)}>{renderNum('abD', null, null, true)+1 >= 0 ? '+' + (renderNum('abD', null, null, true)+1) : renderNum('abD', null, null, true)+1 /*Magic Item*/}, {renderNum('abD')+1 >= 0 ? '+' + (renderNum('abD')+1) : renderNum('abD')+1 /*Magic Item*/}</td>\r\n          <td>10 ft</td>\r\n          <td>{renderDamageDice('1d8')}<span style={renderNum('damageS', null, true)}>{renderNum('damageS')+4+precise+1 >= 0 ? '+' + (renderNum('damageS')+4+precise+1) : renderNum('damageS')+4+precise+1 /*Finesse Training, on melee only; magic item*/}</span> P +1d6 elec , {renderDamageDice('1d8')}<span style={renderNum('damageS', null, true)}>{renderNum('damageS')+precise+1 >= 0 ? '+' + (renderNum('damageS')+precise+1) : renderNum('damageS')+precise+1 /*Magic Item*/}</span> P +1d6 elec</td>\r\n          <td>x2</td>\r\n          <td>If thrown, use second attack bonus and damage, <span onMouseOver={e => renderTooltip(e, 'brace')} onMouseOut={props.mouseOut}>Brace</span>{panache > 0 ?', Precise Strike' : null}<span onMouseOver={e => renderTooltip(e, 'sneak attack')} onMouseOut={props.mouseOut}>, Sneak Attack +2d6</span><span className='underline-hover' onClick={() => props.editModal('debilitating')}>, Debilitating Injury</span><em onMouseOver={(e) => renderTooltip(e, 'shock')} onMouseOut={props.mouseOut}>, shock</em><em onMouseOver={(e) => renderTooltip(e, 'returning')} onMouseOut={props.mouseOut}>, returning</em></td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={canCast('standard')} onClick={() => renderDispatch('standard')}><strong>Attack</strong></button></td>\r\n          <td>Cane Sword</td>\r\n          <td style={renderNum('abD', null, true, true)}>{renderNum('abD', null, null, true) >= 0 ? '+' + renderNum('abD', null, null, true) : renderNum('abD', null, null, true)}</td>\r\n          <td>-</td>\r\n          <td>{renderDamageDice('1d6')}<span style={renderNum('damageS', null, true)}>{renderNum('damageS')+precise >= 0 ? '+' + (renderNum('damageS')+precise) : renderNum('damageS')+precise}</span> P</td>\r\n          <td>x2</td>\r\n          <td>{panache > 0 ?'Precise Strike' : null}<span onMouseOver={e => renderTooltip(e, 'sneak attack')} onMouseOut={props.mouseOut}>, Sneak Attack +2d6</span><span className='underline-hover' onClick={() => props.editModal('debilitating')}>, Debilitating Injury</span></td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={canCast('standard')} onClick={() => renderDispatch('standard', 'Long Bow')}><strong>Attack</strong></button></td>\r\n          <td onClick={() => props.editModal('ammo', null, null, {name: 'weapon', type: 'ACTIVE WEAPON', weapon: 'Long Bow'})}>Long Bow {renderAmmo('Long Bow')}</td>\r\n          <td style={renderNum('abD', null, true)}>{renderNum('abD') >= 0 ? '+' + (renderNum('abD')) : (renderNum('abD'))}</td>\r\n          <td>100 ft</td>\r\n          <td>{renderDamageDice('1d8')}<span style={renderNum('damageD', null, true)}>{renderNum('damageD') >= 0 ? '+' + (renderNum('damageD')) : (renderNum('damageD'))}</span> P</td>\r\n          <td>x3</td>\r\n          <td><span onMouseOver={e => renderTooltip(e, 'sneak attack')} onMouseOut={props.mouseOut}>Sneak Attack +2d6</span><span className='underline-hover' onClick={() => props.editModal('debilitating')}>, Debilitating Injury</span>{renderAmmo('Long Bow', true) === '+1 cunning arrow' ? <em onMouseOver={e => renderTooltip(e, 'cunning')} onMouseOut={props.mouseOut}>, cunning</em> : null}</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={canCast('standard')} onClick={() => renderDispatch('standard')}><strong>Attack</strong></button></td>\r\n          <td>Harpoon</td>\r\n          <td style={renderNum('abD', null, true)}>{renderNum('abS')-4 >= 0 ? '+' + (renderNum('abS')-4) : (renderNum('abS')-4) /*Not Proficient*/}, {renderNum('abD')-4 >= 0 ? '+' + (renderNum('abD')-4) : (renderNum('abD')-4) /*Not Proficient*/}</td>\r\n          <td>10 ft</td>\r\n          <td>{renderDamageDice('1d8')}<span style={renderNum('damageS', null, true)}>{renderNum('damageS') >= 0 ? '+' + (renderNum('damageS')) : (renderNum('damageS'))}</span> P</td>\r\n          <td>x3</td>\r\n          <td>If thrown, use the second attack bonus, not proficient<span onMouseOver={e => renderTooltip(e, 'sneak attack')} onMouseOut={props.mouseOut}>, Sneak Attack +2d6</span><span className='underline-hover' onClick={() => props.editModal('debilitating')}>, Debilitating Injury</span></td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={canCast('standard')} onClick={() => renderDispatch('standard')}><strong>Attack</strong></button></td>\r\n          <td>Net</td>\r\n          <td style={renderNum('abD', null, true)}>{renderNum('abD') >= 0 ? '+' + (renderNum('abD')) : (renderNum('abD'))}</td>\r\n          <td>Max 10 ft</td>\r\n          <td>entangled</td>\r\n          <td></td>\r\n          <td>Attack vs. Touch AC</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={canCast('standard')} onClick={() => renderDispatch('standard')}><strong>Attack</strong></button></td>\r\n          <td>Lasso</td>\r\n          <td style={renderNum('abD', null, true)}>{renderNum('abD')-4 >= 0 ? '+' + (renderNum('abD')-4) : (renderNum('abD')-4) /*Not Proficient*/}</td>\r\n          <td>10 ft</td>\r\n          <td>entangled</td>\r\n          <td></td>\r\n          <td>Attack vs. Touch AC, not proficient</td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={canCast('standard')} onClick={() => renderDispatch('standard', 'Revolver')}><strong>Attack</strong></button></td>\r\n          <td onClick={() => props.editModal('ammo', null, null, {name: 'weapon', type: 'ACTIVE WEAPON', weapon: 'Revolver'})}>Revolver {renderAmmo('Revolver')}</td>\r\n          <td style={renderNum('abD', null, true)} onMouseOver={e => renderTooltip(e, 'touch')} onMouseOut={props.mouseOut}>{renderNum('abD')-4 >= 0 ? '+' + (renderNum('abD')-4) : (renderNum('abD')-4)}*</td>\r\n          <td>20 ft</td>\r\n          <td>{renderDamageDice('1d8')}<span style={renderNum('damageD', null, true)}>{renderNum('damageD') >= 0 ? '+' + (renderNum('damageD')) : (renderNum('damageD'))}</span> B/P</td>\r\n          <td>x4</td>\r\n          <td>\r\n            <span onMouseOver={e => renderTooltip(e, 'misfire')} onMouseOut={props.mouseOut}>Misfire 5, </span>\r\n            <span onMouseOver={e => renderTooltip(e, 'capacity')} onMouseOut={props.mouseOut}>Capacity 6, </span>\r\n            <span onMouseOver={e => renderTooltip(e, 'Load Light')} onMouseOut={props.mouseOut}>Reload, </span>\r\n            <span onMouseOver={e => renderTooltip(e, 'sneak attack')} onMouseOut={props.mouseOut}>Sneak Attack +2d6, </span>\r\n            <span className='underline-hover' onClick={() => props.editModal('debilitating')}>Debilitating Injury</span>\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td><button className={canCast('full')} onClick={() => renderDispatch('full')}><strong>Attack</strong></button></td>\r\n          <td>Any Two Attacks</td>\r\n          <td style={renderNum('abS', null, true)}>See Text</td>\r\n          <td>-</td>\r\n          <td>See Weapons</td>\r\n          <td>-</td>\r\n          <td>Quick Draw feat lets you use any two weapons. First attack is made at full attack bonus, second attack has a -5 penalty</td>\r\n        </tr>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  const renderAdditionalDamage = (characterWeapon, weaponType) => {\r\n\t\t// NEW DATA\r\n\t\tlet handedStrengthModifier = 0\r\n\t\tlet bonusModifiers = []\r\n\r\n\t\t// STORED DATA\r\n\t\tlet bonuses = props.character_info.bonuses\r\n\r\n\t\t// CALCULATED DATA\r\n    let str = mod(props.character_info.ability_scores.strength)\r\n    let dex = mod(props.character_info.ability_scores.dexterity)\r\n\r\n\t\tbonuses.forEach(b => {\r\n\t\t\tif (b.statistic === \"Damage\" && _.capitalize(b.specific_statistic) === weaponType){\r\n\t\t\t\tbonusModifiers.push(b)\r\n\t\t\t} else if (b.statistic === \"Damage\" && b.specific_statistic === \"weapon\"){\r\n\t\t\t\tbonusModifiers.push(b)\r\n\t\t\t} else if (b.statistic === \"Damage\" && _.capitalize(b.specific_statistic) === \"Range\" && weaponType === \"Thrown\"){\r\n\t\t\t\tbonusModifiers.push(b)\r\n\t\t\t}\r\n\r\n\t\t})\r\n\r\n    if (weaponType === \"Melee\" || weaponType === \"Thrown\") {\r\n      switch(characterWeapon.equipped){\r\n        case \"Primary\":\r\n          break\r\n        case \"Off\":\r\n          if (str >= 0) {handedStrengthModifier = -Math.ceil(str/2)}\r\n\t\t\t\t\tbreak\r\n        case \"Two\":\r\n\t\t\t\t\tif (str >= 0) {handedStrengthModifier = Math.floor(str * 0.5)}\r\n          break\r\n        case \"Double\":\r\n          // account for both sides of the weapon\r\n\t\t\t\t\t// recursive! :D\r\n          return [renderAdditionalDamage({...characterWeapon, equipped: \"Primary\"}, weaponType), renderAdditionalDamage({...characterWeapon, equipped: \"Off\"}, weaponType)]\r\n        default:\r\n          break\r\n      }\r\n\r\n\t\t\tlet tempBonuses = bonusModifiers.reduce((agg, el) => (agg + el.bonus), 0)\r\n\r\n\t\t\t//HARDCODE\r\n\t\t\tif (characterWeapon.name === \"Harrow Card\"){tempBonuses += 1}\r\n\t\t\tif (characterWeapon.name === \"Fire Blast\"){tempBonuses += Math.floor(abilityScoreMod(\"constitution\")/2)}\r\n\t\t\tif ((props.character.name === \"Iyugi\" && characterWeapon.weapon.name === \"Dagger\") || (props.character.name === \"Natesse\" && characterWeapon.weapon.name === \"Scimitar\")){\r\n\t\t\t\ttempBonuses += dex\r\n\t\t\t\ttempBonuses -= str\r\n\t\t\t}\r\n\t\t\tif ((props.character.name === \"Natesse\" && characterWeapon.weapon.name === \"Scimitar\")){\r\n\t\t\t\ttempBonuses += 1\r\n\t\t\t}\r\n\t\t\t//HARDCODE\r\n\r\n\t\t\treturn `${pluser(str + handedStrengthModifier + tempBonuses)}`\r\n    } else if (weaponType === \"Range\"){\r\n\t\t\t\r\n\t\t\tlet tempBonuses = bonusModifiers.reduce((agg, el) => (agg + el.bonus), 0)\r\n\r\n\t\t\tif (tempBonuses > 0){\r\n\t\t\t\treturn `${pluser(tempBonuses)}`\r\n\t\t\t}\r\n      return \"\"\r\n    }\r\n  }\r\n\r\n\r\n  const renderNum = (type, strengthMultiplier, style, finesse, additionalDetails) => {\r\n    // type includes abS, abD, damageS, damageD\r\n    let bab = 0\r\n    const hc = props.character_info.hardcode\r\n    const n = props.character.name\r\n    const age = n === 'Maddox' && hc.age\r\n\r\n    let strength = props.character_info.ability_scores.strength\r\n      strength += age === 'Young' ? -2 : 0\r\n      strength += age === 'Middle' ? -1 : 0\r\n      strength += age === 'Old' ? -2 : 0\r\n      strength += age === 'Venerable' ? -3 : 0\r\n    let str = Math.floor((strength-10)/2)\r\n\r\n    let dexterity = props.character_info.ability_scores.dexterity\r\n      dexterity += age === 'Young' ? 2 : 0\r\n      dexterity += age === 'Middle' ? -1 : 0\r\n      dexterity += age === 'Old' ? -2 : 0\r\n      dexterity += age === 'Venerable' ? -3 : 0\r\n    let dex = Math.floor((dexterity-10)/2)\r\n\r\n    let size = props.character_info.size\r\n    let abSBonus = 0\r\n    let abDBonus = 0\r\n    let damageSBonus = 0\r\n    let damageDBonus = 0\r\n    let otherABS = 0\r\n    let otherABD = 0\r\n    let rage = hc.rage\r\n    let power = hc.power\r\n    let fd = hc.fd\r\n    let charge = hc.charge\r\n    let bullMinor = hc.minor === 'Bull - Minor'\r\n    let largeMorph = hc.major === 'Bull - Major' || hc.major === 'Condor - Major' || hc.major === 'Frog - Major' || hc.major === 'Squid - Major' || hc.major === 'Chameleon - Major'\r\n    let taalmon = n === \"Cedrick\"\r\n    let arcaneStrike = hc.arcane_strike\r\n    let enlarger = hc.enlarge\r\n    let reducer = hc.reduce\r\n    const activeMutagen = hc.activeMutagen ? hc.mutagen : false\r\n\r\n    bab = n === \"Merg\" ? 7 : bab\r\n    bab = n === \"Cedrick\" ? 7 : bab\r\n    bab = n === \"Persephone\" ? 3 : bab\r\n    bab = n === 'Maddox' ? 3 : bab\r\n    bab = n === 'Robby' ? 6 : bab\r\n    bab = n === 'Festus' ? 6 : bab\r\n    bab = n === 'Nettie' ? 5 : bab\r\n    bab = n === 'Grackle' ? 5 : bab\r\n    size = size === \"Huge\" ? -2 : size\r\n    size = size === \"Large\" ? -1 : size\r\n    size = size === \"Medium\" ? 0 : size\r\n    size = size === \"Small\" ? 1 : size\r\n    size = size === \"Tiny\" ? 2 : size\r\n    size = size === \"Diminutive\" ? 4 : size\r\n\r\n    // +2 to dex (+1 mod) from the wraps\r\n    otherABD += !!taalmon ? 1 : 0\r\n\r\n    const ogABS = bab + size + str + otherABS\r\n    const ogABD = bab + size + dex + otherABD\r\n    const ogDS = str\r\n    const ogDD = 0\r\n    // STRENGTH FIRST\r\n    abSBonus += !!bullMinor ? 1: 0\r\n    damageSBonus += !!bullMinor ? 1: 0\r\n\r\n    abSBonus += !!largeMorph ? 2: 0\r\n    damageSBonus += !!largeMorph ? 2: 0\r\n    // +4 to strength (+2 mod) -2 to dexterity (-1 mod), size change is calculated above\r\n    abDBonus -= !!largeMorph ? -1 : 0\r\n\r\n    if (strengthMultiplier){\r\n      damageSBonus = Math.floor(damageSBonus * strengthMultiplier + (str * 0.5))\r\n    }\r\n\r\n    // OTHER BONUSES NEXT\r\n\r\n    abSBonus += !!rage ? 2 :0\r\n    damageSBonus += !!rage ? 2 :0\r\n\r\n    abSBonus += !!power ? -2 : 0\r\n    damageSBonus += !!power ? 4 : 0\r\n\r\n    abSBonus += !!charge ? 2 : 0\r\n    abDBonus += !!charge && finesse ? 2 : 0\r\n\r\n    abSBonus += !!fd ? -4 : 0\r\n    abDBonus += !!fd ? -4 : 0\r\n\r\n    damageSBonus += arcaneStrike ? 2 : 0\r\n    damageDBonus += arcaneStrike ? 2 : 0\r\n\r\n    // +2 to str, -2 Dex, -1 to attacks\r\n    abDBonus += enlarger ? -2 : 0\r\n    damageSBonus += enlarger ? 1 : 0\r\n    // dex doesn't effect damage\r\n    // damageDBonus += enlarger ? -1 : 0\r\n\r\n    // -2 to str, +2 Dex, +1 to attacks\r\n    abDBonus += reducer ? 2 : 0\r\n    damageSBonus += reducer ? -1 : 0\r\n    // dex doesn't effect damage\r\n    // damageDBonus += reducer ? 1 : 0\r\n\r\n    // +4 to str\r\n    abSBonus += activeMutagen === 'strength' ? 2 : 0\r\n    damageSBonus += activeMutagen === 'strength' ? 2 : 0\r\n\r\n    // +4 to dex\r\n    abDBonus += activeMutagen === 'dexterity' ? 2 : 0\r\n\r\n    if (additionalDetails === 'bomb'){\r\n      damageDBonus += activeMutagen === 'strength' ? -1 : 0\r\n    }\r\n\r\n    if (type === 'abS'){\r\n      if (!style){\r\n        return ogABS + abSBonus\r\n      } else {\r\n        return calcStyle(ogABS, ogABS + abSBonus)\r\n      }\r\n    } else if (type === 'damageS'){\r\n      if (!style){\r\n        return ogDS + damageSBonus\r\n      } else {\r\n        return calcStyle(ogDS, ogDS + damageSBonus)\r\n      }\r\n    } else if (type === 'abD'){\r\n      if (!style){\r\n        return ogABD + abDBonus\r\n      } else {\r\n        return calcStyle(ogABD, ogABD + abDBonus)\r\n      }\r\n    } else if (type === 'damageD'){\r\n      if (!style){\r\n        return ogDD + damageDBonus\r\n      } else {\r\n        return calcStyle(ogDD, ogDD + damageDBonus)\r\n      }\r\n    }\r\n  }\r\n\r\n  const calcStyle = (ogMod, mod) => {\r\n    if (ogMod > mod){\r\n      return {color: 'maroon'}\r\n    } else if (ogMod < mod){\r\n      return {color: 'green'}\r\n    } else {\r\n      return {color: 'black'}\r\n    }\r\n  }\r\n\r\n  const renderDamageDice = (dice, sizeChange) => {\r\n    let size = props.character.race.size || props.character_info.size\r\n    if (sizeChange){\r\n      switch(sizeChange){\r\n        case \"1\":\r\n          size = size === \"Medium\" ? \"Large\" : size\r\n          break\r\n        case \"-1\":\r\n          size = size === \"Medium\" ? \"Small\" : size\r\n          break\r\n        default:\r\n          break\r\n      }\r\n    }\r\n    let newDice = dice\r\n    if (size === \"Large\"){\r\n      switch(dice){\r\n        case '1d3':\r\n          newDice = '1d4'\r\n          break\r\n        case '1d4':\r\n          newDice = '1d6'\r\n          break\r\n        case '1d6':\r\n          newDice = '1d8'\r\n          break\r\n        case '1d8':\r\n          newDice = '2d6'\r\n          break\r\n        case '1d10':\r\n          newDice = '2d8'\r\n          break\r\n        default:\r\n          break\r\n      }\r\n    } else if (size === 'Small'){\r\n      switch(dice){\r\n        case '1d3':\r\n          newDice = '1d2'\r\n          break\r\n        case '1d4':\r\n          newDice = '1d3'\r\n          break\r\n        case '1d6':\r\n          newDice = '1d4'\r\n          break\r\n        case '1d8':\r\n          newDice = '1d6'\r\n          break\r\n        case '1d10':\r\n          newDice = '1d8'\r\n          break\r\n        case '2d4':\r\n          newDice = '1d6'\r\n          break\r\n        default:\r\n          break\r\n      }\r\n    } else if (size === 'Tiny'){\r\n      switch(dice){\r\n        case '1d3':\r\n          newDice = '1'\r\n          break\r\n        case '1d4':\r\n          newDice = '1d2'\r\n          break\r\n        case '1d6':\r\n          newDice = '1d3'\r\n          break\r\n        case '1d8':\r\n          newDice = '1d4'\r\n          break\r\n        case '1d10':\r\n          newDice = '1d6'\r\n          break\r\n        default:\r\n          break\r\n      }\r\n    }\r\n    return newDice\r\n  }\r\n\r\n  const renderTooltip = (e, name) => {\r\n    let comment = null\r\n    if (name === \"Load Light\"){\r\n      comment = 'Loading is a move action that provokes attacks of opportunity.'\r\n    } else if (name === 'PBS'){\r\n      comment = '+1 to Attack and Damage Rolls if target is within 30 ft'\r\n    } else if (name === 'ominous'){\r\n      comment = 'When this weapon confirms a critical hit, the target is shaken for 1 minute (DC 13 Will negates); if the weapon’s critical multiplier is greater than x2, this condition lasts 1 additional minute per multiple over x2. A creature that gains the shaken condition from an ominous weapon cannot gain that condition again from the same weapon for 24 hours.'\r\n    } else if (name === 'grab'){\r\n      comment = 'When this attack hits a creature, you may attempt to grapple that creature as a free action, provoking an AoO. The creature must be your size or smaller. If you succeed, you deal constrict damage. Each subsequent round, if you succeed on the grapple check, the creature takes the constrict damage.'\r\n    } else if (name === 'flaming'){\r\n      comment = 'Upon command, a flaming weapon is sheathed in fire that deals an extra 1d6 points of fire damage on a successful hit. The fire does not harm the wielder. The effect remains until another command is given.'\r\n    } else if (name === 'bane'){\r\n      comment = 'A bane weapon excels against certain foes. Against a designated foe, the weapon’s enhancement bonus is +2 better than its actual bonus. It also deals an extra 2d6 points of damage against the foe.'\r\n    } else if (name === 'unholy'){\r\n      comment = 'An unholy weapon is imbued with unholy power. This power makes the weapon evil-aligned and thus bypasses the corresponding damage reduction. It deals an extra 2d6 points of damage against all creatures of good alignment. It bestows one permanent negative level on any good creature attempting to wield it. The negative level remains as long as the weapon is in hand and disappears when the weapon is no longer wielded. This negative level cannot be overcome in any way (including restoration spells) while the weapon is wielded.'\r\n    } else if (name === 'brace'){\r\n      comment = 'If you use a readied action to set a brace weapon against a charge, you deal double damage on a successful hit against a charging creature.'\r\n    } else if (name === 'sneak attack'){\r\n      comment = 'Target must be flanked or be denied their Dexterity bonus to AC. Ranged attacks must be within 30 ft. Target cannot have total concealment.'\r\n    } else if (name === 'misfire'){\r\n      comment = 'If the natural result of your attack roll falls within a firearm’s misfire value, that shot misses, even if you would have otherwise hit the target. When a firearm misfires, it gains the broken condition. Normal broken conditions, and misfire value increases by 4.'\r\n    } else if (name === 'capacity'){\r\n      comment = 'A firearm’s capacity is the number of shots it can hold at one time. When making a full-attack action, you may fire a firearm as many times in a round as you have attacks, up to this limit, unless you can reload the weapon as a swift or free action while making a full-attack action'\r\n    } else if (name === 'touch'){\r\n      comment = 'Resolves against touch AC'\r\n    } else if (name === 'shock'){\r\n      comment = 'Upon command, a shock weapon is sheathed in crackling electricity that deals an extra 1d6 points of electricity damage on a successful hit. The electricity does not harm the wielder. The effect remains until another command is given.'\r\n    } else if (name === 'returning'){\r\n      comment = 'This special ability can only be placed on a weapon that can be thrown. A returning weapon flies through the air back to the creature that threw it. It returns to the thrower just before the creature’s next turn (and is therefore ready to use again in that turn). Catching a returning weapon when it comes back is a free action. If the character can’t catch it, or if the character has moved since throwing it, the weapon drops to the ground in the square from which it was thrown.'\r\n    } else if (name === 'cunning'){\r\n      comment = 'This special ability allows a weapon to find chinks in a foe’s defenses using the wielder’s knowledge of the target. Whenever the weapon’s attack is a critical threat, the wielder gains a +4 bonus on the confirmation roll if she has 5 or more ranks in a Knowledge skill that would be used to identify the target’s creature type (such as Knowledge [planes] for an outsider opponent), or a +6 bonus instead if she has 15 or more ranks.'\r\n    } else if (name === 'crazed'){\r\n      comment = 'On a critical hit, deal an additional +3d8 cold damage instead of +1d4. On a critical failure, the weapon overloads, dealing 4d10+4 damage to you and the weapon is destroyed. DC 20 Reflex save for half damage. If you fail the saving throw, you hand is locked up by ice and cold for 1 hour. -4 to Dexterity checks and attacks with that hand.'\r\n    } else if (name === 'Splash'){\r\n      comment = 'A splash weapon is a ranged weapon that breaks on impact, splashing or scattering its contents over its target and nearby creatures or objects. To attack with a splash weapon, make a ranged touch attack against the target. Thrown splash weapons require no weapon proficiency, so you don’t take the –4 nonproficiency penalty. A hit deals direct hit damage to the target, and splash damage to all creatures within 5 feet of the target. If the target is Large or larger, you choose one of its squares and the splash damage affects creatures within 5 feet of that square. Splash weapons cannot deal precision-based damage (such as the damage from the rogue’s sneak attack class feature).\\n\\nYou can instead target a specific grid intersection. Treat this as a ranged attack against AC 5. However, if you target a grid intersection, creatures in all adjacent squares are dealt the splash damage, and the direct hit damage is not dealt to any creature. You can’t target a grid intersection occupied by a creature, such as a Large or larger creature; in this case, you’re aiming at the creature.\\n\\nIf you miss the target (whether aiming at a creature or a grid intersection), roll 1d8. This determines the misdirection of the throw, with 1 falling short (off-target in a straight line toward the thrower), and 2 through 8 rotating around the target creature or grid intersection in a clockwise direction. Then, count a number of squares in the indicated direction equal to the range increment of the throw. After you determine where the weapon landed, it deals splash damage to all creatures in that square and in all adjacent squares.'\r\n    }\r\n    if (comment){\r\n      props.renderTooltip(e, comment)\r\n    }\r\n  }\r\n\r\n  const polymorph = () => {\r\n    const major = props.character_info.hardcode.major\r\n    switch(major){\r\n      case 'Bull - Major':\r\n        return (\r\n          <React.Fragment>\r\n            <tr>\r\n              <td><button className={canCast('standard')} onClick={() => renderDispatch('standard')}><strong>Attack</strong></button></td>\r\n              <td>Gore</td>\r\n              <td style={renderNum('abS', null, true)}>+{renderNum('abS')}</td>\r\n              <td>-</td>\r\n              <td>1d8+<span style={renderNum('damageS', null, true)}>{renderNum('damageS', 1.5)}</span> P</td>\r\n              <td>x2</td>\r\n              <td>{props.character_info.hardcode.combat === 'Chameleon - Combat' && 'if hidden from attacker, +4 to attack roll'}</td>\r\n            </tr>\r\n            <tr>\r\n              <td><button className={canCast('full')} onClick={() => renderDispatch('full', 'charge')}><strong>Attack</strong></button></td>\r\n              <td>Powerful Charge</td>\r\n              <td style={renderNum('abS', null, true)}>+{renderNum('abS')+2+1 /*Ta'al'mon wraps*/}</td>\r\n              <td>-</td>\r\n              <td>2d8+<span style={renderNum('damageS', null, true)}>{renderNum('damageS')+1 /*Ta'al'mon wraps*/}</span> P</td>\r\n              <td>x2</td>\r\n              <td>Move up to {props.character.race.speed * 2} ft, make Attack. +2 to attack, -2 to AC{props.character_info.hardcode.combat === 'Chameleon - Combat' && ', if hidden from attacker, +4 to attack roll'}</td>\r\n            </tr>\r\n            <tr>\r\n              <td><button className={canCast('full')} onClick={() => renderDispatch('full', 'charge')}><strong>Attack</strong></button></td>\r\n              <td>Trample</td>\r\n              <td>-</td>\r\n              <td>-</td>\r\n              <td>1d8+<span style={renderNum('damageS', null, true)}>{renderNum('damageS', 1.5)+1 /*Ta'al'mon wraps*/}</span> B</td>\r\n              <td>-</td>\r\n              <td>Overrun target(s) Medium or smaller. Targets get AoO (-4 penalty), or can forgo to make a DC {10 + 3 + renderNum('damage')} Reflex save for half damage{props.character_info.hardcode.combat === 'Chameleon - Combat' && ', if hidden from attacker, +4 to attack roll'}</td>\r\n            </tr>\r\n          </React.Fragment>\r\n        )\r\n      case 'Condor - Major':\r\n        return (\r\n          <React.Fragment>\r\n            <tr>\r\n              <td><button className={canCast('standard')} onClick={() => renderDispatch('standard')}><strong>Attack</strong></button></td>\r\n              <td>Talon</td>\r\n              <td style={renderNum('abS', null, true)}>+{renderNum('abS')+1 /*Ta'al'mon wraps*/}</td>\r\n              <td>-</td>\r\n              <td>1d8+<span style={renderNum('damageS', null, true)}>{renderNum('damageS')+1 /*Ta'al'mon wraps*/}</span> S</td>\r\n              <td>x2</td>\r\n              <td>{props.character_info.hardcode.combat === 'Chameleon - Combat' && 'if hidden from attacker, +4 to attack roll'}</td>\r\n            </tr>\r\n            <tr>\r\n              <td><button className={canCast('standard')} onClick={() => renderDispatch('standard')}><strong>Attack</strong></button></td>\r\n              <td>Bite</td>\r\n              <td style={renderNum('abS', null, true)}>+{renderNum('abS')}</td>\r\n              <td>-</td>\r\n              <td>1d8+<span style={renderNum('damageS', null, true)}>{renderNum('damageS')}</span> P</td>\r\n              <td>x2</td>\r\n              <td>{props.character_info.hardcode.combat === 'Chameleon - Combat' && 'if hidden from attacker, +4 to attack roll'}</td>\r\n            </tr>\r\n            <tr>\r\n              <td><button className={canCast('full')} onClick={() => renderDispatch('full')}><strong>Attack</strong></button></td>\r\n              <td>2 Talons, Bite</td>\r\n              <td style={renderNum('abS', null, true)}>+{renderNum('abS')+1 /*Ta'al'mon wraps*/}/+{renderNum('abS')+1 /*Ta'al'mon wraps*/}/+{renderNum('abS')}</td>\r\n              <td>-</td>\r\n              <td>1d8+<span style={renderNum('damageS', null, true)}>{renderNum('damageS')+1 /*Ta'al'mon wraps*/}</span> S, 1d8+<span style={renderNum('damageS', null, true)}>{renderNum('damageS')+1 /*Ta'al'mon wraps*/}</span> S, 1d8+<span style={renderNum('damageS', null, true)}>{renderNum('damageS')}</span> P</td>\r\n              <td>x2</td>\r\n              <td>{props.character_info.hardcode.combat === 'Chameleon - Combat' && 'if hidden from attacker, +4 to attack roll'}</td>\r\n            </tr>\r\n          </React.Fragment>\r\n        )\r\n      case 'Squid - Major':\r\n        return (\r\n          <React.Fragment>\r\n            <tr>\r\n              <td><button className={canCast('standard')} onClick={() => renderDispatch('standard')}><strong>Attack</strong></button></td>\r\n              <td>Bite</td>\r\n              <td style={renderNum('abS', null, true)}>+{renderNum('abS')}</td>\r\n              <td>-</td>\r\n              <td>1d8+<span style={renderNum('damageS', null, true)}>{renderNum('damageS')}</span> P</td>\r\n              <td>x2</td>\r\n              <td>{props.character_info.hardcode.combat === 'Chameleon - Combat' && 'if hidden from attacker, +4 to attack roll'}</td>\r\n            </tr>\r\n            <tr>\r\n              <td><button className={canCast('standard')} onClick={() => renderDispatch('standard')}><strong>Attack</strong></button></td>\r\n              <td>Tentacle</td>\r\n              <td style={renderNum('abS', null, true)}>+{renderNum('abS')+1-5 /*Ta'al'mon wraps && Secondary attack*/}</td>\r\n              <td>-</td>\r\n              <td>1d8+<span style={renderNum('damageS', null, true)}>{renderNum('damageS')+1 /*Ta'al'mon wraps*/}</span> B</td>\r\n              <td>x2</td>\r\n              <td>Secondary Natural Attack, <em onMouseOver={e => renderTooltip(e, 'grab')} onMouseOut={props.mouseOut}>grab</em>, constrict (2d6+5){props.character_info.hardcode.combat === 'Chameleon - Combat' && ', if hidden from attacker, +4 to attack roll'}</td>\r\n            </tr>\r\n            <tr>\r\n              <td><button className={canCast('full')} onClick={() => renderDispatch('full')}><strong>Attack</strong></button></td>\r\n              <td>Bite, 2 Tentacles</td>\r\n              <td style={renderNum('abS', null, true)}>+{renderNum('abS')}/+{renderNum('abS')+1-5 /*Ta'al'mon wraps && secondary attack*/}/+{renderNum('abS')+1-5 /*Ta'al'mon wraps && secondary attack*/}</td>\r\n              <td>-</td>\r\n              <td>1d8+<span style={renderNum('damageS', null, true)}>{renderNum('damageS')}</span> P, 1d8+<span style={renderNum('damageS', null, true)}>{renderNum('damageS')+1 /*Ta'al'mon wraps*/}</span> S, 1d8+<span style={renderNum('damageS', null, true)}>{renderNum('damageS')+1 /*Ta'al'mon wraps*/}</span> S</td>\r\n              <td>x2</td>\r\n              <td>Tentacles: Secondary Natural Attacks, <em onMouseOver={e => renderTooltip(e, 'grab')} onMouseOut={props.mouseOut}>grab</em>, constrict (2d6+5){props.character_info.hardcode.combat === 'Chameleon - Combat' && ', if hidden from attacker, +4 to attack roll'}</td>\r\n            </tr>\r\n          </React.Fragment>\r\n        )\r\n      case 'Chameleon - Major':\r\n        return (\r\n          <React.Fragment>\r\n            <tr>\r\n              <td><button className={canCast('standard')} onClick={() => renderDispatch('standard')}><strong>Attack</strong></button></td>\r\n              <td>Bite</td>\r\n              <td style={renderNum('abS', null, true)}>+{renderNum('abS')}</td>\r\n              <td>-</td>\r\n              <td>1d8+<span style={renderNum('damageS', null, true)}>{renderNum('damageS')}</span> P</td>\r\n              <td>x2</td>\r\n              <td>{props.character_info.hardcode.combat === 'Chameleon - Combat' && 'if hidden from attacker, +4 to attack roll'}</td>\r\n            </tr>\r\n            <tr>\r\n              <td><button className={canCast('standard')} onClick={() => renderDispatch('standard')}><strong>Attack</strong></button></td>\r\n              <td>Tongue</td>\r\n              <td style={renderNum('abS', null, true)}>+{renderNum('abS')-5 /*Secondary attack*/}/+{renderNum('abD')}</td>\r\n              <td>15 ft.</td>\r\n              <td>1d8+<span style={renderNum('damageS', null, true)}>{renderNum('damageS')+1 /*Ta'al'mon wraps*/}</span> B/ grab</td>\r\n              <td>x2</td>\r\n              <td>First: Secondary Natural Attack, Second: resolves against touch AC, <em onMouseOver={e => renderTooltip(e, 'grab')} onMouseOut={props.mouseOut}>grab</em>{props.character_info.hardcode.combat === 'Chameleon - Combat' && ', if hidden from attacker, +4 to attack roll'}</td>\r\n            </tr>\r\n            <tr>\r\n              <td><button className={canCast('full')} onClick={() => renderDispatch('full')}><strong>Attack</strong></button></td>\r\n              <td>Bite, Tongue</td>\r\n              <td style={renderNum('abS', null, true)}>+{renderNum('abS')}/+{renderNum('abS')-5 /*secondary attack*/}</td>\r\n              <td>-</td>\r\n              <td>1d8+<span style={renderNum('damageS', null, true)}>{renderNum('damageS')}</span> P, 1d8+<span style={renderNum('damageS', null, true)}>{renderNum('damageS')}</span> B</td>\r\n              <td>x2</td>\r\n              <td>Tongue: Secondary Natural Attack{props.character_info.hardcode.combat === 'Chameleon - Combat' && ', if hidden from attacker, +4 to attack roll'}</td>\r\n            </tr>\r\n          </React.Fragment>\r\n        )\r\n      default:\r\n        let sc = props.character_info.hardcode.combat === 'Squid - Combat'\r\n        return (\r\n          <React.Fragment>\r\n            <tr>\r\n              <td><button className={canCast('standard')} onClick={() => renderDispatch('standard')}><strong>Attack</strong></button></td>\r\n              <td>Shifter Claws</td>\r\n              <td style={renderNum('abS', null, true)}>+{renderNum('abS')+1+1 /* Weapon Focus (shifter claws) && Ta'al'mon wraps*/}</td>\r\n              <td>-</td>\r\n              <td>{renderDamageDice('1d10')}+<span style={renderNum('damageS', null, true)}>{renderNum('damageS')+1 /*Ta'al'mon wraps*/}</span> S {renderFrogCombat()}</td>\r\n              <td>x2</td>\r\n              <td>Ignore DR/silver & DR/cold iron, <em onMouseOver={e => renderTooltip(e, 'ominous')} onMouseOut={props.mouseOut}>ominous</em>{props.character_info.hardcode.combat === 'Chameleon - Combat' && ', if hidden from attacker, +4 to attack roll'}</td>\r\n            </tr>\r\n            <tr>\r\n              <td><button className={canCast('full')} onClick={() => renderDispatch('full')}><strong>Attack</strong></button></td>\r\n              <td>Shifter Claws{sc ? ', 2 Tentacles' : null}</td>\r\n              <td style={renderNum('abS', null, true)}>+{renderNum('abS')+1+1 /* Weapon Focus (shifter claws) && Ta'al'mon wraps*/}/+{renderNum('abS')+1+1-5 /* Weapon Focus (shifter claws) && Ta'al'mon wraps*/}{sc ? `/+${renderNum('abS')-5}/+${renderNum('abS')-5}`/*tentacle attacks attack at full attack bonus*/ : null}</td>\r\n              <td>-</td>\r\n              <td>{renderDamageDice('1d10')}+<span style={renderNum('damageS', null, true)}>{renderNum('damageS')+1 /*Ta'al'mon wraps*/} S{sc ? `/${renderDamageDice('1d4')}+${renderNum('damageS')} B`/*tentacle attacks attack at full attack bonus*/ : null} </span> {renderFrogCombat()}</td>\r\n              <td>x2</td>\r\n              <td>Ignore DR/silver & DR/cold iron, <em onMouseOver={e => renderTooltip(e, 'ominous')} onMouseOut={props.mouseOut}>ominous</em>{sc ? ', 2 Tentacle attacks': null }{props.character_info.hardcode.combat === 'Chameleon - Combat' && ', if hidden from attacker, +4 to attack roll'}</td>\r\n            </tr>\r\n            <tr>\r\n              <td><button className={canCast('standard')} onClick={() => renderDispatch('standard')}><strong>Attack</strong></button></td>\r\n              <td onClick={() => props.editModal('ammo', null, null, {name: 'weapon', type: 'ACTIVE WEAPON', weapon: '+1 Underwater Light Crossbow'})}><em>+1 Underwater Light Crossbow</em> {renderAmmo('+1 Underwater Light Crossbow')}</td>\r\n              <td style={renderNum('abD', null, true)}>+{renderNum('abD')+1}</td>\r\n              <td>80 ft/20 ft</td>\r\n              <td>{renderDamageDice('1d8')}+<span style={renderNum('damageD', null, true)}>{renderNum('damageD')+1}</span> B</td>\r\n              <td>x2</td>\r\n              <td>Use second range number if underwater.<span onMouseOver={e => renderTooltip(e, 'Load Light')} onMouseOut={props.mouseOut}> Load*</span>{props.character_info.hardcode.combat === 'Chameleon - Combat' && ', if hidden from attacker, +4 to attack roll'}</td>\r\n            </tr>\r\n            <tr>\r\n              <td><button className={canCast('standard')} onClick={() => renderDispatch('standard')}><strong>Attack</strong></button></td>\r\n              <td>Chakram</td>\r\n              <td style={renderNum('abD', null, true)}>+{renderNum('abD')-4/*Not Proficient*/}, +{renderNum('abS')-4-1/*Not Proficient, melee Chakram*/}</td>\r\n              <td>30 ft</td>\r\n              <td>{renderDamageDice('1d8')}+<span style={renderNum('damageS', null, true)}>{renderNum('damageS')}</span> S</td>\r\n              <td>x2</td>\r\n              <td>not proficient, if used as a melee weapon (second numbers), make a DC 15 Reflex save or cut yourself (1d6 slashing){props.character_info.hardcode.combat === 'Chameleon - Combat' && ', if hidden from attacker, +4 to attack roll'}</td>\r\n            </tr>\r\n            <tr>\r\n              <td><button className={canCast('standard')} onClick={() => renderDispatch('standard')}><strong>Attack</strong></button></td>\r\n              <td>Unarmed</td>\r\n              <td style={renderNum('abS', null, true)}>+{renderNum('abS')+1 /*Ta'al'mon wraps*/}</td>\r\n              <td>-</td>\r\n              <td><span style={renderNum('damageS', null, true)}>{renderNum('damageS')+1 /*Ta'al'mon wraps*/}</span> B</td>\r\n              <td>x2</td>\r\n              <td>Non-lethal, <em onMouseOver={e => renderTooltip(e, 'ominous')} onMouseOut={props.mouseOut}>ominous</em>{props.character_info.hardcode.combat === 'Chameleon - Combat' && ', if hidden from attacker, +4 to attack roll'}</td>\r\n            </tr>\r\n          </React.Fragment>\r\n        )\r\n    }\r\n  }\r\n\r\n  const sparks = () => {\r\n    let active = props.character_info.hardcode.eBloodActive\r\n    return active ? '+1d6 elec ' : null\r\n  }\r\n\r\n  const renderFrogCombat = () => {\r\n    const fc = props.character_info.hardcode.frogCombat\r\n    switch(fc){\r\n      case 'Sickened':\r\n        return '(Sickened for 1 round)'\r\n      case 'Acid Damage':\r\n        return '+1d3 acid'\r\n      case 'Silent Image':\r\n        return (<span>(Affected by <em className='underline-hover' onClick={() => props.editModal('spell', null, 26)}>silent image</em> for 1 round)</span>)\r\n      default:\r\n        return null\r\n    }\r\n  }\r\n\r\n  const renderAmmo = (weapon, justString) => {\r\n    // let weaponAmmo = props.character_info.hardcode.weaponAmmo.find(wa => wa.weapon === weapon)\r\n    let ammo = props.character.character_weapons.find(a => a.id === weapon.character_weapon_ammunition_id)\r\n\r\n    if (justString){\r\n      return ammo.name\r\n    }\r\n    let color = 'black'\r\n    color = ammo.ammunition_amount <= 15 ? 'dark brown' : color\r\n    color = ammo.ammunition_amount <= 10 ? 'maroon' : color\r\n    color = ammo.ammunition_amount <= 5 ? 'red' : color\r\n    color = ammo.ammunition_amount <= 0 ? 'grey' : color\r\n    return <>{ammo.name || ammo.weapon.name} <span style={{color}}>(x{ammo.ammunition_amount ?? 0})</span></>\r\n  }\r\n\r\n  const renderMobileAttack = (attack) => {\r\n    let clickEvent = () => renderDispatch(attack.action)\r\n    if (attack.action === null){\r\n      if (attack.toggle){\r\n        clickEvent = () => attack.toggle[1](!(referenceState(attack.toggle[0])))\r\n      }\r\n    }\r\n\r\n    let attackType = attack.attackBonus === \"Strength\" ? \"abS\" : \"abD\"\r\n    let damageType = attack.damageType === \"Strength\" ? \"damageS\" : \"damageD\"\r\n\r\n    if ((referenceState(attack.displayIfTrue)) === false){\r\n      return null\r\n    }\r\n    return (\r\n      <tr>\r\n        <td style={{fontSize: '12px'}}><button className={canCast(attack.action)} onClick={clickEvent}><strong>{attack.buttonName}</strong></button></td>\r\n        <td>{attack.name}</td>\r\n        {attack.attackBonus ? <td style={renderNum(attackType, null, true)}>{renderNum(attackType)+attack.hardcodeAttackBonus >= 0 ? '+' + (renderNum(attackType)+attack.hardcodeAttackBonus) : (renderNum(attackType)+attack.hardcodeAttackBonus)}</td> : <td></td>}\r\n        <td>{renderDamageDice(attack.damageDice)}<span style={renderNum(damageType, attack.strengthMultiplier, true)}>{renderNum(damageType, attack.strengthMultiplier, null, attack.finesse, attack.additionalDetails)+attack.hardcodeDamageBonus >= 0 ? '+' + (renderNum(damageType, attack.strengthMultiplier, null, attack.finesse, attack.additionalDetails)+attack.hardcodeDamageBonus) : (renderNum(damageType, attack.strengthMultiplier, null, attack.finesse, attack.additionalDetails)+attack.hardcodeDamageBonus)}</span> {attack.damageType}</td>\r\n        <td style={{fontSize: '12px', border: '2px solid black', borderRadius: '0.5em'}} onClick={() => props.editSidebar(true, 'bottom', 'attack', attack)}>See More</td>\r\n      </tr>\r\n    )\r\n  }\r\n\r\n  if (localStorage.computer === \"true\"){\r\n    return (\r\n      <section>\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>Action</th>\r\n              <th>Weapon</th>\r\n              <th>Attack Bonus</th>\r\n              <th>Range</th>\r\n              <th>Damage</th>\r\n              <th>Critical</th>\r\n              <th>Special</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n          {renderCharacter(props.character.name)}\r\n          </tbody>\r\n        </table>\r\n      </section>\r\n    )\r\n  } else if (localStorage.computer === \"false\"){\r\n    let attacks = renderCharacter(props.character.name)\r\n    return (\r\n      <section className='mobile-tab-selected-tab-container shadow' style={{textAlign: 'center'}}>\r\n        <table style={{ width: '98%', marginLeft: '1%', marginRight: '1%', fontSize: '10px'}}>\r\n          <thead>\r\n            <tr>\r\n              <th style={{width: '20%'}}>Action</th>\r\n              <th style={{width: '20%'}}>Weapon</th>\r\n              <th style={{width: '15%'}}>Bonus</th>\r\n              <th style={{width: '20%'}}>Damage</th>\r\n              <th style={{width: '25%'}}></th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {renderCharacter(props.character.name)}\r\n          </tbody>\r\n        </table>\r\n      </section>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n    character: state.character,\r\n    character_info: state.character_info,\r\n\t\tsettings: state.settings\r\n  }\r\n}\r\n\r\nconst mapDispatchtoProps = dispatch => {\r\n  return {\r\n    tooltip: (message, target) => dispatch({type: \"TOOLTIP\", message, target}),\r\n    dispatch\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps, mapDispatchtoProps)(Attacks)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { pluser } from '../../../utils/fuf'\r\nimport { baseAttackBonus, pluserAB, combatManeuvers } from '../../../utils/calculations/attack_bonus'\r\nimport { modalAction, diceAction } from '../../../utils/action_creator/popups'\r\n\r\nconst CombatManeuver = props => {\r\n\r\n  const swinging = props.character.name === 'Robby' ? ', Swinging Reposition' : null\r\n  const hc = props.characterInfo.hardcode\r\n  const name = props.character.name\r\n  const largeMorph = ['Bull - Major', 'Condor - Major', 'Frog - Major', 'Squid - Major', 'Chameleon - Major'].includes(hc.major)\r\n  let rage = hc.rage\r\n  let bullMinor = hc.minor === 'Bull - Minor'\r\n  let charge = hc.charge\r\n  let fd = hc.fd\r\n  let power = hc.power\r\n  const enlarger = hc.enlarge\r\n  const reducer = hc.reduce\r\n  const activeMutagen = hc.activeMutagen ? hc.mutagen : false\r\n\r\n  const actions = props.characterInfo.actions\r\n\r\n\r\n\r\n  const bab = () => {\r\n    let bab = 0\r\n    props.characterInfo.classes.forEach(cl => {\r\n      const klass = props.classes.find(c => c.id === cl.id)\r\n      bab += (cl.level * renderBAB(klass.hit_die))\r\n    })\r\n    return bab\r\n  }\r\n\r\n  const str = () => {\r\n    let mod = Math.floor( ( props.characterInfo.ability_scores.strength - 10 ) / 2)\r\n    mod += !!largeMorph ? 2 : 0\r\n    mod += !!bullMinor ? 1 : 0\r\n\r\n    mod += activeMutagen === 'strength' ? 2 : 0\r\n    return mod\r\n  }\r\n\r\n  const dex = () => {\r\n    let mod = Math.floor( ( props.characterInfo.ability_scores.dexterity - 10 ) / 2)\r\n    mod += !!largeMorph ? -1 : 0\r\n    mod += name === 'Cedrick' ? 1 : 0\r\n    mod += enlarger ? -1 : 0\r\n    mod += reducer ? 1 : 0\r\n\r\n    mod += activeMutagen === 'dexterity' ? 2 : 0\r\n    return mod\r\n  }\r\n\r\n  const renderBAB = (hd) => {\r\n    switch (hd){\r\n      case 6:\r\n        return 0.5;\r\n      case 8:\r\n        return 0.75;\r\n      case 10:\r\n        return 1;\r\n      case 12:\r\n        return 1;\r\n      default:\r\n        return 1;\r\n    }\r\n  }\r\n\r\n  const size = () => {\r\n    let size = props.characterInfo.size\r\n    switch(size){\r\n      case \"Fine\":\r\n        return -8;\r\n      case \"Diminutive\":\r\n        return -4;\r\n      case \"Tiny\":\r\n        return -2;\r\n      case \"Small\":\r\n        return -1;\r\n      case \"Large\":\r\n        return 1;\r\n      case \"Huge\":\r\n        return 2;\r\n      case \"Gargantuan\":\r\n        return 4;\r\n      case \"Colossal\":\r\n        return 8;\r\n      default:\r\n        return 0;\r\n    }\r\n  }\r\n\r\n  const cmbBonuses = (cm) => {\r\n    let mod = 0\r\n    if (name === 'Cedrick' && cm === 'Bull Rush'){\r\n      mod += 2\r\n    }\r\n    return mod\r\n  }\r\n\r\n  const cmdBonuses = (cm) => {\r\n    let mod = 0\r\n    if (name === 'Cedrick' && cm === 'Bull Rush'){\r\n      mod += 2\r\n    }\r\n    if (name === 'Merg'){\r\n      mod += 2\r\n    }\r\n    return mod\r\n  }\r\n\r\n  const calcCMD = (name, style) => {\r\n    let cmb = calcCMB(null, false, true)\r\n    let cmd = 10 + cmb + dex()\r\n\r\n    cmd += cmdBonuses(name)\r\n\r\n    let ogCMD = cmd\r\n\r\n    if (style){\r\n      if (ogCMD > cmd){\r\n        return {color: 'maroon'}\r\n      } else if (ogCMD < cmd){\r\n        return {color: 'green'}\r\n      } else {\r\n        return {color: 'black'}\r\n      }\r\n    } else {\r\n      return cmd\r\n    }\r\n  }\r\n\r\n\tconst cms = combatManeuvers(props.character, props.characterInfo)\r\n\tlet cmb = pluser(cms.bonus)\r\n\tlet cmd = cms.defense\r\n\r\n  const calcCMB = (name, style, cmd) => {\r\n    let ab = bab() + str() + size()\r\n\r\n    ab += cmbBonuses(name)\r\n\r\n    let ogAB = ab\r\n\r\n    ab += !!rage ? 2 : 0\r\n    ab += !!charge ? 2 : 0\r\n    ab += !!fd ? -4 : 0\r\n    ab += !!power ? -2 : 0\r\n\r\n    if (style){\r\n      if (ogAB > ab){\r\n        return {color: 'maroon'}\r\n      } else if (ogAB < ab){\r\n        return {color: 'green'}\r\n      } else {\r\n        return {color: 'black'}\r\n      }\r\n    } else if (cmd){\r\n      ab = Math.floor(ab)\r\n      return ab\r\n    } else {\r\n\r\n      ab = Math.floor(ab)\r\n      return ab >= 0 ? `+${ab}` : ab\r\n    }\r\n  }\r\n\r\n\t// combat manuevers: tip, disarm, sunder, grapple, dirty trick, pin, overrun, steal, reposition, drag\r\n\r\n  const renderCombatManeuvers = () => {\r\n    let maneuvers = [\r\n      {id: 100, name: 'Bull Rush', action: 'standard', description: 'Move target 5 ft back, +5 ft for every 5 you beat their CMD.', button: 'Rush'},\r\n\t\t\t{id: 101, name: \"Dirty Trick\", action: 'standard', description: \"Impose condition (blinded, dazzled, deafened, entangled, shaken, sickened) for 1 round, +1 round for every 5 you beat their CMD. Condition can be removed with move action.\", button: \"Pocket Sand\"},\r\n\t\t\t{id: 102, name: \"Disarm\", action: 'standard', description: \"Remove 1 item from target, beat CMD by 10, remove both items. Can automatically pick up disarmed weapon. Fail by 10, drop your weapon. If unarmed, -4 penalty to CMB.\", button: \"Disarm\"},\r\n\t\t\t{id: 103, name: \"Drag\", action: 'standard', description: \"Drag in straight line. Move you and target 5 ft, +5 ft for every 5 you beat their CMD. Must be able to move with target.\", button: \"Drag\"},\r\n\t\t\t{id: 104, name: \"Grapple\", action: 'standard', description: \"You and target have Grappled condition. Must make check to maintain each round. Use two hands or -4 penalty to CMB\", button: \"Grab\"},\r\n\t\t\t{id: 105, name: \"Grapple (Move)\", action: 'standard', description: \"If target is grappled, move up to half your speed with target.\", button: \"Move\"},\r\n\t\t\t{id: 106, name: \"Grapple (Damage)\", action: 'standard', description: \"If target is grappled, attack with unarmed, natural attack, or light/one-handed weapon.\", button: \"Attack\"},\r\n\t\t\t{id: 107, name: \"Grapple (Pin)\", action: 'standard', description: \"If target is grappled, give target Pinned condition.\", button: \"Pin\"},\r\n\t\t\t{id: 108, name: \"Grapple (Tie Up)\", action: 'standard', description: \"If target is pinned, tie up target. DC to escape is 20 + your CMB. If target is grappled, -10 penalty to CMB.\", button: \"Wrangle\"},\r\n\t\t\t{id: 109, name: \"Grapple (Break)\", action: 'standard', description: \"If you are grappled, CMB/Acrobatics check against CMD. If succeed, can escape or become grappler.\", button: \"Reversal\"},\r\n\t\t\t{id: 110, name: \"Overrun\", action: 'standard', description: \"As part of Charge, move through enemy square. They can choose to let you pass. If beat their CMD by 5, knock them prone.\", button: \"Charge\"},\r\n\t\t\t{id: 111, name: \"Reposition\", action: 'standard', description: \"Move target 5ft from their position, within your reach, except for final 5 ft. +5 ft for every 5 your beat their CMD.\", button: \"Shift\"},\r\n\t\t\t{id: 112, name: \"Steal\", action: 'standard', description: \"Choose item to take, +5 to their CMD if item is fastened, cannot take worn/wielded items.\", button: \"Thieve\"},\r\n\t\t\t{id: 113, name: \"Sunder\", action: 'standard', description: \"Attack an item held/worn by target. Deal damage, can choose not to destroy the item.\", button: \"Smash\"},\r\n\t\t\t{id: 114, name: \"Trip\", action: 'standard', description: \"Knock target prone. If you fail by 10, you are knocked prone.\", button: \"Trip\"},\r\n    ]\r\n    return maneuvers.map((m, idx) => {\r\n      return (\r\n        <tr>\r\n          <td><button className={actions[m.action] ? 'cannot-cast' : m.action} onClick={() => renderDispatch(m.action)}>{m.button}</button></td>\r\n          <td>{m.name}</td>\r\n          <td><span style={{border: `1px solid #${props.settings.borderColor}`, borderRadius: \"0.3em\", cursor: \"default\", padding: \"2px\"}} onClick={() => rollCM(m.name, cmb)}>{cmb}</span></td>\r\n          <td>{cmd}</td>\r\n          <td>{m.description}</td>\r\n        </tr>\r\n      )\r\n    })\r\n  }\r\n\r\n\tconst rollCM = (name, modifier) => {\r\n\t\tlet obj = {rollName: name, modifier: parseInt(modifier), die: 20, count: 1}\r\n\t\tdiceAction(obj)\r\n\t}\r\n\r\n  const renderDispatch = action => {\r\n    if ((action === 'standard' || action  === 'move' || action === 'swift') && actions.full){\r\n      return null\r\n    } else if (action === 'full' && (actions.standard || actions.move || actions.swift)){\r\n      return null\r\n    } else if (!action === 'free'){\r\n      props.dispatch({type: 'TRIGGER ACTION', action})\r\n    }\r\n  }\r\n\r\n  const cm = () => {\r\n    return (\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>Action</th>\r\n            <th>Name</th>\r\n            <th>Bonus</th>\r\n            <th>Defense</th>\r\n            <th>Effect</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {renderCombatManeuvers()}\r\n        </tbody>\r\n      </table>\r\n    )\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n      {cm()}\r\n    </>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    characterInfo: state.character_info,\r\n    classes: state.classes,\r\n\t\tsettings: state.settings\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(CombatManeuver)\r\n","import _ from 'lodash'\r\n\r\nexport const dispatchClassLevels = (character) => {\r\n  let cKArray = []\r\n  let completedClasses = []\r\n  character.character_klasses.forEach(cK => {\r\n    const id = cK.klass_id\r\n    if (!completedClasses.includes(id)){\r\n      let characterKlass = character.character_klasses.filter(ck => ck.klass_id === id)\r\n      const level = characterKlass.length\r\n      let klass = character.uniq_klasses.find(k => k.id === id)\r\n\r\n      completedClasses.push(id)\r\n      const classInfo = {id, level}\r\n\r\n      // changing fetch data, this part is not applicable with starting fetch\r\n\r\n\t\t\t// DELETE BELOW CODE ONCE REFACTORING OF SPELLS IS COMPLETE\r\n      // let spellsFeature = klass.klass_features.find(f => f.name === 'Spells' || f.name === 'Alchemy')\r\n      // let spellcasting = spellsFeature ? spellsFeature.spellcasting : null\r\n\t\t\t//\r\n      // // look to see if there are any cast spells for the given class\r\n      // const castSpellsForThisClass = character.cast_spells.filter(cs => cs.klass_id === id)\r\n      // // if (castSpellsForThisClass[0]){\r\n      // const castSpells = {}\r\n      // const transformedCastSpellsToLevelCast = castSpellsForThisClass.map(cs => cs.spell_level)\r\n      // transformedCastSpellsToLevelCast.forEach(lvl => {\r\n      //   castSpells[lvl] ? castSpells[lvl] = castSpells[lvl] + 1 : castSpells[lvl] = 1\r\n      // })\r\n      // classInfo.castSpells = castSpells\r\n      // classInfo.spellcasting = spellcasting\r\n      // // hardcoded start\r\n      // let name = character.name\r\n      //   if (name === \"Nettie\" || name === \"Persephone\" || name === \"Maddox\"){\r\n      //     classInfo.spellcastingAbility = 'intelligence'\r\n      //   } else if (name === \"Sylvester\"){\r\n      //     classInfo.spellcastingAbility = 'charisma'\r\n      //   }\r\n      // hardcoded end\r\n      // }\r\n\t\t\t// DELETE ABOVE CODE ONCE REFACTORING OF SPELLS IS COMPLETE\r\n\r\n      // relocate to a new function when data is applcable\r\n\r\n      cKArray.push(classInfo)\r\n    }\r\n  })\r\n  // debugger\r\n  return cKArray\r\n  // dispatch({type: 'CHARACTER_CLASSES', classes: cKArray})\r\n}\r\n\r\nexport const renderAbilityScoreCalc = (ability, character) => {\r\n  const downcaseAbility = _.lowerCase(ability)\r\n  let score = character[downcaseAbility]\r\n  character.race.race_ability_score_modifiers.forEach(mod => {\r\n    if (ability === mod.ability_score){\r\n      score += mod.bonus\r\n    }\r\n  })\r\n  if (character.any_bonus === ability){\r\n    score +=2\r\n  }\r\n  return { ability: downcaseAbility, score }\r\n}\r\n\r\nexport const calculateWeight = (character, character_info) => {\r\n  let weight = 0;\r\n\r\n  character.character_weapons.forEach(cw => {\r\n    weight += cw.weapon.weight\r\n  })\r\n  character.character_armors.forEach(ca => {\r\n    weight += ca.armor.weight\r\n  })\r\n\r\n\r\n  return weight\r\n}\r\n\r\nexport const equippedWeapons = characterWeapons => {\r\n  return characterWeapons.filter(cw => cw.equipped !== \"\")\r\n}\r\n\r\nexport const calculateLoad = (weight, strength) => {\r\n  let carryingCapacityByStrength = carryingCapacity(strength)\r\n  if (weight <= carryingCapacityByStrength[0]){return \"Light\"}\r\n  if (weight <= carryingCapacityByStrength[1]){return \"Medium\"}\r\n  if (weight <= carryingCapacityByStrength[2]){return \"Heavy\"}\r\n  return \"Overload\"\r\n}\r\n\r\nexport const carryingCapacity = strength => {\r\n  switch(strength){\r\n    case 1: return [3, 6, 10]\r\n    case 2: return [6, 13, 20]\r\n    case 3: return [10, 20, 30]\r\n    case 4: return [13, 26, 40]\r\n    case 5: return [16, 33, 50]\r\n    case 6: return [20, 40, 60]\r\n    case 7: return [23, 46, 70]\r\n    case 8: return [26, 53, 80]\r\n    case 9: return [30, 60, 90]\r\n    case 10: return [33, 66, 100]\r\n    case 11: return [38, 76, 115]\r\n    case 12: return [43, 86, 130]\r\n    case 13: return [50, 100, 150]\r\n    case 14: return [58, 116, 175]\r\n    case 15: return [66, 133, 200]\r\n    case 16: return [76, 153, 230]\r\n    case 17: return [86, 173, 260]\r\n    case 18: return [100, 200, 300]\r\n    case 19: return [116, 233, 350]\r\n    case 20: return [133, 266, 400]\r\n    case 21: return [153, 306, 460]\r\n    case 22: return [173, 346, 520]\r\n    case 23: return [200, 400, 600]\r\n    case 24: return [233, 466, 700]\r\n    case 25: return [266, 533, 800]\r\n    case 26: return [306, 613, 920]\r\n    case 27: return [346, 693, 1040]\r\n    case 28: return [400, 800, 1200]\r\n    case 29: return [466, 933, 1400]\r\n    case 30: return [532, 1064, 1600]\r\n    default: return [0, 0, 0]\r\n  }\r\n}\r\n\r\nexport const reducedSpeed = (speed) => {\r\n\tswitch(speed){\r\n\t\tcase 15: return 10\r\n\t\tcase 20: return 15\r\n\t\tcase 25: return 20\r\n\t\tcase 30: return 20\r\n\t\tcase 35: return 25\r\n\t\tcase 40: return 30\r\n\t\tcase 45: return 30\r\n\t\tcase 50: return 35\r\n\t\tcase 55: return 40\r\n\t\tcase 60: return 40\r\n\t\tcase 65: return 45\r\n\t\tcase 70: return 50\r\n\t\tcase 75: return 50\r\n\t\tcase 80: return 55\r\n\t\tcase 85: return 60\r\n\t\tcase 90: return 60\r\n\t\tcase 95: return 65\r\n\t\tcase 100: return 70\r\n\t\tcase 105: return 70\r\n\t\tcase 110: return 75\r\n\t\tcase 115: return 80\r\n\t\tcase 120: return 80\r\n\r\n\t\tdefault: return speed\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport _ from 'lodash'\r\n\r\nimport { calculateWeight, calculateLoad, reducedSpeed } from '../../../helper_functions/calculations/character'\r\n\r\nconst Movement = props => {\r\n\r\n  const movementRedux = props.character_info.movement\r\n  const actions = props.character_info.actions\r\n\r\n  const [baseSpeed, setBaseSpeed] = React.useState(0)\r\n\r\n  React.useEffect(() => {\r\n    let base = _.maxBy(movementRedux.map(mr => {\r\n      return mr.movement === \"Base\" && !mr.bonus && !mr.penalty ? mr.feet : 0\r\n    }))\r\n\t\tlet speed = props.character.race.speed || base\r\n\t\tlet load = calculateLoad(calculateWeight(props.character, props.character_info), props.character_info.ability_scores.strength)\r\n\r\n    movementRedux.forEach(mr => {\r\n\t\t\tlet applicationsBefore = mr.applications?.map(a => a.calculate_before)\r\n      if (applicationsBefore?.includes(\"load\") || applicationsBefore?.includes(\"armor\")){\r\n\r\n        let unlessLoads = mr.conditions?.map(c => c.unless_load)\r\n\r\n        if (!unlessLoads || !unlessLoads.includes(load) || (load === \"Light\" && (!unlessLoads.includes(\"Medium\") || !unlessLoads.includes(\"Heavy\"))) || (load === \"Medium\" && !unlessLoads.includes(\"Heavy\"))){\r\n          speed += mr.movement === \"Base\" && mr.bonus && !mr.penalty ? mr.feet : 0\r\n          speed -= mr.movement === \"Base\" && !mr.bonus && mr.penalty ? mr.feet : 0\r\n        }\r\n\r\n      }\r\n\r\n    })\r\n\r\n\t\tif (load === \"Medium\" || load === \"Heavy\"){\r\n\t\t\tspeed = reducedSpeed(speed)\r\n\t\t}\r\n\r\n\t\t// DONT HAVE ARMOR CALCULATED YET\r\n\t\t// if (armor === \"Medium\" || armor === \"Heavy\"){\r\n\t\t// \tspeed = reducedSpeed(speed)\r\n\t\t// }\r\n\r\n\t\tmovementRedux.forEach(mr => {\r\n\t\t\tlet applicationsAfter = mr.applications?.map(a => a.calculate_after)\r\n\t\t\tif (applicationsAfter?.includes(\"load\") || applicationsAfter?.includes(\"armor\")){\r\n\r\n\t\t\t\tlet unlessLoads = mr.conditions?.map(c => c.unless_load)\r\n\r\n\t\t\t\tdebugger\r\n\r\n\t\t\t\tif (!unlessLoads || !unlessLoads.includes(load) || (load === \"Light\" && (!unlessLoads.includes(\"Medium\") || !unlessLoads.includes(\"Heavy\"))) || (load === \"Medium\" && !unlessLoads.includes(\"Heavy\"))){\r\n\t\t\t\t\tspeed += mr.movement === \"Base\" && mr.bonus && !mr.penalty ? mr.feet : 0\r\n\t\t\t\t\tspeed -= mr.movement === \"Base\" && !mr.bonus && mr.penalty ? mr.feet : 0\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t})\r\n\r\n\r\n\r\n    setBaseSpeed(speed)\r\n  }, [movementRedux])\r\n\r\n  const renderDispatch = action => {\r\n    // if ((action === 'standard' || action  === 'move' || action === 'swift') && actions.full){\r\n    //   return null\r\n    // } else if (action === 'full' && (actions.standard || actions.move || actions.swift)){\r\n    //   return null\r\n    // } else if (!action === 'free'){\r\n    //   props.dispatch({type: 'TRIGGER ACTION', action})\r\n    // }\r\n  }\r\n\r\n  const canCast = (action, detail) => {\r\n\t\tlet className = action\r\n\t\tprops.character_info.forbidden.forEach(f => {\r\n\t\t\tif (f.forbidden === detail){\r\n\t\t\t\tclassName = \"cannot-cast\"\r\n\t\t\t}\r\n\t\t})\r\n    return className\r\n  }\r\n\r\n  const mvmt = () => {\r\n    return (\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>Action</th>\r\n            <th>Name</th>\r\n            <th>Distance</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr>\r\n            <td><button className={actions.move ? 'cannot-cast' : \"move\"} onClick={() => renderDispatch('move')}><strong>Move</strong></button></td>\r\n            <td>Move</td>\r\n            <td>{baseSpeed} ft</td>\r\n          </tr>\r\n          <tr>\r\n            <td><button className={actions.move ? 'cannot-cast' : \"free\"} onClick={() => props.dispatch({type: 'FIVE FOOT STEP'})}><strong>Move</strong></button></td>\r\n            <td>Move</td>\r\n            <td>5 ft</td>\r\n          </tr>\r\n          <tr>\r\n            <td><button className={canCast('full', 'Run')} onClick={() => renderDispatch('full', 'Run')}><strong>Move</strong></button></td>\r\n            <td>Run</td>\r\n            <td>{baseSpeed * 4} ft</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    )\r\n  }\r\n\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {mvmt()}\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info,\r\n    classes: state.classes\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Movement)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport CombatManeuver from './basics/combat_maneuver'\r\nimport Movement from './basics/movement'\r\n\r\nconst Basics = props => {\r\n\r\n  const hc = props.character_info.hardcode\r\n\r\n  // const renderButtonCSS = action => {\r\n  //   if (props.character_info.actions[action] && action !== 'free'){\r\n  //     return `cast-${action}`\r\n  //   } else {\r\n  //     return action\r\n  //   }\r\n  // }\r\n\r\n  let speed = props.character.race.speed || hc.speed\r\n  speed += hc.expeditious ? 30 : 0\r\n  speed += hc.land10 ? 10 : 0\r\n  speed += hc.land20 ? 20 : 0\r\n  speed += hc.quick ? 10 : 0\r\n  speed += hc.stealTime ? 5 : 0\r\n\r\n\t  const renderDispatch = (action, details) => {\r\n    let actions = props.character_info.actions\r\n    if ((action === 'standard' || action  === 'move' || action === 'swift') && actions.full){\r\n      return null\r\n    } else if (action === 'full' && (actions.standard || actions.move || actions.swift)){\r\n      return null\r\n    } else if (!actions[action]){\r\n      // I have no idea what this below code is trying to do\r\n      // switch(details){\r\n      //   case 'run':\r\n      //     return null\r\n      //   default:\r\n      //     break\r\n      // }\r\n      if (action !== 'free'){\r\n        props.dispatch({type: 'TRIGGER ACTION', action})\r\n      }\r\n      switch(details){\r\n        case 'fight defensively':\r\n          props.dispatch({type: 'FIGHT DEFENSIVELY'})\r\n          break\r\n        case 'charge':\r\n          props.dispatch({type: 'CHARGE'})\r\n          break\r\n        case 'dimensionalSlide':\r\n          if (!hc.slide){\r\n            props.dispatch({type: 'DIMENSIONAL SLIDE'})\r\n            props.dispatch({type: 'POINTS CHANGE', amount: 'decrease'})\r\n          }\r\n          break\r\n        default:\r\n          break\r\n      }\r\n    } else {\r\n      return null\r\n    }\r\n  }\r\n\r\n  const canCast = (action, details) => {\r\n    let actions = props.character_info.actions\r\n    if ((action === 'standard' || action  === 'move' || action === 'swift') && actions.full){\r\n      return \"cannot-cast\"\r\n    } else if (action === 'full' && (actions.standard || actions.move || actions.swift)){\r\n      return \"cannot-cast\"\r\n    } else if (hc.ffs){\r\n      return 'cannot-cast'\r\n    } else if (!actions[action]){\r\n      if (cannotRun(details)){\r\n        return 'cannot-cast'\r\n      } else {\r\n\t\t\t\tlet className = action\r\n\t\t\t\tprops.character_info.forbidden.forEach(f => {\r\n\t\t\t\t\tif (f.forbidden === details){\r\n\t\t\t\t\t\tclassName = \"cannot-cast\"\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n        return className\r\n      }\r\n    } else if (props.character_info.actions[action] && action !== 'free'){\r\n      return `cast-${action}`\r\n    } else {\r\n      return 'cannot-cast'\r\n    }\r\n  }\r\n\r\n  const swinging = props.character.name === 'Robby' ? ', Swinging Reposition' : null\r\n\r\n  const renderBAB = (hd) => {\r\n    switch (hd){\r\n      case 6:\r\n        return 0.5;\r\n      case 8:\r\n        return 0.75;\r\n      case 10:\r\n        return 1;\r\n      case 12:\r\n        return 1;\r\n      default:\r\n        return 1;\r\n    }\r\n  }\r\n\r\n  const renderSize = (size) => {\r\n    switch(size){\r\n      case \"Fine\":\r\n        return -8;\r\n      case \"Diminutive\":\r\n        return -4;\r\n      case \"Tiny\":\r\n        return -2;\r\n      case \"Small\":\r\n        return -1;\r\n      case \"Large\":\r\n        return 1;\r\n      case \"Huge\":\r\n        return 2;\r\n      case \"Gargantuan\":\r\n        return 4;\r\n      case \"Colossal\":\r\n        return 8;\r\n      default:\r\n        return 0;\r\n    }\r\n  }\r\n\r\n  const mvmt = () => {\r\n    return (\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>Action</th>\r\n            <th>Name</th>\r\n            <th>Distance</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr>\r\n            <td><button className={canCast('move')} onClick={() => renderDispatch('move')}><strong>Move</strong></button></td>\r\n            <td>Move</td>\r\n            <td>{speed} ft</td>\r\n          </tr>\r\n          <tr>\r\n            <td><button className={canCast('free')} onClick={() => props.dispatch({type: 'FIVE FOOT STEP'})}><strong>Move</strong></button></td>\r\n            <td>Move</td>\r\n            <td>5 ft</td>\r\n          </tr>\r\n            {props.character.name === \"Festus\" && alternateMove('Fly', 50)}\r\n            {hc.major === \"Condor - Major\" && alternateMove('Fly', 80)}\r\n            {hc.major === \"Frog - Major\" && alternateMove('Swim', 30)}\r\n            {props.character.name === \"Cedrick\" && hc.major !== 'Chameleon - Major' && alternateMove('Climb', 20)}\r\n            {props.character.name === \"Cedrick\" && hc.major === 'Chameleon - Major' && alternateMove('Climb', 40)}\r\n            {hc.fly && alternateMove('Fly', 60)}\r\n            {hc.major === \"Squid - Major\" && alternateMove('Swim', 60)}\r\n            {props.character.name === 'Maddox' && dimensionalSlide()}\r\n            {hc.swim && alternateMove('Swim', 30)}\r\n            {props.character.name === 'Robby' && alternateMove('Swim', 30)}\r\n            {hc.swim20 && alternateMove('Swim', 20)}\r\n            {renderMovements()}\r\n          <tr>\r\n            <td><button className={canCast('full', 'run')} onClick={() => renderDispatch('full', 'run')}><strong>Move</strong></button></td>\r\n            <td>Run</td>\r\n            <td>{speed * 4} ft</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    )\r\n  }\r\n\r\n  const renderMovements = () => {\r\n    console.log(props.character_info.features)\r\n    let mvmt = props.character_info.features.filter(f => f.type === 'movement')\r\n    return mvmt.map(m => alternateMove(m.movement, m.feet))\r\n  }\r\n\r\n  const fight = () => {\r\n    return (\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>Action</th>\r\n            <th>Name</th>\r\n            <th>Effect</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr>\r\n            <td><button className={canCast('standard')} onClick={() => renderDispatch('standard', 'fight defensively')}><strong>Attack</strong></button></td>\r\n            <td>Fight Defensively</td>\r\n            <td>-4 to Attack Rolls, +2 dodge bonus to AC</td>\r\n          </tr>\r\n          <tr>\r\n            <td><button className={canCast('full', 'Charge')} onClick={() => renderDispatch('full', 'Charge')}><strong>Attack</strong></button></td>\r\n            <td>Charge</td>\r\n            <td>Move up to {speed * 2} ft, make Attack. +2 to attack, -2 to AC{swinging}</td>\r\n          </tr>\r\n          <tr>\r\n            <td><button className={canCast('standard')} onClick={() => renderDispatch('standard', 'total defense')}><strong>Defend</strong></button></td>\r\n            <td>Total Defense</td>\r\n            <td>+4 dodge bonus to AC, cannot AoO/fight defensively/use Combat Expertise</td>\r\n          </tr>\r\n          <tr>\r\n            <td><button className={canCast('full')} onClick={() => renderDispatch('full', 'withdraw')}><strong>Flee</strong></button></td>\r\n            <td>Withdraw</td>\r\n            <td>Move up to {speed * 2} ft, you cannot be hit by AoO from your current square by visible enemies</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    )\r\n  }\r\n\r\n\t// aid another, coup de grace, feint, delay, ready, standup\r\n\t// notes: cover, concealment, two weapon fighting, flanking, helpless defenders,\r\n\r\n  const alternateMove = (type, speed) => {\r\n    let fast = speed * 4\r\n    let action = 'move'\r\n    let fastAction = 'full'\r\n    let asterik = null\r\n    if (type === 'Climb'){\r\n      fast  = speed * 2\r\n      fastAction = 'move'\r\n      asterik = '*'\r\n    }\r\n    return (\r\n      <React.Fragment>\r\n      <tr>\r\n        <td><button className={canCast(action)} onClick={() => renderDispatch('move')}><strong>Move</strong></button></td>\r\n        <td>{type}</td>\r\n        <td>{speed} ft</td>\r\n      </tr>\r\n      {!hc.fly && <tr>\r\n        <td><button className={canCast(fastAction)} onClick={() => renderDispatch('full', 'run')}><strong>Move</strong></button></td>\r\n        <td onMouseOver={e => renderTooltip(e, type)} onMouseOut={props.mouseOut}>{type}{asterik}</td>\r\n        <td>{fast} ft</td>\r\n      </tr>}\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n\r\n  const cannotRun = (details) => {\r\n    const isFatigued = props.character_info.conditions.includes('Fatigued')\r\n    return details === 'run' && isFatigued ? true : false\r\n  }\r\n\r\n  const renderTooltip = (e, type) => {\r\n    let message = ''\r\n    if (type === \"Climb\"){\r\n      message = '-5 penalty to Climb check, but you can take a 10'\r\n    }\r\n    props.renderTooltip(e, message)\r\n  }\r\n\r\n  const dimensionalSlide = () => {\r\n    let className = hc.slide ? 'cannot-cast' : 'free'\r\n    return (\r\n      <React.Fragment>\r\n        <tr>\r\n          <td><button className={className} onClick={() => renderDispatch('free', 'dimensionalSlide')}><strong>Teleport</strong></button></td>\r\n          <td>Dimensional Slide</td>\r\n          <td>Teleport up to 70 ft to a location you can see. This is used as part of your move action or withdraw action. However, this counts as 5 ft of movement.</td>\r\n        </tr>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <section>\r\n      {/* mvmt() */}\r\n      <Movement renderTooltip={props.renderTooltip} mouseOut={props.mouseOut}/>\r\n      {fight()}\r\n    </section>\r\n  )\r\n}\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info,\r\n    classes: state.classes\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Basics)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nconst Rings = props => {\r\n  const rings = []\r\n  const name = props.character.name\r\n\r\n  if (name === 'Cedrick'){\r\n    const sergeant = {\r\n      id: 1001,\r\n      name: \"Sergeant's Command Ring\",\r\n      description: `${props.character_info.hardcode.ringPoints}/3 points. Recharge 1 pt a day if you have helped someone achieve a goal the previous day`,\r\n      aura: \"moderate enchantment\",\r\n      price: \"12000 gp\",\r\n      weight: 0,\r\n      activatable: true\r\n    }\r\n    rings.push(sergeant)\r\n    const feather = {\r\n      id: 1002,\r\n      name: \"Ring of Feather Fall\",\r\n      description: <span>Acts exactly like a <em className='underline-hover' onClick={() => props.editModal('spell', null, 18)}>feather fall</em> spell, activated immediately if the wearrer falls more than 5 ft.</span>,\r\n      aura: \"faint transmutation\",\r\n      price: \"2200 gp\",\r\n      weight: 0,\r\n      activatable: false\r\n    }\r\n    rings.push(feather)\r\n  }\r\n\r\n  if (name === 'Persephone'){\r\n    const storing = {\r\n      id: 2003,\r\n      name: \"Ring of Spell Storing\",\r\n      description: `A spellcaster can cast any spells into the ring, so long as the total spell levels do not add up to more than 5. Metamagic versions of spells take up storage space equal to their spell level modified by the metamagic feat. A spellcaster can use a scroll to put a spell into the ring of spell storing. The user need not provide any material components or focus to cast the spell, and there is no arcane spell failure chance for wearing armor (because the ring wearer need not gesture). The activation time for the ring is the same as the casting time for the relevant spell, with a minimum of 1 standard action.`,\r\n      aura: \"moderate evocation\",\r\n      price: \"50000 gp\",\r\n      weight: 0,\r\n      activatable: false,\r\n    }\r\n    rings.push(storing)\r\n    const autumn = {\r\n      id: 21004,\r\n      name: \"Ring of Autumn\",\r\n      description: <ul><li><strong>Summon Pumpkin</strong> - Fine (1), Diminutive (2), Tiny (3), Small (4)</li><li><strong>Cover with leaves</strong> - per 5 ft square (1)</li><li><strong>Location smells of spice blend</strong> - 60 ft cube (3), 5 ft square (1)</li><li><strong>Chilly Breeze</strong> - 100 ft cube (5)</li><li><strong>Change color of object</strong> - up to a medium object (2): auburn, brown, orange, ochre, raspberry, etc. (<em>Note: Magic Items get a Fortitude Save</em>)</li></ul>,\r\n      aura: \"faint universal\",\r\n      price: \"250 gp\",\r\n      weight: 0,\r\n      activatable: true,\r\n      limit: 10,\r\n      action: 'standard'\r\n    }\r\n    rings.push(autumn)\r\n  }\r\n\r\n  if (name === 'Nettie'){\r\n    const kyton = {\r\n      id: 3005,\r\n      name: \"Kyton Ring\",\r\n      description: <span><p>This rusty iron ring looks like a twisted chain.</p><p>On command, the ring can produce a rusty, clanky length of iron chain (hardness 10, 5 hp, break DC 26). The ring can create no more than 100 feet of chain in this way. This total length can be split among many uses, but must be spent in 10-foot increments. When the ring’s daily allotment of chain is renewed, any previously conjured chain rusts away.</p><p>Once per day as a standard action, the user can shoot a chain from the ring as though it were a grappling hook, except the range increment is 50 feet. Whatever length of chain she shoots out counts against ring’s daily allotment.</p></span>,\r\n      aura: \"moderate conjuration\",\r\n      price: \"1000 gp\",\r\n      weight: 0,\r\n      activatable: false,\r\n    }\r\n    rings.push(kyton)\r\n    const swimming = {\r\n      id: 3006,\r\n      name: \"Ring of Swimming\",\r\n      description: 'This silver ring usually has fishlike designs and motifs etched into the band. It continually grants the wearer a +5 competence bonus on Swim checks.',\r\n      aura: \"faint transmutation\",\r\n      price: \"2500 gp\",\r\n      weight: 0,\r\n      activatable: false,\r\n    }\r\n    rings.push(swimming)\r\n    const psychopomp = {\r\n      id: 3007,\r\n      name: \"Ring of Summoning Affinity (Psychopomp)\",\r\n      description: 'This silver ring is marked with a skull emblem. If the wearer can cast summon monster spells, the wearer adds nosoi to the 3rd-level list of monsters he can summon with those spells, adds catrina to the 4th-level list, adds vanth to the 6th-level list, and adds morrigna to the 9th-level list. Also, once per day on command the wearer can use this ring to summon a nosoi, as if by the summon monster III spell.',\r\n      aura: \"faint conjuration\",\r\n      price: \"7600 gp\",\r\n      weight: 0,\r\n      activatable: true,\r\n      limit: 1,\r\n      action: 'full'\r\n    }\r\n    rings.push(psychopomp)\r\n  }\r\n\r\n  const renderClick = (name, limit, startingValue) => {\r\n    if (name === \"Sergeant's Command Ring\"){\r\n      props.editModal('command ring')\r\n    }\r\n    if (name === \"Ring of Autumn\"){\r\n      props.dispatch({type: 'TRIGGER ACTION', action: 'standard'})\r\n    }\r\n    if (name === \"Ring of Summoning Affinity (Psychopomp)\"){\r\n      if (limit){\r\n        // if limits exist in redux\r\n        let limits = props.character_info.hardcode.limits\r\n        // if limits doesn't exist, dispatch\r\n        // if limits does exist, try to find the specifc one\r\n        // if that one isn't found, dispatch\r\n        // if that one is found, check to see if the number of casts is equal to the limit\r\n        // if casts is less than limit, dispatch\r\n        // if casts is equal to limit, don't\r\n        if (limits){\r\n          let found = props.character_info.hardcode.limits.find(l => l.name === name)\r\n          if (found){\r\n            if (startingValue && found.cast < startingValue){\r\n              props.dispatch({type: 'LIMIT CASTING', name})\r\n            } else if (found.cast < limit){\r\n              props.dispatch({type: 'LIMIT CASTING', name})\r\n            }\r\n          } else {\r\n            props.dispatch({type: 'LIMIT CASTING', name})\r\n          }\r\n        } else {\r\n          props.dispatch({type: 'LIMIT CASTING', name})\r\n        }\r\n      }\r\n    }\r\n    if (name === \"Ring of Summoning Affinity (Psychopomp)\"){\r\n      props.dispatch({type: 'TRIGGER ACTION', action: 'full'})\r\n    }\r\n  }\r\n\r\n  const renderRings = () => {\r\n    return rings.map((r, idx) => {\r\n      let limits = props.character_info.hardcode.limits\r\n      let amount\r\n      if (limits && r.limit){\r\n        let found = limits.find(l => l.name === r.name)\r\n        if (r.starting){\r\n          amount = found ? r.starting - found.cast : r.starting\r\n        } else {\r\n          amount = found ? r.limit - found.cast : r.limit\r\n        }\r\n      } else {\r\n        amount = r.starting ? r.starting : r.limit\r\n      }\r\n      return (\r\n        <tr className={renderTableStyling(idx)} key={r.id*3-1}>\r\n          <td>{r.activatable ?  <button className={r.action && !props.character_info.actions[r.action] ? r.action : 'cannot-cast'} onClick={() => renderClick(r.name, r.limit, r.starting)}>Use</button> : null}</td>\r\n          <td><strong>{r.name}</strong>{r.limit ? `(${amount}/${r.limit})` : null}</td>\r\n          <td>{r.weight} lb{(r.weight > 1 || r.weight === 0) ? \"s\" : null}</td>\r\n          <td>{r.price}</td>\r\n          <td>{r.description}</td>\r\n        </tr>\r\n      )\r\n    })\r\n  }\r\n\r\n  const renderTableStyling = (index) => {\r\n    return index%2 === 0 ? \"even-row-rings\" : \"odd-row\"\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {renderRings()}\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Rings)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nconst Legendary = props => {\r\n  const legendaries = []\r\n  const name = props.character.name\r\n\r\n  if (name === 'Cedrick'){\r\n    const taalmon = {\r\n      id: 101,\r\n      name: \"Ta'al'mon Ancestral Handwraps\",\r\n      description: ``,\r\n      aura: \"moderate transmutation\",\r\n      price: \"priceless\",\r\n      weight: 0,\r\n      activatable: true\r\n    }\r\n    legendaries.push(taalmon)\r\n  } else if (name === 'Robby'){\r\n    const taalmon = {\r\n      id: 201,\r\n      name: \"Tempest Trishula\",\r\n      description: ``,\r\n      aura: \"moderate transmuation\",\r\n      price: \"priceless\",\r\n      weight: 4,\r\n      activatable: true,\r\n      redux: 'tempest',\r\n      max: 3\r\n    }\r\n    legendaries.push(taalmon)\r\n  } else if (name === 'Maddox'){\r\n    const taalmon = {\r\n      id: 301,\r\n      name: \"Zamantash Delta Chronometer\",\r\n      description: ``,\r\n      aura: \"moderate transmuation\",\r\n      price: \"priceless\",\r\n      weight: 1,\r\n      activatable: true\r\n    }\r\n    legendaries.push(taalmon)\r\n  } else if (name === 'Merg'){\r\n    const taalmon = {\r\n      id: 401,\r\n      name: \"Fabric of Reality\",\r\n      description: ``,\r\n      aura: \"moderate transmuation\",\r\n      price: \"priceless\",\r\n      weight: 1,\r\n      activatable: true\r\n    }\r\n    legendaries.push(taalmon)\r\n  }\r\n  if (props.character_info.hardcode.helmsman){\r\n    const besmara = {\r\n      id: 1001,\r\n      name: \"Besmara's Honourable Emissary\",\r\n      description: ``,\r\n      aura: \"moderate transmuation\",\r\n      price: \"priceless\",\r\n      weight: 40000,\r\n      activatable: true\r\n    }\r\n    legendaries.push(besmara)\r\n    const sasea = {\r\n      id: 1002,\r\n      name: \"Sasea Bitch\",\r\n      description: ``,\r\n      aura: \"-\",\r\n      price: \"priceless\",\r\n      weight: 40000,\r\n      activatable: true\r\n    }\r\n    legendaries.push(sasea)\r\n  }\r\n\r\n  const renderClick = name => {\r\n    if (name === 'Sasea Bitch'){\r\n      props.editModal('sasea')\r\n    } else {\r\n      props.editModal('curio')\r\n    }\r\n  }\r\n\r\n  const renderLegendary = () => {\r\n    return legendaries.map((r, idx) => {\r\n      let redux = props.character_info.hardcode[r.redux] || 0\r\n      return (\r\n        <tr className={renderTableStyling(idx)} key={r.id*3-1}>\r\n          <td>{r.activatable ? <button onClick={() => renderClick(r.name)}>View</button> : null}</td>\r\n          <td><strong>{r.name}</strong>{r.redux && ` ${r.max - redux}/${r.max}`}</td>\r\n          <td>{r.weight} lb{(r.weight > 1 || r.weight === 0) ? \"s\" : null}</td>\r\n          <td>{r.price}</td>\r\n          <td>{r.description}</td>\r\n        </tr>\r\n      )\r\n    })\r\n  }\r\n\r\n  const renderTableStyling = (index) => {\r\n    return index%2 === 0 ? \"even-row-weapons\" : \"odd-row\"\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {renderLegendary()}\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Legendary)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nconst Weapons = props => {\r\n  const weapons = []\r\n  const name = props.character.name\r\n\r\n  if (name === 'Persephone'){\r\n    const lightCrossbow = {\r\n      id: 200,\r\n      name: \"Light Crossbow\",\r\n      description: `Normally, operating a light crossbow requires two hands. However, you can shoot, but not load, a light crossbow with one hand at a –2 penalty on attack rolls.`,\r\n      aura: \"-\",\r\n      price: \"35gp\",\r\n      weight: 4,\r\n      activatable: false\r\n    }\r\n    weapons.push(lightCrossbow)\r\n  }\r\n  if (name === 'Maddox'){\r\n    const quarter = {\r\n      id: 2002,\r\n      name: \"Quarterstaff\",\r\n      description: `A quarterstaff is a simple piece of wood, about 5 feet in length.`,\r\n      aura: \"-\",\r\n      price: \"-\",\r\n      weight: 4,\r\n      activatable: false\r\n    }\r\n    weapons.push(quarter)\r\n    const dagger = {\r\n      id: 2003,\r\n      name: \"Dagger\",\r\n      description: `A dagger has a blade that is about 1 foot in length. You get a +2 bonus on Sleight of Hand skill checks made to conceal a dagger on your body.`,\r\n      aura: \"-\",\r\n      price: \"2gp\",\r\n      weight: 1,\r\n      activatable: false\r\n    }\r\n    weapons.push(dagger)\r\n    const flamingCestus = {\r\n      id: 2004,\r\n      name: \"+1 Flaming Cestus\",\r\n      description: `Considered armed is wielded.`,\r\n      aura: \"moderate evocation\",\r\n      price: \"8305gp\",\r\n      weight: 1,\r\n      activatable: false\r\n    }\r\n    weapons.push(flamingCestus)\r\n    const augmented = {\r\n      id: 2005,\r\n      name: \"Augmented Shortsword AN-7f\",\r\n      description: `Polished shortsword that is made of individual inch-long blades. In between seeps out cold mist. Gives off a white-blue glow when the segments are slack.`,\r\n      aura: \"faint necromancy\",\r\n      price: \"2010gp\",\r\n      weight: 2,\r\n      activatable: false\r\n    }\r\n    weapons.push(augmented)\r\n  }\r\n  if (name === 'Merg'){\r\n    const orcDouble = {\r\n      id: 3002,\r\n      name: \"+3 unholy Orc Doubleaxe\",\r\n      description: `A cruel weapon with blades placed at opposite ends of a long haft, an orc double axe is a double weapon. An unholy weapon is imbued with unholy power. This power makes the weapon evil-aligned and thus bypasses the corresponding damage reduction. It deals an extra 2d6 points of damage against all creatures of good alignment. It bestows one permanent negative level on any good creature attempting to wield it. The negative level remains as long as the weapon is in hand and disappears when the weapon is no longer wielded. This negative level cannot be overcome in any way (including restoration spells) while the weapon is wielded.`,\r\n      aura: \"moderate evocation (evil)\",\r\n      price: \"50360gp\",\r\n      weight: 15,\r\n      activatable: false\r\n    }\r\n    weapons.push(orcDouble)\r\n    const dagger = {\r\n      id: 3003,\r\n      name: \"Dagger\",\r\n      description: `A dagger has a blade that is about 1 foot in length. You get a +2 bonus on Sleight of Hand skill checks made to conceal a dagger on your body.`,\r\n      aura: \"-\",\r\n      price: \"2gp\",\r\n      weight: 1,\r\n      activatable: false\r\n    }\r\n    weapons.push(dagger)\r\n    const morningstar = {\r\n      id: 3004,\r\n      name: \"Bane (Construct) Morningstar\",\r\n      description: `A morningstar is a spiked metal ball, affixed to the top of a long handle. A bane weapon excels against certain foes. Against a designated foe, the weapon’s enhancement bonus is +2 better than its actual bonus. It also deals an extra 2d6 points of damage against the foe.`,\r\n      aura: \"moderate conjuration\",\r\n      price: \"2308gp\",\r\n      weight: 6,\r\n      activatable: false\r\n    }\r\n    weapons.push(morningstar)\r\n  } else if (name === 'Robby'){\r\n    const cane = {\r\n      id: 4000,\r\n      name: \"Cane Sword\",\r\n      description: `This slender light blade lies within a wooden container that serves as both its scabbard and hiding place. An observer must make a DC 20 Perception check to realize an undrawn sword cane is a weapon rather than a walking stick; the DC decreases to 10 if the observer is able to handle the weapon. You can’t wield a sword cane in two hands in order to apply 1-1/2 times your Strength modifier to damage.`,\r\n      price: \"45gp\",\r\n      weight: 4,\r\n      activatable: false\r\n    }\r\n    weapons.push(cane)\r\n    const longbow = {\r\n      id: 4001,\r\n      name: \"Longbow\",\r\n      description: `At almost 5 feet in height, a longbow is made up of one solid piece of carefully curved wood. You need two hands to use a bow, regardless of its size. A longbow is too unwieldy to use while you are mounted. If you have a penalty for low Strength, apply it to damage rolls when you use a longbow. If you have a Strength bonus, you can apply it to damage rolls when you use a composite longbow (see below), but not when you use a regular longbow.`,\r\n      price: \"75gp\",\r\n      weight: 3,\r\n      activatable: false\r\n    }\r\n    weapons.push(longbow)\r\n    const harpoon = {\r\n      id: 4002,\r\n      name: \"Harpoon\",\r\n      description: `A harpoon is a barbed spear with an attached rope 50 feet or less in length. Most harpoons have metal points, but some use ivory or are made entirely of wood. If you are proficient in the harpoon, it is a grappling weapon. A harpoon’s weight includes 10 pounds for the weight of 50 feet of hemp rope. The weight can be reduced by using shorter or lighter rope. If you are not proficient with a harpoon, treat it like a spear.`,\r\n      price: \"5gp\",\r\n      weight: 16,\r\n      activatable: false\r\n    }\r\n    weapons.push(harpoon)\r\n    const net = {\r\n      id: 4003,\r\n      name: \"Net\",\r\n      description: <span><p>When you throw a net, you make a ranged touch attack against your target. A net’s maximum range is 10 feet. If you hit, the target is entangled.</p><p>If you control the trailing rope by succeeding on an opposed Strength check while holding it, the entangled creature can move only within the limits that the rope allows. If the entangled creature attempts to cast a spell, it must make a concentration check with a DC of 15 + the spell’s level or be unable to cast the spell.</p><p>An entangled creature can escape with a DC 20 Escape Artist check (a full-round action). The net has 5 hit points and can be burst with a DC 25 Strength check (also a full-round action). A net is useful only against creatures within one size category of you.</p><p>A net must be folded to be thrown effectively. The first time you throw your net in a fight, you make a normal ranged touch attack roll. After the net is unfolded, you take a –4 penalty on attack rolls with it. It takes 2 rounds for a proficient user to fold a net and twice that long for a non-proficient one to do so.</p></span>,\r\n      price: \"20gp\",\r\n      weight: 6,\r\n      activatable: false\r\n    }\r\n    weapons.push(net)\r\n    const lasso = {\r\n      id: 4004,\r\n      name: \"Lasso\",\r\n      description: <span><p>This thrown weapon is a length of rope with a simple open knot on one end that allows you to entangle a foe like you would using a net.</p><p>On a successful hit, the lasso tightens; to use it again you must spend a standard action sliding the knot to enlarge the loop.</p><p>The DC to cast a spell while entangled with a lasso is 10 + the spell level being cast. An entangled creature can slip free with a successful DC 15 Escape Artist check as a full-round action. The lasso has 2 hit points and AC 10, and requires a DC 23 Strength check to break.</p></span>,\r\n      price: \"1sp\",\r\n      weight: 5,\r\n      activatable: false\r\n    }\r\n    weapons.push(lasso)\r\n    const revolver = {\r\n      id: 4005,\r\n      name: \"Revolver\",\r\n      description: 'A revolver is a pistol with a revolving cylinder containing six chambers. Each chamber can hold a metal cartridge, and when one cartridge is shot, the cylinder automatically rotates (no extra hand or action required), readying the next chamber for firing. A revolver uses metal cartridges as ammunition.',\r\n      price: \"4000gp\",\r\n      weight: 4,\r\n      activatable: false\r\n    }\r\n    weapons.push(revolver)\r\n  }\r\n\r\n\r\n  const renderClick = name => {\r\n  }\r\n\r\n  const renderWeapons = () => {\r\n    return weapons.map((w, idx) => {\r\n      return (\r\n        <tr className={renderTableStyling(idx)} key={w.id*3-1}>\r\n          <td>{w.activatable ? <button onClick={() => renderClick(w.name)}>View</button> : null}</td>\r\n          <td><strong>{w.name}</strong></td>\r\n          <td>{w.weight} lb{(w.weight > 1 || w.weight === 0) ? \"s\" : null}</td>\r\n          <td>{w.price}</td>\r\n          <td>{w.description}</td>\r\n        </tr>\r\n      )\r\n    })\r\n  }\r\n\r\n  const renderTableStyling = (index) => {\r\n    return index%2 === 0 ? \"even-row-weapons\" : \"odd-row\"\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {renderWeapons()}\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Weapons)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport localhost from '../../../localhost'\r\n\r\n\r\nconst MagicItems = props => {\r\n  const magicItems = []\r\n  const name = props.character.name\r\n\r\n  if (name === 'Persephone'){\r\n    const tricks = {\r\n      id: 1000,\r\n      name: \"Bag of Tricks (Grey)\",\r\n      description: <span>This small sack appears empty. Anyone reaching into the bag feels a small, fuzzy ball. If the ball is removed and tossed up to 20 feet away, it turns into an animal. The animal serves the character who drew it from the bag for 10 minutes (or until slain or ordered back into the bag), at which point it disappears. It can follow any of the commands described in the Handle Animal skill. <table><thead><tr><th>d%</th><th>Animal</th></tr></thead><tbody><tr><td>01-30</td><td>Bat</td></tr><tr><td>31-60</td><td>Rat</td></tr><tr><td>61-75</td><td>Cat</td></tr><tr><td>76-90</td><td>Weasel</td></tr><tr><td>91-100</td><td>Riding Dog</td></tr></tbody></table> <span>Animals produced are always random, and only one may exist at a time. Up to 10 Animals can be drawn from the bag each week, but no more than two per day.</span></span>,\r\n      aura: \"faint conjuration\",\r\n      price: \"3400 gp\",\r\n      weight: 0,\r\n      activatable: true,\r\n      action: 'standard'\r\n    }\r\n    magicItems.push(tricks)\r\n    const grasping = {\r\n      id: 1001,\r\n      name: \"Rod of Grasping Hexes\",\r\n      description: 'This rod is crafted from a gnarled branch covered in sharp thorns. Three times per day when a wielder of this rod uses a hex (but not an advanced hex or grand hex), she can use this rod’s power to double the range of the hex, so long as the hex has a range measured in feet.',\r\n      aura: \"strong (no school)\",\r\n      price: \"11000 gp\",\r\n      weight: 5,\r\n      activatable: true,\r\n      limit: 3,\r\n      action: 'free'\r\n    }\r\n    magicItems.push(grasping)\r\n    const quickChangeMask = {\r\n      id: 1002,\r\n      name: \"Quick-Change Mask\",\r\n      description: <span>A wearer can remove this mask as a move action to change his appearance as if using <em className='underline-hover' onClick={() => props.editModal('spell', null, 55)}>disguise self</em>. The effect persists for 10 minutes. A vigilante can instead remove a quick-change mask to switch his identity as a move action. If the mask is used in this way, the effect functions just like changing identities normally (except faster), and doesn’t have a limited duration. Regardless of which way he is using a quick-change mask, the user can attempt a Bluff check to create a diversion so he can use Stealth as part of the same move action he uses to activate the mask. The mask dissolves when used.</span>,\r\n      aura: \"faint illusion\",\r\n      price: \"650 gp\",\r\n      weight: '-',\r\n      activatable: true,\r\n      action: 'move',\r\n      expendable: true\r\n    }\r\n    magicItems.push(quickChangeMask)\r\n    const vastIntelligence = {\r\n      id: 1003,\r\n      name: \"Headband of Vast Intelligence +2\",\r\n      description: <span>This intricate gold headband is decorated with several small blue and deep purple gemstones.The headband grants the wearer an enhancement bonus to Intelligence of +2. A <em>headband of vast intelligence</em> has one skill associated with it: <strong>Religion</strong>. The headband grants a number of skill ranks in Religion equal to the wearer’s total Hit Dice (<strong>7 skill ranks</strong>). These ranks <strong>do not</strong> stack with the ranks a creature already possesses.</span>,\r\n      aura: \"moderate transmutation\",\r\n      price: \"4000 gp\",\r\n      weight: '1',\r\n      activatable: false\r\n    }\r\n    magicItems.push(vastIntelligence)\r\n    const wandUnseenServant = {\r\n      id: 1004,\r\n      name: \"Wand of Unseen Servant\",\r\n      description: <span>Cast <em className='underline-hover' onClick={() => props.editModal('spell', null, 62)}>unseen servant</em> 50 times</span>,\r\n      aura: \"faint conjuration\",\r\n      price: \"750 gp\",\r\n      weight: '-',\r\n      activatable: true,\r\n      action: 'standard',\r\n      limit: 50,\r\n      starting: 49\r\n    }\r\n    magicItems.push(wandUnseenServant)\r\n  } else if (name === \"Cedrick\"){\r\n    const spiderClimb = {\r\n      id: 22000,\r\n      name: \"Slippers of Spider Climb\",\r\n      description: 'When worn, a pair of these slippers enables movement on vertical surfaces or even upside down along ceilings, leaving the wearer’s hands free. Her climb speed is 20 feet. Severely slippery surfaces—icy, oiled, or greased surfaces—make these slippers useless. The slippers can be used for 10 minutes per day, split up as the wearer chooses (minimum 1 minute per use).',\r\n      aura: \"faint transmutation\",\r\n      price: \"4800 gp\",\r\n      weight: '.5',\r\n      activatable: false\r\n    }\r\n    magicItems.push(spiderClimb)\r\n    const potCureModerate = {\r\n      id: 22022,\r\n      name: \"Potion of Cure Moderate Wounds\",\r\n      description: 'Heal 2d8+3',\r\n      aura: \"faint conjuration\",\r\n      price: \"300 gp\",\r\n      weight: '-',\r\n      activatable: true,\r\n      action: 'standard',\r\n      expendable: true\r\n    }\r\n    magicItems.push(potCureModerate)\r\n    const eek = {id: 22023, name: \"Pint of Eek\", description: 'After consuming, you immediately breath out a blast of sonic energy in a 30 ft line. All affected creatures take 3d6 sonic damage, or half that if they succeed at a DC 15 Reflex save.', aura: \"moderate evocation\", price: \"???\", weight: '-', activatable: true, action: 'standard', expendable: true}\r\n    magicItems.push(eek)\r\n  } else if (name === \"Maddox\"){\r\n    const sizeStaff = {id: 3010, name: \"Staff of Size Alteration\", description: <span>This staff of dark wood is stouter and sturdier than most magical staves, with a gnarled and twisted knot of wood at the top end. It allows use of the following spells: <em className='underline-hover' onClick={() => props.editModal('spell', null, 64)}>enlarge person</em> (1 charge), <em className='underline-hover' onClick={() => props.editModal('spell', null, 65)}>reduce person</em> (1 charge), <em className='underline-hover' onClick={() => props.editModal('spell', null, 66)}>shrink item</em> (2 charges), <em className='underline-hover' onClick={() => props.editModal('spell', null, 67)}>mass enlarge person</em> (3 charges), <em className='underline-hover' onClick={() => props.editModal('spell', null, 67)}>mass reduce person</em> (3 charges)</span>, aura: \"moderate transmutation\", price: \"26150 gp\", weight: '5', limit: 10, redux: 'sizeStaff' }\r\n    magicItems.push(sizeStaff)\r\n    const fireballNecklace = {id: 3011, name: \"Necklace of Fireballs III\", description: <span><p>This item appears to be a string or cluster of spherical beads, sometimes with the ends tied together to form a necklace.</p><p>(It does not count as an item worn around the neck for the purpose of determining which of a character’s worn magic items is effective.) If a character holds it, however, all can see the strand as it really is—a golden chain from which hang a number of golden spheres. The spheres are detachable by the wearer (and only by the wearer), who can easily hurl one of them up to 70 feet. When a sphere arrives at the end of its trajectory, it detonates as a <em className='underline-hover' onClick={() => props.editModal('spell', null, 66)}>fireball</em> spell (Reflex DC 14 half).</p><p>Spheres come in different strengths, ranging from those that deal 2d6 points of fire damage to those that deal 10d6. The market price of a sphere is 150 gp for each die of damage it deals.</p><p>Each necklace of fireballs contains a combination of spheres of various strengths. Some traditional combinations, designated types I through VII, are detailed above.</p><p>If the necklace is being worn or carried by a character who fails her saving throw against a magical fire attack, the item must make a saving throw as well (with a save bonus of +7). If the necklace fails to save, all its remaining spheres detonate simultaneously, often with regrettable consequences for the wearer.</p></span>, aura: \"moderate evocation\", price: \"4350 gp\", weight: 1}\r\n    magicItems.push(fireballNecklace)\r\n    const handy = {id: 3012, name: \"Handy Haversack\", description: 'A backpack of this sort appears to be well made, well used, and quite ordinary. It is constructed of finely tanned leather, and the straps have brass hardware and buckles. It has two side pouches, each of which appears large enough to hold about a quart of material. In fact, each is like a bag of holding and can actually hold material of as much as 2 cubic feet in volume or 20 pounds in weight. The large central portion of the pack can contain up to 8 cubic feet or 80 pounds of material. Even when so filled, the backpack always weighs only 5 pounds. While such storage is useful enough, the pack has an even greater power. When the wearer reaches into it for a specific item, that item is always on top. Thus, no digging around and fumbling is ever necessary to find what a haversack contains. Retrieving any specific item from a haversack is a move action, but it does not provoke the attacks of opportunity that retrieving a stored item usually does.', aura: \"moderate conjuration\", price: \"2000 gp\", weight: 5, activatable: true, action: 'move', modal: 'handy'}\r\n    magicItems.push(handy)\r\n    const almanac = {id: 3013, name: \"Monster Almanac\", description: <span>This sketchbook has up to 100 pages full of scribbled notes and hasty sketches about monsters. When the user focuses on a particular page, the text and pictures start moving, revealing more details about the creature. The user must spend 10 minutes researching a particular type of monster to get any benefit from the almanac.\r\n    If the user is trained in the appropriate Knowledge skill to identify a monster, he gets a +2 circumstance bonus on his check. He can attempt a Knowledge check to identify a creature despite being untrained in the appropriate skill (but without the +2 bonus) as long as the check’s DC is no higher than 15.</span>, aura: \"faint divination\", price: \"4000 gp\", weight: 0.5, activatable: true, action: 'long'}\r\n    magicItems.push(almanac)\r\n    const astrolabe = {id: 3014, name: \"Astrolabe\", description: <span><p>An astralabe is essentially an extraplanar compass: a device that explorers of the planes can use to orient themselves in realms without shared cardinal directions or physical laws.</p><p>The device creates an abstraction of north, east, south, and west, as well as up, down, in, out, back, forward, past, future, and a variety of other directions that can prove helpful in navigating the planes. Despite diverse cosmetic differences, astralabes share a uniform internal design and, by and large, give consistent, shared directions. As such, many—if not most— planar cartographers utilize astralabes when creating maps, allowing travelers to navigate lands without magnetic poles or with malleable terrains as though there were one consistent north. The device keeps a constant orientation, but it does not adjust or circumvent hazards or show particular paths. Any creature not on the Material Plane who employs an astralabe while attempting a Knowledge, Survival, or similar skill check to navigate gains a +4 bonus on that check.</p><p>Additionally, an astralabe can aid a traveler in preparing to travel to another plane. The device can read emanations from portals, gates, and other connections between the planes and display them upon its surface. These displays can be interpreted with a successful Knowledge (planes) check. A user must typically succeed at a DC 25 Knowledge (planes) check to correctly read an astralabe, though demiplanes and stranger realms might require a higher DC or yield inconclusive results. Those who succeed learn the name of the plane beyond the portal, though not the portal’s exact location upon that plane—it doesn’t reveal tiers, layers, or subrealms, in the case of planes divided into multiple parts. Those who fail the check are unable to tell what plane lies beyond.</p><p>Those who fail the check by 10 or more incorrectly identify what plane lies beyond, with the details of this misinformation determined by the GM.</p><p>Astralabes generally don’t function on the Material Plane, shutting down and emanating an aura of only faint divination.</p><p>However, should one be brought within 20 feet of a portal or similar passage to another plane, it becomes active for as long as it remains nearby. An astralabe operates continuously while on any plane other than the Material Plane.</p></span>, aura: \"moderate divination\", price: \"16000 gp\", weight: 3}\r\n    magicItems.push(astrolabe)\r\n  } else if (name === 'Merg'){\r\n    const elixirFire = {id: 2004, name: \"Elixir of Fire Breath\", description: 'This strange bubbling elixir bestows upon the drinker the ability to spit gouts of flame. He can breathe fire up to three times, each time dealing 4d6 points of fire damage to a single target up to 25 feet away. The victim can attempt a DC 13 Reflex save for half damage. Unused blasts of fire dissipate 1 hour after the liquid is consumed.', aura: \"moderate evocation\", price: \"1100 gp\", weight: '-', activatable: true, action: 'standard', expendable: true}\r\n    magicItems.push(elixirFire)\r\n    const blindCask = {id: 2005, name: \"Blind Man's Cask\", description: 'This black and red ceramic pot is about 5 ft tall, and does not change wieght if the only thing within it is alcohol. There is an an accompanying rubber gummy mouth guard. If the mouth guard is within 20 ft of the cask, anyone with the mouth guard in their mouth can drink from the cask as if the liquid inside was teleporting. Any liquid can be consumed this way, but the connection is lost if more than half of the container is filled with a non-liquid substance.', aura: \"faint conjuration\", price: \"1500 gp\", weight: 20}\r\n    magicItems.push(blindCask)\r\n  } else if (name === 'Robby'){\r\n    const pirates = {id: 3000, name: \"Pirate's Eye Patch\", description: <span>This black silk eye patch is adorned by a skull and crossbones worked in silver thread. The wearer of this patch gains a +2 competence bonus on Swim and Climb checks. In addition, once per day, the wearer of this eye patch can gain the effects of either <em className='underline-hover' onClick={() => props.editModal('spell', null, 70)}>touch of the sea</em> or <em className='underline-hover' onClick={() => props.editModal('spell', null, 52)}>expeditious retreat</em> on command (wearer’s choice).</span>, aura: \"faint transmutation\", price: '2600 gp', weight: '-'}\r\n    magicItems.push(pirates)\r\n    const quickShirt = {id: 3001, name: \"Quick Runner's Shirt\", description: `This shirt is made of light, gossamer-thin fabric embroidered with arrangements of winged feet. Once per day as a swift action, the wearer can take an additional move action to move (${props.character_info.hardcode.speed} ft) and then immediately end his turn, losing any unspent actions. A character must wear this shirt continuously for 24 hours before he can activate this ability.`, aura: \"faint transmutation\", price: \"1000 gp\", weight: '-', activatable: true, action: 'swift', limit: 1}\r\n    magicItems.push(quickShirt)\r\n    const jabberjaw = {id: 3002, name: \"Jabberjaw Gems\", description: `When a gem is held, your spokemon language (heard and mouthed) appear as if you were speaking the gem's associated language. Whoever is wielding the gem or touching the wielder can hear the actual language spoken. If you hold multiple gems, your language is an amalgam of all the gems. For listeners who know all of the languages spoken, they must make a DC 15 Linguistics check to comprehend the speaker. For each language a listener doesn't know, increase the DC by 5.`, aura: \"moderate transmutation\", price: \"6000 gp\", weight: '-'}\r\n    magicItems.push(jabberjaw)\r\n    const origami = {id: 3003, name: \"Origami Boat\", description: 'If this makes contact with water, it gradually (over the course of 5 minutes) increase its size until it becomes a row boat with a space of 20 ft by 10 ft in the same shape as the paper. After 2 hours, the boat gradually (over the course of 10 minutes) shrinks back to its smaller form. This transmation resets after 12 hours.', aura: \"moderate transmutation\", price: \"6000 gp\", weight: '-'}\r\n    magicItems.push(origami)\r\n    const brassCloak = {id: 3004, name: \"Brass Griffin Cloak\", description: <span>While wearing this cloak, if the wearer is damaged by fire damage, they are not affected by it; the cloak draws the energy towards it. Once the clock has absorbed 50 damage this way, the cloak bruns up and is destroyed, and any excess damage is dealt to the wearer. Once a day, as a move action, you may be affected by the spell <em className='underline-hover' onClick={() => props.editModal('spell', null, 75)}>endure elements</em>. The duration of this effect is 1 hour.</span>, aura: \"moderate transmutation\", price: \"6000 gp\", weight: '-'}\r\n    magicItems.push(brassCloak)\r\n  }\r\n\r\n  const renderUse = (magicItem, miFeature, action, toggleable) => {\r\n    if (action === 'cannot-cast'){\r\n      return null\r\n    }\r\n    if ( !props.character_info.actions[action] || action === 'use' ){\r\n      if (action !== 'use'){\r\n        props.dispatch({type: 'TRIGGER ACTION', action})\r\n      }\r\n      let usage = miFeature.usage\r\n      if (usage){\r\n        let cmifu = magicItem.character_magic_item_feature_usages.find(fu => fu.feature_usage_id === miFeature.usage.id)\r\n        let remainingUsage = usage.limit - cmifu.current_usage\r\n        if (remainingUsage <= 1 && usage.destroy_after_use){\r\n          console.log('delete')\r\n          // delete fetch\r\n          fetch(`${localhost}/api/v1/character_magic_items/${magicItem.id}`, {\r\n            method: 'DELETE'\r\n          })\r\n          .then(r => r.json())\r\n          .then(data => {\r\n            if (data.status === 404 || data.status === 500){\r\n              console.log(data)\r\n            } else {\r\n              props.dispatch({type: 'CHARACTER', character: data.character })\r\n            }\r\n          })\r\n        } else if (toggleable){\r\n          console.log(toggleable)\r\n          props.editModal('cFeature', null, magicItem.id, 'character_magic_items')\r\n        } else {\r\n          console.log('patch')\r\n          // patch fetch\r\n          let count = 1\r\n          // this count is a mistake, it does not accurate grab the value of whatever feature is being used\r\n          fetch(`${localhost}/api/v1/character_magic_items/${cmifu.id}`, {\r\n            method: 'PATCH',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'Accept': 'application/json'\r\n            },\r\n            body: JSON.stringify({count})\r\n          })\r\n          .then(r => r.json())\r\n          .then(data => {\r\n            if (data.status === 404 || data.status === 500){\r\n              console.log(data)\r\n            } else {\r\n              props.dispatch({type: 'CHARACTER', character: data.character })\r\n            }\r\n          })\r\n        }\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n  const renderClick = (name, limit, startingValue, expendable, modal) => {\r\n    if (name === \"Rod of Grasping Hexes\" || name === 'Wand of Unseen Servant' || name === \"Staff of Size Alteration\" || name === \"Quick Runner's Shirt\"){\r\n      if (limit){\r\n        // if limits exist in redux\r\n        let limits = props.character_info.hardcode.limits\r\n        // if limits doesn't exist, dispatch\r\n        // if limits does exist, try to find the specifc one\r\n        // if that one isn't found, dispatch\r\n        // if that one is found, check to see if the number of casts is equal to the limit\r\n        // if casts is less than limit, dispatch\r\n        // if casts is equal to limit, don't\r\n        if (limits){\r\n          let found = props.character_info.hardcode.limits.find(l => l.name === name)\r\n          if (found){\r\n            if (startingValue && found.cast < startingValue){\r\n              props.dispatch({type: 'LIMIT CASTING', name})\r\n              if (name === \"Quick Runner's Shirt\"){\r\n                props.dispatch({type: 'TRIGGER ACTION', action: 'full'})\r\n              }\r\n            } else if (found.cast < limit){\r\n              props.dispatch({type: 'LIMIT CASTING', name})\r\n              if (name === \"Quick Runner's Shirt\"){\r\n                props.dispatch({type: 'TRIGGER ACTION', action: 'full'})\r\n              }\r\n            }\r\n          } else {\r\n            props.dispatch({type: 'LIMIT CASTING', name})\r\n            if (name === \"Quick Runner's Shirt\"){\r\n              props.dispatch({type: 'TRIGGER ACTION', action: 'full'})\r\n            }\r\n          }\r\n        } else {\r\n          props.dispatch({type: 'LIMIT CASTING', name})\r\n          if (name === \"Quick Runner's Shirt\"){\r\n            props.dispatch({type: 'TRIGGER ACTION', action: 'full'})\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (name === \"Quick-Change Mask\"){\r\n      props.dispatch({type: 'TRIGGER ACTION', action: 'move'})\r\n    }\r\n    if (name === \"Bag of Tricks (Grey)\" || name === 'Wand of Unseen Servant'){\r\n      props.dispatch({type: 'TRIGGER ACTION', action: 'standard'})\r\n    }\r\n    if (expendable){\r\n      props.dispatch({type: 'USED ITEM', name})\r\n    }\r\n    if (modal){\r\n      props.editModal(modal)\r\n    }\r\n  }\r\n\r\n  const remappedActions = a => {\r\n    switch(a){\r\n      case 'Standard Action':\r\n        return 'standard'\r\n      case 'Swift Action':\r\n        return 'swift'\r\n      case 'Move Action':\r\n        return 'move'\r\n      case 'Full-Round Action':\r\n        return 'full'\r\n      case 'Immediate Action':\r\n        return 'immediate'\r\n      case 'Free Action':\r\n        return 'free'\r\n      default:\r\n        return a\r\n    }\r\n  }\r\n\r\n  const renderMagicItems = () => {\r\n    // not hardcoding\r\n    let ownedMagicItems = props.character.character_magic_items\r\n    // only works on owned magic items!\r\n    return ownedMagicItems.map((cmi, idx) => {\r\n\r\n      // let limits = props.character_info.hardcode.limits\r\n      // let amount = true\r\n      // if (limits && mi.limit){\r\n      //   let found = limits.find(l => l.name === mi.name)\r\n      //   if (mi.starting){\r\n      //     amount = found ? mi.starting - found.cast : mi.starting\r\n      //   } else {\r\n      //     amount = found ? mi.limit - found.cast : mi.limit\r\n      //   }\r\n      // } else {\r\n      //   if (mi.limit){\r\n      //     amount = mi.starting ? mi.starting : mi.limit\r\n      //   }\r\n      // }\r\n      // let used = props.character_info.hardcode.usedItems\r\n      // if (used && used.includes(mi.name)){\r\n      //   return null\r\n      // } else {\r\n        let actionableItems = cmi.magic_item.features.filter(f => {\r\n          let actionable = false\r\n          actionable = f.action ? true : actionable\r\n          actionable = f.usage ? f.usage.toggleable ? true : actionable : actionable\r\n          return actionable\r\n        })\r\n        return actionableItems.map(i => {\r\n          // NOTE: i is representing one feature of the cmi.magicItem\r\n          let action = i.action ? remappedActions(i.action.name) : 'use'\r\n          let className = action === 'use' ? 'use' : renderClassName(action, i, cmi)\r\n          let usage = i.usage\r\n          let toggleable = usage ? usage.toggleable : false\r\n          return (\r\n            <tr className={renderTableStyling(idx)} key={cmi.id*3-1}>\r\n            {/* <td>{mi.activatable ? <button className={mi.action && !props.character_info.actions[mi.action] && amount ? mi.action : 'cannot-cast'} onClick={() => renderClick(mi.name, mi.limit, mi.starting, mi.expendable, mi.modal)}>Use</button> : null}</td>*/}\r\n            <td><button className={className} onClick={() => renderUse(cmi, i, className, toggleable)}>Use</button></td>\r\n            <td className='underline-hover' onClick={() => props.editModal('magic item', null, cmi.id)}><strong>{cmi.magic_item.name}</strong>{/* cmi.magic_itemlimit && cmi.magic_item.activate ? `(${amount}/${cmi.magic_item.limit})` : null*/}{cmi.magic_item.redux ? `(${cmi.magic_item.limit - props.character_info.hardcode[cmi.magic_item.redux] || 10}/${cmi.magic_item.limit})` : null}</td>\r\n            </tr>\r\n          )\r\n        })\r\n      // }\r\n    })\r\n  }\r\n\r\n  const renderTableStyling = (index) => {\r\n    return index%2 === 0 ? \"even-row-magic\" : \"odd-row\"\r\n  }\r\n\r\n  const renderClassName = (action, magicItem, cmi) => {\r\n    let isTheActionAvailable = !props.character_info.actions[action]\r\n    let magicItemUsage = magicItem.usage\r\n    if (magicItemUsage){\r\n      let featureUsage = cmi.character_magic_item_feature_usages.find(cmifu => cmifu.feature_usage_id === magicItemUsage.id)\r\n\r\n      let limit = magicItemUsage.limit\r\n      let current = featureUsage.current_usage || 0\r\n\r\n      if (current >= limit){\r\n        return 'cannot-cast'\r\n      }\r\n    }\r\n    if (isTheActionAvailable){\r\n      return action\r\n    } else {\r\n      return 'cannot-cast'\r\n    }\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {renderMagicItems()}\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(MagicItems)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nconst Poisons = props => {\r\n  const poisons = []\r\n  const name = props.character.name\r\n\r\n  if (name === 'Persephone'){\r\n    const darkReaver = {\r\n      id: 300,\r\n      name: 'Dark Reaver Powder',\r\n      price: '800 gp',\r\n      type: 'ingested',\r\n      save: 'Fort DC 18',\r\n      onset: '10 minutes',\r\n      frequency: '1/minute for 6 minutes',\r\n      cure: '2 consecutive saves',\r\n      effect: '1d3 Con damage and 1 Str damage',\r\n      activatable: false,\r\n      limit: '2'\r\n    }\r\n    poisons.push(darkReaver)\r\n    const purpleWorm = {\r\n      id: 301,\r\n      name: 'Purple Worm Poison',\r\n      price: '700 gp',\r\n      type: 'injury',\r\n      save: 'Fort DC 24',\r\n      onset: '-',\r\n      frequency: '1/round for 6 rounds',\r\n      cure: '2 consecutive saves',\r\n      effect: '1d3 Str damage',\r\n      activatable: false,\r\n      limit: '8'\r\n    }\r\n    poisons.push(purpleWorm)\r\n    const insanityMist = {\r\n      id: 302,\r\n      name: 'Insanity Mist',\r\n      price: '1500 gp',\r\n      type: 'inhaled',\r\n      save: 'Fort DC 15',\r\n      onset: '-',\r\n      frequency: '1/round for 6 rounds',\r\n      cure: '1 save',\r\n      effect: '1d3 Wis damage',\r\n      activatable: false,\r\n      limit: '1'\r\n    }\r\n    poisons.push(insanityMist)\r\n    const wyvernPoison = {\r\n      id: 303,\r\n      name: 'Wyvern Poison',\r\n      price: '3000 gp',\r\n      type: 'injury',\r\n      save: 'Fort DC 17',\r\n      onset: '-',\r\n      frequency: '1/round for 6 rounds',\r\n      cure: '2 consecutive saves',\r\n      effect: '1d4 Con damage',\r\n      activatable: false,\r\n      limit: '1'\r\n    }\r\n    poisons.push(wyvernPoison)\r\n  }\r\n\r\n  const renderClick = name => {\r\n  }\r\n\r\n  const renderPoisons = () => {\r\n    return poisons.map((p, idx) => {\r\n      return (\r\n        <tr className={renderTableStyling(idx)} key={p.id*3-1}>\r\n          <td>({p.limit})</td>\r\n          <td><strong>{p.name}</strong></td>\r\n          <td>{p.price}</td>\r\n          <td>{p.type}</td>\r\n          <td>{p.save}</td>\r\n          <td>{p.effect}</td>\r\n          <td>{p.onset}</td>\r\n          <td>{p.frequency}</td>\r\n          <td>{p.cure}</td>\r\n        </tr>\r\n      )\r\n    })\r\n  }\r\n\r\n  const renderTableStyling = (index) => {\r\n    return index%2 === 0 ? \"even-row-poisons\" : \"odd-row\"\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {poisons.length ? <h5 className='underline-hover' onClick={() => props.editModal('poisons')}>Poisons</h5> : null}\r\n      {poisons.length ? <table>\r\n        <thead>\r\n          <tr>\r\n            <th>Amount</th>\r\n            <th>Name</th>\r\n            <th>Price</th>\r\n            <th>Type</th>\r\n            <th>Save</th>\r\n            <th>Effect</th>\r\n            <th>Onset</th>\r\n            <th>Frequency</th>\r\n            <th>Cure</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {renderPoisons()}\r\n        </tbody>\r\n      </table> : null}\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Poisons)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nconst Armor = props => {\r\n  const armors = []\r\n  const name = props.character.name\r\n\r\n  if (name === 'Cedrick'){\r\n    const wooden = {\r\n      id: 150,\r\n      name: \"Wooden\",\r\n      description: `No ACP for swim checks`,\r\n      type: \"Light\",\r\n      price: \"20 gp\",\r\n      weight: 25,\r\n      armorBonus: 3,\r\n      maxDex: 3,\r\n      acp: 1,\r\n      arcane: 15,\r\n      speed: '30 ft/20 ft'\r\n    }\r\n    armors.push(wooden)\r\n  } else if (name === 'Maddox'){\r\n    const bolsteringFull = {\r\n      id: 160,\r\n      name: \"+1 bolstering full-plate\",\r\n      description: `This metal suit comprises multiple pieces of interconnected and overlaying metal plates, incorporating the benefits of numerous types of lesser armor. A complete suit of full plate (or platemail, as it is often called) includes gauntlets, heavy leather boots, a visored helmet, and a thick layer of padding that is worn underneath the armor. Bolstering: Anytime the wearer of bolstering armor damages a creature with a melee or ranged attack, he gains a +2 competence bonus on saving throws against that creature’s abilities until the start of his next turn.`,\r\n      type: \"Heavy\",\r\n      price: \"5500 gp\",\r\n      weight: 50,\r\n      armorBonus: 9,\r\n      maxDex: 1,\r\n      acp: 5,\r\n      arcane: 35,\r\n      speed: '20 ft/15 ft'\r\n    }\r\n    armors.push(bolsteringFull)\r\n  } else if (name === 'Merg'){\r\n    const chainShirt = {\r\n      id: 171,\r\n      name: \"+1 chain shirt\",\r\n      description: `Covering the torso, this shirt is made up of thousands of interlocking metal rings.`,\r\n      type: \"Light\",\r\n      price: \"1250 gp\",\r\n      weight: 25,\r\n      armorBonus: 5,\r\n      maxDex: 4,\r\n      acp: 1,\r\n      arcane: 20,\r\n      speed: '30 ft/20 ft'\r\n    }\r\n    armors.push(chainShirt)\r\n  } else if (name === 'Robby'){\r\n    const padded = {\r\n      id: 180,\r\n      name: \"Padded\",\r\n      description: `More than simple clothing, padded armor combines heavy, quilted cloth and layers of densely packed stuffing to create a cheap and basic protection. It is typically worn by those not intending to face lethal combat or those who wish their maneuverability to be impacted as little as possible.`,\r\n      type: \"Light\",\r\n      price: \"5 gp\",\r\n      weight: 10,\r\n      armorBonus: 1,\r\n      maxDex: 8,\r\n      acp: 0,\r\n      arcane: 5,\r\n      speed: '30 ft/20 ft'\r\n    }\r\n    armors.push(padded)\r\n  }\r\n\r\n  const renderClick = name => {\r\n  }\r\n\r\n  const renderArmor = () => {\r\n    return armors.map((a, idx) => {\r\n      let armor = props.character_info.hardcode.armor\r\n      return (\r\n        <tr className={renderTableStyling(idx)} key={a.id*3-1}>\r\n          <td><button className='long' onClick={() => props.dispatch({type: 'ACTIVE ARMOR', name: a.name})}>{armor === a.name ? 'Doff' : 'Don'}</button></td>\r\n          <td><strong>{a.name}</strong></td>\r\n          <td>{a.type}</td>\r\n          <td>+{a.armorBonus}</td>\r\n          <td>+{a.maxDex}</td>\r\n          <td>-{a.acp}</td>\r\n          <td>{a.arcane}%</td>\r\n          <td>{a.speed}</td>\r\n          <td>{a.description}</td>\r\n          <td>{a.weight} lb{(a.weight > 1 || a.weight === 0) ? \"s\" : null}</td>\r\n          <td>{a.price}</td>\r\n        </tr>\r\n      )\r\n    })\r\n  }\r\n\r\n  const renderTableStyling = (index) => {\r\n    return index%2 === 0 ? \"even-row-armor\" : \"odd-row\"\r\n  }\r\n\r\n  const renderTooltip = (e, type) => {\r\n    let message = ''\r\n    if (type === \"Dex\"){\r\n      message = 'Your maximum bonus to Dexterity applied to your AC, even if you have a higher bonus.'\r\n    }\r\n    if (type === \"ACP\"){\r\n      message = 'Armor Check Penalty: This is a penalty that applies to all Strength and Dexterity checks and skill checks.'\r\n    }\r\n    if (type === \"Arcane\"){\r\n      message = 'When you cast an Arcane Spell that require a Somatic component, roll a d100. If you roll within the total Spell Failure Percentage, your spell fails and your action is wasted.'\r\n    }\r\n    props.renderTooltip(e, message)\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {armors.length ? <table>\r\n        <thead>\r\n          <tr>\r\n            <th>Worn</th>\r\n            <th>Name</th>\r\n            <th>Type</th>\r\n            <th>Armor Bonus</th>\r\n            <th onMouseOver={e => renderTooltip(e, 'Dex')} onMouseOut={props.mouseOut}>Max Dex.*</th>\r\n            <th onMouseOver={e => renderTooltip(e, 'ACP')} onMouseOut={props.mouseOut}>ACP*</th>\r\n            <th onMouseOver={e => renderTooltip(e, 'Arcane')} onMouseOut={props.mouseOut}>Arcane Failure*</th>\r\n            <th>Speed</th>\r\n            <th>Desc</th>\r\n            <th>Weight</th>\r\n            <th>Price</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {renderArmor()}\r\n        </tbody>\r\n      </table> : null}\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Armor)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport Rings from './equipment/rings'\r\nimport Legendary from './equipment/legendary'\r\nimport Weapons from './equipment/weapons'\r\nimport Magic from './equipment/magic'\r\nimport Poisons from './equipment/poisons'\r\nimport Armor from './equipment/armor'\r\n\r\nconst Equipment = props => {\r\n\r\n  return (\r\n    <section>\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>Action</th>\r\n            <th>Name</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <Legendary editModal={props.editModal}/>\r\n          <Magic editModal={props.editModal}/>\r\n          <Rings editModal={props.editModal}/>\r\n          <Weapons editModal={props.editModal}/>\r\n        </tbody>\r\n      </table>\r\n      <Armor editModal={props.editModal} renderTooltip={props.renderTooltip} mouseOut={props.mouseOut}/>\r\n      <Poisons editModal={props.editModal}/>\r\n    </section>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Equipment)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport ActionTabs from './action_tabs'\r\nimport Spellcasting from '../components/actions/spellcasting'\r\nimport Abilities from '../components/actions/abilities'\r\nimport Attacks from '../components/actions/attacks'\r\nimport Basics from '../components/actions/basics'\r\nimport Equipment from '../components/actions/equipment'\r\nimport CombatManeuvers from '../components/actions/basics/combat_maneuver'\r\nimport Misc from '../components/actions/misc'\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faSortDown } from '@fortawesome/free-solid-svg-icons'\r\nimport { faCircle } from '@fortawesome/free-solid-svg-icons'\r\n\r\nimport { pluser } from '../utils/fuf'\r\nimport { baseAttackBonus, pluserAB, combatManeuvers } from '../utils/calculations/attack_bonus'\r\nimport { tooltipAction, diceAction } from '../utils/action_creator/popups'\r\nimport { abilityScoreMod } from '../utils/calculations/ability_scores'\r\n\r\n\r\nclass Actions extends React.Component {\r\n  state= {\r\n    activeTab: \"Attacks\"\r\n  }\r\n\r\n  componentDidMount(){\r\n    if (localStorage.computer === \"false\"){\r\n      this.setState({activeTab: 'none'})\r\n    }\r\n  }\r\n\r\n  renderTabClick = (choice) => {\r\n    if (localStorage.computer === \"false\"){\r\n      if (choice === this.state.activeTab){\r\n        this.setState({activeTab: 'none'})\r\n      } else {\r\n        this.setState({activeTab: choice})\r\n      }\r\n    } else {\r\n      this.setState({activeTab: choice})\r\n    }\r\n  }\r\n\r\n  renderMobileTabClassNames = (tab) => {\r\n    let className = ''\r\n    if (tab === this.state.activeTab){\r\n      className += 'mobile-feature-selected-tab'\r\n    } else {\r\n      className += 'mobile-feature-tab'\r\n    }\r\n    className = tab === 'Attacks' ? className + ' mobile-tab-top' : className\r\n    className = tab === 'Equipment' && tab !== this.state.activeTab ? className + ' mobile-tab-bottom' : className\r\n    className += ' shadow'\r\n    return className\r\n  }\r\n\r\n\trenderAttackDetails = () => {\r\n\t\tlet bab = pluser(baseAttackBonus(this.props.characterInfo.classes, this.props.character.uniq_klasses))\r\n\t\tlet melee = pluserAB(this.props.character, this.props.characterInfo, \"melee\")\r\n\t\tlet ranged = pluserAB(this.props.character, this.props.characterInfo, \"range\")\r\n\t\tlet cm = combatManeuvers(this.props.character, this.props.characterInfo)\r\n\t\tlet cmb = pluser(cm.bonus)\r\n\t\tlet cmd = cm.defense\r\n\r\n\t\tconst dispatchTooltip = (e, message) => {\r\n\t\t\tlet element = e.target\r\n\r\n\t\t\ttooltipAction(message, element)\r\n\r\n\t\t}\r\n\r\n\r\n\r\n\t\tlet pertinentTabs = [\"Attacks\", \"Tactics\", \"Combat Maneuvers\"]\r\n\t\tif (pertinentTabs.includes(this.state.activeTab)) {\r\n\t\t\tlet init = this.calcInit()\r\n\t\t\treturn (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<strong onMouseOver={(e) => dispatchTooltip(e, \"Base Attack Bonus\")} onMouseOut={(e) => dispatchTooltip(e, \"Base Attack Bonus\")}>BAB:</strong> {bab} | <strong>Melee AB</strong> <span style={{border: `1px solid #${this.props.settings.borderColor}`, borderRadius: \"0.3em\", cursor: \"default\", padding: \"1px 2px\"}} onClick={() => this.rollDice(\"Melee Attack Roll\", melee)}>{melee}</span> | <strong>Ranged AB</strong> <span style={{border: `1px solid #${this.props.settings.borderColor}`, borderRadius: \"0.3em\", cursor: \"default\", padding: \"1px 2px\"}} onClick={() => this.rollDice(\"Ranged Attack Roll\", ranged)}>{ranged}</span> | <strong>Initiative:</strong> <span style={{border: `1px solid #${this.props.settings.borderColor}`, borderRadius: \"0.3em\", cursor: \"default\", padding: \"1px 2px\"}} onClick={() => this.rollDice(\"Initiative\", init)}>{init}</span>\r\n\t\t\t\t\t<br/>\r\n\t\t\t\t\t<strong onMouseOver={(e) => dispatchTooltip(e, \"Combat Maneuver Bonus\")} onMouseOut={(e) => dispatchTooltip(e, \"Combat Maneuver Bonus\")}>CMB</strong> <span style={{border: `1px solid #${this.props.settings.borderColor}`, borderRadius: \"0.3em\", cursor: \"default\", padding: \"1px 2px\"}} onClick={() => this.rollDice(\"Combat Maneuver Check\", cmb)}>{cmb}</span> | <strong onMouseOver={(e) => dispatchTooltip(e, \"Combat Maneuver Defense\")} onMouseOut={(e) => dispatchTooltip(e, \"Combat Maneuver Defense\")}>CMD</strong> {cmd}\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t} else {return null}\r\n\t}\r\n\r\n\tcalcInit = () => {\r\n\t\tconst initiativeArray = () => {\r\n\t\t\t// NEW DATA\r\n\t\t\tlet array = []\r\n\t\t\tlet permanent = 0\r\n\t\t\tlet temporary = 0\r\n\r\n\t\t\tlet abilityMod = abilityScoreMod(\"dexterity\")\r\n\t\t\tlet permAbilityMod = abilityScoreMod(\"dexterity\", true)\r\n\r\n\t\t\tif (permAbilityMod !== abilityMod) {\r\n\t\t\t\ttemporary += abilityMod - permAbilityMod\r\n\t\t\t\tpermanent += permAbilityMod\r\n\t\t\t} else {\r\n\t\t\t\tpermanent += abilityMod\r\n\t\t\t}\r\n\t\t\tif (this.props.character.name === \"Dink Weatherbyrst\"){\r\n\t\t\t\tpermanent += 4\r\n\t\t\t}\r\n\t\t\tif (this.props.character.name === \"Iyugi\"){\r\n\t\t\t\tpermanent += 2\r\n\t\t\t}\r\n\r\n\t\t\tarray.push(permanent)\r\n\t\t\tarray.push(temporary)\r\n\t\t\treturn array\r\n\t\t}\r\n\r\n\r\n\t\t// const bonusPenaltyInit = () => {\r\n\t\t// \tlet temp = initiativeArray()[1]\r\n\t\t// \tlet color = `#${this.props.settings.textColor}`\r\n\t\t// \tif (temp > 0){color = \"green\"}\r\n\t\t// \tif (temp < 0){color = \"maroon\"}\r\n\t\t// \treturn color\r\n\t\t// }\r\n\r\n\t\tconst calculateInitiative = () => {\r\n\t\t\tlet initArray = initiativeArray()\r\n\t\t\treturn pluser(initArray[0] + initArray[1])\r\n\t\t}\r\n\r\n\t\t// const initColor = bonusPenaltyInit()\r\n\r\n\t\treturn calculateInitiative()\r\n\t}\r\n\r\n\trollDice = (name, modifier) => {\r\n\t\tlet obj = {rollName: name, modifier: parseInt(modifier), die: 20, count: 1}\r\n\t\tdiceAction(obj)\r\n\t}\r\n\r\n\r\n\r\n  render(){\r\n    if (localStorage.computer === \"true\"){\r\n      return(\r\n        <div className=\"actions shadow\" style={{boxShadow: `5px 4px 2px #${this.props.settings.shadeColor}`, opacity: \"0.95\", backgroundColor: `#${this.props.settings.bubbleColor}`, borderColor: `#${this.props.settings.borderColor}`}}>\r\n          <ActionTabs renderTabClick={this.renderTabClick} activeTab={this.state.activeTab}/>\r\n          <div className=\"dynamic-size\" style={{height: '90%'}}>\r\n\t\t\t\t\t\t{this.renderAttackDetails()}\r\n\t          {this.state.activeTab === \"Attacks\" && <Attacks editModal={this.props.editModal} renderTooltip={this.props.renderTooltip} mouseOut={this.props.mouseOut}/>}\r\n\t          {this.state.activeTab === \"Tactics\" && <Basics renderTooltip={this.props.renderTooltip} mouseOut={this.props.mouseOut}/>}\r\n\t          {this.state.activeTab === \"Combat Maneuvers\" && <CombatManeuvers />}\r\n\t          {this.state.activeTab === \"Spells\" && <Spellcasting />}\r\n\t          {this.state.activeTab === \"Abilities\" && <Abilities editModal={this.props.editModal}/>}\r\n          </div>\r\n        </div>\r\n      )\r\n    } else if (localStorage.computer === \"false\"){\r\n      return (\r\n        <>\r\n          <div className={this.renderMobileTabClassNames(\"Attacks\")} onClick={() => this.renderTabClick(\"Attacks\")}>Attacks {this.state.activeTab === \"Attacks\" ? <FontAwesomeIcon icon={faCircle}/> : <FontAwesomeIcon icon={faSortDown}/>}</div>\r\n          {this.state.activeTab === \"Attacks\" && <Attacks editModal={this.props.editModal} renderTooltip={this.props.renderTooltip} mouseOut={this.props.mouseOut} editSidebar={this.props.editSidebar}/>}\r\n          <div className={this.renderMobileTabClassNames(\"Basics\")} onClick={() => this.renderTabClick(\"Basics\")}>Basics {this.state.activeTab === \"Basics\" ? <FontAwesomeIcon icon={faCircle}/> : <FontAwesomeIcon icon={faSortDown}/>}</div>\r\n          {this.state.activeTab === \"Tactics\" && <Basics renderTooltip={this.props.renderTooltip} mouseOut={this.props.mouseOut}/>}\r\n          <div className={this.renderMobileTabClassNames(\"Spells\")} onClick={() => this.renderTabClick(\"Spells\")}>Spells {this.state.activeTab === \"Spells\" ? <FontAwesomeIcon icon={faCircle}/> : <FontAwesomeIcon icon={faSortDown}/>}</div>\r\n          {this.state.activeTab === \"Spells\" && <Spellcasting editModal={this.props.editModal} clickOut={this.props.clickOut}/>}\r\n          <div className={this.renderMobileTabClassNames(\"Abilities\")} onClick={() => this.renderTabClick(\"Abilities\")}>Abilities {this.state.activeTab === \"Abilities\" ? <FontAwesomeIcon icon={faCircle}/> : <FontAwesomeIcon icon={faSortDown}/>}</div>\r\n          {this.state.activeTab === \"Abilities\" && <Abilities editModal={this.props.editModal}/>}\r\n          <div className={this.renderMobileTabClassNames(\"Equipment\")} onClick={() => this.renderTabClick(\"Equipment\")}>Equipment {this.state.activeTab === \"Equipment\" ? <FontAwesomeIcon icon={faCircle}/> : <FontAwesomeIcon icon={faSortDown}/>}</div>\r\n          {this.state.activeTab === \"Equipment\" && <Equipment editModal={this.props.editModal} renderTooltip={this.props.renderTooltip} mouseOut={this.props.mouseOut}/>}\r\n        </>\r\n      )\r\n    }\r\n\r\n  }\r\n}\r\n// {this.state.activeTab === \"Attacks\" && <Features character={this.props.character} />}\r\n\r\n\r\n/////////////////////////////\r\n////// COLOR SCHEME /////////\r\n/////////////////////////////\r\n\r\n// Full-round Action: Purple\r\n// Standard Action: Blue\r\n// Swift Action: Yellow\r\n// Move Action: Green\r\n// Immediate Action: Red\r\n// 10 minutes/1 hours/1 minute, etc.: brown? gold?\r\n// Free Action: Silver\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n    characterInfo: state.character_info,\r\n\t\tcharacter: state.character,\r\n\t\tsettings: state.settings\r\n  }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(Actions)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nconst Misc = props => {\r\n\r\n  const name = props.character.name\r\n\r\n  const renderCharacter = () => {\r\n    let misc = []\r\n    switch(name){\r\n      // case \"Nettie\":\r\n      //   return nettie()\r\n      case \"Merg\":\r\n        misc = merg()\r\n        break\r\n      case \"Cedrick\":\r\n        misc = cedrick()\r\n        break\r\n      // case \"Persephone\":\r\n      //   return pepper()\r\n      case 'Maddox':\r\n        misc = maddox()\r\n        break\r\n      case 'Robby':\r\n        misc = robby()\r\n        break\r\n      default:\r\n        break\r\n    }\r\n    return misc\r\n  }\r\n\r\n  const robby = () => {\r\n    return [\r\n      {id: 5999, name: 'Dragon Egg', weight: 10, price: 'priceless', description: 'Glossy and smooth, this appear to made of solid gold.'},\r\n      {id: 6000, name: 'Rope, Hempen (50 ft.)', weight: 10, price: '1 gp', description: 'The DC to escape hemp rope bonds is equal to 20 + the CMB of the creature that tied the bonds. Ropes do not need to make a check every round to maintain the pin. If the DC to escape is higher than 20 + the tying creatures CMB, the tied up creature cannot escape from the bonds, even with a natural 20 on the check. This rope has 2 hit points and can be burst with a DC 23 Strength check.'},\r\n      {id: 6001, name: 'Grappling Hook', weight: 4, price: '1 gp', description: 'Throwing a grappling hook requires a ranged Attack Roll, treating the hook as a thrown weapon with a range increment of 10 feet. Objects with ample places to catch the hook are AC 5.'},\r\n      {id: 6002, name: 'Bandana', weight: 0, price: '-', description: ''},\r\n      {id: 6003, name: 'Boots', weight: 0, price: '-', description: ''},\r\n      {id: 6004, name: 'Tan Pants', weight: 0, price: '-', description: ''},\r\n      {id: 6005, name: 'Burgundy Ragged Naval Coat', weight: 2, price: '-', description: ''},\r\n      {id: 6006, name: 'Pirate Flowey Shirt', weight: 0, price: '-', description: ''},\r\n      {id: 6007, name: 'Sulfur', weight: 0, price: '5 sp', description: 'Sulfur has a distinctive odor and caustic properties.'},\r\n      {id: 6008, name: 'Thieves Tool, Common', weight: 1, price: '30 gp', description: 'This kit contains lockpicks and other tools you need to use the Disable Device skill. Without these tools, you must use improvised tools, and you take a –2 circumstance penalty on Disable Device checks.'},\r\n      {id: 6009, name: 'Asmodeus Pendants (12)', weight: 1, price: '5 sp', description: \"Asmodeus' symbol: a downward pointing pentagram\"},\r\n      {id: 6010, name: 'Ball Bearings', weight: 2, price: '1 gp', description: \"As a standard action, you can spill these tiny metal balls from their pouch to cover a level, 10 ft square. A creature moving across the covered area must succeed on a DC 10 Reflex saving throw or fall prone. A creature moving through the area at half speed doesn't need to make the save.\"},\r\n      {id: 6011, name: 'Dynamite', weight: 1, price: '100 gp', description: \"This hollow clay container holds a small charge of black powder and a slow-burning fuse. Lighting the fuse is move action; 1d3 rounds later the dynamite explodes, dealing 2d6 points of bludgeoning damage and 1d6 points of fire damage in a 10-foot-radius burst (Reflex DC 15 halves). You throw dynamite as if it were a splash weapon.\"},\r\n      {id: 6012, name: 'Purple Dust', weight: 0, price: '-', description: \"\"},\r\n      {id: 6013, name: 'Blue & White Mushroom', weight: 0, price: '-', description: \"\"},\r\n    ]\r\n  }\r\n\r\n  const merg = () => {\r\n    return [\r\n      {id: 2000, name: 'Sunrod', weight: 1, price: '2 gp', description: 'This 1-foot-long, gold-tipped, iron rod glows brightly when struck as a standard action. It sheds normal light in a 30-foot radius and increases the light level by one step for an additional 30 feet beyond that area (darkness becomes dim light and dim light becomes normal light). A sunrod does not increase the light level in normal light or bright light. It glows for 6 hours, after which the gold tip is burned out and worthless.'},\r\n      {id: 2001, name: 'Holy Water', weight: 1, price: '25 gp', description: 'Holy water damages undead creatures and evil outsiders almost as if it were acid. A flask of holy water can be thrown as a splash weapon. Treat this attack as a ranged touch attack with a range increment of 10 feet. A flask breaks if thrown against the body of a corporeal creature, but to use it against an incorporeal creature, you must open the flask and pour the holy water out onto the target. Thus, you can douse an incorporeal creature with holy water only if you are adjacent to it. Doing so is a ranged touch attack that does not provoke attacks of opportunity. A direct hit by a flask of holy water deals 2d4 points of damage to an undead creature or an evil outsider. Each such creature within 5 feet of the point where the flask hits takes 1 point of damage from the splash. Temples to good deities sell holy water at cost (making no profit). Holy water is made using the bless water spell.'},\r\n      {id: 2002, name: 'Acid Flask', weight: 1, price: '10 gp', description: 'You can throw a flask of acid as a splash weapon. Treat this attack as a ranged touch attack with a range increment of 10 feet. A direct hit deals 1d6 points of acid damage. Every creature within 5 feet of the point where the acid hits takes 1 point of acid damage from the splash.'},\r\n      {id: 2003, name: '10 Torches', weight: 10, price: '10 cp', description: 'A torch burns for 1 hour, shedding normal light in a 20-foot radius and increasing the light level by one step for an additional 20 feet beyond that area (darkness becomes dim light and dim light becomes normal light). A torch does not increase the light level in normal light or bright light. If a torch is used in combat, treat it as a one-handed improvised weapon that deals bludgeoning damage equal to that of a gauntlet of its size, plus 1 point of fire damage.'},\r\n      {id: 2004, name: 'Tindertwig', weight: 0, price: '1 gp', description: 'The alchemical substance on the end of this small, wooden stick ignites when struck against a rough surface. Creating a flame with a tindertwig is much faster than creating a flame with Flint and Steel (or a magnifying glass) and tinder. Lighting a torch with a tindertwig is a Standard Action (rather than a full-round action), and lighting any other fire with one is at least a Standard Action.'},\r\n      {id: 2005, name: '5 Lamp Oil Flasks', weight: 5, price: '5 sp', description: 'A pint of lamp oil burns for 6 hours in a common lantern or lamp. You can also use a flask of lamp oil as a splash weapon. Use the rules for alchemist’s fire, except that it takes a full-round action to prepare a flask with a fuse. Once it is thrown, there is a 50% chance of the flask igniting successfully. You can pour a pint of oil on the ground to cover an area 5 feet square, provided that the surface is smooth. If lit, the oil burns for 2 rounds and deals 1d3 points of fire damage to each creature in the area.'},\r\n      {id: 2006, name: 'Robe', weight: 6, price: '12 gp', description: 'A glamorous red robe with white mink and gold thread trim. Has seen better days.'},\r\n      {id: 2007, name: 'Common Backpack', weight: 2, price: '2 gp', description: 'This leather knapsack has one large pocket that closes with a buckled strap and holds about 2 cubic feet of material. Some may have one or more smaller pockets on the sides.'},\r\n    ]\r\n  }\r\n\r\n  const cedrick = () => {\r\n    return [\r\n      {id: 3000, name: 'Dragon Egg', weight: 10, price: 'priceless', description: 'Made of, or covered with, broad green leaves.'}\r\n    ]\r\n  }\r\n\r\n  const maddox = () => {\r\n    return [\r\n      {id: 5010, name: 'Books', weight: 18, price: '-', description: <p>Titles:<ul><li>Rarity of Antiques in Antiquity</li><li>Connection of Ley and Fey</li><li>The Ruins of the 2nd Age, v3</li><li>Thynne's Travels, v11</li><li>Imbuing with Natural Magics, v1</li><li>History of Trans-Planar Portals</li><li>Early Catrography of 3rd Age, v3</li><li>1st and 2nd Age Written Secrets</li></ul></p>}\r\n    ]\r\n  }\r\n\r\n  const renderMisc = () => {\r\n    return renderCharacter().map((m, idx) => {\r\n      return (\r\n        <tr className={renderTableStyling(idx)} key={m.key*idx*3-1}>\r\n          <td>{m.name}</td>\r\n          <td>{m.weight} lb{(m.weight > 1 || m.weight === 0) ? \"s\" : null}</td>\r\n          <td>{m.price}</td>\r\n          <td>{m.description}</td>\r\n        </tr>\r\n      )\r\n    })\r\n  }\r\n\r\n  const renderTableStyling = (index) => {\r\n    return index%2 === 0 ? \"even-row-misc\" : \"odd-row\"\r\n  }\r\n\r\n\r\n  return (\r\n    <section>\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>Name</th>\r\n            <th>Weight</th>\r\n            <th>Price</th>\r\n            <th>Description</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {renderMisc()}\r\n        </tbody>\r\n      </table>\r\n    </section>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Misc)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { abilityScoreMod } from '../../helper_functions/calculations/ability_scores'\r\nimport { pluser } from '../../fuf'\r\n\r\nconst Initiative = props => {\r\n\r\n  const dexMod = (style) => {\r\n    const hc = props.character_info.hardcode\r\n    const largeMorph = ['Bull - Major', 'Condor - Major', 'Frog - Major', 'Squid - Major', 'Chameleon - Major'].includes(hc.major)\r\n    const name = props.character.name\r\n    const enlarger = hc.enlarge\r\n    const reducer = hc.reduce\r\n    const age = name === 'Maddox' && hc.age\r\n    const activeMutagen = hc.activeMutagen ? hc.mutagen : false\r\n\r\n    let mod = Math.floor((props.character_info.ability_scores.dexterity - 10) / 2)\r\n    if (name === \"Cedrick\"){\r\n      mod += 1\r\n    }\r\n    if (name === 'Maddox'){\r\n      // improved initiative\r\n      mod += 4\r\n    }\r\n    if (name === 'Grackle'){\r\n      // improved initiative\r\n      mod += 4\r\n    }\r\n    if (name === 'Robby' && hc.points > 0){\r\n      // Swashbuckler initiative\r\n      mod += 2\r\n    }\r\n\r\n    mod += age === 'Young' ? 2 : 0\r\n    mod += age === 'Middle' ? -1 : 0\r\n    mod += age === 'Old' ? -2 : 0\r\n    mod += age === 'Venerable' ? -3 : 0\r\n\r\n    mod += modifiers()\r\n\r\n\r\n    const ogMod = mod\r\n    if (largeMorph){\r\n      mod -= 1\r\n    }\r\n    mod += enlarger ? -1 : 0\r\n    mod += reducer ? 1 : 0\r\n\r\n    mod += activeMutagen === 'dexterity' ? 2 : 0\r\n\r\n    if (!style){\r\n      return mod < 0 ? mod : `+${mod}`\r\n    } else {\r\n      if (ogMod > mod){\r\n        return {color: 'maroon'}\r\n      } else if (ogMod < mod){\r\n        return {color: 'green'}\r\n      } else {\r\n        return {color: 'black'}\r\n      }\r\n    }\r\n  }\r\n\r\n  const modifiers = () => {\r\n    let modifiers = props.character_info.bonuses.reduce((agg, b) => {\r\n      if (b.statistic === 'Initiative'){\r\n        agg += b.bonus\r\n      }\r\n      return agg\r\n    }, 0)\r\n    return modifiers\r\n  }\r\n\r\n\tconst initiativeArray = () => {\r\n\t\t// NEW DATA\r\n\t\tlet array = []\r\n\t\tlet permanent = 0\r\n\t\tlet temporary = 0\r\n\r\n\t\tlet abilityMod = abilityScoreMod(\"dexterity\")\r\n\t\tlet permAbilityMod = abilityScoreMod(\"dexterity\", true)\r\n\r\n\t\tif (permAbilityMod !== abilityMod) {\r\n\t\t\ttemporary += abilityMod - permAbilityMod\r\n\t\t\tpermanent += permAbilityMod\r\n\t\t} else {\r\n\t\t\tpermanent += abilityMod\r\n\t\t}\r\n\t\tif (props.character.name === \"Ildre\"){\r\n\t\t\tpermanent += 4\r\n\t\t}\r\n\r\n\t\tarray.push(permanent)\r\n\t\tarray.push(temporary)\r\n\t\treturn array\r\n\t}\r\n\r\n\r\n\tconst bonusPenaltyInit = () => {\r\n\t\tlet temp = initiativeArray()[1]\r\n\t\tlet color = \"black\"\r\n\t\tif (temp > 0){color = \"green\"}\r\n\t\tif (temp < 0){color = \"maroon\"}\r\n\t\treturn color\r\n\t}\r\n\r\n\tconst calculateInitiative = () => {\r\n\t\tlet initArray = initiativeArray()\r\n\t\treturn pluser(initArray[0] + initArray[1])\r\n\t}\r\n\r\n\tlet color = bonusPenaltyInit()\r\n\r\n  if (localStorage.computer === \"true\"){\r\n    return (\r\n      <div id='init' className='shadow shrink'>\r\n        <span className='centered'>\r\n          <div className='dull'><strong>Init</strong></div>\r\n          <div className='enhanced' style={{color}}>{calculateInitiative()}</div>\r\n        </span>\r\n      </div>\r\n    )\r\n  } else if (localStorage.computer === \"false\"){\r\n    return (\r\n      <div id='init' className='shadow' style={{padding: '2%'}}>\r\n        <span className='centered'>\r\n          <div className='enhanced' style={{color}}>{calculateInitiative()}</div>\r\n          <div className='dull'><strong>Init</strong></div>\r\n        </span>\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Initiative)\r\n","import store from '../../store'\r\nimport { endTurnAction } from '../action_creator/character'\r\nimport { incrementFeatureUsage } from '../calculations/feature_usage'\r\nimport { featureDistribution as removeFeature } from './features'\r\n\r\n\r\nexport const endTurn = async () => {\r\n\t// NEW DATA\r\n\t// STORED DATA\r\n\tconst { character, character_info } = store.getState()\r\n\r\n\t// CALCULATED DATA\r\n\t//\r\n\t// character.character_klass_feature_usages.forEach(ckfu => {\r\n\t// \tincrementFeatureUsage(ckfu)\r\n\t// })\r\n\tcharacter.applicable_klass_features.forEach(akf => {\r\n\t\takf.features.forEach(async f => {\r\n\r\n\t\t\tif (f.usage?.limit || f.usage?.limit_frequency && !f.usage?.destroy_after_use) {\r\n\r\n\t\t\t\tlet ckfus = character.character_klass_feature_usages.filter(fu => fu.klass_feature_id === akf.id)\r\n\r\n\t\t\t\tif (character_info.activeFeatures.find(af => af.sourceId === akf.id && af.source === \"applicable_klass_features\" && af.featureId === f.id)){\r\n\r\n\t\t\t\t\tawait incrementFeatureUsage({...f, sourceId: akf.id, klassFeatureName: akf.name, klassId: akf.klass_id, character_klass_feature_usages: ckfus, source: \"applicable_klass_features\"})\r\n\r\n\t\t\t\t}\r\n\t\t\t\tlet options = f.usage?.all_feature_usage_options || []\r\n\r\n\t\t\t\toptions.forEach(async opt => {\r\n\t\t\t\t\tif (character_info.activeFeatures.find(af => af.featureId === opt.optionSource.featureId & af.sourceId === opt.optionSource.sourceId && af.source === opt.optionSource.source)) {\r\n\t\t\t\t\t\tawait incrementFeatureUsage({...f, sourceId: akf.id, klassFeatureName: akf.name, klassId: akf.klass_id, character_klass_feature_usages: ckfus, source: \"applicable_klass_features\"})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t}\r\n\t\t})\r\n\t})\r\n\r\n\tcharacter.character_klasses.forEach(cK => {\r\n\t\tif (cK.feat){\r\n\t\t\tcK.feat.features.forEach(f => {\r\n\t\t\t\tif (f.usage){\r\n\t\t\t\t\tif (character_info.activeFeatures.find(af => af.sourceId === cK.id && af.featureId === f.id && af.source === \"character_klasses\")){\r\n\r\n\t\t\t\t\t\tif (f.usage.limit_frequency === \"Round\"){\r\n\t\t\t\t\t\t\t// if the feature is done at the end of a round\r\n\t\t\t\t\t\t\tremoveFeature({...f, source: \"character_klasses\", sourceId: cK.id, featName: cK.feat.name})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t})\r\n\r\n\t// {...f, sourceId: akf.id, klassFeatureName: akf.name, klassId: akf.klass_id, character_klass_feature_usages: ckfus, source: \"applicable_klass_features\"}\r\n\t// character_info.activeFeatures.forEach(af => {\r\n\t// \tlet ability = character[af.source].find(ability => ability.id === af.sourceId)\r\n\t// \tlet feature = ability.features.find(f => f.id === af.featureId)\r\n\t// \tincrementFeatureUsage({...feature, klassId: ability.id})\r\n\t// })\r\n\r\n\tendTurnAction()\r\n}\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { endTurn } from '../../utils/distributers/new_turn'\r\n\r\nconst TurnActions = props => {\r\n\r\n  const used = (action) => {\r\n\t\tconst {full, standard, move} = props.character_info.actions\r\n\t\tif (action === \"full\" && (full || standard || move)) {return \"cast-full\"}\r\n    let className = props.character_info.actions[action] ? `cast-${action}` : action\r\n\t\treturn className\r\n  }\r\n\r\n  const dispatch = (action) => {\r\n    props.dispatch({type: 'TRIGGER ACTION', action})\r\n  }\r\n\r\n  // const newTurn = () => {\r\n    // patch fetch\r\n    // reset all features, items, abilities, etc, that have a limit of a round\r\n    // if successful, dispatch new turn\r\n  // }\r\n\r\n  if (localStorage.computer === \"false\"){\r\n    return (\r\n      <section id='actions' className='character-show shadow action-container'>\r\n        <section style={{padding: '.15em'}}>\r\n          <span id='full-action' className={used(\"full\")} onClick={() => dispatch(\"full\")}>Full-Round</span>\r\n        </section>\r\n        <section style={{padding: '.15em', paddingLeft: '0em'}}>\r\n          <span id='immediate-action' className={used(\"immediate\")} onClick={() => dispatch(\"immediate\")}>Immediate</span>\r\n        </section>\r\n        <section style={{padding: '.15em', paddingTop: '0em'}}>\r\n          <span id='standard-action' className={used(\"standard\")} onClick={() => dispatch(\"standard\")}>Standard</span>\r\n          <span id='move-action' className={used(\"move\")} onClick={() => dispatch(\"move\")}>Move</span>\r\n          <span id='swift-action' className={used(\"swift\")} onClick={() => dispatch(\"swift\")}>Swift</span>\r\n        </section>\r\n        <section style={{padding: '.15em', paddingTop: '0em', paddingLeft: '0em'}}>\r\n          <span id='free-action' className=\"free\">Free</span>\r\n          <span id='start-turn' className=\"start\" onClick={endTurn}>Start Turn</span>\r\n        </section>\r\n      </section>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <section id='actions' className='character-show shadow action-container dynamic-size-smaller' style={{boxShadow: `5px 4px 2px #${props.settings.shadeColor}`, opacity: \"0.95\", backgroundColor: `#${props.settings.bubbleColor}`, borderColor: `#${props.settings.borderColor}`}}>\r\n      <li id='full-action' className={used(\"full\")} style={{lineHeight: \"normal\", padding: \"inherit\", display: \"flex\"}} onClick={() => dispatch(\"full\")}><div style={{margin: \"auto\"}}>Full-Round Action</div></li>\r\n      <li id='immediate-action' className={used(\"immediate\")} style={{lineHeight: \"normal\", padding: \"inherit\", display: \"flex\"}} onClick={() => dispatch(\"immediate\")}><div style={{margin: \"auto\"}}>Immediate Action</div></li>\r\n      <li id='standard-action' className={used(\"standard\")} style={{lineHeight: \"normal\", padding: \"inherit\", display: \"flex\"}} onClick={() => dispatch(\"standard\")}><div style={{margin: \"auto\"}}>Standard Action</div></li>\r\n      <li id='move-action' className={used(\"move\")} style={{lineHeight: \"normal\", padding: \"inherit\", display: \"flex\"}} onClick={() => dispatch(\"move\")}><div style={{margin: \"auto\"}}>Move Action</div></li>\r\n      <li id='swift-action' className={used(\"swift\")} style={{lineHeight: \"normal\", padding: \"inherit\", display: \"flex\"}} onClick={() => dispatch(\"swift\")}><div style={{margin: \"auto\"}}>Swift Action</div></li>\r\n      <li id='free-action' className=\"free\" style={{lineHeight: \"normal\", padding: \"inherit\", display: \"flex\"}}><div style={{margin: \"auto\"}}>Free Action</div></li>\r\n      <li id='start-turn' className=\"start\"  style={{lineHeight: \"normal\", padding: \"inherit\", display: \"flex\"}} onClick={endTurn}><div style={{margin: \"auto\"}}>Start Turn</div></li>\r\n    </section>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info,\r\n\t\tsettings: state.settings\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(TurnActions)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport _ from 'lodash'\r\nimport localhost from '../../localhost'\r\nimport { consolidateDate } from '../../fuf'\r\n\r\nconst NoteForm = props => {\r\n\r\n  const [details, setDetails] = React.useState('');\r\n  const [title, setTitle] = React.useState('');\r\n  const [date, setDate] = React.useState('');\r\n  const [placeholder, setPlaceholder] = React.useState('');\r\n  const [loading, setLoading] = React.useState(false)\r\n  const [save, setSave] = React.useState(false)\r\n\r\n  React.useEffect(() => {\r\n    let date = consolidateDate(props.character.campaign)\r\n    setDate(date)\r\n    if (props.note){\r\n      setTitle(props.note.title)\r\n      setDetails(props.note.details)\r\n      setDate(consolidateDate(props.note))\r\n    }\r\n    if (props.create){\r\n      setTitle(`New Note ${props.character.notes.length + 1}`)\r\n    }\r\n    let array = ['What would you like to say?', 'Have any news?', 'What did he do this time?', 'Anything exciting?']\r\n    setPlaceholder(_.sample(array))\r\n  }, [props.character])\r\n\r\n  const renderDetails = (e) => {\r\n    setDetails(e.target.value)\r\n  }\r\n  const renderTitle = (e) => {\r\n    setTitle(e.target.value)\r\n  }\r\n  const renderDate = (e) => {\r\n    setDate(e.target.value)\r\n  }\r\n\r\n  const saveDetails = (e) => {\r\n    if (details.length){\r\n      console.log('how many fetches did i make?')\r\n      const { weekday, month, day, age, year } = props.character.campaign\r\n      e.preventDefault()\r\n      let url = props.method === 'PATCH' ? `${localhost}/api/v1/notes/${props.note.id}`: `${localhost}/api/v1/notes`\r\n      fetch(url, {\r\n        method: props.method,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          title, weekday, month, day, age, year, details, character_id: props.character.id\r\n        })\r\n      })\r\n      .then(r => r.json())\r\n      .then(data => {\r\n        if (!data.error){\r\n          setLoading(false)\r\n          setSave(true)\r\n          props.dispatch({type: 'NEW NOTE', note: data})\r\n          props.finishFetch()\r\n        } else {\r\n          console.log(data)\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  const handle = _.debounce(saveDetails, 800)\r\n\r\n  const debouncer = () => {\r\n    // IT DOESNT WORK\r\n    handle()\r\n    // if (details.length){\r\n    //   setLoading(true)\r\n    // } else {\r\n    //   setLoading(false)\r\n    // }\r\n  }\r\n\r\n  return (\r\n    <section>\r\n      <form>\r\n        <label htmlFor='newnote'>\r\n            <input className='new-note-input' type='text' name='new note title' value={title} onChange={renderTitle}/>\r\n            <span>{date}</span>\r\n            {/*save && <span>X</span>*/}\r\n            <button className='note-form-edit' onClick={saveDetails}>Save</button><button className='note-form-cancel' onClick={props.finishFetch}>X</button>\r\n            <textarea className='new-note-input' type='text' name='new note' value={details} placeholder={placeholder} onChange={renderDetails} rows='14'/>\r\n        </label>\r\n      </form>\r\n    </section>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(NoteForm)\r\n","import React from 'react'\r\nimport _ from 'lodash'\r\nimport { connect } from 'react-redux'\r\nimport localhost from '../../localhost'\r\nimport NoteForm from './note_form'\r\n\r\nconst Note = props => {\r\n\r\n  const { title, id, details } = props.note\r\n\r\n  const [edit, setEdit] = React.useState(false);\r\n\r\n  const deleteNote = (e) => {\r\n    fetch(`${localhost}/api/v1/notes/${id}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      }\r\n    })\r\n    .then(r => r.json())\r\n    .then(data => {\r\n      if (!data.error){\r\n        props.dispatch({type: 'REMOVE NOTE', note: data})\r\n        setEdit(false)\r\n      } else {\r\n        console.log(data)\r\n      }\r\n    })\r\n  }\r\n\r\n  const renderNote = () => {\r\n    return (\r\n      <div className='note-list-item' onClick={() => props.makeActive(id)}>\r\n        <p><strong>{title}</strong> {props.activeNote !== id ? <small>{props.truncatedDate}</small> : <div><small>{props.date}</small></div>}</p>\r\n        {props.activeNote === id &&\r\n          <React.Fragment>\r\n            <div id='white-space'>{details}</div>\r\n            <br/>\r\n            <button onClick={() => setEdit(true)}>Edit</button>\r\n            <button onClick={deleteNote}>Delete</button>\r\n          </React.Fragment>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {!edit ? renderNote() : <NoteForm note={props.note} method={'PATCH'} finishFetch={() => setEdit(false)}/>}\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Note)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport NoteForm from '../notes/note_form'\r\nimport Note from '../notes/note'\r\n\r\nimport { consolidateDate, truncatedDate } from '../../fuf'\r\n\r\nconst Notes = props => {\r\n\r\n  const [newNote, setNoteForm] = React.useState(false);\r\n  const [activeNote, setActiveNote] = React.useState(0);\r\n\r\n  const renderNew = () => {\r\n    return <li className='note-list-item'>\r\n      <p onClick={() => setNoteForm(true)}>Create New Note</p>\r\n    </li>\r\n  }\r\n\r\n  const noteCreated = () => {\r\n    setNoteForm(false)\r\n  }\r\n  const makeActive = (id) => {\r\n    if (activeNote === id){\r\n      setActiveNote(0)\r\n    } else {\r\n      setActiveNote(id)\r\n    }\r\n  }\r\n\r\n  const renderNotes = () => {\r\n    let sorted = [...props.character.notes].sort((a,b) => b.updated_at > a.updated_at ? 1 : -1)\r\n    return sorted.map(n => <Note note={n} makeActive={makeActive} activeNote={activeNote} date={consolidateDate(n)} truncatedDate={truncatedDate(n)}/>)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <ul className='note-list'>\r\n        {!newNote && renderNew()}\r\n        {newNote && <NoteForm finishFetch={noteCreated} method={'POST'} create={true}/>}\r\n        {renderNotes()}\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Notes)\r\n","import React from 'react'\r\n\r\nimport Tab from '../components/character_show/tab'\r\n\r\nclass DetailsTabs extends React.Component {\r\n\r\n  render(){\r\n\r\n    return(\r\n      <span className='tab-list'>\r\n        <Tab label=\"Details\" renderTabClick={this.props.renderTabClick} activeTab={this.props.activeTab}/>\r\n        <Tab label=\"Notes\" renderTabClick={this.props.renderTabClick} activeTab={this.props.activeTab}/>\r\n      </span>\r\n    )\r\n  }\r\n}\r\n\r\nexport default DetailsTabs\r\n","import React from 'react'\r\n\r\nimport CharacterDetails from '../components/character_show/details'\r\nimport Notes from '../components/character_show/notes'\r\n\r\nimport DetailsTabs from './details_tabs'\r\n\r\nclass Details extends React.Component {\r\n  state= {\r\n    activeTab: \"Details\"\r\n  }\r\n\r\n  renderTabClick = (choice) => {\r\n    this.setState({activeTab: choice})\r\n  }\r\n\r\n  render(){\r\n    return(\r\n      <div id=\"details\" className='shadow character-show'>\r\n        <DetailsTabs renderTabClick={this.renderTabClick} activeTab={this.state.activeTab}/>\r\n        <div style={{height: '100%'}}>\r\n          {this.state.activeTab === \"Details\" && <CharacterDetails editModal={this.props.editModal}/>}\r\n          {this.state.activeTab === \"Notes\" && <Notes character={this.props.character}/>}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Details\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { consolidateDate } from '../../fuf'\r\n\r\nconst CampaignShow = props => {\r\n\r\n  const renderAllies = () => {\r\n    // let charFilter = props.character.campaign?.characters.filter(c => c.id !== props.character.id) ?? []\r\n    // return charFilter.map(c => <li>{c.name}</li>)\r\n  }\r\n\r\n\tlet date = () => {\r\n\t\tif (props.character.campaign) {\r\n\t\t\treturn <p><strong>Date</strong>: {consolidateDate(props.character.campaign)}</p>\r\n\t\t} else {\r\n\t\t\treturn null\r\n\t\t}\r\n\t}\r\n\r\n  return (\r\n    <div>\r\n      {date()}\r\n      <ul>\r\n        {renderAllies()}\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(CampaignShow)\r\n","import React from 'react'\r\nimport _ from 'lodash'\r\n\r\nimport Tab from './character_show/tab'\r\n\r\nconst AlliesTab = props => {\r\n\r\n  const tabOptions = () => {\r\n    if (props.allies){\r\n      return props.allies.map((ally, i) => {\r\n        return <Tab label={_.startCase(ally)} renderTabClick={props.renderTabClick} activeTab={props.activeAlly} allies={true} character={props.character} removeAlly={props.removeAlly} index={i}/>\r\n      })\r\n    }\r\n  }\r\n\r\n  return(\r\n    <span className='tab-list'>\r\n      {tabOptions()}\r\n    </span>\r\n  )\r\n}\r\n\r\nexport default AlliesTab\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport AlliesTab from '../allies_tab.js'\r\n\r\nclass Allies extends React.Component {\r\n\r\n  state ={\r\n    activeAlly: null\r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n  }\r\n\r\n  collectMonsters = () => {\r\n    let monsters = []\r\n    switch(this.props.character.name){\r\n      case(\"Nettie\"):\r\n        monsters = this.nettie()\r\n        break\r\n      case(\"Persephone\"):\r\n        monsters = this.pepper()\r\n        break\r\n      case(\"Cedrick\"):\r\n        monsters = this.cedrick()\r\n        break\r\n      case(\"Maddox\"):\r\n        monsters = this.maddox()\r\n        break\r\n      default:\r\n        break\r\n    }\r\n    return monsters\r\n  }\r\n\r\n  renderTabClick = (ally, index) => {\r\n    this.setState({activeAlly: index})\r\n  }\r\n\r\n  removeAlly = (index) => {\r\n    this.setState({activeAlly: null}, () => this.props.dispatch({type: 'REMOVE ALLY', monster: index}))\r\n  }\r\n\r\n  renderAlly = () => {\r\n    let monster = this.collectMonsters()[this.state.activeAlly]\r\n    if (monster || this.props.character.name === \"Persephone\" || this.props.character.name === 'Cedrick' || this.props.character.name === 'Maddox'){\r\n      if (!monster){\r\n        monster = this.collectMonsters()[0]\r\n      }\r\n      return (\r\n        <section>\r\n          <h4>{monster.name}</h4>\r\n          <div style={{marginBottom: '1%', paddingBottom: '.8%', borderBottom: 'double'}}>\r\n            <div>{monster.alignment} {monster.size} {monster.type} </div>\r\n            <div><u>Init</u>:{monster.init} {monster.senses.join(\"; \")} </div>\r\n          </div>\r\n          <div style={{marginBottom: '1%', paddingBottom: '.8%', borderBottom: 'double'}}>\r\n            <div><strong>AC</strong> {monster.ac.base}, touch {monster.ac.touch}, flat-footed {monster.ac.ff} ({monster.ac.details})</div>\r\n            <div><strong>hp</strong> {monster.hp}</div>\r\n            <div><strong>Fort</strong> {monster.fort}, <strong>Ref</strong> {monster.ref}, <strong>Will</strong> {monster.will}</div>\r\n            <div>{!!monster.def.length && <span><u>Defensive Abilities</u> {monster.def.join(\", \")} </span>}{!!monster.dr.length && <span><u>DR</u> {monster.dr.join(\", \")} </span>}{!!monster.immune.length && <span><u>Immune</u> {monster.immune.join(\", \")} </span>}{!!monster.resist.length && <span><u>Resist</u> {monster.resist.join(\", \")} </span>}{!!monster.weaknesses.length && <span><u>Weaknesses</u> {monster.weaknesses.join(\", \")} </span>}</div>\r\n          </div>\r\n          <div style={{marginBottom: '1%', paddingBottom: '.8%', borderBottom: 'double'}}>\r\n            <div><strong>Speed</strong> {monster.speed.join(\", \")}</div>\r\n            <div>Melee {monster.melee.join(\"\\n\\n\")}</div>\r\n            <div>{!!monster.range.length && `Range ${monster.range.join(\"\\n\\n\")}`}</div>\r\n            <div>{!!monster.space && <span><strong>Space</strong> {monster.space} </span>}{!!monster.reach && <span><strong>Reach</strong> {monster.reach} </span>}</div>\r\n            <div>{!!monster.spAtt.length && `Special Attacks ${monster.spAtt.join(\"\\n\\n\")}`}</div>\r\n            <div>{/*Spells */}</div>\r\n          </div>\r\n          <div style={{marginBottom: '1%', paddingBottom: '.8%', borderBottom: 'double'}}>\r\n            <div>Str {monster.stats.str ? monster.stats.str : \"-\"}, Dex {monster.stats.dex ? monster.stats.dex : \"-\"}, Con {monster.stats.con ? monster.stats.con : \"-\"}, Int {monster.stats.int ? monster.stats.int : \"-\"}, Wis {monster.stats.wis ? monster.stats.wis : \"-\"}, Cha {monster.stats.cha ? monster.stats.cha : \"-\"}</div>\r\n            <div>Base Atk {monster.bab > 0 ? `+${monster.bab}` : monster.bab}; CMB {monster.cmb}; CMD {monster.cmd}</div>\r\n            <div>{!!monster.feats.length && <span><u>Feats</u> {monster.feats.join(\", \")}</span>}</div>\r\n            <div>{!!monster.skills.length && <span><u>Skills</u> {monster.skills.join(\", \")}</span>}</div>\r\n            <div>{!!monster.languages.length && <span><u>Languages</u> {monster.languages.join(\", \")}</span>}</div>\r\n          </div>\r\n          <div style={{marginBottom: '1%', paddingBottom: '.8%', borderBottom: 'double'}}>\r\n            <div>{monster.special.map(sp => <section><div><strong>{sp.name}</strong> ({sp.type})</div><p>{sp.description}</p></section>)}</div>\r\n          </div>\r\n        </section>\r\n      )\r\n    } else {\r\n      return <h3>Select an Ally from the Menu!</h3>\r\n    }\r\n  }\r\n\r\n  nettie = () => {\r\n    let monsters = []\r\n    let reduxMonsters = this.props.character_info.hardcode.monsters || []\r\n    reduxMonsters.forEach(monster => {\r\n      switch(monster){\r\n        case ('air elemental'):\r\n          let airElemental = {\r\n        name: \"Air Elemental\",\r\n        alignment: \"N\",\r\n        size: \"Small\",\r\n        type: \"outsider (air)\",\r\n        init: \"+7\",\r\n        senses: [\r\n          \"darkvision 60 ft\",\r\n          \"Perception +4\"\r\n        ],\r\n        ac: {\r\n          base: 17,\r\n          touch: 14,\r\n          ff: 14,\r\n          details: \"+3 Dex, +3 natural, +1 size\"\r\n        },\r\n        hp: 13,\r\n        fort: '+4',\r\n        ref: '+6',\r\n        will: '+0',\r\n        def: [\r\n          \"air mastery\"\r\n        ],\r\n        dr: [],\r\n        immune: [\r\n          \"bleed\",\r\n          \"paralysis\",\r\n          \"poison\",\r\n          \"sleep\",\r\n          \"stun\",\r\n          \"critical hits\",\r\n          \"flanking\",\r\n          \"precision damage\"\r\n        ],\r\n        resist: [],\r\n        weaknesses: [],\r\n        speed: [\r\n          \"fly 100 ft (perfect)\"\r\n        ],\r\n        melee: [\r\n          \"slam +6 (1d4+1)\"\r\n        ],\r\n        range: [],\r\n        space: null,\r\n        reach: null,\r\n        spAtt: [\r\n          \"whirlwind (DC 12, 10-20 ft.)\"\r\n        ],\r\n        stats: {\r\n          str: 12,\r\n          dex: 17,\r\n          con: 12,\r\n          int: 4,\r\n          wis: 11,\r\n          cha: 11\r\n        },\r\n        bab: 2,\r\n        cmb: '+2',\r\n        cmd: '15',\r\n        feats: [\r\n          \"Flyby Attack\",\r\n          \"Improved Initiative\",\r\n          \"Weapon Finesse\"\r\n        ],\r\n        skills: [\r\n          \"Acrobatics +7\",\r\n          \"Finesse +7\",\r\n          \"Perception +4\",\r\n          \"Religion +1\",\r\n          \"Stealth +11\"\r\n        ],\r\n        languages: [\r\n          \"Auran\"\r\n        ],\r\n        special: [\r\n          {name: \"Air Mastery\", description: \"Airborne creatures take a –1 penalty on attack and damage rolls against an air elemental.\", type: \"Ex\"},\r\n          {name: \"Whirlwind\", description: \"The whirlwind is always 5 feet wide at its base, but its height and width at the top vary from creature to creature (minimum 10 feet high). A whirlwind’s width at its peak is always equal to half of its height. The creature controls the exact height, but it must be at least 10 feet high.\\n\\nThe whirlwind form does not provoke attacks of opportunity, even if the creature enters the space another creature occupies. Another creature might be caught in the whirlwind if it touches or enters the whirlwind, or if the whirlwind moves into or through the creature’s space. A creature in whirlwind form cannot make its normal attacks and does not threaten the area around it.\\n\\nCreatures one or more size categories smaller than the whirlwind might take damage when caught in the whirlwind (generally damage equal to the monster’s slam attack for a creature of its size) and may be lifted into the air. An affected creature must succeed on a Reflex save (DC 10 + half monster’s HD + the monster’s Strength modifier) when it comes into contact with the whirlwind or take damage as if it were hit by the whirlwind creature’s slam attack. It must also succeed on a second Reflex save or be picked up bodily and held suspended in the powerful winds, automatically taking the indicated damage each round. A creature that can fly is allowed a Reflex save each round to escape the whirlwind. The creature still takes damage but can leave if the save is successful.\\n\\nCreatures trapped in the whirlwind cannot move except to go where the whirlwind carries them or to escape the whirlwind. Trapped creatures can otherwise act normally, but must succeed on a concentration check (DC 15 + spell level) to cast a spell. Creatures caught in the whirlwind take a –4 penalty to Dexterity and a –2 penalty on attack rolls. The whirlwind can have only as many creatures trapped inside at one time as will fit inside the whirlwind’s volume. The whirlwind can eject any carried creatures whenever it wishes as a free action, depositing them in its space.\\n\\nIf the whirlwind’s base touches the ground, it creates a swirling cloud of debris. This cloud is centered on the creature and has a diameter equal to half the whirlwind’s height. The cloud obscures all vision, including darkvision, beyond 5 feet. Creatures 5 feet away have concealment, while those farther away have total concealment. Those caught in the cloud of debris must succeed on a concentration check (DC 15 + spell level) to cast a spell.\", type: \"Su\"}\r\n        ]\r\n      }\r\n          monsters.push(airElemental)\r\n          break\r\n        case ('lemure'):\r\n          let lemure = {\r\n          name: \"Lemure\",\r\n          alignment: \"LE\",\r\n          size: \"Medium\",\r\n          type: \"outsider (devil, evil, extraplanar, lawful)\",\r\n          init: \"+0\",\r\n          senses: [\r\n            \"darkvision 60 ft\",\r\n            \"see in darkness\",\r\n            \"Perception +4\"\r\n          ],\r\n          ac: {\r\n            base: 14,\r\n            touch: 10,\r\n            ff: 14,\r\n            details: \"+4 natural\"\r\n          },\r\n          hp: 13,\r\n          fort: '+4',\r\n          ref: '+3',\r\n          will: '+0',\r\n          def: [],\r\n          dr: [\r\n            \"5/good or silver\"\r\n          ],\r\n          immune: [\r\n            \"fire\",\r\n            \"mind-affecting effects\",\r\n            \"poison\"\r\n          ],\r\n          resist: [\r\n            \"acid 10\",\r\n            \"cold 10\"\r\n          ],\r\n          weaknesses: [],\r\n          speed: [\r\n            \"20 ft\"\r\n          ],\r\n          melee: [\r\n            \"2 claws +2 (1d4)\"\r\n          ],\r\n          range: [],\r\n          space: null,\r\n          reach: null,\r\n          spAtt: [],\r\n          stats: {\r\n            str: 11,\r\n            dex: 10,\r\n            con: 12,\r\n            int: null,\r\n            wis: 11,\r\n            cha: 5\r\n          },\r\n          bab: 2,\r\n          cmb: '+2',\r\n          cmd: '12',\r\n          feats: [],\r\n          skills: [],\r\n          languages: [\r\n            \"Celestial\",\r\n            \"Infernal\",\r\n            \"Draconic\",\r\n            \"Telepathy\"\r\n          ],\r\n          special: [\r\n            {name: \"See in Darkness\", description: \"Some devils can see perfectly in darkness of any kind, even that created by a deeper darkness spell.\", type: \"Su\"},\r\n            {name: \"Telepathy\", description: \"The creature can mentally communicate with any other creature within a certain range (specified in the creature’s entry, usually 100 feet) that has a language. It is possible to address multiple creatures at once telepathically, although maintaining a telepathic conversation with more than one creature at a time is just as difficult as simultaneously speaking and listening to multiple people at the same time\", type: \"Su\"}\r\n          ]\r\n        }\r\n          monsters.push(lemure)\r\n          break\r\n        case ('fire elemental'):\r\n          let fireElemental = {}\r\n          monsters.push(fireElemental)\r\n          break\r\n        case('water elemental'):\r\n          let waterElemental = {}\r\n          monsters.push(waterElemental)\r\n          break\r\n        default:\r\n          break\r\n      }\r\n    })\r\n    return monsters\r\n  }\r\n\r\n  pepper = () => {\r\n    let monsters = []\r\n    let chubbs = {\r\n      name: \"Chubbs\",\r\n      alignment: \"N\",\r\n      size: \"Diminutive\",\r\n      type: \"magical beast\",\r\n      init: \"+4\",\r\n      senses: [\r\n        \"low-light vision\",\r\n        \"Perception +1\"\r\n      ],\r\n      ac: {\r\n        base: 22,\r\n        touch: 18,\r\n        ff: 18,\r\n        details: \"+4 Dex, +4 size, +4 natural\"\r\n      },\r\n      hp: \"CALCULATE: HALF OF PEPPER'S HP\",\r\n      fort: 'CALCULATE: PEPPERS SAVES',\r\n      ref: 'CALCULATE: PEPPERS SAVES',\r\n      will: 'CALCULATE: PEPPERS SAVES',\r\n      def: [],\r\n      dr: ['In Vigilante Form, DR 2/magic'],\r\n      immune: [],\r\n      resist: [],\r\n      weaknesses: [],\r\n      speed: [\r\n        \"20 ft\",\r\n        \"climb 20 ft.\"\r\n      ],\r\n      melee: [\r\n        \"bite +8 (1d2–4)\"\r\n      ],\r\n      range: [],\r\n      space: \"1 ft\",\r\n      reach: \"0 ft\",\r\n      spAtt: [],\r\n      stats: {\r\n        str: 2,\r\n        dex: 19,\r\n        con: 9,\r\n        int: 9,\r\n        wis: 12,\r\n        cha: 9\r\n      },\r\n      bab: \"CALCULATE: PEPPER'S BAB\",\r\n      cmb: '+0',\r\n      cmd: '6 (10 vs. trip)',\r\n      feats: [\r\n        \"Weapon Finesse\"\r\n      ],\r\n      skills: [\r\n        \"Acrobatics +8\",\r\n        \"Climb +12\",\r\n        \"For each skill in which either the master or the familiar has ranks, use either the normal skill ranks for an animal of that type or the master’s skill ranks, whichever is better. In either case, the familiar uses its own ability modifiers. Regardless of a familiar’s total skill modifiers, some skills may remain beyond the familiar’s ability to use. Familiars treat Acrobatics, Climb, Fly, Perception, Perform, Stealth, and Swim as class skills.\"\r\n      ],\r\n      languages: [],\r\n      special: [\r\n        {name: \"Affinity for My Team\", description: \"A mascot is the heart and soul of its team. At first, the team consists of only the familiar and its master, but at 3rd level and every 3 levels thereafter, a mascot can add an additional member to its team. A mascot’s empathic link extends to all members of its team. A mascot can add or remove one team member over the course of a day.\", type: \"Su\"},\r\n        {name: \"Lucky Mascot\", description: \"Whenever a mascot uses the aid another action to improve a team member’s attack roll or AC, that team member also gains a +1 luck bonus to AC for 1 round.\", type: \"Su\"},\r\n        {name: \"Share Spells\", description: \"The witch may cast a spell with a target of “You” on her familiar (as a touch spell) instead of on herself. A witch may cast spells on her familiar even if the spells do not normally affect creatures of the familiar’s type (magical beast). Spells that target a mascot via its share spells ability function at its master’s caster level – 2. The mascot also benefit from the spells of any team member when it is using share spells.\", type: \"Ex\"},\r\n        {name: \"Deliver Touch Spells\", description: \"If the master and the familiar are in contact at the time the master casts a touch spell, she can designate his familiar as the “toucher.” The familiar can then deliver the touch spell just as the master would. As usual, if the master casts another spell before the touch is delivered, the touch spell dissipates. Spells delivered by a mascot’s deliver touch spells ability function at its master’s caster level – 2. The mascot can deliver the touch spells of any of its team members.\", type: \"Su\"},\r\n        {name: \"Speak with Team\", description: \"A mascot gains the ability to speak with all members of its team verbally as if using speak with master.\", type: \"Ex\"}\r\n      ]\r\n    }\r\n    monsters.push(chubbs)\r\n    return monsters\r\n  }\r\n\r\n  cedrick = () => {\r\n    let monsters = []\r\n    let hoo = {\r\n      name: \"Hoo\",\r\n      alignment: \"N\",\r\n      size: \"Medium\",\r\n      type: \"outsider (air, cold, elemental, extraplanar, water)\",\r\n      init: \"+0\",\r\n      senses: [\r\n        \"darkvision 60 ft.\",\r\n        \"snow vision\",\r\n        \"Perception +7\"\r\n      ],\r\n      ac: {\r\n        base: 16,\r\n        touch: 10,\r\n        ff: 16,\r\n        details: \"+6 natural\"\r\n      },\r\n      hp: 30,\r\n      fort: '+6',\r\n      ref: '+4',\r\n      will: '+1',\r\n      def: [],\r\n      dr: [],\r\n      immune: [\r\n        'cold',\r\n        \"bleed\",\r\n        \"paralysis\",\r\n        \"poison\",\r\n        \"sleep\",\r\n        \"stun\",\r\n        \"critical hits\",\r\n        \"flanking\",\r\n        \"precision damage\"\r\n      ],\r\n      weaknesses: [\r\n        'vulnerable to fire'\r\n      ],\r\n      resist: [],\r\n      speed: [\r\n        \"20 ft\",\r\n        \"burrow (snow and ice only) 20 ft.\",\r\n        'swim 60 ft.'\r\n      ],\r\n      melee: [\r\n        \"slam +7 (1d6+4 plus 1d4 cold)\"\r\n      ],\r\n      range: [],\r\n      space: null,\r\n      reach: null,\r\n      spAtt: [\r\n        'numbing cold (DC 14)'\r\n      ],\r\n      stats: {\r\n        str: 16,\r\n        dex: 10,\r\n        con: 15,\r\n        int: 4,\r\n        wis: 11,\r\n        cha: 11\r\n      },\r\n      bab: \"+4\",\r\n      cmb: '+7',\r\n      cmd: \"17 (can't be tripped)\",\r\n      feats: [\r\n        \"Power Attack\",\r\n        \"Cleave\"\r\n      ],\r\n      skills: [\r\n        \"Religion +4\",\r\n        \"Perception +7\",\r\n        \"Stealth +7\",\r\n        \"Swim +11\"\r\n      ],\r\n      languages: [\r\n        'Aquan'\r\n      ],\r\n      special: [\r\n        {name: \"Snow Vision\", description: \"Hoo can see perfectly well in snowy conditions and does not take any penalties on Perception checks while in snow.\", type: \"Ex\"},\r\n        {name: \"Numbing Cold\", description: \"When Hoo deals cold damage to a creature, that creature must succeed on a Fortitude save or be staggered for 1 round. The save DC is listed in the elemental’s stat block and is Constitution-based.\", type: \"Su\"},\r\n        {name: \"Ice Gliding\", description: \"A burrowing Hoo can pass through nonmagical ice and snow as easily as a fish swims through water. Its burrowing leaves behind no tunnel or hole, nor does it create any ripple or other sign of its presence. A control water spell cast on an area containing a burrowing Hoo flings the elemental back 30 feet, stunning Hoo for 1 round unless it succeeds on a DC 15 Fortitude save.\", type: \"Su\"},\r\n        {name: \"Ice Walking\", description: \"This ability works like the spider climb spell, but the surfaces the elemental climbs must be icy. The elemental can move across icy surfaces without penalty and does not need to make Acrobatics checks to run or charge on ice.\", type: \"Ex\"}\r\n      ]\r\n    }\r\n    monsters.push(hoo)\r\n    return monsters\r\n  }\r\n\r\n  maddox = () => {\r\n    let monsters = []\r\n    let b8 = {\r\n      name: \"B8-triX\",\r\n      alignment: \"N\",\r\n      size: \"Tiny\",\r\n      type: \"construct\",\r\n      init: \"+2\",\r\n      senses: [\r\n        \"blindsight 30 ft.\",\r\n        \"Perception +2\"\r\n      ],\r\n      ac: {\r\n        base: 19,\r\n        touch: 15,\r\n        ff: 16,\r\n        details: \"+2 Dex, +1 dodge, +2 size, +4 natural\"\r\n      },\r\n      hp: 'HALF OF MADDOX HP',\r\n      fort: 'MADDOX FORTITUDE',\r\n      ref: 'MADDOX REFLEX',\r\n      will: 'MADDOX WILL',\r\n      def: [],\r\n      dr: [],\r\n      immune: [\r\n        'mind-affecting effects',\r\n        'disease',\r\n        'death effects',\r\n        'necromancy effects',\r\n        'paralysis',\r\n        'poison',\r\n        'sleep',\r\n        'stunning',\r\n        'ability damage',\r\n        'ability drain',\r\n        'fatigue',\r\n        'exhaustion',\r\n        'energy drain',\r\n        'nonlethal damage',\r\n        'any effect that requires a Fortitude save (unless the effect also works on objects, or is harmless)'\r\n      ],\r\n      weaknesses: [],\r\n      resist: [],\r\n      speed: [\r\n        \"0 ft\",\r\n        'fly 30 ft.'\r\n      ],\r\n      melee: [\r\n        \"slam +0 (1d4-3)\"\r\n      ],\r\n      range: [],\r\n      space: '2 1/2 ft',\r\n      reach: '0 ft',\r\n      spAtt: [],\r\n      stats: {\r\n        str: 4,\r\n        dex: 15,\r\n        con: '-',\r\n        int: 9,\r\n        wis: 14,\r\n        cha: 5\r\n      },\r\n      bab: \"MADDOX BAB\",\r\n      cmb: '+1',\r\n      cmd: \"9\",\r\n      feats: [\r\n        \"Dodge\"\r\n      ],\r\n      skills: [\r\n        \"Fly +10\",\r\n        \"Acrobatics +8\",\r\n        \"Heal +7\",\r\n        \"Investigation +5\",\r\n        \"Linguistics +5\",\r\n        \"Nature +5\",\r\n        \"Perception +10\",\r\n        \"Religion +5\",\r\n        \"Spellcraft +5\",\r\n        \"Survival +5\"\r\n      ],\r\n      languages: [\r\n        \"Common (can't speak)\"\r\n      ],\r\n      special: [\r\n        {name: \"Ioun Affinity\", description: \"An ioun wyrd can integrate a number of ioun stones into its body equal to 1 + half its Hit Dice. Because an ioun wyrd sees all ioun stones as equal and gains no bene ts from them, the wyrd’s ioun stones can be swapped out by any creature the wyrd trusts.\", type: \"Su\"},\r\n        {name: \"Share Iouns\", description: \"A character with an ioun wyrd familiar gains the bene t of the wyrd’s ioun stones as long as the character is within 30 feet of the ioun wyrd.\", type: \"Su\"},\r\n        {name: \"Echo\", description: <span>Once per day when delivering a touch spell, an arcane amplifier can apply the <span className='underline-hover' onClick={() => this.props.editModal('metamagic')}>Extend Spell metamagic feat</span> to the spell.</span>, type: \"Su\"},\r\n        {name: \"Share Spells\", description: \"You may cast a spell with a target of “You” on his familiar (as a touch spell) instead of on yourself. You may cast spells on your familiar even if the spells do not normally affect creatures of the familiar’s type.\", type: \"Su\"},\r\n        {name: \"Empathic Link\", description: \"You have an empathic link with your familiar to a 1 mile distance. You can communicate empathically with the familiar, but cannot see through its eyes. Because of the link’s limited nature, only general emotions can be shared. You have the same connection to an item or place that his familiar does.\", type: \"Su\"},\r\n        {name: \"Deliver Touch Spells\", description: \"Your familiar can deliver touch spells for you. If you and the familiar are in contact at the time you cast a touch spell, you can designate your familiar as the “toucher.” The familiar can then deliver the touch spell just as you would. As usual, if you cast another spell before the touch is delivered, the touch spell dissipates.\", type: \"Su\"},\r\n        {name: \"Speak with Master\", description: \"You and your familiar can communicate verbally as if you were using a common language. Other creatures do not understand the communication without magical help.\", type: \"Ex\"},\r\n        {name: \"Reverberate\", description: <span>Once per day when delivering a touch spell, an arcane amplifier can apply either the <span className='underline-hover' onClick={() => this.props.editModal('metamagic')}>Empower Spell metamagic feat</span> to the spell or use the <span className='underline-hover' onClick={() => this.props.editModal('metamagic')}>Heighten Spell metamagic feat</span> to increase its spell level by 2.</span>, type: \"Su\"}\r\n      ]\r\n    }\r\n    monsters.push(b8)\r\n    return monsters\r\n  }\r\n\r\n  render(){\r\n    console.log(this.state.activeAlly)\r\n    return(\r\n      <div>\r\n        <AlliesTab renderTabClick={this.renderTabClick} allies={this.props.character_info.hardcode.monsters} activeAlly={this.state.activeAlly} character={this.props.character.name} removeAlly={this.removeAlly}/>\r\n        {this.renderAlly()}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Allies)\r\n","import React from 'react'\r\n\r\nimport Tab from '../components/character_show/tab'\r\n\r\nclass CampaignTabs extends React.Component {\r\n\r\n  render(){\r\n\r\n    return(\r\n      <span className='tab-list'>\r\n        <Tab label=\"Campaign\" renderTabClick={this.props.renderTabClick} activeTab={this.props.activeTab}/>\r\n        <Tab label=\"Allies\" renderTabClick={this.props.renderTabClick} activeTab={this.props.activeTab}/>\r\n      </span>\r\n    )\r\n  }\r\n}\r\n\r\nexport default CampaignTabs\r\n","import React from 'react'\r\n\r\nimport CampaignShow from '../components/character_show/campaign'\r\nimport Allies from '../components/character_show/allies'\r\n\r\nimport CampaignTabs from './campaign_tabs'\r\n\r\nclass Campaign extends React.Component {\r\n  state= {\r\n    activeTab: \"Campaign\"\r\n  }\r\n\r\n  renderTabClick = (choice) => {\r\n    this.setState({activeTab: choice})\r\n  }\r\n\r\n  render(){\r\n    return(\r\n      <div id=\"campaign\" className='shadow character-show'>\r\n        <CampaignTabs renderTabClick={this.renderTabClick} activeTab={this.state.activeTab}/>\r\n        <div style={{height: '100%'}}>\r\n          {this.state.activeTab === \"Campaign\" && <CampaignShow editModal={this.props.editModal}/>}\r\n          {this.state.activeTab === \"Allies\" && <Allies character={this.props.character}/>}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Campaign\r\n","import React from 'react'\r\nimport store from '../../store'\r\nimport _ from 'lodash'\r\nimport { modalAction } from '../action_creator/popups'\r\n\r\nexport const allCharacterChoices = () => {\r\n\t// NEW DATA\r\n\tlet array = []\r\n\r\n\t// STORED DATA\r\n\tlet { character } = store.getState()\r\n\tlet { applicable_klass_features, character_choices } = {...character}\r\n\r\n\t// CALCULATED DATA\r\n\r\n\tapplicable_klass_features.forEach(akf => {\r\n\t\tlet klassName = character.uniq_klasses.find(uk => {\r\n\t\t\tif (akf.klass_id){\r\n\t\t\t\treturn uk.id === akf.klass_id\r\n\t\t\t} else if (akf.klass_archetype_id){\r\n\t\t\t\tlet arch = character.archetypes.find(ar => ar.id === akf.klass_archetype_id)\r\n\t\t\t\treturn uk.id === arch.klass_id\r\n\r\n\t\t\t}\r\n\t\t}).name\r\n\t\takf.features.forEach(f => {\r\n\t\t\tif (f.character_choices.length) {\r\n\t\t\t\tlet isNew = true\r\n\t\t\t\tif (character_choices.find(cc => cc.feature_id === f.id)){isNew = false}\r\n\t\t\t\tarray.push({\r\n\t\t\t\t\tfeature: f,\r\n\t\t\t\t\tklassName,\r\n\t\t\t\t\tfeatureName: akf.name,\r\n\t\t\t\t\tsourceId: akf.id,\r\n\t\t\t\t\tspecifics: f.character_choices[0].column,\r\n\t\t\t\t\tsub_feature: f.character_choices[0].sub_feature,\r\n\t\t\t\t\tisNew\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t})\r\n\r\n\treturn array\r\n}\r\n\r\nexport const renderCharacterChoices = () => {\r\n\tlet characterChoicesArray = allCharacterChoices()\r\n\treturn characterChoicesArray.map(cc => {\r\n\t\tlet specifics = _.startCase(cc.specifics)\r\n\t\tif (_.endsWith(specifics, \" Id\")){\r\n\t\t\tspecifics = specifics.substring(0, specifics.length-3)\r\n\t\t}\r\n\r\n\t\tlet verb = cc.isNew ? \"Choose\" : \"Alter\"\r\n\t\tlet className = cc.isNew ? \"attention-button-animation\" : \"\"\r\n\r\n\t\tlet renderClick = () => {\r\n\t\t\tmodalAction(\"characterChoice\", cc)\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<button className={className} onClick={renderClick}>\r\n\t\t\t\t{cc.klassName} - {cc.featureName}: {verb} {specifics}\r\n\t\t\t</button>\r\n\t\t)\r\n\t})\r\n}\r\n\r\nexport const allKlassSpecializations = () => {\r\n\t// NEW DATA\r\n\tlet array = []\r\n\r\n\t// STORED DATA\r\n\tlet { character } = store.getState()\r\n\tlet { applicable_klass_features, klass_specializations } = {...character}\r\n\r\n\t// CALCULATED DATA\r\n\r\n\tapplicable_klass_features.forEach(akf => {\r\n\t\tif (akf.specialization){\r\n\t\t\tlet klassName = character.uniq_klasses.find(uk => uk.id === akf.klass_id).name\r\n\t\t\tlet hasSpecialization = akf.choice_amount\r\n\t\t\tklass_specializations.forEach(kspec => {\r\n\t\t\t\tif (kspec.klass_feature.id === akf.id){hasSpecialization--}\r\n\t\t\t})\r\n\t\t\t// by setting hasSpecialization to a number of choices\r\n\t\t\t// if the akf needs you to pick multiple features (i.e. cleric get 2 domains)\r\n\t\t\t// it deducts one if a specialization is found\r\n\t\t\t// and then if the number is greater than 0, there are some specializations to be taken\r\n\t\t\t// greater than 0 is FALSE, is 0 is TRUE\r\n\t\t\t// at least a truthy value for \"should a red button be displayed?\"\r\n\t\t\thasSpecialization = !hasSpecialization > 0\r\n\t\t\tarray.push({\r\n\t\t\t\tklassFeature: akf,\r\n\t\t\t\tklassName,\r\n\t\t\t\thasSpecialization\r\n\t\t\t})\r\n\t\t}\r\n\t})\r\n\r\n\treturn array\r\n}\r\n\r\n\r\nexport const renderKlassSpecializations = () => {\r\n\tlet klassSpecializationArray = allKlassSpecializations()\r\n\treturn klassSpecializationArray.map(kspec => {\r\n\t// \tlet specifics = _.startCase(kspec.specifics)\r\n\t// \tif (_.endsWith(specifics, \" Id\")){\r\n\t// \t\tspecifics = specifics.substring(0, specifics.length-3)\r\n\t// \t}\r\n\t//\r\n\t\tlet verb = !kspec.hasSpecialization ? \"Choose\" : \"Alter\"\r\n\t\tlet className = !kspec.hasSpecialization ? \"attention-button-animation\" : \"\"\r\n\r\n\t\tlet renderClick = () => {\r\n\t\t\tmodalAction(\"klassSpecialization\", kspec)\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<button className={className} onClick={renderClick}>\r\n\t\t\t\t{kspec.klassName}: {verb} {kspec.klassFeature.name}\r\n\t\t\t</button>\r\n\t\t)\r\n\t})\r\n}\r\n","import React from 'react'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faDungeon} from '@fortawesome/free-solid-svg-icons'\r\nimport { doWeNeedAYellowNotification } from '../../utils/notifications/yellow_notification'\r\nimport { doWeNeedARedNotification } from '../../utils/notifications/red_notification'\r\n\r\nconst NotificationDoor = props => {\r\n\r\n\tconst greenBadge = () => {\r\n\t\tlet badge = false\r\n\t\tlet cmis = props.character?.character_magic_items || []\r\n\t\tcmis.forEach(cmi => {\r\n\t\t\tif (!cmi.discovered){\r\n\t\t\t\tbadge = true\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn badge\r\n\t}\r\n\r\n\tconst yellowBadge = () => {\r\n\t\t// let badge = false\r\n\t\t//\r\n\t\t// let prepared = false\r\n\t\t// this.props.character_info.classes.forEach(cl => {\r\n\t\t//   if (cl.spellcasting && cl.spellcasting.prepared){\r\n\t\t//     prepared = true\r\n\t\t//   }\r\n\t\t// })\r\n\t\t// badge = prepared ? (!this.props.character.is_done_preparing_spells ? true : badge) : badge\r\n\t\t// return badge\r\n\t\treturn doWeNeedAYellowNotification()\r\n\t}\r\n\r\n\tconst redBadge = () => {\r\n\t\treturn doWeNeedARedNotification()\r\n\t}\r\n\r\n\treturn (\r\n\t\t<span style={{marginLeft: \"1vw\"}}>\r\n\t\t\t<div className='notification'>\r\n\t\t\t\t{greenBadge() && <span className='badge green-badge'></span>}\r\n\t\t\t\t{yellowBadge() && <span className='badge yellow-badge'></span>}\r\n\t\t\t\t{redBadge() && <span className='badge red-badge'></span>}\r\n\t\t\t\t<FontAwesomeIcon icon={faDungeon} size='3x' onClick={() => props.editModal('notifications')} />\r\n\t\t\t</div>\r\n\t\t</span >\r\n\t)\r\n}\r\n\r\nexport default NotificationDoor\r\n","import { allCharacterChoices } from './character_choices'\r\n\r\nexport const doWeNeedAYellowNotification = () => {\r\n\tlet yellow = false\r\n\tallCharacterChoices().forEach(cc => {\r\n\t\tif (cc.isNew){yellow = true}\r\n\t})\r\n\r\n\treturn yellow\r\n}\r\n","import { allKlassSpecializations } from './character_choices'\r\n\r\nexport const doWeNeedARedNotification = () => {\r\n\tlet red = false\r\n\tallKlassSpecializations().forEach(kspec => {\r\n\t\tif (!kspec.hasSpecialization){red = true}\r\n\t})\r\n\r\n\treturn red\r\n}\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport _ from 'lodash'\r\nimport { calculateFeaturePercentage } from '../../helper_functions/calculations/feature_usage'\r\n\r\nconst Points = props => {\r\n\r\n\tconst [loading, doneLoading] = React.useState(true)\r\n\tconst [floatingNum, toggleFloatingNum] = React.useState(false)\r\n\tconst numsRefContainer = React.useRef(null)\r\n\r\n\tReact.useEffect(() => {\r\n\t\tif (loading){doneLoading(false)}\r\n\t\telse {\r\n\t\t\ttoggleFloatingNum(true)\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\ttoggleFloatingNum(false)\r\n\t\t\t}, 1100)\r\n\t\t}\r\n\t}, [props.character.character_klass_feature_usages])\r\n\r\n\tconst renderClick = (feature) => {\r\n\t\tprops.dispatch({type: \"MODAL\", detail: \"adjust points\", obj: feature})\r\n\t}\r\n\r\n  const renderPoints = (name) => {\r\n    switch(name){\r\n      case \"Nettie\":\r\n        return (\r\n          <span className='centered' onClick={() => props.editModal('points')}>\r\n            <div className='enhanced'>{props.character_info.hardcode.points} / 19</div>\r\n            <div className='muted'>Bardic Performance</div>\r\n          </span>\r\n        )\r\n      case \"Merg\":\r\n        return (\r\n          <span className='centered' onClick={() => props.editModal('points')}>\r\n            <div className='enhanced'>{props.character_info.hardcode.points} / 18</div>\r\n            <div className='muted'>Rage Rounds</div>\r\n          </span>\r\n        )\r\n      case \"Cedrick\":\r\n        return (\r\n          <span className='centered' onClick={() => props.editModal('points')}>\r\n            <div className='enhanced'>{props.character_info.hardcode.points} / 7</div>\r\n            <div className='muted'>Chimera Points</div>\r\n          </span>\r\n        )\r\n      case \"Robby\":\r\n        return (\r\n          <span className='centered' onClick={() => props.editModal('points')}>\r\n            <div className='enhanced'>{props.character_info.hardcode.points}/4</div>\r\n            <div className='muted'>Panache Points</div>\r\n          </span>\r\n        )\r\n      case \"Maddox\":\r\n        return (\r\n          <span className='centered' onClick={() => props.editModal('points')}>\r\n            <div className='enhanced'>{props.character_info.hardcode.points} / 10</div>\r\n            <div className='muted'>Arcane Reservoir</div>\r\n          </span>\r\n        )\r\n      case \"Grackle\":\r\n        return (\r\n          <span className='centered' onClick={() => props.editModal('points')}>\r\n            <div className='enhanced'>{props.character_info.hardcode.points} / 10</div>\r\n            <div className='muted'>Bombs Used</div>\r\n          </span>\r\n        )\r\n      default:\r\n        let pointsFeatures = []\r\n\t\t\t\tprops.character.applicable_klass_features.forEach(akf => {\r\n\t\t\t\t\takf.features.forEach(f => {\r\n\t\t\t\t\t\tif (f.usage?.limit || f.usage?.limit_frequency && !f.usage?.destroy_after_use){\r\n\t\t\t\t\t\t\tlet ckfus = props.character.character_klass_feature_usages.filter(fu => fu.klass_feature_id === akf.id)\r\n\t\t\t\t\t\t\tpointsFeatures.push({...f, sourceId: akf.id, klassFeatureName: akf.name, klassId: akf.klass_id, usageSources: ckfus, source: \"applicable_klass_features\"})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\treturn pointsFeatures.map(f => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<span className='centered' onClick={() => renderClick(f)}>\r\n\t\t\t\t\t\t\t<div className='enhanced' ref={numsRefContainer}>{calculateFeaturePercentage(f)}{renderFloatingNumber()}</div>\r\n\t\t\t\t\t\t\t<div className='muted'>{_.capitalize(f.klassFeatureName)} {_.capitalize(f.usage.unit)}</div>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t)\r\n\t\t\t\t})\r\n    }\r\n  }\r\n\r\n\tconst renderFloatingNumber = () => {\r\n\t\tif (floatingNum){\r\n\t\t\tlet style = {position: \"absolute\"}\r\n\t\t\tif (numsRefContainer.current){\r\n\t\t\t\tlet { offsetLeft, offsetTop, offsetWidth, offsetHeight } = numsRefContainer.current\r\n\t\t\t\tstyle = {...style, left: offsetLeft + (offsetWidth/3), top: offsetTop + (offsetHeight/2)}\r\n\t\t\t}\r\n\t\t\treturn <span className=\"minus-one\" style={style}>-1</span>\r\n\t\t}\r\n\t}\r\n\r\n  return(\r\n    <div id='points' className='shadow shrink'>\r\n      {renderPoints(props.character.name)}\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Points)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Portal from '../portal'\r\n\r\nconst Points = props => {\r\n\r\n  const additionalContent = () => {\r\n    let name = props.character.name\r\n    if (name === 'Robby'){\r\n      return (\r\n        <React.Fragment>\r\n          <h4>Regain Panache</h4>\r\n          <ul>\r\n            <li><em><u>Critical Hit with a Light or One-Handed Piercing Melee Weapon:</u></em> Each time you confirm a critical hit with a light or one-handed piercing melee weapon, you regain 1 panache point. Confirming a critical hit on a helpless or unaware creature or a creature that has fewer Hit Dice than half your character level doesn’t restore panache.</li>\r\n            <li><em><u>Killing Blow with a Light or One-Handed Piercing Melee Weapon:</u></em> When you reduces a creature to 0 or fewer hit points with a light or one-handed piercing melee weapon attack while in combat, you regain 1 panache point. Destroying an unattended object, reducing a helpless or unaware creature to 0 or fewer hit points, or reducing a creature that has fewer Hit Dice than half your character level to 0 or fewer hit points doesn’t restore panache.</li>\r\n          </ul>\r\n        </React.Fragment>\r\n      )\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Portal>\r\n      <div className=\"page-dimmer\" onClick={props.clickOut}>\r\n        <div className=\"edit-form\" name=\"background\">\r\n          <h3>Remaining: {props.character_info.hardcode.points}</h3>\r\n          {additionalContent()}\r\n          <button onClick={() => props.dispatch({type: 'POINTS CHANGE', amount: 'increase'})}>+</button>\r\n          <button onClick={() => props.dispatch({type: 'POINTS CHANGE', amount: 'decrease'})}>-</button>\r\n        </div>\r\n      </div>\r\n    </Portal>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Points)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Portal from '../portal'\r\n\r\nconst Performance = props => {\r\n\r\n  const renderPerformance = (name) => {\r\n    props.dispatch({type: 'CHANGE PERFORMANCE', name})\r\n    props.exitModal()\r\n  }\r\n\r\n  return (\r\n    <Portal>\r\n      <div className=\"page-dimmer\" onClick={props.clickOut}>\r\n        <div className=\"edit-form\" name=\"background\">\r\n          <div>Active Performance: {props.character_info.hardcode.performance ? props.character_info.hardcode.performance : \"none\"}</div>\r\n          <button style={{display: 'block', margin: 'auto'}} onClick={() => renderPerformance('Inspire Courage')}>Inspire Courage</button>\r\n          <button style={{display: 'block', margin: 'auto'}} onClick={() => renderPerformance('Inspire Competence')}>Inspire Competence</button>\r\n          <button style={{display: 'block', margin: 'auto'}} onClick={() => renderPerformance('Countersong')}>Countersong</button>\r\n          <button style={{display: 'block', margin: 'auto'}} onClick={() => renderPerformance('Distraction')}>Distraction</button>\r\n          <button style={{display: 'block', margin: 'auto'}} onClick={() => renderPerformance('Fascinate')}>Fascinate</button>\r\n          <button style={{display: 'block', margin: 'auto'}} onClick={() => renderPerformance('Suggestion')}>Suggestion</button>\r\n          <br/>\r\n          <button style={{display: 'block', margin: 'auto'}} onClick={() => renderPerformance('none')}>Cancel Performance</button>\r\n        </div>\r\n      </div>\r\n    </Portal>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Performance)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Portal from '../portal'\r\n\r\nconst Rage = props => {\r\n\r\n  const renderClick = () => {\r\n    let rage = props.character_info.hardcode.rage\r\n    if (rage){\r\n      props.dispatch({type: 'POINTS CHANGE', change: 'decrease'})\r\n    } else {\r\n      props.dispatch({type: 'RAGE', change: 'START'})\r\n      props.dispatch({type: 'POINTS CHANGE', change: 'decrease'})\r\n    }\r\n    props.exitModal()\r\n  }\r\n\r\n  const renderEnd = () => {\r\n    props.dispatch({type: 'RAGE', change: 'END'})\r\n    props.exitModal()\r\n  }\r\n\r\n  return (\r\n    <Portal>\r\n      <div className=\"page-dimmer\" onClick={props.clickOut}>\r\n        <div className=\"edit-form\" name=\"background\">\r\n          <button style={{display: 'block', margin: 'auto'}} onClick={renderClick}>{props.character_info.hardcode.rage ? 'Continue Rage' : 'Start Rage'}</button>\r\n          <br/>\r\n          <button style={{display: 'block', margin: 'auto'}} onClick={renderEnd}>End Rage</button>\r\n        </div>\r\n      </div>\r\n    </Portal>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Rage)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { featureDistribution as removeFeature } from '../../helper_functions/distributers/features'\r\n\r\nconst Active = props => {\r\n  const hc = props.character_info.hardcode\r\n\r\n  const performance = hc.performance\r\n  const effects = props.activeEffects.map(ae => <li>{ae}</li>)\r\n  const rage = hc.rage\r\n  const power = hc.power\r\n  const eBlood = hc.eBloodActive\r\n  const defense = hc.fd\r\n  const charge = hc.charge\r\n  let combat = hc.combat\r\n  const minor = hc.minor\r\n  const major = hc.major\r\n  if (combat === 'Frog - Combat'){\r\n    combat += ` (${hc.frogCombat})`\r\n  }\r\n  const age = hc.age\r\n  const augment = hc.augment ? props.character.known_spells.find(ks => ks.spell.id === hc.augment.spellId).spell.name : null\r\n  const enlarge = hc.enlarge\r\n  const reduce = hc.reduce\r\n  const expeditious = hc.expeditious\r\n  const swim = hc.swim\r\n  const swim20 = hc.swim20\r\n  const land10 = hc.land10\r\n  const land20 = hc.land20\r\n  const quick = hc.quick\r\n  const helmsman = hc.helmsman\r\n  const crew = hc.crew\r\n  const stealTime = hc.stealTime\r\n  const activeMutagen = hc.activeMutagen ? hc.mutagen : false\r\n\r\n\r\n  const renderFeatures = () => {\r\n    let temp = props.character_info.features.filter(f => f.duration === 'temporary')\r\n    return temp.map(t => {\r\n      let detail = ''\r\n      detail = t.type === 'movement' ? `${t.movement} Speed: ${t.feet} ft` : detail\r\n\r\n      return <li>{t.source}: {detail}</li>\r\n    })\r\n  }\r\n\r\n\tconst renderActiveFeatures = (features) => {\r\n\t\treturn features.map(f => {\r\n\t\t\t// if sent through websockets\r\n\t\t\tif (f.senderName) {return <li>{f.sourceName} ({f.senderName})</li>}\r\n\t\t\t// else\r\n\t\t\tlet foundAbility = props.character[f.source].find(ability => ability.id === f.sourceId)\r\n\t\t\tif (foundAbility){\r\n\t\t\t\tlet foundFeature = foundAbility.features.find(feat => feat.id === f.featureId)\r\n\t\t\t\tlet name = !foundFeature.name ? foundAbility.name : foundFeature.name\r\n\r\n\t\t\t\treturn <li>{name} <button onClick={() => removeActiveFeature({...foundFeature, ...f})}>X</button></li>\r\n\t\t\t} else {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tconst removeActiveFeature = (feature) => {\r\n\t\tremoveFeature(feature)\r\n\t}\r\n\r\n  const renderMutagen = () => {\r\n    let positiveAbilityScore\r\n    let negativeAbilityScore\r\n    switch(activeMutagen){\r\n      case \"strength\":\r\n        positiveAbilityScore = 'Strength'\r\n        negativeAbilityScore = 'Intelligence'\r\n        break\r\n      case \"dexterity\":\r\n        positiveAbilityScore = 'Dexterity'\r\n        negativeAbilityScore = 'Wisdom'\r\n        break\r\n      case \"constitution\":\r\n        positiveAbilityScore = 'Constitution'\r\n        negativeAbilityScore = 'Charisma'\r\n        break\r\n      default:\r\n        break\r\n    }\r\n    return <li>Mutagen: +4 to {positiveAbilityScore}, -2 to {negativeAbilityScore}, +2 to AC, 70 minutes</li>\r\n  }\r\n\r\n  return (\r\n    <div id='active' className='shadow shrink'>\r\n      <ul>\r\n        {props.character_info.conditions.map(c => <li>{c}</li>)}\r\n        {helmsman && <li>Sasea Bitch Helmsman</li>}\r\n        {crew && <li>Sasea Bitch Crew</li>}\r\n        {performance && <li>Bardic Performance: {performance}</li>}\r\n        {effects}\r\n        {rage && <li>Raging</li>}\r\n        {power && <li>Power Attack</li>}\r\n        {eBlood && <li>Lesser Elemental Blood (electricity)</li>}\r\n        {defense && <li>Fighting Defensively</li>}\r\n        {charge && <li>Charging</li>}\r\n        {combat && <li>{combat}</li>}\r\n        {minor && <li>{minor}</li>}\r\n        {major && <li>{major}</li>}\r\n        {age && <li>Age Catergory: {age}</li>}\r\n        {augment && <li>Augmented {augment}: {hc.augment.augment === 'dc' ? '+1 DC' : '+1 Caster Level'}</li>}\r\n        {enlarge && <li>Affected by <em className='underline-hover' onClick={() => props.editModal('spell', null, 64)}>enlarge person</em></li>}\r\n        {reduce && <li>Affected by <em className='underline-hover' onClick={() => props.editModal('spell', null, 65)}>reduce person</em></li>}\r\n        {expeditious && <li>Expeditious Retreat</li>}\r\n        {swim && <li>Swim Speed 30 ft.</li>}\r\n        {swim20 && <li>Swim Speed 20 ft.</li>}\r\n        {land10 && <li>Base Speed +10 ft.</li>}\r\n        {land20 && <li>Base Speed +20 ft.</li>}\r\n        {quick && <li>Base Speed +10 ft., +2 AC, adv. on next attack, Reflex save, Dex or Charisma check</li>}\r\n        {stealTime && <li>+1 to AC, Reflex, +5 base speed</li>}\r\n        {activeMutagen && renderMutagen()}\r\n        {renderFeatures()}\r\n\t\t\t\t{renderActiveFeatures(props.character_info.activeFeatures)}\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Active)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Portal from '../portal'\r\n\r\nconst FrogCombat = props => {\r\n\r\n  const frogCombat = (name) => {\r\n    props.dispatch({type: 'FROG COMBAT', name})\r\n    props.exitModal()\r\n  }\r\n\r\n  return (\r\n    <Portal>\r\n      <div className=\"page-dimmer\" onClick={props.clickOut}>\r\n        <div className=\"edit-form\" name=\"background\">\r\n          <div>Active Combat Form Effect: {props.character_info.hardcode.frogCombat ? props.character_info.hardcode.frogCombat : \"none\"}</div>\r\n          <button style={{display: 'block', margin: 'auto'}} onClick={() => frogCombat('Sickened')}>Sickened for 1 round</button>\r\n          <button style={{display: 'block', margin: 'auto'}} onClick={() => frogCombat('Acid Damage')}> 1d3 Acid Damage</button>\r\n          <button style={{display: 'block', margin: 'auto'}} onClick={() => frogCombat('Silent Image')}>Affected by <em>silent image</em> for 1 round</button>\r\n          <br/>\r\n          <button style={{display: 'block', margin: 'auto'}} onClick={() => frogCombat('none')}>Cancel Combat Form</button>\r\n        </div>\r\n      </div>\r\n    </Portal>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(FrogCombat)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Portal from '../portal'\r\n\r\nconst CommandRing = props => {\r\n\r\n  return (\r\n    <Portal>\r\n      <div className=\"page-dimmer\" onClick={props.clickOut}>\r\n        <div className=\"edit-form\" name=\"background\">\r\n          <div>Remaining: {props.character_info.hardcode.ringPoints}</div>\r\n          <button onClick={() => props.dispatch({type: 'COMMAND POINTS CHANGE', amount: 'increase'})}>+</button>\r\n          <button onClick={() => props.dispatch({type: 'COMMAND POINTS CHANGE', amount: 'decrease'})}>-</button>\r\n        </div>\r\n      </div>\r\n    </Portal>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(CommandRing)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Portal from '../portal'\r\n\r\nconst AgeModal = props => {\r\n\r\n  const renderAge = age => {\r\n    let previousAge = props.character_info.hardcode.age\r\n    if (age === 'Young'){\r\n      props.dispatch({type: 'CHANGE SIZE', size: 'Small'})\r\n    }\r\n    if (previousAge === 'Young' && age !== 'Young'){\r\n      props.dispatch({type: 'CHANGE SIZE', size: 'Medium'})\r\n    }\r\n    props.dispatch({type: 'TIME TRAVEL', age})\r\n    props.exitModal()\r\n  }\r\n\r\n  return (\r\n    <Portal>\r\n      <div className=\"page-dimmer\" onClick={props.clickOut}>\r\n        <div className=\"edit-form\" name=\"background\">\r\n          <div>Current Age Catergory: {props.character_info.hardcode.age}</div>\r\n          <button onClick={() => renderAge('Young')}>Young (3-7)</button>\r\n          <button onClick={() => renderAge('Adult')}>Adult (8-12)</button>\r\n          <button onClick={() => renderAge('Middle')}>Middle Age (13-15)</button>\r\n          <button onClick={() => renderAge('Old')}>Old (16-17)</button>\r\n          <button onClick={() => renderAge('Venerable')}>Venerable (18)</button>\r\n        </div>\r\n      </div>\r\n    </Portal>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(AgeModal)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Portal from '../portal'\r\n\r\nconst Curio = props => {\r\n\r\n  let curios = []\r\n\r\n  let warranty = 'All curios can be broken voluntarily by its wielder, after possessing it for at least 1 day. Once broken, they can cast the spell attributed to it. The curio becomes inert, and must be repaired. Once repaired, it can only be reactivated at another altar.'\r\n\r\n  switch(props.character.name){\r\n    case 'Cedrick':\r\n      curios.push({\r\n        name: \"Ta'al'mon Ancestral Handwraps\",\r\n        description: \"This thick woven bandages are off white, but unblemished. They are 4 inches by 10 ft, and are meant to be wrapped around a creature’s limbs to provide a barrier and brace when fighting. There are faint relief carvings in the bandages themselves, large pictographs of martial arts poses and forms.\",\r\n        hp: \"Hardness 12, Hit Points 30\",\r\n        effects: [\r\n          \"This curio gives the wielder a +2 enhancement bonus to Dexterity.\",\r\n          'This curio counts a +1 magic weapon, giving a +1 enhancement bonus to unarmed or natural weapons that it is wrapped around, affecting the attack rolls and damage rolls.',\r\n          <span>This curio counts as having the ominous weapon enchantment <small>(An ominous weapon trails a shadowy haze behind every stroke, and moans a menacing dirge in battle. An ominous weapon adds its enhancement bonus on Intimidate checks made by the wielder. In addition, when an ominous weapon confirms a critical hit, the target is shaken for 1 minute (DC 13 Will negates); if the weapon’s critical multiplier is greater than x2, this condition lasts 1 additional minute per multiple over x2. A creature that gains the shaken condition from an ominous weapon cannot gain that condition again from the same weapon for 24 hours.)</small></span>,\r\n          'Once per day, as a swift action, the wielder can reroll their initiative check with an enhancement bonus equal to their dexterity modifier. This does not allow the weidler to act twice within a given round, their initiative takes effect during the following round.',\r\n          'Once a day, the wielder can make their next attack action, if it hits, deal twice the number of damage dice used instead of the normal amount. This feature does not affect precision damage, but it does count in additional to a critical hit’s dice damage increase. This feature does not stack with the vital strike feat or similar abilities.',\r\n          'If the wielder makes a successful unarmed attack against a creature, if that creature’s size is the same as theirs or smaller, the wielder can, as a swift action, teleport to the square opposite where they were relative to the damaged creature. This square is where an ally would be if the wielder was flanking the enemy. If that square is occupied, the wielder may teleport to an adjacent square, but still in a threat range of the enemy. If these squares are occupied, they cannot use this feature.',\r\n          <span>Twice per day, the wielder can cast <em>force punch</em>, using their class level as their caster level.</span>,\r\n          <span>When it breaks, the wielder can cast <em>greater magic fang</em> - standard action (Caster Level is equal to the wielder’s class level)</span>\r\n        ]\r\n      })\r\n      break\r\n    case 'Robby':\r\n      curios.push({\r\n        name: 'Tempest Trishula',\r\n        description: 'Three-pointed trident, with the outer two tines curving out from the base, and back in towards the center tine, and curve the points back out. The shaft has multiple ridged bands spaced 6 inches apart. It has embossed runes all along it that give it grip and texture. Just at the top, under the points, are small three glowing gemstones, that glow on opposite sides of haft.',\r\n        hp: 'Hardness 12, Hit Points 30',\r\n        effects: [\r\n          'Counts as a +1 magic weapon, so +1 enhancement bonus to Attack Rolls and Damage Rolls',\r\n          'Counts as having the shock weapon enchantment (+1d6 electricity damage)',\r\n          <span>Counts as having the returning weapon enchantment <small>(A returning weapon flies through the air back to the creature that threw it. It returns to the thrower just before the creature’s next turn (and is therefore ready to use again in that turn). Catching a returning weapon when it comes back is a free action. If the character can’t catch it, or if the character has moved since throwing it, the weapon drops to the ground in the square from which it was thrown.)</small></span>,\r\n          'While wielding, the user has a swim speed of 30 ft.',\r\n          <span>The Trishula has three glowing teal gemstones along the shaft. This trident holds 3 spell level slots, which can be spent by casting spells. For each spell level the spell has, when cast, that many gems go dormant. You cannot cast a spell that has a higher spell level the number of glowing gems on the Trishula. The Tempest Trishula has a caster level equal to your class level, and Charisma has the spellcasting score. The number of glowing gems restore to 3 at the beginning of a new day. The spells available to cast are: <em>obscuring mist</em>(1), <em>hydraulic push</em>(1), <em>gust of wind</em>(2), <em>slipstream</em>(2)</span>,\r\n          <span>When it breaks, the wielder can cast <em>lightning bolt</em> - standard action (Caster Level is equal to the wielder’s class level)</span>\r\n        ]\r\n      })\r\n      break\r\n    case 'Maddox':\r\n      curios.push({\r\n        name: 'Zamantash Delta Chronometer',\r\n        description: 'This brass contraption fits into a palm comfortably, and is heavy for its size. Shaped like a flat disk, on one side is an engraving of concentric circles of different weights and locations within the larger circle. The front has a time face, with a 24 hour clock, and this is mirrored with a hologram of the face that is 2 inches above the clock face, glowing a transparent blue.',\r\n        hp: 'Hardness 12, Hit Points 8',\r\n        effects: [\r\n          'Thrice a day, the wielder can add a +2 insight bonus to any roll involving a d20. You can add this bonus after rolling, but before knowing the result of the check.',\r\n          <span>At will, the wielder can cast <em>augury</em>, but the casting time increases to 10 minutes, using their class level as their caster level.</span>,\r\n          'Once every three days, as a move action, the wielder, and any companion, familiar, or mount within 5 ft of them, feels as though they received an 8-hour rest. This benefit applies towards healing HP and ability damage, removing conditions, and resetting spells and abilities.',\r\n          'Once a month, the wielder and all others can participate in a ritual that takes 20 minutes. The moment the ritual ends becomes a fixed point in time. Within 24 hours of completing this ritual, the wielder can trigger the Curio as a 3-round action that requires concentration, and provokes an attack of opportunity. Time is rewound back to the fixed point in time, which becomes no longer fixed, and all of the participants of the ritual are aware of the events that they experienced. Their spent spells, abilities, and hit points are what they were when the ritual was completed.',\r\n          'As a standard action, the wielder can select one creature within 30 ft of them. That target gains +10 to their speed, a +2 insight bonus to their AC, and on their next attack roll, Reflex saving throw, or Dexterity-based or Charisma-based skill check, they may roll twice and take the higher of the two results. This effect lasts until the beginning of the current wielder’s next turn.',\r\n          <span>When it breaks, the wielder can cast <em>hold person</em> - standard action (Caster Level is equal to the wielder’s class level)</span>\r\n        ]\r\n      })\r\n      break\r\n    case 'Merg':\r\n      curios.push({\r\n        name: 'Fabric of Reality',\r\n        description: 'A glossy and sturdy cloth. It is only 2.5 ft by 3 ft wide, but it has a smooth silky side, and a rougher, course side. The course side is jet black, while the smooth side appears black, but is a shiny metallic silver, that up close, has rainbow reflections.',\r\n        hp: 'Hardness 12, Hit Points 20',\r\n        effects: [\r\n          'Once every 1d10 rounds, as a swift action, the wielder swipe their curio can teleport to point within line of sight up to 30 ft away.',\r\n          'This curio provides the wielder with a +2 deflection bonus to AC and CMD.',\r\n          'Once a day, as a move action, the wielder select a willing ally within line of sight up to 30 ft away. The wielder and the target switch places. This effect counts as the teleport feature above, so the player must reroll the 1d10 to determine when they can next use that feature.',\r\n          'Once a day, as a standard action, the wielder can wrap the cloak around their whole body, changing their visage to a cloth whipping around in the air. 3 additional glamers appear in a line, in adjacent square, beside the wielder. If there is no space, the amount of glamer’s created reduce to fill the number of adjacent empty squares. Theses glamers have an AC of the wielder’s touch AC. A glamer can be disbelieved if a creature makes contact with it, then succeeds on a DC 20 Will saving throw. The DM rolls 1d4, which determines which of the cloths actually houses the wielder. If a creature successfully attacks a glamer, the glamer dissipates, and deals psychic damage equal to 1d6 per number of remaining existing whipping cloth + the wielder’s Charisma bonus to the attacker (DC 15 Will save for half damage). While as a glamer, the wielder can only move (all glamers will follow the wielder at the same speed) and cast spell-like abilities (activating a spell-like ability will cause the wielder’s glamer to flash and glow gold while casting). The wielder can dispel this effect and all active glamers as a free action.',\r\n          <span>Twice a day, a wielder that has their arm covered by the curio gains a faint reading of a creature’s connection to its plane. As a swift action, the wielder can make a Combat Maneuver check (bonus equal to highest mental ability score bonus + class level) against a creature to do one of the following:<ul>\r\n          <li>One of the following combat maneuvers: trip, bull rush, disarm, dirty trick.</li>\r\n          <li>Stand a creature up from being prone</li>\r\n          <li>Increase/decrease the elevation of the terrain the creature is standing on (5 ft square) by 5 ft, + 5ft for every 5 beyond their CMD.</li>\r\n          <li>Reduce their speed by 10 ft</li>\r\n          <li>Impose a -4 penalty to the next attack roll/Dexterity check they make on their next round</li></ul></span>,\r\n        ]\r\n      })\r\n    default:\r\n      break\r\n  }\r\n\r\n  if (props.character_info.hardcode.helmsman){\r\n    curios.push({\r\n      name: \"Besmara's Honourable Emissary\",\r\n      description: 'This ship is shallow bottom, with a chest high wall wrapped around the stern and bow only. It sits low in the water, allowing someone to sit off the edge and dip their legs in the water. The stern has a canopy with an ornately carved seat underneath, with a large helmet of sorts resting on the top of the seat. The wooden hull is smooth to touch, and the figurehead is made of mahogany, carved into the shape of a sturgeon with 6 wing-like fins.',\r\n      hp: 'Hardness 12, Hit Points 600',\r\n      effects: [\r\n        'The helmsman that sits in the chair and dons the helmet controls the ship telepathically. They are considered to be concentrating, so they cannot do any other actions besides talk and move their limbs. The helmsman can move the ship up to a speed of 100 ft, accelerating by 30 ft every round.',\r\n        'This curio normally floats about 6 inches off the ground. A helmsman can forced the boat to not be affected by this, and ground it. However, the curio resumes floating if the helmsman changes the order, or is removed from their seat.',\r\n        'A siege weapon can be mounted in the 20 ft square space at the bow of the ship. If one is mounted, the siege weapon can be hidden in pocket dimension and withdrawn as a full-round action from within the ship. The reload and aim actions can be done in half the time (rounded up, unless it was already 1 full-round, then is it is reduced to a standard action), this can be done by one crew. Manning the siege action is a physical act, and cannot be done by an active helmsman.',\r\n        'The ship has 10 additional extradimensional spaces that exist within the hull. In order to enter, a creature must be aware of the space and open the trapdoor on the deck to enter that space. The space is a 10 ft by 10 ft by 10 ft wooden room, with 3 portholes that look out on the water, or into the water (up to the occupant). A creature can enter any known space, but if a creature is occupied in an existing space, any additional creatures much be permitted by that other creature. A creature can force themselves into a space occupied by another creature by winning an opposed Wisdom check (ties go to occupied creatures). A creature can only attempt to breach an occupied space once a day.',\r\n        <span>Anyone on board the ship can cast any of these spells on themselves while they are on the ship: <em>air bubble</em>, <em>enhance water</em>, <em>fabricate disguise</em>. The total number of spells that can be cast this way during a single day is equal to the helmsman’s Wisdom score (this value cannot change once a helmsman is declared for 24 hours). The caster level of this spell is equal to the class level of the helmsman (or last helmsman, within 1 hour).</span>,\r\n        <span>When it breaks, the wielder can cast <em>fly</em> - standard action (Caster Level is equal to the wielder’s class level)</span>\r\n      ]\r\n    })\r\n  }\r\n\r\n  const renderCurios = () => {\r\n    return curios.map(c => {\r\n      return (\r\n        <React.Fragment>\r\n          <h3>{c.name}</h3>\r\n          <p>{c.description}</p>\r\n          <p>{warranty}</p>\r\n          <div>{c.hp}</div>\r\n          <ul>\r\n            {c.effects.map(effect => <li>{effect}</li>)}\r\n          </ul>\r\n        </React.Fragment>\r\n      )\r\n    })\r\n  }\r\n\r\n  return (\r\n    <Portal>\r\n      <div className=\"page-dimmer\" onClick={props.clickOut}>\r\n        <div className=\"edit-form\" name=\"background\">\r\n          {renderCurios()}\r\n        </div>\r\n      </div>\r\n    </Portal>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Curio)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Portal from '../portal'\r\n\r\nconst PoisonModal = props => {\r\n\r\n  return (\r\n    <Portal>\r\n      <div className=\"page-dimmer\" onClick={props.clickOut}>\r\n        <div className=\"edit-form\" name=\"background\">\r\n          <h5>Poison Rules</h5>\r\n          <div><p>Once a poison is used on a target, they must make a saving throw. If the target fails, after the onset time expires, the target is affected by the poison. They must make a check each iteration of the frequency, up to the maximum duration. For each iteration, the target must make another saving throw. If they fail, they are effected by the poison. If they succeed the cure condition, they are no longer effected by the poison, even if there is more time to the duration.</p></div>\r\n          <br/>\r\n          <div>\r\n            <p>Poisons have four categories, based on how they reach the target: contact, ingested, inhaled, or injury.</p>\r\n            <ul>\r\n              <li><u>Contact</u>: These poisons are delivered the moment a creature touches the poison with its bare skin. Such poisons can be used as injury poisons. Contact poisons usually have an onset time of 1 minute and a frequency of 1 minute.</li>\r\n              <li><u>Ingested</u>: These poisons are delivered when a creature eats or drinks the poison. Ingested poisons usually have an onset time of 10 minutes and a frequency of 1 minute.</li>\r\n              <li><u>Inhaled</u>: These poisons are delivered the moment a creature enters an area containing such poisons and do not usually have an onset time. For most inhaled poisons, 1 dose fills a volume equal to a 10-foot cube. A creature can attempt to hold its breath while inside the area to avoid inhaling the toxin. A creature holding its breath receives a 50% chance of not having to make a Fortitude save each round. See the rules for holding your breath and suffocation. If a creature is holding its breath and fails the constitution check to continue doing so, rather than suffocating it begins to breathe normally again (and is subject to the effects of the inhaled poison if still in the area).</li>\r\n              <li><u>Injury</u>: These poisons are primarily delivered through the attacks of certain creatures and through weapons coated in the toxin. Injury poisons do not usually have an onset time and have a frequency of 1 round.</li>\r\n            </ul>\r\n          </div>\r\n          <br/>\r\n          <div>\r\n            <p>One dose of poison smeared on a weapon or some other object affects just a single target. A poisoned weapon or object retains its poison until the weapon scores a hit or the object is touched (unless the poison is wiped off before a target comes in contact with it).</p>\r\n            <p>Applying poison to a weapon or single piece of ammunition is a standard action. Whenever you apply or ready a poison for use, there is a 5% chance that you expose yourself to the poison and must save against the poison as normal. This does not consume the dose of poison. Whenever you attack with a poisoned weapon, if the attack roll results in a natural 1, you expose yourself to the poison. This poison is consumed when the weapon strikes a creature or is touched by the wielder. If you have the poison use class feature (such as from the assassin prestige class or the alchemist base class), you do not risk accidentally poisoning yourself when applying poison.</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Portal>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(PoisonModal)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { sizeSpaceReach } from '../../utils/calculations/size'\r\n\r\nconst Size = props => {\r\n\r\n\tif (!Object.keys(props.character).length){\r\n\t\treturn null\r\n\t}\r\n\r\n  const size = props.character.race.size\r\n\tlet data = sizeSpaceReach(size)\r\n  let space = data[0]\r\n  let reach = data[1]\r\n\r\n  return(\r\n    <div id='size' className='shadow shrink character-show' style={{boxShadow: `5px 4px 2px #${props.settings.shadeColor}`, opacity: \"0.95\", backgroundColor: `#${props.settings.bubbleColor}`, borderColor: `#${props.settings.borderColor}`}}>\r\n      <span className='centered'>\r\n        <div className=\"dynamic-size-small\"><strong>Size: {size}</strong></div>\r\n        <div className='container-2'>\r\n          <span className='enhanced'>{space}</span>\r\n          <span className='enhanced'>{reach}</span>\r\n          <span>Space</span>\r\n          <span>Reach</span>\r\n        </div>\r\n      </span>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n\t\tsettings: state.settings\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Size)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Portal from '../portal'\r\n\r\nconst SpellAugmentModal = props => {\r\n\r\n  const renderClick = (spellId, augment) => {\r\n    if (!props.character_info.hardcode.augment || props.character_info.hardcode.augment.spellId !== spellId){\r\n      props.dispatch({type: 'AUGMENT SPELL', spellId, augment})\r\n      props.dispatch({type: 'POINTS CHANGE', amount: 'decrease'})\r\n      props.exitModal()\r\n    }\r\n  }\r\n\r\n  const renderSpells = () => {\r\n    return props.character.known_spells.map(ks => {\r\n      if (ks.klass.name === 'Arcanist'){\r\n        return (\r\n          <div key={ks.id*3-1}>\r\n            <span>{ks.spell.name}</span>\r\n            <button onClick={() => renderClick(ks.spell.id, 'caster')}>+1 Caster Level</button>\r\n            {ks.spell.saving_throw ? <button onClick={() => renderClick(ks.spell.id, 'dc')}>+1 DC</button> : null}\r\n          </div>\r\n        )\r\n      } else {\r\n        return null\r\n      }\r\n    })\r\n  }\r\n\r\n  return (\r\n    <Portal>\r\n      <div className=\"page-dimmer\" onClick={props.clickOut}>\r\n        <div className=\"edit-form\" name=\"background\">\r\n          {renderSpells()}\r\n        </div>\r\n      </div>\r\n    </Portal>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(SpellAugmentModal)\r\n","import React from 'react'\r\nimport Portal from '../portal'\r\n\r\nconst MetamagicModal = props => {\r\n\r\n  return (\r\n    <Portal>\r\n      <div className=\"page-dimmer\" onClick={props.clickOut}>\r\n        <div className=\"edit-form\" name=\"background\">\r\n          <p>\r\n            <h3>Extend Spell</h3>\r\n            <p>An extended spell lasts twice as long as normal. A spell with a duration of concentration, instantaneous, or permanent is not affected by this feat. An extended spell uses up a spell slot one level higher than the spell’s actual level.</p>\r\n          </p>\r\n          <p>\r\n            <h3>Empower Spell</h3>\r\n            <p>All variable, numeric effects of an empowered spell are increased by half, including bonuses to those dice rolls. Saving throws and opposed rolls are not affected, nor are spells without random variables. An empowered spell uses up a spell slot two levels higher than the spell’s actual level.</p>\r\n          </p>\r\n          <p>\r\n            <h3>Heightened Spell</h3>\r\n            <p>A heightened spell has a higher spell level than normal (up to a maximum of 9th level). Unlike other metamagic feats, Heighten Spell actually increases the effective level of the spell that it modifies. All effects dependent on spell level (such as saving throw DCs and ability to penetrate a lesser globe of invulnerability) are calculated according to the heightened level. The heightened spell is as difficult to prepare and cast as a spell of its effective level.</p>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </Portal>\r\n  )\r\n}\r\n\r\nexport default MetamagicModal\r\n","import React from 'react'\r\nimport Portal from '../portal'\r\n\r\nconst HandyModal = props => {\r\n\r\n  return (\r\n    <Portal>\r\n      <div className=\"page-dimmer\" onClick={props.clickOut}>\r\n        <div className=\"edit-form\" name=\"background\">\r\n          <h3>Contents</h3>\r\n          <ul>\r\n            <li>Something</li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </Portal>\r\n  )\r\n}\r\n\r\nexport default HandyModal\r\n","import React from 'react'\r\nimport Portal from '../portal'\r\n\r\nconst DebilitatingModal = props => {\r\n\r\n  return (\r\n    <Portal>\r\n      <div className=\"page-dimmer\" onClick={props.clickOut}>\r\n        <div className=\"edit-form\" name=\"background\">\r\n          <h3>Debilitating Injury</h3>\r\n          <p>Whenever you deal sneak attack damage to a foe, you can also debilitate the target of your attack, causing it to take a penalty for 1 round (this is in addition to any penalty caused by a rogue talent or other special ability).</p>\r\n          <ul>\r\n            <li><u>Bewildered</u>: The target becomes bewildered, taking a –2 penalty to AC. The target takes an additional –2 penalty to AC against all attacks made by the rogue.</li>\r\n            <li><u>Disoriented</u>: The target takes a –2 penalty on attack rolls. In addition, the target takes an additional –2 penalty on all attack rolls it makes against the rogue.</li>\r\n            <li><u>Hampered</u>: All of the target’s speeds are reduced by half (to a minimum of 5 feet). In addition, the target cannot take a 5-foot step.</li>\r\n          </ul>\r\n          <p>These penalties do not stack with themselves, but additional attacks that deal sneak attack damage extend the duration by 1 round. A creature cannot suffer from more than one penalty from this ability at a time. If a new penalty is applied, the old penalty immediately ends. Any form of healing applied to a target suffering from one of these penalties also removes the penalty.</p>\r\n        </div>\r\n      </div>\r\n    </Portal>\r\n  )\r\n}\r\n\r\nexport default DebilitatingModal\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Portal from '../portal'\r\n\r\nconst AmmoModal = props => {\r\n\r\n  const weapon = props.character_info.hardcode.activeWeapon\r\n  const activeAmmo = props.character_info.hardcode.weaponAmmo.find(wa => wa.weapon === weapon).ammo\r\n\r\n  const dispatchAmmo = (ammo, direction) => {\r\n    let ammoDup = [...props.character_info.hardcode.ammo]\r\n    ammoDup = ammoDup.map(a => {\r\n      if (a.name === ammo.name){\r\n        let thisAmmo = {...a}\r\n        if (direction === 'increase'){\r\n          thisAmmo.amount = thisAmmo.amount+1\r\n        } else if (direction === 'decrease' && thisAmmo.amount > 0){\r\n          thisAmmo.amount = thisAmmo.amount-1\r\n        }\r\n        return thisAmmo\r\n      } else {\r\n        return a\r\n      }\r\n    })\r\n    props.dispatch({type: 'AMMO CHANGE', ammo: ammoDup})\r\n  }\r\n\r\n  const dispatchWeaponAmmo = ammo => {\r\n    let newWeaponAmmo = [...props.character_info.hardcode.weaponAmmo]\r\n    newWeaponAmmo = newWeaponAmmo.map(nwa => {\r\n      if (nwa.weapon === weapon){\r\n        let nnwa = {...nwa}\r\n        nnwa.ammo = ammo\r\n        return nnwa\r\n      } else {\r\n        return nwa\r\n      }\r\n    })\r\n    props.dispatch({type: 'WEAPON AMMO', weaponAmmo: newWeaponAmmo})\r\n  }\r\n\r\n  const renderAmmo = () => {\r\n    let ammo = props.character_info.hardcode.ammo\r\n    return ammo.map(a => {\r\n      return (\r\n        <li>\r\n          <span>{a.amount} {a.name}{a.amount === 1 ? null : 's'} remaining </span>\r\n          <button onClick={() => dispatchAmmo(a, 'increase')}>+</button>\r\n          <button onClick={() => dispatchAmmo(a, 'decrease')}>-</button>\r\n          {activeAmmo === a.name ? <span><strong> Active Ammo</strong></span> : <button onClick={() => dispatchWeaponAmmo(a.name)}>Change Active Ammo</button>}\r\n        </li>\r\n      )\r\n    })\r\n  }\r\n\r\n  return (\r\n    <Portal>\r\n      <div className=\"page-dimmer\" onClick={props.clickOut}>\r\n        <div className=\"edit-form\" name=\"background\">\r\n          <h3>{weapon}</h3>\r\n          <p>Current Ammo: {activeAmmo}</p>\r\n          <h5>Available Ammo:</h5>\r\n          <ul>\r\n            {renderAmmo()}\r\n          </ul>\r\n          <button onClick={props.exitModal}>Exit</button>\r\n        </div>\r\n      </div>\r\n    </Portal>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(AmmoModal)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Portal from '../portal'\r\n\r\nconst SaseaModal = props => {\r\n\r\n  const renderAge = age => {\r\n    props.dispatch({type: 'TIME TRAVEL', age})\r\n    props.exitModal()\r\n  }\r\n\r\n  return (\r\n    <Portal>\r\n      <div className=\"page-dimmer\" onClick={props.clickOut}>\r\n        <div className=\"edit-form\" name=\"background\">\r\n          <section>\r\n          <h4>Sasea Bitch</h4>\r\n          <div style={{marginBottom: '1%', paddingBottom: '.8%', borderBottom: 'double'}}>\r\n            <div>Colossal water vehicle</div>\r\n            <div><u>Squares</u>: 40 (20 ft. by 50 ft.)</div>\r\n          </div>\r\n          <div style={{marginBottom: '1%', paddingBottom: '.8%', borderBottom: 'double'}}>\r\n            <div><strong>AC</strong> 2; <u>Hardness</u> 12</div>\r\n            <div><strong>hp</strong> 600</div>\r\n            <div><strong>Base Save</strong> +4</div>\r\n          </div>\r\n          <div style={{marginBottom: '1%', paddingBottom: '.8%', borderBottom: 'double'}}>\r\n            <div><strong>Maximum Speed</strong> 100 ft. (flying), or 60 ft. (current), or 30 ft. (muscle)</div>\r\n            <div><strong>Acceleration</strong> 30 ft.</div>\r\n            <div><strong>CMB</strong> +8; <strong>CMD</strong> 18</div>\r\n            <div><strong>Ramming Damage</strong> 8d8</div>\r\n          </div>\r\n          <div style={{marginBottom: '1%', paddingBottom: '.8%', borderBottom: 'double'}}>\r\n            <div><strong>Description</strong> This long, flat-bottomed ship has a few oars to supplement its single mast with a square sail. It can make both sea and river voyages. The keelboat can carry 50 tons of cargo or 100 soldiers.</div>\r\n            <div><strong>Propulsion</strong> flying (telepathy), current (air; 20 squares of sails, hp 100), current (water), or muscle (pushed; 8 Medium rowers)</div>\r\n            <div><strong>Driving Check</strong> Diplomacy or Intimidate while rowed, or Profession (sailor) or Nature; +10 to the DC when sail is used</div>\r\n            <div><strong>Forward Facing</strong> ship's forward</div>\r\n            <div><strong>Driving Device</strong> telepathy, ship's rudder</div>\r\n            <div><strong>Driving Space</strong> helmsman's chair, the two middle rear squares of the keelboat</div>\r\n            <div><strong>Crew</strong> 8; <strong>Decks</strong> 1</div>\r\n          </div>\r\n          </section>\r\n        </div>\r\n      </div>\r\n    </Portal>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(SaseaModal)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Portal from '../portal'\r\n\r\nconst AuraModal = props => {\r\n\r\n  const renderAge = age => {\r\n    props.dispatch({type: 'TIME TRAVEL', age})\r\n    props.exitModal()\r\n  }\r\n\r\n  return (\r\n    <Portal>\r\n      <div className=\"page-dimmer\" onClick={props.clickOut}>\r\n        <div className=\"edit-form\" name=\"background\">\r\n          <section>\r\n          <h4>Read Aura Occult Skill Unlock</h4>\r\n          <div style={{marginBottom: '1%', paddingBottom: '.8%', borderBottom: 'double'}}>\r\n            <p><strong>Check</strong>: Once per day, you can examine the natural aura of a creature or object to discern the subject’s alignment, emotions, health, or magic. This requires 10 minutes of concentration, after which you attempt a Perception check. Each time, you must pick one of four auras to read: alignment, emotion, health, or magic. The result of the check applies only to the selected aura. You must be within 30 feet of the subject at all times during the reading.</p><p>Objects typically have only magic auras, though some also have alignment auras (and intelligent items have emotion auras). You can still attempt to detect a type of aura an object doesn’t have, but you get no results. The DC varies depending on the aura, as shown on the table.</p>\r\n          </div>\r\n          <p><u>Read Alignment Aura</u>: You attempt to read the alignment aura, learning the alignment and its strength. An alignment aura’s strength depends on the creature’s Hit Dice or item’s caster level, as noted in the description of the detect evil spell.</p>\r\n          <p><u>Read Emotion Aura</u>: The colors within the target’s aura reveal its emotional state. If successful, you learn the target’s disposition and its attitude toward any creatures within 30 feet of it. For a number of rounds equal to the amount by which you exceeded the skill check’s DC, You gain a +2 circumstance bonus on Bluff, Diplomacy, Intimidate, and Sense Motive checks against the target.</p>\r\n          <p><u>Read Health Aura</u>: Viewing the flow of vital force, you assess a creature’s physical condition. You learn if the creature is unharmed or wounded, if it is poisoned or diseased, and whether it is affected by any of the following conditions: confused, disabled, dying, nauseated, panicked, staggered, stunned, and unconscious. You also learn the total number of points available in its ki pool, grit pool, or similar resource.</p>\r\n          <p><u>Read Magic Aura</u>: You attempt to determine the number and power of all magical auras on a target creature or object (see detect magic to determine a magic aura’s power). If the check is successful, you can attempt Spellcraft checks to determine the school or identify properties of a magic item, as normal. If the item is affected by magic aura or a similar spell, you can realize this and determine the actual properties of the item if your check result exceeds the DC by 5 or more. If the spell is of a higher level (such as aura alteration), increase this threshold DC by 2 for every spell level beyond 1st.</p>\r\n          <span>\r\n            <ul>\r\n              <li><strong>Anger</strong>: Bright Red</li>\r\n              <li><strong>Deceit</strong>: Oily Green</li>\r\n              <li><strong>Faith</strong>: Blue</li>\r\n              <li><strong>Fear</strong>: Livid Gray</li>\r\n              <li><strong>Flexibility</strong>: Emerald Green</li>\r\n              <li><strong>Greed</strong>: Brown-Red</li>\r\n              <li><strong>Hatred</strong>: Black</li>\r\n              <li><strong>Intellect</strong>: Golden</li>\r\n              <li><strong>Love</strong>: Scarlet</li>\r\n              <li><strong>Melancholy</strong>: Gray Lines</li>\r\n              <li><strong>Passion</strong>: Blood Red</li>\r\n              <li><strong>Pride</strong>: Orange</li>\r\n            </ul>\r\n          </span>\r\n          <span>\r\n            <table>\r\n              <thead>\r\n                <tr>\r\n                  <th>Task</th>\r\n                  <th>DC</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr>\r\n                  <td>Read Alignment Aura</td>\r\n                  <td>15 + creature’s HD or item’s caster level</td>\r\n                </tr>\r\n                <tr>\r\n                  <td>Read Emotion Aura</td>\r\n                  <td>20 + creature’s HD or item’s caster level</td>\r\n                </tr>\r\n                <tr>\r\n                  <td>Read Health Aura</td>\r\n                  <td>15 + creature’s HD</td>\r\n                </tr>\r\n                <tr>\r\n                  <td>Read Magic Aura</td>\r\n                  <td>20 + creature’s HD or item’s caster level</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </span>\r\n          </section>\r\n        </div>\r\n      </div>\r\n    </Portal>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(AuraModal)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Portal from '../portal'\r\n\r\nconst MutagenModal = props => {\r\n\r\n  const dispatchMutagen = (name) => {\r\n    props.dispatch({type: 'MUTAGEN', name})\r\n    props.exitModal()\r\n  }\r\n\r\n  return (\r\n    <Portal>\r\n      <div className=\"page-dimmer\" onClick={props.clickOut}>\r\n        <div className=\"edit-form\" name=\"background\">\r\n          <h4>Pick a mutagen</h4>\r\n          <p> +2 natural armor bonus, +4 alchemical bonus to Strength, -2 penalty to Intelligence<button onClick={() => dispatchMutagen('strength')}>Select</button></p>\r\n          <p> +2 natural armor bonus, +4 alchemical bonus to Dexterity, -2 penalty to Wisdom<button onClick={() => dispatchMutagen('dexterity')}>Select</button></p>\r\n          <p> +2 natural armor bonus, +4 alchemical bonus to Constitution, -2 penalty to Charisma<button onClick={() => dispatchMutagen('constitution')}>Select</button></p>\r\n        </div>\r\n      </div>\r\n    </Portal>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(MutagenModal)\r\n","import React from 'react'\r\nimport { connect, useDispatch } from 'react-redux'\r\nimport _ from 'lodash'\r\n\r\nimport { changeAmmo } from '../../dispatch'\r\n\r\nconst Attack = props => {\r\n\r\n  const dispatch = useDispatch()\r\n\r\n\r\n  let {characterWeapon: cw, critical, additionalInfo} = props.content\r\n\r\n  let weapon = cw.weapon\r\n\r\n  let name = cw.name === \"\" ? weapon.name : cw.name\r\n  let damage = weapon.num_of_dice + \"d\" + weapon.damage_dice + \" \" + weapon.damage_type\r\n  if (weapon.double_weapon){\r\n    damage += \"/\" + weapon.double_num_of_dice + \"d\" + weapon.double_damage_dice + \" \" + weapon.double_damage_type\r\n  }\r\n\r\n  let range = weapon.range ? weapon.range + \" ft\" : null\r\n\r\n  let validAmmo = null\r\n  if (weapon.ammunition_type){\r\n    validAmmo = props.character.character_weapons.filter(cw => cw.weapon.ammunition && cw.weapon.ammunition_type === weapon.ammunition_type)\r\n    // make a collection select of all weapons\r\n    // need event to handle changing collection select\r\n    // makes a fetch, and updates redux\r\n\r\n  }\r\n\r\n  const ammos = () => {\r\n    // searching through redux because this select tag's value isn't updating when I update redux\r\n    // since it's getting it's data from the a different part of redux\r\n    let characterWeapon = props.character.character_weapons.find(charW => charW.id === cw.id)\r\n    return (\r\n      <select className=\"mobile-dropdown\" value={`${characterWeapon.character_weapon_ammunition_id}`} onChange={(e) => dispatch(changeAmmo(cw, e.target.value))}>\r\n        <option value=\"\">No Ammo</option>\r\n        {validAmmo.map(a => <option value={a.id}>{a.name === \"\" ? a.weapon.name : a.name} ({a.ammunition_amount})</option>)}\r\n        {(cw.weapon.name === \"Sling\" || cw.weapon.name === \"Halfling Sling Staff\") && <option value=\"0\">Improvised</option>}\r\n      </select>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <section style={{padding: '2%'}}>\r\n      <ul style={{listStyleType: 'none', paddingLeft: '0', margin: '1%'}}>\r\n        <li>{name}</li>\r\n        <li>{weapon.category} {weapon.proficiency} Weapon</li>\r\n        <li>{damage} ({critical}){range && \" | Range: \" + range}</li>\r\n        {validAmmo && ammos()}\r\n        <li><u>Details</u>:</li>\r\n        {additionalInfo.map(ai => <li>- {ai.name}: {ai.tooltip}</li>)}\r\n        {weapon.weapon_qualities.map(wq => <li>- {_.capitalize(wq.name)}: {wq.description}</li>)}\r\n      </ul>\r\n    </section>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Attack)\r\n","import React from 'react'\r\n\r\nconst Skillset = props => {\r\n\r\n  let {name, skills} = props.content\r\n\r\n  let [containerHeight, setContainerHeight] = React.useState(0)\r\n\r\n  const skillEl = skillObj => {\r\n    // let abbrev = skillObj.ability_score.slice(0, 3)\r\n    return (<span key={skillObj.id * 3 - 1} style={{border: '1px solid #0f52ba', padding: \"0.5rem\"}}>{skillObj.name}</span>)\r\n  }\r\n\r\n  let sortedSkills = skills.sort((a, b) => a.name.localeCompare(b.name))\r\n\r\n  if (props.sidebarContainer.current && !containerHeight){\r\n    console.log(props.sidebarContainer.current)\r\n    setContainerHeight(props.sidebarContainer.current.offsetHeight * 0.9)\r\n  }\r\n\r\n  return (\r\n    <section style={{padding: '2%'}}>\r\n      <h4>{name}</h4>\r\n      <div style={{display: \"grid\", gridTemplateColumns: \"1fr 1fr 1fr\", fontSize: \"10px\"}}>\r\n        {skills.map(skillEl)}\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default (Skillset)\r\n","import React from 'react'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faChevronDown } from '@fortawesome/free-solid-svg-icons'\r\n\r\nimport Attack from './attack'\r\nimport Skillset from './skillset'\r\n\r\nconst SideBar = props => {\r\n\r\n  let {position, description, content} = props.sidebar\r\n\r\n  const [isThisBeingRemoved, setRemoval] = React.useState('slide-in')\r\n  const [isThisBeingRemovedTab, setRemovalTab] = React.useState('slide-in-folder-tab')\r\n  const [style, setStyle] = React.useState(null)\r\n  const [exitStyle, setExitStyle] = React.useState(null)\r\n\r\n  const sidebarContainer = React.useRef(null)\r\n\r\n  // add a lifecycle method\r\n  // after the animation (set timeout, see below for inspiration)\r\n  // remove classes so there less clutter on the dom\r\n\r\n  if (position === 'bottom'){\r\n    if (!style){\r\n      setStyle({width: '98%', height: '50%', bottom: '0px', zIndex: '1', overflowY: \"scroll\"})\r\n      setExitStyle({zIndex: '2', bottom: `${window.innerHeight/2 + 1}px`, width: '20%', textAlign: 'center', borderBottom: 'none', left: '10%'})\r\n    }\r\n  }\r\n\r\n  const exiting = (e) => {\r\n    e.preventDefault()\r\n    setRemoval('slide-out')\r\n    setRemovalTab('slide-out-folder-tab')\r\n    setTimeout(() => setStyle({display: 'none'}), 775)\r\n    setTimeout(() => setExitStyle({display: 'none'}), 775)\r\n    setTimeout(() => {\r\n      props.editSidebar(false, 'left', null)\r\n    }, 800)\r\n\r\n  }\r\n  return (\r\n    <>\r\n      <aside id='sidebar' className={isThisBeingRemoved} ref={sidebarContainer} style={style}>\r\n        <div id='sidebar-exit' className={isThisBeingRemovedTab} style={exitStyle} onClick={exiting}><FontAwesomeIcon icon={faChevronDown}/></div>\r\n        {description === 'attack' && <Attack content={content}/>}\r\n        {description === 'skillset' && <Skillset content={content} sidebarContainer={sidebarContainer}/>}\r\n      </aside>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default (SideBar)\r\n","import React from 'react'\r\nimport Portal from '../portal'\r\n\r\nclass BackgroundForm extends React.Component{\r\n\r\n  state = {\r\n    background: \"\",\r\n    age: 0,\r\n    alignment: \"\",\r\n    homeland: \"\",\r\n    deity: \"\",\r\n    id: \"\"\r\n  }\r\n\r\n  componentDidMount() {\r\n    console.log(\"edit background\", this.props.character)\r\n    this.setState({\r\n      background: this.props.character.background,\r\n      age: this.props.character.age,\r\n      alignment: this.props.character.alignment,\r\n      homeland: this.props.character.homeland,\r\n      deity: this.props.character.deity,\r\n      id: this.props.character.id\r\n    })\r\n  }\r\n\r\n  renderChange = (e) => {\r\n    this.setState({[e.target.name]: e.target.value})\r\n  }\r\n\r\n  renderSubmit = () => {\r\n\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Portal>\r\n        <div className=\"page-dimmer\" onClick={this.props.clickOut}>\r\n          <div className=\"edit-form\" name=\"background\">\r\n            <span className=\"enhanced\" >Background</span>\r\n            <br /><br />\r\n            <label>Age</label>\r\n            <br />\r\n            <input type=\"number\" name=\"age\" value={this.state.age} onChange={this.renderChange}/>\r\n            <br />\r\n            <label>Background</label>\r\n            <br />\r\n            <textarea style={{width: '15em'}} type=\"textfield\" className=\"desc-box\" rows=\"6\" name=\"background\" value={this.state.background} onChange={this.renderChange}/>\r\n            <br />\r\n            <label>Alignment</label>\r\n            <br />\r\n            <select value={this.state.alignment} onChange={this.renderChange} name='alignment'>\r\n              <option value= \"\" > </option>\r\n              <option value= \"Lawful Good\" >Lawful Good</option>\r\n              <option value= \"Neutral Good\" >Neutral Good</option>\r\n              <option value= \"Chaotic Good\" >Chaotic Good</option>\r\n              <option value= \"Lawful Neutral\" >Lawful Neutral</option>\r\n              <option value= \"Neutral\" >Neutral</option>\r\n              <option value= \"Chaotic Neutral\" >Chaotic Neutral</option>\r\n              <option value= \"Lawful Evil\" >Lawful Evil</option>\r\n              <option value= \"Neutral Evil\" >Neutral Evil</option>\r\n              <option value= \"Chaotic Evil\" >Chaotic Evil</option>\r\n            </select>\r\n            <br />\r\n            <label>Homeland</label>\r\n            <br />\r\n            <input style={{width: '10em'}} type=\"text\" name=\"homeland\" value={this.state.homeland} onChange={this.renderChange}/>\r\n            <br />\r\n            <label>Deity</label>\r\n            <br />\r\n            <input style={{width: '10em'}} type=\"text\" name=\"deity\" value={this.state.deity} onChange={this.renderChange}/>\r\n            <br /><br />\r\n            <button onClick={() => this.props.renderEdit(this.state, 'background')}>Submit</button>\r\n          </div>\r\n        </div>\r\n      </Portal>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default BackgroundForm\r\n","import React from 'react'\r\nimport Portal from '../portal'\r\nimport _ from 'lodash'\r\nimport localhost from '../localhost'\r\n\r\nclass CharacterForm extends React.Component{\r\n\r\n  state = {\r\n    name: \"\",\r\n    race: 0,\r\n    classes: [0],\r\n    anyBonus: \"\",\r\n    doesRacehaveAnyBonus: false,\r\n    allClasses: false,\r\n    allRaces: {},\r\n    id: \"\"\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({\r\n      name: this.props.character.name,\r\n      race: this.props.character.race.id,\r\n      anyBonus: this.props.character.any_bonus,\r\n      id: this.props.character.id,\r\n      classes: this.renderDefaultClasses()\r\n    }, this.fetchClasses())\r\n  }\r\n\r\n  fetchClasses = () => {\r\n    fetch(`${localhost}/api/v1/klasses`)\r\n    .then(r => r.json())\r\n    .then(data => {\r\n      this.setState({allClasses: data})\r\n    }, this.fetchRaces())\r\n  }\r\n\r\n  fetchRaces = () => {\r\n    fetch(`${localhost}/api/v1/races`)\r\n    .then(r => r.json())\r\n    .then(data => {\r\n      this.setState({allRaces: data})\r\n    })\r\n  }\r\n\r\n  renderChange = (e) => {\r\n    this.setState({[e.target.name]: e.target.value})\r\n  }\r\n\r\n  renderDefaultClasses = () => {\r\n    const sortedClasses = this.props.character.character_klasses.sort((a,b) => a.level - b.level)\r\n    const klasses = sortedClasses.map(klass => {\r\n      return klass.klass_id\r\n    })\r\n    return klasses\r\n  }\r\n\r\n  renderDynamicChanges = (e, index) => {\r\n    let classes = [...this.state.classes]\r\n    classes[index] = e.target.value\r\n    this.setState({ classes })\r\n  }\r\n\r\n  renderClasses = () => {\r\n    return this.state.allClasses.map(klass => {\r\n      return <option key={klass.id} value={klass.id}>{klass.name}</option>\r\n    })\r\n  }\r\n\r\n  renderRaces = () => {\r\n    return this.state.allRaces.map(race => {\r\n      return <option key={race.id} value={race.id}>{race.name}</option>\r\n    })\r\n  }\r\n\r\n  renderRacialAbilityModifiers = () => {\r\n    let chosen = this.state.allRaces.find(el => el.id === _.toNumber(this.state.race))\r\n    return <span>{this.renderAbilityScoreModifiers(chosen)}</span>\r\n  }\r\n\r\n  renderAbilityScoreModifiers = (chosen) => {\r\n    let mods = chosen.race_ability_score_modifiers\r\n    let modStrings = []\r\n    mods.forEach(mod => {\r\n      if (mod.ability_score === 'Any' && !this.state.doesRacehaveAnyBonus) {\r\n        this.setState({doesRacehaveAnyBonus: true})\r\n      }\r\n      if (mod.ability_score !== 'Any' && this.state.doesRacehaveAnyBonus) {\r\n        this.setState({doesRacehaveAnyBonus: false, anyBonus: \"\"})\r\n      }\r\n      let bonus = mod.bonus < 0 ? mod.bonus : `+${mod.bonus}`\r\n      modStrings.push(`${bonus} ${mod.ability_score}`)\r\n    })\r\n    return modStrings.join(\", \")\r\n  }\r\n\r\n  renderAnyChoiceField = () => {\r\n    return (\r\n      <div>\r\n        <label>For your Race, you can choose any one score to give a +2 bonus to any one Ability of your Choice!</label>\r\n        <select value={this.state.anyBonus} onChange={this.renderChange} name='anyBonus'>\r\n          <option value= \"\" >Choose One</option>\r\n          <option value= \"Strength\" >Strength</option>\r\n          <option value= \"Dexterity\" >Dexterity</option>\r\n          <option value= \"Constitution\" >Constitution</option>\r\n          <option value= \"Intelligence\" >Intelligence</option>\r\n          <option value= \"Wisdom\" >Wisdom</option>\r\n          <option value= \"Charisma\" >Charisma</option>\r\n        </select>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  addClassField = (e, change, index) => {\r\n    e.preventDefault()\r\n    if (change === \"plus\") {\r\n\r\n      this.setState( { classes: [...this.state.classes, this.state.classes[index]] } )\r\n    } else if (change === \"minus\") {\r\n      let removedClasses = [...this.state.classes]\r\n      removedClasses.pop()\r\n      this.setState({classes: removedClasses})\r\n    }\r\n  }\r\n\r\n  checkForValidLevels = () => {\r\n    let valid = true\r\n    this.state.classes.forEach(klass => {\r\n      if (klass.level > 20 || klass.level < 1){\r\n        valid = false\r\n      }\r\n    })\r\n    if (!valid) {\r\n      return <div>You must choose a class level between 1 and 20!</div>\r\n    }\r\n  }\r\n\r\n    mapClassDynamicFields = () => {\r\n      return this.state.classes.map((val, idx)=> {\r\n        let classId = `class-${idx}`\r\n        return (\r\n          <div key={idx}>\r\n            <label htmlFor={classId}>{`Class #${idx + 1}`} </label>\r\n              <select\r\n                name={classId}\r\n                value={this.state.classes[idx]}\r\n                onChange={(e) => this.renderDynamicChanges(e, idx)}\r\n              >\r\n                <option value= \"\" >Choose One</option>\r\n                {this.state.allClasses && this.renderClasses()}\r\n              </select>\r\n              {`Level ${idx + 1}`}\r\n          </div>\r\n        )\r\n      })\r\n    }\r\n\r\n\r\n\r\n  render() {\r\n    return (\r\n      <Portal>\r\n        <div className=\"page-dimmer\" onClick={this.props.clickOut}>\r\n          <div className=\"edit-form\" name=\"background\">\r\n            <span className=\"enhanced\" >Character</span>\r\n            <br /><br />\r\n            <label>Name</label>\r\n            <br />\r\n            <input type=\"text\" name=\"name\" value={this.state.name} onChange={this.renderChange}/>\r\n            <br />\r\n            <label>Race</label>\r\n            <br />\r\n            <select name=\"race\" value={this.state.race} onChange={this.renderChange}>\r\n              <option value= \"\" >Select One</option>\r\n              {this.state.allRaces[0] ? this.renderRaces() : null}\r\n            </select>\r\n            <br />\r\n            {this.state.allRaces[0] && this.state.race ? this.renderRacialAbilityModifiers() : null}\r\n            <br />\r\n            {this.state.doesRacehaveAnyBonus ? this.renderAnyChoiceField() : null}\r\n            <br />\r\n            <label>Classes</label>\r\n            <br />\r\n            {this.state.allClasses && this.mapClassDynamicFields()}\r\n            <button onClick={(e) => this.addClassField(e, \"plus\", this.state.classes.length-1)}>+</button>\r\n            {this.state.classes.length > 1 ? <button onClick={(e) => this.addClassField(e, \"minus\")}>-</button> : null}\r\n            {this.checkForValidLevels()}\r\n            <br /><br />\r\n            <button onClick={() => this.props.renderEdit(this.state, 'character')}>Submit</button>\r\n          </div>\r\n        </div>\r\n      </Portal>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default CharacterForm\r\n","import React from 'react'\r\nimport Portal from '../portal'\r\n\r\nclass AbilityForm extends React.Component{\r\n\r\n  state = {\r\n    strength: 0,\r\n    dexterity: 0,\r\n    constitution: 0,\r\n    intelligence: 0,\r\n    wisdom: 0,\r\n    charisma: 0,\r\n    id: \"\"\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({\r\n      strength: this.props.character.strength,\r\n      dexterity: this.props.character.dexterity,\r\n      constitution: this.props.character.constitution,\r\n      intelligence: this.props.character.intelligence,\r\n      wisdom: this.props.character.wisdom,\r\n      charisma: this.props.character.charisma,\r\n      id: this.props.character.id\r\n    })\r\n  }\r\n\r\n  renderChange = (e) => {\r\n    this.setState({[e.target.name]: e.target.value})\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Portal>\r\n        <div className=\"page-dimmer\" onClick={this.props.clickOut}>\r\n          <div className=\"edit-form\" name=\"background\">\r\n            <span className=\"enhanced\" >Ability Scores</span>\r\n            <br /><br />\r\n            <label>Strength</label>\r\n            <br />\r\n            <input type=\"number\" name=\"strength\" value={this.state.strength} onChange={this.renderChange}/>\r\n            <br />\r\n            <label>Dexterity</label>\r\n            <br />\r\n            <input type=\"number\" name=\"dexterity\" value={this.state.dexterity} onChange={this.renderChange}/>\r\n            <br />\r\n            <label>Constitution</label>\r\n            <br />\r\n            <input type=\"number\" name=\"constitution\" value={this.state.constitution} onChange={this.renderChange}/>\r\n            <br />\r\n            <label>Intelligence</label>\r\n            <br />\r\n            <input type=\"number\" name=\"intelligence\" value={this.state.intelligence} onChange={this.renderChange}/>\r\n            <br />\r\n            <label>Wisdom</label>\r\n            <br />\r\n            <input type=\"number\" name=\"wisdom\" value={this.state.wisdom} onChange={this.renderChange}/>\r\n            <br />\r\n            <label>Charisma</label>\r\n            <br />\r\n            <input type=\"number\" name=\"charisma\" value={this.state.charisma} onChange={this.renderChange}/>\r\n            <br /><br />\r\n            <button onClick={() => this.props.renderEdit(this.state, 'ability')}>Submit</button>\r\n          </div>\r\n        </div>\r\n      </Portal>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default AbilityForm\r\n","import React from 'react'\r\n\r\nimport Tab from '../components/character_show/tab'\r\n\r\nclass NotificationTabs extends React.Component {\r\n\r\n  render(){\r\n\r\n    return(\r\n      <span className='tab-list'>\r\n        <Tab label=\"Communique\" renderTabClick={this.props.renderTabClick} activeTab={this.props.activeTab}/>\r\n        <Tab label=\"Update Character\" renderTabClick={this.props.renderTabClick} activeTab={this.props.activeTab}/>\r\n        <Tab label=\"Literally Unplayable\" renderTabClick={this.props.renderTabClick} activeTab={this.props.activeTab}/>\r\n        <Tab label=\"Rest\" renderTabClick={this.props.renderTabClick} activeTab={this.props.activeTab}/>\r\n      </span>\r\n    )\r\n  }\r\n}\r\n\r\nexport default NotificationTabs\r\n","import React from 'react'\r\nimport store from '../../store'\r\nimport _ from 'lodash'\r\nimport { modalAction } from '../action_creator/popups'\r\n\r\nexport const allCharacterChoices = () => {\r\n\t// NEW DATA\r\n\tlet array = []\r\n\r\n\t// STORED DATA\r\n\tlet { character } = store.getState()\r\n\tlet { applicable_klass_features, character_choices } = {...character}\r\n\r\n\t// CALCULATED DATA\r\n\r\n\tapplicable_klass_features.forEach(akf => {\r\n\t\tlet klassName = character.uniq_klasses.find(uk => {\r\n\t\t\tif (akf.klass_id){\r\n\t\t\t\treturn uk.id === akf.klass_id\r\n\t\t\t} else if (akf.klass_archetype_id){\r\n\t\t\t\tlet arch = character.archetypes.find(ar => ar.id === akf.klass_archetype_id)\r\n\t\t\t\treturn uk.id === arch.klass_id\r\n\r\n\t\t\t}\r\n\t\t}).name\r\n\t\takf.features.forEach(f => {\r\n\t\t\tif (f.character_choices.length) {\r\n\t\t\t\tlet isNew = true\r\n\t\t\t\tif (character_choices.find(cc => cc.feature_id === f.id)){isNew = false}\r\n\t\t\t\tarray.push({\r\n\t\t\t\t\tfeature: f,\r\n\t\t\t\t\tklassName,\r\n\t\t\t\t\tfeatureName: akf.name,\r\n\t\t\t\t\tsourceId: akf.id,\r\n\t\t\t\t\tspecifics: f.character_choices[0].column,\r\n\t\t\t\t\tsub_feature: f.character_choices[0].sub_feature,\r\n\t\t\t\t\tisNew\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t})\r\n\r\n\treturn array\r\n}\r\n\r\nexport const renderCharacterChoices = () => {\r\n\tlet characterChoicesArray = allCharacterChoices()\r\n\treturn characterChoicesArray.map(cc => {\r\n\t\tlet specifics = _.startCase(cc.specifics)\r\n\t\tif (_.endsWith(specifics, \" Id\")){\r\n\t\t\tspecifics = specifics.substring(0, specifics.length-3)\r\n\t\t}\r\n\r\n\t\tlet verb = cc.isNew ? \"Choose\" : \"Alter\"\r\n\t\tlet className = cc.isNew ? \"attention-button-animation\" : \"\"\r\n\r\n\t\tlet renderClick = () => {\r\n\t\t\tmodalAction(\"characterChoice\", cc)\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<button className={className} onClick={renderClick}>\r\n\t\t\t\t{cc.klassName} - {cc.featureName}: {verb} {specifics}\r\n\t\t\t</button>\r\n\t\t)\r\n\t})\r\n}\r\n\r\nexport const allKlassSpecializations = () => {\r\n\t// NEW DATA\r\n\tlet array = []\r\n\r\n\t// STORED DATA\r\n\tlet { character } = store.getState()\r\n\tlet { applicable_klass_features, klass_specializations } = {...character}\r\n\r\n\t// CALCULATED DATA\r\n\r\n\tapplicable_klass_features.forEach(akf => {\r\n\t\tif (akf.specialization){\r\n\t\t\tlet klassName = character.uniq_klasses.find(uk => uk.id === akf.klass_id).name\r\n\t\t\tlet hasSpecialization = akf.choice_amount\r\n\t\t\tklass_specializations.forEach(kspec => {\r\n\t\t\t\tif (kspec.klass_feature.id === akf.id){hasSpecialization--}\r\n\t\t\t})\r\n\t\t\t// by setting hasSpecialization to a number of choices\r\n\t\t\t// if the akf needs you to pick multiple features (i.e. cleric get 2 domains)\r\n\t\t\t// it deducts one if a specialization is found\r\n\t\t\t// and then if the number is greater than 0, there are some specializations to be taken\r\n\t\t\t// greater than 0 is FALSE, is 0 is TRUE\r\n\t\t\t// at least a truthy value for \"should a red button be displayed?\"\r\n\t\t\thasSpecialization = !hasSpecialization > 0\r\n\t\t\tarray.push({\r\n\t\t\t\tklassFeature: akf,\r\n\t\t\t\tklassName,\r\n\t\t\t\thasSpecialization\r\n\t\t\t})\r\n\t\t}\r\n\t})\r\n\r\n\treturn array\r\n}\r\n\r\n\r\nexport const renderKlassSpecializations = () => {\r\n\tlet klassSpecializationArray = allKlassSpecializations()\r\n\treturn klassSpecializationArray.map(kspec => {\r\n\t// \tlet specifics = _.startCase(kspec.specifics)\r\n\t// \tif (_.endsWith(specifics, \" Id\")){\r\n\t// \t\tspecifics = specifics.substring(0, specifics.length-3)\r\n\t// \t}\r\n\t//\r\n\t\tlet verb = !kspec.hasSpecialization ? \"Choose\" : \"Alter\"\r\n\t\tlet className = !kspec.hasSpecialization ? \"attention-button-animation\" : \"\"\r\n\r\n\t\tlet renderClick = () => {\r\n\t\t\tmodalAction(\"klassSpecialization\", kspec)\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<button className={className} onClick={renderClick}>\r\n\t\t\t\t{kspec.klassName}: {verb} {kspec.klassFeature.name}\r\n\t\t\t</button>\r\n\t\t)\r\n\t})\r\n}\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport localhost from '../localhost'\r\n\r\nclass HP extends React.Component {\r\n\r\n  state = {\r\n    hitPoints: 0,\r\n    error: false\r\n  }\r\n\r\n  componentDidMount() {\r\n    const sortedClasses = this.props.character.character_klasses.sort((a,b) => a.level - b.level)\r\n    let currentHP = []\r\n    sortedClasses.forEach(cl => {\r\n      let hit_die = this.props.character.uniq_klasses.find(kl => kl.id === cl.klass_id).hit_die\r\n      if ((cl.level === 1) && (hit_die !== cl.hp)) {\r\n        return currentHP.push(hit_die)\r\n      }\r\n      return currentHP.push(cl.hp)\r\n    })\r\n\r\n    this.setState({hitPoints: currentHP})\r\n  }\r\n\r\n  renderChange = (e, index, maxValue) => {\r\n    const hp = parseInt(e.target.value)\r\n    if (typeof hp === \"number\" && (hp < 1 || hp > maxValue)){\r\n      let hitPoints = [...this.state.hitPoints]\r\n\r\n      hitPoints[index] = parseInt(e.target.value) || null\r\n      this.setState({ hitPoints: hitPoints, error: true })\r\n    } else {\r\n      let hitPoints = [...this.state.hitPoints]\r\n\r\n      hitPoints[index] = parseInt(e.target.value) || null\r\n      this.setState({ hitPoints: hitPoints, error: false })\r\n    }\r\n\r\n  }\r\n\r\n  renderClasses = () => {\r\n    const sortedClasses = this.props.character.character_klasses.sort((a,b) => a.level - b.level)\r\n    return sortedClasses.map((char_klass, idx) => {\r\n      const info = this.props.character.uniq_klasses.find(kl => kl.id === char_klass.klass_id)\r\n      return (\r\n        <div>\r\n          <label>Level {char_klass.level}: {info.name}</label>\r\n          <input type=\"number\" name={char_klass.level} value={this.state.hitPoints[idx]} onChange={(e) => this.renderChange(e, idx, info.hit_die)}/>\r\n          d{info.hit_die}\r\n        </div>\r\n      )\r\n    })\r\n  }\r\n\r\n  renderSubmit = () => {\r\n    fetch(`${localhost}/api/v1/hp`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        character_id: this.props.character.id,\r\n        hp: this.state.hitPoints\r\n      })\r\n    })\r\n    .then(r => r.json())\r\n    .then(data => {\r\n      this.props.dispatch({type: 'CHARACTER', character: data.character })\r\n      this.props.exitModal()\r\n    })\r\n  }\r\n\r\n  render() {\r\n    console.log(\"changing HP\", this.state)\r\n    return (\r\n      <div>\r\n        {this.renderClasses()}\r\n        {this.state.error && <p>One of your choices is too high or too low!</p>}\r\n        {!this.state.error && <button onClick={this.renderSubmit}>Submit!</button>}\r\n      </div>\r\n    )\r\n  }\r\n\r\n\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(HP)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { renderKlassSpecializations } from '../../helper_functions/notifications/character_choices'\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faExclamationTriangle } from '@fortawesome/free-solid-svg-icons'\r\n\r\nimport HP from '../../components/HP'\r\n\r\nclass Creation extends React.Component {\r\n\r\n  state = {\r\n    activeProblem: \"\"\r\n  }\r\n\r\n  missingHP = () => {\r\n    let nullHP = false\r\n    this.props.character.character_klasses.forEach(ck => {\r\n      if (ck.hp === null){\r\n        nullHP = true\r\n      }\r\n    })\r\n    return nullHP\r\n  }\r\n\r\n  addHP = () => {\r\n    if (this.missingHP() && this.state.activeProblem !== \"HP\") {\r\n      return <div onClick={() => this.setState({activeProblem: \"HP\"})}><FontAwesomeIcon icon={faExclamationTriangle} color='#f00'/>You are missing Hit Points!</div>\r\n    }\r\n    if (this.missingHP() && this.state.activeProblem === \"HP\") {\r\n      return <HP exitModal={this.props.exitModal} />\r\n    }\r\n  }\r\n\r\n  render(){\r\n\r\n    return(\r\n      <span style={{padding: '1em'}}>\r\n        <p>Creation Problems</p>\r\n        {this.addHP()}\r\n\t\t\t\t{renderKlassSpecializations()}\r\n      </span>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Creation)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport _ from 'lodash'\r\nimport localhost from '../../localhost'\r\nimport { websocketFeatureDistribution } from '../../helper_functions/distributers/features'\r\nimport { updateStoredNotificationsAction } from '../../helper_functions/action_creator/popups'\r\n\r\n\r\nclass Notice extends React.Component {\r\n\r\n  fetchDiscovered = (id, detail) => {\r\n    fetch(`${localhost}/api/v1/${detail}_discovered/${id}`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      }\r\n    })\r\n      .then(r => r.json())\r\n      .then(data => {\r\n        if (data.status === 404 || data.status === 500){\r\n          console.log(data)\r\n        } else if (data.message){\r\n          this.props.dispatch({type: 'DISCOVER EQUIPMENT', detail, id})\r\n        } else {\r\n          this.props.dispatch({type: 'CHARACTER', character: data.character })\r\n        }\r\n      })\r\n    // patch fetch, make cmi discovered\r\n    // get character, dispatch character info\r\n  }\r\n\r\n  renderAdditionalButtons = () => {\r\n    switch(this.props.character.name){\r\n      case(\"Nettie\"):\r\n        return this.nettie()\r\n      default:\r\n        return null\r\n    }\r\n  }\r\n\r\n  dispatchMonster = (monster) => {\r\n    this.props.dispatch({type: 'SUMMON MONSTER', monster})\r\n  }\r\n\r\n  nettie = () => {\r\n    return(\r\n      <section>\r\n        <h3>Available Summoned Monsters</h3>\r\n          <button onClick={() => this.dispatchMonster('air elemental')}>+1 Air Elemental</button>\r\n          <button onClick={() => this.dispatchMonster('earth elemental')}>+1 Earth Elemental</button>\r\n          <button onClick={() => this.dispatchMonster('fire elemental')}>+1 Fire Elemental</button>\r\n          <button onClick={() => this.dispatchMonster('water elemental')}>+1 Water Elemental</button>\r\n          <button onClick={() => this.dispatchMonster('lemure')}>+1 Lemure</button>\r\n      </section>\r\n    )\r\n  }\r\n\r\n  renderConditions = () => {\r\n    return this.props.character_info.conditions.map(c => {\r\n      return <button onClick={() => this.props.dispatch({type: 'CONDITION', condition: c})}>Remove {c}</button>\r\n    })\r\n  }\r\n\r\n  renderActiveEffects = desc => {\r\n    this.props.changeActiveEffects(desc)\r\n    this.props.exitModal()\r\n  }\r\n\r\n  renderDispatch = type => {\r\n    this.props.dispatch({type})\r\n    this.props.exitModal()\r\n  }\r\n\r\n  newItems = () => {\r\n    let undiscoveredCMIs = this.props.character.character_magic_items.filter(cmi => !cmi.discovered)\r\n\t\tlet undiscoveredCPs = this.props.character.character_potions.filter(cp => !cp.discovered)\r\n\t\tlet undiscoveredCSs = this.props.character.character_scrolls.filter(cs => !cs.discovered)\r\n\t\tlet undiscoveredCWas = this.props.character.character_wands.filter(cw => !cw.discovered)\r\n    let undiscoveredCWs = this.props.character.character_weapons.filter(cw => !cw.discovered)\r\n    let undiscoveredCAs = this.props.character.character_armors.filter(cw => !cw.discovered)\r\n    let newItems = [...undiscoveredCMIs, ...undiscoveredCPs, ...undiscoveredCSs, ...undiscoveredCWas, ...undiscoveredCWs, ...undiscoveredCAs]\r\n\r\n    if (!!newItems.length){\r\n      return (\r\n        <div>\r\n          <h3>New Items</h3>\r\n          <ul>\r\n            {this.newItemLI(undiscoveredCMIs, 'character_magic_items')}\r\n\t\t\t\t\t\t{this.newItemLI(undiscoveredCPs, 'character_potions')}\r\n\t\t\t\t\t\t{this.newItemLI(undiscoveredCSs, 'character_scrolls')}\r\n\t\t\t\t\t\t{this.newItemLI(undiscoveredCWas, 'character_wands')}\r\n            {this.newItemLI(undiscoveredCWs, 'character_weapons')}\r\n            {this.newItemLI(undiscoveredCAs, 'character_armors')}\r\n          </ul>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  newItemLI = (array, detail) => {\r\n\r\n    return array.map((ni, idx) => {\r\n      let name = ''\r\n      name = detail ==='character_magic_items' ? (ni.known ? ni.magic_item.name : ni.false_desc ?? \"A New Magic Item\") : name\r\n      name = detail ==='character_potions' ? (ni.known ? `${_.capitalize(ni.potion_or_oil)} of ${ni.spell.name}` : \"A Mysterious Liquid\") : name\r\n      name = detail ==='character_scrolls' ? (ni.known ? `Scroll of ${ni.spell.name}` : \"A Strange Scroll\") : name\r\n      name = detail ==='character_wands' ? (ni.known ? `Wand of ${ni.spell.name}` : \"A Curious Wand\") : name\r\n      name = detail === 'character_weapons' ? (ni.name ? ni.name : ni.weapon.name) : name\r\n      name = detail === 'character_armors' ? (ni.name ? ni.name : ni.armor.name) : name\r\n      return <li key={(idx+10)*3-1}>{name} <button onClick={() => this.fetchDiscovered(ni.id, detail)}>Collect</button></li>\r\n    })\r\n  }\r\n\r\n  tempFeatures = () => {\r\n    let temp = this.props.character_info.features.filter(f => f.duration === 'temporary')\r\n    return temp.map(t => <button style={{display: 'block', margin: 'auto'}} onClick={() => this.props.dispatch({type: 'ACTIVATED FEATURE', feature:{source: t.source, remove: true}})}>Cancel {t.source}'s Effect</button>\r\n\t\t)\r\n  }\r\n\r\n\trenderStoredNotifications = () => {\r\n\t\treturn this.props.storedNotifications.map(sn => {\r\n\t\t\tconst { payload, source, options } = sn\r\n\t\t\tconst renderSNClick = () => {\r\n\t\t\t\twebsocketFeatureDistribution(payload, source, options)\r\n\r\n\t\t\t\tlet updateStoredNotifications = [...this.props.storedNotifications]\r\n\t\t\t\tupdateStoredNotifications = updateStoredNotifications.filter(usn => usn.source.sourceName !== source.sourceName && usn.source.senderName !== source.senderName)\r\n\t\t\t\tupdateStoredNotificationsAction(updateStoredNotifications)\r\n\t\t\t}\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<button onClick={renderSNClick}>{source.sourceName} ({source.senderName})</button>\r\n\t\t\t)\r\n\t\t})\r\n\t}\r\n\r\n\r\n  render(){\r\n    return(\r\n      <span style={{padding: '1em'}}>\r\n        {this.newItems()}\r\n\t\t\t\t{this.renderStoredNotifications()}\r\n        {this.tempFeatures()}\r\n        <h3>Active Conditions</h3>\r\n        {this.renderConditions()}\r\n\r\n        {this.renderAdditionalButtons()}\r\n      </span>\r\n    )\r\n  }\r\n}\r\n//\r\n// {this.props.character_info.hardcode.stealTime && <button onClick={() => this.props.dispatch({type: 'STEAL TIME'})}>Return Time</button>}\r\n// <br/>\r\n// <button style={{display: 'block', margin: 'auto'}} onClick={() => this.renderDispatch('HELMSMAN')}>Sasea Bitch Helmsman</button>\r\n// <button style={{display: 'block', margin: 'auto'}} onClick={() => this.renderDispatch('CREW')}>Sasea Bitch crew</button>\r\n// <h3>Bardic Performances</h3>\r\n// <button style={{display: 'block', margin: 'auto'}} onClick={() => this.renderActiveEffects(\"Inspire Courage: +2 to Attack and Damage rolls, charm saves, and fear saves\")}>Inspire Courage</button>\r\n// <button style={{display: 'block', margin: 'auto'}} onClick={() => this.renderActiveEffects(\"Inspire Competence: +3 to One Specific Skill\")}>Inspire Competence</button>\r\n// <button style={{display: 'block', margin: 'auto'}} onClick={() => this.renderActiveEffects(\"Countersong: Reroll Sonic or language-dependent saves\")}>Countersong</button>\r\n// <button style={{display: 'block', margin: 'auto'}} onClick={() => this.renderActiveEffects(\"Distraction: Affected by illusion magic\")}>Distraction</button>\r\n// <button style={{display: 'block', margin: 'auto'}} onClick={() => this.renderActiveEffects(\"Fascinate\")}>Fascinate</button>\r\n// <h3>Hexes</h3>\r\n// <button style={{display: 'block', margin: 'auto'}} onClick={() => this.renderActiveEffects(\"Protective Luck: Attackers have disadvantage\")}>Protective Luck</button>\r\n// <button style={{display: 'block', margin: 'auto'}} onClick={() => this.renderActiveEffects(\"Fortune: Target has advantage on one roll per round\")}>Fortune</button>\r\n// <h3>Spell Effects</h3>\r\n// <button style={{display: 'block', margin: 'auto'}} onClick={() => this.renderDispatch(\"ENLARGE\")}>Enlarged</button>\r\n// <button style={{display: 'block', margin: 'auto'}} onClick={() => this.renderDispatch(\"REDUCE\")}>Reduced</button>\r\n// <button style={{display: 'block', margin: 'auto'}} onClick={() => this.renderDispatch(\"EXPEDITIOUS RETREAT\")}>Expeditious Retreat</button>\r\n// <button style={{display: 'block', margin: 'auto'}} onClick={() => this.renderDispatch(\"SWIM SPEED\")}>Swim Speed 30 ft</button>\r\n// <button style={{display: 'block', margin: 'auto'}} onClick={() => this.renderDispatch(\"SWIM 20\")}>Swim Speed 20 ft</button>\r\n// <button style={{display: 'block', margin: 'auto'}} onClick={() => this.renderDispatch(\"LAND 10\")}>Land Speed +10 ft</button>\r\n// <button style={{display: 'block', margin: 'auto'}} onClick={() => this.renderDispatch(\"LAND 20\")}>Land Speed +20 ft</button>\r\n// <button style={{display: 'block', margin: 'auto'}} onClick={() => this.renderDispatch(\"QUICK\")}>Quick Reaction</button>\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info,\r\n\t\tstoredNotifications: state.storedNotifications\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Notice)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport localhost from '../localhost'\r\n\r\nclass SkillRanks extends React.Component {\r\n\r\n  state = {\r\n    skillset: false,\r\n    previousRanks: {},\r\n    currentRanks: {},\r\n    availableRanks: 0\r\n  }\r\n\r\n  componentDidMount() {\r\n    fetch(`${localhost}/api/v1/skillsets/${this.props.character.skillset.id}`)\r\n    .then(r => r.json())\r\n    .then(data => {\r\n      const skillsAndRanks = {}\r\n      data.skillset.skills.forEach(skill => {\r\n        let ranks = 0\r\n        this.props.character.character_skillset_skills.forEach(charRanksSkill => {\r\n          if (charRanksSkill.skill_id === skill.id){\r\n            ranks = charRanksSkill.ranks\r\n          }\r\n        })\r\n        skillsAndRanks[skill.id] = ranks\r\n      })\r\n      this.setState({skillset: data.skillset, previousRanks: skillsAndRanks, currentRanks:skillsAndRanks}, this.renderAvailableRanks())\r\n    })\r\n  }\r\n\r\n  renderSubmit = () => {\r\n    fetch(`${localhost}/api/v1/character_skillset_skills`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        character_id: this.props.character.id,\r\n        skillset_id: this.props.character.skillset.id,\r\n        ranks: this.state.currentRanks\r\n      })\r\n    })\r\n    .then(r => r.json())\r\n    .then(data => {\r\n      this.props.dispatch({type: 'CHARACTER', character: data.character })\r\n      this.props.exitModal()\r\n    })\r\n  }\r\n\r\n\r\n  renderCSSChangeColor = (id) => {\r\n    if (this.state.currentRanks[id] > this.state.previousRanks[id]){\r\n      return \"green\"\r\n    } else {\r\n      return \"black\"\r\n    }\r\n  }\r\n\r\n  renderAvailableRanks = () => {\r\n    let availableRanks = 0\r\n    this.props.character.uniq_klasses.forEach(klass => {\r\n      let level = this.props.character_info.classes.find(cl => cl.id === klass.id).level\r\n      if (this.props.character.name === 'Persephone' && klass.name === \"Vigilante\"){\r\n        availableRanks += (4 * level)\r\n      } else {\r\n        availableRanks += (klass.skill_ranks * level)\r\n      }\r\n    })\r\n    availableRanks += (Math.floor((this.props.character_info.ability_scores.intelligence - 10) / 2) * this.props.character.character_klasses.length)\r\n    if (this.state.previousRanks.length > 1){\r\n      const currentRanks = Object.entries(this.state.previousRanks).reduce(((agg, skill) => {\r\n        return agg + skill[1]\r\n      }), 0)\r\n      availableRanks -= currentRanks\r\n    }\r\n    this.setState({availableRanks: availableRanks})\r\n  }\r\n\r\n\r\n  renderSkillSelection = () => {\r\n    return this.state.skillset.skills.map(skill => {\r\n      return (\r\n        <div>\r\n            <span>{skill.name}: <span className={this.renderCSSChangeColor(skill.id)}>{this.state.currentRanks[skill.id]}</span></span>\r\n          {!(this.state.currentRanks[skill.id] === this.props.character.character_klasses.length) && (this.state.availableRanks !== 0)? <button onClick={() => this.setState({currentRanks: {...this.state.currentRanks, [skill.id]: this.state.currentRanks[skill.id]+1 }, availableRanks: this.state.availableRanks - 1})}>+</button> : null}\r\n          {!(this.state.currentRanks[skill.id] === this.state.previousRanks[skill.id]) ? <button onClick={() => this.setState({currentRanks: {...this.state.currentRanks, [skill.id]: this.state.currentRanks[skill.id]-1 }, availableRanks: this.state.availableRanks + 1})}>-</button> : null}\r\n        </div>\r\n      )\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={{overflow: \"hidden\", marginBottom: '2.5em'}}>\r\n        <div>Available Ranks: {this.state.availableRanks}</div>\r\n        {this.state.skillset && this.renderSkillSelection()}\r\n        <button onClick={this.renderSubmit}>Submit!</button>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(SkillRanks)\r\n","import React from 'react'\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faCheck } from '@fortawesome/free-solid-svg-icons'\r\n\r\nconst SpellPreparationCard = props => {\r\n\r\n  const properSpellLevelRange = () => {\r\n    return props.availableSpellLevels.filter(asl => {\r\n      if (asl < props.knownSpell.klass_spell.spell_level) {\r\n        return false\r\n      } else {\r\n        return true\r\n      }\r\n    })\r\n  }\r\n\r\n  const isThisTargeted = () => {\r\n    return (\r\n      <div>\r\n          <label>\r\n            Spell Level:\r\n            <select name=\"level\" value={props.spellLevel} onChange={props.renderSpellLevelEdit}>\r\n              <option value=\"-\"> - </option>\r\n              {properSpellLevelRange().map(asl => <option value={asl}>{asl}</option>)}\r\n            </select>\r\n          </label>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const toggleClick = () => {\r\n    if (props.activeSpell === props.knownSpell.spell.id){\r\n      props.renderClick(0)\r\n    } else {\r\n      props.renderClick(props.knownSpell.spell.id)\r\n    }\r\n  }\r\n\r\n  const chosen = () => {\r\n    let prepared = false\r\n    props.preparedSpells.forEach(psp => {\r\n      if (props.knownSpell.spell.id === psp.spell.id){\r\n        prepared = true\r\n      }\r\n    })\r\n    props.goingToBePreparedSpells.forEach(gtbps => {\r\n      if (props.knownSpell.spell.id === gtbps.spell_id){\r\n        prepared = true\r\n      }\r\n    })\r\n\r\n    return prepared ? <FontAwesomeIcon icon={faCheck} size='1x'/> : ''\r\n  }\r\n\r\n\r\n  return (\r\n    <tr>\r\n      <td className='bordered-table'>{props.knownSpell.klass_spell.spell_level}</td>\r\n      <td className='bordered-table'>{chosen()}</td>\r\n      <td className='bordered-table' onClick={toggleClick}>{props.knownSpell.spell.name}</td>\r\n      <td className='bordered-table'>{props.activeSpell === props.knownSpell.spell.id && isThisTargeted()}</td>\r\n      {(props.spellLevel >= 0 && props.spellLevel <= 9) && props.activeSpell === props.knownSpell.spell.id && <td><button onClick={props.renderSelectedSpell}>Prepare</button></td>}\r\n    </tr>\r\n  )\r\n}\r\n\r\nexport default (SpellPreparationCard)\r\n","import React from 'react'\r\n\r\nconst PreparedCard = props => {\r\n\r\n  return (\r\n    <tr>\r\n      <td className='bordered-table'><strong>{props.spell.name}</strong></td>\r\n      <td className='bordered-table'> Lvl {props.level}</td>\r\n      {!props.alreadyPrepared && <td><button onClick={() => props.removePreparedSpell(props.spell.id, props.level)}>X</button></td>}\r\n    </tr>\r\n  )\r\n\r\n}\r\n\r\nexport default (PreparedCard)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport _ from 'lodash'\r\nimport localhost from '../localhost'\r\nimport { th } from '../fuf'\r\n\r\nimport SpellPreparationCard from '../components/spell_preparation_card'\r\nimport PreparedCard from '../components/prepared_card'\r\n\r\nclass PrepareSpells extends React.Component {\r\n\r\n  state = {\r\n    knownSpells: [],\r\n    selectedSpells: [],\r\n    activeClass: 0,\r\n    allAvailableClasses: [],\r\n    activeSpell: 0,\r\n    spellLevel: \"-\",\r\n    spellsPerDay: null,\r\n    availableSpellLevels: []\r\n  }\r\n\r\n  componentDidMount() {\r\n    fetch(`${localhost}/api/v1/known_spells?character=${this.props.character.id}`)\r\n    .then(r => r.json())\r\n    .then(data => {\r\n      this.setState({knownSpells: data}, this.availableClasses)\r\n    })\r\n  }\r\n  // CREATES AN ARRAY OF KLASS IDS\r\n  // THESE IDS REPRESENT ALL THE AVAILABLE KLASSES\r\n  // IF THERE IS ONLY ONE OF THESE KLASSES, MAKE IT THE ACTIVE ONE\r\n  availableClasses = () => {\r\n    let classes = []\r\n    this.state.knownSpells.forEach(ks => {\r\n      if (!classes.includes(ks.klass.id)){\r\n        classes.push(ks.klass.id)\r\n      }\r\n    })\r\n    if (classes.length === 1){\r\n      this.setState({activeClass: classes[0]})\r\n    } else {\r\n      this.setState({activeClass: classes[0], allAvailableClasses: classes})\r\n    }\r\n  }\r\n\r\n  renderSubmit = (e) => {\r\n    e.preventDefault()\r\n    console.log(this.state.availableSpellLevels)\r\n    let info = {\r\n      spells: this.state.selectedSpells,\r\n      character_id: this.props.character.id,\r\n      is_done_preparing_spells: !!this.state.availableSpellLevels.length ? false : true\r\n    }\r\n    fetch(`${localhost}/api/v1/prepared_spells`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify(info)\r\n    })\r\n    .then(r => r.json())\r\n    .then(data => {\r\n      this.props.dispatch({type: 'PREPARE SPELLS', spells: data })\r\n      if (!this.state.availableSpellLevels.length){\r\n        this.props.dispatch({type: 'DONE PREPARING'})\r\n      }\r\n      this.props.exitModal()\r\n    })\r\n  }\r\n\r\n  // SORT THE SPELLS BY THEIR LEVEL AND ALPHABETICAL\r\n  // THEN, MAKE CARDS FOR EACH OF THEM\r\n  renderKnownSpells = () => {\r\n    let ksSortedSpellLevel = this.state.knownSpells.sort((ks1, ks2) => {\r\n      return ks1.klass_spell.spell_level - ks2.klass_spell.spell_level\r\n    })\r\n    let ksSortedFilteredSpellLevel = ksSortedSpellLevel.filter(ksssl => ksssl.klass.id === this.state.activeClass)\r\n\r\n    return ksSortedFilteredSpellLevel.map(kssfsl => <SpellPreparationCard knownSpell={kssfsl} renderClick={this.renderClick} activeSpell={this.state.activeSpell} spellLevel={this.state.spellLevel} renderSpellLevelEdit={this.renderSpellLevelEdit} renderSelectedSpell={this.renderSelectedSpell} availableSpellLevels={this.state.availableSpellLevels} preparedSpells={this.props.character.prepared_spells} goingToBePreparedSpells={this.state.selectedSpells}/>)\r\n  }\r\n\r\n  displayClassOptions = () => {\r\n    if (!this.state.allAvailableClasses.length){\r\n      return <p>{this.props.classes.find(cl => cl.id === this.state.activeClass).name} Spells</p>\r\n    } else {\r\n      // create a tab system (like for actions or the settings modal)\r\n      // activeClass is already in state\r\n      // use it to show only specific class spell options\r\n    }\r\n  }\r\n\r\n  renderClick = (spell_id) => {\r\n    this.setState({activeSpell: spell_id, spellLevel: \"-\"})\r\n  }\r\n\r\n  renderSpellLevelEdit = (e) => {\r\n    this.setState({spellLevel: parseInt(e.target.value)})\r\n  }\r\n\r\n  renderSelectedSpell = (e) => {\r\n    e.preventDefault()\r\n    if (this.state.spellLevel === \"-\"){\r\n      return null\r\n      // if the prepare button was clicked while a spell level is present\r\n    } else {\r\n      // grab klass spell id by going through all known spells, looking for specific chosen spell\r\n      let selectedSpell = this.state.knownSpells.find(ks => ks.spell.id === this.state.activeSpell)\r\n      let ksi = selectedSpell.klass_spell.id\r\n      let klassId = selectedSpell.klass.id\r\n      let spell = {\r\n        spell_id: this.state.activeSpell,\r\n        level: this.state.spellLevel,\r\n        known_spell_id: ksi,\r\n        klass: klassId\r\n      }\r\n      // add selected spell to state, reset active spell and selected spell level\r\n      this.setState({selectedSpells: [...this.state.selectedSpells, spell], activeSpell: 0, spellLevel: \"-\"})\r\n    }\r\n  }\r\n\r\n  displaySelectedSpells = () => {\r\n    let activeKlass = this.props.character_info.classes.find(cl => cl.id === this.state.activeClass)\r\n\r\n\r\n    return this.state.spellsPerDay.map(spd => {\r\n      let totalSpellsPerDay = spd.spells\r\n      // can't get bonus spells per day for cantrips\r\n      if (this.bonusSPD(spd.klass_id, spd.spell_level) && spd.spell_level !== 0){\r\n        totalSpellsPerDay += 1\r\n      }\r\n      let prepared = this.state.selectedSpells.filter(ss => ss.level === spd.spell_level).length\r\n      let remainingSpells = totalSpellsPerDay - prepared\r\n\r\n      // checking for cast spells from prepared spells\r\n      this.props.character.prepared_spells.forEach(ps => {\r\n        if (ps.spell_level === spd.spell_level){\r\n          remainingSpells--\r\n        }\r\n      })\r\n\r\n      if (remainingSpells === 0 && this.state.availableSpellLevels.includes(spd.spell_level)){\r\n        this.checkAvailableSpellLevel(spd.spell_level)\r\n      }\r\n      return <span> <strong>|</strong> <i>{th(spd.spell_level)}</i>: <strong>{(remainingSpells || remainingSpells === 0) ? remainingSpells : totalSpellsPerDay}</strong></span>\r\n    })\r\n  }\r\n\r\n  remainingSpells = () => {\r\n    let spells = []\r\n    let preparingSpells = 'spells_per_days'\r\n    // for each class that a character has levels in\r\n    this.props.character_info.classes.forEach(klass => {\r\n      //find that class\r\n      const c = this.props.classes.find(k => k.id === klass.id)\r\n      // does this class use spells_per_day for how many spells they can prepare\r\n      // or do they have a separate table for prepared_amount\r\n      let spellcasting = this.props.character_info.classes.find(cl => cl.id === c.id).spellcasting\r\n      if (spellcasting && spellcasting.prepared_amount){\r\n        preparingSpells = 'prepared_amounts'\r\n      }\r\n      // if that class has spells\r\n      if (c && c[preparingSpells].length){\r\n        // go through the list of spells per day,\r\n        // and find the spells they can cast per day at their class level\r\n        let spellsAtThisLevel = c[preparingSpells].filter(spd => {\r\n          return spd.klass_level === klass.level\r\n        })\r\n        // push into an array\r\n        // an object of each spell per day and the class name and id\r\n        spells.push({spd: spellsAtThisLevel})\r\n      }\r\n    })\r\n    let availableSpellLevels = []\r\n    spells[0].spd.forEach(spd => {\r\n      if (!availableSpellLevels.includes(spd.spell_level)){\r\n        availableSpellLevels.push(spd.spell_level)\r\n      }\r\n    })\r\n    // set state\r\n    this.setState({spellsPerDay: spells[0].spd, availableSpellLevels})\r\n  }\r\n\r\n  bonusSPD = (klass_id, spell_level) => {\r\n    let spellcasting = this.props.character_info.classes.find(cl => cl.id === klass_id).spellcasting\r\n    let ab = _.lowerCase(spellcasting.ability_score)\r\n    if (spellcasting.prepared_amount){\r\n      // if the class spellcasting has another table for calculating how many spells you can prepare\r\n      // vs how many spells you can cast on a given day\r\n      // you don't get a bonus to spells per day\r\n      return false\r\n    } else {\r\n      return ((this.props.character_info.ability_scores[ab] - 10) / 2.0) >= spell_level ? true : false\r\n    }\r\n  }\r\n\r\n  renderPreparedSpells = () => {\r\n    return this.state.selectedSpells.map(ss => {\r\n      let spell = this.state.knownSpells.find(ks => ks.spell.id === ss.spell_id).spell\r\n      return <PreparedCard spell={spell} level={ss.level} removePreparedSpell={this.removePreparedSpell} alreadyPrepared={false}/>\r\n    })\r\n  }\r\n\r\n  renderAlreadyPreparedSpell = () => {\r\n    let klassPreparedSpells = this.props.character.prepared_spells.filter(ps => ps.klass.id === this.state.activeClass)\r\n    return klassPreparedSpells.map(kps => <PreparedCard spell={kps.spell} level={kps.spell_level} alreadyPrepared={true}/>)\r\n  }\r\n\r\n  checkAvailableSpellLevel = (lvl) => {\r\n    let changedAvailable = [...this.state.availableSpellLevels]\r\n    let filtered = changedAvailable.filter(casl => {\r\n      if (casl === lvl){\r\n        return false\r\n      } else {\r\n        return true\r\n      }\r\n    })\r\n    this.setState({availableSpellLevels: filtered})\r\n  }\r\n\r\n  removePreparedSpell = (spell_id, level) => {\r\n    let found = false\r\n    let filtered = this.state.selectedSpells.filter(ss => {\r\n      if (ss.spell_id === spell_id && ss.level === level && !found){\r\n        found = true\r\n        // prevent duplicates from being filtered out\r\n        return false\r\n      } else {\r\n        return true\r\n      }\r\n    })\r\n    this.setState({selectedSpells: filtered})\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <div className=\"container-65-35\">\r\n        <div>\r\n        {this.state.activeClass && this.displayClassOptions()}\r\n        <table className='bordered-table'>\r\n          <tr>\r\n            <th className='bordered-table'>Level</th>\r\n            <th className='bordered-table'>P?</th>\r\n            <th className='bordered-table'>Spell</th>\r\n            <th className='bordered-table'>Prepared Level</th>\r\n          </tr>\r\n          {this.renderKnownSpells()}\r\n        </table>\r\n        </div>\r\n        <div>\r\n          {this.state.spellsPerDay && this.displaySelectedSpells()}\r\n          {!this.state.spellsPerDay && this.remainingSpells()}\r\n          <table className='bordered-table'>\r\n            <tr>\r\n              <th className='bordered-table'>Spell</th>\r\n              <th className='bordered-table'>Level</th>\r\n            </tr>\r\n            {this.state.activeClass && this.renderAlreadyPreparedSpell()}\r\n            {this.renderPreparedSpells()}\r\n          </table>\r\n          {this.state.selectedSpells.length ? <button onClick={this.renderSubmit}>Prepare your spells!</button> : null}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n    character: state.character,\r\n    character_info: state.character_info,\r\n    classes: state.classes\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(PrepareSpells)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport * as SpellcastingCalculations from '../../helper_functions/calculations/spellcasting'\r\nimport { modalAction } from '../../helper_functions/action_creator/popups'\r\nimport { renderCharacterChoices } from '../../helper_functions/notifications/character_choices'\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faExclamationTriangle } from '@fortawesome/free-solid-svg-icons'\r\n\r\nimport SkillRanks from '../../components/skill_ranks'\r\nimport PrepareSpells from '../../container/prepare_spells'\r\n\r\n\r\nclass Update extends React.Component {\r\n\r\n  state= {\r\n    activeProblem: \"\"\r\n  }\r\n\r\n  needsRanks = () => {\r\n    if (this.props.character.character_skillset_skills.length === 0){\r\n      return true\r\n    }\r\n    let totalSkillRanks = 0\r\n    this.props.character.uniq_klasses.forEach(klass => {\r\n      let level = this.props.character_info.classes.find(cl => cl.id === klass.id).level\r\n      totalSkillRanks += (klass.skill_ranks * level)\r\n    })\r\n    let appliedSkillRanks = 0\r\n    this.props.character.character_skillset_skills.forEach(chsss => {\r\n      appliedSkillRanks += chsss.ranks\r\n    })\r\n    if (appliedSkillRanks < totalSkillRanks){\r\n      return true\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n\r\n  addSkillRanks = () => {\r\n    if (this.needsRanks() && this.state.activeProblem !== \"Ranks\"){\r\n      return <div onClick={() => this.setState({activeProblem: \"Ranks\"})}><FontAwesomeIcon icon={faExclamationTriangle} color='#ffd800' />You have some Skill Ranks to spend</div>\r\n    }\r\n    if (this.needsRanks() && this.state.activeProblem === \"Ranks\"){\r\n      return <SkillRanks exitModal={this.props.exitModal}/>\r\n    }\r\n  }\r\n\r\n  isThisCasterPrepared = (klassId) => {\r\n    // REFACTOR\r\n    // Doesn't check to see if spells can be cast at their current level\r\n    // Just at all levels\r\n    // Paladin/Ranger at lvl 4/3, etc.\r\n    let klass = this.props.classes.find(cl => cl.id === klassId)\r\n    let isThisKlassACaster = klass.klass_features.find(kf => kf.spellcasting)\r\n    if (!isThisKlassACaster){\r\n      return false\r\n    }\r\n    let spellcasting = isThisKlassACaster.spellcasting\r\n    return spellcasting.prepared\r\n  }\r\n\r\n  prepareSpells = () => {\r\n    let prepared = false\r\n    this.props.character.uniq_klasses.forEach(kl => {\r\n      if (this.isThisCasterPrepared(kl.id)){\r\n        prepared = true\r\n      }\r\n    })\r\n    if (!this.props.character.is_done_preparing_spells && prepared && this.state.activeProblem !== \"Prepare\"){\r\n      return <div onClick={() => this.setState({activeProblem: \"Prepare\"})}><FontAwesomeIcon icon={faExclamationTriangle} color='#ffd800' />You have to prepare your spells!</div>\r\n    }\r\n    if (!this.props.character.is_done_preparing_spells && prepared && this.state.activeProblem === \"Prepare\"){\r\n      return <PrepareSpells exitModal={this.props.exitModal}/>\r\n    }\r\n  }\r\n\r\n\tmanageKnownSpells = () => {\r\n\t\tlet spellcastingData = SpellcastingCalculations.allRemainingSpellsPerDay()\r\n\t\treturn spellcastingData.map((scData, i) => {\r\n\t\t\tif (scData.spellcasting.known_spell_list){\r\n\t\t\t\treturn this.renderManageKnownSpells(scData)\r\n\t\t\t} else {\r\n\t\t\t\treturn null\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\trenderManageKnownSpells = (spellcastingData) => {\r\n\t\tconst renderClick = () => {\r\n\t\t\tmodalAction(\"manageKnownSpells\", spellcastingData)\r\n\t\t}\r\n\r\n\t\treturn <button onClick={renderClick}>Manage Known Spells - {spellcastingData.klassName}</button>\r\n\t}\r\n\r\n\tmanagePreparedSpells = () => {\r\n\t\tlet spellcastingData = SpellcastingCalculations.allRemainingSpellsPerDay()\r\n\t\treturn spellcastingData.map((scData, i) => {\r\n\t\t\tif (scData.spellcasting.prepare_spells){\r\n\t\t\t\treturn this.renderManagePreparedSpells(scData)\r\n\t\t\t} else {\r\n\t\t\t\treturn null\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\trenderManagePreparedSpells = (spellcastingData) => {\r\n\t\tconst renderClick = () => {\r\n\t\t\tmodalAction(\"managePreparedSpells\", spellcastingData)\r\n\t\t}\r\n\r\n\t\treturn <button onClick={renderClick}>Manage Prepared Spells - {spellcastingData.klassName}</button>\r\n\t}\r\n\r\n\r\n  render(){\r\n    return(\r\n      <span style={{padding: '1em'}}>\r\n        <p>Things to update</p>\r\n        {this.addSkillRanks()}\r\n\t\t\t\t{this.manageKnownSpells()}\r\n\t\t\t\t{this.managePreparedSpells()}\r\n        {this.prepareSpells()}\r\n\t\t\t\t{renderCharacterChoices()}\r\n      </span>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n    character: state.character,\r\n    character_info: state.character_info,\r\n    classes: state.classes\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Update)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport localhost from '../../localhost'\r\n\r\nclass Rest extends React.Component {\r\n\r\n  newDay = () => {\r\n    const char = this.props.character\r\n    fetch(`${localhost}/api/v1/rest`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        id: char.id\r\n      })\r\n    })\r\n    .then(r => r.json())\r\n    .then(data => {\r\n      // do you have any spells to prepare at the beginning of the day?\r\n\r\n      // Boolean for anyRemainingSpellsToPrepare\r\n      // check to see if it's true or false by checking spells per day against prepared spells and cast spell levels\r\n      // does not apply for spontaneous casters\r\n\r\n      this.props.dispatch({type: 'CHARACTER', character: data.character })\r\n      // should return either updated character // RETURNS NEW CHARACTER\r\n\r\n      // dispatch new character, clear cast cast spells\r\n\r\n      // or adjusted hps (lethal, non lethal, temp) due to resting\r\n\r\n      // then do a delete with all cast spells\r\n      this.props.exitModal()\r\n\r\n    })\r\n  }\r\n\r\n  anyPreparedSpells = () => {\r\n    // Go through each class\r\n    //  check to see if it has to prepare any spells\r\n    // AT ITS CURRENT LEVEL i.e. Paladin, Ranger etc.\r\n\r\n    // spontaneousOrPrepared = (klassId) => {\r\n    //   const klass = this.props.classes.find(cl => cl.id === klassId)\r\n    //   let spellcasting = klass.klass_features.find(kf => kf.spellcasting).spellcasting\r\n    //   return spellcasting.prepared\r\n    // }\r\n  }\r\n\r\n  render(){\r\n\r\n    return(\r\n      <span style={{padding: '1em'}}>\r\n        <p>\r\n          <button onClick={this.newDay}>Would You Like to Rest?</button>\r\n        </p>\r\n      </span>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(Rest)\r\n","import React from 'react'\r\nimport Portal from '../portal'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport NotificationTabs from '../container/notification_tabs'\r\n\r\nimport Creation from './notifications/creation'\r\nimport Notice from './notifications/notice'\r\nimport Update from './notifications/update'\r\nimport Rest from './notifications/rest'\r\n\r\nclass Notifications extends React.Component{\r\n\r\n  state= {\r\n    activeTab: \"Communique\"\r\n  }\r\n\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  renderTabClick = (choice) => {\r\n    this.setState({activeTab: choice})\r\n  }\r\n\r\n  renderChange = (e) => {\r\n    this.setState({[e.target.name]: e.target.value})\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Portal>\r\n        <div className=\"page-dimmer\" onClick={this.props.clickOut}>\r\n          <div className=\"edit-form\" name=\"background\">\r\n            <NotificationTabs renderTabClick={this.renderTabClick} activeTab={this.state.activeTab}/>\r\n            <div style={{height: '100%', overflow: 'auto'}}>\r\n              {this.state.activeTab === \"Communique\" && <Notice exitModal={this.props.exitModal} changeActiveEffects={this.props.changeActiveEffects}/>}\r\n              {this.state.activeTab === \"Update Character\" && <Update exitModal={this.props.exitModal}/>}\r\n              {this.state.activeTab === \"Literally Unplayable\" && <Creation  exitModal={this.props.exitModal}/>}\r\n              {this.state.activeTab === \"Rest\" && <Rest  exitModal={this.props.exitModal}/>}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Portal>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(mapStatetoProps)(Notifications))\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Portal from '../portal'\r\nimport localhost from '../localhost'\r\n\r\nimport SpellDescription from '../components/spell_description'\r\n\r\nclass SpellDescriptionModal extends React.Component {\r\n\r\n  state ={\r\n    spell: null\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (!this.props.spells.length){\r\n      fetch(`${localhost}/api/v1/spells/${this.props.spellId}`)\r\n      .then(r => r.json())\r\n      .then(data => {\r\n        this.setState({spell: data.spell})\r\n      })\r\n    } else {\r\n      const spell = this.props.spells.find(sp => sp.id === this.props.spellId)\r\n      this.setState({spell})\r\n    }\r\n  }\r\n\r\n  render(){\r\n    console.log(this.state.spell)\r\n    return (\r\n      <Portal>\r\n      <div className=\"page-dimmer\" onClick={this.props.clickOut}>\r\n        <div id='spell-desc' name=\"background\">\r\n          {this.state.spell && <SpellDescription spell={this.state.spell}/>}\r\n        </div>\r\n      </div>\r\n      </Portal>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info,\r\n    spells: state.spells\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(SpellDescriptionModal)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Portal from '../portal'\r\nimport localhost from '../localhost'\r\n\r\nimport MagicItemSummary from '../components/magic_item_summary'\r\n\r\nclass MagicItemModal extends React.Component {\r\n\r\n  findItem = () => {\r\n    return this.props.character.character_magic_items.find(cmi => cmi.id === this.props.characterItemID)\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <Portal>\r\n      <div className=\"page-dimmer\" onClick={this.props.clickOut}>\r\n        <div id='spell-desc' name=\"background\">\r\n          <MagicItemSummary item={this.findItem().magic_item} cmi={this.findItem()} editModal={this.props.editModal} exitModal={this.props.exitModal}/>\r\n        </div>\r\n      </div>\r\n      </Portal>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(MagicItemModal)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport _ from 'lodash'\r\nimport Portal from '../portal'\r\nimport localhost from '../localhost'\r\n\r\nconst CharacterFeatureModal = props => {\r\n\r\n  const [cf, setCF] = React.useState(null);\r\n  const [adjustedValue, setAdjustedValue] = React.useState(-1);\r\n\r\n  React.useEffect(() => {\r\n    fetch(`${localhost}/api/v1/${props.detail}/${props.cfId}`)\r\n      .then(r => r.json())\r\n      .then(data => {\r\n        setCF(data)\r\n      })\r\n  }, [props.cfId])\r\n\r\n  const fetchAdjust = (id, url, info) => {\r\n    fetch(`${localhost}/api/v1/${url}/${id}`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        Accept: 'application/json'\r\n      },\r\n      body: JSON.stringify({count: 0 - adjustedValue})\r\n    })\r\n      .then(r => r.json())\r\n      .then(data => {\r\n        if (data.status === 404 || data.status === 500){\r\n          console.log(data)\r\n        } else {\r\n          props.exitModal()\r\n          props.dispatch({type: 'CHARACTER', character: data.character })\r\n          setAdjustedValue(0)\r\n\r\n          if (adjustedValue < 0){\r\n\r\n            info.movements && info.movements.forEach(m => {\r\n              props.dispatch( { type: 'ACTIVATED FEATURE', feature: { type: 'movement', source: info.source, movement: m.movement, feet: m.feet, bonus: m.bonus, penalty: m.penalty, duration: 'temporary' } } )\r\n\r\n            })\r\n\r\n          }\r\n        }\r\n      })\r\n  }\r\n\r\n\r\n  const renderPage = () => {\r\n    console.log(cf)\r\n    const { name, features } = cf.magic_item\r\n    let info = {}\r\n\r\n    features.forEach(f => {\r\n      let u = f.usage\r\n      if (u){\r\n        info.limit = u.limit\r\n        info.unit = u.unit\r\n        let cmifu = cf.character_magic_item_feature_usages.find(fu => fu.feature_usage_id === u.id)\r\n        info.cmifuId = cmifu.id\r\n        info.remaining = u.limit - cmifu.current_usage\r\n        info.movements = f.movements\r\n        info.source = cf.magic_item.name\r\n        info.options = u.options\r\n        info.cmifuo = cf.character_magic_item_feature_usage_options\r\n      }\r\n    })\r\n\r\n    if ((info.remaining === 0 || info.options) && adjustedValue === -1){\r\n      setAdjustedValue(0)\r\n    }\r\n\r\n    let alreadyImplemented = props.character_info.features.find(f => f.source === info.source)\r\n\r\n    console.log(info.options)\r\n    return (\r\n      <React.Fragment>\r\n        <h3>{name}</h3>\r\n        <div>\r\n          <span>{info.remaining}/{info.limit} {info.unit}s</span>\r\n          {!info.options.length && (\r\n            <React.Fragment>\r\n              <div>Adjust Available {_.capitalize(info.unit)}s: {adjustedValue}</div>\r\n              {(adjustedValue + info.remaining < 10) && <button onClick={() => setAdjustedValue(adjustedValue + 1)}>+</button>}\r\n              {(adjustedValue + info.remaining > 0) && <button onClick={() => setAdjustedValue(adjustedValue - 1)}>-</button>}\r\n            </React.Fragment>\r\n          )}\r\n          {!!info.options.length && (\r\n            <React.Fragment>\r\n              {info.options.map(op => {\r\n                let cmifuo = info.cmifuo.find(fuo => fuo.feature_usage_option_id === op.id)\r\n                let remainingOptions = op.amount - cmifuo.current_usage\r\n                if (remainingOptions !== 0){\r\n                  return <p>{remainingOptions} {op.amount === 1 ? info.unit : info.unit + 's'}: {op.detail} <button onClick={() => fetchAdjust(cmifuo.id, 'character_magic_item_feature_usage_options', info)}>Expend {info.unit}</button></p>\r\n                } else {\r\n                  return null\r\n                }\r\n              })}\r\n            </React.Fragment>\r\n          )}\r\n          <div>\r\n            {info.movement && <p>{info.movement.movement} Speed: {info.movement.feet} ft</p>}\r\n          </div>\r\n          {!!adjustedValue && !alreadyImplemented && <button onClick={() => fetchAdjust(info.cmifuId, 'character_magic_items', info)}>{adjustedValue > 0 ? `Restore ${info.unit}s` : 'Activate Feature' }</button>}\r\n\r\n          {alreadyImplemented && <button onClick={() => props.dispatch({type: 'ACTIVATED FEATURE', feature: {source: info.source, remove: true}})}>Cancel Active Feature</button>}\r\n\r\n        </div>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Portal>\r\n      <div className=\"page-dimmer\" onClick={props.clickOut}>\r\n        <div className=\"edit-form\" name=\"background\">\r\n          {cf && renderPage()}\r\n        </div>\r\n      </div>\r\n    </Portal>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(CharacterFeatureModal)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Portal from '../portal'\r\n\r\nimport WeaponSummary from '../components/weapon_summary'\r\n\r\nclass WeaponModal extends React.Component {\r\n\r\n  findItem = () => {\r\n    return this.props.character.character_weapons.find(cw => cw.id === this.props.characterItemID)\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <Portal>\r\n      <div className=\"page-dimmer\" onClick={this.props.clickOut}>\r\n        <div id='spell-desc' name=\"background\">\r\n          <WeaponSummary item={this.findItem().weapon} cw={this.findItem()} editModal={this.props.editModal} exitModal={this.props.exitModal}/>\r\n        </div>\r\n      </div>\r\n      </Portal>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(WeaponModal)\r\n","import React from 'react'\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faMap } from '@fortawesome/free-solid-svg-icons'\r\nimport { faUserAlt } from '@fortawesome/free-solid-svg-icons'\r\nimport { faCogs } from '@fortawesome/free-solid-svg-icons'\r\nimport { faFistRaised } from '@fortawesome/free-solid-svg-icons'\r\nimport { faDiceD20 } from '@fortawesome/free-solid-svg-icons'\r\n\r\nconst MobileTabs = props => {\r\n\r\n  const isThisTabActive = (tab) =>{\r\n    let className = 'mobile-tab-li'\r\n    if (tab === props.mobileTab){\r\n      className += ' mobile-active-tab'\r\n    }\r\n    return className\r\n  }\r\n\r\n  return (\r\n    <nav id='mobile-tabs'>\r\n      <ul style={{display: 'flex', padding: 0, margin: 0}}>\r\n        <li className={isThisTabActive('adventure')} onClick={() => props.changeActiveMobileTab('adventure')}><FontAwesomeIcon icon={faMap} size='3x'/></li>\r\n        <li className={isThisTabActive('combat')} onClick={() => props.changeActiveMobileTab('combat')}><FontAwesomeIcon icon={faFistRaised} size='3x'/></li>\r\n        <li className={isThisTabActive('character')} onClick={() => props.changeActiveMobileTab('character')}><FontAwesomeIcon icon={faUserAlt} size='3x'/></li>\r\n        <li className={isThisTabActive('settings')} onClick={() => props.changeActiveMobileTab('settings')}><FontAwesomeIcon icon={faDiceD20} size='3x'/></li>\r\n      </ul>\r\n    </nav>\r\n  )\r\n}\r\n\r\nexport default MobileTabs\r\n","import React from \"react\";\r\nimport _ from \"lodash\";\r\nimport { connect } from \"react-redux\";\r\nimport localhost from \"../localhost\";\r\nimport { mod } from \"../fuf\";\r\nimport { fetchCharacter } from \"../dispatch\";\r\nimport { characterDistributer } from \"../utils/distributers/character\";\r\nimport { initializeCampaignWebsocket } from \"../utils/websocket/campaign\";\r\nimport { modalAction } from \"../utils/action_creator/popups\";\r\n\r\nimport AbilityScores from \"../components/character_show/ability_scores\";\r\nimport CharacterName from \"../components/character_show/character_name\";\r\nimport Saves from \"../components/character_show/saves\";\r\nimport HP from \"../components/character_show/hp\";\r\nimport ArmorClass from \"../components/character_show/ac\";\r\nimport AttackBonus from \"../components/character_show/attack_bonus\";\r\nimport CharacterDetails from \"../components/character_show/details\";\r\nimport Skills from \"../components/character_show/skills\";\r\nimport FeaturesTraits from \"./features_traits\";\r\nimport Actions from \"./actions\";\r\nimport Initiative from \"../components/character_show/initiative\";\r\nimport TurnActions from \"../components/character_show/turn_actions\";\r\nimport Details from \"./details\";\r\nimport Campaign from \"./campaign\";\r\nimport NotificationDoor from \"../components/character_show/notification_door\";\r\nimport CharacterShowTabs from \"./character_show_tabs\";\r\n\r\n// unfinished hardcoded features\r\nimport Points from \"../components/character_show/points\";\r\nimport PointModal from \"../modals/points\";\r\nimport PerformanceModal from \"../modals/performance\";\r\nimport RageModal from \"../modals/rage\";\r\nimport Active from \"../components/character_show/active\";\r\n// import Allies from '../components/character_show/allies'\r\n// import SpellDescriptionModal from '../modals/spell'\r\nimport FrogCombat from \"../modals/frog\";\r\nimport Tooltip from \"../modals/tooltip\";\r\nimport CommandRingModal from \"../modals/command\";\r\nimport AgeModal from \"../modals/age\";\r\nimport CurioModal from \"../modals/curios\";\r\nimport PoisonModal from \"../modals/poison\";\r\nimport Size from \"../components/character_show/size\";\r\nimport SpellAugmentModal from \"../modals/augment\";\r\nimport MetamagicModal from \"../modals/metamagic\";\r\nimport HandyModal from \"../modals/handy\";\r\nimport DebilitatingModal from \"../modals/debilitating\";\r\nimport AmmoModal from \"../modals/ammo\";\r\nimport SaseaModal from \"../modals/sasea\";\r\nimport AuraModal from \"../modals/aura\";\r\nimport MutagenModal from \"../modals/mutagen\";\r\nimport SideBar from \"./sidebar/sidebar\";\r\n\r\nimport BackgroundForm from \"../modals/background_form\";\r\nimport CharacterForm from \"../modals/character_form\";\r\nimport AbilityForm from \"../modals/ability_form\";\r\nimport Notifications from \"../modals/notifications\";\r\n// import HPChanges from '../modals/hp_changes'\r\nimport SpellDescriptionModal from \"../modals/spell\";\r\nimport MagicItemModal from \"../modals/magic_item\";\r\nimport CharacterFeatureModal from \"../modals/character_feature_modal\";\r\nimport WeaponModal from \"../modals/weapon\";\r\n\r\nimport MobileTabs from \"../components/mobile/tabs\";\r\nimport ModalSkeleton from \"../modals/skeleton\";\r\n\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faCaretRight } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { faCaretLeft } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { faDiceD20 } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nimport { updateColorThemeAction } from \"../utils/action_creator/settings\";\r\nimport {\r\n  localStorageCharacterData,\r\n  replaceCharacterDataInLocalStorage,\r\n  prepareCookie\r\n} from \"../utils/cookies\";\r\nimport themes from \"../themes\";\r\n\r\n// from here\r\n// ---------\r\n// keep track of rage/chimera/performance/panache points in state\r\n// UPDATE: did it redux <3\r\n\r\n// children\r\n// -------\r\n// render rage/chimera/performance/panache\r\n// render weapons\r\n// hexes, shifter aspects, rage powers, rogue talents, arcane exploits\r\n// activatable class features (swashbuckler, vigilante?, arcanist, shifter)\r\n// feats\r\n// chubbs\r\n// modal of combat choices (charge, combat maneuvers, total defense)\r\n\r\nclass Character extends React.Component {\r\n  state = {\r\n    character: {},\r\n    modal: false,\r\n    display: \"Adventure\",\r\n    activeEffects: [],\r\n    spellId: 0,\r\n    characterItemID: 0,\r\n    cfId: 0,\r\n    toolTip: false,\r\n    toolTipX: 0,\r\n    toolTipY: 0,\r\n    detail: \"\",\r\n    mobileTab: \"adventure\",\r\n    startTime: 0,\r\n    startSwipe: 0,\r\n    drag: false,\r\n    changeBackground: false,\r\n    justSwipedMobile: false,\r\n    offset: 0,\r\n    sidebar: {\r\n      display: false,\r\n      position: \"right\",\r\n      content: \"\"\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    // console.log(\"HI IM RUNNING\")\r\n    const token = localStorage.getItem(\"token\");\r\n    let characterId = parseInt(this.props.location.pathname.split(\"/\")[2]);\r\n    let characterData = localStorageCharacterData(token, characterId);\r\n    if (characterData && Object.keys(this.state.character).length < 1) {\r\n      console.log(characterData);\r\n      characterDistributer(characterData);\r\n      this.setState({ character: characterData });\r\n    }\r\n\r\n    fetch(`${localhost}/api/v1${this.props.location.pathname}`)\r\n      .then(r => r.json())\r\n      .then(data => {\r\n        // IF YOU WANT THE PAGE TO BE PRIVATE\r\n        // if (this.props.currentUser.id === data.character.user.id){\r\n        if (characterData) {\r\n          replaceCharacterDataInLocalStorage(token, data.character);\r\n        } else {\r\n          prepareCookie(token, [data.character]);\r\n        }\r\n        characterDistributer(data.character);\r\n        initializeCampaignWebsocket(data.character);\r\n\r\n        // this.dispatchAbilityScores()\r\n        // this.dispatchClassLevels()\r\n        this.props.dispatch({\r\n          type: \"SPECIFIC USER\",\r\n          name: data.character.name\r\n        });\r\n        // this.dispatchAbilityScoreImprovements(data.character.character_klasses)\r\n        this.setState({ character: data.character });\r\n        if (data.character.name === \"Merg\") {\r\n          this.props.dispatch({ type: \"ACTIVE ARMOR\", name: \"+1 chain shirt\" });\r\n          this.props.dispatch({ type: \"CREW\" });\r\n        }\r\n        if (data.character.name === \"Cedrick\") {\r\n          this.props.dispatch({ type: \"CREW\" });\r\n        }\r\n        if (data.character.name === \"Maddox\") {\r\n          this.props.dispatch({ type: \"CREW\" });\r\n        }\r\n        if (data.character.name === \"Robby\") {\r\n          this.props.dispatch({ type: \"ACTIVE ARMOR\", name: \"Padded\" });\r\n          this.props.dispatch({ type: \"HELMSMAN\" });\r\n        }\r\n\r\n        // this.props.fetchCharacter(data)(this.props.dispatch)\r\n\r\n        //   data.character.character_magic_items.forEach(cmi => {\r\n        //     if (cmi.equipped){\r\n        //       cmi.magic_item.features.forEach(f => {\r\n        //         if (!!f.skill_bonuses.length){\r\n        //           f.skill_bonuses.forEach(sk => {\r\n        //             const { skill_id, bonus, bonus_type, duration } = sk\r\n        //             // const conditions = sk.feature_skill_bonus_conditions.map(c => {return {condition: c.condition}})\r\n        //             this.props.dispatch({type: 'BONUS', bonus: {type: 'skill', skill_id, bonus, bonus_type, duration, source: cmi.magic_item.name}})\r\n        //           })\r\n        //         }\r\n        //         if (!!f.stat_bonuses.length){\r\n        //           f.stat_bonuses.forEach(st => {\r\n        //             const { statistic, bonus, bonus_type, duration } = st\r\n        //             const conditions = st.feature_stat_bonus_conditions.map(c => {return {condition: c.condition}})\r\n        //             this.props.dispatch({type: 'BONUS', bonus: {type: 'stat', statistic, bonus, bonus_type, duration, source: cmi.magic_item.name, conditions}})\r\n        //           })\r\n        //         }\r\n        //         if (!!f.skill_notes.length){\r\n        //           f.skill_notes.forEach(sk => {\r\n        //             const { skill_id, note} = sk\r\n        //             this.props.dispatch({type: 'BONUS', bonus: {type: 'note', skill_id, note, source: cmi.magic_item.name}})\r\n        //           })\r\n        //         }\r\n        //         if (!!f.languages.length){\r\n        //           f.languages.forEach(l => {\r\n        //             const { language, note } = l\r\n        //             this.props.dispatch({type: 'EFFECT', effect: {type: 'language', language, note, source: cmi.magic_item.name}})\r\n        //           })\r\n        //         }\r\n        //       })\r\n        //     }\r\n        //   })\r\n        // data.character.uniq_klasses.forEach(kl => {\r\n        //   kl.klass_features.forEach(kf => {\r\n        //     kf.features.forEach(f =>{\r\n        //       if (!!f.skill_bonuses.length){\r\n        //         f.skill_bonuses.forEach(sk => {\r\n        //           const { skill_id, bonus, bonus_type, duration } = sk\r\n        //           // const conditions = sk.feature_skill_bonus_conditions.map(c => {return {condition: c.condition}})\r\n        //           this.props.dispatch({type: 'BONUS', bonus: {type: 'skill', skill_id, bonus, bonus_type, duration, source: kf.name}})\r\n        //         })\r\n        //       }\r\n        //       if (!!f.skill_notes.length){\r\n        //         f.skill_notes.forEach(sk => {\r\n        //           const { skill_id, note} = sk\r\n        //           // debugger\r\n        //           this.props.dispatch({type: 'BONUS', bonus: {type: 'note', skill_id, note, source: kf.name}})\r\n        //         })\r\n        //       }\r\n        //     })\r\n        //   })\r\n        // })\r\n        // } else {\r\n        //   this.props.history.push('/')\r\n        // }\r\n      });\r\n    if (!localStorage.getItem(\"theme\")) {\r\n      localStorage.setItem(\"theme\", \"Standard\");\r\n    } else {\r\n      let theme = localStorage.getItem(\"theme\");\r\n      let foundTheme = themes.find(t => t.name === theme);\r\n      if (!foundTheme) {\r\n        localStorage.setItem(\"theme\", \"Standard\");\r\n      } else {\r\n        updateColorThemeAction(foundTheme.colors);\r\n      }\r\n    }\r\n  }\r\n\r\n  //\r\n  // getCharacterClassFeatures = (klasses) => {\r\n  //   let klass_features = []\r\n  //   let klass_ids = klasses.map(klass => klass.id)\r\n  //   debugger\r\n  //   klasses.forEach(klass => {\r\n  //     fetch(`http://localhost:3000/api/v1/klass_features/${klass.id}`)\r\n  //     .then(r => r.json())\r\n  //     .then(data => {\r\n  //       klass_features.push(data)\r\n  //     })\r\n  //   })\r\n  //   debugger\r\n  //   this.setState({classFeatures: _.flatten(klass_features)})\r\n  // }\r\n\r\n  renderAbilityScoreCalc = ability => {\r\n    const downcaseAbility = _.lowerCase(ability);\r\n    let score = this.props.character[downcaseAbility];\r\n    this.props.character.race.race_ability_score_modifiers.forEach(mod => {\r\n      if (ability === mod.ability_score) {\r\n        score += mod.bonus;\r\n      }\r\n    });\r\n    if (this.props.character.any_bonus === ability) {\r\n      score += 2;\r\n    }\r\n    this.props.dispatch({\r\n      type: \"ABILITY SCORE\",\r\n      ability: downcaseAbility,\r\n      score: score\r\n    });\r\n  };\r\n\r\n  dispatchClassLevels = () => {\r\n    let cKArray = [];\r\n    let completedClasses = [];\r\n    this.props.character.character_klasses.forEach(cK => {\r\n      const id = cK.klass_id;\r\n      if (!completedClasses.includes(id)) {\r\n        let characterKlass = this.props.character.character_klasses.filter(\r\n          ck => ck.klass_id === id\r\n        );\r\n        const level = characterKlass.length;\r\n        let klass = this.props.character.uniq_klasses.find(k => k.id === id);\r\n\r\n        completedClasses.push(id);\r\n        const classInfo = { id, level };\r\n\r\n        // changing fetch data, this part is not applicable with starting fetch\r\n\r\n        let spellsFeature = klass.klass_features.find(\r\n          f => f.name === \"Spells\" || f.name === \"Alchemy\"\r\n        );\r\n        let spellcasting = spellsFeature ? spellsFeature.spellcasting : null;\r\n\r\n        // look to see if there are any cast spells for the given class\r\n        const castSpellsForThisClass = this.props.character.cast_spells.filter(\r\n          cs => cs.klass_id === id\r\n        );\r\n        // if (castSpellsForThisClass[0]){\r\n        const castSpells = {};\r\n        const transformedCastSpellsToLevelCast = castSpellsForThisClass.map(\r\n          cs => cs.spell_level\r\n        );\r\n        transformedCastSpellsToLevelCast.forEach(lvl => {\r\n          castSpells[lvl]\r\n            ? (castSpells[lvl] = castSpells[lvl] + 1)\r\n            : (castSpells[lvl] = 1);\r\n        });\r\n        classInfo.castSpells = castSpells;\r\n        classInfo.spellcasting = spellcasting;\r\n        // hardcoded start\r\n        let name = this.props.character.name;\r\n        if (name === \"Nettie\" || name === \"Persephone\" || name === \"Maddox\") {\r\n          classInfo.spellcastingAbility = \"intelligence\";\r\n        } else if (name === \"Sylvester\") {\r\n          classInfo.spellcastingAbility = \"charisma\";\r\n        }\r\n        // hardcoded end\r\n        // }\r\n\r\n        // relocate to a new function when data is applcable\r\n\r\n        cKArray.push(classInfo);\r\n      }\r\n    });\r\n    // debugger\r\n    this.props.dispatch({ type: \"CHARACTER_CLASSES\", classes: cKArray });\r\n  };\r\n\r\n  dispatchAbilityScores = () => {\r\n    // this.props.dispatch({type: 'CHARACTER', character: this.state.character })\r\n    this.renderAbilityScoreCalc(\"Strength\");\r\n    this.renderAbilityScoreCalc(\"Dexterity\");\r\n    this.renderAbilityScoreCalc(\"Constitution\");\r\n    this.renderAbilityScoreCalc(\"Intelligence\");\r\n    this.renderAbilityScoreCalc(\"Wisdom\");\r\n    this.renderAbilityScoreCalc(\"Charisma\");\r\n  };\r\n\r\n  dispatchAbilityScoreImprovements = levels => {\r\n    levels.forEach(lvl => {\r\n      if (lvl.ability_score_improvement) {\r\n        this.props.dispatch({\r\n          type: \"ABILITY SCORE IMPROVEMENT\",\r\n          ability_score: lvl.ability_score_improvement\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  renderEdit = (info, details) => {\r\n    fetch(`${localhost}/api/v1/${details}`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Accept: \"application/json\"\r\n      },\r\n      body: JSON.stringify(info)\r\n    })\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        console.log(data);\r\n        this.props.dispatch({ type: \"CHARACTER\", character: data.character });\r\n        this.setState(\r\n          { character: data.character, modal: false },\r\n          this.dispatchAbilityScores(),\r\n          this.dispatchClassLevels()\r\n        );\r\n      });\r\n  };\r\n\r\n  editModal = (section, className, id, detail) => {\r\n    if (className && className !== \"free\") {\r\n      this.props.dispatch({ type: \"TRIGGER ACTION\", action: className });\r\n    }\r\n    if (detail && detail.name === \"weapon\") {\r\n      this.props.dispatch(detail);\r\n    }\r\n    if (section === \"spell\" && !!id) {\r\n      this.setState({ modal: section, spellId: id });\r\n    } else if ((section === \"magic item\" || section === \"weapon\") && !!id) {\r\n      this.setState({ modal: section, characterItemID: id });\r\n    } else if (section === \"cFeature\" && !!id) {\r\n      this.setState({ modal: section, cfId: id, detail });\r\n    } else {\r\n      this.setState({ modal: section });\r\n    }\r\n  };\r\n\r\n  editSidebar = (display, position, description, content) => {\r\n    this.setState({ sidebar: { display, position, description, content } });\r\n  };\r\n\r\n  clickOut = e => {\r\n    if (e.target.classList[0] === \"page-dimmer\") {\r\n      this.setState({ modal: false, spellId: 0, characterItemID: 0 });\r\n    }\r\n  };\r\n  exitModal = () => {\r\n    this.setState({\r\n      modal: false,\r\n      spellId: 0,\r\n      characterItemID: 0,\r\n      cfId: 0,\r\n      detail: \"\"\r\n    });\r\n  };\r\n\r\n  renderTooltip = (e, comment) => {\r\n    this.setState({\r\n      toolTip: true,\r\n      toolTipX: e.clientX,\r\n      toolTipY: e.clientY,\r\n      toolTipComment: comment\r\n    });\r\n  };\r\n\r\n  mouseOut = () => {\r\n    console.log(\"is this being hit?\");\r\n    this.setState({\r\n      toolTip: false,\r\n      toolTipX: 0,\r\n      toolTipY: 0,\r\n      toolTipComment: null\r\n    });\r\n  };\r\n\r\n  changeActiveEffects = string => {\r\n    if (this.state.activeEffects.includes(string)) {\r\n      let knockOffActiveEffects = this.state.activeEffects.filter(\r\n        ae => ae !== string\r\n      );\r\n      this.setState({ activeEffects: knockOffActiveEffects });\r\n    } else {\r\n      this.setState({ activeEffects: [...this.state.activeEffects, string] });\r\n    }\r\n  };\r\n\r\n  rightArrow = () => {\r\n    switch (this.state.display) {\r\n      case \"Adventure\":\r\n        return \"Character\";\r\n      case \"Combat\":\r\n        return \"Adventure\";\r\n      case \"Character\":\r\n        return \"Combat\";\r\n      default:\r\n        return \"Character\";\r\n    }\r\n  };\r\n\r\n  leftArrow = () => {\r\n    switch (this.state.display) {\r\n      case \"Adventure\":\r\n        return \"Combat\";\r\n      case \"Combat\":\r\n        return \"Character\";\r\n      case \"Character\":\r\n        return \"Adventure\";\r\n      default:\r\n        return \"Combat\";\r\n    }\r\n  };\r\n\r\n  changeActiveMobileTab = tab => {\r\n    this.setState({ mobileTab: tab });\r\n  };\r\n\r\n  handleMouseDown = e => {\r\n    // the swipe mechanic will often skip over tabs, if it's too quick and long\r\n    // so in the adjustTabs setState, going to have a settimeout so there is a delay between swipes\r\n    if (!this.state.justSwipedMobile) {\r\n      let d = new Date();\r\n      console.log(\"clicked down on mouse\", e.targetTouches[0].clientX);\r\n      this.setState({\r\n        startTime: d.getTime(),\r\n        startSwipe: e.targetTouches[0].clientX,\r\n        drag: true\r\n      });\r\n    }\r\n  };\r\n\r\n  handleMouseUp = e => {\r\n    this.setState({\r\n      drag: false,\r\n      startTime: null,\r\n      startSwipe: null,\r\n      offset: 0\r\n    });\r\n  };\r\n\r\n  handleMouseMove = e => {\r\n    if (this.state.drag) {\r\n      const currentSwipe = e.targetTouches[0].clientX;\r\n      let d = new Date();\r\n      const currentTime = d.getTime();\r\n      // calculate velocity\r\n      // velocity = current clientX position - starting clientX position / current date - starting date\r\n      const deltaX = this.state.startSwipe - currentSwipe;\r\n      const deltaT = (currentTime - this.state.startTime) / 1000;\r\n      // converting deltaT to seconds from milliseconds\r\n      const velocity = deltaX / deltaT;\r\n\r\n      if (velocity > 900 || velocity < -900) {\r\n        this.adjustTabs(velocity);\r\n      } else {\r\n        this.setState({ offset: deltaX / 1.5 });\r\n      }\r\n      // if velocity is a certain amount, or if delta clientX is great enough\r\n      // move to next tab\r\n    }\r\n  };\r\n\r\n  adjustTabs = velocity => {\r\n    let newTab = \"\";\r\n    // adventure, combat, character, settings (left to right)\r\n    if (velocity > 0) {\r\n      newTab = this.state.mobileTab === \"adventure\" ? \"combat\" : newTab;\r\n      newTab = this.state.mobileTab === \"combat\" ? \"character\" : newTab;\r\n      newTab = this.state.mobileTab === \"character\" ? \"settings\" : newTab;\r\n      newTab = this.state.mobileTab === \"settings\" ? \"settings\" : newTab;\r\n    } else if (velocity < 0) {\r\n      newTab = this.state.mobileTab === \"adventure\" ? \"adventure\" : newTab;\r\n      newTab = this.state.mobileTab === \"combat\" ? \"adventure\" : newTab;\r\n      newTab = this.state.mobileTab === \"character\" ? \"combat\" : newTab;\r\n      newTab = this.state.mobileTab === \"settings\" ? \"character\" : newTab;\r\n    }\r\n    //\r\n    if (!this.state.justSwipedMobile) {\r\n      this.setState(\r\n        { mobileTab: newTab, justSwipedMobile: true, offset: 0 },\r\n        () => {\r\n          setTimeout(() => this.setState({ justSwipedMobile: false }), 150);\r\n        }\r\n      );\r\n    }\r\n  };\r\n\r\n  renderHeader = () => {\r\n    if (localStorage.computer !== \"false\") {\r\n      const renderTabClick = tab => {\r\n        this.setState({ display: tab });\r\n      };\r\n\r\n      // <CharacterShowTabs activeTab={this.state.display} renderTabClick={renderTabClick}/>\r\n      return (\r\n        <div id=\"character\" className=\"shrink\">\r\n          {this.state.character.race && (\r\n            <CharacterName\r\n              character={this.state.character}\r\n              editModal={this.editModal}\r\n            />\r\n          )}\r\n          <div>\r\n            <FontAwesomeIcon\r\n              id=\"spin\"\r\n              icon={faDiceD20}\r\n              size=\"3x\"\r\n              onClick={() => modalAction(\"rollDice\")}\r\n            />\r\n            {this.state.character.race && (\r\n              <NotificationDoor\r\n                character={this.state.character}\r\n                editModal={this.editModal}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  renderCharacter = () => {\r\n    if (localStorage.computer !== \"false\") {\r\n      return (\r\n        <>\r\n          <span className=\"character-show-container\">\r\n            {this.state.character.race &&\r\n              this.state.display === \"Adventure\" && (\r\n                <AbilityScores\r\n                  character={this.state.character}\r\n                  editModal={this.editModal}\r\n                />\r\n              )}\r\n            {this.state.character.race &&\r\n              this.state.display === \"Adventure\" && (\r\n                <FeaturesTraits\r\n                  character={this.state.character}\r\n                  editModal={this.editModal}\r\n                  exitModal={this.exitModal}\r\n                  characterItemID={this.state.characterItemID}\r\n                />\r\n              )}\r\n            {this.state.character.race &&\r\n              this.state.display === \"Character\" && (\r\n                <Details\r\n                  character={this.state.character}\r\n                  editModal={this.editModal}\r\n                />\r\n              )}\r\n            {this.state.character.race &&\r\n              (this.state.display === \"Adventure\" ||\r\n                this.state.display === \"Combat\") && (\r\n                <Saves\r\n                  character={this.state.character}\r\n                  display={this.state.display}\r\n                  renderTooltip={this.renderTooltip}\r\n                  mouseOut={this.mouseOut}\r\n                />\r\n              )}\r\n            {this.state.character.race &&\r\n              (this.state.display === \"Adventure\" ||\r\n                this.state.display === \"Combat\") && (\r\n                <HP\r\n                  character={this.state.character}\r\n                  editModal={this.editModal}\r\n                  display={this.state.display}\r\n                />\r\n              )}\r\n            {this.state.character.race &&\r\n              (this.state.display === \"Adventure\" ||\r\n                this.state.display === \"Combat\") && (\r\n                <ArmorClass\r\n                  character={this.state.character}\r\n                  size={this.props.character_info.size}\r\n                />\r\n              )}\r\n            {this.state.character.race &&\r\n              this.state.display === \"Adventure\" && (\r\n                <Skills\r\n                  character={this.state.character}\r\n                  renderTooltip={this.renderTooltip}\r\n                  mouseOut={this.mouseOut}\r\n                />\r\n              )}\r\n            {this.state.character.race &&\r\n              (this.state.display === \"Adventure\" ||\r\n                this.state.display === \"Combat\") && (\r\n                <Actions\r\n                  character={this.state.character}\r\n                  editModal={this.editModal}\r\n                  clickOut={this.clickOut}\r\n                  renderTooltip={this.renderTooltip}\r\n                  mouseOut={this.mouseOut}\r\n                />\r\n              )}\r\n            {this.state.character.race &&\r\n              this.state.display === \"Adventure\" && <TurnActions />}\r\n\r\n            {/* unfinished, hardcoded features */}\r\n            {!!this.state.character && this.state.display === \"Combat\" && (\r\n              <Points editModal={this.editModal} />\r\n            )}\r\n            {!!this.state.character && this.state.display === \"Combat\" && (\r\n              <Active\r\n                activeEffects={this.state.activeEffects}\r\n                editModal={this.editModal}\r\n              />\r\n            )}\r\n            {!!this.state.character && this.state.display === \"Character\" && (\r\n              <Campaign editModal={this.editModal} />\r\n            )}\r\n            {!!this.state.character &&\r\n              (this.state.display === \"Adventure\" ||\r\n                this.state.display === \"Combat\") && <Size />}\r\n            {/* unfinished, hardcoded features */}\r\n\r\n            {this.state.modal === \"background\" && (\r\n              <BackgroundForm\r\n                character={this.state.character}\r\n                editModal={this.editModal}\r\n                clickOut={this.clickOut}\r\n                renderEdit={this.renderEdit}\r\n              />\r\n            )}\r\n            {this.state.modal === \"character\" && (\r\n              <CharacterForm\r\n                character={this.state.character}\r\n                editModal={this.editModal}\r\n                clickOut={this.clickOut}\r\n                renderEdit={this.renderEdit}\r\n              />\r\n            )}\r\n            {this.state.modal === \"ability\" && (\r\n              <AbilityForm\r\n                character={this.state.character}\r\n                editModal={this.editModal}\r\n                clickOut={this.clickOut}\r\n                renderEdit={this.renderEdit}\r\n              />\r\n            )}\r\n            {this.state.modal === \"notifications\" && (\r\n              <Notifications\r\n                exitModal={this.exitModal}\r\n                editModal={this.editModal}\r\n                clickOut={this.clickOut}\r\n                renderEdit={this.renderEdit}\r\n                changeActiveEffects={this.changeActiveEffects}\r\n              />\r\n            )}\r\n            {this.state.modal === \"hitPoints\" && (\r\n              <ModalSkeleton\r\n                modal={this.state.modal}\r\n                exitModal={this.exitModal}\r\n                editModal={this.editModal}\r\n                clickOut={this.clickOut}\r\n                renderEdit={this.renderEdit}\r\n              />\r\n            )}\r\n            {this.state.modal === \"spell\" && this.state.spellId !== 0 && (\r\n              <SpellDescriptionModal\r\n                exitModal={this.exitModal}\r\n                editModal={this.editModal}\r\n                clickOut={this.clickOut}\r\n                spellId={this.state.spellId}\r\n              />\r\n            )}\r\n            {this.state.modal === \"magic item\" &&\r\n              this.state.characterItemID !== 0 && (\r\n                <MagicItemModal\r\n                  exitModal={this.exitModal}\r\n                  editModal={this.editModal}\r\n                  clickOut={this.clickOut}\r\n                  characterItemID={this.state.characterItemID}\r\n                />\r\n              )}\r\n            {this.state.modal === \"cFeature\" && this.state.cfId !== 0 && (\r\n              <CharacterFeatureModal\r\n                exitModal={this.exitModal}\r\n                editModal={this.editModal}\r\n                clickOut={this.clickOut}\r\n                cfId={this.state.cfId}\r\n                detail={this.state.detail}\r\n              />\r\n            )}\r\n            {this.state.modal === \"weapon\" &&\r\n              this.state.characterItemID !== 0 && (\r\n                <WeaponModal\r\n                  exitModal={this.exitModal}\r\n                  editModal={this.editModal}\r\n                  clickOut={this.clickOut}\r\n                  characterItemID={this.state.characterItemID}\r\n                />\r\n              )}\r\n\r\n            {/* unfinished, hardcoded features */}\r\n            {this.state.modal === \"points\" && (\r\n              <PointModal\r\n                exitModal={this.exitModal}\r\n                editModal={this.editModal}\r\n                clickOut={this.clickOut}\r\n              />\r\n            )}\r\n            {this.state.modal === \"performance\" && (\r\n              <PerformanceModal\r\n                exitModal={this.exitModal}\r\n                editModal={this.editModal}\r\n                clickOut={this.clickOut}\r\n              />\r\n            )}\r\n            {this.state.modal === \"frogCombat\" && (\r\n              <FrogCombat\r\n                exitModal={this.exitModal}\r\n                editModal={this.editModal}\r\n                clickOut={this.clickOut}\r\n              />\r\n            )}\r\n            {this.state.modal === \"rage\" && (\r\n              <RageModal\r\n                exitModal={this.exitModal}\r\n                editModal={this.editModal}\r\n                clickOut={this.clickOut}\r\n              />\r\n            )}\r\n            {this.state.toolTip && (\r\n              <Tooltip\r\n                x={this.state.toolTipX}\r\n                y={this.state.toolTipY}\r\n                comment={this.state.toolTipComment}\r\n              />\r\n            )}\r\n            {this.state.modal === \"command ring\" && (\r\n              <CommandRingModal\r\n                exitModal={this.exitModal}\r\n                editModal={this.editModal}\r\n                clickOut={this.clickOut}\r\n              />\r\n            )}\r\n            {this.state.modal === \"age\" && (\r\n              <AgeModal\r\n                exitModal={this.exitModal}\r\n                editModal={this.editModal}\r\n                clickOut={this.clickOut}\r\n              />\r\n            )}\r\n            {this.state.modal === \"curio\" && (\r\n              <CurioModal\r\n                exitModal={this.exitModal}\r\n                editModal={this.editModal}\r\n                clickOut={this.clickOut}\r\n              />\r\n            )}\r\n            {this.state.modal === \"poisons\" && (\r\n              <PoisonModal\r\n                exitModal={this.exitModal}\r\n                editModal={this.editModal}\r\n                clickOut={this.clickOut}\r\n              />\r\n            )}\r\n            {this.state.modal === \"reservoir\" && (\r\n              <SpellAugmentModal\r\n                exitModal={this.exitModal}\r\n                editModal={this.editModal}\r\n                clickOut={this.clickOut}\r\n              />\r\n            )}\r\n            {this.state.modal === \"metamagic\" && (\r\n              <MetamagicModal\r\n                exitModal={this.exitModal}\r\n                editModal={this.editModal}\r\n                clickOut={this.clickOut}\r\n              />\r\n            )}\r\n            {this.state.modal === \"handy\" && (\r\n              <HandyModal\r\n                exitModal={this.exitModal}\r\n                editModal={this.editModal}\r\n                clickOut={this.clickOut}\r\n              />\r\n            )}\r\n            {this.state.modal === \"debilitating\" && (\r\n              <DebilitatingModal\r\n                exitModal={this.exitModal}\r\n                editModal={this.editModal}\r\n                clickOut={this.clickOut}\r\n              />\r\n            )}\r\n            {this.state.modal === \"ammo\" && (\r\n              <AmmoModal\r\n                exitModal={this.exitModal}\r\n                editModal={this.editModal}\r\n                clickOut={this.clickOut}\r\n              />\r\n            )}\r\n            {this.state.modal === \"sasea\" && (\r\n              <SaseaModal\r\n                exitModal={this.exitModal}\r\n                editModal={this.editModal}\r\n                clickOut={this.clickOut}\r\n              />\r\n            )}\r\n            {this.state.modal === \"aura\" && (\r\n              <AuraModal\r\n                exitModal={this.exitModal}\r\n                editModal={this.editModal}\r\n                clickOut={this.clickOut}\r\n              />\r\n            )}\r\n            {this.state.modal === \"mutagen\" && (\r\n              <MutagenModal\r\n                exitModal={this.exitModal}\r\n                editModal={this.editModal}\r\n                clickOut={this.clickOut}\r\n              />\r\n            )}\r\n            {/* unfinished, hardcoded features */}\r\n          </span>\r\n        </>\r\n      );\r\n      // <div id='right' onClick={() => this.setState({display: this.rightArrow()})}><FontAwesomeIcon icon={faCaretRight} size='9x'/><div>{this.rightArrow()}</div></div>\r\n      // <div id='left' onClick={() => this.setState({display: this.leftArrow()})}><FontAwesomeIcon icon={faCaretLeft} size='9x'/><div>{this.leftArrow()}</div></div>\r\n    } else {\r\n      return (\r\n        <>\r\n          <main\r\n            style={{\r\n              marginBottom: \"10vh\",\r\n              minHeight: \"90vh\",\r\n              position: \"relative\",\r\n              left: 0 - this.state.offset\r\n            }}\r\n            onTouchStart={this.handleMouseDown}\r\n            onTouchMove={this.handleMouseMove}\r\n            onTouchEnd={this.handleMouseUp}\r\n          >\r\n            {this.state.character.race && <CharacterName />}\r\n\r\n            {this.state.character.race &&\r\n              this.state.mobileTab === \"adventure\" && <AbilityScores />}\r\n            {this.state.character.race &&\r\n              this.state.mobileTab === \"adventure\" && (\r\n                <FeaturesTraits\r\n                  editModal={this.editModal}\r\n                  exitModal={this.exitModal}\r\n                  characterItemID={this.state.characterItemID}\r\n                />\r\n              )}\r\n            {this.state.character.race &&\r\n              (this.state.mobileTab === \"adventure\" ||\r\n                this.state.mobileTab === \"combat\") && (\r\n                <HP renderEdit={this.renderEdit} display={this.state.display} />\r\n              )}\r\n            {this.state.character.race &&\r\n              this.state.mobileTab === \"adventure\" && (\r\n                <Skills\r\n                  renderTooltip={this.renderTooltip}\r\n                  mouseOut={this.mouseOut}\r\n                />\r\n              )}\r\n\r\n            {this.state.character.race && this.state.mobileTab === \"combat\" && (\r\n              <section id=\"mobile-combat\">\r\n                <Saves\r\n                  renderTooltip={this.renderTooltip}\r\n                  mouseOut={this.mouseOut}\r\n                />\r\n                <ArmorClass />\r\n                <Initiative />\r\n              </section>\r\n            )}\r\n            {this.state.character.race && this.state.mobileTab === \"combat\" && (\r\n              <TurnActions />\r\n            )}\r\n            {this.state.character.race && this.state.mobileTab === \"combat\" && (\r\n              <Actions\r\n                editModal={this.editModal}\r\n                clickOut={this.clickOut}\r\n                renderTooltip={this.renderTooltip}\r\n                mouseOut={this.mouseOut}\r\n                editSidebar={this.editSidebar}\r\n              />\r\n            )}\r\n\r\n            {this.state.character.race &&\r\n              this.state.mobileTab === \"character\" && (\r\n                <CharacterDetails editModal={this.editModal} />\r\n              )}\r\n\r\n            {this.state.sidebar.display && (\r\n              <SideBar\r\n                sidebar={this.state.sidebar}\r\n                editSidebar={this.editSidebar}\r\n              />\r\n            )}\r\n          </main>\r\n          <footer>\r\n            <MobileTabs\r\n              mobileTab={this.state.mobileTab}\r\n              changeActiveMobileTab={this.changeActiveMobileTab}\r\n            />\r\n          </footer>\r\n        </>\r\n      );\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <article style={{ color: `#${this.props.settings.textColor}` }}>\r\n        {this.renderHeader()}\r\n        {this.renderCharacter()}\r\n      </article>\r\n    );\r\n  }\r\n}\r\n\r\n// {this.props.currentUser.id === this.state.character.user_id ? <button className='char-edit' >Edit your Character</button> : null}\r\n\r\nconst mapStatetoProps = state => {\r\n  return {\r\n    character: state.character,\r\n    character_info: state.character_info,\r\n    websocket: state.websocket,\r\n    settings: state.settings\r\n  };\r\n};\r\n\r\nconst mapDispatchtoProps = dispatch => {\r\n  return {\r\n    fetchCharacter: fetchCharacter,\r\n    dispatch: dispatch\r\n  };\r\n};\r\n\r\nexport default connect(mapStatetoProps, mapDispatchtoProps)(Character);\r\n","import React from 'react'\r\n\r\nimport Tab from '../components/character_show/tab'\r\n\r\nconst CampaignShowTabs = props => {\r\n\tlet encounterTab = null\r\n\tif (props.encounter.id){\r\n\t\tencounterTab = <Tab label={props.encounter.name} renderTabClick={props.renderTabClick} activeTab={props.activeTab}/>\r\n\t}\r\n\treturn (\r\n\t\t<span className=\"tab-list\">\r\n\t\t\t<Tab label=\"Characters\" renderTabClick={props.renderTabClick} activeTab={props.activeTab} />\r\n\t\t\t<Tab label=\"Item Search\" renderTabClick={props.renderTabClick} activeTab={props.activeTab} />\r\n\t\t\t<Tab label=\"Details\" renderTabClick={props.renderTabClick} activeTab={props.activeTab} />\r\n\t\t\t<Tab label=\"Creatures\" renderTabClick={props.renderTabClick} activeTab={props.activeTab} />\r\n\t\t\t<Tab label=\"Encounters\" renderTabClick={props.renderTabClick} activeTab={props.activeTab} />\r\n\t\t\t{encounterTab}\r\n\t\t</span>\r\n\t)\r\n}\r\n\r\nexport default CampaignShowTabs\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport _ from 'lodash'\r\nimport localhost from '../../../localhost'\r\nimport { sendCampaignWebsocket } from '../../../utils/websocket/campaign'\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faDiceOne } from '@fortawesome/free-solid-svg-icons'\r\nimport { faDiceTwo } from '@fortawesome/free-solid-svg-icons'\r\nimport { faDiceThree } from '@fortawesome/free-solid-svg-icons'\r\nimport { faDiceFour } from '@fortawesome/free-solid-svg-icons'\r\nimport { faDiceFive } from '@fortawesome/free-solid-svg-icons'\r\nimport { faDiceSix } from '@fortawesome/free-solid-svg-icons'\r\n\r\nclass ItemSearch extends React.Component {\r\n\r\n  state = {\r\n    searchTerm: '',\r\n    items: [],\r\n    loading: false,\r\n    didSearch: false,\r\n    selectedItem: null,\r\n    successfulAddition: false,\r\n\t\tcustomData: {\r\n\t\t\tname: \"\",\r\n\t\t\tdescription: \"\",\r\n\t\t\tmasterwork: false,\r\n\t\t\tfalse_desc: \"\",\r\n\t\t\tammunition_amount: 1,\r\n\t\t\tknown: false,\r\n\t\t\tdiscovered: false\r\n\t\t}\r\n  }\r\n\r\n  renderChange = (e) => {\r\n    this.setState({[e.target.name]: e.target.value})\r\n  }\r\n\r\n  fetchItem = (e, character_id, itemType) => {\r\n\t\te.preventDefault();\r\n    let info = {\r\n\t\t\t...this.state.customData,\r\n      character_id,\r\n\t\t\titem_id: this.state.selectedItem.id\r\n    }\r\n    this.setState({successfulAddition: false})\r\n    fetch(`${localhost}/api/v1/character_${itemType}s`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify(info)\r\n    })\r\n    .then(r => r.json())\r\n    .then(data => {\r\n      if (data.status === 404 || data.status ===  500){\r\n        console.log(data)\r\n      } else {\r\n        this.setState({successfulAddition: true, selectedItem: '', customData: {name: \"\", description: \"\", masterwork: false, false_desc: \"\", ammunition_amount: 1, known: false, discovered: false}})\r\n\t\t\t\t//send the item, itemType to the character if they are online\r\n\t\t\t\tsendCampaignWebsocket({message: \"Your DM gave you an item!\", reciever_id: character_id, itemType, data}, {dm: true}, {toggleable: true})\r\n      }\r\n    })\r\n  }\r\n\r\n  // debounce = (func, milli, immediate) => {\r\n  //   var timeout\r\n  //   return function () {\r\n  //     var context = this;\r\n  //     var args = arguments;\r\n  //\r\n  //     debugger\r\n  //\r\n  //     var later = function() {\r\n  //       timeout = null;\r\n  //       if (!immediate) func.apply(context, args);\r\n  //     };\r\n  //     if (immediate && !timeout) func.apply(context, args);\r\n  //\r\n  //\r\n  //     clearTimeout(timeout);\r\n  //\r\n  //     timeout = setTimeout(later, milli);\r\n  //   };\r\n  // }\r\n\r\n  fetchItems = () => {\r\n    if (this.state.searchTerm.length){\r\n      fetch(`${localhost}/api/v1/item_search?q=${this.state.searchTerm}`)\r\n        .then(r => r.json())\r\n        .then(data => {\r\n          this.setState({items: data, loading: false, didSearch: true})\r\n        })\r\n    } else {\r\n      this.setState({items: []})\r\n    }\r\n  }\r\n\r\n  renderItems = () => {\r\n    if (!this.state.items.length && this.state.didSearch){\r\n      return <p>¯\\_(ツ)_/¯</p>\r\n    } else {\r\n      return this.state.items.map(i => {\r\n        return (\r\n          <li key={i.id*3-1}>\r\n            <span>{i.name}</span>\r\n            <span>{<button onClick={() => this.deployItem(i)}>Add Item</button>}</span>{this.state.successfulAddition && this.state.selectedItem === i && <span className='plus-one'>+1</span>}\r\n          </li>\r\n        )\r\n      })\r\n    }\r\n  }\r\n\r\n\trenderSelectedItem = () => {\r\n\t\tif (!this.state.selectedItem){ return }\r\n\r\n\t\tlet { name, weapon_type, max_dex_bonus, affliction_type, slot, ammunition } = this.state.selectedItem\r\n\t\tlet itemType = \"item\"\r\n\t\tif (weapon_type){\r\n\t\t\titemType = \"weapon\"\r\n\t\t}\r\n\t\telse if (max_dex_bonus){\r\n\t\t\titemType = \"armor\"\r\n\t\t}\r\n\t\telse if (affliction_type){itemType = \"poison\"}\r\n\t\telse if (slot){itemType = \"magic_item\"}\r\n\r\n\t\tconst formData = (\r\n\t\t\t<>\r\n\t\t\t\t<label htmlFor=\"name\">\r\n\t\t\t\t\tIs there a specific name for this item? <input type=\"text\" id=\"name\" name=\"name\" onChange={this.formHandler} value={this.state.customData.name}/>\r\n\t\t\t\t</label><br/>\r\n\t\t\t\t<label htmlFor=\"description\">\r\n\t\t\t\t\tIs there a detailed description for this item? <input type=\"text\" id=\"description\" name=\"description\" onChange={this.formHandler} value={this.state.customData.description}/>\r\n\t\t\t\t</label><br/>\r\n\t\t\t\t<label htmlFor=\"masterwork\">\r\n\t\t\t\t\tIs this item a masterwork or handcrafted item? <input type=\"checkbox\" id=\"masterwork\" name=\"masterwork\" onChange={this.formHandler} value={this.state.customData.masterwork}/>\r\n\t\t\t\t</label><br/>\r\n\t\t\t</>\r\n\t\t)\r\n\r\n\t\tconst formDataMagicItem = (\r\n\t\t\t<>\r\n\t\t\t\t<label htmlFor=\"false_desc\">\r\n\t\t\t\t\tIs there a false description for this Magic Item? <input type=\"text\" id=\"false_desc\" name=\"false_desc\" onChange={this.formHandler} value={this.state.customData.false_desc}/>\r\n\t\t\t\t</label><br/>\r\n\t\t\t</>\r\n\t\t)\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<h3>{name}</h3>\r\n\t\t\t\t<div style={{marginBottom: '1%', paddingBottom: '.8%', borderBottom: 'double'}}></div>\r\n\t\t\t\t<form>\r\n\t\t\t\t\t{itemType === \"magic_item\" && formDataMagicItem}\r\n\t\t\t\t\t{(itemType === \"weapon\" || itemType === \"armor\") && formData}\r\n\t\t\t\t\t{ammunition && <><label htmlFor=\"ammunition_amount\">\r\n\t\t\t\t\t\tHow much ammo is this? <input type=\"number\" id=\"ammunition_amount\" name=\"ammunition_amount\" onChange={this.formHandler} value={this.state.customData.ammunition_amount}/>\r\n\t\t\t\t\t</label><br/></>}\r\n\t\t\t\t\t<label htmlFor=\"known\">\r\n\t\t\t\t\t\tDoes the player known what this item is? <input type=\"checkbox\" id=\"known\" name=\"known\" onChange={this.formHandler} value={this.state.customData.known}/>\r\n\t\t\t\t\t</label><br/>\r\n\t\t\t\t\t<label htmlFor=\"discovered\">\r\n\t\t\t\t\t\tHas the player discovered that this item is on their character sheet? (Typically, no they need to recieve it in the settings)<input type=\"checkbox\" id=\"discovered\" name=\"discovered\" onChange={this.formHandler} value={this.state.customData.discovered}/>\r\n\t\t\t\t\t</label><br/><br/>\r\n\t\t\t\t\t<p>Give Item to Whom?</p>\r\n\t\t\t\t\t{this.props.campaign.characters.map((ch, idx) => <button onClick={(e) => this.fetchItem(e, ch.id, itemType)}>{ch.name}</button>)}\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n  deployItem = (i) => {\r\n    this.setState({selectedItem: i, successfulAddition: false})\r\n  }\r\n\r\n\tformHandler = e => {\r\n\t\tlet duplicateObj = {...this.state.customData}\r\n\t\tlet key = e.target.name\r\n\t\tlet value = e.target.value\r\n\t\tif (key === \"name\" || key === \"description\" || key === \"false_desc\" || key === \"ammunition_amount\"){\r\n\t\t\tduplicateObj[key] = value\r\n\t\t} else if (key === \"masterwork\" || key === \"known\" || key === \"discovered\"){\r\n\t\t\tduplicateObj[key] = !duplicateObj[key]\r\n\t\t}\r\n\t\tthis.setState({customData: duplicateObj})\r\n\t}\r\n\r\n  handle = _.debounce(this.fetchItems, 800)\r\n\r\n  debouncer = () => {\r\n    this.handle()\r\n    if (this.state.searchTerm.length){\r\n      this.setState({loading: true, selectedItem: null})\r\n    } else {\r\n      this.setState({loading: false})\r\n\r\n    }\r\n  }\r\n\r\n  renderForm = () => {\r\n    return (\r\n      <form>\r\n        <label>\r\n          Item Search:\r\n          <input type=\"text\" name=\"searchTerm\" value={this.state.searchTerm} onChange={this.renderChange} onKeyUp={this.debouncer}/>\r\n        </label>\r\n      </form>\r\n    )\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <section style={{display: \"grid\", gridTemplateColumns: \"1fr 1fr 1fr\"}}>\r\n\t\t\t\t<div>\r\n\t        {this.renderForm()}\r\n\t        <ul>\r\n\t          {this.renderItems()}\r\n\t        </ul>\r\n\t\t\t\t</div>\r\n\t\t\t\t{this.renderSelectedItem()}\r\n      </section>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(ItemSearch)\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport _ from 'lodash'\r\n\r\nimport SpellDescription from '../../spell_description'\r\nimport { getFetch, postFetch } from '../../../utils/fetches'\r\nimport { sortedSpellsByLevelAndName } from '../../../utils/fuf'\r\nimport { sendCampaignWebsocket } from '../../../utils/websocket/campaign'\r\n\r\nconst PotionsScrollsWandsCreator = props => {\r\n\r\n\tconst { spells } = useSelector(state => state)\r\n\r\n\tconst [itemType, setItemType] = React.useState(\"scroll\")\r\n\tconst [viewedSpells, setViewedSpells] = React.useState([])\r\n\tconst [potionsSpells, setPotionsSpells] = React.useState([])\r\n\tconst [selectedSpell, setSelectedSpell] = React.useState({})\r\n\tconst [spellDetails, setSpellDetails] = React.useState({})\r\n\tconst [customData, updateCustomData] = React.useState({\r\n\t\tcaster_level: 1,\r\n\t\tpotion_or_oil: \"potion\",\r\n\t\tscroll_type: \"arcane\",\r\n\t\tspell_level: 0,\r\n\t\tcharges: 50,\r\n\t\tname: \"\",\r\n\t\tdescription: \"\",\r\n\t\tknown: false,\r\n\t\tdiscovered: false\r\n\t})\r\n\tconst [searchTerm, setSearchTerm] = React.useState(\"\")\r\n\tconst [loading, toggleLoading] = React.useState(false)\r\n\tconst [searchAttempt, updateSearchAttempt] = React.useState({})\r\n\r\n\tReact.useEffect(() => {\r\n\t\tif (itemType === \"potion\" && potionsSpells.length === 0){\r\n\t\t\tgetFetch(\"potion_spells\")\r\n\t\t\t\t.then(data => {\r\n\t\t\t\t\tsetPotionsSpells(data)\r\n\t\t\t\t\tconsole.log(\"got em\")\r\n\t\t\t\t})\r\n\t\t}\r\n\t}, [itemType])\r\n\r\n\tconst createFetch = (e, character_id) => {\r\n\t\te.preventDefault()\r\n\t\tlet body = {\r\n\t\t\t...customData,\r\n\t\t\tcharacter_id,\r\n\t\t\tspell_id: selectedSpell.id\r\n\t\t}\r\n\t\tpostFetch(`character_${itemType}s`, body)\r\n\t\t\t.then(data => {\r\n\t\t\t\tif (data.status === 404 || data.status ===  500){\r\n\t        console.log(data)\r\n\t      } else {\r\n\t        updateCustomData({caster_level: 1, potion_or_oil: \"potion\",\tknown: false, discovered: false, spell_level: 0, scroll_type: \"arcane\", charges: 50, name: \"\", description: \"\"})\r\n\t\t\t\t\tsetSelectedSpell({})\r\n\t\t\t\t\t//send the item, itemType to the character if they are online\r\n\t\t\t\t\tsendCampaignWebsocket({message: \"Your DM gave you an item!\", reciever_id: character_id, itemType, data}, {dm: true}, {toggleable: true})\r\n\t      }\r\n\t\t\t})\r\n\t}\r\n\r\n\tconst renderOptions = () => {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<input type=\"radio\" name=\"itemType\" value=\"scroll\" checked={itemType === \"scroll\"} onChange={() => setItemType(\"scroll\")}/>\r\n\t\t\t\t\tScroll\r\n\t\t\t\t</label>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<input type=\"radio\" name=\"itemType\" value=\"potion\" checked={itemType === \"potion\"} onChange={() => setItemType(\"potion\")}/>\r\n\t\t\t\t\tPotion\r\n\t\t\t\t</label>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<input type=\"radio\" name=\"itemType\" value=\"Wand\" checked={itemType === \"wand\"} onChange={() => setItemType(\"wand\")}/>\r\n\t\t\t\t\tWand\r\n\t\t\t\t</label>\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\tconst findSpell = () => {\r\n\t\tif (itemType === \"potion\"){\r\n\t\t\treturn displaySpells(potionsSpells)\r\n\t\t} else {\r\n\t\t\treturn (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\tItem Search:\r\n\t\t\t\t\t\t<input type=\"text\" name=\"searchTerm\" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} onKeyUp={debouncer}/>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t{displaySpells(viewedSpells)}\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tconst fetchSpells = () => {\r\n\t\tif (searchTerm.length){\r\n\t\t\tgetFetch(`spells?q=${searchTerm}`)\r\n\t\t\t\t.then(data => {\r\n\t\t\t\t\tsetViewedSpells(data)\r\n\t\t\t\t\ttoggleLoading(false)\r\n\t\t\t\t})\r\n\t\t} else {\r\n\t\t\tsetViewedSpells([])\r\n\t\t}\r\n\t}\r\n\r\n\t// const handle = _.debounce(fetchSpells, 800)\r\n\r\n\tconst debouncer = () => {\r\n\t\t// handle()\r\n\t\t// everything on the right side of this assignment is a callback\r\n\t\t// it won't be activated until it gets evoked\r\n\t\tlet search = _.debounce(fetchSpells, 800)\r\n\r\n\t\t// we store previous attempts here\r\n\t\tupdateSearchAttempt(previousAttempt => {\r\n\t\t\t// and cancel them if they exist\r\n\t\t\tif (previousAttempt.cancel){\r\n\t\t\t\tpreviousAttempt.cancel()\r\n\t\t\t}\r\n\t\t\treturn search\r\n\t\t})\r\n\r\n\t\tif (searchTerm.length){\r\n\t\t\ttoggleLoading(true)\r\n\t\t\tsetSelectedSpell({})\r\n\t\t\t// after setting an attempt in our useState\r\n\t\t\t// we evoke it\r\n\t\t\t// which may get canceled if the above code is executed again\r\n\t\t\tsearch()\r\n\t\t} else {\r\n\t\t\ttoggleLoading(false)\r\n\t\t}\r\n\t}\r\n\r\n\tconst displaySpells = (spellArray) => {\r\n\t\tlet spellsWithSpellLevel = spellArray.map(sp => {\r\n\t\t\tlet lowestLevel = sp.spell_list_spells.map(sls => sls.spell_level).sort()[0]\r\n\t\t\treturn {...sp, spell_level: lowestLevel}\r\n\t\t})\r\n\t\tlet sortedSpells = sortedSpellsByLevelAndName(spellsWithSpellLevel)\r\n\t\tlet spellElements = sortedSpells.map(sp => {\r\n\t\t\treturn (\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td>{sp.spell_level}</td>\r\n\t\t\t\t\t<td className=\"underline-hover\" onClick={() => setSpellDetails(sp)}>{sp.name}</td>\r\n\t\t\t\t\t<td><button onClick={() => setSelectedSpell(sp)}>Select</button></td>\r\n\t\t\t\t</tr>\r\n\t\t\t)\r\n\t\t})\r\n\r\n\t\treturn (\r\n\t\t\t<aside>\r\n\t\t\t\t<table>\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>Lvl</th>\r\n\t\t\t\t\t\t\t<th>Name</th>\r\n\t\t\t\t\t\t\t<th></th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t</table>\r\n\t\t\t\t<div style={{overflowY: \"scroll\", height: \"70vh\"}}>\r\n\t\t\t\t\t<table>\r\n\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t{spellElements}\r\n\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t</table>\r\n\t\t\t\t</div>\r\n\t\t\t</aside>\r\n\t\t)\r\n\t}\r\n\r\n\tconst creationForm = () => {\r\n\r\n\t\t\t// caster_level, known, discovered, character_id, spell_id, potion_or_oil\r\n\t\t\tlet selected = null\r\n\t\t\tif (Object.keys(selectedSpell).length){\r\n\t\t\t\tif (itemType === \"potion\"){selected = <p>You are turning <strong>{selectedSpell.name}</strong> into a potion/oil</p>}\r\n\t\t\t\tif (itemType === \"scroll\"){selected = <p>You are writing the <strong>{selectedSpell.name}</strong> spell onto a scroll</p>}\r\n\t\t\t\tif (itemType === \"wand\"){selected = <p>You are imbuing the <strong>{selectedSpell.name}</strong> spell into a wand</p>}\r\n\t\t\t}\r\n\t\t\treturn (\r\n\t\t\t\t<section>\r\n\t\t\t\t\t{selected}\r\n\t\t\t\t\t{(itemType === \"potion\" || itemType === \"wand\") && <><label>\r\n\t\t\t\t\t\tWhat is the caster level for this {itemType}? (Typically its the lowest)<input type=\"number\" name=\"caster_level\" value={customData.caster_level} onChange={formHandler}/>\r\n\t\t\t\t\t</label><br/></>}\r\n\t\t\t\t\t{itemType === \"potion\" && <><label>\r\n\t\t\t\t\t\tIs this a potion or an oil? (Potion is imbibed, oil is applied)<input type=\"text\" name=\"potion_or_oil\" value={customData.potion_or_oil} onChange={formHandler}/>\r\n\t\t\t\t\t</label><br/></>}\r\n\t\t\t\t\t{itemType === \"wand\" && <><label>\r\n\t\t\t\t\t\tHow many charges does this wand have?<input type=\"number\" name=\"charges\" value={customData.charges} max=\"50\" min=\"1\" onChange={formHandler}/>\r\n\t\t\t\t\t</label><br/></>}\r\n\t\t\t\t\t{itemType === \"scroll\" && <><label>\r\n\t\t\t\t\t\tWhat spell level is this?<select name=\"spell_level\" value={customData.spell_level} onChange={formHandler}>\r\n\t\t          <option value=\"0\">0</option>\r\n\t\t          <option value=\"1\">1</option>\r\n\t\t          <option value=\"2\">2</option>\r\n\t\t          <option value=\"3\">3</option>\r\n\t\t          <option value=\"4\">4</option>\r\n\t\t          <option value=\"5\">5</option>\r\n\t\t          <option value=\"6\">6</option>\r\n\t\t          <option value=\"7\">7</option>\r\n\t\t          <option value=\"8\">8</option>\r\n\t\t          <option value=\"9\">9</option>\r\n\t\t        </select>\r\n\t\t\t\t\t</label><br/></>}\r\n\t\t\t\t\t{itemType === \"scroll\" && <><label>\r\n\t\t\t\t\t\tWhat kind of magic is inscribed on this scroll<select name=\"scroll_type\" value={customData.scroll_type} onChange={formHandler}>\r\n\t\t          <option value=\"arcane\">Arcane</option>\r\n\t\t          <option value=\"divine\">Divine</option>\r\n\t\t          <option value=\"psychic\">Psychic</option>\r\n\t\t        </select>\r\n\t\t\t\t\t</label><br/></>}\r\n\t\t\t\t\t{itemType === \"wand\" && <><label>\r\n\t\t\t\t\t\tDoes this wand have a name?<input type=\"text\" name=\"name\" value={customData.name} onChange={formHandler} />\r\n\t\t\t\t\t</label><br/></>}\r\n\t\t\t\t\t{itemType === \"wand\" && <><label>\r\n\t\t\t\t\t\tWhat does this wand look like?<input type=\"text\" name=\"description\" value={customData.description} onChange={formHandler} />\r\n\t\t\t\t\t</label><br/></>}\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\tDoes the player known what this item is? <input type=\"checkbox\" name=\"known\" onChange={formHandler} value={customData.known}/>\r\n\t\t\t\t\t</label><br/>\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\tHas the player discovered that this item is on their character sheet? (Typically, no they need to recieve it in the settings)<input type=\"checkbox\" name=\"discovered\" onChange={formHandler} value={customData.discovered}/>\r\n\t\t\t\t\t</label><br/><br/>\r\n\t\t\t\t\t{selected ? props.campaign.characters.map((ch, idx) => <button onClick={(e) => createFetch(e, ch.id)}>{ch.name}</button>) : <p>Please pick a spell first!</p>}\r\n\t\t\t\t</section>\r\n\t\t\t)\r\n\t}\r\n\r\n\tconst formHandler = (e) => {\r\n\t\tlet duplicateObj = {...customData}\r\n\t\tlet key = e.target.name\r\n\t\tlet value = e.target.value\r\n\t\tif (key === \"caster_level\" || key === \"potion_or_oil\" || key === \"scroll_type\" || key === \"spell_level\" || key === \"charges\" || key === \"name\" || key === \"description\"){\r\n\t\t\tduplicateObj[key] = value\r\n\t\t} else if (key === \"known\" || key === \"discovered\"){\r\n\t\t\tduplicateObj[key] = !duplicateObj[key]\r\n\t\t}\r\n\t\tupdateCustomData(duplicateObj)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<article>\r\n\t\t\t{renderOptions()}\r\n\t\t\t<div style={{display: \"grid\", gridTemplateColumns: \"1fr 2fr 2fr\"}}>\r\n\t\t\t\t{findSpell()}\r\n\t\t\t\t{creationForm()}\r\n\t\t\t\t{Object.keys(spellDetails).length > 0 && <SpellDescription spell={spellDetails} />}\r\n\t\t\t</div>\r\n\t\t</article>\r\n\t)\r\n}\r\n\r\nexport default PotionsScrollsWandsCreator\r\n","import React from 'react'\r\n\r\nimport ItemSearch from './item_search'\r\nimport PotionsScrollsWandsCreator from './potions_scrolls_wands_creator'\r\n\r\nconst ItemsManager = props => {\r\n\r\n\tconst [selectedComponent, setSelectedComponent] = React.useState(\"itemSearch\")\r\n\r\n\tconst renderButtons = () => {\r\n\r\n\t\tconst handleClick = (name) => {\r\n\t\t\tif (selectedComponent !== name){\r\n\t\t\t\tsetSelectedComponent(name)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<nav>\r\n\t\t\t\t<button onClick={() => handleClick(\"itemSearch\")}>Item Search</button>\r\n\t\t\t\t<button onClick={() => handleClick(\"potionsScrollsWands\")}>Potions, Scrolls, Wands</button>\r\n\t\t\t</nav>\r\n\t\t)\r\n\t}\r\n\r\n\tconst renderSelectedComponent = () => {\r\n\t\tswitch(selectedComponent){\r\n\t\t\tcase \"itemSearch\":\r\n\t\t\t\treturn <ItemSearch campaign={props.campaign}/>\r\n\t\t\tcase \"potionsScrollsWands\":\r\n\t\t\t\treturn <PotionsScrollsWandsCreator campaign={props.campaign}/>\r\n\t\t\tdefault:\r\n\t\t\t\treturn null\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<main>\r\n\t\t\t{renderButtons()}\r\n\t\t\t{renderSelectedComponent()}\r\n\t\t</main>\r\n\t)\r\n}\r\n\r\nexport default ItemsManager\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport localhost from '../../localhost'\r\nimport { withRouter } from 'react-router-dom'\r\nimport _ from 'lodash'\r\nimport { sendCampaignWebsocket } from '../../utils/websocket/campaign'\r\n\r\nconst Character = props => {\r\n\r\n  const { name, character_magic_items, id, character_potions, character_scrolls, character_wands } = props.character\r\n  let unknownMagicItems = character_magic_items.filter(cmi => !cmi.known)\r\n  let unknownPotions = character_potions.filter(cp => !cp.known)\r\n  let unknownScrolls = character_scrolls.filter(cs => !cs.known)\r\n  let unknownWands = character_wands.filter(cw => !cw.known)\r\n\r\n  const knownFetch = (id, itemType, name, obj) => {\r\n    fetch(`${localhost}/api/v1/character_magic_items_known/${id}`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify({current_user: props.currentUser.id, item_type: itemType})\r\n    })\r\n      .then(r => r.json())\r\n      .then(data => {\r\n\t\t\t\tsendCampaignWebsocket({message: `You now know that you have a ${name}!`, reciever_id: props.character.id, itemType, data: {...obj, known: true}}, {dm: true}, {knownItem: true})\r\n\r\n      })\r\n  }\r\n\r\n  const renderUnknownMagicItems = () => {\r\n\t\tif (unknownMagicItems.length || unknownPotions.length || unknownScrolls.length || unknownWands.length){\r\n\t\t\treturn (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<h4>Unknown Magic Items</h4>\r\n\t\t\t\t\t{unknownMagicItems.map((u, idx) => {\r\n\t\t\t\t\t\tlet dc = 15 + u.magic_item.caster_level\r\n\t\t\t\t\t\treturn <p key={u.magic_item.id*3-1}>{u.magic_item.name} || DC {dc} Spellcraft <button onClick={() => knownFetch(u.id, \"magic_item\", u.magic_item.name, u)}>Known</button></p>\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t{unknownPotions.map((u, idx) => {\r\n\t\t\t\t\t\tlet dc = 15 + u.caster_level\r\n\t\t\t\t\t\tlet name = `${_.capitalize(u.potion_or_oil)} of ${u.spell.name}`\r\n\t\t\t\t\t\treturn <p key={u.spell.id*3-1}>{name} || DC {dc} Perception <button onClick={() => knownFetch(u.id, \"potion\", name, u)}>Known</button></p>\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t{unknownScrolls.map((u, idx) => {\r\n\t\t\t\t\t\tlet dc = 20 + u.spell_level\r\n\t\t\t\t\t\tlet name = `Scroll of ${u.spell.name}`\r\n\t\t\t\t\t\treturn <p key={u.spell.id*3-1}>{name} || DC {dc} Spellcraft <button onClick={() => knownFetch(u.id, \"scroll\", name, u)}>Known</button></p>\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t{unknownWands.map((u, idx) => {\r\n\t\t\t\t\t\tlet dc = 15 + u.caster_level\r\n\t\t\t\t\t\tlet name = `Wand of ${u.spell.name}`\r\n\t\t\t\t\t\treturn <p key={u.spell.id*3-1}>{name} || DC {dc} Spellcraft <button onClick={() => knownFetch(u.id, \"wand\", name, u)}>Known</button></p>\r\n\t\t\t\t\t})}\r\n\t\t\t\t</>\r\n\t\t\t)\r\n\t\t}\r\n  }\r\n\r\n  return (\r\n    <div className='character-campaign-card'>\r\n      <p><strong className='underline-hover' onClick={() => props.history.push(`/characters/${id}`)}>{name}</strong></p>\r\n      {renderUnknownMagicItems()}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(mapStatetoProps)(Character))\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport CharacterShow from './character'\r\n\r\nconst CharacterContainer = props => {\r\n\r\n  const renderCharacters = () => {\r\n    console.log(props)\r\n    return props.campaign.characters?.map((ch, idx) => {\r\n        return <CharacterShow character={ch}/>\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className='flex'>\r\n      {renderCharacters()}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(CharacterContainer)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport localhost from '../../localhost'\r\nimport { getFetch } from '../../helper_functions/fetches'\r\n\r\nconst SetDate = props => {\r\n\r\n  const [weekday, setWeekday] = React.useState('')\r\n  const [month, setMonth] = React.useState('')\r\n  const [day, setDay] = React.useState(1)\r\n  const [age, setAge] = React.useState(5)\r\n  const [year, setYear] = React.useState(5)\r\n\tconst [calendarData, setCalendarData] = React.useState({\r\n\t\tmonths: [],\r\n\t\tdays: []\r\n\t})\r\n\r\n  React.useEffect(() => {\r\n    console.log(props)\r\n    const { current_weekday, current_month, current_day, current_age, current_year } = props.campaign\r\n    setWeekday(current_weekday)\r\n    setMonth(current_month)\r\n    setDay(current_day)\r\n    setAge(current_age)\r\n    setYear(current_year)\r\n\t\tgetFetch(`calendars/${props.campaign.calendar.id}`)\r\n\t\t\t.then(data => {\r\n\t\t\t\tsetCalendarData(data)\r\n\t\t\t})\r\n  }, [props.campaign])\r\n\r\n  const changeWeekday = (e) => {\r\n    setWeekday(e.target.value)\r\n  }\r\n  const changeMonth = (e) => {\r\n    setMonth(e.target.value)\r\n  }\r\n  const changeDay = (e) => {\r\n    setDay(e.target.value)\r\n  }\r\n  const changeAge = (e) => {\r\n    setAge(e.target.value)\r\n  }\r\n  const changeYear = (e) => {\r\n    setYear(e.target.value)\r\n  }\r\n\r\n  const changeDate = (e) => {\r\n    e.preventDefault()\r\n    fetch(`${localhost}/api/v1/campaigns/${props.campaign.id}`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        current_weekday: weekday,\r\n\t\t\t\tcurrent_month: month,\r\n\t\t\t\tcurrent_day: day,\r\n\t\t\t\tcurrent_age: age,\r\n\t\t\t\tcurrent_year: year\r\n      })\r\n    })\r\n      .then(r => r.json())\r\n      .then(data => {\r\n        if (!data.error){\r\n          props.dispatch({type: 'UPDATE DATE', date: data})\r\n        } else {\r\n          console.log(data)\r\n        }\r\n      })\r\n  }\r\n\r\n  const renderForm = () => {\r\n\t\tlet weekdays = calendarData.days.map(d => <option value={d.name}>{d.name}</option>)\r\n\t\tlet months = calendarData.months.map(m => <option value={m.name}>{m.name}</option>)\r\n    return (\r\n      <form>\r\n        <label>\r\n          <select name=\"weekday\" value={weekday} onChange={changeWeekday}>\r\n\t\t\t\t\t\t{weekdays}\r\n          </select>\r\n        </label>\r\n        <label>\r\n          <select name=\"month\" value={month} onChange={changeMonth}>\r\n            {months}\r\n          </select>\r\n        </label>\r\n        <label>\r\n          <input type=\"number\" name=\"day\" style={{width: '4%'}} value={day} onChange={changeDay}/>\r\n        </label>\r\n        <label>\r\n          <input type=\"text\" name=\"age\" style={{width: '6%'}} value={age} onChange={changeAge}/>\r\n        </label>\r\n        <label>\r\n          <input type=\"number\" name=\"year\" style={{width: '6%'}} value={year} onChange={changeYear}/>\r\n        </label>\r\n        <button onClick={changeDate}>Change Date</button>\r\n      </form>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {renderForm()}\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(SetDate)\r\n","import React from 'react'\r\nimport localhost from '../../localhost'\r\n\r\nconst Ideas = props => {\r\n\r\n  const [amount, setAmount] = React.useState(1)\r\n  const [ideas, setIdeas] = React.useState([])\r\n\r\n  const renderChange = (event) => {\r\n    let n = event.target.value\r\n    setAmount(n)\r\n  }\r\n\r\n  const fetchIdeas = () => {\r\n    fetch(`${localhost}/api/v1/ideas/${amount}`)\r\n      .then(r => r.json())\r\n      .then(setIdeas)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <label>\r\n        Number of Ideas:\r\n        <input type=\"number\" name=\"ideas\" value={amount} onChange={renderChange}/>\r\n      </label>\r\n      <button onClick={fetchIdeas}>Brainstorm</button>\r\n      <ul>\r\n        {ideas.map((idea, i) => <li key={i*3-1}>{i+1}) {idea}</li>)}\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Ideas\r\n","import React from 'react'\r\nimport { getFetch } from '../../../helper_functions/fetches'\r\n\r\nconst CreatureSearch = props => {\r\n\r\n\tconst [searchTerm, setSearchTerm] = React.useState(\"\")\r\n\tconst [creatures, setCreatures] = React.useState([])\r\n\r\n\tconst renderSearchField = () => {\r\n\t\treturn (\r\n\t\t\t<aside>\r\n\t\t\t\t<label forhtml =\"campaign-creature-search\"><strong>Creature Search</strong></label>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<input type=\"text\" id=\"campaign-creature-search\" name=\"campaign-creature-search\" value={searchTerm} onChange={e => setSearchTerm(e.target.value)}/>\r\n\t\t\t\t<button onClick={renderSubmit}>Search</button>\r\n\t\t\t</aside>\r\n\t\t)\r\n\t}\r\n\r\n\tconst renderSubmit = () => {\r\n\t\tgetFetch(\"creatures\")\r\n\t\t\t.then(data => {\r\n\t\t\t\tsetCreatures(data)\r\n\t\t\t})\r\n\t}\r\n\r\n\tconst displayCreatures = () => {\r\n\t\tlet creatureNodes = creatures.map(c => {\r\n\t\t\tlet challengeRating = c.challenge_rating\r\n\t\t\tif (challengeRating < 1){challengeRating = `1/${Math.ceil(1/challengeRating)}`}\r\n\t\t\tlet addButton = props.addCreature ? <button onClick={() => props.addCreature(c)}>Add</button> : null\r\n\t\t\treturn (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<li onClick={() => props.displayCreature(c)}>\r\n\t\t\t\t\t\tCR {challengeRating} | <strong>{c.name}</strong> | {c.size} {c.creature_type.name}\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t{addButton}\r\n\t\t\t\t</>\r\n\t\t\t)\r\n\t\t})\r\n\t\treturn <ul>{creatureNodes}</ul>\r\n\t}\r\n\r\n\treturn (\r\n\t\t<section>\r\n\t\t\t{renderSearchField()}\r\n\t\t\t{displayCreatures()}\r\n\t\t</section>\r\n\t)\r\n}\r\n\r\nexport default CreatureSearch\r\n","import React from 'react'\r\n\r\nimport CreatureSearch from './creature_search'\r\nimport CreatureStatBlock from '../../creature_stat_block'\r\n\r\nconst CreatureContainer = props => {\r\n\r\n\tconst [selectedCreature, setSelectedCreature] = React.useState(null)\r\n\r\n\tconst displayCreature = creature => {\r\n\t\tif (selectedCreature?.id === creature.id){setSelectedCreature(null)}\r\n\t\telse {setSelectedCreature(creature)}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<main id=\"campaign-show-creatures\">\r\n\t\t\t<CreatureSearch displayCreature={displayCreature}/>\r\n\t\t\t{selectedCreature && <CreatureStatBlock creature={selectedCreature}/>}\r\n\t\t</main>\r\n\t)\r\n}\r\n\r\nexport default CreatureContainer\r\n","import React from 'react'\r\n\r\nconst EncounterSearch = props => {\r\n\r\n\tconst renderEncounters = () => {\r\n\t\tlet inc = 1\r\n\t\treturn props.encounters.map((e) => {\r\n\t\t\tlet name = e.name.length > 0 ? e.name : `Untitled Encounter ${inc++}`\r\n\t\t\treturn <button className=\"block-list-btn\" onClick={(ev) => props.selectedEncounter(ev, e)}>{name}</button>\r\n\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<aside>\r\n\t\t\t<button className=\"block-list-btn\" onClick={() => props.toggleEncounterForm(true)}>+ Create Encounter</button>\r\n\t\t\t{renderEncounters()}\r\n\t\t</aside>\r\n\t)\r\n}\r\n\r\nexport default EncounterSearch\r\n","import Store from '../../store'\r\n\r\nconst { getState, dispatch } = Store\r\n\r\nexport const removeEncounterAction = (campaignId, encounterId) => dispatch({type: 'REMOVE ENCOUNTER', campaignId, encounterId})\r\nexport const updateEncounterAction = (campaignId, encounter) => dispatch({type: 'UPDATE ENCOUNTER', campaignId, encounter})\r\n","import React from 'react'\r\nimport { modalAction } from '../../../utils/action_creator/popups'\r\nimport { updateEncounterAction } from '../../../utils/action_creator/current_user'\r\nimport { postFetch, patchFetch } from '../../../utils/fetches'\r\n\r\nimport CreatureSearch from '../creatures/creature_search'\r\n\r\nconst NewEncounter = props => {\r\n\r\n\tconst [form, updateForm] = React.useState({\r\n\t\tname: \"\",\r\n\t\tnotes: \"\"\r\n\t})\r\n\tconst [creatures, updateCreatures] = React.useState([])\r\n\r\n\tReact.useEffect(() => {\r\n\t\tif (props.editingEncounter){\r\n\t\t\tupdateForm({\r\n\t\t\t\tname: props.editingEncounter.name,\r\n\t\t\t\tnotes: props.editingEncounter.notes,\r\n\t\t\t})\r\n\t\t\tupdateCreatures(props.editingEncounter.creatures)\r\n\t\t}\r\n\t}, [props.editingEncounter])\r\n\r\n\tconst editForm = (e) => {\r\n\t\tlet updatedForm = {...form, [e.target.name]: e.target.value}\r\n\t\tupdateForm(updatedForm)\r\n\t}\r\n\r\n\tconst addCreature = (creature) => {\r\n\t\tlet existingCreature = creatures.find(cr => cr.creature.id === creature.id)\r\n\t\tlet creaturesDupe = [...creatures]\r\n\t\tif (existingCreature){\r\n\t\t\tcreaturesDupe = creaturesDupe.map(cr => {\r\n\t\t\t\tif (cr.creature.id === creature.id){\r\n\t\t\t\t\treturn {creature: cr.creature, count: cr.count+1}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn cr\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tcreaturesDupe.push({creature, count: 1})\r\n\t\t}\r\n\t\tupdateCreatures(creaturesDupe)\r\n\t}\r\n\r\n\tconst subtractCreature = (e, creature, count) => {\r\n\t\te.preventDefault()\r\n\t\tlet creaturesDupe = [...creatures]\r\n\t\tif (count > 1){\r\n\t\t\tcreaturesDupe = creaturesDupe.map(cr => {\r\n\t\t\t\tif (cr.creature.id === creature.id){\r\n\t\t\t\t\treturn {creature: cr.creature, count: cr.count-1}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn cr\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tcreaturesDupe = creaturesDupe.filter(cr => cr.creature.id !== creature.id)\r\n\t\t}\r\n\t\tupdateCreatures(creaturesDupe)\r\n\t}\r\n\r\n\tconst renderCreatures = () => {\r\n\t\tlet creatureNodes = creatures.map(cr => {\r\n\t\t\tlet challengeRating = cr.creature.challenge_rating\r\n\t\t\tif (challengeRating < 1){challengeRating = `1/${Math.ceil(1/challengeRating)}`}\r\n\t\t\tlet subtractBtn = <button onClick={(e) => subtractCreature(e, cr.creature, cr.count)}>Subtract</button>\r\n\t\t\treturn (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<li onClick={() => modalAction(\"statBlock\", cr.creature)}>\r\n\t\t\t\t\t\tCR {challengeRating} | <strong>{cr.creature.name}</strong> | {cr.creature.size} {cr.creature.creature_type.name} {cr.count > 1 ? <strong>x{cr.count}</strong> : null}\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t{subtractBtn}\r\n\t\t\t\t</>\r\n\t\t\t)\r\n\t\t})\r\n\t\treturn <ul style={{gridArea: \"creatures\"}}>{creatureNodes}</ul>\r\n\t}\r\n\r\n\tconst renderForm = () => {\r\n\t\tlet submitButton = props.editingEncounter ? <button>Update Encounter</button> : <button>Create Encounter</button>\r\n\t\tlet formSubmit = props.editingEncounter ? updateEncounter : createEncounter\r\n\t\treturn (\r\n\t\t\t<form id=\"campaign-new-encounter\" onSubmit={formSubmit}>\r\n\t\t\t\t<label style={{gridArea: \"name\"}}>\r\n\t\t\t\t\t<strong>Encounter Name </strong>\r\n\t\t\t\t\t<input type=\"text\" name=\"name\" value={form.name} onChange={editForm}/>\r\n\t\t\t\t</label>\r\n\t\t\t\t<button style={{gridArea: \"close\"}} onClick={() => props.toggleEncounterForm(false)}>X</button>\r\n\t\t\t\t<label style={{gridArea: \"notes\"}}>Notes\r\n\t\t\t\t\t<textarea type=\"text\" name=\"notes\" rows=\"10\" cols=\"60\" value={form.notes} onChange={editForm}/>\r\n\t\t\t\t</label>\r\n\t\t\t\t{renderCreatures()}\r\n\t\t\t\t{submitButton}\r\n\t\t\t</form>\r\n\t\t)\r\n\t}\r\n\r\n\tconst createEncounter = (e) => {\r\n\t\te.preventDefault()\r\n\t\tlet campaignId = window.location.href.split(\"campaigns/\")[1]\r\n\t\tlet body = {\r\n\t\t\t...form,\r\n\t\t\tcreatures,\r\n\t\t\tcampaign_id: campaignId\r\n\t\t}\r\n\r\n\t\tpostFetch(\"encounters\", body)\r\n\t\t\t.then(data => {\r\n\t\t\t\tif (data.response){\r\n\t\t\t\t\tdebugger\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(\"Unable to create encounter\")\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t}\r\n\r\n\tconst updateEncounter = e => {\r\n\t\te.preventDefault()\r\n\r\n\t\tlet body = {\r\n\t\t\t...form,\r\n\t\t\tcreatures,\r\n\t\t}\r\n\r\n\t\tpatchFetch(`encounters/${props.editingEncounter.id}`, body)\r\n\t\t\t.then(data => {\r\n\t\t\t\tif (data.response){\r\n\t\t\t\t\tlet campaignId = window.location.href.split(\"campaigns/\")[1]\r\n\t\t\t\t\tupdateEncounterAction(campaignId, {...body, id: props.editingEncounter.id})\r\n\t\t\t\t\tprops.resolveEditEncounter({...body, id: props.editingEncounter.id})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(\"Unable to update encounter\")\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<main>\r\n\t\t\t\t{renderForm()}\r\n\t\t\t</main>\r\n\t\t\t<aside>\r\n\t\t\t\t<CreatureSearch displayCreature={(creature) => modalAction(\"statBlock\", creature)} addCreature={addCreature}/>\r\n\t\t\t</aside>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default NewEncounter\r\n","import Store from '../../store'\r\n\r\nconst { getState, dispatch } = Store\r\n\r\nexport const removeEncounter = (campaignId, encounterId) => dispatch({type: 'REMOVE ENCOUNTER', campaignId, encounterId})\r\n","import React from 'react'\r\nimport { modalAction } from '../../../helper_functions/action_creator/popups'\r\nimport { removeEncounter } from '../../../helper_functions/action_creator/current_user'\r\nimport { deleteFetch } from '../../../helper_functions/fetches'\r\n\r\nconst EncounterDetails = props => {\r\n\r\n\tconst deleteEncounter = (e) => {\r\n\t\te.preventDefault()\r\n\r\n\t\tdeleteFetch(`encounters/${props.encounter.id}`)\r\n\t\t\t.then(data => {\r\n\t\t\t\tconst url = window.location.pathname\r\n\t\t\t\tconst campaignId = parseInt(url.substring(url.lastIndexOf('/') + 1))\r\n\t\t\t\tremoveEncounter(campaignId, props.encounter.id)\r\n\t\t\t})\r\n\t}\r\n\r\n\tconst renderEncounter = () => {\r\n\r\n\t\tconst { name, notes, description, creatures } = props.encounter\r\n\r\n\t\tconst domCreatures = []\r\n\t\tcreatures.forEach(cr => {\r\n\t\t\tlet { name, size, creature_type: creatureType, challenge_rating } = cr.creature\r\n\t\t\tlet challengeRating = challenge_rating\r\n\t\t\tif (challengeRating < 1){challengeRating = `1/${Math.ceil(1/challengeRating)}`}\r\n\t\t\tlet node = (\r\n\t\t\t\t<li onClick={() => modalAction(\"statBlock\", cr.creature)}>\r\n\t\t\t\t\tCR {challengeRating} | <strong>{name}</strong> | {size} {creatureType.name}\r\n\t\t\t\t</li>\r\n\t\t\t)\r\n\t\t\tfor (let i = 1; i <= cr.count; i++){\r\n\t\t\t\tdomCreatures.push(node)\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<h1 style={{gridArea: \"name\"}}>{name || \"Untited Encounter\"}</h1>\r\n\t\t\t\t<div style={{gridArea: \"buttons\"}}>\r\n\t\t\t\t\t<button onClick={(e) => props.startEncounter(e, props.encounter)}>Start Encounter</button>\r\n\t\t\t\t\t<button onClick={() => props.editEncounter(props.encounter)}>Edit</button>\r\n\t\t\t\t\t<button onClick={deleteEncounter}>Delete</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style={{gridArea: \"creatures\"}}>\r\n\t\t\t\t\t{domCreatures}\r\n\t\t\t\t</div>\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<main id=\"campaign-show-encounter\">\r\n\t\t\t\t{renderEncounter()}\r\n\t\t\t</main>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default EncounterDetails\r\n","import React from 'react'\r\n\r\nimport EncounterSearch from './encounter_search'\r\nimport NewEncounter from './new_encounter'\r\nimport EncounterDetails from './encounter_details'\r\n\r\nconst EncounterContainer = props => {\r\n\r\n\tconst [encounterForm, toggleEncounterForm] = React.useState(false)\r\n\tconst [chosenEncounter, setChosenEncounter] = React.useState({})\r\n\tconst [editingEncounter, setEditingEncounter] = React.useState(null)\r\n\r\n\tconst selectedEncounter = (e, encounter) => {\r\n\t\te.preventDefault()\r\n\r\n\t\tif (chosenEncounter.id !== encounter.id){\r\n\t\t\tsetChosenEncounter(encounter)\r\n\t\t\ttoggleEncounterForm(false)\r\n\t\t} else {\r\n\t\t\tsetChosenEncounter({})\r\n\t\t}\r\n\t}\r\n\r\n\tconst renderNewForm = (value) => {\r\n\t\tsetChosenEncounter({})\r\n\t\ttoggleEncounterForm(value)\r\n\t}\r\n\r\n\tconst editEncounter = (encounter) => {\r\n\t\tsetEditingEncounter(encounter)\r\n\t\tsetChosenEncounter({})\r\n\t\ttoggleEncounterForm(true)\r\n\t}\r\n\r\n\tconst resolveEditEncounter = (encounter) => {\r\n\t\tsetEditingEncounter(null)\r\n\t\tsetChosenEncounter(encounter)\r\n\t\ttoggleEncounterForm(false)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<main id=\"campaign-show-encounters\">\r\n\t\t\t<EncounterSearch toggleEncounterForm={renderNewForm} encounters={props.encounters} selectedEncounter={selectedEncounter}/>\r\n\t\t\t{encounterForm && <NewEncounter toggleEncounterForm={toggleEncounterForm} editingEncounter={editingEncounter} resolveEditEncounter={resolveEditEncounter}/>}\r\n\t\t\t{chosenEncounter.id && <EncounterDetails encounter={chosenEncounter} editEncounter={editEncounter} startEncounter={props.startEncounter}/>}\r\n\t\t</main>\r\n\t)\r\n}\r\n\r\nexport default EncounterContainer\r\n","import React from 'react'\r\nimport { averageHP } from '../../../utils/calculations/creatures'\r\nimport { sendCampaignWebsocket } from '../../../utils/websocket/campaign'\r\n\r\nconst ActiveEncounterInitiative = props => {\r\n\r\n\tconst [activeParticipants, setParticipants] = React.useState([])\r\n\tconst [askForInitiative, setAsk] = React.useState(false)\r\n\r\n\tReact.useEffect(() => {\r\n\t\tlet initCreatures = props.creatures.map(cr => {\r\n\t\t\treturn {...cr, initiative: null}\r\n\t\t})\r\n\t\tsetParticipants(initCreatures)\r\n\t}, [props.creatures])\r\n\r\n\tconst iniatiateEncounterClick = () => {\r\n\t\tsendCampaignWebsocket({message: \"Combat is starting! Please roll initiative!\", askForInitiative: true}, {dm: true})\r\n\t}\r\n\r\n\tconst initiativeOrder = () => {\r\n\t\tlet sortedParticipants = []\r\n\r\n\t\tlet uninitiatedParticipants = activeParticipants.filter(p => p.initiative === null)\r\n\t\tsortedParticipants.push(...uninitiatedParticipants)\r\n\r\n\t\tlet initiatedParticipants = activeParticipants.filter(p => typeof p.initiative === \"number\").sort((a, b) => a.initiative > b.initiative)\r\n\t\tsortedParticipants.push(...initiatedParticipants)\r\n\r\n\t\tlet nodeParticipants = []\r\n\t\tsortedParticipants.forEach(p => {\r\n\t\t\tlet init = p.initiative !== null ? p.initiative : <input type=\"number\" placeholder=\"-\"/>\r\n\t\t\tfor (let i = 0; i < p.count; i++){\r\n\t\t\t\tlet hp = averageHP(p.creature.hit_dice, p.creature.creature_type.hit_die, p.creature.constitution)\r\n\t\t\t\tnodeParticipants.push(\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<strong onClick={() => props.seeDetails(p.creature)}>{p.creature.name}</strong> | Init: {init} | HP: {hp}\r\n\t\t\t\t\t</li>\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t})\r\n\t\tif (!askForInitiative){\r\n\t\t\tnodeParticipants.push(\r\n\t\t\t\t<button onClick={iniatiateEncounterClick} >Ask Players for Initiative (Start Connection)</button>\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn nodeParticipants\r\n\t}\r\n\r\n\treturn (\r\n\t\t<ul>\r\n\t\t\t{initiativeOrder()}\r\n\t\t</ul>\r\n\t)\r\n}\r\n\r\nexport default ActiveEncounterInitiative\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport ActiveEncounterInitiative from './active_encounter_initiative'\r\nimport CreatureStatBlock from '../../creature_stat_block'\r\n\r\nconst ActiveEncounter = props => {\r\n\r\n\tconst encounter = useSelector(state => state.activeEncounter)\r\n\tconst [participant, setParticipant] = React.useState({})\r\n\r\n\tconst seeDetails = (creature) => {\r\n\t\tif (participant.id === creature.id){\r\n\t\t\tsetParticipant({})\r\n\t\t} else {\r\n\t\t\tsetParticipant(creature)\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<main id=\"campaign-show-active-encounter\">\r\n\t\t\t<ActiveEncounterInitiative creatures={encounter.creatures} seeDetails={seeDetails} campaign={props.campaign}/>\r\n\t\t\t{participant.id && <aside><CreatureStatBlock creature={participant} /></aside>}\r\n\t\t\t<p>I'm your active encounter</p>\r\n\t\t\t<button onClick={props.endEncounter}>End</button>\r\n\t\t\t<button>Delete</button>\r\n\t\t</main>\r\n\t)\r\n}\r\n\r\nexport default ActiveEncounter\r\n","import Store from '../../store'\r\n\r\nconst { getState, dispatch } = Store\r\n\r\nexport const startEncounterAction = (encounter) => dispatch({type: \"START ENCOUNTER\", encounter})\r\nexport const endEncounterAction = () => dispatch({type: \"END ENCOUNTER\"})\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport CampaignShowTabs from './campaign_show_tabs'\r\n\r\n// import ItemSearch from '../components/campaign/item_search'\r\nimport ItemsContainer from '../components/campaign/items_manager/items_container'\r\nimport CharacterContainer from '../components/campaign/characters'\r\nimport SetDate from '../components/campaign/set_date'\r\nimport Ideas from '../components/campaign/ideas'\r\nimport CreatureContainer from '../components/campaign/creatures/creature_container'\r\nimport EncounterContainer from '../components/campaign/encounters/encounter_container'\r\nimport ActiveEncounter from '../components/campaign/encounters/active_encounter'\r\nimport { initializeCampaignWebsocket } from '../utils/websocket/campaign'\r\nimport { startEncounterAction, endEncounterAction } from '../utils/action_creator/active_encounter'\r\n\r\n\r\nconst CampaignShow = props => {\r\n\r\n\tconst [activeTab, setActiveTab] = React.useState(\"Characters\")\r\n\r\n\tconst url = props.history.location.pathname\r\n\tconst campaignId = parseInt(url.substring(url.lastIndexOf('/') + 1))\r\n\tconst campaign = !!props.currentUser && props.currentUser.campaigns.find(c => c.id === campaignId)\r\n\r\n\tReact.useEffect(() => {\r\n\t\tif (campaign){\r\n\t\t\tinitializeCampaignWebsocket(null, {dm: true, websocketCode: campaign.websocket_code})\r\n\t\t}\r\n\t}, [campaign])\r\n\r\n\r\n\tconst renderTab = () => {\r\n\t\tlet content = null\r\n\t\tswitch (activeTab){\r\n\t\t\tcase \"Characters\":\r\n\t\t\t\tcontent = (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<CharacterContainer campaign={campaign}/>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)\r\n\t\t\t\tbreak\r\n\t\t\tcase \"Item Search\":\r\n\t\t\t\tcontent = (\r\n\t\t\t\t\t<ItemsContainer campaign={campaign}/>\r\n\t\t\t\t)\r\n\t\t\t\tbreak\r\n\t\t\tcase \"Details\":\r\n\t\t\t\tcontent = (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<article>\r\n\t\t\t\t\t\t\t<span><p>Setting: {campaign.setting}</p></span>\r\n\t\t\t\t\t\t\t<span><p>Theme: {campaign.theme}</p></span>\r\n\t\t\t\t\t\t\t<span><p>notes: {campaign.custom_notes}</p></span>\r\n\t\t\t\t\t\t</article>\r\n\t\t\t\t\t\t<SetDate campaign={campaign}/>\r\n\t\t\t\t\t\t<Ideas/>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)\r\n\t\t\t\tbreak\r\n\t\t\tcase \"Creatures\":\r\n\t\t\t\tcontent = <CreatureContainer />\r\n\t\t\t\tbreak\r\n\t\t\tcase \"Encounters\":\r\n\t\t\t\tcontent = <EncounterContainer encounters={campaign.encounters} startEncounter={startEncounter}/>\r\n\t\t\t\tbreak\r\n\t\t\tcase `${props.activeEncounter.name ?? null}`:\r\n\t\t\t\tcontent = <ActiveEncounter endEncounter={endEncounter} campaign={campaign}/>\r\n\t\t\t\tbreak\r\n\t\t\tdefault:\r\n\t\t\t\tbreak\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<section style={{margin: \"1em\"}}>\r\n\t\t\t\t<h1>{campaign.name}</h1>\r\n\t\t\t\t<CampaignShowTabs renderTabClick={setActiveTab} activeTab={activeTab} encounter={props.activeEncounter}/>\r\n\t\t\t\t{content}\r\n\t\t\t</section>\r\n\t\t)\r\n\t}\r\n\r\n\tconst startEncounter = (e, incomingEncounter) => {\r\n\t\te.preventDefault()\r\n\t\tsetActiveTab(incomingEncounter.name)\r\n\t\tinitializeCampaignWebsocket(null, {dm: true, websocketCode: campaign.websocket_code, askForInitiative: true})\r\n\t\tstartEncounterAction(incomingEncounter)\r\n\t}\r\n\r\n\tconst endEncounter = (e) => {\r\n\t\te.preventDefault()\r\n\t\tsetActiveTab(\"Encounters\")\r\n\t\tendEncounterAction()\r\n\t}\r\n\r\n\r\n  if (!props.currentUser){\r\n    return null\r\n  }\r\n  return (\r\n    <>\r\n\t\t\t{renderTab()}\r\n\t\t</>\r\n  )\r\n\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n\t\tactiveEncounter: state.activeEncounter\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(CampaignShow)\r\n","import React from 'react';\r\nimport _ from 'lodash'\r\n\r\nconst Classes = props => {\r\n\r\n  const [displayAvailableClasses, toggleAvailableClasses] = React.useState(false)\r\n\r\n  let displayAllClasses = null\r\n\r\n  if (displayAvailableClasses){\r\n    let checkboxClasses = []\r\n    // make an array of sources, sorted by code\r\n    let sortedClassesBySource = props.classes.sort((r1, r2) => r1.source.code >= r2.source.code ? 1 : -1)\r\n    let sources = _.uniq(sortedClassesBySource.map(r => r.source.title))\r\n    // \"custom\" has no code, so it gets sorted funny\r\n    let removedCustom = sources.filter(s => s !== \"Custom\")\r\n    if (removedCustom.length + 1 === sources.length){\r\n      sources = removedCustom\r\n      sources.push(\"Custom\")\r\n    }\r\n    console.log(sources)\r\n    // go through that array\r\n    checkboxClasses = sources.map((source, i) => {\r\n      let onlyThoseSpecificClasses = props.classes.filter(r => r.source.title === source)\r\n      let classesDOMNode = onlyThoseSpecificClasses.map(cl => {\r\n        // display valid checkboxes\r\n        return (\r\n          <span key={cl.id * 3 - 1}>\r\n            <input type=\"checkbox\" id={cl.name} name={cl.name} value={cl.id} checked={props.selectedClassIds.includes(cl.id)} onChange={() => toggleSelectedClasses(cl.id)}/>\r\n            <label htmlFor={cl.name}> {cl.name}</label>\r\n          </span>\r\n        )\r\n      })\r\n\r\n      // give that array a h4 with the title (subtitle of prevalence)\r\n      return (\r\n        <section key={i * 3 + 1}>\r\n          <h4>{source}:</h4>\r\n          <section className=\"form-races-checkbox-options\">{classesDOMNode}</section>\r\n        </section>\r\n      )\r\n    })\r\n    displayAllClasses = <div id=\"new-campaign-form-all-races\">{checkboxClasses}</div>\r\n  }\r\n\r\n\r\n  const toggleSelectedClasses = (id) => {\r\n    let updatedIdArray = props.selectedClassIds.filter(sci => sci !== id)\r\n    if (updatedIdArray.length === props.selectedClassIds.length){\r\n      updatedIdArray.push(id)\r\n    }\r\n    props.updateSelectedClassIds(updatedIdArray)\r\n  }\r\n\r\n  const changeDisplay = () => {\r\n    if (!displayAvailableClasses){\r\n      props.updateSelectedClassIds(props.classes.map(cl => cl.id))\r\n    }\r\n    toggleAvailableClasses(!displayAvailableClasses)\r\n  }\r\n\r\n  const display = () => {\r\n    if (!props.classes.length){\r\n      return <>{props.loadingDie}</>\r\n    } else {\r\n      return (\r\n        <>\r\n          <input type=\"checkbox\" id=\"all-classes\" name=\"all-classes\" value=\"All\" checked={!displayAvailableClasses} onChange={changeDisplay}/>\r\n          <label htmlFor=\"all-classes\"> All Classes</label><br/>\r\n          {displayAllClasses}\r\n        </>\r\n      )\r\n    }\r\n  }\r\n\r\n  return (\r\n    <section id=\"new-campaign-form-classes\" className=\"standard-container-bubble\">\r\n      <h3 style={{marginBottom: '0'}}>Available Classes</h3>\r\n      {display()}\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default Classes\r\n","import React from 'react';\r\nimport _ from 'lodash'\r\n\r\nconst Races = props => {\r\n\r\n  const [displayAvailableRaces, toggleAvailableRaces] = React.useState(false)\r\n\r\n  let displayAllRaces = null\r\n\r\n  if (displayAvailableRaces){\r\n    let checkboxRaces = []\r\n    // make an array of sources, sorted by code\r\n    let sortedRacesBySource = props.races.sort((cl1, cl2) => cl1.source.code >= cl2.source.code ? 1 : -1)\r\n    let sources = _.uniq(sortedRacesBySource.map(cl => cl.source.title))\r\n    // \"custom\" has no code, so it gets sorted funny\r\n    let removedCustom = sources.filter(s => s !== \"Custom\")\r\n    if (removedCustom.length + 1 === sources.length){\r\n      sources = removedCustom\r\n      sources.push(\"Custom\")\r\n    }\r\n    console.log(sources)\r\n    // go through that array\r\n    checkboxRaces = sources.map((source, i) => {\r\n      let onlyThoseSpecificRaces = props.races.filter(cl => cl.source.title === source)\r\n      let racesDOMNode = onlyThoseSpecificRaces.map(race => {\r\n        // display valid checkboxes\r\n        return (\r\n          <span key={race.id * 3 - 1}>\r\n            <input type=\"checkbox\" id={race.name} name={race.name} value={race.id} checked={props.selectedRaceIds.includes(race.id)} onChange={() => toggleSelectedRaces(race.id)}/>\r\n            <label htmlFor={race.name}> {race.name}</label>\r\n          </span>\r\n        )\r\n      })\r\n\r\n      // give that array a h4 with the title (subtitle of prevalence)\r\n      return (\r\n        <section key={i * 3 + 1}>\r\n          <h4>{source}:</h4>\r\n          <section className=\"form-races-checkbox-options\">{racesDOMNode}</section>\r\n        </section>\r\n      )\r\n    })\r\n    displayAllRaces = <div id=\"new-campaign-form-all-races\">{checkboxRaces}</div>\r\n  }\r\n\r\n  const toggleSelectedRaces = (id) => {\r\n    let updatedIdArray = props.selectedRaceIds.filter(sri => sri !== id)\r\n    if (updatedIdArray.length === props.selectedRaceIds.length){\r\n      updatedIdArray.push(id)\r\n    }\r\n    props.updateSelectedRaceIds(updatedIdArray)\r\n  }\r\n\r\n  const changeDisplay = () => {\r\n    if (!displayAvailableRaces){\r\n      props.updateSelectedRaceIds(props.races.map(r => r.id))\r\n    }\r\n    toggleAvailableRaces(!displayAvailableRaces)\r\n  }\r\n\r\n  const display = () => {\r\n    if (!props.races.length){\r\n      return <>{props.loadingDie}</>\r\n    } else {\r\n      return (\r\n        <>\r\n          <input type=\"checkbox\" id=\"all-races\" name=\"all-races\" value=\"All\" checked={!displayAvailableRaces} onChange={changeDisplay}/>\r\n          <label htmlFor=\"all-races\"> All Ancestries</label><br/>\r\n          {displayAllRaces}\r\n        </>\r\n      )\r\n    }\r\n  }\r\n\r\n  return (\r\n    <section id=\"new-campaign-form-races\" className=\"standard-container-bubble\">\r\n      <h3 style={{marginBottom: '0'}}>Available Ancestries</h3>\r\n      {display()}\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default Races\r\n","import React from 'react'\r\n\r\nconst Calendar = props => {\r\n\r\n  const [showMonths, toggleMonths] = React.useState(false)\r\n  const [showDays, toggleDays] = React.useState(false)\r\n\r\n  let selectedCalendar = null\r\n\r\n  if (props.selectedCalendarId !== \"0\"){\r\n    let calendar = props.calendars.find(c => c.id === parseInt(props.selectedCalendarId))\r\n    console.log(calendar)\r\n    let selectedMonth = props.selectedMonth ? calendar.months.find(m => m.name === props.selectedMonth) : 0\r\n    selectedCalendar =  (\r\n      <p id=\"new-campaign-starting-date\">\r\n        <strong style={{gridArea: 'start'}}>Starting Date:</strong>\r\n        <label htmlFor=\"new-campaign-calender-month\" name=\"new-campaign-calender-month\">Month:</label>\r\n        <select id=\"new-campaigin-calendar-month\" name=\"new-campaign-calendar-month\" value={props.selectedMonth} onChange={(e) => props.updateMonth(e.target.value)}>\r\n          <option value=\"\">Month</option>\r\n          {calendar.months.map((m, i) => <option key={m.id * 3 - 1} value={m.name}>{i+1}. {m.name} ({m.num_of_days ? m.num_of_days : \"??\"} days)</option>)}\r\n        </select>\r\n        <label htmlFor=\"new-campaign-calender-day\" name=\"new-campaign-calender-day\">Weekday:</label>\r\n        <select id=\"new-campaigin-calendar-day\" name=\"new-campaign-calendar-day\" value={props.selectedDay} onChange={(e) => props.updateDay(e.target.value)}>\r\n          <option value=\"\">Day</option>\r\n          {calendar.days.map((d, i) => <option key={d.id * 3 - 1} value={d.name}>{i+1}. {d.name}</option>)}\r\n        </select>\r\n        <label htmlFor=\"new-campaign-calendar-day-number\" name=\"new-campaign-calendar-day-number\">Day:</label>\r\n        <input\r\n          type=\"number\"\r\n          id=\"new-campaign-calendar-day-number\"\r\n          name=\"new-campaign-calendar-day-number\"\r\n          value={props.selectedDayNumber}\r\n          onChange={(e) => props.updateDayNumber(e.target.value)}/>\r\n        <label htmlFor=\"new-campaign-calendar-year\" name=\"new-campaign-calendar-year\">Year:</label>\r\n        <input\r\n          type=\"number\"\r\n          id=\"new-campaign-calendar-year\"\r\n          name=\"new-campaign-calendar-year\"\r\n          value={props.selectedYear}\r\n          onChange={(e) => props.updateYear(e.target.value)}/>\r\n        <label htmlFor=\"new-campaign-calendar-age\" name=\"new-campaign-calendar-age\">Age:</label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"new-campaign-calendar-age\"\r\n          name=\"new-campaign-calendar-age\"\r\n          value={props.selectedAge}\r\n          placeholder=\"3rd Age, Cenozoic Period, BCE, etc.\"\r\n          onChange={(e) => props.updateAge(e.target.value)}/>\r\n      </p>\r\n    )\r\n  }\r\n  // <h4 onClick={() => toggle(\"month\")}>Months ({calendar.months.length})</h4>\r\n  // {showMonths && <ol style={{fontSize: \"10px\", overflowY: \"scroll\", maxHeight: \"10vh\"}}>{calendar.months.map(m => <li key={m.id * 3 - 1}>{m.name}</li>)}</ol>}\r\n  // <h4 onClick={() => toggle(\"day\")}>Days ({calendar.days.length})</h4>\r\n  // {showDays && <ol style={{fontSize: \"10px\", overflowY: \"scroll\", maxHeight: \"10vh\"}}>{calendar.days.map(d => <li key={d.id * 3 - 1}>{d.name}</li>)}</ol>}\r\n\r\n  const toggle = (type) => {\r\n    if (type === \"month\"){\r\n      toggleMonths(!showMonths)\r\n      toggleDays(false)\r\n    } else if (type === \"day\"){\r\n      toggleDays(!showDays)\r\n      toggleMonths(false)\r\n    }\r\n  }\r\n\r\n\r\n  const display = () => {\r\n    if (!props.calendars.length){\r\n      return <>{props.loadingDie}</>\r\n    } else {\r\n      return (\r\n        <>\r\n          <select id=\"new-campaigin-calendar\" name=\"new-campaign-calendar\" value={props.selectedCalendarId} onChange={(e) => props.updateSelectedCalendarId(e.target.value)}>\r\n            <option value=\"0\">Select A Calendar</option>\r\n            {props.calendars.map(c => <option key={c.id * 3 - 1} value={c.id}>{c.name}</option>)}\r\n          </select>\r\n\r\n          {selectedCalendar}\r\n        </>\r\n      )\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <section id=\"new-campaign-form-calendar\" className=\"standard-container-bubble\">\r\n\r\n      <label htmlFor=\"new-campaign-calendar\"><h3>Calendar</h3></label>\r\n      {display()}\r\n\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default Calendar\r\n","import React from 'react'\r\n\r\nconst Setting = props => {\r\n\r\n  const [nameField, toggleName] = React.useState(false)\r\n  const [settingField, toggleSetting] = React.useState(false)\r\n  const [themeField, toggleTheme] = React.useState(false)\r\n\r\n  const nameEl = React.useRef(null);\r\n  const settingEl = React.useRef(null);\r\n  const themeEl = React.useRef(null);\r\n\r\n\r\n  return (\r\n    <section id=\"new-campaign-form-setting\" className=\"standard-container-bubble\">\r\n      <p style={{textAlign: 'left'}}>\r\n        <label htmlFor=\"new-campaign-name\" onClick={() => toggleName(true)}><strong style={{fontSize: '1.2rem', fontFamily: \"Lato,'Helvetica Neue',Arial,Helvetica,sans-serif\", color: nameField && \"grey\"}}>Campaign Name</strong></label>: <strong>{props.name}</strong>\r\n        {nameField && <input type=\"text\" ref={nameEl} id=\"new-campaign-name\" name=\"new-campaign-name\" value={props.name} style={{position: 'absolute', top: '-25px'}} onChange={(e) => props.setName(e.target.value)} onBlur={(() => toggleName(false))}/>}\r\n      </p>\r\n      <p style={{textAlign: 'left'}}>\r\n        <label htmlFor=\"new-campaign-setting\" onClick={() => toggleSetting(true)}><strong style={{fontSize: '1.2rem', fontFamily: \"Lato,'Helvetica Neue',Arial,Helvetica,sans-serif\", color: settingField && \"grey\"}}>Setting</strong></label>: <strong>{props.setting}</strong>\r\n        {settingField && <input type=\"text\" ref={settingEl} id=\"new-campaign-setting\" name=\"new-campaign-setting\" value={props.setting} style={{position: 'absolute', top: '-25px'}} onChange={(e) => props.setSetting(e.target.value)} onBlur={(() => toggleSetting(false))}/>}\r\n      </p>\r\n      <p style={{textAlign: 'left'}}>\r\n        <label htmlFor=\"new-campaign-theme\" onClick={() => toggleTheme(true)}><strong style={{fontSize: '1.2rem', fontFamily: \"Lato,'Helvetica Neue',Arial,Helvetica,sans-serif\", color: themeField && \"grey\"}}>Theme</strong></label>: <strong style={{fontWeight: \"bold\"}}>{props.theme}</strong>\r\n        {themeField && <input type=\"text\" ref={themeEl} id=\"new-campaign-theme\" name=\"new-campaign-theme\" value={props.theme} style={{position: 'absolute', top: '-25px'}} onChange={(e) => props.setTheme(e.target.value)} onBlur={(() => toggleTheme(false))}/>}\r\n      </p>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default Setting\r\n","import React from 'react'\r\n\r\nconst Details = props => {\r\n\r\n  const [startingLvlField, toggleStartingLvl] = React.useState(false)\r\n  const [customNotesField, toggleCustomNotes] = React.useState(false)\r\n\r\n  const startingLvlEl = React.useRef(null);\r\n  const customNotesEl = React.useRef(null);\r\n\r\n  let rows = 1\r\n  if (customNotesEl.current){\r\n    let stillAdding = true\r\n    let textLength = customNotesEl.current.value.length\r\n    let averageCharactersInRow = customNotesEl.current.offsetWidth/7.5\r\n\r\n    while (stillAdding){\r\n      if (textLength > averageCharactersInRow){\r\n        textLength -= averageCharactersInRow\r\n        rows++\r\n      } else {\r\n        stillAdding = false\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  const onBlur = () => {\r\n    toggleCustomNotes(false)\r\n    props.toggleVirtualKeyboard(false)\r\n  }\r\n\r\n  const moreInfoSidebar = () => {\r\n    if (parseInt(props.selectedSkillsetId)){\r\n      let skillset = props.skillsets.find(sk => sk.id == props.selectedSkillsetId)\r\n      return ( <span onClick={() => props.editSidebar(true, 'bottom', 'skillset', skillset)}>More Info</span>)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <section id=\"new-campaign-form-details\" className=\"standard-container-bubble\">\r\n      <p style={{textAlign: 'left'}}>\r\n        <label htmlFor=\"new-campaign-starting-level\"\r\n        onClick={() => toggleStartingLvl(true)}>\r\n          <strong\r\n          style={{fontSize: '1.2rem', fontFamily: \"Lato,'Helvetica Neue',Arial,Helvetica,sans-serif\", color: startingLvlField && \"grey\"}}>\r\n            Starting Level\r\n          </strong>\r\n        </label>: <strong>\r\n          {props.startingLvl}\r\n        </strong>\r\n        {startingLvlField && <input\r\n          type=\"number\"\r\n          ref={startingLvlEl}\r\n          id=\"new-campaign-starting-level\"\r\n          name=\"new-campaign-starting-level\"\r\n          value={props.startingLvl}\r\n          min=\"1\"\r\n          max=\"20\"\r\n          style={{position: 'absolute', top: '-25px'}}\r\n          onChange={(e) => props.setStartingLvl(e.target.value)}\r\n          onBlur={(() => toggleStartingLvl(false))}/>\r\n        }\r\n        {props.startingLvlError && <span id=\"decay-animation\"> Level must be between 1 and 20</span>}\r\n      </p>\r\n      <p style={{textAlign: 'left'}}>\r\n        <label htmlFor=\"new-campaign-skillset\">\r\n          <strong\r\n          style={{fontSize: '1.2rem', fontFamily: \"Lato,'Helvetica Neue',Arial,Helvetica,sans-serif\"}}>\r\n            Skillset:\r\n          </strong>\r\n        </label>\r\n        {!!props.skillsets.length && <select id=\"new-campaigin-skillset\" name=\"new-campaign-skillset\" value={props.selectedSkillsetId} onChange={(e) => props.updateSelectedSkillsetId(e.target.value)}>\r\n          <option value=\"0\">Select A Skillset</option>\r\n          {props.skillsets.map(sk => <option key={sk.id * 3 - 1} value={sk.id}>{sk.name} ({sk.skills.length})</option>)}\r\n        </select>}\r\n        {moreInfoSidebar()}\r\n        {!props.skillsets.length && <>{props.loadingDie}</>}\r\n      </p>\r\n      <p style={{textAlign: 'left'}}>\r\n        <label htmlFor=\"new-campaign-custom-notes\"\r\n        onClick={() => toggleCustomNotes(true)}>\r\n          <strong\r\n          style={{fontSize: '1.2rem', fontFamily: \"Lato,'Helvetica Neue',Arial,Helvetica,sans-serif\", color: customNotesField && \"grey\"}}>\r\n            Custom Notes\r\n          </strong>\r\n        </label>:<br/>\r\n        <textarea\r\n          type=\"text\"\r\n          ref={customNotesEl}\r\n          id=\"new-campaign-custom-notes\"\r\n          name=\"new-campaign-custom-notes\"\r\n          value={props.customNotes}\r\n          style={{background: 'none', border: 'none', width: '100%', color: '#0f52ba', overflowWrap: 'break-word'}}\r\n          rows={rows}\r\n          onChange={(e) => props.setCustomNotes(e.target.value)}\r\n          onBlur={onBlur}\r\n          onFocus={() => props.toggleVirtualKeyboard(true)}\r\n        />\r\n      </p>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default Details\r\n","import React from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { withRouter } from 'react-router-dom'\r\nimport localhost from '../localhost'\r\nimport _ from 'lodash'\r\n\r\nimport Classes from '../components/campaign/classes'\r\nimport Races from '../components/campaign/races'\r\nimport Calendar from '../components/campaign/calendar'\r\nimport Setting from '../components/campaign/setting'\r\nimport Details from '../components/campaign/details'\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faDiceD20 } from '@fortawesome/free-solid-svg-icons'\r\nimport SideBar from './sidebar/sidebar'\r\n\r\n\r\nconst NewCampaign = props => {\r\n\r\n  const [calendars, setCalendars] = React.useState([])\r\n  const [races, setRaces] = React.useState([])\r\n  const [classes, setClasses] = React.useState([])\r\n  const [skillsets, setSkillsets] = React.useState([])\r\n\r\n  const [selectedRaceIds, updateSelectedRaceIds] = React.useState([])\r\n  const [selectedClassIds, updateSelectedClassIds] = React.useState([])\r\n  const [selectedCalendarId, updateSelectedCalendarId] = React.useState(\"0\")\r\n  const [selectedSkillsetId, updateSelectedSkillsetId] = React.useState(\"0\")\r\n  const [selectedMonth, updateMonth] = React.useState(\"\")\r\n  const [selectedDay, updateDay] = React.useState(\"\")\r\n  const [selectedDayNumber, updateDayNumber] = React.useState(0)\r\n  const [selectedYear, updateYear] = React.useState(0)\r\n  const [selectedAge, updateAge] = React.useState(\"\")\r\n\r\n  const [name, setName] = React.useState(\"\")\r\n  const [setting, setSetting] = React.useState(\"\")\r\n  const [theme, setTheme] = React.useState(\"\")\r\n\r\n  const loadingDie = <FontAwesomeIcon icon={faDiceD20} className=\"spinning-die\"/>\r\n\r\n  const [startingLvl, setStartingLvl] = React.useState(1)\r\n  const [startingLvlError, toggleStartingLvlError] = React.useState(false)\r\n  const [customNotes, setCustomNotes] = React.useState(\"\")\r\n\r\n  const [usingVirtualKeyboard, toggleVirtualKeyboard] = React.useState(false)\r\n  const [sidebar, toggleSidebar] = React.useState({display: false})\r\n\r\n  React.useEffect(() => {\r\n    fetch(`${localhost}/api/v1/campaigns/new`)\r\n      .then(r => r.json())\r\n      .then(data => {\r\n        console.log(data)\r\n        setCalendars(data.calendars)\r\n        setRaces(data.races)\r\n        setClasses(data.klasses)\r\n        setSkillsets(data.skillsets)\r\n        updateSelectedRaceIds(data.races.map(r => r.id))\r\n        updateSelectedClassIds(data.klasses.map(cl => cl.id))\r\n      })\r\n  }, [])\r\n\r\n  const renderSubmit = (e) => {\r\n    if (startingLvl >= 1 && startingLvl <= 20){\r\n      e.preventDefault();\r\n      fetch(`${localhost}/api/v1/campaigns/new`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          \"Accept\": \"application/json\"\r\n        },\r\n        body: JSON.stringify({\r\n          name,\r\n          theme,\r\n          setting,\r\n          customNotes,\r\n          calendar_id: selectedCalendarId,\r\n          race_ids: selectedRaceIds,\r\n          klass_ids: selectedClassIds,\r\n          skillset_id: selectedSkillsetId,\r\n          dm_id: props.currentUser.id,\r\n          starting_level: startingLvl,\r\n          month: selectedMonth,\r\n          weekday: selectedDay,\r\n          day: selectedDayNumber,\r\n          year: selectedYear,\r\n          age: selectedAge\r\n        })\r\n      })\r\n        .then(r => r.json())\r\n        .then(data => {\r\n           props.history.push(`/campaigns/${data.id}`)\r\n        })\r\n    } else {\r\n      validateStartingLvl(0)\r\n    }\r\n\r\n  }\r\n\r\n  const validateStartingLvl = (lvl) => {\r\n    if (lvl >= 1 && lvl <= 20){\r\n      setStartingLvl(lvl)\r\n      toggleStartingLvlError(false)\r\n    } else {\r\n      if (lvl === \"\"){\r\n        setStartingLvl(lvl)\r\n      }\r\n      toggleStartingLvlError(true)\r\n      setTimeout(() => toggleStartingLvlError(false), 2900)\r\n    }\r\n  }\r\n\r\n  const editSidebar = (display, position, description, content) => {\r\n    toggleSidebar({display, position, description, content})\r\n  }\r\n\r\n  // Theme\r\n  // setting\r\n  // classes and races\r\n  // calendar\r\n  // skillset\r\n  // start date\r\n  // TODO: campaign page, next day patch button\r\n  // TODO: random days for some months\r\n  // starting level\r\n  // custom notes\r\n  // pantheon\r\n\r\n\r\n  const renderForm = () => {\r\n    return (\r\n      <>\r\n        <form id=\"new-campaign-form\" onSubmit={renderSubmit}>\r\n          <Setting name={name} setName={setName} theme={theme} setTheme={setTheme} setting={setting} setSetting={setSetting}/>\r\n          <Calendar calendars={calendars} selectedCalendarId={selectedCalendarId} updateSelectedCalendarId={updateSelectedCalendarId} selectedMonth={selectedMonth} updateMonth={updateMonth} selectedDay={selectedDay} updateDay={updateDay} selectedDayNumber={selectedDayNumber} updateDayNumber={updateDayNumber} selectedYear={selectedYear} updateYear={updateYear} selectedAge={selectedAge} updateAge={updateAge} loadingDie={loadingDie}/>\r\n          <Races races={races} selectedRaceIds={selectedRaceIds} updateSelectedRaceIds={updateSelectedRaceIds} loadingDie={loadingDie}/>\r\n          <Classes classes={classes} selectedClassIds={selectedClassIds} updateSelectedClassIds={updateSelectedClassIds} loadingDie={loadingDie}/>\r\n          <Details startingLvl={startingLvl} setStartingLvl={validateStartingLvl} startingLvlError={startingLvlError} customNotes={customNotes} setCustomNotes={setCustomNotes} toggleVirtualKeyboard={toggleVirtualKeyboard} skillsets={skillsets} selectedSkillsetId={selectedSkillsetId} updateSelectedSkillsetId={updateSelectedSkillsetId} loadingDie={loadingDie} editSidebar={editSidebar}/>\r\n          <section id='new-campaign-form-submit' style={{display: usingVirtualKeyboard ? \"none\" : \"block\"}}>\r\n            <input type=\"submit\" value=\"Create Campaign\"/>\r\n          </section>\r\n        </form>\r\n        {sidebar.display && <SideBar sidebar={sidebar} editSidebar={editSidebar}/>}\r\n      </>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {renderForm()}\r\n    </>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin\r\n  }\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps)(NewCampaign))\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { characterLevel } from '../../utils/calculations/character'\r\nimport { justInitials } from '../../utils/fuf'\r\n\r\nconst DetailsBrief = props => {\r\n\r\n\tconst { layout, colorTheme } = useSelector(state => state.settings)\r\n\r\n\tconst renderDetails = () => {\r\n\t\tconst { name, alignment, deity, homeland, race, gender, age, height, weight, hair, eyes } = props.character\r\n\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<div className=\"character-details-details-brief-name fill-space\">\r\n\t\t\t\t\t<p className=\"underline-input-field user-data\">{name || \"\"}</p>\r\n\t\t\t\t\t<div className=\"underline-description\">Character Name</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"character-details-details-brief-alignment fill-space\">\r\n\t\t\t\t\t<p className=\"underline-input-field user-data\">{justInitials(alignment) || \"\"}</p>\r\n\t\t\t\t\t<div className=\"underline-description\">Alignment</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"character-details-details-brief-character-level fill-space\">\r\n\t\t\t\t\t<p className=\"underline-input-field user-data\">{characterLevel(props.character) || \"\"}</p>\r\n\t\t\t\t\t<div className=\"underline-description\">Character Level</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"character-details-details-brief-deity fill-space\">\r\n\t\t\t\t\t<p className=\"underline-input-field user-data\">{deity || \"\"}</p>\r\n\t\t\t\t\t<div className=\"underline-description\">Diety</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"character-details-details-brief-homeland fill-space\">\r\n\t\t\t\t\t<p className=\"underline-input-field user-data\">{homeland || \"\"}</p>\r\n\t\t\t\t\t<div className=\"underline-description\">Homeland</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"character-details-details-brief-race fill-space\">\r\n\t\t\t\t\t<p className=\"underline-input-field user-data\">{race.name || \"\"}</p>\r\n\t\t\t\t\t<div className=\"underline-description\">Race</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"character-details-details-brief-size fill-space\">\r\n\t\t\t\t\t<p className=\"underline-input-field user-data\">{justInitials(race.size) || \"\"}</p>\r\n\t\t\t\t\t<div className=\"underline-description\">Size</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"character-details-details-brief-gender fill-space\">\r\n\t\t\t\t\t<p className=\"underline-input-field user-data\">{gender || \"\"}</p>\r\n\t\t\t\t\t<div className=\"underline-description\">Gender</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"character-details-details-brief-age fill-space\">\r\n\t\t\t\t\t<p className=\"underline-input-field user-data\">{age || \"\"}</p>\r\n\t\t\t\t\t<div className=\"underline-description\">Age</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"character-details-details-brief-height fill-space\">\r\n\t\t\t\t\t<p className=\"underline-input-field user-data\">{height || \"\"}</p>\r\n\t\t\t\t\t<div className=\"underline-description\">Height</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"character-details-details-brief-weight fill-space\">\r\n\t\t\t\t\t<p className=\"underline-input-field user-data\">{weight || \"\"}</p>\r\n\t\t\t\t\t<div className=\"underline-description\">Weight</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"character-details-details-brief-hair fill-space\">\r\n\t\t\t\t\t<p className=\"underline-input-field user-data\">{hair || \"\"}</p>\r\n\t\t\t\t\t<div className=\"underline-description\">Hair</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"character-details-details-brief-eyes fill-space\">\r\n\t\t\t\t\t<p className=\"underline-input-field user-data\">{eyes || \"\"}</p>\r\n\t\t\t\t\t<div className=\"underline-description\">Eyes</div>\r\n\t\t\t\t</div>\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<section id=\"character-details-details-brief\" className=\"section-background\">\r\n\t\t\t{renderDetails()}\r\n\t\t</section>\r\n\t)\r\n}\r\n\r\nexport default DetailsBrief\r\n","import React from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { mod, pluser } from '../../utils/fuf'\r\n\r\nconst AbilityScores = props => {\r\n\r\n\tconst { layout, colorTheme } = useSelector(state => state.settings)\r\n\r\n\tconst renderScores = () => {\r\n\t\tconst { strength, dexterity, constitution, intelligence, wisdom, charisma } = props.character\r\n\t\tlet arr = [{name: \"Strength\", score: strength}, {name: \"Dexterity\", score: dexterity}, {name: \"Constitution\", score: constitution}, {name: \"Intelligence\", score: intelligence}, {name: \"Wisdom\", score: wisdom}, {name: \"Charisma\", score: charisma}]\r\n\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<>\r\n\t\t\t\t\t<span>Ability Name</span>\r\n\t\t\t\t\t<span>Ability Score</span>\r\n\t\t\t\t\t<span>Ability Modifier</span>\r\n\t\t\t\t\t<span>Temp Adjustment</span>\r\n\t\t\t\t\t<span>Temp Modifier</span>\r\n\t\t\t\t</>\r\n\t\t\t\t{arr.map(renderAbilityScore)}\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\tconst renderAbilityScore = (obj) => {\r\n\t\tconst { name, score } = obj\r\n\t\tlet abbrev = name.substring(0, 3).toUpperCase()\r\n\t\tlet modifier = pluser(mod(score))\r\n\t\tlet tempAdjustment = 0\r\n\t\tlet tempModifier = pluser(mod(score + tempAdjustment)) !== modifier ? pluser(mod(score + tempAdjustment)) : \"\"\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<span>{abbrev}</span>\r\n\t\t\t\t<span>{score}</span>\r\n\t\t\t\t<span>{modifier}</span>\r\n\t\t\t\t<span>{tempAdjustment !== 0 ? tempAdjustment : \"\"}</span>\r\n\t\t\t\t<span>{tempModifier}</span>\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<section id=\"character-details-ability-scores\" className=\"section-background\">\r\n\t\t\t{renderScores()}\r\n\t\t</section>\r\n\t)\r\n}\r\n\r\nexport default AbilityScores\r\n","const Character1 = {\r\n\tcharacter : {\r\n\t\tid: 10001,\r\n\t\tname: \"Jezebel\",\r\n\t\tstrength: 9,\r\n\t\tdexterity: 9,\r\n\t\tconstitution: 15,\r\n\t\tintelligence: 9,\r\n\t\twisdom: 6,\r\n\t\tcharisma: 10,\r\n\t\talignment: \"Chaotic Neutral\",\r\n\t\tdeity: null,\r\n\t\thomeland: null,\r\n\t\tgender: null,\r\n\t\tage: null,\r\n\t\theight: \"2'3\\\"\",\r\n\t\tweight: \"9 lbs\",\r\n\t\thair: null,\r\n\t\teyes: null,\r\n\t\tdescription: \"\",\r\n\t\tany_bonus: null,\r\n\t\tskillset_id: 3,\r\n\t\tlethal_damage: 0,\r\n\t\tnon_lethal_damage: 0,\r\n\t\ttemp_hp: 0,\r\n\t\tis_done_preparing_spells: false,\r\n\t\tfull_name: null,\r\n\t\tcampaign_id: 3,\r\n\t\tmax_hp: 21,\r\n\t\tpp: null,\r\n\t\tgp: null,\r\n\t\tsp: null,\r\n\t\tcp: null,\r\n\t\tuniq_klasses: [\r\n\t\t\t{\r\n\t\t\t\tid: 15,\r\n\t\t\t\tname: \"Kineticist\",\r\n\t\t\t\tdescription: \"Kineticists are living channels for elemental matter and energy, manipulating the world around them by drawing upon inner reserves from their own bodies. Kineticists often awaken to their kinetic abilities during a violent or traumatic experience, releasing their power involuntarily. As kinetic power is seldom inherited, kineticists are rarely able to find mentors to guide them, so they must delve into these mysteries on their own to learn to control their gifts.\\n\\nRole: Kineticists generally use their powers to assail their foes from range, but based on the way their talents develop, they can channel their kinetic abilities for a variety of situations. Kineticists are usually quite different from their families and friends, so they often strike out on their own or alongside others with extraordinary talents.\\n\\nAlignment: Any.\",\r\n\t\t\t\thit_die: 8,\r\n\t\t\t\t\"skill_ranks\": 4,\r\n\t\t\t\t\"fortitude\": 0.5,\r\n\t\t\t\t\"reflex\": 0.5,\r\n\t\t\t\t\"will\": 0.34,\r\n\t\t\t\tsource: {\r\n\t\t\t\t\tid: 11,\r\n\t\t\t\t\ttitle: \"Occult Adventures\",\r\n\t\t\t\t\tabbreviation: \"OA\",\r\n\t\t\t\t\tcode: \"PZO1132\"\r\n\t\t\t\t},\r\n\t\t\t\tklass_features: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 122,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tname: \"Weapon and Armor Proficiency\",\r\n\t\t\t\t\t\tdescription: \"Kineticists are proficient with all simple weapons and light armor, but not shields.\",\r\n\t\t\t\t\t\tcreated_at: \"2021-01-02T15:58:19.255Z\",\r\n\t\t\t\t\t\tupdated_at: \"2021-01-02T15:58:19.255Z\",\r\n\t\t\t\t\t\tspecialization: null,\r\n\t\t\t\t\t\tchoice_amount: 0,\r\n\t\t\t\t\t\tbase_klass_feature_id: null,\r\n\t\t\t\t\t\thas_klass_feature_options: null\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 123,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tname: \"Elemental Focus\",\r\n\t\t\t\t\t\tdescription: \"At 1st level, a kineticist chooses one primary element on which to focus. This element determines how she accesses the raw power of the Ethereal Plane, and grants her access to specific wild talents (see below) and additional class skills. She gains her selected element’s basic utility wild talent (basic telekinesis, basic aerokinesis, etc.) as a bonus wild talent.\",\r\n\t\t\t\t\t\tcreated_at: \"2021-01-02T15:58:19.288Z\",\r\n\t\t\t\t\t\tupdated_at: \"2021-01-02T15:58:19.288Z\",\r\n\t\t\t\t\t\tspecialization: true,\r\n\t\t\t\t\t\tchoice_amount: 1,\r\n\t\t\t\t\t\tbase_klass_feature_id: null,\r\n\t\t\t\t\t\thas_klass_feature_options: null\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 124,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tname: \"Wild Talents\",\r\n\t\t\t\t\t\tdescription: \"A kineticist can use wild talents—magical abilities similar to spells but drawn from the kineticist’s innate psychic talent and usable at will. Wild talents are typically spell-like abilities (though some are supernatural abilities), and take a standard action to use unless otherwise noted. A wild talent always has the elemental descriptor or descriptors (aether, air, earth, fire, or water) matching its element entry. A wild talent that can be used with any of several elements gains the appropriate elemental descriptor when used with an element. For example, the wall wild talent gains the earth descriptor when used by a geokineticist.\\n\\nEvery wild talent has an effective spell level. A kineticist can always select 1st-level wild talents, but she can select a wild talent of a higher level only if her kineticist level is at least double the wild talent’s effective spell level. Kinetic blast and defense wild talents are always considered to have an effective spell level equal to 1/2 the kineticist’s class level (to a maximum effective spell level of 9th at kineticist level 18th).\\n\\nUnless otherwise noted, the DC for a saving throw against a wild talent is equal to 10 + the wild talent’s effective spell level + the kineticist’s Constitution modifier. The kineticist uses her Constitution modifier on all concentration checks for wild talents.\\n\\nIn addition to the wild talents she gains from her other class features, at 2nd level and every 2 levels thereafter, a kineticist selects a new utility wild talent from the list of options available to her. A kineticist can select only universal wild talents or those that match her element (see Elemental Focus above). At 6th, 10th, and 16th levels, a kineticist can replace one of her utility wild talents with another wild talent of the same level or lower. She can’t replace a wild talent that she used to qualify for another of her wild talents.\",\r\n\t\t\t\t\t\tcreated_at: \"2021-01-02T15:58:19.300Z\",\r\n\t\t\t\t\t\tupdated_at: \"2021-01-02T15:58:19.300Z\",\r\n\t\t\t\t\t\tspecialization: null,\r\n\t\t\t\t\t\tchoice_amount: 0,\r\n\t\t\t\t\t\tbase_klass_feature_id: null,\r\n\t\t\t\t\t\thas_klass_feature_options: null\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 125,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tname: \"Burn\",\r\n\t\t\t\t\t\tdescription: \"At 1st level, a kineticist can overexert herself to channel more power than normal, pushing past the limit of what is safe for her body by accepting burn. Some of her wild talents allow her to accept burn in exchange for a greater effect, while others require her to accept a certain amount of burn to use that talent at all. For each point of burn she accepts, a kineticist takes 1 point of nonlethal damage per character level. This damage can’t be healed by any means other than getting a full night’s rest, which removes all burn and associated nonlethal damage. Nonlethal damage from burn can’t be reduced or redirected, and a kineticist incapable of taking nonlethal damage can’t accept burn. A kineticist can accept only 1 point of burn per round. This limit rises to 2 points of burn at 6th level, and rises by 1 additional point every 3 levels thereafter. A kineticist can’t choose to accept burn if it would put her total number of points of burn higher than 3 + her Constitution modifier (though she can be forced to accept more burn from a source outside her control). A kineticist who has accepted burn never benefits from abilities that allow her to ignore or alter the effects she receives from nonlethal damage.\",\r\n\t\t\t\t\t\tcreated_at: \"2021-01-02T15:58:19.364Z\",\r\n\t\t\t\t\t\tupdated_at: \"2021-01-02T15:58:19.364Z\",\r\n\t\t\t\t\t\tspecialization: null,\r\n\t\t\t\t\t\tchoice_amount: 0,\r\n\t\t\t\t\t\tbase_klass_feature_id: null,\r\n\t\t\t\t\t\thas_klass_feature_options: null\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 126,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tname: \"Kinetic Blast\",\r\n\t\t\t\t\t\tdescription: \"At 1st level, a kineticist gains a kinetic blast wild talent of her choice. This kinetic blast must be a simple blast that matches her element. Simple blasts are listed with their corresponding elements.\\n\\nAs a standard action, the kineticist can unleash a kinetic blast at a single target up to a range of 30 feet. She must have at least one hand free to aim the blast (or one prehensile appendage, if she doesn’t have hands). All damage from a kinetic blast is treated as magic for the purpose of bypassing damage reduction. Kinetic blasts count as a type of weapon for the purpose of feats such as Weapon Focus. The kineticist is never considered to be wielding or gripping the kinetic blast (regardless of effects from form infusions; see Infusion), and she can’t use Vital Strike feats with kinetic blasts. Even the weakest kinetic blast involves a sizable mass of elemental matter or energy, so kinetic blasts always deal full damage to swarms of any size (though only area blasts deal extra damage to swarms). A readied kinetic blast can be used to counterspell any spell of equal or lower level that shares its descriptor. A kinetic blast that deals energy damage of any type (including force) has the corresponding descriptor.\\n\\nEach simple blast is either a physical blast or an energy blast.\\n\\nPhysical blasts are ranged attacks that deal an amount of damage equal to 1d6+1 + the kineticist’s Constitution modifier, increasing by 1d6+1 for every 2 kineticist levels beyond 1st. Spell resistance doesn’t apply against physical blasts.\\n\\nEnergy blasts are ranged touch attacks that deal an amount of damage equal to 1d6 + 1/2 the kineticist’s Constitution modifier, increasing by 1d6 for every 2 kineticist levels beyond 1st.\\n\\nComposite blasts combine elements to form a new blast. When a kineticist gains a new element through expanded element, she gains access to all composite blasts for which she qualifies. All composite blasts are listed after the kineticist elements.\\n\\nMost composite blasts are either physical or energy blasts, like simple blasts.\\n\\nPhysical composite blasts deal an amount of damage equal to 2d6+2 + the kineticist’s Constitution modifier, increasing by 2d6+2 for every 2 kineticist levels beyond 1st.\\n\\nEnergy composite blasts deal an amount of damage equal to 2d6 + 1/2 the kineticist’s Constitution modifier, increasing by 2d6 for every 2 kineticist levels beyond 1st.\",\r\n\t\t\t\t\t\tcreated_at: \"2021-01-02T15:58:19.375Z\",\r\n\t\t\t\t\t\tupdated_at: \"2021-01-02T15:58:19.375Z\",\r\n\t\t\t\t\t\tspecialization: true,\r\n\t\t\t\t\t\tchoice_amount: 1,\r\n\t\t\t\t\t\tbase_klass_feature_id: null,\r\n\t\t\t\t\t\thas_klass_feature_options: null\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 127,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tname: \"Gather Power\",\r\n\t\t\t\t\t\tdescription: \"If she has both hands free (or all of her prehensile appendages free, for unusual kineticists), a kineticist can gather energy or elemental matter as a move action. Gathering power creates an extremely loud, visible display in a 20-foot radius centered on the kineticist, as the energy or matter swirls around her. Gathering power in this way allows the kineticist to reduce the total burn cost of a blast wild talent she uses in the same round by 1 point. The kineticist can instead gather power for 1 full round in order to reduce the total burn cost of a blast wild talent used on her next turn by 2 points (to a minimum of 0 points). If she does so, she can also gather power as a move action during her next turn to reduce the burn cost by a total of 3 points. If the kineticist takes damage during or after gathering power and before using the kinetic blast that releases it, she must succeed at a concentration check (DC = 10 + damage taken + effective spell level of her kinetic blast) or lose the energy in a wild surge that forces her to accept a number of points of burn equal to the number of points by which her gathered power would have reduced the burn cost. This ability can never reduce the burn cost of a wild talent below 0 points.\",\r\n\t\t\t\t\t\tcreated_at: \"2021-01-02T15:58:19.387Z\",\r\n\t\t\t\t\t\tupdated_at: \"2021-01-02T15:58:19.387Z\",\r\n\t\t\t\t\t\tspecialization: null,\r\n\t\t\t\t\t\tchoice_amount: 0,\r\n\t\t\t\t\t\tbase_klass_feature_id: null,\r\n\t\t\t\t\t\thas_klass_feature_options: null\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 136,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tname: \"Composite Specialization\",\r\n\t\t\t\t\t\tdescription: \"At 16th level, a kineticist becomes more adept at creating composite blasts. She reduces the burn cost of all composite blasts by 1 point.\\n\\nThis can’t reduce the cost of a composite blast below 0 points.\",\r\n\t\t\t\t\t\tcreated_at: \"2021-01-02T15:58:19.664Z\",\r\n\t\t\t\t\t\tupdated_at: \"2021-01-02T15:58:19.664Z\",\r\n\t\t\t\t\t\tspecialization: null,\r\n\t\t\t\t\t\tchoice_amount: 0,\r\n\t\t\t\t\t\tbase_klass_feature_id: null,\r\n\t\t\t\t\t\thas_klass_feature_options: null\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 137,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tname: \"Metakinetic Master\",\r\n\t\t\t\t\t\tdescription: \"At 19th level, a kineticist chooses one type of metakinesis, such as empower or quicken. She reduces the burn cost of that metakinesis by 1 point (to a minimum of 0 points).\",\r\n\t\t\t\t\t\tcreated_at: \"2021-01-02T15:58:19.678Z\",\r\n\t\t\t\t\t\tupdated_at: \"2021-01-02T15:58:19.678Z\",\r\n\t\t\t\t\t\tspecialization: null,\r\n\t\t\t\t\t\tchoice_amount: 0,\r\n\t\t\t\t\t\tbase_klass_feature_id: null,\r\n\t\t\t\t\t\thas_klass_feature_options: null\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 128,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tname: \"Infusion\",\r\n\t\t\t\t\t\tdescription: \"At 1st level, a kineticist gains an infusion wild talent from the list of options available based on her elemental focus. She gains additional infusions at 3rd, 5th, 9th, 11th, 13th, 17th, and 19th levels. By using infusions along with her kinetic blasts, a kineticist can alter her kinetic blasts to suit her needs. Infusions come in two types, each of which changes a kinetic blast differently: a substance infusion causes an additional effect, while a form infusion causes the kinetic blast to manifest in a different way. Each infusion can alter only certain kinds of kinetic blasts, which are listed in its Associated Blasts entry. Each time the kineticist uses one of her kinetic blast wild talents, she can apply up to one associated form infusion and up to one associated substance infusion.\\n\\nSome infusions change the action required to activate a kinetic blast or entirely transform the kinetic blast’s normal effects.\\n\\nThe burn cost listed in each infusion’s Burn entry is added to the burn cost of the kinetic blast the infusion modifies.\\n\\nThe DC for a save against an infusion is based on the associated kinetic blast’s effective spell level, not the level of the infusion. The DCs for form infusions are calculated using the kineticist’s Dexterity modifier instead of her Constitution modifier. When a kineticist modifies a kinetic blast with a form infusion and a substance infusion that both require saving throws, each target first attempts a saving throw against the form infusion. If a target succeeds and a successful save negates the infusion’s effects, the entire kinetic blast is negated; otherwise, the target then attempts a saving throw against the substance infusion. If a kineticist’s form and substance infusions both alter the kinetic blast’s damage, apply the substance infusion’s alteration first.\\n\\nAt 5th, 11th, and 17th levels, a kineticist can replace one of her infusions with another infusion of the same effective spell level or lower. She can’t replace an infusion that she used to qualify for another of her wild talents.\",\r\n\t\t\t\t\t\tcreated_at: \"2021-01-02T15:58:19.413Z\",\r\n\t\t\t\t\t\tupdated_at: \"2021-01-02T15:58:19.413Z\",\r\n\t\t\t\t\t\tspecialization: null,\r\n\t\t\t\t\t\tchoice_amount: 0,\r\n\t\t\t\t\t\tbase_klass_feature_id: null,\r\n\t\t\t\t\t\thas_klass_feature_options: null\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 129,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tname: \"Elemental Defense\",\r\n\t\t\t\t\t\tdescription: \"At 2nd level, a kineticist gains her element’s defensive wild talent.\\n\\nShe must select the expanded defense utility wild talent to gain the defensive wild talent of any element she gains via the expanded element class feature.\",\r\n\t\t\t\t\t\tcreated_at: \"2021-01-02T15:58:19.464Z\",\r\n\t\t\t\t\t\tupdated_at: \"2021-01-02T15:58:19.464Z\",\r\n\t\t\t\t\t\tspecialization: null,\r\n\t\t\t\t\t\tchoice_amount: 0,\r\n\t\t\t\t\t\tbase_klass_feature_id: null,\r\n\t\t\t\t\t\thas_klass_feature_options: null\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 130,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tname: \"Elemental Overflow\",\r\n\t\t\t\t\t\tdescription: \"At 3rd level, a kineticist’s body surges with energy from her chosen element whenever she accepts burn, causing her to glow with a nimbus of fire, weep water from her pores, or experience some other thematic effect. In addition, she receives a bonus on her attack rolls with kinetic blasts equal to the total number of points of burn she currently has, to a maximum bonus of +1 for every 3 kineticist levels she possesses. She also receives a bonus on damage rolls with her kinetic blast equal to double the bonus on attack rolls. The kineticist can suppress the visual effects of elemental overflow by concentrating for 1 full round, but doing so suppresses all of this ability’s other benefits, as well. The next time the kineticist uses any wild talent, the visual effects and benefits return instantly.\\n\\nAs a kineticist’s body becomes more and more suffused with her element, she begins to gain more powerful benefits.\\n\\nStarting at 6th level, whenever she has at least 3 points of burn, the kineticist gains a +2 size bonus to two physical ability scores of her choice. She also gains a chance to ignore the effects of a critical hit or sneak attack equal to 5% × her current number of points of burn. At 11th level, whenever the kineticist has at least 5 points of burn, these bonuses increase to a +4 size bonus to one physical ability score of her choice and a +2 size bonus to each of her other two physical ability scores.\\n\\nAt 16th level, whenever the kineticist has at least 7 points of burn, these bonuses increase to a +6 size bonus to one physical ability score of her choice, a +4 size bonus to a second physical ability score of her choice, and a +2 size bonus to the remaining physical ability score.\",\r\n\t\t\t\t\t\tcreated_at: \"2021-01-02T15:58:19.476Z\",\r\n\t\t\t\t\t\tupdated_at: \"2021-01-02T15:58:19.476Z\",\r\n\t\t\t\t\t\tspecialization: null,\r\n\t\t\t\t\t\tchoice_amount: 0,\r\n\t\t\t\t\t\tbase_klass_feature_id: null,\r\n\t\t\t\t\t\thas_klass_feature_options: null\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 131,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tname: \"Infusion Specialization\",\r\n\t\t\t\t\t\tdescription: \"At 5th level, whenever a kineticist uses one or more infusions with a blast, she reduces the combined burn cost of the infusions by 1. This can’t reduce the total cost of the infusions used below 0.\\n\\nShe reduces the burn cost by 1 additional point at 8th, 11th, 14th, 17th, and 20th levels.\",\r\n\t\t\t\t\t\tcreated_at: \"2021-01-02T15:58:19.538Z\",\r\n\t\t\t\t\t\tupdated_at: \"2021-01-02T15:58:19.538Z\",\r\n\t\t\t\t\t\tspecialization: null,\r\n\t\t\t\t\t\tchoice_amount: 0,\r\n\t\t\t\t\t\tbase_klass_feature_id: null,\r\n\t\t\t\t\t\thas_klass_feature_options: null\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 132,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tname: \"Metakinesis\",\r\n\t\t\t\t\t\tdescription: \"At 5th level, a kineticist gains the ability to alter her kinetic blasts as if with metamagic feats by accepting burn. By accepting 1 point of burn, she can empower her kinetic blast (as if using Empower Spell). At 9th level, by accepting 2 points of burn, she can maximize her kinetic blast as if using Maximize Spell. At 13th level, by accepting 3 points of burn, she can quicken her kinetic blast as if using Quicken Spell.\\n\\nAt 17th level, by accepting 4 points of burn, the kineticist can use her kinetic blast twice with the same standard action, or swift action if she also uses metakinesis to quicken the blast.\\n\\nWhen she uses a double kinetic blast, all modifications, such as metakinesis and infusions, apply to both of the blasts, but the kineticist needs to pay the burn cost only once.\",\r\n\t\t\t\t\t\tcreated_at: \"2021-01-02T15:58:19.579Z\",\r\n\t\t\t\t\t\tupdated_at: \"2021-01-02T15:58:19.579Z\",\r\n\t\t\t\t\t\tspecialization: null,\r\n\t\t\t\t\t\tchoice_amount: 0,\r\n\t\t\t\t\t\tbase_klass_feature_id: null,\r\n\t\t\t\t\t\thas_klass_feature_options: null\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 133,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tname: \"Internal Buffer\",\r\n\t\t\t\t\t\tdescription: \"At 6th level, a kineticist’s study of her body and the elemental forces that course through it allow her to form an internal buffer to store extra energy.\\n\\nThe buffer starts empty and doesn’t replenish each day, but the kineticist can accept 1 point of burn to add 1 point to the buffer as a full-round action, to a maximum of 1 point total. This maximum increases to 2 points at 11th level and to 3 points at 16th level. Once the kineticist adds points to her buffer, they remain indefinitely until she spends them.\\n\\nWhen she would otherwise accept burn, a kineticist can spend 1 point from her buffer to avoid accepting 1 point of burn. She cannot spend more than 1 point from her buffer in this way for a single wild talent. Points spent from the internal buffer don’t activate elemental overflow or add to its effects. Similarly, this buffer can be used to exceed the limit on the number of points of burn the kineticist can accept in a single turn.\",\r\n\t\t\t\t\t\tcreated_at: \"2021-01-02T15:58:19.610Z\",\r\n\t\t\t\t\t\tupdated_at: \"2021-01-02T15:58:19.610Z\",\r\n\t\t\t\t\t\tspecialization: null,\r\n\t\t\t\t\t\tchoice_amount: 0,\r\n\t\t\t\t\t\tbase_klass_feature_id: null,\r\n\t\t\t\t\t\thas_klass_feature_options: null\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 134,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tname: \"Expanded Element\",\r\n\t\t\t\t\t\tdescription: \"At 7th level, a kineticist learns to use another element or expands her understanding of her own element. She can choose any element, including her primary element. She gains one of that element’s simple blast wild talents that she does not already possess, if any. She also gains all composite blast wild talents whose prerequisites she meets, as well as the basic wild talent of her chosen expanded element (for instance, basic aerokinesis if she chooses air). See Composite Blasts for additional rules for and descriptions of composite blasts. She doesn’t gain the defensive wild talent of the expanded element unless she later selects it with the expanded defense utility wild talent, nor does she gain the additional class skills from her expanded element unless she later selects the Elemental Knowledge feat.\\n\\nIf the kineticist’s expanded element is different from her primary element, she treats her kineticist level as 4 levels lower for the purpose of determining which wild talents she can learn from her expanded element.\\n\\nIf the kineticist chooses to expand her understanding of an element she already has, she gains an additional utility wild talent or infusion of her choice from that element, as if from her infusion or wild talent class feature, as appropriate.\\n\\nAt 15th level, the kineticist can either select a new element or expand her understanding of her original element. She can’t select the same element she selected at 7th level unless it is her primary element. She gains all the benefits from her new expanded element as listed above. However, if the kineticist selected her primary element as her expanded element at both 7th and 15th levels, her mastery of that element increases. For wild talents of her element, the kineticist gains a +1 bonus on attack rolls and damage rolls, as well as to caster level and DCs.\",\r\n\t\t\t\t\t\tcreated_at: \"2021-01-02T15:58:19.634Z\",\r\n\t\t\t\t\t\tupdated_at: \"2021-01-02T15:58:19.634Z\",\r\n\t\t\t\t\t\tspecialization: null,\r\n\t\t\t\t\t\tchoice_amount: 0,\r\n\t\t\t\t\t\tbase_klass_feature_id: null,\r\n\t\t\t\t\t\thas_klass_feature_options: null\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 135,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tname: \"Supercharge\",\r\n\t\t\t\t\t\tdescription: \"At 11th level, when using gather power as a move action, a kineticist can reduce the total burn cost of a single wild talent by 2 points instead of 1. When using gather power for 1 full round, she can reduce the burn cost of a single wild talent by 3 points instead of 2.\",\r\n\t\t\t\t\t\tcreated_at: \"2021-01-02T15:58:19.652Z\",\r\n\t\t\t\t\t\tupdated_at: \"2021-01-02T15:58:19.652Z\",\r\n\t\t\t\t\t\tspecialization: null,\r\n\t\t\t\t\t\tchoice_amount: 0,\r\n\t\t\t\t\t\tbase_klass_feature_id: null,\r\n\t\t\t\t\t\thas_klass_feature_options: null\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 138,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tname: \"Omnikinesis\",\r\n\t\t\t\t\t\tdescription: \"At 20th level, a kineticist transcends the distinction between the different elements and can bend all creation to her will. By accepting 1 point of burn (in addition to any burn requirement of the kinetic blast she chooses), she can use any blast wild talent she doesn’t know.\\n\\nBy accepting 1 point of burn as a standard action, she can change any of her wild talents into any other wild talent of the same category (such as simple blasts or defense) for 24 hours, ignoring any elemental requirements or restrictions (but not any other requirements or restrictions).\",\r\n\t\t\t\t\t\tcreated_at: \"2021-01-02T15:58:19.690Z\",\r\n\t\t\t\t\t\tupdated_at: \"2021-01-02T15:58:19.690Z\",\r\n\t\t\t\t\t\tspecialization: null,\r\n\t\t\t\t\t\tchoice_amount: 0,\r\n\t\t\t\t\t\tbase_klass_feature_id: null,\r\n\t\t\t\t\t\thas_klass_feature_options: null\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tclass_skillset_skills: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 190,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tskillset_id: 1,\r\n\t\t\t\t\t\tskill_id: 1\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 191,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tskillset_id: 1,\r\n\t\t\t\t\t\tskill_id: 5\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 192,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tskillset_id: 1,\r\n\t\t\t\t\t\tskill_id: 12\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 193,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tskillset_id: 1,\r\n\t\t\t\t\t\tskill_id: 13\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 194,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tskillset_id: 1,\r\n\t\t\t\t\t\tskill_id: 24\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 195,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tskillset_id: 1,\r\n\t\t\t\t\t\tskill_id: 26\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 196,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tskillset_id: 1,\r\n\t\t\t\t\t\tskill_id: 28\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 197,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tskillset_id: 1,\r\n\t\t\t\t\t\tskill_id: 33\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 198,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tskillset_id: 1,\r\n\t\t\t\t\t\tskill_id: 36\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 199,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tskillset_id: 3,\r\n\t\t\t\t\t\tskill_id: 1\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 200,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tskillset_id: 3,\r\n\t\t\t\t\t\tskill_id: 5\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 201,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tskillset_id: 3,\r\n\t\t\t\t\t\tskill_id: 12\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 202,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tskillset_id: 3,\r\n\t\t\t\t\t\tskill_id: 13\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 203,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tskillset_id: 3,\r\n\t\t\t\t\t\tskill_id: 24\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 204,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tskillset_id: 3,\r\n\t\t\t\t\t\tskill_id: 26\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 205,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tskillset_id: 3,\r\n\t\t\t\t\t\tskill_id: 28\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 206,\r\n\t\t\t\t\t\tklass_id: 15,\r\n\t\t\t\t\t\tskillset_id: 3,\r\n\t\t\t\t\t\tskill_id: 33\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tskills: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 1,\r\n\t\t\t\t\t\tname: \"Acrobatics\",\r\n\t\t\t\t\t\tability_score: \"Dexterity\",\r\n\t\t\t\t\t\tdescription: \"You can use Acrobatics to move on narrow surfaces and uneven ground without falling. A successful check allows you to move at half speed across such surfaces—only one check is needed per round. Use the following table to determine the base DC, which is then modified by the Acrobatics skill modifiers noted below. While you are using Acrobatics in this way, you are considered flat-footed and lose your Dexterity bonus to your AC (if any). If you take damage while using Acrobatics, you must immediately make another Acrobatics check at the same DC to avoid falling or being knocked prone. *No Acrobatics check is needed to move across these surfaces unless the modifiers increase the DC to 10 or higher.\\n\\n<table>\\n  <tr>\\n    <th>Surface Width</th>\\n    <th>Base Acrobatics DC</th>\\n  </tr>\\n  <tr>\\n    <td>Greater Than 3 Feet Wide</td>\\n    <td>0*</td>\\n  </tr>\\n  <tr>\\n    <td>1-3 Feet Wide</td>\\n    <td>5*</td>\\n  </tr>\\n  <tr>\\n    <td>7-11 Inches Wide</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>2-6 Inches Wide</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Less Than 2 Inches Wide</td>\\n    <td>20</td>\\n  </tr>\\n</table>\\n\\nIn addition, you can move through a threatened square without provoking an attack of opportunity from an enemy by using Acrobatics. When moving in this way, you move at half speed. You can move at full speed by increasing the DC of the check by 10. You cannot use Acrobatics to move past foes if your speed is reduced due to carrying a medium or heavy load or wearing medium or heavy armor. If an ability allows you to move at full speed under such conditions, you can use Acrobatics to move past foes. You can use Acrobatics in this way while prone, but doing so requires a full-round action to move 5 feet, and the DC is increased by 5. If you attempt to move through an enemy’s space and fail the check, you lose the move action and provoke an attack of opportunity. *This DC is used to avoid an attack of opportunity due to movement. This DC increases by 2 for each additional opponent avoided in 1 round.\\n\\n<table>\\n  <tr>\\n    <th>Situation</th>\\n    <th>Base Acrobatics DC*</th>\\n  </tr>\\n  <tr>\\n    <td>Move Through a Threatened Area</td>\\n    <td>Opponent's Combat Maneuver Defense</td>\\n  </tr>\\n  <tr>\\n    <td>Move Through an Enemy's Space</td>\\n    <td>5 + Opponent's Combat Maneuver Defense</td>\\n  </tr>\\n</table>\\n\\nFinally, you can use the Acrobatics skill to make jumps or to soften a fall. The base DC to make a jump is equal to the distance to be crossed (if horizontal) or four times the height to be reached (if vertical). These DCs double if you do not have at least 10 feet of space to get a running start. The only Acrobatics modifiers that apply are those concerning the surface you are jumping from. If you fail this check by 4 or less, you can attempt a DC 20 Reflex save to grab hold of the other side after having missed the jump. If you fail by 5 or more, you fail to make the jump and fall (or land prone, in the case of a vertical jump).\\n\\nCreatures with a base land speed above 30 feet receive a +4 racial bonus on Acrobatics checks made to jump for every 10 feet of their speed above 30 feet. Creatures with a base land speed below 30 feet receive a –4 racial bonus on Acrobatics checks made to jump for every 10 feet of their speed below 30 feet. No jump can allow you to exceed your maximum movement for the round.\\n\\nFor a running jump, the result of your Acrobatics check indicates the distance traveled in the jump (and if the check fails, the distance at which you actually land and fall prone). Halve this result for a standing long jump to determine where you land.\\n\\nWhen you deliberately fall any distance, even as a result of a missed jump, a DC 15 Acrobatics skill check allows you to ignore the first 10 feet fallen, although you still end up prone if you take damage from a fall.\\n\\n<table>\\n  <tr>\\n    <th>Long Jump</th>\\n    <th>Acrobatics DC</th>\\n  </tr>\\n  <tr>\\n    <td>5 Feet</td>\\n    <td>5</td>\\n  </tr>\\n  <tr>\\n    <td>10 Feet</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>15 Feet</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>20 Feet</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Greater Than 20 Feet</td>\\n    <td>+5 per 5 Feet</td>\\n  </tr>\\n</table>\\n\\n<table>\\n  <tr>\\n    <th>High Jump</th>\\n    <th>Acrobatics DC</th>\\n  </tr>\\n  <tr>\\n    <td>1 Foot</td>\\n    <td>4</td>\\n  </tr>\\n  <tr>\\n    <td>2 Feet</td>\\n    <td>8</td>\\n  </tr>\\n  <tr>\\n    <td>3 Feet</td>\\n    <td>12</td>\\n  </tr>\\n  <tr>\\n    <td>4 Feet</td>\\n    <td>16</td>\\n  </tr>\\n  <tr>\\n    <td>Greater Than 4 Feet</td>\\n    <td>+4 per Foot</td>\\n  </tr>\\n</table>\\n\\nThe following modifiers apply to all Acrobatics skill checks. The modifiers stack with one another, but only the most severe modifier for any given condition applies.\\n\\n<table>\\n  <tr>\\n    <th>Acrobatics Modifiers</th>\\n    <th>DC Modifier</th>\\n  </tr>\\n  <tr>\\n    <td>Slightly Obstructed (Gravel, Sand)</td>\\n    <td>+2</td>\\n  </tr>\\n  <tr>\\n    <td>Severyly Obstructed (Cavern, Rubble)</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Slightly Slippery (Wet)</td>\\n    <td>+2</td>\\n  </tr>\\n  <tr>\\n    <td>Severly Slippery</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Slightly Sloped (<45 degrees)</td>\\n    <td>+2</td>\\n  </tr>\\n  <tr>\\n    <td>Severly Sloped (>45 degrees)</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Slightly Unsteady (Boat in Rough Water)</td>\\n    <td>+2</td>\\n  </tr>\\n  <tr>\\n    <td>Moderately Unsteady (Boat in a Storm)</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Move at Full Speed on Narrow or Uneven Surfaces</td>\\n    <td>+5 (not to Jumps)</td>\\n  </tr>\\n</table>\",\r\n\t\t\t\t\t\tuntrained: true,\r\n\t\t\t\t\t\tcustomizable: false,\r\n\t\t\t\t\t\tknowledge: false,\r\n\t\t\t\t\t\tblurb: \"You can keep your balance while traversing narrow or treacherous surfaces. You can also dive, flip, jump, and roll, avoiding attacks and confusing your opponents.\",\r\n\t\t\t\t\t\taction: \"None. An Acrobatics check is made as part of another action or as a reaction to a situation.\",\r\n\t\t\t\t\t\ttry_again: \"\",\r\n\t\t\t\t\t\tspecial: \"If you have 3 or more ranks in Acrobatics, you gain a +3 dodge bonus to AC when fighting defensively instead of the usual +2, and a +6 dodge bonus to AC when taking the total defense action instead of the usual +4.\",\r\n\t\t\t\t\t\tskill_unlock_5: \"You can move at normal speed through a threatened square without provoking an attack of opportunity by increasing the DC of the check by 5 (instead of by 10). You aren’t denied your Dexterity bonus when attempting Acrobatics checks with DCs of 20 or lower.\",\r\n\t\t\t\t\t\tskill_unlock_10: \"You can attempt an Acrobatics check at a –10 penalty and use the result as your CMD against trip maneuvers. You can also attempt an Acrobatics check at a –10 penalty in place of a Reflex save to avoid falling. You must choose to use this ability before the trip attempt or Reflex save is rolled. With a successful DC 20 Acrobatics check, you treat an unintentional fall as 10 feet shorter plus 10 feet for every 10 by which you exceed the DC, and treat an intentional fall as 10 feet shorter for every 10 by which you exceed the DC.\",\r\n\t\t\t\t\t\tskill_unlock_15: \"You do not provoke attacks of opportunity when standing up from prone.\",\r\n\t\t\t\t\t\tskill_unlock_20: \"You double the result of any Acrobatics check when jumping and never fall prone at the end of a fall as long as you remain conscious.\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 5,\r\n\t\t\t\t\t\tname: \"Craft\",\r\n\t\t\t\t\t\tability_score: \"Intelligence\",\r\n\t\t\t\t\t\tdescription: \"You can practice your trade and make a decent living, earning half your check result in gold pieces per week of dedicated work. You know how to use the tools of your trade, how to perform the craft’s daily tasks, how to supervise untrained helpers, and how to handle common problems. (Untrained laborers and assistants earn an average of 1 silver piece per day.)\\n\\nThe basic function of the Craft skill, however, is to allow you to make an item of the appropriate type. The DC depends on the complexity of the item to be created. The DC, your check result, and the price of the item determine how long it takes to make a particular item. The item’s finished price also determines the cost of raw materials.\\n\\nTo determine how much time and money it takes to make an item, follow these steps.\\n\\n1) Find the item’s price in silver pieces (1 gp = 10 sp).\\n\\n2) Find the item’s DC from Table: Craft Skills.\\n\\n3) Pay 1/3 of the item’s price for the raw material cost.\\n\\n4) Make an appropriate Craft check representing one week’s worth of work. If the check succeeds, multiply your check result by the DC. If the result × the DC equals the price of the item in sp, then you have completed the item. (If the result × the DC equals double or triple the price of the item in silver pieces, then you’ve completed the task in one-half or one-third of the time. Other multiples of the DC reduce the time in the same manner.) If the result × the DC doesn’t equal the price, then it represents the progress you’ve made this week. Record the result and make a new Craft check for the next week. Each week, you make more progress until your total reaches the price of the item in silver pieces.\\n\\nIf you fail a check by 4 or less, you make no progress this week (or day, see below). If you miss by 5 or more, you ruin half the raw materials and have to pay half the original raw material cost again.\\n\\nTools: All crafts require artisan’s tools to give the best chance of success. If improvised tools are used, the check is made with a –2 penalty. On the other hand, masterwork artisan’s tools provide a +2 circumstance bonus on the check.\\n\\nFabricate Spell: In some cases, the fabricate spell can be used to achieve the results of a Craft check with no actual check involved. You must still make an appropriate Craft check when using the spell to make articles requiring a high degree of craftsmanship.\\n\\nIronwood Spell: A successful Craft check related to woodworking in conjunction with the casting of the ironwood spell enables you to make wooden items that have the strength of steel.\\n\\nMinor Creation: When casting the spell minor creation, you must succeed on an appropriate Craft check to make a complex item.\\n\\nProgress by the Day: You can make checks by the day instead of by the week. In this case your progress (check result × DC) should be divided by the number of days in a week.\\n\\nCreate Masterwork Items: You can make a masterwork item: a weapon, suit of armor, shield, or tool that conveys a bonus on its use through its exceptional craftsmanship. To create a masterwork item, you create the masterwork component as if it were a separate item in addition to the standard item. The masterwork component has its own price (300 gp for a weapon or 150 gp for a suit of armor or a shield, see Chapter 6 for the price of other masterwork tools) and a Craft DC of 20. Once both the standard component and the masterwork component are completed, the masterwork item is finished. The cost you pay for the masterwork component is one-third of the given amount, just as it is for the cost in raw materials.\\n\\nRepair Items: You can repair an item by making checks against the same DC that it took to make the item in the first place. The cost of repairing an item is one-fifth of the item’s price.\\n\\n*You must be trained in the listed skill to attempt this task.\\n\\n<table>\\n  <tr>\\n    <th>Item/Task</th>\\n    <th>Craft Skill</th>\\n    <th>Craft DC</th>\\n  </tr>\\n  <tr>\\n    <td>Craft Acid</td>\\n    <td>Alchemy</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Determine the Items an Alchemist Makes with Substances from Their Lab*</td>\\n    <td>Alchemy</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Alchemist's Fire, Smokestick, or Tindertwig</td>\\n    <td>Alchemy</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Antitoxin, Sunrod, Tanglefoot Bag, or Thunderstone</td>\\n    <td>Alchemy</td>\\n    <td>25</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Armor or Shield</td>\\n    <td>Armor</td>\\n    <td>10 + AC Bonus</td>\\n  </tr>\\n  <tr>\\n    <td>Etch Metal Armor Plates with Decorative Designs</td>\\n    <td>Armor or Paintings</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Suit of Masterwork Armor on Sight</td>\\n    <td>Armor</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Determine What Type of Environment a Basket's Material Came From</td>\\n    <td>Baskets</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Determine the Specific Region a Basket's Material Came From</td>\\n    <td>Baskets</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Smelt Ore and Refine the Metal</td>\\n    <td>Blacksmithing</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Create Armor Spikes or Shield Spikes Without Craft (Armor)*</td>\\n    <td>Blacksmithing</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Determine a Book's Approxiamte Age</td>\\n    <td>Books</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Composite Bow on Site</td>\\n    <td>Bows</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Longbow, Shortbow, or Arrows</td>\\n    <td>Bows</td>\\n    <td>12</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Composite Longbow or Composite Shortbow</td>\\n    <td>Bows</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Masterwork Bow on Sight</td>\\n    <td>Bows</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Composite Longbow or Composite Shortbow With High Strength Rating</td>\\n    <td>Bows</td>\\n    <td>15 + (2 x Rating)</td>\\n  </tr>\\n  <tr>\\n    <td>Determine a Writer's Experience Level and Handedness*</td>\\n    <td>Calligraphy</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Write an Invitation That Matches Appropriate Social Conventions</td>\\n    <td>Calligraphy</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Make a Makeshift Barrel or Crate</td>\\n    <td>Carpentry</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Create a Rudiementary Raft from Found Materials</td>\\n    <td>Carpentry or Ships</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Carve Fine Woodworking</td>\\n    <td>Carpentry or Sculptures</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Wooden Armor or a Wooden Shield Without Craft (Armor)</td>\\n    <td>Carpentry</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Correctly Dye a Garment or Bolt of Cloth</td>\\n    <td>Cloth</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Mend a Sail</td>\\n    <td>Cloth, Clothin, or Ships</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Tailor a Garment to Another Size or Body Shape</td>\\n    <td>Clothing</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Create Temporary Cold-Weather Gear (Grants a +2 Bonus)</td>\\n    <td>Clothing</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Create Padded Armor Without Craft (Armor)</td>\\n    <td>Clothing</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Craft One-Handed Firearm or Two-Handed Firearm</td>\\n    <td>Firearms</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Seige Firearm, Heavy</td>\\n    <td>Firearms</td>\\n    <td>30</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Seige Firearm, Light</td>\\n    <td>Firearms</td>\\n    <td>35</td>\\n  </tr>\\n  <tr>\\n    <td>Locate or Identify Naturally Formed Glass</td>\\n    <td>Glass</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Identify the Work of Famous Jewelers</td>\\n    <td>Jewelry</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Create a Fake Gemstone*</td>\\n    <td>Jewelry</td>\\n    <td>Opposed</td>\\n  </tr>\\n  <tr>\\n    <td>Identify the Sort of Creature From Which a Piece of Leather Came*</td>\\n    <td>Leather</td>\\n    <td>10+</td>\\n  </tr>\\n  <tr>\\n    <td>Skin an Animal and Tan the Hide</td>\\n    <td>Leather</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Create a High-Quality Item From the Hide of a Non-Standard Creature*</td>\\n    <td>Leather</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Create Leather, Studded Leather, or Hide Armor Without Craft (Armor)</td>\\n    <td>Leather</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Aid Another on a Skill Check to Open a Lock*</td>\\n    <td>Locks</td>\\n    <td>5</td>\\n  </tr>\\n  <tr>\\n    <td>Tune a Musical Instrument</td>\\n    <td>Musical Instruments</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Create Paint or Other Pigments from Scratch</td>\\n    <td>Paintings</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Re-create Someone's Likeness from Memory</td>\\n    <td>Paintings</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Re-create Someone's Likeness from an Eyewitness Account</td>\\n    <td>Paintings</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Create a Temporary or Makeshift Kiln</td>\\n    <td>Pottery</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Make a Mold of an Object or Part of a Body</td>\\n    <td>Sculptures</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Ranged Seige Engine, Heavy</td>\\n    <td>Seige Engines</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Ranged Seige Engine, Medium</td>\\n    <td>Seige Engines</td>\\n    <td>25</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Ranged Seige Engine, Light</td>\\n    <td>Seige Engines</td>\\n    <td>30</td>\\n  </tr>\\n  <tr>\\n    <td>Alter Shoes to a Different Size or Foot Shape*</td>\\n    <td>Shoes</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Recognize a Famous Ship and Where it Likely Came From</td>\\n    <td>Ships</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Whether a Stone Wall is Entirely Stone or a Veneer</td>\\n    <td>Stonemasonry</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Create a Temporary Stone Support or Small Rampart with Found Supplies</td>\\n    <td>Stonemasonry</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Mechanical Traps</td>\\n    <td>Traps</td>\\n    <td>Varies</td>\\n  </tr>\\n  <tr>\\n    <td>Determine the Age of a Mechanical Trap</td>\\n    <td>Traps</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Masterwork Weapon on Sight</td>\\n    <td>Weapons</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Crossbow or Bolts</td>\\n    <td>Weapons</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Simple Melee or Thrown Weapon</td>\\n    <td>Weapons</td>\\n    <td>12</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Martial Melee or Thrown Weapon</td>\\n    <td>Weapons</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Exotic Melee or Thrown Weapon</td>\\n    <td>Weapons</td>\\n    <td>18</td>\\n  </tr>\\n  <tr>\\n    <td>Very Simple Item (Wooden Spoon)</td>\\n    <td>Varies</td>\\n    <td>5</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Typical Item (Iron Pot)</td>\\n    <td>Varies</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Famous Maker's Mark</td>\\n    <td>Varies</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Craft High-Quality Item (Bell)</td>\\n    <td>Varies</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Detemine What Culture (e.g. Elves, Frost Giants) Made an Item</td>\\n    <td>Varies</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Complex or Superior Item (Lock)</td>\\n    <td>Varies</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Identify an Obscure Maker's Mark*</td>\\n    <td>Varies</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Determine the Hardness and Hit Points of an Item*</td>\\n    <td>Varies</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Identify the Creator of an Item with No Mark*</td>\\n    <td>Varies</td>\\n    <td>30</td>\\n  </tr>\\n</table>\\n\\nThe table below lists which craft skills to use for certain prominent items and adventuring tools. This list omits obvious items - outfits are made with Craft (clothing), keelboats with Craft (ships),  and so on. More specific skills can also be used instead of the listed skill, such as using Craft (tattoos) instead of Craft (paintings) for a tattoo.\\n\\n<table>\\n  <tr>\\n    <th>Item</th>\\n    <th>Craft Skill</th>\\n  </tr>\\n  <tr>\\n    <td>Alchemist's Lab</td>\\n    <td>Alchemy</td>\\n  </tr>\\n  <tr>\\n    <td>Artisan's Tools</td>\\n    <td>Blacksmithing or Carpentry</td>\\n  </tr>\\n  <tr>\\n    <td>Backpack</td>\\n    <td>Clothing or Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Barding</td>\\n    <td>Armor</td>\\n  </tr>\\n  <tr>\\n    <td>Bedroll</td>\\n    <td>Cloth or Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Caltrops</td>\\n    <td>Weapons</td>\\n  </tr>\\n  <tr>\\n    <td>Cart or Carriage</td>\\n    <td>Carpentry</td>\\n  </tr>\\n  <tr>\\n    <td>Chain</td>\\n    <td>Blacksmithing or Traps</td>\\n  </tr>\\n  <tr>\\n    <td>Chest</td>\\n    <td>Carpentry or Locks</td>\\n  </tr>\\n  <tr>\\n    <td>Climber's Kit</td>\\n    <td>Blacksmithing</td>\\n  </tr>\\n  <tr>\\n    <td>Disguise Kit</td>\\n    <td>Alchemy or Paintings</td>\\n  </tr>\\n  <tr>\\n    <td>Flint and Steel</td>\\n    <td>Blacksmithing or Stonemasonry</td>\\n  </tr>\\n  <tr>\\n    <td>Grappling Hook</td>\\n    <td>Blacksmithing or Weapons</td>\\n  </tr>\\n  <tr>\\n    <td>Gunslinger's Kit</td>\\n    <td>Alchemy or Blacksmithing</td>\\n  </tr>\\n  <tr>\\n    <td>Harrow Deck</td>\\n    <td>Paintings</td>\\n  </tr>\\n  <tr>\\n    <td>Healer's Kit</td>\\n    <td>Alchemy or Cloth</td>\\n  </tr>\\n  <tr>\\n    <td>Hemp Rope</td>\\n    <td>Baskets or Cloth</td>\\n  </tr>\\n  <tr>\\n    <td>Lamp</td>\\n    <td>Blacksmithing or Glass</td>\\n  </tr>\\n  <tr>\\n    <td>Manacles<td>\\n    <td>Blacksmithing or Locks</td>\\n  </tr>\\n  <tr>\\n    <td>Masterwork Tool</td>\\n    <td>Blacksmithing</td>\\n  </tr>\\n  <tr>\\n    <td>Musical Instrument</td>\\n    <td>Musical Instruments</td>\\n  </tr>\\n  <tr>\\n    <td>Saddle</td>\\n    <td>Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Scroll Case</td>\\n    <td>Carpentry or Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Signet Ring</td>\\n    <td>Jewelry</td>\\n  </tr>\\n  <tr>\\n    <td>Silk Rope</td>\\n    <td>Cloth</td>\\n  </tr>\\n  <tr>\\n    <td>Silver Holy Symbol</td>\\n    <td>Blacksmithing or Sculptures</td>\\n  </tr>\\n  <tr>\\n    <td>Skeleton Key</td>\\n    <td>Locks</td>\\n  </tr>\\n  <tr>\\n    <td>Spell Component Pouch/td>\\n    <td>Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Spyglass</td>\\n    <td>Glass</td>\\n  </tr>\\n  <tr>\\n    <td>Tattoo</td>\\n    <td>Paintings</td>\\n  </tr>\\n  <tr>\\n    <td>Tent</td>\\n    <td>Cloth or Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Thieves' Tools</td>\\n    <td>Blacksmithing or Locks</td>\\n  </tr>\\n  <tr>\\n    <td>Waterskin</td>\\n    <td>Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Wood Holy Symbol</td>\\n    <td>Carpentry or Sculptures</td>\\n  </tr>\\n</table>\\n\\nThe following table indicates which Craft skills are typically used to create common worn items. While the normal system for creating magic items doesn't incorporate Craft skills, such skills could reasonably be used while creating a magic item to make it appear especially ornate.\\n\\n<table>\\n  <tr>\\n    <th>Worn Item</th>\\n    <th>Craft Skill</th>\\n  </tr>\\n  <tr>\\n    <td>Amulet</td>\\n    <td>Jewelry</td>\\n  </tr>\\n  <tr>\\n    <td>Belt</td>\\n    <td>Leather or Clothing</td>\\n  </tr>\\n  <tr>\\n    <td>Bracelet</td>\\n    <td>Blacksmithing or Jewelry</td>\\n  </tr>\\n  <tr>\\n    <td>Bracer</td>\\n    <td>Armor or Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Brooch</td>\\n    <td>Jewelry</td>\\n  </tr>\\n  <tr>\\n    <td>Cape or Cloak</td>\\n    <td>Cloth or Clothing</td>\\n  </tr>\\n  <tr>\\n    <td>Circlet</td>\\n    <td>Blacksmithing or Jewelry</td>\\n  </tr>\\n  <tr>\\n    <td>Crown</td>\\n    <td>Blacksmithing or Jewelry</td>\\n  </tr>\\n  <tr>\\n    <td>Gauntlet</td>\\n    <td>Armor</td>\\n  </tr>\\n  <tr>\\n    <td>Girdle</td>\\n    <td>Clothing or Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Glasses or Goggles</td>\\n    <td>Glass</td>\\n  </tr>\\n  <tr>\\n    <td>Glove</td>\\n    <td>Clothing or Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Hat</td>\\n    <td>Clothing or Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Headband</td>\\n    <td>Cloth or Clothing</td>\\n  </tr>\\n  <tr>\\n    <td>Helm</td>\\n    <td>Armor</td>\\n  </tr>\\n  <tr>\\n    <td>Mask</td>\\n    <td>Clothing or Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Necklace</td>\\n    <td>Blacksmithing or Jewelry</td>\\n  </tr>\\n  <tr>\\n    <td>Periapt</td>\\n    <td>Jewelry</td>\\n  </tr>\\n  <tr>\\n    <td>Phylactery</td>\\n    <td>Leather or Carpentry</td>\\n  </tr>\\n  <tr>\\n    <td>Ring</td>\\n    <td>Jewelry</td>\\n  </tr>\\n  <tr>\\n    <td>Robe</td>\\n    <td>Clothing</td>\\n  </tr>\\n  <tr>\\n    <td>Vestments</td>\\n    <td>Clothing</td>\\n  </tr>\\n</table>\",\r\n\t\t\t\t\t\tuntrained: true,\r\n\t\t\t\t\t\tcustomizable: true,\r\n\t\t\t\t\t\tknowledge: false,\r\n\t\t\t\t\t\tblurb: \"You are skilled in the creation of a specific group of items, such as armor or weapons. Like Knowledge, Perform, and Profession, Craft is actually a number of separate skills. You could have several Craft skills, each with its own ranks. The most common Craft skills are alchemy, armor, baskets, books, bows, calligraphy, carpentry, cloth, clothing, glass, jewelry, leather, locks, paintings, pottery, sculptures, ships, shoes, stonemasonry, traps, and weapons.\\n\\nA Craft skill is specifically focused on creating something. If nothing is created by the endeavor, it probably falls under the heading of a Profession skill.\",\r\n\t\t\t\t\t\taction: \"Does not apply. Craft checks are made by the day or week (see above).\",\r\n\t\t\t\t\t\ttry_again: \"Yes, but each time you fail by 5 or more, you ruin half the raw materials and have to pay half the original raw material cost again.\",\r\n\t\t\t\t\t\tspecial: \"You may voluntarily add +10 to the indicated DC to craft an item. This allows you to create the item more quickly (since you’ll be multiplying this higher DC by your Craft check result to determine progress). You must decide whether to increase the DC before you make each weekly or daily check.\\n\\nTo make an item using Craft (alchemy), you must have alchemical equipment. If you are working in a city, you can buy what you need as part of the raw materials cost to make the item, but alchemical equipment is difficult or impossible to come by in some places. Purchasing and maintaining an alchemist’s lab grants a +2 circumstance bonus on Craft (alchemy) checks because you have the perfect tools for the job, but it does not affect the cost of any items made using the skill.\\n\\nThose who wish to construct or repair technological items use Craft (mechanical) in conjunction with technological item crafting feats. Without the Technologist feat, Craft (mechanical) can still be used to craft less advanced forms of technology such as gears, hinges, and pulleys. NPCs with the means of crafting technological items are extremely rare, and it is not assumed that PCs have access to such resources. GMs are encouraged to discuss such considerations with their players before allowing technological crafting into the game.\",\r\n\t\t\t\t\t\tskill_unlock_5: \"When determining your weekly progress, double the result of your Craft check before multiplying the result by the item’s DC.\",\r\n\t\t\t\t\t\tskill_unlock_10: \"You do not ruin any of your raw materials unless you fail a check by 10 or more.\",\r\n\t\t\t\t\t\tskill_unlock_15: \"When you determine your progress, the result of your check is how much work you complete each day in silver pieces.\",\r\n\t\t\t\t\t\tskill_unlock_20: \"You can craft magic armor, magic weapons, magic rings, and wondrous items that fall under your category of Craft using the normal Craft rules.\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 12,\r\n\t\t\t\t\t\tname: \"Heal\",\r\n\t\t\t\t\t\tability_score: \"Wisdom\",\r\n\t\t\t\t\t\tdescription: \"The DC and effect of a Heal check depend on the task you attempt.\\n\\n<table>\\n  <tr>\\n    <th>Task</th>\\n    <th>Heal DC</th>\\n  </tr>\\n  <tr>\\n    <td>First Aid</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Long-Term Care</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Treat Wounds from Caltrops, spike growth, or spike stones</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Treat Deadly Wounds</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Treat Poison</td>\\n    <td>Poison's Save DC</td>\\n  </tr>\\n  <tr>\\n    <td>Treat Disease</td>\\n    <td>Disease's Save DC</td>\\n  </tr>\\n</table>\\n\\nFirst Aid: You usually use first aid to save a dying character. If a character has negative hit points and is losing hit points (at the rate of 1 per round, 1 per hour, or 1 per day), you can make him stable. A stable character regains no hit points but stops losing them. First aid also stops a character from losing hit points due to effects that cause bleed.\\n\\nLong-Term Care: Providing long-term care means treating a wounded person for a day or more. If your Heal check is successful, the patient recovers hit points or ability score points lost to ability damage at twice the normal rate: 2 hit points per level for a full 8 hours of rest in a day, or 4 hit points per level for each full day of complete rest; 2 ability score points for a full 8 hours of rest in a day, or 4 ability score points for each full day of complete rest.\\n\\nYou can tend to as many as six patients at a time. You need a few items and supplies (bandages, salves, and so on) that are easy to come by in settled lands. Giving long-term care counts as light activity for the healer. You cannot give long-term care to yourself.\\n\\nTreat Wounds from Caltrops, Spike Growth, or Spike Stones: A creature wounded by stepping on a caltrop moves at half normal speed. A successful Heal check removes this movement penalty.\\n\\nA creature wounded by a spike growth or spike stones spell must succeed on a Ref lex save or take injuries that reduce his speed by one-third. Another character can remove this penalty by taking 10 minutes to dress the victim’s injuries and succeeding on a Heal check against the spell’s save DC.\\n\\nTreat Deadly Wounds: When treating deadly wounds, you can restore hit points to a damaged creature. Treating deadly wounds restores 1 hit point per level of the creature. If you exceed the DC by 5 or more, add your Wisdom modifier (if positive) to this amount. A creature can only benefit from its deadly wounds being treated within 24 hours of being injured and never more than once per day. You must expend two uses from a healer’s kit to perform this task. You take a –2 penalty on your Heal skill check for each use from the healer’s kit that you lack.\\n\\nTreat Poison: To treat poison means to tend to a single character who has been poisoned and who is going to take more damage from the poison (or suffer some other effect). Every time the poisoned character makes a saving throw against the poison, you make a Heal check. If your Heal check exceeds the DC of the poison, the character receives a +4 competence bonus on his saving throw against the poison.\\n\\nTreat Disease: To treat a disease means to tend to a single diseased character. Every time the diseased character makes a saving throw against disease effects, you make a Heal check. If your Heal check exceeds the DC of the disease, the character receives a +4 competence bonus on his saving throw against the disease.\",\r\n\t\t\t\t\t\tuntrained: true,\r\n\t\t\t\t\t\tcustomizable: false,\r\n\t\t\t\t\t\tknowledge: false,\r\n\t\t\t\t\t\tblurb: \"You are skilled at tending to wounds and ailments.\",\r\n\t\t\t\t\t\taction: \"Providing first aid, treating a wound, or treating poison is a standard action. Treating a disease or tending a creature wounded by a spike growth or spike stones spell takes 10 minutes of work. Treating deadly wounds takes 1 hour of work. Providing long-term care requires 8 hours of light activity.\",\r\n\t\t\t\t\t\ttry_again: \"Varies. Generally speaking, you can’t try a Heal check again without witnessing proof of the original check’s failure. You can always retry a check to provide first aid, assuming the target of the previous attempt is still alive.\",\r\n\t\t\t\t\t\tspecial: \"A healer’s kit gives you a +2 circumstance bonus on Heal checks.\",\r\n\t\t\t\t\t\tskill_unlock_5: \"When you treat deadly wounds, the target recovers hit points and ability damage as if it had rested for a full day.\",\r\n\t\t\t\t\t\tskill_unlock_10: \"When you treat deadly wounds, the target recovers hit points as if it had rested for a full day with long-term care.\",\r\n\t\t\t\t\t\tskill_unlock_15: \"When you treat deadly wounds, the creature recovers hit point and ability damage as if it had rested for 3 days.\",\r\n\t\t\t\t\t\tskill_unlock_20: \"When you treat deadly wounds, the target recovers hit point and ability damage as if it had rested for 3 days with long-term care.\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 13,\r\n\t\t\t\t\t\tname: \"Intimidate\",\r\n\t\t\t\t\t\tability_score: \"Charisma\",\r\n\t\t\t\t\t\tdescription: \"You can use Intimidate to force an opponent to act friendly toward you for 1d6 × 10 minutes with a successful check. The DC of this check is equal to 10 + the target’s Hit Dice + the target’s Wisdom modifier. If successful, the target gives you the information you desire, takes actions that do not endanger it, or otherwise offers limited assistance. After the Intimidate expires, the target treats you as unfriendly and may report you to local authorities. If you fail this check by 5 or more, the target attempts to deceive you or otherwise hinder your activities.\\n\\nDemoralize: You can use this skill to cause an opponent to become shaken for a number of rounds. The DC of this check is equal to 10 + the target’s Hit Dice + the target’s Wisdom modifier. If you are successful, the target is shaken for 1 round. This duration increases by 1 round for every 5 by which you beat the DC. You can only threaten an opponent in this way if it is within 30 feet and can clearly see and hear you. Using demoralize on the same creature only extends the duration; it does not create a stronger fear condition.\",\r\n\t\t\t\t\t\tuntrained: true,\r\n\t\t\t\t\t\tcustomizable: false,\r\n\t\t\t\t\t\tknowledge: false,\r\n\t\t\t\t\t\tblurb: \"You can use this skill to frighten your opponents or to get them to act in a way that benefits you. This skill includes verbal threats and displays of prowess.\",\r\n\t\t\t\t\t\taction: \"Using Intimidate to change an opponent’s attitude requires 1 minute of conversation. Demoralizing an opponent is a standard action.\",\r\n\t\t\t\t\t\ttry_again: \"You can attempt to Intimidate an opponent again, but each additional check increases the DC by +5. This increase resets after 1 hour has passed.\",\r\n\t\t\t\t\t\tspecial: \"You also gain a +4 bonus on Intimidate checks if you are larger than your target and a –4 penalty on Intimidate checks if you are smaller than your target.\",\r\n\t\t\t\t\t\tskill_unlock_5: \"If you exceed the DC to demoralize a target by at least 10, it is frightened for 1 round and shaken thereafter. A Will save (DC = 10 + your number of ranks in Intimidate) negates the frightened condition, but the target is still shaken, even if it has the stalwart ability.\",\r\n\t\t\t\t\t\tskill_unlock_10: \"If you exceed the DC to demoralize a target by at least 10, it is panicked for 1 round or frightened for 1d4 rounds (your choice) and shaken thereafter. A Will save (DC = 10 + your number of ranks in Intimidate) negates the frightened or panicked condition, but the target is still shaken, even if it has the stalwart ability.\",\r\n\t\t\t\t\t\tskill_unlock_15: \"If you exceed the DC to demoralize a target by at least 20, it is cowering for 1 round or panicked for 1d4 rounds (your choice) and frightened thereafter. A Will save (DC = 10 + your number of ranks in Intimidate) negates the cowering, panicked, and frightened conditions, but the target is still shaken, even if it has the stalwart ability.\",\r\n\t\t\t\t\t\tskill_unlock_20: \"If you exceed the DC to demoralize a target by at least 20, it is cowering for 1d4 rounds and panicked thereafter. A Will save (DC = 10 + your number of ranks in Intimidate) negates the cowering and panicked conditions, but the target is still shaken, even if it has the stalwart ability.\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 24,\r\n\t\t\t\t\t\tname: \"Knowledge\",\r\n\t\t\t\t\t\tability_score: \"Intelligence\",\r\n\t\t\t\t\t\tdescription: \"Arcana (ancient mysteries, magic traditions, arcane symbols, constructs, dragons, magical beasts)\\n\\nDungeoneering (aberrations, caverns, oozes, spelunking)\\n\\nEngineering (buildings, aqueducts, bridges, fortifications)\\n\\nGeography (lands, terrain, climate, people)\\n\\nHistory (wars, colonies, migrations, founding of cities)\\n\\nLocal (legends, personalities, inhabitants, laws, customs, traditions, humanoids)\\n\\nNature (animals, fey, monstrous humanoids, plants, seasons and cycles, weather, vermin)\\n\\nNobility (lineages, heraldry, personalities, royalty)\\n\\nPlanes (the Inner Planes, the Outer Planes, the Astral Plane, the Ethereal Plane, outsiders, planar magic)\\n\\nReligion (gods and goddesses, mythic history, ecclesiastic tradition, holy symbols, undead)\\n\\nAnswering a question within your field of study has a DC of 10 (for really easy questions), 15 (for basic questions), or 20 to 30 (for really tough questions).\\n\\nYou can use this skill to identify monsters and their special powers or vulnerabilities. In general, the DC of such a check equals 10 + the monster’s CR. For common monsters, such as goblins, the DC of this check equals 5 + the monster’s CR. For particularly rare monsters, such as the tarrasque, the DC of this check equals 15 + the monster’s CR, or more. A successful check allows you to remember a bit of useful information about that monster. For every 5 points by which your check result exceeds the DC, you recall another piece of useful information. Many of the Knowledge skills have specific uses as noted on the below table.\\n\\n<table>\\n  <tr>\\n    <th>Tasks</th>\\n    <th>Knowledge Skill</th>\\n    <th>DC</th>\\n  </tr>\\n  <tr>\\n    <td>Identify Auras While Using Detect Magic</td>\\n    <td>Arcana</td>\\n    <td>15 + Spell Level</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Spell Effect That Is In Place</td>\\n    <td>Arcana</td>\\n    <td>20 + Spell Level</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Materials Manufactured by Magic</td>\\n    <td>Arcana</td>\\n    <td>20 + Spell Level</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Spell That Just Targeted You</td>\\n    <td>Arcana</td>\\n    <td>25 + Spell Level</td>\\n  </tr>\\n  <tr>\\n    <td>Identify the Spells Cast Using a Specific Material Component</td>\\n    <td>Arcana</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Underground Hazard</td>\\n    <td>Dungeoneering</td>\\n    <td>15 + Hazard's CR</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Mineral, Stone, or Metal</td>\\n    <td>Dungeoneering</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Determine Slope</td>\\n    <td>Dungeoneering</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Determine Depth Underground</td>\\n    <td>Dungeoneering</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Dangerous Construction</td>\\n    <td>Engineering</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Determine a Structure's Style or Age</td>\\n    <td>Engineering</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Determine a Structure's Weakness</td>\\n    <td>Engineering</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Creature's Ethnicity or Accent</td>\\n    <td>Geography</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Recognize Regional Terrain Features</td>\\n    <td>Geography</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Know Location of Nearest Community or Noteworthy Site</td>\\n    <td>Geography</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Know Recent or Historically Significant Date</td>\\n    <td>History</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Determine Approximate Date of Specific Event</td>\\n    <td>History</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Know Obscure or Ancient Historical Event</td>\\n    <td>History</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Know Local Laws, Rulers, and Popular Locations</td>\\n    <td>Local</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Know a Common Rumor or Local Tradition</td>\\n    <td>Local</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Know Hidden Organizations, Rulers, and Locations</td>\\n    <td>Local</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Natural Hazard</td>\\n    <td>Nature</td>\\n    <td>15 + Hazard's CR</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Common Plant or Animal</td>\\n    <td>Nature</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Unnatural Weather Phenomenon</td>\\n    <td>Nature</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Determine Artifical Nature of Feature</td>\\n    <td>Nature</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Know Current Rulers and Their Symbols</td>\\n    <td>Nobility</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Know Proper Etiquette</td>\\n    <td>Nobility</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Know Line of Succession</td>\\n    <td>Nobility</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Know the Names of the Planes</td>\\n    <td>Planes</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Recognize Current Plane</td>\\n    <td>Planes</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Creature's Planar Origin</td>\\n    <td>Planes</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Recognize a Common Deity's Symbol or Clergy</td>\\n    <td>Religion</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Know Common Mythology and Tenets</td>\\n    <td>Religion</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Recognize an Obscure Deity's Symbol or Clergy</td>\\n    <td>Religion</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Monster's Abilities and Weaknesses</td>\\n    <td>Varies</td>\\n    <td>10 + Monster's CR</td>\\n  </tr>\\n</table>\",\r\n\t\t\t\t\t\tuntrained: false,\r\n\t\t\t\t\t\tcustomizable: true,\r\n\t\t\t\t\t\tknowledge: true,\r\n\t\t\t\t\t\tblurb: \"You are educated in a field of study and can answer both simple and complex questions. Like the Craft, Perform, and Profession skills, Knowledge actually encompasses a number of different specialties.\",\r\n\t\t\t\t\t\taction: \"Usually none. In most cases, a Knowledge check doesn’t take an action.\",\r\n\t\t\t\t\t\ttry_again: \"No. The check represents what you know, and thinking about a topic a second time doesn’t let you know something that you never learned in the first place.\",\r\n\t\t\t\t\t\tspecial: \"You cannot make an untrained Knowledge check with a DC higher than 10. If you have access to an extensive library that covers a specific skill, this limit is removed. The time to make checks using a library, however, increases to 1d4 hours. Particularly complete libraries might even grant a bonus on Knowledge checks in the fields that they cover.\",\r\n\t\t\t\t\t\tskill_unlock_5: \"When you successfully identify a creature, you gain one additional piece of information for every 5 ranks you possess in that Knowledge skill.\",\r\n\t\t\t\t\t\tskill_unlock_10: \"When you successfully identify a creature, you gain a +1 competence bonus on attack rolls, opposed ability checks, skill checks, and caster level checks against creatures of that kind (e.g., glabrezu demons, but not other demons or evil outsiders) for 1 minute. This bonus increases by 1 for every 5 ranks beyond 10 you possess in that Knowledge skill.\",\r\n\t\t\t\t\t\tskill_unlock_15: \"When you fail a Knowledge check, you can reroll the check at a –10 penalty. The competence bonus above also applies to saving throws against exceptional, spell-like, or supernatural abilities used by creatures you identify.\",\r\n\t\t\t\t\t\tskill_unlock_20: \"Whenever you attempt a Knowledge check, you can roll twice and take the better result.\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 26,\r\n\t\t\t\t\t\tname: \"Perception\",\r\n\t\t\t\t\t\tability_score: \"Wisdom\",\r\n\t\t\t\t\t\tdescription: \"Perception has a number of uses, the most common of which is an opposed check versus an opponent’s Stealth check to notice the opponent and avoid being surprised. If you are successful, you notice the opponent and can react accordingly. If you fail, your opponent can take a variety of actions, including sneaking past you and attacking you.\\n\\nPerception is also used to notice fine details in the environment. The DC to notice such details varies depending upon distance, the environment, and how noticeable the detail is. The following table gives a number of guidelines.\\n\\n<table>\\n  <tr>\\n    <th>Detail</th>\\n    <th>Perception DC</th>\\n  </tr>\\n  <tr>\\n    <td>Hear the Sound of Battle</td>\\n    <td>-10</td>\\n  </tr>\\n  <tr>\\n    <td>Notice the Stench of Rotting Garbage</td>\\n    <td>-10</td>\\n  </tr>\\n  <tr>\\n    <td>Detect the Smell of Smoke</td>\\n    <td>0</td>\\n  </tr>\\n  <tr>\\n    <td>Hear the Details of a Conversation</td>\\n    <td>0</td>\\n  </tr>\\n  <tr>\\n    <td>Notice a Visible Creature</td>\\n    <td>0</td>\\n  </tr>\\n  <tr>\\n    <td>Determine if Food is Spoiled</td>\\n    <td>5</td>\\n  </tr>\\n  <tr>\\n    <td>Hear the Sound of a Creature Walking</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Hear the Details of a Whispered Conversation</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Find the Average Concealed Door</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Hear the Sound of a Key Being Turned in a Lock</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Find the Average Secret Door</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Hear a Bow Being Drawn</td>\\n    <td>25</td>\\n  </tr>\\n  <tr>\\n    <td>Sense a Burrowing Creature Underneath You</td>\\n    <td>25</td>\\n  </tr>\\n  <tr>\\n    <td>Notice a Pickpocket</td>\\n    <td>Opposed by Sleight of Hand</td>\\n  </tr>\\n  <tr>\\n    <td>Notice a Creature Using Stealth</td>\\n    <td>Opposed by Stealth</td>\\n  </tr>\\n  <tr>\\n    <td>Find a Hidden Trap</td>\\n    <td>Varies by Trap</td>\\n  </tr>\\n  <tr>\\n    <td>Identify the Powers of a Potion through Taste</td>\\n    <td>15 + Potion's Caster Level</td>\\n  </tr>\\n</table>\\n\\n<table>\\n  <tr>\\n    <th>Perception Modifiers</th>\\n    <th>DC Modifier</th>\\n  </tr>\\n  <tr>\\n    <td>Distance to the Source, Object, or Creature</td>\\n    <td>+1 per 10 Feet</td>\\n  </tr>\\n  <tr>\\n    <td>Through a Closed Door</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Through a Wall</td>\\n    <td>+10 per Foot</td>\\n  </tr>\\n  <tr>\\n    <td>Favorable Conditions</td>\\n    <td>-2</td>\\n  </tr>\\n  <tr>\\n    <td>Unfavorable Conditions</td>\\n    <td>+2</td>\\n  </tr>\\n  <tr>\\n    <td>Terrible Conditions</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Creature Making the Check is Distracted</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Creature Making the Check is Asleep</td>\\n    <td>+10</td>\\n  </tr>\\n  <tr>\\n    <td>Creature or Object is Invisible</td>\\n    <td>+20</td>\\n  </tr>\\n</table>\",\r\n\t\t\t\t\t\tuntrained: true,\r\n\t\t\t\t\t\tcustomizable: false,\r\n\t\t\t\t\t\tknowledge: false,\r\n\t\t\t\t\t\tblurb: \"Your senses allow you to notice fine details and alert you to danger. Perception covers all five senses, including sight, hearing, touch, taste, and smell.\",\r\n\t\t\t\t\t\taction: \"Most Perception checks are reactive, made in response to observable stimulus. Intentionally searching for stimulus is a move action.\",\r\n\t\t\t\t\t\ttry_again: \"Yes. You can try to sense something you missed the first time, so long as the stimulus is still present.\",\r\n\t\t\t\t\t\tspecial: \"Creatures with the scent special quality have a +8 bonus on Perception checks made to detect a scent. Creatures with the tremorsense special quality have a +8 bonus on Perception checks against creatures touching the ground and automatically make any such checks within their range.\",\r\n\t\t\t\t\t\tskill_unlock_5: \"You remain alert to sounds even in your sleep, and the normal DC increase to Perception checks when you are sleeping is halved. The distance modifier on the DC of Perception checks you attempt is reduced to +1 per 20 feet.\",\r\n\t\t\t\t\t\tskill_unlock_10: \"The distance modifier on the DC of Perception checks you attempt is reduced to +1 per 30 feet. In addition, you gain a +5 bonus on Perception checks to notice or locate an invisible creature or object.\",\r\n\t\t\t\t\t\tskill_unlock_15: \"You remain alert to sounds even in your sleep, and the normal DC increase to Perception checks when you are sleeping doesn’t apply to you. The distance modifier on the DC of your Perception checks is reduced to +1 per 40 feet.\",\r\n\t\t\t\t\t\tskill_unlock_20: \"You gain a +10 bonus on Perception checks to notice invisible creatures or objects. The distance modifier on the DC of Perception checks you attempt is reduced to +1 per 60 feet.\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 28,\r\n\t\t\t\t\t\tname: \"Profession\",\r\n\t\t\t\t\t\tability_score: \"Wisdom\",\r\n\t\t\t\t\t\tdescription: \"You can earn half your Profession check result in gold pieces per week of dedicated work. You know how to use the tools of your trade, how to perform the profession’s daily tasks, how to supervise helpers, and how to handle common problems. You can also answer questions about your Profession. Basic questions are DC 10, while more complex questions are DC 15 or higher.\\n\\nA profession often encompasses many smaller areas of expertise, and these auxiliary skills can come in handy in situations beyond just making money or answering trade-specific questions. Below are some sample additional uses for Profession skills, and GMs are encouraged to create their own.\\n\\n<table>\\n  <tr>\\n    <th>Task</th>\\n    <th>Profession Skill</th>\\n    <th>DC</th>\\n  </tr>\\n  <tr>\\n    <td>Determine Hardness and Hit Points of a Structure</td>\\n    <td>Architect or Engineer</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Prepare Trail Rations (Takes 1 Hour Per Day's Worth of Rations)</td>\\n    <td>Baker or Cook</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Obtain a Legal Permit</td>\\n    <td>Barrister or Clerk</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Get Somone Released From Jail Who Has Been Imprisoned for a Minor Crime</td>\\n    <td>Barrister</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Ask a Special Favor From a Judge (Such as Arresting Someone)</td>\\n    <td>Barrister</td>\\n    <td>30</td>\\n  </tr>\\n  <tr>\\n    <td>Brew Alcohol of Exceptional Quality</td>\\n    <td>Brewer</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Notice Poison in a Beverage</td>\\n    <td>Brewer</td>\\n    <td>25</td>\\n  </tr>\\n  <tr>\\n    <td>Skin an Animal and Tan the Hide</td>\\n    <td>Butcher, Shepherd, or Tanner</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Slaughter and Butcher an Animal</td>\\n    <td>Butcher, Cook, or Shepherd</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Reduce a Legal Fine or Tax By Half the Result of the Check in gp (up to 75%)</td>\\n    <td>Clerk</td>\\n    <td>20+</td>\\n  </tr>\\n  <tr>\\n    <td>Cook a Meal of Exceptional Quality</td>\\n    <td>Cook</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Notice Poison in Food</td>\\n    <td>Cook</td>\\n    <td>25</td>\\n  </tr>\\n  <tr>\\n    <td>Find Potential Clients within an Establishment or Large Group</td>\\n    <td>Courtesan</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Continue Steering a Vehicle When You Take Damage</td>\\n    <td>Driver or Sailor</td>\\n    <td>5</td>\\n  </tr>\\n  <tr>\\n    <td>Take Cover (As The Ride Skill) While Steering a Vehicle</td>\\n    <td>Driver or Sailor</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Non-Creature Plant</td>\\n    <td>Farmer or Gardener</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Rejuvinate Dying Plants</td>\\n    <td>Farmer or Gardener</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Provide 1 Day's Worth of Food for Yourself and Others in the Wild</td>\\n    <td>Fisherman or Trapper</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Recall the Rules of a Game of Chance</td>\\n    <td>Gambler</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Get a Hunch Regarding Whether a Game is Rigged</td>\\n    <td>Gambler</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Reduce an Average or Lower Cost of Living by 50%</td>\\n    <td>Innkeeper</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Sate Hunger or Thirst for 1 Day</td>\\n    <td>Herbalist</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Common Medicinal Herbs</td>\\n    <td>Herbalist</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Rare Medicinal Herbs</td>\\n    <td>Herbalist</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Aid Another on a Knowledge Check Using Reference Material</td>\\n    <td>Librarian</td>\\n    <td>5</td>\\n  </tr>\\n  <tr>\\n    <td>Recall the Name of a Rare Book</td>\\n    <td>Librarian</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Determine Where an Item was Manufactured</td>\\n    <td>Merchant</td>\\n    <td>10+</td>\\n  </tr>\\n  <tr>\\n    <td>Recall Where a Common Good Fetches a Higher Price</td>\\n    <td>Merchant</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Safely Deliver a Child</td>\\n    <td>Midwife</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Safely Deliver a Child Despite Complications</td>\\n    <td>Midwife</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Grind a Small Piece of Nonmagical Substance into Powder</td>\\n    <td>Miller</td>\\n    <td>10 + Hardness</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Common Metal or Semiprecious Stone</td>\\n    <td>Miner</td>\\n    <td>5</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Rare Metal or Precious Gem</td>\\n    <td>Miner</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Ignore Half Hardness When Attacking a Stone or Metal Object</td>\\n    <td>Miner</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Increase Carrying Capacity for 8 Hours as if Strength were 2 Higher</td>\\n    <td>Porter</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Unload a Vessel in Half the Normal Time</td>\\n    <td>Porter</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Navigate a Ship in Fair Conditions</td>\\n    <td>Sailor</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Pilot a Ship Safely Through a Hazardous Seaway</td>\\n    <td>Sailor</td>\\n    <td>25+</td>\\n  </tr>\\n  <tr>\\n    <td>Determine Which Scribe Wrote a Document</td>\\n    <td>Scribe</td>\\n    <td>10+</td>\\n  </tr>\\n  <tr>\\n    <td>Copy a Document (30 Minutes per Page; Requires a Blank Book)</td>\\n    <td>Scribe</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Illuminate a Manuscript (1 Hour per Page)</td>\\n    <td>Scribe</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Determine the Quality of Woolen Textiles</td>\\n    <td>Shepherd</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Determine Whether a Weapon or Armor is of Masterwork Quality</td>\\n    <td>Soldier</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Estimate the Size of a Military Force</td>\\n    <td>Soldier</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Advantages and Disadvantages of a Military Formation</td>\\n    <td>Soldier</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Keep Horses Fed in the Wild</td>\\n    <td>Stable Master</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Fit or Remove Barding in Half the Normal Time</td>\\n    <td>Stable Master</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Recognize Damaged or Sabotaged Horse Tack</td>\\n    <td>Stable Master</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Determine the Quality of Leatherwork (and Tell If It's Masterwork Quality)</td>\\n    <td>Tanner</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Aid Another on an Skill Check to Get Out of a Trap or Snare</td>\\n    <td>Trapper</td>\\n    <td>5</td>\\n  </tr>\\n  <tr>\\n    <td>Reset a Trap in Half the Normal Amount of Time</td>\\n    <td>Trapper</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Scavenge Wood Suitable for Campfire or Shelter</td>\\n    <td>Woodcutter</td>\\n    <td>5</td>\\n  </tr>\\n  <tr>\\n    <td>Ignore Half Hardness When Attacking Wooden Object</td>\\n    <td>Woodcutter</td>\\n    <td>20</td>\\n  </tr>\\n</table>\",\r\n\t\t\t\t\t\tuntrained: false,\r\n\t\t\t\t\t\tcustomizable: true,\r\n\t\t\t\t\t\tknowledge: false,\r\n\t\t\t\t\t\tblurb: \"You are skilled at a specific job. Like Craft, Knowledge, and Perform, Profession is actually a number of separate skills. You could have several Profession skills, each with its own ranks. While a Craft skill represents ability in creating an item, a Profession skill represents an aptitude in a vocation requiring a broader range of less specific knowledge. The most common Profession skills are architect, baker, barrister, brewer, butcher, clerk, cook, courtesan, driver, engineer, farmer, f isherman, gambler, gardener, herbalist, innkeeper, librarian, merchant, midwife, miller, miner, porter, sailor, scribe, shepherd, stable master, soldier, tanner, trapper, and woodcutter.\",\r\n\t\t\t\t\t\taction: \"Not applicable. A single check generally represents a week of work.\",\r\n\t\t\t\t\t\ttry_again: \"Varies. An attempt to use a Profession skill to earn income cannot be retried. You are stuck with whatever weekly wage your check result brought you. Another check may be made after a week to determine a new income for the next period of time. An attempt to accomplish some specific task can usually be retried.\",\r\n\t\t\t\t\t\tspecial: \"Untrained laborers and assistants (that is, characters without any ranks in Profession) earn an average of 1 silver piece per day.\",\r\n\t\t\t\t\t\tskill_unlock_5: \"When using Profession checks to earn income, you earn gold pieces equal to the result of your check each week.\",\r\n\t\t\t\t\t\tskill_unlock_10: \"When attempting Profession checks, you can roll twice and take the better result. When answering questions about your Profession, you can always take 10.\",\r\n\t\t\t\t\t\tskill_unlock_15: \"You can attempt checks to earn income once per day instead of once per week.\",\r\n\t\t\t\t\t\tskill_unlock_20: \"When attempting Profession checks, you can choose to roll once instead of twice. If you do and the result of the roll is less than 10, replace it with 10. When answering questions about your Profession, you can always take 20.\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 33,\r\n\t\t\t\t\t\tname: \"Stealth\",\r\n\t\t\t\t\t\tability_score: \"Dexterity\",\r\n\t\t\t\t\t\tdescription: \"Your Stealth check is opposed by the Perception check of anyone who might notice you. Creatures that fail to beat your Stealth check are not aware of you and treat you as if you had total concealment. You can move up to half your normal speed and use Stealth at no penalty. When moving at a speed greater than half but less than your normal speed, you take a –5 penalty. It’s impossible to use Stealth while attacking, running, or charging.\\n\\nCreatures gain a bonus or penalty on Stealth checks based on their size: Fine +16, Diminutive +12, Tiny +8, Small +4, Medium +0, Large –4, Huge –8, Gargantuan –12, Colossal –16.\\n\\nIf people are observing you using any of their senses (but typically sight), you can’t use Stealth. Against most creatures, finding cover or concealment allows you to use Stealth. If your observers are momentarily distracted (such as by a Bluff check), you can attempt to use Stealth. While the others turn their attention from you, you can attempt a Stealth check if you can get to an unobserved place of some kind. This check, however, is made at a –10 penalty because you have to move fast.\\n\\nBreaking Stealth: When you start your turn using Stealth, you can leave cover or concealment and remain unobserved as long as you succeed at a Stealth check and end your turn in cover or concealment. Your Stealth immediately ends after you make an attack roll, whether or not the attack is successful (except when sniping as noted below).\\n\\nSniping: If you’ve already successfully used Stealth at least 10 feet from your target, you can make one ranged attack and then immediately use Stealth again. You take a –20 penalty on your Stealth check to maintain your obscured location.\\n\\nCreating a Diversion to Hide: You can use Bluff to allow you to use Stealth. A successful Bluff check opposed by the viewer’s Sense Motive can give you the momentary diversion you need to attempt a Stealth check while people are aware of you.\",\r\n\t\t\t\t\t\tuntrained: true,\r\n\t\t\t\t\t\tcustomizable: false,\r\n\t\t\t\t\t\tknowledge: false,\r\n\t\t\t\t\t\tblurb: \"You are skilled at avoiding detection, allowing you to slip past foes or strike from an unseen position. This skill covers hiding and moving silently.\",\r\n\t\t\t\t\t\taction: \"Usually none. Normally, you make a Stealth check as part of movement, so it doesn’t take a separate action. However, using Stealth immediately after a ranged attack (see Sniping, above) is a move action.\",\r\n\t\t\t\t\t\ttry_again: \"\",\r\n\t\t\t\t\t\tspecial: \"If you are invisible, you gain a +40 bonus on Stealth checks if you are immobile, or a +20 bonus on Stealth checks if you’re moving.\\n\\nIf people are observing you using any of their senses (but typically sight), you can’t use Stealth. Against most creatures, finding cover or concealment allows you to use Stealth. If your observers are momentarily distracted (such as by a Bluff check), you can attempt to use Stealth. While the others turn their attention from you, you can attempt a Stealth check if you can get to an unobserved place of some kind. This check, however, is made at a –10 penalty because you have to move fast.\",\r\n\t\t\t\t\t\tskill_unlock_5: \"Reduce the Stealth penalty from sniping by 10.\",\r\n\t\t\t\t\t\tskill_unlock_10: \"Stealth check penalties for moving quickly are halved, including the ability unlocked at 5 ranks, moving full speed, and reaching concealment after creating a distraction.\",\r\n\t\t\t\t\t\tskill_unlock_15: \"If you attack after successfully using Stealth, your target is denied its Dexterity bonus against all attacks that you make before the end of your turn.\",\r\n\t\t\t\t\t\tskill_unlock_20: \"If you attack after successfully using Stealth, your target is denied its Dexterity bonus against all attacks that you make before the beginning of your next turn.\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 36,\r\n\t\t\t\t\t\tname: \"Use Magic Device\",\r\n\t\t\t\t\t\tability_score: \"Charisma\",\r\n\t\t\t\t\t\tdescription: \"You can use this skill to read a spell or to activate a magic item. Use Magic Device lets you use a magic item as if you had the spell ability or class features of another class, as if you were a different race, or as if you were of a different alignment.\\n\\nYou make a Use Magic Device check each time you activate a device such as a wand. If you are using the check to emulate an alignment or some other quality in an ongoing manner, you need to make the relevant Use Magic Device check once per hour.\\n\\nYou must consciously choose which requirement to emulate. That is, you must know what you are trying to emulate when you make a Use Magic Device check for that purpose. The DCs for various tasks involving Use Magic Device checks are summarized on the table below.\\n\\n<table>\\n  <tr>\\n    <th>Task</th>\\n    <th>Use Magic Device DC</th>\\n  </tr>\\n  <tr>\\n    <td>Activate Blindly</td>\\n    <td>25</td>\\n  </tr>\\n  <tr>\\n    <td>Decipher a Written Scroll</td>\\n    <td>25 + Spell Level</td>\\n  </tr>\\n  <tr>\\n    <td>Use a Scroll</td>\\n    <td>20 + Caster Level</td>\\n  </tr>\\n  <tr>\\n    <td>Use a Wand</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Emulate a Class Feature</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Emulate an Ability Score</td>\\n    <td>See Text</td>\\n  </tr>\\n  <tr>\\n    <td>Emulate an Ancestry</td>\\n    <td>25</td>\\n  </tr>\\n  <tr>\\n    <td>Emulate an Alignment</td>\\n    <td>30</td>\\n  </tr>\\n</table>\\n\\nActivate Blindly: Some magic items are activated by special words, thoughts, or actions. You can activate such an item as if you were using the activation word, thought, or action, even when you’re not and even if you don’t know it. You do have to perform some equivalent activity in order to make the check. That is, you must speak, wave the item around, or otherwise attempt to get it to activate. You get a +2 bonus on your Use Magic Device check if you’ve activated the item in question at least once before. If you fail by 9 or less, you can’t activate the device. If you fail by 10 or more, you suffer a mishap. A mishap means that magical energy gets released but doesn’t do what you wanted it to do. The default mishaps are that the item affects the wrong target or that uncontrolled magical energy is released, dealing 2d6 points of damage to you. This mishap is in addition to the chance for a mishap that you normally risk when you cast a spell from a scroll that you could not otherwise cast yourself.\\n\\nDecipher a Written Spell: This usage works just like deciphering a written spell with the Spellcraft skill, except that the DC is 5 points higher. Deciphering a written spell requires 1 minute of concentration.\\n\\nEmulate an Ability Score: To cast a spell from a scroll, you need a high score in the appropriate ability (Intelligence for wizard spells, Wisdom for divine spells, or Charisma for sorcerer or bard spells). Your effective ability score (appropriate to the class you’re emulating when you try to cast the spell from the scroll) is your Use Magic Device check result minus 15. If you already have a high enough score in the appropriate ability, you don’t need to make this check.\\n\\nEmulate an Alignment: Some magic items have positive or negative effects based on the user’s alignment. Use Magic Device lets you use these items as if you were of an alignment of your choice. You can emulate only one alignment at a time.\\n\\nEmulate a Class Feature: Sometimes you need to use a class feature to activate a magic item. In this case, your effective level in the emulated class equals your Use Magic Device check result minus 20. This skill does not let you actually use the class feature of another class. It just lets you activate items as if you had that class feature. If the class whose feature you are emulating has an alignment requirement, you must meet it, either honestly or by emulating an appropriate alignment with a separate Use Magic Device check (see above).\\n\\nEmulate an Ancestry: Some magic items work only for members of certain ancestries, or work better for members of those ancestries. You can use such an item as if you were a member of an ancestry of your choice. You can emulate only one ancestry at a time.\\n\\nUse a Scroll: Normally, to cast a spell from a scroll, you must have the scroll’s spell on your class spell list. Use Magic Device allows you to use a scroll as if you had a particular spell on your class spell list. The DC is equal to 20 + the caster level of the spell you are trying to cast from the scroll. In addition, casting a spell from a scroll requires a minimum score (10 + spell level) in the appropriate ability. If you don’t have a sufficient score in that ability, you must emulate the ability score with a separate Use Magic Device check.\\n\\nThis use of the skill also applies to other spell completion magic items.\\n\\nUse a Wand, Staff, or Other Spell Trigger Item: Normally, to use a wand, you must have the wand’s spell on your class spell list. This use of the skill allows you to use a wand as if you had a particular spell on your class spell list. Failing the roll does not expend a charge.\",\r\n\t\t\t\t\t\tuntrained: false,\r\n\t\t\t\t\t\tcustomizable: false,\r\n\t\t\t\t\t\tknowledge: false,\r\n\t\t\t\t\t\tblurb: \"You are skilled at activating magic items, even if you are not otherwise trained in their use.\",\r\n\t\t\t\t\t\taction: \"None. The Use Magic Device check is made as part of the action (if any) required to activate the magic item.\",\r\n\t\t\t\t\t\ttry_again: \"Yes, but if you ever roll a natural 1 while attempting to activate an item and you fail, then you can’t try to activate that item again for 24 hours.\",\r\n\t\t\t\t\t\tspecial: \"You cannot take 10 with this skill. You can’t aid another on Use Magic Device checks. Only the user of the item may attempt such a check.\",\r\n\t\t\t\t\t\tskill_unlock_5: \"You can use the aid another action to assist another creature’s Use Magic Device check by attempting a check against the item’s Use Magic Device DC.\",\r\n\t\t\t\t\t\tskill_unlock_10: \"If you roll a natural 1 when activating an item, you take a –10 penalty on Use Magic Device checks with that item for 24 hours instead of being unable to activate it. This penalty stacks with itself.\",\r\n\t\t\t\t\t\tskill_unlock_15: \"You can use this skill to emulate two ancestries or two alignments simultaneously.\",\r\n\t\t\t\t\t\tskill_unlock_20: \"If you roll a natural 1 when activating an item, you can reroll the check at a –10 penalty to activate the item. You must take the result of the second check, even if it is worse, and you can’t reroll it again.\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 1,\r\n\t\t\t\t\t\tname: \"Acrobatics\",\r\n\t\t\t\t\t\tability_score: \"Dexterity\",\r\n\t\t\t\t\t\tdescription: \"You can use Acrobatics to move on narrow surfaces and uneven ground without falling. A successful check allows you to move at half speed across such surfaces—only one check is needed per round. Use the following table to determine the base DC, which is then modified by the Acrobatics skill modifiers noted below. While you are using Acrobatics in this way, you are considered flat-footed and lose your Dexterity bonus to your AC (if any). If you take damage while using Acrobatics, you must immediately make another Acrobatics check at the same DC to avoid falling or being knocked prone. *No Acrobatics check is needed to move across these surfaces unless the modifiers increase the DC to 10 or higher.\\n\\n<table>\\n  <tr>\\n    <th>Surface Width</th>\\n    <th>Base Acrobatics DC</th>\\n  </tr>\\n  <tr>\\n    <td>Greater Than 3 Feet Wide</td>\\n    <td>0*</td>\\n  </tr>\\n  <tr>\\n    <td>1-3 Feet Wide</td>\\n    <td>5*</td>\\n  </tr>\\n  <tr>\\n    <td>7-11 Inches Wide</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>2-6 Inches Wide</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Less Than 2 Inches Wide</td>\\n    <td>20</td>\\n  </tr>\\n</table>\\n\\nIn addition, you can move through a threatened square without provoking an attack of opportunity from an enemy by using Acrobatics. When moving in this way, you move at half speed. You can move at full speed by increasing the DC of the check by 10. You cannot use Acrobatics to move past foes if your speed is reduced due to carrying a medium or heavy load or wearing medium or heavy armor. If an ability allows you to move at full speed under such conditions, you can use Acrobatics to move past foes. You can use Acrobatics in this way while prone, but doing so requires a full-round action to move 5 feet, and the DC is increased by 5. If you attempt to move through an enemy’s space and fail the check, you lose the move action and provoke an attack of opportunity. *This DC is used to avoid an attack of opportunity due to movement. This DC increases by 2 for each additional opponent avoided in 1 round.\\n\\n<table>\\n  <tr>\\n    <th>Situation</th>\\n    <th>Base Acrobatics DC*</th>\\n  </tr>\\n  <tr>\\n    <td>Move Through a Threatened Area</td>\\n    <td>Opponent's Combat Maneuver Defense</td>\\n  </tr>\\n  <tr>\\n    <td>Move Through an Enemy's Space</td>\\n    <td>5 + Opponent's Combat Maneuver Defense</td>\\n  </tr>\\n</table>\\n\\nFinally, you can use the Acrobatics skill to make jumps or to soften a fall. The base DC to make a jump is equal to the distance to be crossed (if horizontal) or four times the height to be reached (if vertical). These DCs double if you do not have at least 10 feet of space to get a running start. The only Acrobatics modifiers that apply are those concerning the surface you are jumping from. If you fail this check by 4 or less, you can attempt a DC 20 Reflex save to grab hold of the other side after having missed the jump. If you fail by 5 or more, you fail to make the jump and fall (or land prone, in the case of a vertical jump).\\n\\nCreatures with a base land speed above 30 feet receive a +4 racial bonus on Acrobatics checks made to jump for every 10 feet of their speed above 30 feet. Creatures with a base land speed below 30 feet receive a –4 racial bonus on Acrobatics checks made to jump for every 10 feet of their speed below 30 feet. No jump can allow you to exceed your maximum movement for the round.\\n\\nFor a running jump, the result of your Acrobatics check indicates the distance traveled in the jump (and if the check fails, the distance at which you actually land and fall prone). Halve this result for a standing long jump to determine where you land.\\n\\nWhen you deliberately fall any distance, even as a result of a missed jump, a DC 15 Acrobatics skill check allows you to ignore the first 10 feet fallen, although you still end up prone if you take damage from a fall.\\n\\n<table>\\n  <tr>\\n    <th>Long Jump</th>\\n    <th>Acrobatics DC</th>\\n  </tr>\\n  <tr>\\n    <td>5 Feet</td>\\n    <td>5</td>\\n  </tr>\\n  <tr>\\n    <td>10 Feet</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>15 Feet</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>20 Feet</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Greater Than 20 Feet</td>\\n    <td>+5 per 5 Feet</td>\\n  </tr>\\n</table>\\n\\n<table>\\n  <tr>\\n    <th>High Jump</th>\\n    <th>Acrobatics DC</th>\\n  </tr>\\n  <tr>\\n    <td>1 Foot</td>\\n    <td>4</td>\\n  </tr>\\n  <tr>\\n    <td>2 Feet</td>\\n    <td>8</td>\\n  </tr>\\n  <tr>\\n    <td>3 Feet</td>\\n    <td>12</td>\\n  </tr>\\n  <tr>\\n    <td>4 Feet</td>\\n    <td>16</td>\\n  </tr>\\n  <tr>\\n    <td>Greater Than 4 Feet</td>\\n    <td>+4 per Foot</td>\\n  </tr>\\n</table>\\n\\nThe following modifiers apply to all Acrobatics skill checks. The modifiers stack with one another, but only the most severe modifier for any given condition applies.\\n\\n<table>\\n  <tr>\\n    <th>Acrobatics Modifiers</th>\\n    <th>DC Modifier</th>\\n  </tr>\\n  <tr>\\n    <td>Slightly Obstructed (Gravel, Sand)</td>\\n    <td>+2</td>\\n  </tr>\\n  <tr>\\n    <td>Severyly Obstructed (Cavern, Rubble)</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Slightly Slippery (Wet)</td>\\n    <td>+2</td>\\n  </tr>\\n  <tr>\\n    <td>Severly Slippery</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Slightly Sloped (<45 degrees)</td>\\n    <td>+2</td>\\n  </tr>\\n  <tr>\\n    <td>Severly Sloped (>45 degrees)</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Slightly Unsteady (Boat in Rough Water)</td>\\n    <td>+2</td>\\n  </tr>\\n  <tr>\\n    <td>Moderately Unsteady (Boat in a Storm)</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Move at Full Speed on Narrow or Uneven Surfaces</td>\\n    <td>+5 (not to Jumps)</td>\\n  </tr>\\n</table>\",\r\n\t\t\t\t\t\tuntrained: true,\r\n\t\t\t\t\t\tcustomizable: false,\r\n\t\t\t\t\t\tknowledge: false,\r\n\t\t\t\t\t\tblurb: \"You can keep your balance while traversing narrow or treacherous surfaces. You can also dive, flip, jump, and roll, avoiding attacks and confusing your opponents.\",\r\n\t\t\t\t\t\taction: \"None. An Acrobatics check is made as part of another action or as a reaction to a situation.\",\r\n\t\t\t\t\t\ttry_again: \"\",\r\n\t\t\t\t\t\tspecial: \"If you have 3 or more ranks in Acrobatics, you gain a +3 dodge bonus to AC when fighting defensively instead of the usual +2, and a +6 dodge bonus to AC when taking the total defense action instead of the usual +4.\",\r\n\t\t\t\t\t\tskill_unlock_5: \"You can move at normal speed through a threatened square without provoking an attack of opportunity by increasing the DC of the check by 5 (instead of by 10). You aren’t denied your Dexterity bonus when attempting Acrobatics checks with DCs of 20 or lower.\",\r\n\t\t\t\t\t\tskill_unlock_10: \"You can attempt an Acrobatics check at a –10 penalty and use the result as your CMD against trip maneuvers. You can also attempt an Acrobatics check at a –10 penalty in place of a Reflex save to avoid falling. You must choose to use this ability before the trip attempt or Reflex save is rolled. With a successful DC 20 Acrobatics check, you treat an unintentional fall as 10 feet shorter plus 10 feet for every 10 by which you exceed the DC, and treat an intentional fall as 10 feet shorter for every 10 by which you exceed the DC.\",\r\n\t\t\t\t\t\tskill_unlock_15: \"You do not provoke attacks of opportunity when standing up from prone.\",\r\n\t\t\t\t\t\tskill_unlock_20: \"You double the result of any Acrobatics check when jumping and never fall prone at the end of a fall as long as you remain conscious.\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 5,\r\n\t\t\t\t\t\tname: \"Craft\",\r\n\t\t\t\t\t\tability_score: \"Intelligence\",\r\n\t\t\t\t\t\tdescription: \"You can practice your trade and make a decent living, earning half your check result in gold pieces per week of dedicated work. You know how to use the tools of your trade, how to perform the craft’s daily tasks, how to supervise untrained helpers, and how to handle common problems. (Untrained laborers and assistants earn an average of 1 silver piece per day.)\\n\\nThe basic function of the Craft skill, however, is to allow you to make an item of the appropriate type. The DC depends on the complexity of the item to be created. The DC, your check result, and the price of the item determine how long it takes to make a particular item. The item’s finished price also determines the cost of raw materials.\\n\\nTo determine how much time and money it takes to make an item, follow these steps.\\n\\n1) Find the item’s price in silver pieces (1 gp = 10 sp).\\n\\n2) Find the item’s DC from Table: Craft Skills.\\n\\n3) Pay 1/3 of the item’s price for the raw material cost.\\n\\n4) Make an appropriate Craft check representing one week’s worth of work. If the check succeeds, multiply your check result by the DC. If the result × the DC equals the price of the item in sp, then you have completed the item. (If the result × the DC equals double or triple the price of the item in silver pieces, then you’ve completed the task in one-half or one-third of the time. Other multiples of the DC reduce the time in the same manner.) If the result × the DC doesn’t equal the price, then it represents the progress you’ve made this week. Record the result and make a new Craft check for the next week. Each week, you make more progress until your total reaches the price of the item in silver pieces.\\n\\nIf you fail a check by 4 or less, you make no progress this week (or day, see below). If you miss by 5 or more, you ruin half the raw materials and have to pay half the original raw material cost again.\\n\\nTools: All crafts require artisan’s tools to give the best chance of success. If improvised tools are used, the check is made with a –2 penalty. On the other hand, masterwork artisan’s tools provide a +2 circumstance bonus on the check.\\n\\nFabricate Spell: In some cases, the fabricate spell can be used to achieve the results of a Craft check with no actual check involved. You must still make an appropriate Craft check when using the spell to make articles requiring a high degree of craftsmanship.\\n\\nIronwood Spell: A successful Craft check related to woodworking in conjunction with the casting of the ironwood spell enables you to make wooden items that have the strength of steel.\\n\\nMinor Creation: When casting the spell minor creation, you must succeed on an appropriate Craft check to make a complex item.\\n\\nProgress by the Day: You can make checks by the day instead of by the week. In this case your progress (check result × DC) should be divided by the number of days in a week.\\n\\nCreate Masterwork Items: You can make a masterwork item: a weapon, suit of armor, shield, or tool that conveys a bonus on its use through its exceptional craftsmanship. To create a masterwork item, you create the masterwork component as if it were a separate item in addition to the standard item. The masterwork component has its own price (300 gp for a weapon or 150 gp for a suit of armor or a shield, see Chapter 6 for the price of other masterwork tools) and a Craft DC of 20. Once both the standard component and the masterwork component are completed, the masterwork item is finished. The cost you pay for the masterwork component is one-third of the given amount, just as it is for the cost in raw materials.\\n\\nRepair Items: You can repair an item by making checks against the same DC that it took to make the item in the first place. The cost of repairing an item is one-fifth of the item’s price.\\n\\n*You must be trained in the listed skill to attempt this task.\\n\\n<table>\\n  <tr>\\n    <th>Item/Task</th>\\n    <th>Craft Skill</th>\\n    <th>Craft DC</th>\\n  </tr>\\n  <tr>\\n    <td>Craft Acid</td>\\n    <td>Alchemy</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Determine the Items an Alchemist Makes with Substances from Their Lab*</td>\\n    <td>Alchemy</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Alchemist's Fire, Smokestick, or Tindertwig</td>\\n    <td>Alchemy</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Antitoxin, Sunrod, Tanglefoot Bag, or Thunderstone</td>\\n    <td>Alchemy</td>\\n    <td>25</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Armor or Shield</td>\\n    <td>Armor</td>\\n    <td>10 + AC Bonus</td>\\n  </tr>\\n  <tr>\\n    <td>Etch Metal Armor Plates with Decorative Designs</td>\\n    <td>Armor or Paintings</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Suit of Masterwork Armor on Sight</td>\\n    <td>Armor</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Determine What Type of Environment a Basket's Material Came From</td>\\n    <td>Baskets</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Determine the Specific Region a Basket's Material Came From</td>\\n    <td>Baskets</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Smelt Ore and Refine the Metal</td>\\n    <td>Blacksmithing</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Create Armor Spikes or Shield Spikes Without Craft (Armor)*</td>\\n    <td>Blacksmithing</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Determine a Book's Approxiamte Age</td>\\n    <td>Books</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Composite Bow on Site</td>\\n    <td>Bows</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Longbow, Shortbow, or Arrows</td>\\n    <td>Bows</td>\\n    <td>12</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Composite Longbow or Composite Shortbow</td>\\n    <td>Bows</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Masterwork Bow on Sight</td>\\n    <td>Bows</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Composite Longbow or Composite Shortbow With High Strength Rating</td>\\n    <td>Bows</td>\\n    <td>15 + (2 x Rating)</td>\\n  </tr>\\n  <tr>\\n    <td>Determine a Writer's Experience Level and Handedness*</td>\\n    <td>Calligraphy</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Write an Invitation That Matches Appropriate Social Conventions</td>\\n    <td>Calligraphy</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Make a Makeshift Barrel or Crate</td>\\n    <td>Carpentry</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Create a Rudiementary Raft from Found Materials</td>\\n    <td>Carpentry or Ships</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Carve Fine Woodworking</td>\\n    <td>Carpentry or Sculptures</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Wooden Armor or a Wooden Shield Without Craft (Armor)</td>\\n    <td>Carpentry</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Correctly Dye a Garment or Bolt of Cloth</td>\\n    <td>Cloth</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Mend a Sail</td>\\n    <td>Cloth, Clothin, or Ships</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Tailor a Garment to Another Size or Body Shape</td>\\n    <td>Clothing</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Create Temporary Cold-Weather Gear (Grants a +2 Bonus)</td>\\n    <td>Clothing</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Create Padded Armor Without Craft (Armor)</td>\\n    <td>Clothing</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Craft One-Handed Firearm or Two-Handed Firearm</td>\\n    <td>Firearms</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Seige Firearm, Heavy</td>\\n    <td>Firearms</td>\\n    <td>30</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Seige Firearm, Light</td>\\n    <td>Firearms</td>\\n    <td>35</td>\\n  </tr>\\n  <tr>\\n    <td>Locate or Identify Naturally Formed Glass</td>\\n    <td>Glass</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Identify the Work of Famous Jewelers</td>\\n    <td>Jewelry</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Create a Fake Gemstone*</td>\\n    <td>Jewelry</td>\\n    <td>Opposed</td>\\n  </tr>\\n  <tr>\\n    <td>Identify the Sort of Creature From Which a Piece of Leather Came*</td>\\n    <td>Leather</td>\\n    <td>10+</td>\\n  </tr>\\n  <tr>\\n    <td>Skin an Animal and Tan the Hide</td>\\n    <td>Leather</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Create a High-Quality Item From the Hide of a Non-Standard Creature*</td>\\n    <td>Leather</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Create Leather, Studded Leather, or Hide Armor Without Craft (Armor)</td>\\n    <td>Leather</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Aid Another on a Skill Check to Open a Lock*</td>\\n    <td>Locks</td>\\n    <td>5</td>\\n  </tr>\\n  <tr>\\n    <td>Tune a Musical Instrument</td>\\n    <td>Musical Instruments</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Create Paint or Other Pigments from Scratch</td>\\n    <td>Paintings</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Re-create Someone's Likeness from Memory</td>\\n    <td>Paintings</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Re-create Someone's Likeness from an Eyewitness Account</td>\\n    <td>Paintings</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Create a Temporary or Makeshift Kiln</td>\\n    <td>Pottery</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Make a Mold of an Object or Part of a Body</td>\\n    <td>Sculptures</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Ranged Seige Engine, Heavy</td>\\n    <td>Seige Engines</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Ranged Seige Engine, Medium</td>\\n    <td>Seige Engines</td>\\n    <td>25</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Ranged Seige Engine, Light</td>\\n    <td>Seige Engines</td>\\n    <td>30</td>\\n  </tr>\\n  <tr>\\n    <td>Alter Shoes to a Different Size or Foot Shape*</td>\\n    <td>Shoes</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Recognize a Famous Ship and Where it Likely Came From</td>\\n    <td>Ships</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Whether a Stone Wall is Entirely Stone or a Veneer</td>\\n    <td>Stonemasonry</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Create a Temporary Stone Support or Small Rampart with Found Supplies</td>\\n    <td>Stonemasonry</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Mechanical Traps</td>\\n    <td>Traps</td>\\n    <td>Varies</td>\\n  </tr>\\n  <tr>\\n    <td>Determine the Age of a Mechanical Trap</td>\\n    <td>Traps</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Masterwork Weapon on Sight</td>\\n    <td>Weapons</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Crossbow or Bolts</td>\\n    <td>Weapons</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Simple Melee or Thrown Weapon</td>\\n    <td>Weapons</td>\\n    <td>12</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Martial Melee or Thrown Weapon</td>\\n    <td>Weapons</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Exotic Melee or Thrown Weapon</td>\\n    <td>Weapons</td>\\n    <td>18</td>\\n  </tr>\\n  <tr>\\n    <td>Very Simple Item (Wooden Spoon)</td>\\n    <td>Varies</td>\\n    <td>5</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Typical Item (Iron Pot)</td>\\n    <td>Varies</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Famous Maker's Mark</td>\\n    <td>Varies</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Craft High-Quality Item (Bell)</td>\\n    <td>Varies</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Detemine What Culture (e.g. Elves, Frost Giants) Made an Item</td>\\n    <td>Varies</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Complex or Superior Item (Lock)</td>\\n    <td>Varies</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Identify an Obscure Maker's Mark*</td>\\n    <td>Varies</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Determine the Hardness and Hit Points of an Item*</td>\\n    <td>Varies</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Identify the Creator of an Item with No Mark*</td>\\n    <td>Varies</td>\\n    <td>30</td>\\n  </tr>\\n</table>\\n\\nThe table below lists which craft skills to use for certain prominent items and adventuring tools. This list omits obvious items - outfits are made with Craft (clothing), keelboats with Craft (ships),  and so on. More specific skills can also be used instead of the listed skill, such as using Craft (tattoos) instead of Craft (paintings) for a tattoo.\\n\\n<table>\\n  <tr>\\n    <th>Item</th>\\n    <th>Craft Skill</th>\\n  </tr>\\n  <tr>\\n    <td>Alchemist's Lab</td>\\n    <td>Alchemy</td>\\n  </tr>\\n  <tr>\\n    <td>Artisan's Tools</td>\\n    <td>Blacksmithing or Carpentry</td>\\n  </tr>\\n  <tr>\\n    <td>Backpack</td>\\n    <td>Clothing or Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Barding</td>\\n    <td>Armor</td>\\n  </tr>\\n  <tr>\\n    <td>Bedroll</td>\\n    <td>Cloth or Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Caltrops</td>\\n    <td>Weapons</td>\\n  </tr>\\n  <tr>\\n    <td>Cart or Carriage</td>\\n    <td>Carpentry</td>\\n  </tr>\\n  <tr>\\n    <td>Chain</td>\\n    <td>Blacksmithing or Traps</td>\\n  </tr>\\n  <tr>\\n    <td>Chest</td>\\n    <td>Carpentry or Locks</td>\\n  </tr>\\n  <tr>\\n    <td>Climber's Kit</td>\\n    <td>Blacksmithing</td>\\n  </tr>\\n  <tr>\\n    <td>Disguise Kit</td>\\n    <td>Alchemy or Paintings</td>\\n  </tr>\\n  <tr>\\n    <td>Flint and Steel</td>\\n    <td>Blacksmithing or Stonemasonry</td>\\n  </tr>\\n  <tr>\\n    <td>Grappling Hook</td>\\n    <td>Blacksmithing or Weapons</td>\\n  </tr>\\n  <tr>\\n    <td>Gunslinger's Kit</td>\\n    <td>Alchemy or Blacksmithing</td>\\n  </tr>\\n  <tr>\\n    <td>Harrow Deck</td>\\n    <td>Paintings</td>\\n  </tr>\\n  <tr>\\n    <td>Healer's Kit</td>\\n    <td>Alchemy or Cloth</td>\\n  </tr>\\n  <tr>\\n    <td>Hemp Rope</td>\\n    <td>Baskets or Cloth</td>\\n  </tr>\\n  <tr>\\n    <td>Lamp</td>\\n    <td>Blacksmithing or Glass</td>\\n  </tr>\\n  <tr>\\n    <td>Manacles<td>\\n    <td>Blacksmithing or Locks</td>\\n  </tr>\\n  <tr>\\n    <td>Masterwork Tool</td>\\n    <td>Blacksmithing</td>\\n  </tr>\\n  <tr>\\n    <td>Musical Instrument</td>\\n    <td>Musical Instruments</td>\\n  </tr>\\n  <tr>\\n    <td>Saddle</td>\\n    <td>Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Scroll Case</td>\\n    <td>Carpentry or Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Signet Ring</td>\\n    <td>Jewelry</td>\\n  </tr>\\n  <tr>\\n    <td>Silk Rope</td>\\n    <td>Cloth</td>\\n  </tr>\\n  <tr>\\n    <td>Silver Holy Symbol</td>\\n    <td>Blacksmithing or Sculptures</td>\\n  </tr>\\n  <tr>\\n    <td>Skeleton Key</td>\\n    <td>Locks</td>\\n  </tr>\\n  <tr>\\n    <td>Spell Component Pouch/td>\\n    <td>Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Spyglass</td>\\n    <td>Glass</td>\\n  </tr>\\n  <tr>\\n    <td>Tattoo</td>\\n    <td>Paintings</td>\\n  </tr>\\n  <tr>\\n    <td>Tent</td>\\n    <td>Cloth or Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Thieves' Tools</td>\\n    <td>Blacksmithing or Locks</td>\\n  </tr>\\n  <tr>\\n    <td>Waterskin</td>\\n    <td>Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Wood Holy Symbol</td>\\n    <td>Carpentry or Sculptures</td>\\n  </tr>\\n</table>\\n\\nThe following table indicates which Craft skills are typically used to create common worn items. While the normal system for creating magic items doesn't incorporate Craft skills, such skills could reasonably be used while creating a magic item to make it appear especially ornate.\\n\\n<table>\\n  <tr>\\n    <th>Worn Item</th>\\n    <th>Craft Skill</th>\\n  </tr>\\n  <tr>\\n    <td>Amulet</td>\\n    <td>Jewelry</td>\\n  </tr>\\n  <tr>\\n    <td>Belt</td>\\n    <td>Leather or Clothing</td>\\n  </tr>\\n  <tr>\\n    <td>Bracelet</td>\\n    <td>Blacksmithing or Jewelry</td>\\n  </tr>\\n  <tr>\\n    <td>Bracer</td>\\n    <td>Armor or Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Brooch</td>\\n    <td>Jewelry</td>\\n  </tr>\\n  <tr>\\n    <td>Cape or Cloak</td>\\n    <td>Cloth or Clothing</td>\\n  </tr>\\n  <tr>\\n    <td>Circlet</td>\\n    <td>Blacksmithing or Jewelry</td>\\n  </tr>\\n  <tr>\\n    <td>Crown</td>\\n    <td>Blacksmithing or Jewelry</td>\\n  </tr>\\n  <tr>\\n    <td>Gauntlet</td>\\n    <td>Armor</td>\\n  </tr>\\n  <tr>\\n    <td>Girdle</td>\\n    <td>Clothing or Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Glasses or Goggles</td>\\n    <td>Glass</td>\\n  </tr>\\n  <tr>\\n    <td>Glove</td>\\n    <td>Clothing or Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Hat</td>\\n    <td>Clothing or Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Headband</td>\\n    <td>Cloth or Clothing</td>\\n  </tr>\\n  <tr>\\n    <td>Helm</td>\\n    <td>Armor</td>\\n  </tr>\\n  <tr>\\n    <td>Mask</td>\\n    <td>Clothing or Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Necklace</td>\\n    <td>Blacksmithing or Jewelry</td>\\n  </tr>\\n  <tr>\\n    <td>Periapt</td>\\n    <td>Jewelry</td>\\n  </tr>\\n  <tr>\\n    <td>Phylactery</td>\\n    <td>Leather or Carpentry</td>\\n  </tr>\\n  <tr>\\n    <td>Ring</td>\\n    <td>Jewelry</td>\\n  </tr>\\n  <tr>\\n    <td>Robe</td>\\n    <td>Clothing</td>\\n  </tr>\\n  <tr>\\n    <td>Vestments</td>\\n    <td>Clothing</td>\\n  </tr>\\n</table>\",\r\n\t\t\t\t\t\tuntrained: true,\r\n\t\t\t\t\t\tcustomizable: true,\r\n\t\t\t\t\t\tknowledge: false,\r\n\t\t\t\t\t\tblurb: \"You are skilled in the creation of a specific group of items, such as armor or weapons. Like Knowledge, Perform, and Profession, Craft is actually a number of separate skills. You could have several Craft skills, each with its own ranks. The most common Craft skills are alchemy, armor, baskets, books, bows, calligraphy, carpentry, cloth, clothing, glass, jewelry, leather, locks, paintings, pottery, sculptures, ships, shoes, stonemasonry, traps, and weapons.\\n\\nA Craft skill is specifically focused on creating something. If nothing is created by the endeavor, it probably falls under the heading of a Profession skill.\",\r\n\t\t\t\t\t\taction: \"Does not apply. Craft checks are made by the day or week (see above).\",\r\n\t\t\t\t\t\ttry_again: \"Yes, but each time you fail by 5 or more, you ruin half the raw materials and have to pay half the original raw material cost again.\",\r\n\t\t\t\t\t\tspecial: \"You may voluntarily add +10 to the indicated DC to craft an item. This allows you to create the item more quickly (since you’ll be multiplying this higher DC by your Craft check result to determine progress). You must decide whether to increase the DC before you make each weekly or daily check.\\n\\nTo make an item using Craft (alchemy), you must have alchemical equipment. If you are working in a city, you can buy what you need as part of the raw materials cost to make the item, but alchemical equipment is difficult or impossible to come by in some places. Purchasing and maintaining an alchemist’s lab grants a +2 circumstance bonus on Craft (alchemy) checks because you have the perfect tools for the job, but it does not affect the cost of any items made using the skill.\\n\\nThose who wish to construct or repair technological items use Craft (mechanical) in conjunction with technological item crafting feats. Without the Technologist feat, Craft (mechanical) can still be used to craft less advanced forms of technology such as gears, hinges, and pulleys. NPCs with the means of crafting technological items are extremely rare, and it is not assumed that PCs have access to such resources. GMs are encouraged to discuss such considerations with their players before allowing technological crafting into the game.\",\r\n\t\t\t\t\t\tskill_unlock_5: \"When determining your weekly progress, double the result of your Craft check before multiplying the result by the item’s DC.\",\r\n\t\t\t\t\t\tskill_unlock_10: \"You do not ruin any of your raw materials unless you fail a check by 10 or more.\",\r\n\t\t\t\t\t\tskill_unlock_15: \"When you determine your progress, the result of your check is how much work you complete each day in silver pieces.\",\r\n\t\t\t\t\t\tskill_unlock_20: \"You can craft magic armor, magic weapons, magic rings, and wondrous items that fall under your category of Craft using the normal Craft rules.\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 12,\r\n\t\t\t\t\t\tname: \"Heal\",\r\n\t\t\t\t\t\tability_score: \"Wisdom\",\r\n\t\t\t\t\t\tdescription: \"The DC and effect of a Heal check depend on the task you attempt.\\n\\n<table>\\n  <tr>\\n    <th>Task</th>\\n    <th>Heal DC</th>\\n  </tr>\\n  <tr>\\n    <td>First Aid</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Long-Term Care</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Treat Wounds from Caltrops, spike growth, or spike stones</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Treat Deadly Wounds</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Treat Poison</td>\\n    <td>Poison's Save DC</td>\\n  </tr>\\n  <tr>\\n    <td>Treat Disease</td>\\n    <td>Disease's Save DC</td>\\n  </tr>\\n</table>\\n\\nFirst Aid: You usually use first aid to save a dying character. If a character has negative hit points and is losing hit points (at the rate of 1 per round, 1 per hour, or 1 per day), you can make him stable. A stable character regains no hit points but stops losing them. First aid also stops a character from losing hit points due to effects that cause bleed.\\n\\nLong-Term Care: Providing long-term care means treating a wounded person for a day or more. If your Heal check is successful, the patient recovers hit points or ability score points lost to ability damage at twice the normal rate: 2 hit points per level for a full 8 hours of rest in a day, or 4 hit points per level for each full day of complete rest; 2 ability score points for a full 8 hours of rest in a day, or 4 ability score points for each full day of complete rest.\\n\\nYou can tend to as many as six patients at a time. You need a few items and supplies (bandages, salves, and so on) that are easy to come by in settled lands. Giving long-term care counts as light activity for the healer. You cannot give long-term care to yourself.\\n\\nTreat Wounds from Caltrops, Spike Growth, or Spike Stones: A creature wounded by stepping on a caltrop moves at half normal speed. A successful Heal check removes this movement penalty.\\n\\nA creature wounded by a spike growth or spike stones spell must succeed on a Ref lex save or take injuries that reduce his speed by one-third. Another character can remove this penalty by taking 10 minutes to dress the victim’s injuries and succeeding on a Heal check against the spell’s save DC.\\n\\nTreat Deadly Wounds: When treating deadly wounds, you can restore hit points to a damaged creature. Treating deadly wounds restores 1 hit point per level of the creature. If you exceed the DC by 5 or more, add your Wisdom modifier (if positive) to this amount. A creature can only benefit from its deadly wounds being treated within 24 hours of being injured and never more than once per day. You must expend two uses from a healer’s kit to perform this task. You take a –2 penalty on your Heal skill check for each use from the healer’s kit that you lack.\\n\\nTreat Poison: To treat poison means to tend to a single character who has been poisoned and who is going to take more damage from the poison (or suffer some other effect). Every time the poisoned character makes a saving throw against the poison, you make a Heal check. If your Heal check exceeds the DC of the poison, the character receives a +4 competence bonus on his saving throw against the poison.\\n\\nTreat Disease: To treat a disease means to tend to a single diseased character. Every time the diseased character makes a saving throw against disease effects, you make a Heal check. If your Heal check exceeds the DC of the disease, the character receives a +4 competence bonus on his saving throw against the disease.\",\r\n\t\t\t\t\t\tuntrained: true,\r\n\t\t\t\t\t\tcustomizable: false,\r\n\t\t\t\t\t\tknowledge: false,\r\n\t\t\t\t\t\tblurb: \"You are skilled at tending to wounds and ailments.\",\r\n\t\t\t\t\t\taction: \"Providing first aid, treating a wound, or treating poison is a standard action. Treating a disease or tending a creature wounded by a spike growth or spike stones spell takes 10 minutes of work. Treating deadly wounds takes 1 hour of work. Providing long-term care requires 8 hours of light activity.\",\r\n\t\t\t\t\t\ttry_again: \"Varies. Generally speaking, you can’t try a Heal check again without witnessing proof of the original check’s failure. You can always retry a check to provide first aid, assuming the target of the previous attempt is still alive.\",\r\n\t\t\t\t\t\tspecial: \"A healer’s kit gives you a +2 circumstance bonus on Heal checks.\",\r\n\t\t\t\t\t\tskill_unlock_5: \"When you treat deadly wounds, the target recovers hit points and ability damage as if it had rested for a full day.\",\r\n\t\t\t\t\t\tskill_unlock_10: \"When you treat deadly wounds, the target recovers hit points as if it had rested for a full day with long-term care.\",\r\n\t\t\t\t\t\tskill_unlock_15: \"When you treat deadly wounds, the creature recovers hit point and ability damage as if it had rested for 3 days.\",\r\n\t\t\t\t\t\tskill_unlock_20: \"When you treat deadly wounds, the target recovers hit point and ability damage as if it had rested for 3 days with long-term care.\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 13,\r\n\t\t\t\t\t\tname: \"Intimidate\",\r\n\t\t\t\t\t\tability_score: \"Charisma\",\r\n\t\t\t\t\t\tdescription: \"You can use Intimidate to force an opponent to act friendly toward you for 1d6 × 10 minutes with a successful check. The DC of this check is equal to 10 + the target’s Hit Dice + the target’s Wisdom modifier. If successful, the target gives you the information you desire, takes actions that do not endanger it, or otherwise offers limited assistance. After the Intimidate expires, the target treats you as unfriendly and may report you to local authorities. If you fail this check by 5 or more, the target attempts to deceive you or otherwise hinder your activities.\\n\\nDemoralize: You can use this skill to cause an opponent to become shaken for a number of rounds. The DC of this check is equal to 10 + the target’s Hit Dice + the target’s Wisdom modifier. If you are successful, the target is shaken for 1 round. This duration increases by 1 round for every 5 by which you beat the DC. You can only threaten an opponent in this way if it is within 30 feet and can clearly see and hear you. Using demoralize on the same creature only extends the duration; it does not create a stronger fear condition.\",\r\n\t\t\t\t\t\tuntrained: true,\r\n\t\t\t\t\t\tcustomizable: false,\r\n\t\t\t\t\t\tknowledge: false,\r\n\t\t\t\t\t\tblurb: \"You can use this skill to frighten your opponents or to get them to act in a way that benefits you. This skill includes verbal threats and displays of prowess.\",\r\n\t\t\t\t\t\taction: \"Using Intimidate to change an opponent’s attitude requires 1 minute of conversation. Demoralizing an opponent is a standard action.\",\r\n\t\t\t\t\t\ttry_again: \"You can attempt to Intimidate an opponent again, but each additional check increases the DC by +5. This increase resets after 1 hour has passed.\",\r\n\t\t\t\t\t\tspecial: \"You also gain a +4 bonus on Intimidate checks if you are larger than your target and a –4 penalty on Intimidate checks if you are smaller than your target.\",\r\n\t\t\t\t\t\tskill_unlock_5: \"If you exceed the DC to demoralize a target by at least 10, it is frightened for 1 round and shaken thereafter. A Will save (DC = 10 + your number of ranks in Intimidate) negates the frightened condition, but the target is still shaken, even if it has the stalwart ability.\",\r\n\t\t\t\t\t\tskill_unlock_10: \"If you exceed the DC to demoralize a target by at least 10, it is panicked for 1 round or frightened for 1d4 rounds (your choice) and shaken thereafter. A Will save (DC = 10 + your number of ranks in Intimidate) negates the frightened or panicked condition, but the target is still shaken, even if it has the stalwart ability.\",\r\n\t\t\t\t\t\tskill_unlock_15: \"If you exceed the DC to demoralize a target by at least 20, it is cowering for 1 round or panicked for 1d4 rounds (your choice) and frightened thereafter. A Will save (DC = 10 + your number of ranks in Intimidate) negates the cowering, panicked, and frightened conditions, but the target is still shaken, even if it has the stalwart ability.\",\r\n\t\t\t\t\t\tskill_unlock_20: \"If you exceed the DC to demoralize a target by at least 20, it is cowering for 1d4 rounds and panicked thereafter. A Will save (DC = 10 + your number of ranks in Intimidate) negates the cowering and panicked conditions, but the target is still shaken, even if it has the stalwart ability.\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 24,\r\n\t\t\t\t\t\tname: \"Knowledge\",\r\n\t\t\t\t\t\tability_score: \"Intelligence\",\r\n\t\t\t\t\t\tdescription: \"Arcana (ancient mysteries, magic traditions, arcane symbols, constructs, dragons, magical beasts)\\n\\nDungeoneering (aberrations, caverns, oozes, spelunking)\\n\\nEngineering (buildings, aqueducts, bridges, fortifications)\\n\\nGeography (lands, terrain, climate, people)\\n\\nHistory (wars, colonies, migrations, founding of cities)\\n\\nLocal (legends, personalities, inhabitants, laws, customs, traditions, humanoids)\\n\\nNature (animals, fey, monstrous humanoids, plants, seasons and cycles, weather, vermin)\\n\\nNobility (lineages, heraldry, personalities, royalty)\\n\\nPlanes (the Inner Planes, the Outer Planes, the Astral Plane, the Ethereal Plane, outsiders, planar magic)\\n\\nReligion (gods and goddesses, mythic history, ecclesiastic tradition, holy symbols, undead)\\n\\nAnswering a question within your field of study has a DC of 10 (for really easy questions), 15 (for basic questions), or 20 to 30 (for really tough questions).\\n\\nYou can use this skill to identify monsters and their special powers or vulnerabilities. In general, the DC of such a check equals 10 + the monster’s CR. For common monsters, such as goblins, the DC of this check equals 5 + the monster’s CR. For particularly rare monsters, such as the tarrasque, the DC of this check equals 15 + the monster’s CR, or more. A successful check allows you to remember a bit of useful information about that monster. For every 5 points by which your check result exceeds the DC, you recall another piece of useful information. Many of the Knowledge skills have specific uses as noted on the below table.\\n\\n<table>\\n  <tr>\\n    <th>Tasks</th>\\n    <th>Knowledge Skill</th>\\n    <th>DC</th>\\n  </tr>\\n  <tr>\\n    <td>Identify Auras While Using Detect Magic</td>\\n    <td>Arcana</td>\\n    <td>15 + Spell Level</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Spell Effect That Is In Place</td>\\n    <td>Arcana</td>\\n    <td>20 + Spell Level</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Materials Manufactured by Magic</td>\\n    <td>Arcana</td>\\n    <td>20 + Spell Level</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Spell That Just Targeted You</td>\\n    <td>Arcana</td>\\n    <td>25 + Spell Level</td>\\n  </tr>\\n  <tr>\\n    <td>Identify the Spells Cast Using a Specific Material Component</td>\\n    <td>Arcana</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Underground Hazard</td>\\n    <td>Dungeoneering</td>\\n    <td>15 + Hazard's CR</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Mineral, Stone, or Metal</td>\\n    <td>Dungeoneering</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Determine Slope</td>\\n    <td>Dungeoneering</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Determine Depth Underground</td>\\n    <td>Dungeoneering</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Dangerous Construction</td>\\n    <td>Engineering</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Determine a Structure's Style or Age</td>\\n    <td>Engineering</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Determine a Structure's Weakness</td>\\n    <td>Engineering</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Creature's Ethnicity or Accent</td>\\n    <td>Geography</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Recognize Regional Terrain Features</td>\\n    <td>Geography</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Know Location of Nearest Community or Noteworthy Site</td>\\n    <td>Geography</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Know Recent or Historically Significant Date</td>\\n    <td>History</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Determine Approximate Date of Specific Event</td>\\n    <td>History</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Know Obscure or Ancient Historical Event</td>\\n    <td>History</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Know Local Laws, Rulers, and Popular Locations</td>\\n    <td>Local</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Know a Common Rumor or Local Tradition</td>\\n    <td>Local</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Know Hidden Organizations, Rulers, and Locations</td>\\n    <td>Local</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Natural Hazard</td>\\n    <td>Nature</td>\\n    <td>15 + Hazard's CR</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Common Plant or Animal</td>\\n    <td>Nature</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Unnatural Weather Phenomenon</td>\\n    <td>Nature</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Determine Artifical Nature of Feature</td>\\n    <td>Nature</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Know Current Rulers and Their Symbols</td>\\n    <td>Nobility</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Know Proper Etiquette</td>\\n    <td>Nobility</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Know Line of Succession</td>\\n    <td>Nobility</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Know the Names of the Planes</td>\\n    <td>Planes</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Recognize Current Plane</td>\\n    <td>Planes</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Creature's Planar Origin</td>\\n    <td>Planes</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Recognize a Common Deity's Symbol or Clergy</td>\\n    <td>Religion</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Know Common Mythology and Tenets</td>\\n    <td>Religion</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Recognize an Obscure Deity's Symbol or Clergy</td>\\n    <td>Religion</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Monster's Abilities and Weaknesses</td>\\n    <td>Varies</td>\\n    <td>10 + Monster's CR</td>\\n  </tr>\\n</table>\",\r\n\t\t\t\t\t\tuntrained: false,\r\n\t\t\t\t\t\tcustomizable: true,\r\n\t\t\t\t\t\tknowledge: true,\r\n\t\t\t\t\t\tblurb: \"You are educated in a field of study and can answer both simple and complex questions. Like the Craft, Perform, and Profession skills, Knowledge actually encompasses a number of different specialties.\",\r\n\t\t\t\t\t\taction: \"Usually none. In most cases, a Knowledge check doesn’t take an action.\",\r\n\t\t\t\t\t\ttry_again: \"No. The check represents what you know, and thinking about a topic a second time doesn’t let you know something that you never learned in the first place.\",\r\n\t\t\t\t\t\tspecial: \"You cannot make an untrained Knowledge check with a DC higher than 10. If you have access to an extensive library that covers a specific skill, this limit is removed. The time to make checks using a library, however, increases to 1d4 hours. Particularly complete libraries might even grant a bonus on Knowledge checks in the fields that they cover.\",\r\n\t\t\t\t\t\tskill_unlock_5: \"When you successfully identify a creature, you gain one additional piece of information for every 5 ranks you possess in that Knowledge skill.\",\r\n\t\t\t\t\t\tskill_unlock_10: \"When you successfully identify a creature, you gain a +1 competence bonus on attack rolls, opposed ability checks, skill checks, and caster level checks against creatures of that kind (e.g., glabrezu demons, but not other demons or evil outsiders) for 1 minute. This bonus increases by 1 for every 5 ranks beyond 10 you possess in that Knowledge skill.\",\r\n\t\t\t\t\t\tskill_unlock_15: \"When you fail a Knowledge check, you can reroll the check at a –10 penalty. The competence bonus above also applies to saving throws against exceptional, spell-like, or supernatural abilities used by creatures you identify.\",\r\n\t\t\t\t\t\tskill_unlock_20: \"Whenever you attempt a Knowledge check, you can roll twice and take the better result.\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 26,\r\n\t\t\t\t\t\tname: \"Perception\",\r\n\t\t\t\t\t\tability_score: \"Wisdom\",\r\n\t\t\t\t\t\tdescription: \"Perception has a number of uses, the most common of which is an opposed check versus an opponent’s Stealth check to notice the opponent and avoid being surprised. If you are successful, you notice the opponent and can react accordingly. If you fail, your opponent can take a variety of actions, including sneaking past you and attacking you.\\n\\nPerception is also used to notice fine details in the environment. The DC to notice such details varies depending upon distance, the environment, and how noticeable the detail is. The following table gives a number of guidelines.\\n\\n<table>\\n  <tr>\\n    <th>Detail</th>\\n    <th>Perception DC</th>\\n  </tr>\\n  <tr>\\n    <td>Hear the Sound of Battle</td>\\n    <td>-10</td>\\n  </tr>\\n  <tr>\\n    <td>Notice the Stench of Rotting Garbage</td>\\n    <td>-10</td>\\n  </tr>\\n  <tr>\\n    <td>Detect the Smell of Smoke</td>\\n    <td>0</td>\\n  </tr>\\n  <tr>\\n    <td>Hear the Details of a Conversation</td>\\n    <td>0</td>\\n  </tr>\\n  <tr>\\n    <td>Notice a Visible Creature</td>\\n    <td>0</td>\\n  </tr>\\n  <tr>\\n    <td>Determine if Food is Spoiled</td>\\n    <td>5</td>\\n  </tr>\\n  <tr>\\n    <td>Hear the Sound of a Creature Walking</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Hear the Details of a Whispered Conversation</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Find the Average Concealed Door</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Hear the Sound of a Key Being Turned in a Lock</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Find the Average Secret Door</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Hear a Bow Being Drawn</td>\\n    <td>25</td>\\n  </tr>\\n  <tr>\\n    <td>Sense a Burrowing Creature Underneath You</td>\\n    <td>25</td>\\n  </tr>\\n  <tr>\\n    <td>Notice a Pickpocket</td>\\n    <td>Opposed by Sleight of Hand</td>\\n  </tr>\\n  <tr>\\n    <td>Notice a Creature Using Stealth</td>\\n    <td>Opposed by Stealth</td>\\n  </tr>\\n  <tr>\\n    <td>Find a Hidden Trap</td>\\n    <td>Varies by Trap</td>\\n  </tr>\\n  <tr>\\n    <td>Identify the Powers of a Potion through Taste</td>\\n    <td>15 + Potion's Caster Level</td>\\n  </tr>\\n</table>\\n\\n<table>\\n  <tr>\\n    <th>Perception Modifiers</th>\\n    <th>DC Modifier</th>\\n  </tr>\\n  <tr>\\n    <td>Distance to the Source, Object, or Creature</td>\\n    <td>+1 per 10 Feet</td>\\n  </tr>\\n  <tr>\\n    <td>Through a Closed Door</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Through a Wall</td>\\n    <td>+10 per Foot</td>\\n  </tr>\\n  <tr>\\n    <td>Favorable Conditions</td>\\n    <td>-2</td>\\n  </tr>\\n  <tr>\\n    <td>Unfavorable Conditions</td>\\n    <td>+2</td>\\n  </tr>\\n  <tr>\\n    <td>Terrible Conditions</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Creature Making the Check is Distracted</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Creature Making the Check is Asleep</td>\\n    <td>+10</td>\\n  </tr>\\n  <tr>\\n    <td>Creature or Object is Invisible</td>\\n    <td>+20</td>\\n  </tr>\\n</table>\",\r\n\t\t\t\t\t\tuntrained: true,\r\n\t\t\t\t\t\tcustomizable: false,\r\n\t\t\t\t\t\tknowledge: false,\r\n\t\t\t\t\t\tblurb: \"Your senses allow you to notice fine details and alert you to danger. Perception covers all five senses, including sight, hearing, touch, taste, and smell.\",\r\n\t\t\t\t\t\taction: \"Most Perception checks are reactive, made in response to observable stimulus. Intentionally searching for stimulus is a move action.\",\r\n\t\t\t\t\t\ttry_again: \"Yes. You can try to sense something you missed the first time, so long as the stimulus is still present.\",\r\n\t\t\t\t\t\tspecial: \"Creatures with the scent special quality have a +8 bonus on Perception checks made to detect a scent. Creatures with the tremorsense special quality have a +8 bonus on Perception checks against creatures touching the ground and automatically make any such checks within their range.\",\r\n\t\t\t\t\t\tskill_unlock_5: \"You remain alert to sounds even in your sleep, and the normal DC increase to Perception checks when you are sleeping is halved. The distance modifier on the DC of Perception checks you attempt is reduced to +1 per 20 feet.\",\r\n\t\t\t\t\t\tskill_unlock_10: \"The distance modifier on the DC of Perception checks you attempt is reduced to +1 per 30 feet. In addition, you gain a +5 bonus on Perception checks to notice or locate an invisible creature or object.\",\r\n\t\t\t\t\t\tskill_unlock_15: \"You remain alert to sounds even in your sleep, and the normal DC increase to Perception checks when you are sleeping doesn’t apply to you. The distance modifier on the DC of your Perception checks is reduced to +1 per 40 feet.\",\r\n\t\t\t\t\t\tskill_unlock_20: \"You gain a +10 bonus on Perception checks to notice invisible creatures or objects. The distance modifier on the DC of Perception checks you attempt is reduced to +1 per 60 feet.\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 28,\r\n\t\t\t\t\t\tname: \"Profession\",\r\n\t\t\t\t\t\tability_score: \"Wisdom\",\r\n\t\t\t\t\t\tdescription: \"You can earn half your Profession check result in gold pieces per week of dedicated work. You know how to use the tools of your trade, how to perform the profession’s daily tasks, how to supervise helpers, and how to handle common problems. You can also answer questions about your Profession. Basic questions are DC 10, while more complex questions are DC 15 or higher.\\n\\nA profession often encompasses many smaller areas of expertise, and these auxiliary skills can come in handy in situations beyond just making money or answering trade-specific questions. Below are some sample additional uses for Profession skills, and GMs are encouraged to create their own.\\n\\n<table>\\n  <tr>\\n    <th>Task</th>\\n    <th>Profession Skill</th>\\n    <th>DC</th>\\n  </tr>\\n  <tr>\\n    <td>Determine Hardness and Hit Points of a Structure</td>\\n    <td>Architect or Engineer</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Prepare Trail Rations (Takes 1 Hour Per Day's Worth of Rations)</td>\\n    <td>Baker or Cook</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Obtain a Legal Permit</td>\\n    <td>Barrister or Clerk</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Get Somone Released From Jail Who Has Been Imprisoned for a Minor Crime</td>\\n    <td>Barrister</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Ask a Special Favor From a Judge (Such as Arresting Someone)</td>\\n    <td>Barrister</td>\\n    <td>30</td>\\n  </tr>\\n  <tr>\\n    <td>Brew Alcohol of Exceptional Quality</td>\\n    <td>Brewer</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Notice Poison in a Beverage</td>\\n    <td>Brewer</td>\\n    <td>25</td>\\n  </tr>\\n  <tr>\\n    <td>Skin an Animal and Tan the Hide</td>\\n    <td>Butcher, Shepherd, or Tanner</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Slaughter and Butcher an Animal</td>\\n    <td>Butcher, Cook, or Shepherd</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Reduce a Legal Fine or Tax By Half the Result of the Check in gp (up to 75%)</td>\\n    <td>Clerk</td>\\n    <td>20+</td>\\n  </tr>\\n  <tr>\\n    <td>Cook a Meal of Exceptional Quality</td>\\n    <td>Cook</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Notice Poison in Food</td>\\n    <td>Cook</td>\\n    <td>25</td>\\n  </tr>\\n  <tr>\\n    <td>Find Potential Clients within an Establishment or Large Group</td>\\n    <td>Courtesan</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Continue Steering a Vehicle When You Take Damage</td>\\n    <td>Driver or Sailor</td>\\n    <td>5</td>\\n  </tr>\\n  <tr>\\n    <td>Take Cover (As The Ride Skill) While Steering a Vehicle</td>\\n    <td>Driver or Sailor</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Non-Creature Plant</td>\\n    <td>Farmer or Gardener</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Rejuvinate Dying Plants</td>\\n    <td>Farmer or Gardener</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Provide 1 Day's Worth of Food for Yourself and Others in the Wild</td>\\n    <td>Fisherman or Trapper</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Recall the Rules of a Game of Chance</td>\\n    <td>Gambler</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Get a Hunch Regarding Whether a Game is Rigged</td>\\n    <td>Gambler</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Reduce an Average or Lower Cost of Living by 50%</td>\\n    <td>Innkeeper</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Sate Hunger or Thirst for 1 Day</td>\\n    <td>Herbalist</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Common Medicinal Herbs</td>\\n    <td>Herbalist</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Rare Medicinal Herbs</td>\\n    <td>Herbalist</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Aid Another on a Knowledge Check Using Reference Material</td>\\n    <td>Librarian</td>\\n    <td>5</td>\\n  </tr>\\n  <tr>\\n    <td>Recall the Name of a Rare Book</td>\\n    <td>Librarian</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Determine Where an Item was Manufactured</td>\\n    <td>Merchant</td>\\n    <td>10+</td>\\n  </tr>\\n  <tr>\\n    <td>Recall Where a Common Good Fetches a Higher Price</td>\\n    <td>Merchant</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Safely Deliver a Child</td>\\n    <td>Midwife</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Safely Deliver a Child Despite Complications</td>\\n    <td>Midwife</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Grind a Small Piece of Nonmagical Substance into Powder</td>\\n    <td>Miller</td>\\n    <td>10 + Hardness</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Common Metal or Semiprecious Stone</td>\\n    <td>Miner</td>\\n    <td>5</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Rare Metal or Precious Gem</td>\\n    <td>Miner</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Ignore Half Hardness When Attacking a Stone or Metal Object</td>\\n    <td>Miner</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Increase Carrying Capacity for 8 Hours as if Strength were 2 Higher</td>\\n    <td>Porter</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Unload a Vessel in Half the Normal Time</td>\\n    <td>Porter</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Navigate a Ship in Fair Conditions</td>\\n    <td>Sailor</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Pilot a Ship Safely Through a Hazardous Seaway</td>\\n    <td>Sailor</td>\\n    <td>25+</td>\\n  </tr>\\n  <tr>\\n    <td>Determine Which Scribe Wrote a Document</td>\\n    <td>Scribe</td>\\n    <td>10+</td>\\n  </tr>\\n  <tr>\\n    <td>Copy a Document (30 Minutes per Page; Requires a Blank Book)</td>\\n    <td>Scribe</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Illuminate a Manuscript (1 Hour per Page)</td>\\n    <td>Scribe</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Determine the Quality of Woolen Textiles</td>\\n    <td>Shepherd</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Determine Whether a Weapon or Armor is of Masterwork Quality</td>\\n    <td>Soldier</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Estimate the Size of a Military Force</td>\\n    <td>Soldier</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Advantages and Disadvantages of a Military Formation</td>\\n    <td>Soldier</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Keep Horses Fed in the Wild</td>\\n    <td>Stable Master</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Fit or Remove Barding in Half the Normal Time</td>\\n    <td>Stable Master</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Recognize Damaged or Sabotaged Horse Tack</td>\\n    <td>Stable Master</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Determine the Quality of Leatherwork (and Tell If It's Masterwork Quality)</td>\\n    <td>Tanner</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Aid Another on an Skill Check to Get Out of a Trap or Snare</td>\\n    <td>Trapper</td>\\n    <td>5</td>\\n  </tr>\\n  <tr>\\n    <td>Reset a Trap in Half the Normal Amount of Time</td>\\n    <td>Trapper</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Scavenge Wood Suitable for Campfire or Shelter</td>\\n    <td>Woodcutter</td>\\n    <td>5</td>\\n  </tr>\\n  <tr>\\n    <td>Ignore Half Hardness When Attacking Wooden Object</td>\\n    <td>Woodcutter</td>\\n    <td>20</td>\\n  </tr>\\n</table>\",\r\n\t\t\t\t\t\tuntrained: false,\r\n\t\t\t\t\t\tcustomizable: true,\r\n\t\t\t\t\t\tknowledge: false,\r\n\t\t\t\t\t\tblurb: \"You are skilled at a specific job. Like Craft, Knowledge, and Perform, Profession is actually a number of separate skills. You could have several Profession skills, each with its own ranks. While a Craft skill represents ability in creating an item, a Profession skill represents an aptitude in a vocation requiring a broader range of less specific knowledge. The most common Profession skills are architect, baker, barrister, brewer, butcher, clerk, cook, courtesan, driver, engineer, farmer, f isherman, gambler, gardener, herbalist, innkeeper, librarian, merchant, midwife, miller, miner, porter, sailor, scribe, shepherd, stable master, soldier, tanner, trapper, and woodcutter.\",\r\n\t\t\t\t\t\taction: \"Not applicable. A single check generally represents a week of work.\",\r\n\t\t\t\t\t\ttry_again: \"Varies. An attempt to use a Profession skill to earn income cannot be retried. You are stuck with whatever weekly wage your check result brought you. Another check may be made after a week to determine a new income for the next period of time. An attempt to accomplish some specific task can usually be retried.\",\r\n\t\t\t\t\t\tspecial: \"Untrained laborers and assistants (that is, characters without any ranks in Profession) earn an average of 1 silver piece per day.\",\r\n\t\t\t\t\t\tskill_unlock_5: \"When using Profession checks to earn income, you earn gold pieces equal to the result of your check each week.\",\r\n\t\t\t\t\t\tskill_unlock_10: \"When attempting Profession checks, you can roll twice and take the better result. When answering questions about your Profession, you can always take 10.\",\r\n\t\t\t\t\t\tskill_unlock_15: \"You can attempt checks to earn income once per day instead of once per week.\",\r\n\t\t\t\t\t\tskill_unlock_20: \"When attempting Profession checks, you can choose to roll once instead of twice. If you do and the result of the roll is less than 10, replace it with 10. When answering questions about your Profession, you can always take 20.\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 33,\r\n\t\t\t\t\t\tname: \"Stealth\",\r\n\t\t\t\t\t\tability_score: \"Dexterity\",\r\n\t\t\t\t\t\tdescription: \"Your Stealth check is opposed by the Perception check of anyone who might notice you. Creatures that fail to beat your Stealth check are not aware of you and treat you as if you had total concealment. You can move up to half your normal speed and use Stealth at no penalty. When moving at a speed greater than half but less than your normal speed, you take a –5 penalty. It’s impossible to use Stealth while attacking, running, or charging.\\n\\nCreatures gain a bonus or penalty on Stealth checks based on their size: Fine +16, Diminutive +12, Tiny +8, Small +4, Medium +0, Large –4, Huge –8, Gargantuan –12, Colossal –16.\\n\\nIf people are observing you using any of their senses (but typically sight), you can’t use Stealth. Against most creatures, finding cover or concealment allows you to use Stealth. If your observers are momentarily distracted (such as by a Bluff check), you can attempt to use Stealth. While the others turn their attention from you, you can attempt a Stealth check if you can get to an unobserved place of some kind. This check, however, is made at a –10 penalty because you have to move fast.\\n\\nBreaking Stealth: When you start your turn using Stealth, you can leave cover or concealment and remain unobserved as long as you succeed at a Stealth check and end your turn in cover or concealment. Your Stealth immediately ends after you make an attack roll, whether or not the attack is successful (except when sniping as noted below).\\n\\nSniping: If you’ve already successfully used Stealth at least 10 feet from your target, you can make one ranged attack and then immediately use Stealth again. You take a –20 penalty on your Stealth check to maintain your obscured location.\\n\\nCreating a Diversion to Hide: You can use Bluff to allow you to use Stealth. A successful Bluff check opposed by the viewer’s Sense Motive can give you the momentary diversion you need to attempt a Stealth check while people are aware of you.\",\r\n\t\t\t\t\t\tuntrained: true,\r\n\t\t\t\t\t\tcustomizable: false,\r\n\t\t\t\t\t\tknowledge: false,\r\n\t\t\t\t\t\tblurb: \"You are skilled at avoiding detection, allowing you to slip past foes or strike from an unseen position. This skill covers hiding and moving silently.\",\r\n\t\t\t\t\t\taction: \"Usually none. Normally, you make a Stealth check as part of movement, so it doesn’t take a separate action. However, using Stealth immediately after a ranged attack (see Sniping, above) is a move action.\",\r\n\t\t\t\t\t\ttry_again: \"\",\r\n\t\t\t\t\t\tspecial: \"If you are invisible, you gain a +40 bonus on Stealth checks if you are immobile, or a +20 bonus on Stealth checks if you’re moving.\\n\\nIf people are observing you using any of their senses (but typically sight), you can’t use Stealth. Against most creatures, finding cover or concealment allows you to use Stealth. If your observers are momentarily distracted (such as by a Bluff check), you can attempt to use Stealth. While the others turn their attention from you, you can attempt a Stealth check if you can get to an unobserved place of some kind. This check, however, is made at a –10 penalty because you have to move fast.\",\r\n\t\t\t\t\t\tskill_unlock_5: \"Reduce the Stealth penalty from sniping by 10.\",\r\n\t\t\t\t\t\tskill_unlock_10: \"Stealth check penalties for moving quickly are halved, including the ability unlocked at 5 ranks, moving full speed, and reaching concealment after creating a distraction.\",\r\n\t\t\t\t\t\tskill_unlock_15: \"If you attack after successfully using Stealth, your target is denied its Dexterity bonus against all attacks that you make before the end of your turn.\",\r\n\t\t\t\t\t\tskill_unlock_20: \"If you attack after successfully using Stealth, your target is denied its Dexterity bonus against all attacks that you make before the beginning of your next turn.\"\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t],\r\n\t\tclass_obj: [\r\n\t\t\t{\r\n\t\t\t\tklass_id: 15,\r\n\t\t\t\tlevel: 2\r\n\t\t\t}\r\n\t\t],\r\n\t\trace: {\r\n\t\t\tid: 8,\r\n\t\t\tname: \"Vine Leshy\",\r\n\t\t\tspeed: 20,\r\n\t\t\tsize: \"Small\",\r\n\t\t\tdescription: \"Vine leshys are born by ritual, called forth when a druid channels a nature spirit into a plant’s form. The nature spirit that answers the call for a vine leshy creation ritual is always one that has keenly felt the influence of mortal beings. Compared to other leshys, vine leshys have an easier time relating to non-plant creatures and a deeper sense of curiosity about the wonders of the natural world beyond those plants closely related to them, as well as a fascination with the societies of humans and other creatures.\\n\\nPhysical Description: A vine leshy’s body is made of masses of twisted vines and leaves, sometimes incorporating flowers and fruits as well. Their appearance is mostly determined by the species of vine used in their creation, but most have a large cluster of leaves that forms a face with round eyes, a small mouth, and no visible nose.\\n\\nSociety: Because of their ritual-based genesis, vine leshys do not have a traditional family structure. They form strong friendships with those who accompany them on explorations or who assist them in protecting a natural site. Unlike most leshys, vine leshys usually feel a strong desire to seek out the one who create!d them. They see their creators as friends and allies rather than as parents.\\n\\nWhile most leshys devote themselves to protecting a particular ward for long stretches of time, vine leshys are far more likely to travel and explore, stopping to care for many different wards for short periods throughout their lifetime. Vine leshys love storytelling, but they place more importance on the meaning and message of the story than the details, both because they can’t always remember the details and because they find many details to be unnecessary. A story that has passed through several vine leshys is likely to undergo significant changes in characters and setting but usually retains its core message.\\n\\nRelations: Vine leshys are interested in learning about the cultures of many other races. Their initial attitudes when they encounter new races are based on biases from the nature spirit’s past incarnations, but they evolve over time through the leshy’s experiences. In unfamiliar situations, vine leshys prefer to blend in with vegetation to observe before venturing out and introducing themselves.\\n\\nConsistent with the plant species from which they derive their bodies, vine leshys recognize a spectrum of genders. Some vine leshys are exclusively female or male, while many vine leshys are both. The biological features of a leshy’s flowers do not necessarily indicate its gender, as the nature spirit that inhabits the leshy plays a strong role in determining the leshy’s identity.\\n\\nVine leshys have an unusual relationship with other leshys, for unlike standard leshys, vine leshys are not grown to be servants. They are free-willed and individualistic creatures. Whether or not an individual vine leshy views the servitude other leshys endure as akin to slavery or as something more like an honorable tradition of service to a powerful druid depends on the vine leshy’s opinion and alignment. While it’s unusual for a vine leshy to take on another leshy as a minion in the traditional way, it’s not unusual to see vine leshys take on sponsorship of a sort over other leshys, treating them almost as adopted children or wayward exiles in need of guidance and protection from those who would force their servitude.\\n\\nAlignment and Religion: Vine leshys see themselves as part of the ancient cycle of nature. They care for their friends and any natural areas under their care, but rarely feel compelled toward either charity or malice. Most vine leshys are truly neutral, and they almost always have at least one neutral aspect to their alignments. Religion is not particularly important to vine leshys.\\n\\nAdventurers: Like most leshys, vine leshys typically do not fear death. They know that if their bodies die, their spirits will return to the natural world and may someday find themselves in new bodies. This lack of fear combined with their curiosity leads them to take risks. However, they typically avoid excessively dangerous activities, as they would rather gather a story from their adventures to tell later. Vine leshys gravitate toward classes that let them use their connection to nature, such as druid and ranger.\\n\\nNames: Vine leshys’ names change throughout their lives. A young vine leshy typically names herself after her physical characteristics or a natural feature that she particularly enjoys. As vine leshys age, they modify their names to better reflect their personality and experiences. A leshy may even have several names that she cycles among, such as one name for each season. Most vine leshys select names that are at least two words long. Example vine leshy names include Burbling Waterfall, Lovely Triple Leaves, Masterful Sun Drinker, Snowy Pine Branches, Verdant Taleweaver, and Vibrant Tree Climber.\",\r\n\t\t\tracial_traits: [\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 42,\r\n\t\t\t\t\tname: \"Type\",\r\n\t\t\t\t\trace_id: 8,\r\n\t\t\t\t\tdescription: \"Vine leshys are plants with the leshy subtype but lack the immunities to mind-affecting effects, paralysis, poison, polymorph, sleep, and stunning that the plant type usually grants, and they lack the immunity to electricity and sonic that the leshy subtype usually grants.\",\r\n\t\t\t\t\tsource_id: null\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 43,\r\n\t\t\t\t\tname: \"Languages\",\r\n\t\t\t\t\trace_id: 8,\r\n\t\t\t\t\tdescription: \"Vine leshys begin play speaking Common and Sylvan. Vine leshys with high Intelligence scores can choose from the following: Aquan, Auran, Aklo, Elven, Gnome, Goblin, Terran, or Undercommon.\",\r\n\t\t\t\t\tsource_id: null\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 44,\r\n\t\t\t\t\tname: \"Plantspeech\",\r\n\t\t\t\t\trace_id: 8,\r\n\t\t\t\t\tdescription: \"Vine leshys can speak with vines as if subject to a continual speak with plants spell.\",\r\n\t\t\t\t\tsource_id: null\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 45,\r\n\t\t\t\t\tname: \"Darkvision\",\r\n\t\t\t\t\trace_id: 8,\r\n\t\t\t\t\tdescription: \"Vine leshys can see in the dark up to 60 feet.\",\r\n\t\t\t\t\tsource_id: null\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 46,\r\n\t\t\t\t\tname: \"Low-Light Vision\",\r\n\t\t\t\t\trace_id: 8,\r\n\t\t\t\t\tdescription: \"Vine leshys can see twice as far as humans under conditions of dim light.\",\r\n\t\t\t\t\tsource_id: null\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 47,\r\n\t\t\t\t\tname: \"Pass Without Trace\",\r\n\t\t\t\t\trace_id: 8,\r\n\t\t\t\t\tdescription: \"Vine leshys have pass without trace as a constant spell-like ability (caster level 2nd).\",\r\n\t\t\t\t\tsource_id: null\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 48,\r\n\t\t\t\t\tname: \"Change Shape\",\r\n\t\t\t\t\trace_id: 8,\r\n\t\t\t\t\tdescription: \"Vine leshys can transform into vines, with results similar to tree shape. In this form, the leshy appears as a particularly healthy Small vine. The \tleshy can assume plant form or revert to its true form as a swift action.\",\r\n\t\t\t\t\tsource_id: null\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 49,\r\n\t\t\t\t\tname: \"Verdant Burst\",\r\n\t\t\t\t\trace_id: 8,\r\n\t\t\t\t\tdescription: \"When slain, a vine leshy explodes in a burst of fertile energies. All plant creatures within 30 feet of the slain leshy regain hit 1d8 points, and vines quickly infest the area. If the terrain can support vines, the undergrowth is dense enough to make the region into difficult terrain for 24 hours, after which the plant life diminishes to a normal level; otherwise, this plant life has no significant effect on movement and withers and dies within an hour.\",\r\n\t\t\t\t\tsource_id: null\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 50,\r\n\t\t\t\t\tname: \"Unassuming Foliage\",\r\n\t\t\t\t\trace_id: 8,\r\n\t\t\t\t\tdescription: \"Vine leshys gain a +4 racial bonus on Stealth checks in forests.\",\r\n\t\t\t\t\tsource_id: null\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 51,\r\n\t\t\t\t\tname: \"Climber\",\r\n\t\t\t\t\trace_id: 8,\r\n\t\t\t\t\tdescription: \"Vine leshys gain a +2 racial bonus on Climb checks.\",\r\n\t\t\t\t\tsource_id: null\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\trace_ability_score_modifiers: [\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 20,\r\n\t\t\t\t\trace_id: 8,\r\n\t\t\t\t\tability_score: \"Constitution\",\r\n\t\t\t\t\tbonus: 2\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 21,\r\n\t\t\t\t\trace_id: 8,\r\n\t\t\t\t\tability_score: \"Wisdom\",\r\n\t\t\t\t\tbonus: 2\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 22,\r\n\t\t\t\t\trace_id: 8,\r\n\t\t\t\t\tability_score: \"Intelligence\",\r\n\t\t\t\t\tbonus: -2\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\timg_url: \"https://i.pinimg.com/originals/95/2f/4a/952f4a813b92fdde2da083dc934c36b3.png\",\r\n\t\t\tfavored_klass_bonuses: [\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 4,\r\n\t\t\t\t\tdescription: \"Add a +1/3 bonus to Perform (oratory) checks, including checks using versatile performance, as long as the bard first spends at least 10 minutes telling a story.\",\r\n\t\t\t\t\tklass_id: 7,\r\n\t\t\t\t\trace_id: 8,\r\n\t\t\t\t\tsource_id: null\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 5,\r\n\t\t\t\t\tdescription: \"An oracle with the nature or wood mystery adds one spell from the druid's spell list that isn't on the cleric spell list to the oracle's spell list; they still must select this spell as one of their spells known in order to cast it. This spell must be at least 1 level lower than the highest spell level the oracle can cast.\",\r\n\t\t\t\t\tklass_id: 1,\r\n\t\t\t\t\trace_id: 8,\r\n\t\t\t\t\tsource_id: null\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tsource: {\r\n\t\t\t\tid: 14,\r\n\t\t\t\ttitle: \"Ultimate Wilderness\",\r\n\t\t\t\tabbreviation: \"UW\",\r\n\t\t\t\tcode: \"PZO1140\"\r\n\t\t\t},\r\n\t\t\talternate_racial_traits: [\r\n\t\t\t\t{\r\n\t\t\t\t\tname: \"Grapevine\",\r\n\t\t\t\t\tdescription: \"A vine leshy made from a grapevine can produce magically infused fruit that can heal her allies. She can cast goodberry once per day as a spell-like ability, with a caster level equal to her character level. This replaces pass without trace.\",\r\n\t\t\t\t\tsource: {\r\n\t\t\t\t\t\tid: 14,\r\n\t\t\t\t\t\ttitle: \"Ultimate Wilderness\",\r\n\t\t\t\t\t\tabbreviation: \"UW\",\r\n\t\t\t\t\t\tcode: \"PZO1140\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\talternate_trait_replace_racial_traits: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 4,\r\n\t\t\t\t\t\t\talternate_racial_trait_id: 3,\r\n\t\t\t\t\t\t\tracial_trait_id: 47\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\tassociated_spells: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 219,\r\n\t\t\t\t\t\t\tname: \"Goodberry\",\r\n\t\t\t\t\t\t\tdescription: \"Casting goodberry makes 2d4 freshly picked berries magical. You (as well as any other druid of 3rd or higher level) can immediately discern which berries are affected. Each transmuted berry provides nourishment as if it were a normal meal for a Medium creature. The berry also cures 1 point of damage when eaten, subject to a maximum of 8 points of such curing in any 24-hour period.\",\r\n\t\t\t\t\t\t\ttarget: \"2d4 fresh berries touched\",\r\n\t\t\t\t\t\t\tsaving_throw: \"none\",\r\n\t\t\t\t\t\t\tspell_resistance: false,\r\n\t\t\t\t\t\t\tmagic_school_id: 8,\r\n\t\t\t\t\t\t\taction_id: 1,\r\n\t\t\t\t\t\t\tduration: \"1 day/level\",\r\n\t\t\t\t\t\t\ttime: 1,\r\n\t\t\t\t\t\t\tunit_of_time: \"day\",\r\n\t\t\t\t\t\t\tincrease_per_level: 1,\r\n\t\t\t\t\t\t\tdismissible: false,\r\n\t\t\t\t\t\t\tconcentration: false,\r\n\t\t\t\t\t\t\tspell_range_id: 2,\r\n\t\t\t\t\t\t\tsource_id: null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tname: \"Swamp Leshy\",\r\n\t\t\t\t\tdescription: \"Some vine leshys are made from plants that naturally grow in swamps. These leshys gain a +2 racial bonus on Swim checks and a +4 racial bonus on Stealth checks in swamps. This replaces climber and alters unassuming foliage.\",\r\n\t\t\t\t\tsource: {\r\n\t\t\t\t\t\tid: 14,\r\n\t\t\t\t\t\ttitle: \"Ultimate Wilderness\",\r\n\t\t\t\t\t\tabbreviation: \"UW\",\r\n\t\t\t\t\t\tcode: \"PZO1140\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\talternate_trait_replace_racial_traits: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 5,\r\n\t\t\t\t\t\t\talternate_racial_trait_id: 4,\r\n\t\t\t\t\t\t\tracial_trait_id: 51\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 6,\r\n\t\t\t\t\t\t\talternate_racial_trait_id: 4,\r\n\t\t\t\t\t\t\tracial_trait_id: 50\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\tassociated_spells: []\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t},\r\n\t}\r\n}\r\n\r\nexport default Character1\r\n// \"character_skillset_skills\": [\r\n// {\r\n// id: 64,\r\n// \"character_id\": 10,\r\n// skillset_id: 3,\r\n// skill_id: 28,\r\n// \"ranks\": 2,\r\n// \"detail\": \"chef\"\r\n// },\r\n// {\r\n// id: 65,\r\n// \"character_id\": 10,\r\n// skillset_id: 3,\r\n// skill_id: 38,\r\n// \"ranks\": 1,\r\n// \"detail\": null\r\n// },\r\n// {\r\n// id: 66,\r\n// \"character_id\": 10,\r\n// skillset_id: 3,\r\n// skill_id: 25,\r\n// \"ranks\": 1,\r\n// \"detail\": null\r\n// },\r\n// {\r\n// id: 67,\r\n// \"character_id\": 10,\r\n// skillset_id: 3,\r\n// skill_id: 34,\r\n// \"ranks\": 1,\r\n// \"detail\": null\r\n// },\r\n// {\r\n// id: 68,\r\n// \"character_id\": 10,\r\n// skillset_id: 3,\r\n// skill_id: 5,\r\n// \"ranks\": 1,\r\n// \"detail\": \"woodcarving\"\r\n// }\r\n// ],\r\n// \"character_klasses\": [\r\n// {\r\n// id: 40,\r\n// \"character_id\": 10,\r\n// klass_id: 15,\r\n// \"hp\": 8,\r\n// \"feat_id\": null,\r\n// \"ability_score_improvement\": null,\r\n// \"level\": 1\r\n// },\r\n// {\r\n// id: 41,\r\n// \"character_id\": 10,\r\n// klass_id: 15,\r\n// \"hp\": 7,\r\n// \"feat_id\": null,\r\n// \"ability_score_improvement\": null,\r\n// \"level\": 2\r\n// }\r\n// ],\r\n// \"character_magic_items\": [],\r\n// \"character_magic_item_feature_usages\": [],\r\n// \"notes\": [],\r\n// \"applicable_klass_features\": [\r\n// {\r\n// id: 122,\r\n// name: \"Weapon and Armor Proficiency\",\r\n// description: \"Kineticists are proficient with all simple weapons and light armor, but not shields.\",\r\n// klass_id: 15,\r\n// \"feature_levels\": [\r\n// {\r\n// id: 331,\r\n// \"klass_feature_id\": 122,\r\n// \"level\": 1,\r\n// \"table_description\": \"\"\r\n// }\r\n// ],\r\n// \"actions\": [],\r\n// \"features\": [\r\n// {\r\n// id: 44,\r\n// action: null,\r\n// \"usage\": null,\r\n// name: null,\r\n// \"after\": false,\r\n// \"feature_usage_spell_options\": [],\r\n// \"skill_bonuses\": [],\r\n// \"spells\": [],\r\n// \"feature_container\": null,\r\n// \"stat_bonuses\": [],\r\n// \"skill_notes\": [],\r\n// \"stat_notes\": [],\r\n// \"movements\": [],\r\n// \"languages\": [],\r\n// \"loading\": null,\r\n// \"attack_of_opportunity\": false,\r\n// \"weapon_proficiencies\": [\r\n// {\r\n// id: 16,\r\n// \"feature_id\": 44,\r\n// \"proficiency_group\": \"Simple\",\r\n// \"weapon_id\": null,\r\n// \"additive\": true,\r\n// \"player_choice\": null\r\n// }\r\n// ],\r\n// \"armor_proficiencies\": [\r\n// {\r\n// id: 17,\r\n// \"feature_id\": 44,\r\n// \"proficiency_group\": \"Light\",\r\n// \"armor_id\": null,\r\n// \"additive\": true\r\n// }\r\n// ],\r\n// \"conditions\": [],\r\n// \"applications\": [],\r\n// \"status_conditions\": [],\r\n// \"alternate_actions\": [],\r\n// \"saving_throws\": [],\r\n// \"spellcasting\": null,\r\n// \"display_descriptions\": [],\r\n// \"damages\": [],\r\n// \"character_choices\": [],\r\n// \"steps\": [],\r\n// \"bonus_spell_slot\": null,\r\n// \"spontaneous_castings\": [],\r\n// \"attack\": null,\r\n// \"castable_spells\": [],\r\n// \"weapon_applications\": []\r\n// }\r\n// ],\r\n// has_klass_feature_options: null,\r\n// associated_spells: [],\r\n// specialization: null,\r\n// choice_amount: 0,\r\n// \"klass_specializations\": []\r\n// },\r\n// {\r\n// id: 123,\r\n// name: \"Elemental Focus\",\r\n// description: \"At 1st level, a kineticist chooses one primary element on which to focus. This element determines how she accesses the raw power of the Ethereal Plane, and grants her access to specific wild talents (see below) and additional class skills. She gains her selected element’s basic utility wild talent (basic telekinesis, basic aerokinesis, etc.) as a bonus wild talent.\",\r\n// klass_id: 15,\r\n// \"feature_levels\": [\r\n// {\r\n// id: 332,\r\n// \"klass_feature_id\": 123,\r\n// \"level\": 1,\r\n// \"table_description\": \"Elemental Focus\"\r\n// }\r\n// ],\r\n// \"actions\": [],\r\n// \"features\": [],\r\n// has_klass_feature_options: null,\r\n// associated_spells: [],\r\n// specialization: true,\r\n// choice_amount: 1,\r\n// \"klass_specializations\": [\r\n// {\r\n// id: 5,\r\n// name: \"Aether\",\r\n// description: \"Kineticists who focus on the element of aether—a rare substance formed when elemental energy affects the Ethereal Plane—are called telekineticists. Telekineticists use strands of aether to move objects with their minds.\\n\\nClass Skills: A telekineticist adds Knowledge (engineering) and Sleight of Hand to her list of class skills.\\n\\nBasic Manipulation: A telekineticist gains basic telekinesis.\\n\\n<underline>Basic Telekinesis</underline>\\n\\nElement(s) aether; Type utility (Sp); Level 1; Burn 0\\n\\nThis ability is similar to mage hand, except you can move an object that weighs up to 5 pounds per 2 kineticist levels you possess (minimum 5 pounds), and you can move magical objects. Additionally, you can create a container of entwined strands of aether in order to hold liquids or piles of small objects of the same weight. You can dip the container to pick up or drop a liquid as a move action. If you possess the extended range wild talent, you can increase the range of basic telekinesis to medium range and increase the rate of movement to 30 feet per round, and if you possess the extreme range wild talent, You can increase the range of basic telekinesis to long range and increase the rate of movement to 60 feet per round. You can also use your basic telekinesis to duplicate the effects of the open/close cantrip.\\n\\nSimple Blast: A telekineticist gains telekinetic blast as a simple blast wild talent.\\n\\n<underline>Telekinetic Blast</underline>\\n\\nElement(s) aether; Type simple blast (Sp); Level —; Burn 0\\n\\nBlast Type: physical; Damage bludgeoning, piercing, or slashing\\n\\nYou throw a nearby unattended object at a single foe as a ranged attack. The object must weigh no more than 5 pounds per kineticist level you possess. If the attack hits, the target and the thrown object each take the blast’s damage. Since the object is enfolded in strands of aether, even if you use this power on a magic weapon or other unusual object, the attack doesn’t use any of the magic weapon’s bonuses or effects; it simply deals your blast damage. Alternatively, you can loosen the strands of aether in order to deal damage to both the object and the target as though you had thrown the object yourself (instead of dealing your normal blast damage).\\n\\nYou substitute your Constitution modifier for your Strength modifier if throwing the object would have added your Strength modifier on the damage roll, and you don’t take the –4 penalty on the attack roll for throwing an object that wasn’t designed to be thrown. In this case, the object’s special effects apply (including effects from its materials), and if the object is a weapon, you must be proficient with it and able to wield it with one hand; otherwise, the item deals damage as a one-handed improvised weapon for a creature of your size.\\n\\nDefense: a telekineticist’s defensive wild talent is force ward.\\n\\n<underline>Force Ward</underline>\\n\\nElement(s) aether; Type defense (Su); Level —; Burn 0\\n\\nYou constantly surround yourself with a ward of force. You gain a number of temporary hit points equal to your kineticist level.\\n\\nYou always lose these temporary hit points first, even before other temporary hit points. If an attack deals less damage than you still have as temporary hit points from force ward, it still reduces those temporary hit points but otherwise counts as a miss for the purpose of abilities that trigger on a hit or a miss. These temporary hit points regenerate at a rate of 1 per minute. By accepting 1 point of burn as a standard action, you can increase the maximum number of temporary hit points provided by your force ward by half your kineticist level until the next time your burn is removed.\\n\\nIf you use this ability multiple times, the increases stack. For every 2 points of burn you accept in this way, your force ward’s rate of regeneration increases by 1 hit point per minute. Whenever you accept burn while using an aether wild talent, you siphon some of the energy from the aether flowing through you and your force ward recovers a number of temporary hit points equal to your character level, up to its current maximum. You can dismiss or restore your force ward as an immediate action, but doing so doesn’t change the number of temporary hit points available, and the temporary hit points don’t recover while this ability is inactive.\\n\\nWild Talents: A telekineticist qualifies for the following wild talents in addition to all those listed as universal:\\n\\nInfusion: 1st—pushing infusion, telekinetic boomerang; 2nd—bowling infusion; 3rd—foe throw, force hook; 6th—disintegrating infusion; 8th—many throw\\n\\nUtility: 1st—basic telekinesis, kinetic cover, kinetic healer, telekinetic finesse; 2nd—telekinetic haul; 3rd—self telekinesis, telekinetic invisibility, touchsight; 4th—healing burst, telekinetic maneuvers, touchsight (spying); 5th—aether puppet, force barrier, self telekinesis (greater), touchsight (reactive); 6th—kinetic revivification, suffocate; 7th—spell deflection; 8th—telekinetic deflection, telekinetic globe; 9th—aether architect\"\r\n// },\r\n// {\r\n// id: 6,\r\n// name: \"Air\",\r\n// description: \"Kineticists who focus on the element of air are called aerokineticists. Aerokineticists often control air flow or electricity, specializing in mobility and ranged combat.\\n\\nClass Skills: An aerokineticist adds Fly and Knowledge (nature) to her list of class skills.\\n\\nBasic Manipulation: An aerokineticists gains basic aerokinesis.\\n\\n<underline>Basic Aerokinesis</underline>\\n\\nElement(s) air; Type utility (Sp); Level 1; Burn 0\\n\\nYou can create a light breeze that blows against a creature or object from a direction of your choice that follows the target wherever it goes. The breeze grants the subject a +2 bonus on saves against very hot conditions, severe heat, breath weapons, and cloud vapors and gases (such as cloudkill, stinking cloud, and inhaled poisons). This wild talent doesn’t function without air or while underwater. You can have only one such breeze active at any one time.\\n\\nYou can also use your aerokinesis to make it harder to detect you or others by scent. You can designate a number of creatures or objects equal to your Constitution bonus. These creatures and objects always count as being downwind for the purpose of determining the distance at which they can be detected by scent. This effect lasts for 1 hour or until you use basic aerokinesis again, whichever comes first.\\n\\nSimple Blast: An aerokineticist can select either air blast or electric blast as her simple blast. She gains one of them when she first selects air, and must select air again with expanded element to gain the other.\\n\\n<underline>Air Blast</underline>\\n\\nElement(s) air; Type simple blast (Sp); Level —; Burn 0\\n\\nBlast Type: physical; Damage bludgeoning\\n\\nYou batter a single foe with a gust of air.\\n\\n<underline>Electric Blast</underline>\\n\\nElement(s) air; Type simple blast (Sp); Level —; Burn 0\\n\\nBlast Type: energy; Damage electricity\\n\\nYou shoot an arc of electricity to shock a single foe.\\n\\nDefense: An aerokineticist’s defensive wild talent is enveloping winds.\\n\\n<underline>Enveloping Winds</underline>\\n\\nElement(s) air; Type defense (Su); Level —; Burn 0\\n\\nYou constantly surround yourself with a whirling torrent of air, crackling arcs of lightning, or both to protect yourself from ranged attacks. All ranged attacks made with physical weapons suffer a 20% miss chance against you, except for attacks from massive weapons such as a giant’s thrown boulder or a ballista. This ability has no effect on ray attacks. The miss chance increases by 5% for every 5 kineticist levels you possess beyond 2nd. By accepting 1 point of burn, you can increase the miss chance by 5% until the next time your burn is removed. You can continue to accept points of burn to increase the miss chance further, up to a maximum of 75%. Whenever you accept burn while using an air wild talent, the energy surging through you causes your enveloping winds to also affect non-physical ranged attacks such as ray attacks for 1 round.\\n\\nYou can dismiss or restore this effect as an immediate action.\\n\\nWild Talents: A aerokineticist qualifies for the following wild talents in addition to all those listed as universal:\\n\\nInfusion: 1st—energize weapon, gusting infusion, pushing infusion, thundering infusion; 2nd—penetrating infusion; 3rd—magnetic infusion, synaptic infusion; torrent; 4th—cyclone; 5th—chain; 7th—cloud;\\n\\nUtility: 1st—aerial adaptation, air cushion, air’s leap, air’s reach, air shroud, basic aerokinesis, voice of the wind; 2nd—living capacitor, voice of the wind (greater); 3rd—aerial evasion, celerity, engulfing winds, windsight, wings of air; 4rd—body of air; 5th—air shroud (greater), winfsight (greater); 6th—suffocate, wind manipulator; 8th—weather master\"\r\n// },\r\n// {\r\n// id: 7,\r\n// name: \"Earth\",\r\n// description: \"Kineticists who focus on the element of earth are called geokineticists. Geokineticists manipulate the earth itself, and they are masters of defensive techniques.\\n\\nClass Skills: A geokineticist adds Climb and Knowledge (dungeoneering) to her list of class skills.\\n\\nBasic Manipulation: A geokineticist gains basic geokinesis.\\n\\n<underline>Basic Geokinesis</underline>\\n\\nElement(s) earth; Type utility (Sp); Level 1; Burn 0\\n\\nYou can move up to 5 pounds per kineticist level of rocks, loose earth, sand, clay, and other similar materials up to 15 feet as a move action. You can search earthen and stone areas from a distance as if using the sift cantrip.\\n\\nSimple Blast: A geokineticist gains earth blast as a simple blast wild talent.\\n\\n<underline>Earth Blast</underline>\\n\\nElement(s) earth; Type simple blast (Sp); Level —; Burn 0\\n\\nBlast Type: physical; Damage bludgeoning, piercing, or slashing\\n\\nYou shape earth into clumps or shards and send them flying at a foe.\\n\\nDefense: A geokineticist’s defensive wild talent is flesh of stone.\\n\\n<underlin>Flesh of Stone</underline>\\n\\nElement(s) earth; Type defense (Su); Level —; Burn 0\\n\\nYour skin hardens like stone, dampening the impact of most attacks. You gain DR 1/adamantine. This DR increases by 1 for every 2 kineticist levels you possess beyond 2nd. By accepting 1 point of burn, you can increase the DR by 1 until the next time your burn is removed, to a maximum DR equal to your kineticist level. Whenever you accept burn while using an earth wild talent, the energy surging through you causes your damage reduction to change from DR/adamantine to DR/— for 1 round.\\n\\nYou can dismiss and restore this effect as an immediate action.\\n\\nWild Talents: A geokineticist qualifies for the following wild talents in addition to all those listed as universal:\\n\\nInfusion: 1st—pushing infusionl; 2nd—bowling infusion, entangling infusion; 3rd—impale, magnetic infusion, rare metal infusion; 5th—tremor; 6th—deadly earth; 7th—fragmentation\\n\\nUtility: 1st—basic geokinesis, eath walk, kinetic cover; 2nd—earth climb; 3rd—jagged flesh, tremorsense; 4th—earthmeld, shift earth, enduring earth; 5th—earth glide, stone sculptor, tremorsense (greater); 7th—shift earth (greater); 8th—earth tongue; 9th—seismic master\"\r\n// },\r\n// {\r\n// id: 8,\r\n// name: \"Fire\",\r\n// description: \"Kineticists who focus on the element of fire are called pyrokineticists. Pyrokineticists wield elemental fire as a potent weapon, and they possess a powerful offense.\\n\\nClass Skills: A pyrokineticist adds Escape Artist and Knowledge (nature) to her list of class skills.\\n\\nBasic Manipulation: A pyrokineticist gains basic pyrokinesis.\\n\\n<underline>Basic Pyrokinesis</underline>\\n\\nElement(s) fire; Type utility (Sp); Level 1; Burn 0\\n\\nYou can use your inner flame to reproduce the effects of a flare, light, or spark cantrip, except that the light you create with light produces heat like a normal flame; using any of the three abilities ends any previous light effect from this wild talent.\\n\\nSimple Blast: A pyrokineticist gains fire blast as a simple blast wild talent.\\n\\n<underline>Fire Blast</underline>\\n\\nElement(s) fire; Type simple blast (Sp); Level —; Burn 0\\n\\nBlast Type: energy; Damage fire\\n\\nYou unleash a gout of flickering fire to burn a single foe.\\n\\nDefense: A pyrokineticist’s defensive wild talent is searing flesh.\\n\\n<underline>Searing Flesh</underline>\\n\\nElement(s) fire; Type defense (Su); Level —; Burn 0\\n\\nYour body becomes painfully hot. Whenever a creature hits you with a natural attack or an unarmed strike, that creature takes 1 point of fire damage per 4 kineticist levels you possess (minimum 1 point of fire damage). A creature in a grapple with you takes double this amount of damage at the end of each of its turns.\\n\\nWeapons that strike you also take this damage, though the damage is unlikely to penetrate the weapon’s hardness. By accepting 1 point of burn, you can increase this damage by 1 point per 4 kineticist levels you possess until the next time your burn is removed. You can increase the damage in this way up to seven times.\\n\\nWhenever you accept burn while using a fire wild talent, the surging flame causes your searing flesh to deal double its current amount of damage for 1 round (a creature in a grapple with you takes a total of four times as much damage as normal). You can dismiss or restore this effect as an immediate action.\\n\\nWild Talents: A pyrokineticist qualifies for the following wild talents in addition to all those listed as universal:\\n\\nInfusion: 1st—burning infusion, dazzling infusion, energize weapon, fan of flames; 2nd—penetrating infusion; 3rd—eruption, foxfire infusion, torrent; 4th—detonation, flash infusion; 5th—unravelling infusion; 6th—brilliant infusion; 7th—explosion, pure flame infusion\\n\\nUtility: 1st—basic pyrokinesis, cold adaptation, fire sculptor, fire’s fury, heat adaptation; 2nd flame trap, foxfire, searing flame; 3rd firesight, heatwave, flame jet, smoke storm; 5th flame jet (greater), flame shield, trail of flames; 9th from the ashes\"\r\n// }\r\n// ]\r\n// },\r\n// {\r\n// id: 124,\r\n// name: \"Wild Talents\",\r\n// description: \"A kineticist can use wild talents—magical abilities similar to spells but drawn from the kineticist’s innate psychic talent and usable at will. Wild talents are typically spell-like abilities (though some are supernatural abilities), and take a standard action to use unless otherwise noted. A wild talent always has the elemental descriptor or descriptors (aether, air, earth, fire, or water) matching its element entry. A wild talent that can be used with any of several elements gains the appropriate elemental descriptor when used with an element. For example, the wall wild talent gains the earth descriptor when used by a geokineticist.\\n\\nEvery wild talent has an effective spell level. A kineticist can always select 1st-level wild talents, but she can select a wild talent of a higher level only if her kineticist level is at least double the wild talent’s effective spell level. Kinetic blast and defense wild talents are always considered to have an effective spell level equal to 1/2 the kineticist’s class level (to a maximum effective spell level of 9th at kineticist level 18th).\\n\\nUnless otherwise noted, the DC for a saving throw against a wild talent is equal to 10 + the wild talent’s effective spell level + the kineticist’s Constitution modifier. The kineticist uses her Constitution modifier on all concentration checks for wild talents.\\n\\nIn addition to the wild talents she gains from her other class features, at 2nd level and every 2 levels thereafter, a kineticist selects a new utility wild talent from the list of options available to her. A kineticist can select only universal wild talents or those that match her element (see Elemental Focus above). At 6th, 10th, and 16th levels, a kineticist can replace one of her utility wild talents with another wild talent of the same level or lower. She can’t replace a wild talent that she used to qualify for another of her wild talents.\",\r\n// klass_id: 15,\r\n// \"feature_levels\": [\r\n// {\r\n// id: 333,\r\n// \"klass_feature_id\": 124,\r\n// \"level\": 1,\r\n// \"table_description\": \"\"\r\n// },\r\n// {\r\n// id: 334,\r\n// \"klass_feature_id\": 124,\r\n// \"level\": 2,\r\n// \"table_description\": \"Utility Wild Talent\"\r\n// },\r\n// {\r\n// id: 335,\r\n// \"klass_feature_id\": 124,\r\n// \"level\": 4,\r\n// \"table_description\": \"Utility Wild Talent\"\r\n// },\r\n// {\r\n// id: 336,\r\n// \"klass_feature_id\": 124,\r\n// \"level\": 6,\r\n// \"table_description\": \"Utility Wild Talent\"\r\n// },\r\n// {\r\n// id: 337,\r\n// \"klass_feature_id\": 124,\r\n// \"level\": 8,\r\n// \"table_description\": \"Utility Wild Talent\"\r\n// },\r\n// {\r\n// id: 338,\r\n// \"klass_feature_id\": 124,\r\n// \"level\": 10,\r\n// \"table_description\": \"Utility Wild Talent\"\r\n// },\r\n// {\r\n// id: 339,\r\n// \"klass_feature_id\": 124,\r\n// \"level\": 12,\r\n// \"table_description\": \"Utility Wild Talent\"\r\n// },\r\n// {\r\n// id: 340,\r\n// \"klass_feature_id\": 124,\r\n// \"level\": 14,\r\n// \"table_description\": \"Utility Wild Talent\"\r\n// },\r\n// {\r\n// id: 341,\r\n// \"klass_feature_id\": 124,\r\n// \"level\": 16,\r\n// \"table_description\": \"Utility Wild Talent\"\r\n// },\r\n// {\r\n// id: 342,\r\n// \"klass_feature_id\": 124,\r\n// \"level\": 18,\r\n// \"table_description\": \"Utility Wild Talent\"\r\n// },\r\n// {\r\n// id: 343,\r\n// \"klass_feature_id\": 124,\r\n// \"level\": 20,\r\n// \"table_description\": \"Utility Wild Talent\"\r\n// }\r\n// ],\r\n// \"actions\": [],\r\n// \"features\": [],\r\n// has_klass_feature_options: null,\r\n// associated_spells: [],\r\n// specialization: null,\r\n// choice_amount: 0,\r\n// \"klass_specializations\": []\r\n// },\r\n// {\r\n// id: 125,\r\n// name: \"Burn\",\r\n// description: \"At 1st level, a kineticist can overexert herself to channel more power than normal, pushing past the limit of what is safe for her body by accepting burn. Some of her wild talents allow her to accept burn in exchange for a greater effect, while others require her to accept a certain amount of burn to use that talent at all. For each point of burn she accepts, a kineticist takes 1 point of nonlethal damage per character level. This damage can’t be healed by any means other than getting a full night’s rest, which removes all burn and associated nonlethal damage. Nonlethal damage from burn can’t be reduced or redirected, and a kineticist incapable of taking nonlethal damage can’t accept burn. A kineticist can accept only 1 point of burn per round. This limit rises to 2 points of burn at 6th level, and rises by 1 additional point every 3 levels thereafter. A kineticist can’t choose to accept burn if it would put her total number of points of burn higher than 3 + her Constitution modifier (though she can be forced to accept more burn from a source outside her control). A kineticist who has accepted burn never benefits from abilities that allow her to ignore or alter the effects she receives from nonlethal damage.\",\r\n// klass_id: 15,\r\n// \"feature_levels\": [\r\n// {\r\n// id: 344,\r\n// \"klass_feature_id\": 125,\r\n// \"level\": 1,\r\n// \"table_description\": \"Burn\"\r\n// }\r\n// ],\r\n// \"actions\": [],\r\n// \"features\": [],\r\n// has_klass_feature_options: null,\r\n// associated_spells: [],\r\n// specialization: null,\r\n// choice_amount: 0,\r\n// \"klass_specializations\": []\r\n// },\r\n// {\r\n// id: 126,\r\n// name: \"Kinetic Blast\",\r\n// description: \"At 1st level, a kineticist gains a kinetic blast wild talent of her choice. This kinetic blast must be a simple blast that matches her element. Simple blasts are listed with their corresponding elements.\\n\\nAs a standard action, the kineticist can unleash a kinetic blast at a single target up to a range of 30 feet. She must have at least one hand free to aim the blast (or one prehensile appendage, if she doesn’t have hands). All damage from a kinetic blast is treated as magic for the purpose of bypassing damage reduction. Kinetic blasts count as a type of weapon for the purpose of feats such as Weapon Focus. The kineticist is never considered to be wielding or gripping the kinetic blast (regardless of effects from form infusions; see Infusion), and she can’t use Vital Strike feats with kinetic blasts. Even the weakest kinetic blast involves a sizable mass of elemental matter or energy, so kinetic blasts always deal full damage to swarms of any size (though only area blasts deal extra damage to swarms). A readied kinetic blast can be used to counterspell any spell of equal or lower level that shares its descriptor. A kinetic blast that deals energy damage of any type (including force) has the corresponding descriptor.\\n\\nEach simple blast is either a physical blast or an energy blast.\\n\\nPhysical blasts are ranged attacks that deal an amount of damage equal to 1d6+1 + the kineticist’s Constitution modifier, increasing by 1d6+1 for every 2 kineticist levels beyond 1st. Spell resistance doesn’t apply against physical blasts.\\n\\nEnergy blasts are ranged touch attacks that deal an amount of damage equal to 1d6 + 1/2 the kineticist’s Constitution modifier, increasing by 1d6 for every 2 kineticist levels beyond 1st.\\n\\nComposite blasts combine elements to form a new blast. When a kineticist gains a new element through expanded element, she gains access to all composite blasts for which she qualifies. All composite blasts are listed after the kineticist elements.\\n\\nMost composite blasts are either physical or energy blasts, like simple blasts.\\n\\nPhysical composite blasts deal an amount of damage equal to 2d6+2 + the kineticist’s Constitution modifier, increasing by 2d6+2 for every 2 kineticist levels beyond 1st.\\n\\nEnergy composite blasts deal an amount of damage equal to 2d6 + 1/2 the kineticist’s Constitution modifier, increasing by 2d6 for every 2 kineticist levels beyond 1st.\",\r\n// klass_id: 15,\r\n// \"feature_levels\": [\r\n// {\r\n// id: 345,\r\n// \"klass_feature_id\": 126,\r\n// \"level\": 1,\r\n// \"table_description\": \"Kinetic Blast\"\r\n// }\r\n// ],\r\n// \"actions\": [],\r\n// \"features\": [],\r\n// has_klass_feature_options: null,\r\n// associated_spells: [],\r\n// specialization: true,\r\n// choice_amount: 1,\r\n// \"klass_specializations\": []\r\n// },\r\n// {\r\n// id: 127,\r\n// name: \"Gather Power\",\r\n// description: \"If she has both hands free (or all of her prehensile appendages free, for unusual kineticists), a kineticist can gather energy or elemental matter as a move action. Gathering power creates an extremely loud, visible display in a 20-foot radius centered on the kineticist, as the energy or matter swirls around her. Gathering power in this way allows the kineticist to reduce the total burn cost of a blast wild talent she uses in the same round by 1 point. The kineticist can instead gather power for 1 full round in order to reduce the total burn cost of a blast wild talent used on her next turn by 2 points (to a minimum of 0 points). If she does so, she can also gather power as a move action during her next turn to reduce the burn cost by a total of 3 points. If the kineticist takes damage during or after gathering power and before using the kinetic blast that releases it, she must succeed at a concentration check (DC = 10 + damage taken + effective spell level of her kinetic blast) or lose the energy in a wild surge that forces her to accept a number of points of burn equal to the number of points by which her gathered power would have reduced the burn cost. This ability can never reduce the burn cost of a wild talent below 0 points.\",\r\n// klass_id: 15,\r\n// \"feature_levels\": [\r\n// {\r\n// id: 346,\r\n// \"klass_feature_id\": 127,\r\n// \"level\": 1,\r\n// \"table_description\": \"Gather Power\"\r\n// }\r\n// ],\r\n// \"actions\": [],\r\n// \"features\": [\r\n// {\r\n// id: 45,\r\n// action: {\r\n// id: 3,\r\n// name: \"Move Action\"\r\n// },\r\n// \"usage\": null,\r\n// name: null,\r\n// \"after\": false,\r\n// \"feature_usage_spell_options\": [],\r\n// \"skill_bonuses\": [],\r\n// \"spells\": [],\r\n// \"feature_container\": null,\r\n// \"stat_bonuses\": [],\r\n// \"skill_notes\": [],\r\n// \"stat_notes\": [],\r\n// \"movements\": [],\r\n// \"languages\": [],\r\n// \"loading\": null,\r\n// \"attack_of_opportunity\": false,\r\n// \"weapon_proficiencies\": [],\r\n// \"armor_proficiencies\": [],\r\n// \"conditions\": [],\r\n// \"applications\": [],\r\n// \"status_conditions\": [],\r\n// \"alternate_actions\": [],\r\n// \"saving_throws\": [],\r\n// \"spellcasting\": null,\r\n// \"display_descriptions\": [],\r\n// \"damages\": [],\r\n// \"character_choices\": [],\r\n// \"steps\": [],\r\n// \"bonus_spell_slot\": null,\r\n// \"spontaneous_castings\": [],\r\n// \"attack\": null,\r\n// \"castable_spells\": [],\r\n// \"weapon_applications\": []\r\n// }\r\n// ],\r\n// has_klass_feature_options: null,\r\n// associated_spells: [],\r\n// specialization: null,\r\n// choice_amount: 0,\r\n// \"klass_specializations\": []\r\n// },\r\n// {\r\n// id: 128,\r\n// name: \"Infusion\",\r\n// description: \"At 1st level, a kineticist gains an infusion wild talent from the list of options available based on her elemental focus. She gains additional infusions at 3rd, 5th, 9th, 11th, 13th, 17th, and 19th levels. By using infusions along with her kinetic blasts, a kineticist can alter her kinetic blasts to suit her needs. Infusions come in two types, each of which changes a kinetic blast differently: a substance infusion causes an additional effect, while a form infusion causes the kinetic blast to manifest in a different way. Each infusion can alter only certain kinds of kinetic blasts, which are listed in its Associated Blasts entry. Each time the kineticist uses one of her kinetic blast wild talents, she can apply up to one associated form infusion and up to one associated substance infusion.\\n\\nSome infusions change the action required to activate a kinetic blast or entirely transform the kinetic blast’s normal effects.\\n\\nThe burn cost listed in each infusion’s Burn entry is added to the burn cost of the kinetic blast the infusion modifies.\\n\\nThe DC for a save against an infusion is based on the associated kinetic blast’s effective spell level, not the level of the infusion. The DCs for form infusions are calculated using the kineticist’s Dexterity modifier instead of her Constitution modifier. When a kineticist modifies a kinetic blast with a form infusion and a substance infusion that both require saving throws, each target first attempts a saving throw against the form infusion. If a target succeeds and a successful save negates the infusion’s effects, the entire kinetic blast is negated; otherwise, the target then attempts a saving throw against the substance infusion. If a kineticist’s form and substance infusions both alter the kinetic blast’s damage, apply the substance infusion’s alteration first.\\n\\nAt 5th, 11th, and 17th levels, a kineticist can replace one of her infusions with another infusion of the same effective spell level or lower. She can’t replace an infusion that she used to qualify for another of her wild talents.\",\r\n// klass_id: 15,\r\n// \"feature_levels\": [\r\n// {\r\n// id: 347,\r\n// \"klass_feature_id\": 128,\r\n// \"level\": 1,\r\n// \"table_description\": \"Infusion\"\r\n// },\r\n// {\r\n// id: 348,\r\n// \"klass_feature_id\": 128,\r\n// \"level\": 3,\r\n// \"table_description\": \"Infusion\"\r\n// },\r\n// {\r\n// id: 349,\r\n// \"klass_feature_id\": 128,\r\n// \"level\": 5,\r\n// \"table_description\": \"Infusion\"\r\n// },\r\n// {\r\n// id: 350,\r\n// \"klass_feature_id\": 128,\r\n// \"level\": 9,\r\n// \"table_description\": \"Infusion\"\r\n// },\r\n// {\r\n// id: 351,\r\n// \"klass_feature_id\": 128,\r\n// \"level\": 11,\r\n// \"table_description\": \"Infusion\"\r\n// },\r\n// {\r\n// id: 352,\r\n// \"klass_feature_id\": 128,\r\n// \"level\": 13,\r\n// \"table_description\": \"Infusion\"\r\n// },\r\n// {\r\n// id: 353,\r\n// \"klass_feature_id\": 128,\r\n// \"level\": 17,\r\n// \"table_description\": \"Infusion\"\r\n// },\r\n// {\r\n// id: 354,\r\n// \"klass_feature_id\": 128,\r\n// \"level\": 19,\r\n// \"table_description\": \"Infusion\"\r\n// }\r\n// ],\r\n// \"actions\": [],\r\n// \"features\": [],\r\n// has_klass_feature_options: null,\r\n// associated_spells: [],\r\n// specialization: null,\r\n// choice_amount: 0,\r\n// \"klass_specializations\": []\r\n// },\r\n// {\r\n// id: 129,\r\n// name: \"Elemental Defense\",\r\n// description: \"At 2nd level, a kineticist gains her element’s defensive wild talent.\\n\\nShe must select the expanded defense utility wild talent to gain the defensive wild talent of any element she gains via the expanded element class feature.\",\r\n// klass_id: 15,\r\n// \"feature_levels\": [\r\n// {\r\n// id: 355,\r\n// \"klass_feature_id\": 129,\r\n// \"level\": 2,\r\n// \"table_description\": \"Elemental Defense\"\r\n// }\r\n// ],\r\n// \"actions\": [],\r\n// \"features\": [],\r\n// has_klass_feature_options: null,\r\n// associated_spells: [],\r\n// specialization: null,\r\n// choice_amount: 0,\r\n// \"klass_specializations\": []\r\n// }\r\n// ],\r\n// \"skillset\": {\r\n// id: 3,\r\n// name: \"Ravnica Custom\",\r\n// skills: [\r\n// {\r\n// name: \"Acrobatics\",\r\n// ability_score: \"Dexterity\",\r\n// description: \"You can use Acrobatics to move on narrow surfaces and uneven ground without falling. A successful check allows you to move at half speed across such surfaces—only one check is needed per round. Use the following table to determine the base DC, which is then modified by the Acrobatics skill modifiers noted below. While you are using Acrobatics in this way, you are considered flat-footed and lose your Dexterity bonus to your AC (if any). If you take damage while using Acrobatics, you must immediately make another Acrobatics check at the same DC to avoid falling or being knocked prone. *No Acrobatics check is needed to move across these surfaces unless the modifiers increase the DC to 10 or higher.\\n\\n<table>\\n  <tr>\\n    <th>Surface Width</th>\\n    <th>Base Acrobatics DC</th>\\n  </tr>\\n  <tr>\\n    <td>Greater Than 3 Feet Wide</td>\\n    <td>0*</td>\\n  </tr>\\n  <tr>\\n    <td>1-3 Feet Wide</td>\\n    <td>5*</td>\\n  </tr>\\n  <tr>\\n    <td>7-11 Inches Wide</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>2-6 Inches Wide</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Less Than 2 Inches Wide</td>\\n    <td>20</td>\\n  </tr>\\n</table>\\n\\nIn addition, you can move through a threatened square without provoking an attack of opportunity from an enemy by using Acrobatics. When moving in this way, you move at half speed. You can move at full speed by increasing the DC of the check by 10. You cannot use Acrobatics to move past foes if your speed is reduced due to carrying a medium or heavy load or wearing medium or heavy armor. If an ability allows you to move at full speed under such conditions, you can use Acrobatics to move past foes. You can use Acrobatics in this way while prone, but doing so requires a full-round action to move 5 feet, and the DC is increased by 5. If you attempt to move through an enemy’s space and fail the check, you lose the move action and provoke an attack of opportunity. *This DC is used to avoid an attack of opportunity due to movement. This DC increases by 2 for each additional opponent avoided in 1 round.\\n\\n<table>\\n  <tr>\\n    <th>Situation</th>\\n    <th>Base Acrobatics DC*</th>\\n  </tr>\\n  <tr>\\n    <td>Move Through a Threatened Area</td>\\n    <td>Opponent's Combat Maneuver Defense</td>\\n  </tr>\\n  <tr>\\n    <td>Move Through an Enemy's Space</td>\\n    <td>5 + Opponent's Combat Maneuver Defense</td>\\n  </tr>\\n</table>\\n\\nFinally, you can use the Acrobatics skill to make jumps or to soften a fall. The base DC to make a jump is equal to the distance to be crossed (if horizontal) or four times the height to be reached (if vertical). These DCs double if you do not have at least 10 feet of space to get a running start. The only Acrobatics modifiers that apply are those concerning the surface you are jumping from. If you fail this check by 4 or less, you can attempt a DC 20 Reflex save to grab hold of the other side after having missed the jump. If you fail by 5 or more, you fail to make the jump and fall (or land prone, in the case of a vertical jump).\\n\\nCreatures with a base land speed above 30 feet receive a +4 racial bonus on Acrobatics checks made to jump for every 10 feet of their speed above 30 feet. Creatures with a base land speed below 30 feet receive a –4 racial bonus on Acrobatics checks made to jump for every 10 feet of their speed below 30 feet. No jump can allow you to exceed your maximum movement for the round.\\n\\nFor a running jump, the result of your Acrobatics check indicates the distance traveled in the jump (and if the check fails, the distance at which you actually land and fall prone). Halve this result for a standing long jump to determine where you land.\\n\\nWhen you deliberately fall any distance, even as a result of a missed jump, a DC 15 Acrobatics skill check allows you to ignore the first 10 feet fallen, although you still end up prone if you take damage from a fall.\\n\\n<table>\\n  <tr>\\n    <th>Long Jump</th>\\n    <th>Acrobatics DC</th>\\n  </tr>\\n  <tr>\\n    <td>5 Feet</td>\\n    <td>5</td>\\n  </tr>\\n  <tr>\\n    <td>10 Feet</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>15 Feet</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>20 Feet</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Greater Than 20 Feet</td>\\n    <td>+5 per 5 Feet</td>\\n  </tr>\\n</table>\\n\\n<table>\\n  <tr>\\n    <th>High Jump</th>\\n    <th>Acrobatics DC</th>\\n  </tr>\\n  <tr>\\n    <td>1 Foot</td>\\n    <td>4</td>\\n  </tr>\\n  <tr>\\n    <td>2 Feet</td>\\n    <td>8</td>\\n  </tr>\\n  <tr>\\n    <td>3 Feet</td>\\n    <td>12</td>\\n  </tr>\\n  <tr>\\n    <td>4 Feet</td>\\n    <td>16</td>\\n  </tr>\\n  <tr>\\n    <td>Greater Than 4 Feet</td>\\n    <td>+4 per Foot</td>\\n  </tr>\\n</table>\\n\\nThe following modifiers apply to all Acrobatics skill checks. The modifiers stack with one another, but only the most severe modifier for any given condition applies.\\n\\n<table>\\n  <tr>\\n    <th>Acrobatics Modifiers</th>\\n    <th>DC Modifier</th>\\n  </tr>\\n  <tr>\\n    <td>Slightly Obstructed (Gravel, Sand)</td>\\n    <td>+2</td>\\n  </tr>\\n  <tr>\\n    <td>Severyly Obstructed (Cavern, Rubble)</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Slightly Slippery (Wet)</td>\\n    <td>+2</td>\\n  </tr>\\n  <tr>\\n    <td>Severly Slippery</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Slightly Sloped (<45 degrees)</td>\\n    <td>+2</td>\\n  </tr>\\n  <tr>\\n    <td>Severly Sloped (>45 degrees)</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Slightly Unsteady (Boat in Rough Water)</td>\\n    <td>+2</td>\\n  </tr>\\n  <tr>\\n    <td>Moderately Unsteady (Boat in a Storm)</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Move at Full Speed on Narrow or Uneven Surfaces</td>\\n    <td>+5 (not to Jumps)</td>\\n  </tr>\\n</table>\",\r\n// id: 1,\r\n// untrained: true,\r\n// customizable: false,\r\n// knowledge: false,\r\n// blurb: \"You can keep your balance while traversing narrow or treacherous surfaces. You can also dive, flip, jump, and roll, avoiding attacks and confusing your opponents.\",\r\n// action: \"None. An Acrobatics check is made as part of another action or as a reaction to a situation.\",\r\n// try_again: \"\",\r\n// special: \"If you have 3 or more ranks in Acrobatics, you gain a +3 dodge bonus to AC when fighting defensively instead of the usual +2, and a +6 dodge bonus to AC when taking the total defense action instead of the usual +4.\",\r\n// skill_unlock_5: \"You can move at normal speed through a threatened square without provoking an attack of opportunity by increasing the DC of the check by 5 (instead of by 10). You aren’t denied your Dexterity bonus when attempting Acrobatics checks with DCs of 20 or lower.\",\r\n// skill_unlock_10: \"You can attempt an Acrobatics check at a –10 penalty and use the result as your CMD against trip maneuvers. You can also attempt an Acrobatics check at a –10 penalty in place of a Reflex save to avoid falling. You must choose to use this ability before the trip attempt or Reflex save is rolled. With a successful DC 20 Acrobatics check, you treat an unintentional fall as 10 feet shorter plus 10 feet for every 10 by which you exceed the DC, and treat an intentional fall as 10 feet shorter for every 10 by which you exceed the DC.\",\r\n// skill_unlock_15: \"You do not provoke attacks of opportunity when standing up from prone.\",\r\n// skill_unlock_20: \"You double the result of any Acrobatics check when jumping and never fall prone at the end of a fall as long as you remain conscious.\"\r\n// },\r\n// {\r\n// name: \"Bluff\",\r\n// ability_score: \"Charisma\",\r\n// description: \"Bluff is an opposed skill check against your opponent’s Sense Motive skill. If you use Bluff to fool someone, with a successful check you convince your opponent that what you are saying is true. Bluff checks are modified depending upon the believability of the lie. The following modifiers are applied to the roll of the creature attempting to tell the lie. Note that some lies are so improbable that it is impossible to convince anyone that they are true (subject to GM discretion).\\n\\n<table>\\n  <tr>\\n    <th>Circumstances</th>\\n    <th>Bluff Modifier</th>\\n  </tr>\\n  <tr>\\n    <td>The Target Wants to Believe You</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>The Lie is Believable</td>\\n    <td>+0</td>\\n  </tr>\\n  <tr>\\n    <td>The Lie is Unlikely</td>\\n    <td>-5</td>\\n  </tr>\\n  <tr>\\n    <td>The Lie is Far-fetched</td>\\n    <td>-10</td>\\n  </tr>\\n  <tr>\\n    <td>The Lie is Impossible</td>\\n    <td>-20</td>\\n  </tr>\\n  <tr>\\n    <td>The Target is Drunk or Impaired</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>You Possess Convincing Proof</td>\\n    <td>Up to +10</td>\\n  </tr>\\n</table>\\n\\nFient: You can also use Bluff to feint in combat, causing your opponent to be denied his Dexterity bonus to his AC against your next attack. The DC of this check is equal to 10 + your opponent’s base attack bonus + your opponent’s Wisdom modifier. If your opponent is trained in Sense Motive, the DC is instead equal to 10 + your opponent’s Sense Motive bonus, if higher.\\n\\nSecret Messages: You can use Bluff to pass hidden messages to another character without others understanding your true meaning. The DC of this check is 15 for simple messages and 20 for complex messages. If you are successful, the target automatically understands you, assuming you are speaking in a language that it understands. If your check fails by 5 or more, you deliver the wrong message. Other creatures that hear the message can decipher the message by succeeding at an opposed Sense Motive check against your Bluff result.\",\r\n// id: 3,\r\n// untrained: true,\r\n// customizable: false,\r\n// knowledge: false,\r\n// blurb: \"You know how to tell a lie.\",\r\n// action: \"Attempting to deceive someone takes at least 1 round, but can possibly take longer if the lie is elaborate (as determined by the GM on a case-by-case basis).\\n\\nFeinting in combat is a standard action.\\n\\nUsing Bluff to deliver a secret message takes twice as long as the message would otherwise take to relay.\",\r\n// try_again: \"If you fail to deceive someone, further attempts to deceive them are at a –10 penalty and may be impossible (GM discretion).\\n\\nYou can attempt to feint against someone again if you fail. Secret messages can be relayed again if the first attempt fails.\",\r\n// special: \"\",\r\n// skill_unlock_5: \"The penalty to Bluff a creature after a failed check is halved unless you failed by 5 or more.\",\r\n// skill_unlock_10: \"You take no penalty to Bluff a creature after a failed check unless you failed by 5 or more.\",\r\n// skill_unlock_15: \"Creatures magically attempting to read your thoughts, detect your alignment, or reveal when you are lying must attempt a caster level check (DC = 11 + your ranks in Bluff ) or the effect reveals nothing.\",\r\n// skill_unlock_20: \"As a full-round action, you can make a suggestion (as the spell, maximum duration 1 hour) to a creature within 30 feet (Will negates, DC = 15 + your Charisma modifier). A creature that saves against your suggestion is immune to further uses of this effect for 24 hours, and whenever the suggested creature is specifically confronted with proof of your manipulation, it receives another saving throw. This is an extraordinary mind-affecting compulsion.\"\r\n// },\r\n// {\r\n// name: \"Climb\",\r\n// ability_score: \"Strength\",\r\n// description: \"With a successful Climb check, you can advance up, down, or across a slope, wall, or other steep incline (or even across a ceiling, provided it has handholds) at one-quarter your normal speed. A slope is considered to be any incline at an angle measuring less than 60 degrees; a wall is any incline at an angle measuring 60 degrees or more. A Climb check that fails by 4 or less means that you make no progress, and one that fails by 5 or more means that you fall from whatever height you have already attained. The DC of the check depends on the conditions of the climb. Compare the task with those on the following table to determine an appropriate DC.\\n\\nYou need both hands free to climb, but you may cling to a wall with one hand while you cast a spell or take some other action that requires only one hand. While climbing, you can’t move to avoid a blow, so you lose your Dexterity bonus to AC (if any). You also can’t use a shield while climbing. Anytime you take damage while climbing, make a Climb check against the DC of the slope or wall. Failure means you fall from your current height and sustain the appropriate falling damage.\\n\\n<table>\\n  <tr>\\n    <th>DC</th>\\n    <th>Example Surface or Activity</th>\\n  </tr>\\n  <tr>\\n    <td>0</td>\\n    <td>A slope too steep to walk up, or a knotted rope with a wall to brace against.</td>\\n  </tr>\\n  <tr>\\n    <td>5</td>\\n    <td>A rope with a wall to brace against, or a knotted rope, or a rope affected by the rope trick spell.</td>\\n  </tr>\\n  <tr>\\n    <td>10</td>\\n    <td>A surface with ledges to hold on to and stand on, such as a very rough wall or a ship’s rigging.</td>\\n  </tr>\\n  <tr>\\n    <td>15</td>\\n    <td>Any surface with adequate handholds and footholds (natural or artificial), such as a very rough natural rock surface or a tree, or an unknotted rope, or pulling yourself up when dangling by your hands.</td>\\n  </tr>\\n  <tr>\\n    <td>20</td>\\n    <td>An uneven surface with some narrow handholds and footholds, such as a typical wall in a dungeon.</td>\\n  </tr>\\n  <tr>\\n    <td>21</td>\\n    <td>A typical buildings upper-story wall</td>\\n  </tr>\\n  <tr>\\n    <td>25</td>\\n    <td>A rough surface, such as a natural rock wall or a brick wall; A typical buildings lower-story wall.</td>\\n  </tr>\\n  <tr>\\n    <td>-</td>\\n    <td>A perfectly smooth, flat, vertical (or inverted) surface cannot be climbed.</td>\\n  </tr>\\n</table>\\n\\n<table>\\n  <tr>\\n    <th>Climb DC Modifier</th>\\n    <th>Example Surface or Activity</th>\\n  </tr>\\n  <tr>\\n    <td>-10</td>\\n    <td>Climbing a chimney (artificial or natural) or other location where you can brace against two opposite walls.</td>\\n  </tr>\\n  <tr>\\n    <td>-5</td>\\n    <td>Climbing a corner where you can brace against perpendicular walls.</td>\\n  </tr>\\n  <tr>\\n    <td>+5</td>\\n    <td>Surface is slippery.</td>\\n  </tr>\\n</table>\\n\\nAccelerated Climbing: You try to climb more quickly than normal. By accepting a –5 penalty, you can move half your speed (instead of one-quarter your speed).\\n\\nMake Your Own Handholds and Footholds: You can make your own handholds and footholds by pounding pitons into a wall. Doing so takes 1 minute per piton, and one piton is needed per 5 feet of distance. As with any surface that offers handholds and footholds, a wall with pitons inithasaDCof15.Inthesameway,aclimberwitha handaxe or similar implement can cut handholds in an ice wall.\\n\\nCatch Yourself When Falling: It’s practically impossible to catch yourself on a wall while falling. Make a Climb check (DC = wall’s DC + 20) to do so. It’s much easier to catch yourself on a slope (DC = slope’s DC + 10).\\n\\nCatch a Falling Character While Climbing: If someone climbing above you or adjacent to you falls, you can attempt to catch the falling character if he or she is within your reach. Doing so requires a successful melee touch attack against the falling character (though he or she can voluntarily forego any Dexterity bonus to AC if desired). If you hit, you must immediately attempt a Climb check (DC = wall’s DC + 10). Success indicates that you catch the falling character, but his total weight, including equipment, cannot exceed your heavy load limit or you automatically fall. If you fail your Climb check by 4 or less, you fail to stop the character’s fall but don’t lose your grip on the wall. If you fail by 5 or more, you fail to stop the character’s fall and begin falling as well.\",\r\n// id: 4,\r\n// untrained: true,\r\n// customizable: false,\r\n// knowledge: false,\r\n// blurb: \"You are skilled at scaling vertical surfaces, from smooth city walls to rocky cliffs.\",\r\n// action: \"Climbing is part of movement, so it’s generally part of a move action (and may be combined with other types of movement in a move action). Each move action that includes any climbing requires a separate Climb check. Catching yourself or another falling character doesn’t take an action.\",\r\n// try_again: \"\",\r\n// special: \"You can use a rope to haul a character upward (or lower a character) through sheer strength. You can lift double your maximum load in this manner.\\n\\nA creature with a climb speed has a +8 racial bonus on all Climb checks. The creature must make a Climb check to climb any wall or slope with a DC higher than 0, but it can always choose to take 10, even if rushed or threatened while climbing. If a creature with a climb speed chooses an accelerated climb (see above), it moves at double its climb speed (or at its land speed, whichever is slower) and makes a single Climb check at a –5 penalty. Such a creature retains its Dexterity bonus to Armor Class (if any) while climbing, and opponents get no special bonus to their attacks against it. It cannot, however, use the run action while climbing.\\n\\nAny creature of Tiny or smaller size should use its Dex modifier instead of its Str modifier for Climb and Swim checks.\",\r\n// skill_unlock_5: \"You are no longer denied your Dexterity bonus when climbing.\",\r\n// skill_unlock_10: \"You gain a natural climb speed (but not the +8 racial bonus on Climb checks) of 10 feet, but only on surfaces with a Climb DC of 20 or lower.\",\r\n// skill_unlock_15: \"You gain a natural climb speed (but not the +8 racial bonus on Climb checks) equal to your base speed on surfaces with a Climb DC of 20 or lower, and of 10 feet on all other surfaces.\",\r\n// skill_unlock_20: \"You gain a natural climb speed equal to your base speed on all surfaces. If you have both hands free, you gain a +8 racial bonus on Climb checks.\"\r\n// },\r\n// {\r\n// name: \"Craft\",\r\n// ability_score: \"Intelligence\",\r\n// description: \"You can practice your trade and make a decent living, earning half your check result in gold pieces per week of dedicated work. You know how to use the tools of your trade, how to perform the craft’s daily tasks, how to supervise untrained helpers, and how to handle common problems. (Untrained laborers and assistants earn an average of 1 silver piece per day.)\\n\\nThe basic function of the Craft skill, however, is to allow you to make an item of the appropriate type. The DC depends on the complexity of the item to be created. The DC, your check result, and the price of the item determine how long it takes to make a particular item. The item’s finished price also determines the cost of raw materials.\\n\\nTo determine how much time and money it takes to make an item, follow these steps.\\n\\n1) Find the item’s price in silver pieces (1 gp = 10 sp).\\n\\n2) Find the item’s DC from Table: Craft Skills.\\n\\n3) Pay 1/3 of the item’s price for the raw material cost.\\n\\n4) Make an appropriate Craft check representing one week’s worth of work. If the check succeeds, multiply your check result by the DC. If the result × the DC equals the price of the item in sp, then you have completed the item. (If the result × the DC equals double or triple the price of the item in silver pieces, then you’ve completed the task in one-half or one-third of the time. Other multiples of the DC reduce the time in the same manner.) If the result × the DC doesn’t equal the price, then it represents the progress you’ve made this week. Record the result and make a new Craft check for the next week. Each week, you make more progress until your total reaches the price of the item in silver pieces.\\n\\nIf you fail a check by 4 or less, you make no progress this week (or day, see below). If you miss by 5 or more, you ruin half the raw materials and have to pay half the original raw material cost again.\\n\\nTools: All crafts require artisan’s tools to give the best chance of success. If improvised tools are used, the check is made with a –2 penalty. On the other hand, masterwork artisan’s tools provide a +2 circumstance bonus on the check.\\n\\nFabricate Spell: In some cases, the fabricate spell can be used to achieve the results of a Craft check with no actual check involved. You must still make an appropriate Craft check when using the spell to make articles requiring a high degree of craftsmanship.\\n\\nIronwood Spell: A successful Craft check related to woodworking in conjunction with the casting of the ironwood spell enables you to make wooden items that have the strength of steel.\\n\\nMinor Creation: When casting the spell minor creation, you must succeed on an appropriate Craft check to make a complex item.\\n\\nProgress by the Day: You can make checks by the day instead of by the week. In this case your progress (check result × DC) should be divided by the number of days in a week.\\n\\nCreate Masterwork Items: You can make a masterwork item: a weapon, suit of armor, shield, or tool that conveys a bonus on its use through its exceptional craftsmanship. To create a masterwork item, you create the masterwork component as if it were a separate item in addition to the standard item. The masterwork component has its own price (300 gp for a weapon or 150 gp for a suit of armor or a shield, see Chapter 6 for the price of other masterwork tools) and a Craft DC of 20. Once both the standard component and the masterwork component are completed, the masterwork item is finished. The cost you pay for the masterwork component is one-third of the given amount, just as it is for the cost in raw materials.\\n\\nRepair Items: You can repair an item by making checks against the same DC that it took to make the item in the first place. The cost of repairing an item is one-fifth of the item’s price.\\n\\n*You must be trained in the listed skill to attempt this task.\\n\\n<table>\\n  <tr>\\n    <th>Item/Task</th>\\n    <th>Craft Skill</th>\\n    <th>Craft DC</th>\\n  </tr>\\n  <tr>\\n    <td>Craft Acid</td>\\n    <td>Alchemy</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Determine the Items an Alchemist Makes with Substances from Their Lab*</td>\\n    <td>Alchemy</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Alchemist's Fire, Smokestick, or Tindertwig</td>\\n    <td>Alchemy</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Antitoxin, Sunrod, Tanglefoot Bag, or Thunderstone</td>\\n    <td>Alchemy</td>\\n    <td>25</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Armor or Shield</td>\\n    <td>Armor</td>\\n    <td>10 + AC Bonus</td>\\n  </tr>\\n  <tr>\\n    <td>Etch Metal Armor Plates with Decorative Designs</td>\\n    <td>Armor or Paintings</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Suit of Masterwork Armor on Sight</td>\\n    <td>Armor</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Determine What Type of Environment a Basket's Material Came From</td>\\n    <td>Baskets</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Determine the Specific Region a Basket's Material Came From</td>\\n    <td>Baskets</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Smelt Ore and Refine the Metal</td>\\n    <td>Blacksmithing</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Create Armor Spikes or Shield Spikes Without Craft (Armor)*</td>\\n    <td>Blacksmithing</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Determine a Book's Approxiamte Age</td>\\n    <td>Books</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Composite Bow on Site</td>\\n    <td>Bows</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Longbow, Shortbow, or Arrows</td>\\n    <td>Bows</td>\\n    <td>12</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Composite Longbow or Composite Shortbow</td>\\n    <td>Bows</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Masterwork Bow on Sight</td>\\n    <td>Bows</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Composite Longbow or Composite Shortbow With High Strength Rating</td>\\n    <td>Bows</td>\\n    <td>15 + (2 x Rating)</td>\\n  </tr>\\n  <tr>\\n    <td>Determine a Writer's Experience Level and Handedness*</td>\\n    <td>Calligraphy</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Write an Invitation That Matches Appropriate Social Conventions</td>\\n    <td>Calligraphy</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Make a Makeshift Barrel or Crate</td>\\n    <td>Carpentry</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Create a Rudiementary Raft from Found Materials</td>\\n    <td>Carpentry or Ships</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Carve Fine Woodworking</td>\\n    <td>Carpentry or Sculptures</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Wooden Armor or a Wooden Shield Without Craft (Armor)</td>\\n    <td>Carpentry</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Correctly Dye a Garment or Bolt of Cloth</td>\\n    <td>Cloth</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Mend a Sail</td>\\n    <td>Cloth, Clothin, or Ships</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Tailor a Garment to Another Size or Body Shape</td>\\n    <td>Clothing</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Create Temporary Cold-Weather Gear (Grants a +2 Bonus)</td>\\n    <td>Clothing</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Create Padded Armor Without Craft (Armor)</td>\\n    <td>Clothing</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Craft One-Handed Firearm or Two-Handed Firearm</td>\\n    <td>Firearms</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Seige Firearm, Heavy</td>\\n    <td>Firearms</td>\\n    <td>30</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Seige Firearm, Light</td>\\n    <td>Firearms</td>\\n    <td>35</td>\\n  </tr>\\n  <tr>\\n    <td>Locate or Identify Naturally Formed Glass</td>\\n    <td>Glass</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Identify the Work of Famous Jewelers</td>\\n    <td>Jewelry</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Create a Fake Gemstone*</td>\\n    <td>Jewelry</td>\\n    <td>Opposed</td>\\n  </tr>\\n  <tr>\\n    <td>Identify the Sort of Creature From Which a Piece of Leather Came*</td>\\n    <td>Leather</td>\\n    <td>10+</td>\\n  </tr>\\n  <tr>\\n    <td>Skin an Animal and Tan the Hide</td>\\n    <td>Leather</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Create a High-Quality Item From the Hide of a Non-Standard Creature*</td>\\n    <td>Leather</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Create Leather, Studded Leather, or Hide Armor Without Craft (Armor)</td>\\n    <td>Leather</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Aid Another on a Skill Check to Open a Lock*</td>\\n    <td>Locks</td>\\n    <td>5</td>\\n  </tr>\\n  <tr>\\n    <td>Tune a Musical Instrument</td>\\n    <td>Musical Instruments</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Create Paint or Other Pigments from Scratch</td>\\n    <td>Paintings</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Re-create Someone's Likeness from Memory</td>\\n    <td>Paintings</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Re-create Someone's Likeness from an Eyewitness Account</td>\\n    <td>Paintings</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Create a Temporary or Makeshift Kiln</td>\\n    <td>Pottery</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Make a Mold of an Object or Part of a Body</td>\\n    <td>Sculptures</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Ranged Seige Engine, Heavy</td>\\n    <td>Seige Engines</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Ranged Seige Engine, Medium</td>\\n    <td>Seige Engines</td>\\n    <td>25</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Ranged Seige Engine, Light</td>\\n    <td>Seige Engines</td>\\n    <td>30</td>\\n  </tr>\\n  <tr>\\n    <td>Alter Shoes to a Different Size or Foot Shape*</td>\\n    <td>Shoes</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Recognize a Famous Ship and Where it Likely Came From</td>\\n    <td>Ships</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Whether a Stone Wall is Entirely Stone or a Veneer</td>\\n    <td>Stonemasonry</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Create a Temporary Stone Support or Small Rampart with Found Supplies</td>\\n    <td>Stonemasonry</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Mechanical Traps</td>\\n    <td>Traps</td>\\n    <td>Varies</td>\\n  </tr>\\n  <tr>\\n    <td>Determine the Age of a Mechanical Trap</td>\\n    <td>Traps</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Masterwork Weapon on Sight</td>\\n    <td>Weapons</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Crossbow or Bolts</td>\\n    <td>Weapons</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Simple Melee or Thrown Weapon</td>\\n    <td>Weapons</td>\\n    <td>12</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Martial Melee or Thrown Weapon</td>\\n    <td>Weapons</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Exotic Melee or Thrown Weapon</td>\\n    <td>Weapons</td>\\n    <td>18</td>\\n  </tr>\\n  <tr>\\n    <td>Very Simple Item (Wooden Spoon)</td>\\n    <td>Varies</td>\\n    <td>5</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Typical Item (Iron Pot)</td>\\n    <td>Varies</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Famous Maker's Mark</td>\\n    <td>Varies</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Craft High-Quality Item (Bell)</td>\\n    <td>Varies</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Detemine What Culture (e.g. Elves, Frost Giants) Made an Item</td>\\n    <td>Varies</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Craft Complex or Superior Item (Lock)</td>\\n    <td>Varies</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Identify an Obscure Maker's Mark*</td>\\n    <td>Varies</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Determine the Hardness and Hit Points of an Item*</td>\\n    <td>Varies</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Identify the Creator of an Item with No Mark*</td>\\n    <td>Varies</td>\\n    <td>30</td>\\n  </tr>\\n</table>\\n\\nThe table below lists which craft skills to use for certain prominent items and adventuring tools. This list omits obvious items - outfits are made with Craft (clothing), keelboats with Craft (ships),  and so on. More specific skills can also be used instead of the listed skill, such as using Craft (tattoos) instead of Craft (paintings) for a tattoo.\\n\\n<table>\\n  <tr>\\n    <th>Item</th>\\n    <th>Craft Skill</th>\\n  </tr>\\n  <tr>\\n    <td>Alchemist's Lab</td>\\n    <td>Alchemy</td>\\n  </tr>\\n  <tr>\\n    <td>Artisan's Tools</td>\\n    <td>Blacksmithing or Carpentry</td>\\n  </tr>\\n  <tr>\\n    <td>Backpack</td>\\n    <td>Clothing or Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Barding</td>\\n    <td>Armor</td>\\n  </tr>\\n  <tr>\\n    <td>Bedroll</td>\\n    <td>Cloth or Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Caltrops</td>\\n    <td>Weapons</td>\\n  </tr>\\n  <tr>\\n    <td>Cart or Carriage</td>\\n    <td>Carpentry</td>\\n  </tr>\\n  <tr>\\n    <td>Chain</td>\\n    <td>Blacksmithing or Traps</td>\\n  </tr>\\n  <tr>\\n    <td>Chest</td>\\n    <td>Carpentry or Locks</td>\\n  </tr>\\n  <tr>\\n    <td>Climber's Kit</td>\\n    <td>Blacksmithing</td>\\n  </tr>\\n  <tr>\\n    <td>Disguise Kit</td>\\n    <td>Alchemy or Paintings</td>\\n  </tr>\\n  <tr>\\n    <td>Flint and Steel</td>\\n    <td>Blacksmithing or Stonemasonry</td>\\n  </tr>\\n  <tr>\\n    <td>Grappling Hook</td>\\n    <td>Blacksmithing or Weapons</td>\\n  </tr>\\n  <tr>\\n    <td>Gunslinger's Kit</td>\\n    <td>Alchemy or Blacksmithing</td>\\n  </tr>\\n  <tr>\\n    <td>Harrow Deck</td>\\n    <td>Paintings</td>\\n  </tr>\\n  <tr>\\n    <td>Healer's Kit</td>\\n    <td>Alchemy or Cloth</td>\\n  </tr>\\n  <tr>\\n    <td>Hemp Rope</td>\\n    <td>Baskets or Cloth</td>\\n  </tr>\\n  <tr>\\n    <td>Lamp</td>\\n    <td>Blacksmithing or Glass</td>\\n  </tr>\\n  <tr>\\n    <td>Manacles<td>\\n    <td>Blacksmithing or Locks</td>\\n  </tr>\\n  <tr>\\n    <td>Masterwork Tool</td>\\n    <td>Blacksmithing</td>\\n  </tr>\\n  <tr>\\n    <td>Musical Instrument</td>\\n    <td>Musical Instruments</td>\\n  </tr>\\n  <tr>\\n    <td>Saddle</td>\\n    <td>Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Scroll Case</td>\\n    <td>Carpentry or Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Signet Ring</td>\\n    <td>Jewelry</td>\\n  </tr>\\n  <tr>\\n    <td>Silk Rope</td>\\n    <td>Cloth</td>\\n  </tr>\\n  <tr>\\n    <td>Silver Holy Symbol</td>\\n    <td>Blacksmithing or Sculptures</td>\\n  </tr>\\n  <tr>\\n    <td>Skeleton Key</td>\\n    <td>Locks</td>\\n  </tr>\\n  <tr>\\n    <td>Spell Component Pouch/td>\\n    <td>Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Spyglass</td>\\n    <td>Glass</td>\\n  </tr>\\n  <tr>\\n    <td>Tattoo</td>\\n    <td>Paintings</td>\\n  </tr>\\n  <tr>\\n    <td>Tent</td>\\n    <td>Cloth or Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Thieves' Tools</td>\\n    <td>Blacksmithing or Locks</td>\\n  </tr>\\n  <tr>\\n    <td>Waterskin</td>\\n    <td>Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Wood Holy Symbol</td>\\n    <td>Carpentry or Sculptures</td>\\n  </tr>\\n</table>\\n\\nThe following table indicates which Craft skills are typically used to create common worn items. While the normal system for creating magic items doesn't incorporate Craft skills, such skills could reasonably be used while creating a magic item to make it appear especially ornate.\\n\\n<table>\\n  <tr>\\n    <th>Worn Item</th>\\n    <th>Craft Skill</th>\\n  </tr>\\n  <tr>\\n    <td>Amulet</td>\\n    <td>Jewelry</td>\\n  </tr>\\n  <tr>\\n    <td>Belt</td>\\n    <td>Leather or Clothing</td>\\n  </tr>\\n  <tr>\\n    <td>Bracelet</td>\\n    <td>Blacksmithing or Jewelry</td>\\n  </tr>\\n  <tr>\\n    <td>Bracer</td>\\n    <td>Armor or Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Brooch</td>\\n    <td>Jewelry</td>\\n  </tr>\\n  <tr>\\n    <td>Cape or Cloak</td>\\n    <td>Cloth or Clothing</td>\\n  </tr>\\n  <tr>\\n    <td>Circlet</td>\\n    <td>Blacksmithing or Jewelry</td>\\n  </tr>\\n  <tr>\\n    <td>Crown</td>\\n    <td>Blacksmithing or Jewelry</td>\\n  </tr>\\n  <tr>\\n    <td>Gauntlet</td>\\n    <td>Armor</td>\\n  </tr>\\n  <tr>\\n    <td>Girdle</td>\\n    <td>Clothing or Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Glasses or Goggles</td>\\n    <td>Glass</td>\\n  </tr>\\n  <tr>\\n    <td>Glove</td>\\n    <td>Clothing or Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Hat</td>\\n    <td>Clothing or Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Headband</td>\\n    <td>Cloth or Clothing</td>\\n  </tr>\\n  <tr>\\n    <td>Helm</td>\\n    <td>Armor</td>\\n  </tr>\\n  <tr>\\n    <td>Mask</td>\\n    <td>Clothing or Leather</td>\\n  </tr>\\n  <tr>\\n    <td>Necklace</td>\\n    <td>Blacksmithing or Jewelry</td>\\n  </tr>\\n  <tr>\\n    <td>Periapt</td>\\n    <td>Jewelry</td>\\n  </tr>\\n  <tr>\\n    <td>Phylactery</td>\\n    <td>Leather or Carpentry</td>\\n  </tr>\\n  <tr>\\n    <td>Ring</td>\\n    <td>Jewelry</td>\\n  </tr>\\n  <tr>\\n    <td>Robe</td>\\n    <td>Clothing</td>\\n  </tr>\\n  <tr>\\n    <td>Vestments</td>\\n    <td>Clothing</td>\\n  </tr>\\n</table>\",\r\n// id: 5,\r\n// untrained: true,\r\n// customizable: true,\r\n// knowledge: false,\r\n// blurb: \"You are skilled in the creation of a specific group of items, such as armor or weapons. Like Knowledge, Perform, and Profession, Craft is actually a number of separate skills. You could have several Craft skills, each with its own ranks. The most common Craft skills are alchemy, armor, baskets, books, bows, calligraphy, carpentry, cloth, clothing, glass, jewelry, leather, locks, paintings, pottery, sculptures, ships, shoes, stonemasonry, traps, and weapons.\\n\\nA Craft skill is specifically focused on creating something. If nothing is created by the endeavor, it probably falls under the heading of a Profession skill.\",\r\n// action: \"Does not apply. Craft checks are made by the day or week (see above).\",\r\n// try_again: \"Yes, but each time you fail by 5 or more, you ruin half the raw materials and have to pay half the original raw material cost again.\",\r\n// special: \"You may voluntarily add +10 to the indicated DC to craft an item. This allows you to create the item more quickly (since you’ll be multiplying this higher DC by your Craft check result to determine progress). You must decide whether to increase the DC before you make each weekly or daily check.\\n\\nTo make an item using Craft (alchemy), you must have alchemical equipment. If you are working in a city, you can buy what you need as part of the raw materials cost to make the item, but alchemical equipment is difficult or impossible to come by in some places. Purchasing and maintaining an alchemist’s lab grants a +2 circumstance bonus on Craft (alchemy) checks because you have the perfect tools for the job, but it does not affect the cost of any items made using the skill.\\n\\nThose who wish to construct or repair technological items use Craft (mechanical) in conjunction with technological item crafting feats. Without the Technologist feat, Craft (mechanical) can still be used to craft less advanced forms of technology such as gears, hinges, and pulleys. NPCs with the means of crafting technological items are extremely rare, and it is not assumed that PCs have access to such resources. GMs are encouraged to discuss such considerations with their players before allowing technological crafting into the game.\",\r\n// skill_unlock_5: \"When determining your weekly progress, double the result of your Craft check before multiplying the result by the item’s DC.\",\r\n// skill_unlock_10: \"You do not ruin any of your raw materials unless you fail a check by 10 or more.\",\r\n// skill_unlock_15: \"When you determine your progress, the result of your check is how much work you complete each day in silver pieces.\",\r\n// skill_unlock_20: \"You can craft magic armor, magic weapons, magic rings, and wondrous items that fall under your category of Craft using the normal Craft rules.\"\r\n// },\r\n// {\r\n// name: \"Diplomacy\",\r\n// ability_score: \"Charisma\",\r\n// description: \"You can change the initial attitudes of nonplayer characters with a successful check. The DC of this check depends on the creature’s starting attitude toward you, adjusted by its Charisma modifier. If you succeed, the character’s attitude toward you is improved by one step. For every 5 by which your check result exceeds the DC, the character’s attitude toward you increases by one additional step. A creature’s attitude cannot be shifted more than two steps up in this way, although the GM can override this rule in some situations. If you fail the check by 4 or less, the character’s attitude toward you is unchanged. If you fail by 5 or more, the character’s attitude toward you is decreased by one step.\\n\\nYou cannot use Diplomacy against a creature that does not understand you or has an Intelligence of 3 or less. Diplomacy is generally ineffective in combat and against creatures that intend to harm you or your allies in the immediate future. Any attitude shift caused through Diplomacy generally lasts for 1d4 hours but can last much longer or shorter depending upon the situation (GM discretion).\\n\\n<table>\\n  <tr>\\n    <th>Starting Attitude</th>\\n    <th>Diplomacy DC</th>\\n  </tr>\\n  <tr>\\n    <td>Hostile</td>\\n    <td>25 + Creature's Cha Modifier</td>\\n  </tr>\\n  <tr>\\n    <td>Unfriendly</td>\\n    <td>20 + Creature's Cha Modifier</td>\\n  </tr>\\n  <tr>\\n    <td>Indifferent</td>\\n    <td>15 + Creature's Cha Modifier</td>\\n  </tr>\\n  <tr>\\n    <td>Friendly</td>\\n    <td>10 + Creature's Cha Modifier</td>\\n  </tr>\\n  <tr>\\n    <td>Helpful</td>\\n    <td>0 + Creature's Cha Modifier</td>\\n  </tr>\\n</table>\\n\\nIf a creature’s attitude toward you is at least indifferent, you can make requests of the creature. This is an additional Diplomacy check, using the creature’s current attitude to determine the base DC, with one of the following modifiers. Once a creature’s attitude has shifted to helpful, the creature gives in to most requests without a check, unless the request is against its nature or puts it in serious peril. Some requests automatically fail if the request goes against the creature’s values or its nature, subject to GM discretion.\\n\\n<table>\\n  <tr>\\n    <th>Request</th>\\n    <th>Diplomacy DC Modifier</th>\\n  </tr>\\n  <tr>\\n    <td>Give Simple Advice or Directions</td>\\n    <td>-5</td>\\n  </tr>\\n  <tr>\\n    <td>Give Detailed Advice</td>\\n    <td>+0</td>\\n  </tr>\\n  <tr>\\n    <td>Give Simple Aid</td>\\n    <td>+0</td>\\n  </tr>\\n  <tr>\\n    <td>Reveal an Unimportant Secret</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Give Lengthy or Complicated Aid</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Give Dangerous Aid</td>\\n    <td>+10</td>\\n  </tr>\\n  <tr>\\n    <td>Reveal an Important Secret</td>\\n    <td>+10 or More</td>\\n  </tr>\\n  <tr>\\n    <td>Give Aid That Could Result in Punishment</td>\\n    <td>+15 or More</td>\\n  </tr>\\n  <tr>\\n    <td>Additional Requests</td>\\n    <td>+5 per Request</td>\\n  </tr>\\n</table>\\n\\nGather Information: You can also use Diplomacy to gather information about a specific topic or individual. To do this, you must spend at least 1d4 hours canvassing people at local taverns, markets, and gathering places. The DC of this check depends on the obscurity of the information sought, but for most commonly known facts or rumors it is 10. For obscure or secret knowledge, the DC might increase to 20 or higher. The GM might rule that some topics are simply unknown to common folk.\",\r\n// id: 6,\r\n// untrained: true,\r\n// customizable: false,\r\n// knowledge: false,\r\n// blurb: \"You can use this skill to persuade others to agree with your arguments, to resolve differences, and to gather valuable information or rumors from people. This skill is also used to negotiate conflicts by using the proper etiquette and manners suitable to the problem.\",\r\n// action: \"Using Diplomacy to influence a creature’s attitude takes 1 minute of continuous interaction. Making a request of a creature takes 1 or more rounds of interaction, depending upon the complexity of the request. Using Diplomacy to gather information takes 1d4 hours of work searching for rumors and informants.\",\r\n// try_again: \"You cannot use Diplomacy to influence a given creature’s attitude more than once in a 24-hour period. If a request is refused, the result does not change with additional checks, although other requests might be made. You can retry Diplomacy checks made to gather information.\",\r\n// special: \"\",\r\n// skill_unlock_5: \"The time required to influence a creature’s attitude or gather information is halved.\",\r\n// skill_unlock_10: \"You can attempt to adjust a creature’s attitude in 1 round by taking a –10 penalty. If you take 1 minute to adjust a creature’s attitude, add your Charisma bonus to the number of hours that attitude change persists.\",\r\n// skill_unlock_15: \"You can attempt to adjust a creature’s attitude in 1 round with no penalty. If you take 1 minute to adjust a creature’s attitude, the duration of the resulting change is measured in days, not hours. You can gather information in 10 minutes by taking a –5 penalty.\",\r\n// skill_unlock_20: \"You can attempt to adjust a creature’s attitude in 1 round with no penalty. If you take 1 minute to adjust a creature’s attitude, the duration of the resulting change is measured in weeks, not hours. You can gather information in 1d4 minutes with no penalty.\"\r\n// },\r\n// {\r\n// name: \"Disguise\",\r\n// ability_score: \"Charisma\",\r\n// description: \"Your Disguise check result determines how good the disguise is, and it is opposed by others’ Perception check results. If you don’t draw any attention to yourself, others do not get to make Perception checks. If you come to the attention of people who are suspicious (such as a guard who is watching commoners walking through a city gate), it can be assumed that such observers are taking 10 on their Perception checks.\\n\\nYou get only one Disguise check per use of the skill, even if several people make Perception checks against it. The Disguise check is made secretly, so that you can’t be sure how good the result is.\\n\\nThe effectiveness of your disguise depends on how much you’re changing your appearance. Disguise can be used to make yourself appear like a creature that is one size category larger or smaller than your actual size. This does not change your actual size or reach, should you enter combat while wearing such a disguise.\\n\\n*Per step of difference between your actual age category and your disguised age category. The steps are: young (younger than adulthood), adulthood, middle age, old, and venerable.\\n\\n<table>\\n  <tr>\\n    <th>Disguise</th>\\n    <th>Disguise Check Modifier</th>\\n  </tr>\\n  <tr>\\n    <td>Minor Details Only</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Disguised as a Different Gender</td>\\n    <td>-2</td>\\n  </tr>\\n  <tr>\\n    <td>Disguised as a Different Ancestry</td>\\n    <td>-2</td>\\n  </tr>\\n  <tr>\\n    <td>Disguised as a Different Age Category</td>\\n    <td>-2*</td>\\n  </tr>\\n  <tr>\\n    <td>Disguised as a Different Size Category</td>\\n    <td>-10</td>\\n  </tr>\\n</table>\\n\\nIf you are impersonating a particular individual, those who know what that person looks like get a bonus on their Perception checks according to the table below. Furthermore, they are automatically considered to be suspicious of you, so opposed checks are always called for.\\n\\n<table>\\n  <tr>\\n    <th>Familiarity</th>\\n    <th>Viewer's Perception Check Bonus</th>\\n  </tr>\\n  <tr>\\n    <td>Recognizes on Sight</td>\\n    <td>+4</td>\\n  </tr>\\n  <tr>\\n    <td>Friends or Associates</td>\\n    <td>+6</td>\\n  </tr>\\n  <tr>\\n    <td>Close Friends</td>\\n    <td>+8</td>\\n  </tr>\\n  <tr>\\n    <td>Intimate</td>\\n    <td>+10</td>\\n  </tr>\\n</table>\\n\\nAn individual makes a Perception check to see through your disguise immediately upon meeting you and again every hour thereafter. If you casually meet a large number of different creatures, each for a short time, check once per day or hour, using an average Perception modifier for the group.\",\r\n// id: 8,\r\n// untrained: true,\r\n// customizable: false,\r\n// knowledge: false,\r\n// blurb: \"You are skilled at changing your appearance.\",\r\n// action: \"Creating a disguise requires 1d3 × 10 minutes of work. Using magic (such as the disguise self spell) reduces this action to the time required to cast the spell or trigger the effect.\",\r\n// try_again: \"Yes. You may try to redo a failed disguise, but once others know that a disguise was attempted, they’ll be more suspicious.\",\r\n// special: \"Magic that alters your form, such as alter self, disguise self, polymorph, or shapechange, grants you a +10 bonus on Disguise checks (see the individual spell descriptions). Divination magic that allows people to see through illusions (such as true seeing) does not penetrate a mundane disguise, but it can negate the magical component of a magically enhanced one.\\n\\nYou must make a Disguise check when you cast a simulacrum spell to determine how good the likeness is.\",\r\n// skill_unlock_5: \"You can create a disguise in 1d3 minutes.\",\r\n// skill_unlock_10: \"You can create a disguise in 1d3 rounds. If you take the full normal amount of time to create your disguise, you take no penalty for disguising your gender, race, or age category.\",\r\n// skill_unlock_15: \"You can create a disguise as a full-round action.\",\r\n// skill_unlock_20: \"You can create a disguise as a standard action, or as a full-round action combined with a Bluff check to create a diversion to hide.\"\r\n// },\r\n// {\r\n// name: \"Finesse\",\r\n// ability_score: \"Dexterity\",\r\n// description: \"<underline>Disable Device</underline> You are skilled at disarming traps and opening locks. In addition, this skill lets you sabotage simple mechanical devices, such as catapults, wagon wheels, and doors. Your training allows you to pick pockets, draw hidden weapons, and take a variety of actions without being noticed.\\n\\nWhen disarming a trap or other device, the Disable Device check is made secretly, so that you don’t necessarily know whether you’ve succeeded.\\n\\nThe DC depends on how tricky the device is. If the check succeeds, you disable the device. If it fails by 4 or less, you have failed but can try again. If you fail by 5 or more, something goes wrong. If the device is a trap, you trigger it. If you’re attempting some sort of sabotage, you think the device is disabled, but it still works normally.\\n\\nYou also can rig simple devices such as saddles or wagon wheels to work normally for a while and then fail or fall off some time later (usually after 1d4 rounds or minutes of use).\\n\\n*If you attempt to leave behind no trace of your tampering, add 5 to the DC.\\n\\n<table>\\n  <tr>\\n    <th>Device</th>\\n    <th>Time</th>\\n    <th>Disable Device DC*</th>\\n    <th>Example</th>\\n  </tr>\\n  <tr>\\n    <td>Simple</td>\\n    <td>1 Round</td>\\n    <td>10</td>\\n    <td>Jam a Lock</td>\\n  </tr>\\n  <tr>\\n    <td>Tricky</td>\\n    <td>1d4 Rounds</td>\\n    <td>15</td>\\n    <td>Sabotage a Wagon Wheel</td>\\n  </tr>\\n  <tr>\\n    <td>Difficult</td>\\n    <td>2d4 Rounds</td>\\n    <td>20</td>\\n    <td>Disarm a Trap, Reset a Trap</td>\\n  </tr>\\n  <tr>\\n    <td>Extreme</td>\\n    <td>2d4 Rounds</td>\\n    <td>25</td>\\n    <td>Disarm a Complex Trap, Cleverly Sabotage a Clockwork Device</td>\\n  </tr>\\n</table>\\n\\nOpen Locks: The DC for opening a lock depends on its quality. If you do not have a set of thieves’ tools, these DCs increase by 10.\\n\\n<table>\\n  <tr>\\n    <th>Lock Quality</th>\\n    <th>Disable Device DC</th>\\n  </tr>\\n  <tr>\\n    <td>Simple</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Average</td>\\n    <td>25</td>\\n  </tr>\\n  <tr>\\n    <td>Good</td>\\n    <td>30</td>\\n  </tr>\\n  <tr>\\n    <td>Superior</td>\\n    <td>40</td>\\n  </tr>\\n</table>\\n\\n<underline>Sleight of Hand</underline> Your training allows you to pick pockets, draw hidden weapons, and take a variety of actions without being noticed.\\n\\nA DC 10 Sleight of Hand check lets you palm a coin-sized, unattended object. Performing a minor feat of legerdemain, such as making a coin disappear, also has a DC of 10 unless an observer is determined to note where the item went.\\n\\nWhen you use this skill under close observation, your skill check is opposed by the observer’s Perception check. The observer’s success doesn’t prevent you from performing the action, just from doing it unnoticed.\\n\\nYou can hide a small object (including a light weapon or an easily concealed ranged weapon, such as a dart, sling, or hand crossbow) on your body. Your Sleight of Hand check is opposed by the Perception check of anyone observing you or of anyone frisking you. In the latter case, the searcher gains a +4 bonus on the Perception check, since it’s generally easier to find such an object than to hide it. A dagger is easier to hide than most light weapons, and grants you a +2 bonus on your Sleight of Hand check to conceal it. An extraordinarily small object, such as a coin, shuriken, or ring, grants you a +4 bonus on your Sleight of Hand check to conceal it, and heavy or baggy clothing (such as a cloak) grants you a +2 bonus on the check.\\n\\nDrawing a hidden weapon is a standard action and doesn’t provoke an attack of opportunity.\\n\\nIf you try to take something from a creature, you must make a DC 20 Sleight of Hand check. The opponent makes a Perception check to detect the attempt, opposed by the Sleight of Hand check result you achieved when you tried to grab the item. An opponent who succeeds on this check no- tices the attempt, regardless of whether you got the item. You cannot use this skill to take an object from another creature during combat if the creature is aware of your presence.\\n\\nYou can also use Sleight of Hand to entertain an audience as though you were using the Perform skill. In such a case, your “act” encompasses elements of legerdemain, juggling, and the like.\\n\\n<table>\\n  <tr>\\n    <th>Task</th>\\n    <th>Sleight of Hand DC</th>\\n  </tr>\\n  <tr>\\n    <td>Palm a Coin-Sized Object, Make a Coin Disappear</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Lift a Small Object from a Person</td>\\n    <td>20</td>\\n  </tr>\\n</table>\",\r\n// id: 37,\r\n// untrained: true,\r\n// customizable: false,\r\n// knowledge: false,\r\n// blurb: \"This skill is from the Pathfinder Unchained material, and represent a combination of the skills Disable Device and Sleight of Hand. The text below outlines a consolidation of those skills' features with minimal edits.\",\r\n// action: \"<underline>Disable Device</underline>: The amount of time needed to make a Disable Device check depends on the task, as noted above. Disabling a simple device takes 1 round and is a full-round action. An intricate or complex device requires 1d4 or 2d4 rounds. Attempting to open a lock is a full-round action.\\n\\n<underline>Sleight of Hand</underline>: Any Sleight of Hand check is normally a standard action. However, you may perform a Sleight of Hand check as a move action by taking a –20 penalty on the check.\",\r\n// try_again: \"<underline>Disable Device</underline>: Varies. You can retry checks made to disable traps if you miss the check by 4 or less. You can retry checks made to open locks.\\n\\n<underline>Sleight of Hand</underline>: Yes, but after an initial failure, a second Sleight of Hand attempt against the same target (or while you are being watched by the same observer who noticed your previous attempt) increases the DC for the task by 10.\",\r\n// special: \"<underline>Disable Device</underline>: A rogue who beats a trap’s DC by 10 or more can study the trap, figure out how it works, and bypass it without disarming it. A rogue can rig a trap so her allies can bypass it as well.\\n\\nCharacters with the trapfinding ability (like rogues) can disarm magic traps. A magic trap generally has a DC of 25 + the level of the spell used to create it.\\n\\nThe spells fire trap, glyph of warding, symbol, and teleportation circle also create traps that a rogue can disarm with a successful Disable Device check. Spike growth and spike stones, however, create magic hazards against which Disable Device checks do not succeed. See the individual spell descriptions for details.\\n\\n<underline>Sleight of Hand</underline>: An untrained Sleight of Hand check is simply a Dexterity check. Without actual training, you can’t succeed on any Sleight of Hand check with a DC higher than 10, except for hiding an object on your body.\",\r\n// skill_unlock_5: \"\",\r\n// skill_unlock_10: \"\",\r\n// skill_unlock_15: \"\",\r\n// skill_unlock_20: \"\"\r\n// },\r\n// {\r\n// name: \"Handle Animal\",\r\n// ability_score: \"Charisma\",\r\n// description: \"The DC depends on what you are trying to do.\\n\\n<table>\\n  <tr>\\n    <th>Task</th>\\n    <th>Handle Animal DC</th>\\n  </tr>\\n  <tr>\\n    <td>Handle an Animal</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>'Push' an Animal</td>\\n    <td>25</td>\\n  </tr>\\n  <tr>\\n    <td>Teach an Animal a Trick</td>\\n    <td>15 - 20</td>\\n  </tr>\\n  <tr>\\n    <td>Train an Animal for General Purpose</td>\\n    <td>15 - 20</td>\\n  </tr>\\n  <tr>\\n    <td>Rear a Wild Animal</td>\\n    <td>15 + HD of Animal</td>\\n  </tr>\\n</table>\\n\\nHandle an Animal: This task involves commanding an animal to perform a task or trick that it knows. If the animal is wounded or has taken any nonlethal damage or ability score damage, the DC increases by 2. If your check succeeds, the animal performs the task or trick on its next action.\\n\\nPush an Animal: To push an animal means to get it to perform a task or trick that it doesn’t know but is physically capable of performing. This category also covers making an animal perform a forced march or forcing it to hustle for more than 1 hour between sleep cycles. If the animal is wounded or has taken any nonlethal damage or ability score damage, the DC increases by 2. If your check succeeds, the animal performs the task or trick on its next action.\\n\\nTeach an Animal a Trick: You can teach an animal a specific trick with one week of work and a successful Handle Animal check against the indicated DC. An animal with an Intelligence score of 1 can learn a maximum of three tricks, while an animal with an Intelligence score of 2 can learn a maximum of six tricks.The following tricks can be taught to animals by training the animal for a week and making a successful Handle Animal skill check against the listed DC.\\n\\nAid (DC 20): The animal can use the aid another action to aid a specific ally in combat by attacking a specific foe the ally is fighting. You point to a particular creature that you wish the animal to aid, and you point to another that you want it to make an attack roll against, and it will comply if able. The normal creature type restrictions governing the attack trick still apply.\\n\\nAttack (DC 20) The animal attacks apparent enemies. You may point to a particular creature that you wish the animal to attack, and it will comply if able. Normally, an animal will attack only humanoids, monstrous humanoids, giants, or other animals. Teaching an animal to attack all creatures (including such unnatural creatures as undead and aberrations) counts as two tricks.\\n\\nBombard (DC 20): A flying animal can deliver projectiles on command, attempting to drop a specified item that it can carry (often alchemist’s fire or a similar splash weapon) on a designated point or opponent, using its base attack bonus to determine its attack roll. The animal cannot throw the object, and it must be able to fly directly over the target.\\n\\nBreak Out (DC 20): On command, the animal attempts to break or gnaw through bars or bindings restricting it, its handler, or a person indicated by the handler. If the animal cannot break the restraints by itself, its attempts grant the restricted creature a +4 circumstance bonus on Escape Artist checks. Furthermore, the animal can take certain basic actions such as lifting a latch or bringing its master an unattended key. Weight and Strength restrictions still apply, and pickpocketing a key or picking any sort of lock is still far beyond the animal‘s ability.\\n\\nBuild Simple Structure (DC 25): The companion can build simple structures on command, limited by its natural abilities and inclinations. The companion is able to build only structures that creatures of its type would naturally build on their own, and this trick merely allows the handler to direct the companion on when and where to build such structures. For example, a spider could be commanded to spin a web between two trees, but it could not be made to create a hammock or a tent out of silk. Similarly, a beaver could be ordered to make a dam or lodge, an alligator a dome-shaped nest, and any burrowing creature a small tunnel or hole. In general, this process takes 10 minutes for each 5-foot square the structure occupies, but depending on the terrain and the type of structure, it might take as little as 1 minute or as much as 1 hour or more, at the GM’s discretion. Only companions that naturally build structures can learn this trick.\\n\\nBury (DC 15): an animal with this trick can be instructed to bury an object in its possession. The animal normally seeks a secluded place to bury its object. an animal that knows both the bury and fetch tricks can be instructed to fetch an item it has buried.\\n\\nCocoon (DC 15): The companion can cocoon an object or a helpless or willing Huge or smaller creature in webbing. The amount of time this takes depends on the size of the creature or object to be cocooned, as outlined on the following table. The cocoon has hardness 2 and 10 hit points. A creature trapped within the cocoon is effectively pinned, and it can attempt an Escape Artist check or combat maneuver check as a full-round action to escape (DC = 20 + the companion’s CMD). Alternatively, a DC 25 Strength check can break the cocoon. The companion must know the spin silk trick before it can learn this trick.\\n\\n<table>\\n  <tr>\\n    <th>Target Size</th>\\n    <th>Time to Cocoon</th>\\n  </tr>\\n  <tr>\\n    <td>Tiny or Smaller</td>\\n    <td>1 Minute</td>\\n  </tr>\\n  <tr>\\n    <td>Small or Medium</td>\\n    <td>10 Minutes</td>\\n  </tr>\\n  <tr>\\n    <td>Large</td>\\n    <td>1 Hour</td>\\n  </tr>\\n  <tr>\\n    <td>Huge</td>\\n    <td>4 Hours</td>\\n  </tr>\\n</table>\\n\\nCome (DC 15) The animal comes to you, even if it normally would not do so.\\n\\nDefend (DC 20) The animal defends you (or is ready to defend you if no threat is present), even without any command being given. Alternatively, you can command the animal to defend a specific other character.\\n\\nDeliver (DC 15): The animal takes an object (one you or an ally gives it, or one that it recovers with the fetch trick) to a place or person you indicate. If you indicate a place, the animal drops the item and returns to you. If you indicate a person, the animal stays adjacent to the person until the item is taken. (Retrieving an item from an animal using the deliver trick is a move action.)\\n\\nDemolish (DC 15): The companion can be commanded to attack and damage objects and structures. A companion must know the attack trick before it can be taught the demolish trick, and the companion must be trained to attack creatures of all types. The companion’s handler can direct it either to make natural attacks against the object in question or to make a Strength check to attempt to break it (if applicable).\\n\\nDetect (DC 25): The animal is trained to seek out the smells of air currents, alchemical items and poisons, unusual noises or echoes, and other common elements that signify the presence of potential dangers or secret passages. When commanded, the animal uses its Perception skill to try to pinpoint the source of anything that strikes it as out of the ordinary about a room or location. Note that because the animal is not intelligent, any number of doors, scents, strange mechanisms, or unfamiliar objects might catch the animal’s attention, and it cannot attempt the same Perception check more than once in this way.\\n\\nDown (DC 15) The animal breaks off from combat or otherwise backs down. An animal that doesn’t know this trick continues to fight until it must flee (due to injury, a fear effect, or the like) or its opponent is defeated.\\n\\nEntertain (DC 25): The animal can dance, sing, or perform some other impressive and enjoyable trick to entertain those around it. At the command of its owner, the animal can attempt a Perform check (or a Charisma check if it has no ranks in Perform) to show off its talent. Willing onlookers or those who fail an opposed Sense Motive check take a –2 penalty on Perception checks to notice anything but the animal entertaining them. Once an onlooker observes an animal’s entertain trick, that creature cannot be distracted in this way by the same animal for 24 hours. Tricksters and con artists often teach their animals to perform this trick while they pickpocket viewers or sneak about unnoticed.\\n\\nExclusive (DC 20): The animal takes directions only from the handler who taught it this trick. If an animal has both the exclusive and serve tricks, it takes directions only from the handler that taught it the exclusive trick and those creatures indicated by the trainer’s serve command. An animal with the exclusive trick does not take trick commands from others even if it is friendly or helpful toward them (such as through the result of a charm animal spell), though this does not prevent it from being controlled by other enchantment spells (such as dominate animal), and the animal still otherwise acts as a friendly or helpful creature when applicable.\\n\\nFeint (DC 20): The companion is trained to feint against opponents. A companion must know the attack trick before it can be taught the feint trick, and it performs feints only against targets it would normally attack.\\n\\nFetch (DC 15): The animal goes and gets something. If you do not point out a specific item, the animal fetches a random object.\\n\\nFlank (DC 20): You can instruct an animal to attack a foe you point to and to always attempt to be adjacent to (and threatening) that foe. If you or an ally is also threatening the foe, the animal attempts to flank the foe, if possible. While animals following the attack trick will flank when convenient, this trick instructs them to flank even if doing so denies it a full attack or puts the animal companion at an inconvenience or at risk, such as from attacks of opportunity, dangerous positioning, or difficult terrain. The animal must know the attack trick before it can learn this trick, and it performs it only against foes it would normally attack.\\n\\nFlee (DC 20): The animal attempts to run away or hide as best it can, returning only when its handler commands it to do so. Until such a command is received, the animal does its best to track its handler and any accompanying creatures, remaining hidden but within range of its sight or hearing. This trick is particularly useful for adventurers and thieves in that it allows the animal to evade capture, and then return later to help free its friends.\\n\\nGet Help (DC 20): With this trick, a trainer can designate a number of creatures up to the animal’s Intelligence score as “help.” When the command is given, the animal attempts to find one of those creatures and bring it back to the handler, even if that means journeying a long distance to the last place it encountered the target creature.\\n\\nGuard (DC 20) The animal stays in place and prevents others from approaching.\\n\\nGuide (DC 15): The companion can serve as a guide to a character that is blinded or otherwise unable to see. While serving as a guide, the companion remains adjacent to the guided creature at all times, readying an action each round to move when that creature moves. This allows the guided creature to automatically succeed at Acrobatics checks to move at more than half speed while blinded. Additionally, the companion identifies obstacles in the guided creature’s path and pushes them, pulls them, or otherwise signals to the creature how to avoid them, allowing the guided creature to locate and move around obstacles such as hazards, opponents, and other terrain features as though she were able to see them (though she can’t distinguish between obstacles). Finally, while serving as a guide, the companion indicates to the guided creature the presence and direction of any adjacent allies, allowing the guided creature to pinpoint the locations of such creatures. The companion can serve as a guide only as long as it is able to see in some fashion, and its ability to detect and avoid creatures and obstacles is limited by what it is able to perceive normally.\\n\\nHeel (DC 15) The animal follows you closely, even to places where it normally wouldn’t go.\\n\\nHunt (DC 20): This trick allows an animal to use its natural stalking or foraging instincts to find food and return it to the animal’s handler. an animal with this trick can attempt Survival checks (or Wisdom checks, if the animal has no ranks in Survival) to provide food for others or lead them to water and shelter (as the “get along in the wild” use of the Survival skill). an animal with this trick can use the aid another action to grant a bonus on its handlers Survival checks for these purposes.\\n\\nIntimidate (DC 15): The companion bares its teeth, barks, bristles, growls, or otherwise threatens a creature you designate, or, alternatively, it can be trained to do so when it encounters any creature besides its handler. The companion takes a –4 penalty on Intimidate checks against creatures other than those with the animal or humanoid types unless it has also been trained to attack creatures of any type. A companion that knows this trick automatically uses the aid another action to assist Intimidate checks attempted by its handler, provided that it is within 15 feet of its handler at the time and has not been ordered to perform another task.\\n\\nManeuver (DC 20): The animal is trained to use a specific combat maneuver on command, even when it naturally wouldn’t do so (animals typically use combat maneuvers only when using a monster ability to make a free combat maneuver, since otherwise it would provoke an attack of opportunity). an animal must know the attack trick before it can be taught the maneuver trick, and it performs maneuvers only against targets it would normally attack. This trick can be taught to an animal multiple times. Each time it is taught, the animal can be commanded to use a different combat maneuver.\\n\\nMark Territory (DC 25): Whether by spraying musk, rubbing its back against trees and rocks, or simply howling loudly, the companion lets other nearby animals know that it has claimed an area. By spending 1 hour performing this trick, the companion can mark an area of up to half a square mile in this fashion. If it does so, after 24 hours, whenever there would be a random encounter within that area that involves a wild animal or other creature of Intelligence 2 or less (including vermin but not other mindless creatures, such as oozes and mindless undead), there is a 25% chance that the encounter doesn’t actually occur, as creatures might be warded off by the markings. The companion must renew any territorial markings at least once per week, or they lose their effectiveness. There is also a 10% chance per week that the markings attract the attention of a powerful predator, which actively seeks out the companion to challenge it (and its master) for the territory.\\n\\nMenace (DC 20): A menacing animal attempts to keep a creature you indicate from moving. It does its best to dissuade the target, but it attacks only if the target attempts to move from its present location or take any significant action (particularly a hostile-seeming action). As soon as the target stops moving, the animal ceases attacking but it continues to menace.\\n\\nMilk Venom (DC 20): The companion can be coaxed into providing a single dose of venom on command. This process takes 10 minutes, and it requires a vial or similar container in which to store the poison. A companion that has been specifically trained to be milked of its venom never bites, stings, or otherwise poisons its handler when being milked, although the handler must still succeed at a Handle Animal check to successfully harvest the venom. A companion must have the poison ability to be taught this trick.\\n\\nPerform (DC 15) The animal performs a variety of simple tricks, such as sitting up, rolling over, roaring or barking, and so on.\\n\\nPose as Scenery (DC 20): The companion freezes in place, seeming to be a mundane plant rather than a plant creature. The companion must have taken root in order to use this trick. It attempts a Disguise check with a +8 circumstance bonus, opposed by the Perception checks of observers. If it succeeds at the opposed check, the observer mistakes it for an ordinary, harmless plant. The companion must have the take root trick in order to learn this trick. Only plant companions can learn this trick.\\n\\nReceive Spell (DC 25): The companion has been trained to be the recipient of a specific spell (chosen at the time the animal is taught the trick), allowing it to fully take advantage of the spell’s effects. The spell should be one that grants the companion an ability it might not normally be intelligent enough to make use of or one that it might not even realize it has (such as air walk ). The companion is able to recognize when it has been affected by this spell and can take full advantage of the spell’s effects. At the GM’s discretion, a companion can also be trained to receive certain nonspell effects, such as those granted by an elixir of fire breathing. The companion can be taught this trick multiple times; each time it learns this trick, it becomes trained to utilize a different spell effect.\\n\\nRescue (DC 20): The companion has been trained to drag its handler or another creature that the handler designates out of danger and to a safe place in the event that the handler or creature is incapacitated. If a creature that the companion is defending is rendered helpless or is slain, the companion will carry, drag, or otherwise move that creature out of danger. If the companion knows the get help trick, it will attempt to bring the creature it is rescuing to one of the creatures designated as “help.” Otherwise, you can designate a single location in advance as a safe place, and the companion will attempt to bring the creature it is rescuing to that place. If it is unable to do either of these, the companion simply moves the creature to the nearest location of relative safety. A companion must have the deliver and guard tricks in order to learn this trick.\\n\\nSeek (DC 15) The animal moves into an area and looks around for anything that is obviously alive or animate.\\n\\nServe (DC 15): An animal with this trick willingly takes orders from a creature you designate. If the creature you tell the animal to serve knows what tricks the animal has, it can instruct the animal to perform these tricks using your Handle Animal bonus on the check instead of its own. The animal treats the designated ally as friendly. An animal can unlearn this trick with 1 week of training. This trick can be taught to an animal multiple times. Each time it is taught, the animal can serve an additional creature you designate.\\n\\nSneak (DC 15): The animal can be ordered to make Stealth checks in order to stay hidden and to continue using Stealth even when circumstances or its natural instincts would normally cause it to abandon secrecy.\\n\\nSpeak (DC 25): The companion is able to communicate very simple concepts through barks, gestures, whistles, or similar actions. The companion’s vocabulary is extremely limited, generally restricted to “yes,” “no,” and counting up to three. The companion is also able to recognize and respond to up to two specific questions per point of Intelligence. The companion does not so much understand the words as recognize the sound of them, and it responds accordingly. This trick does not actually increase the companion’s capacity to understand concepts and ideas; it can be taught a way to communicate the concept of “food,” for example, but it won’t distinguish cooked food from raw food, and it might not even recognize as food anything that is not part of its own diet. A companion must have an Intelligence score of 2 or higher to learn this trick.\\n\\nSpin Silk (DC 20): The companion can create strands of delicate yet incredibly strong silk. Harvesting the silk takes 10 minutes, and it can be done once per day. This silk functions identically to a silk rope. The companion can produce a total number of feet of silk equal to 10 times its Constitution score per day, which can be divided as the handler chooses in 10-foot increments. Silk produced in this way degrades into uselessness after 24 hours. Only companions with the web ability can learn this trick.\\n\\nStay (DC 15) The animal stays in place, waiting for you to return. It does not challenge other creatures that come by, though it still defends itself if it needs to.\\n\\nSubdue (DC 15): The companion can attempt to subdue opponents. Once the command is given, the companion makes all its natural attacks as nonlethal attacks (taking the typical –4 penalty on attack rolls when using normally lethal attacks) until ordered to do otherwise.\\n\\nTake Root (DC 15): The companion extends its roots into the soil beneath it, anchoring itself in place and drawing water and nutrients from the soil. Taking root is a full-round action that provokes attacks of opportunity. While rooted, the companion cannot move, but it can otherwise act normally and gains a +4 bonus to CMD to resist bull rush, drag, overrun, reposition, and trip attempts. If the companion remains rooted for at least 1 hour, it absorbs enough water and nutrients to feed itself for a day. A separate command causes the companion to uproot itself as a full-round action. The companion can take root only in areas of soft soil. Only plant companions can learn this trick.\\n\\nTrack (DC 20) The animal tracks the scent presented to it. (This requires the animal to have the scent ability)\\n\\nThrow Rider (DC 15): The animal can attempt to fling a creature riding it to the ground. Treat this as a trip combat maneuver that applies to all creatures riding the animal, and that does not provoke attacks of opportunity. An animal that knows the throw rider and exclusive tricks can be instructed to attempt to automatically throw anyone other than its trainer who attempts to ride it.\\n\\nWatch (DC 15): The animal can be commanded to keep watch over a particular area, such as a campsite, and to raise an alarm if it notices any dangerous or sizable creature entering the area.\\n\\nWithhold Venom (DC 20): The companion can be ordered to avoid injecting poison into creatures it strikes with whatever natural attack would normally deliver venom. As long as the companion has been ordered to withhold its venom, successful hits with that natural attack deal damage as normal and convey all other effects that they normally would, but they do not expose the target to the companion’s poison. Only companions with the poison special ability can learn this trick.\\n\\nWork (DC 15) The animal pulls or pushes a medium or heavy load.\\n\\nRather than teaching an animal individual tricks, you can simply train it for a general purpose. Essentially, an animal’s purpose represents a preselected set of known tricks that fit into a common scheme, such as guarding or heavy labor. The animal must meet all the normal prerequisites for all tricks included in the training package. If the package includes more than three tricks, the animal must have an Intelligence score of 2.\\n\\nAn animal can be trained for only one general purpose, though if the creature is capable of learning additional tricks (above and beyond those included in its general purpose), it may do so. Training an animal for a purpose requires fewer checks than teaching individual tricks does, but no less time.\\n\\nAir Support (DC 20): An animal trained in air support knows the attack, bombard, and deliver tricks.\\n\\nBurglar (DC 25): An animal trained as a burglar knows the come, fetch, maneuver (steal), seek, and sneak tricks. You can order it to steal a specific item you point out.\\n\\nCombat Training (DC 20) An animal trained to bear a rider into combat knows the tricks attack, come, defend, down, guard, and heel. Training an animal for combat riding takes 6 weeks. You may also “upgrade” an animal trained for riding to one trained for combat by spending 3 weeks and making a successful DC 20 Handle Animal check. The new general purpose and tricks completely replace the animal’s previous purpose and any tricks it once knew. Many horses and riding dogs are trained in this way.\\n\\nFighting (DC 20) An animal trained to engage in combat knows the tricks attack, down, and stay. Training an animal for fighting takes three weeks.\\n\\nGuarding (DC 20) An animal trained to guard knows the tricks attack, defend, down, and guard. Training an animal for guarding takes four weeks.\\n\\nHeavy Labor (DC 15) An animal trained for heavy labor knows the tricks come and work. Training an animal for heavy labor takes two weeks.\\n\\nHunting (DC 20) An animal trained for hunting knows the tricks attack, down, fetch, heel, seek, and track. Training an animal for hunting takes six weeks.\\n\\nLiberator (DC 25): An animal trained in liberating knows the break out, flee, and get help tricks.\\n\\nPerformance (DC 15) An animal trained for performance knows the tricks come, fetch, heel, perform, and stay. Training an animal for performance takes five weeks.\\n\\nRiding (DC 15) An animal trained to bear a rider knows the tricks come, heel, and stay. Training an animal for riding takes three weeks.\\n\\nServant (DC 20): An animal trained as a servant knows the deliver, exclusive, and serve tricks.\\n\\nRear a Wild Animal: To rear an animal means to raise a wild creature from infancy so that it becomes domesticated. A handler can rear as many as three creatures of the same kind at once.\\n\\nA successfully domesticated animal can be taught tricks at the same time it’s being raised, or it can be taught as a domesticated animal later.\",\r\n// id: 11,\r\n// untrained: false,\r\n// customizable: false,\r\n// knowledge: false,\r\n// blurb: \"You are trained at working with animals, and can teach • them tricks, get them to follow your simple commands, or\\neven domesticate them.\",\r\n// action: \"Varies. Handling an animal is a move action, while “pushing” an animal is a full-round action. (A druid or ranger can handle an animal companion as a free action or push it as a move action.) For tasks with specific time frames noted above, you must spend half this time (at the rate of 3 hours per day per animal being handled) working toward completion of the task before you attempt the Handle Animal check. If the check fails, your attempt to teach, rear, or train the animal fails and you need not complete the teaching, rearing, or training time. If the check succeeds, you must invest the remainder of the time to complete the teaching, rearing, or training. If the time is interrupted or the task is not followed through to completion, the attempt to teach, rear, or train the animal automatically fails.\",\r\n// try_again: \"Yes, except for rearing an animal.\",\r\n// special: \"You can use this skill on a creature with an Intelligence score of 1 or 2 that is not an animal, but the DC of any such check increases by 5. Such creatures have the same limit on tricks known as animals do.\\n\\nA druid or ranger gains a +4 circumstance bonus on Handle Animal checks involving an animal companion.\\n\\nIn addition, a druid’s or ranger’s animal companion knows one or more bonus tricks, which don’t count against the normal limit on tricks known and don’t require any training time or Handle Animal checks to teach.\\n\\nIf you have no ranks in Handle Animal, you can use a Charisma check to handle and push domestic animals, but you can’t teach, rear, or train animals. A druid or ranger with no ranks in Handle Animal can use a Charisma check to handle and push her animal companion, but she can’t teach, rear, or train other nondomestic animals.\",\r\n// skill_unlock_5: \"Creatures you have trained gain a +2 bonus on Will saves when adjacent to you.\",\r\n// skill_unlock_10: \"Creatures you have trained gain a +2 bonus on Will saves whenever you are within 30 feet and clearly visible. You can teach a trick in 1 day by increasing the DC by 20.\",\r\n// skill_unlock_15: \"You can train an animal to understand your speech (as speak with animals) with 1 week of effort and a successful DC 30 Handle Animal check. Its actions are still limited by its Intelligence. You can teach a trick in 1 day (increasing the DC by 10) or 1 hour (increasing the DC by 20).\",\r\n// skill_unlock_20: \"You can make your speech understandable to any animal for 24 hours with a successful DC 30 Handle Animal check (DC 40 for magical beasts or vermin). You can teach a trick in 1 day, 1 hour (increasing the DC by 10), or 1 minute (increasing the DC by 20).\"\r\n// },\r\n// {\r\n// name: \"Heal\",\r\n// ability_score: \"Wisdom\",\r\n// description: \"The DC and effect of a Heal check depend on the task you attempt.\\n\\n<table>\\n  <tr>\\n    <th>Task</th>\\n    <th>Heal DC</th>\\n  </tr>\\n  <tr>\\n    <td>First Aid</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Long-Term Care</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Treat Wounds from Caltrops, spike growth, or spike stones</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Treat Deadly Wounds</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Treat Poison</td>\\n    <td>Poison's Save DC</td>\\n  </tr>\\n  <tr>\\n    <td>Treat Disease</td>\\n    <td>Disease's Save DC</td>\\n  </tr>\\n</table>\\n\\nFirst Aid: You usually use first aid to save a dying character. If a character has negative hit points and is losing hit points (at the rate of 1 per round, 1 per hour, or 1 per day), you can make him stable. A stable character regains no hit points but stops losing them. First aid also stops a character from losing hit points due to effects that cause bleed.\\n\\nLong-Term Care: Providing long-term care means treating a wounded person for a day or more. If your Heal check is successful, the patient recovers hit points or ability score points lost to ability damage at twice the normal rate: 2 hit points per level for a full 8 hours of rest in a day, or 4 hit points per level for each full day of complete rest; 2 ability score points for a full 8 hours of rest in a day, or 4 ability score points for each full day of complete rest.\\n\\nYou can tend to as many as six patients at a time. You need a few items and supplies (bandages, salves, and so on) that are easy to come by in settled lands. Giving long-term care counts as light activity for the healer. You cannot give long-term care to yourself.\\n\\nTreat Wounds from Caltrops, Spike Growth, or Spike Stones: A creature wounded by stepping on a caltrop moves at half normal speed. A successful Heal check removes this movement penalty.\\n\\nA creature wounded by a spike growth or spike stones spell must succeed on a Ref lex save or take injuries that reduce his speed by one-third. Another character can remove this penalty by taking 10 minutes to dress the victim’s injuries and succeeding on a Heal check against the spell’s save DC.\\n\\nTreat Deadly Wounds: When treating deadly wounds, you can restore hit points to a damaged creature. Treating deadly wounds restores 1 hit point per level of the creature. If you exceed the DC by 5 or more, add your Wisdom modifier (if positive) to this amount. A creature can only benefit from its deadly wounds being treated within 24 hours of being injured and never more than once per day. You must expend two uses from a healer’s kit to perform this task. You take a –2 penalty on your Heal skill check for each use from the healer’s kit that you lack.\\n\\nTreat Poison: To treat poison means to tend to a single character who has been poisoned and who is going to take more damage from the poison (or suffer some other effect). Every time the poisoned character makes a saving throw against the poison, you make a Heal check. If your Heal check exceeds the DC of the poison, the character receives a +4 competence bonus on his saving throw against the poison.\\n\\nTreat Disease: To treat a disease means to tend to a single diseased character. Every time the diseased character makes a saving throw against disease effects, you make a Heal check. If your Heal check exceeds the DC of the disease, the character receives a +4 competence bonus on his saving throw against the disease.\",\r\n// id: 12,\r\n// untrained: true,\r\n// customizable: false,\r\n// knowledge: false,\r\n// blurb: \"You are skilled at tending to wounds and ailments.\",\r\n// action: \"Providing first aid, treating a wound, or treating poison is a standard action. Treating a disease or tending a creature wounded by a spike growth or spike stones spell takes 10 minutes of work. Treating deadly wounds takes 1 hour of work. Providing long-term care requires 8 hours of light activity.\",\r\n// try_again: \"Varies. Generally speaking, you can’t try a Heal check again without witnessing proof of the original check’s failure. You can always retry a check to provide first aid, assuming the target of the previous attempt is still alive.\",\r\n// special: \"A healer’s kit gives you a +2 circumstance bonus on Heal checks.\",\r\n// skill_unlock_5: \"When you treat deadly wounds, the target recovers hit points and ability damage as if it had rested for a full day.\",\r\n// skill_unlock_10: \"When you treat deadly wounds, the target recovers hit points as if it had rested for a full day with long-term care.\",\r\n// skill_unlock_15: \"When you treat deadly wounds, the creature recovers hit point and ability damage as if it had rested for 3 days.\",\r\n// skill_unlock_20: \"When you treat deadly wounds, the target recovers hit point and ability damage as if it had rested for 3 days with long-term care.\"\r\n// },\r\n// {\r\n// name: \"Intimidate\",\r\n// ability_score: \"Charisma\",\r\n// description: \"You can use Intimidate to force an opponent to act friendly toward you for 1d6 × 10 minutes with a successful check. The DC of this check is equal to 10 + the target’s Hit Dice + the target’s Wisdom modifier. If successful, the target gives you the information you desire, takes actions that do not endanger it, or otherwise offers limited assistance. After the Intimidate expires, the target treats you as unfriendly and may report you to local authorities. If you fail this check by 5 or more, the target attempts to deceive you or otherwise hinder your activities.\\n\\nDemoralize: You can use this skill to cause an opponent to become shaken for a number of rounds. The DC of this check is equal to 10 + the target’s Hit Dice + the target’s Wisdom modifier. If you are successful, the target is shaken for 1 round. This duration increases by 1 round for every 5 by which you beat the DC. You can only threaten an opponent in this way if it is within 30 feet and can clearly see and hear you. Using demoralize on the same creature only extends the duration; it does not create a stronger fear condition.\",\r\n// id: 13,\r\n// untrained: true,\r\n// customizable: false,\r\n// knowledge: false,\r\n// blurb: \"You can use this skill to frighten your opponents or to get them to act in a way that benefits you. This skill includes verbal threats and displays of prowess.\",\r\n// action: \"Using Intimidate to change an opponent’s attitude requires 1 minute of conversation. Demoralizing an opponent is a standard action.\",\r\n// try_again: \"You can attempt to Intimidate an opponent again, but each additional check increases the DC by +5. This increase resets after 1 hour has passed.\",\r\n// special: \"You also gain a +4 bonus on Intimidate checks if you are larger than your target and a –4 penalty on Intimidate checks if you are smaller than your target.\",\r\n// skill_unlock_5: \"If you exceed the DC to demoralize a target by at least 10, it is frightened for 1 round and shaken thereafter. A Will save (DC = 10 + your number of ranks in Intimidate) negates the frightened condition, but the target is still shaken, even if it has the stalwart ability.\",\r\n// skill_unlock_10: \"If you exceed the DC to demoralize a target by at least 10, it is panicked for 1 round or frightened for 1d4 rounds (your choice) and shaken thereafter. A Will save (DC = 10 + your number of ranks in Intimidate) negates the frightened or panicked condition, but the target is still shaken, even if it has the stalwart ability.\",\r\n// skill_unlock_15: \"If you exceed the DC to demoralize a target by at least 20, it is cowering for 1 round or panicked for 1d4 rounds (your choice) and frightened thereafter. A Will save (DC = 10 + your number of ranks in Intimidate) negates the cowering, panicked, and frightened conditions, but the target is still shaken, even if it has the stalwart ability.\",\r\n// skill_unlock_20: \"If you exceed the DC to demoralize a target by at least 20, it is cowering for 1d4 rounds and panicked thereafter. A Will save (DC = 10 + your number of ranks in Intimidate) negates the cowering and panicked conditions, but the target is still shaken, even if it has the stalwart ability.\"\r\n// },\r\n// {\r\n// name: \"Investigation\",\r\n// ability_score: \"Intelligence\",\r\n// description: \"\",\r\n// id: 39,\r\n// untrained: true,\r\n// customizable: false,\r\n// knowledge: false,\r\n// blurb: \"\",\r\n// action: \"\",\r\n// try_again: \"\",\r\n// special: \"\",\r\n// skill_unlock_5: \"\",\r\n// skill_unlock_10: \"\",\r\n// skill_unlock_15: \"\",\r\n// skill_unlock_20: \"\"\r\n// },\r\n// {\r\n// name: \"Knowledge\",\r\n// ability_score: \"Intelligence\",\r\n// description: \"Arcana (ancient mysteries, magic traditions, arcane symbols, constructs, dragons, magical beasts)\\n\\nDungeoneering (aberrations, caverns, oozes, spelunking)\\n\\nEngineering (buildings, aqueducts, bridges, fortifications)\\n\\nGeography (lands, terrain, climate, people)\\n\\nHistory (wars, colonies, migrations, founding of cities)\\n\\nLocal (legends, personalities, inhabitants, laws, customs, traditions, humanoids)\\n\\nNature (animals, fey, monstrous humanoids, plants, seasons and cycles, weather, vermin)\\n\\nNobility (lineages, heraldry, personalities, royalty)\\n\\nPlanes (the Inner Planes, the Outer Planes, the Astral Plane, the Ethereal Plane, outsiders, planar magic)\\n\\nReligion (gods and goddesses, mythic history, ecclesiastic tradition, holy symbols, undead)\\n\\nAnswering a question within your field of study has a DC of 10 (for really easy questions), 15 (for basic questions), or 20 to 30 (for really tough questions).\\n\\nYou can use this skill to identify monsters and their special powers or vulnerabilities. In general, the DC of such a check equals 10 + the monster’s CR. For common monsters, such as goblins, the DC of this check equals 5 + the monster’s CR. For particularly rare monsters, such as the tarrasque, the DC of this check equals 15 + the monster’s CR, or more. A successful check allows you to remember a bit of useful information about that monster. For every 5 points by which your check result exceeds the DC, you recall another piece of useful information. Many of the Knowledge skills have specific uses as noted on the below table.\\n\\n<table>\\n  <tr>\\n    <th>Tasks</th>\\n    <th>Knowledge Skill</th>\\n    <th>DC</th>\\n  </tr>\\n  <tr>\\n    <td>Identify Auras While Using Detect Magic</td>\\n    <td>Arcana</td>\\n    <td>15 + Spell Level</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Spell Effect That Is In Place</td>\\n    <td>Arcana</td>\\n    <td>20 + Spell Level</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Materials Manufactured by Magic</td>\\n    <td>Arcana</td>\\n    <td>20 + Spell Level</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Spell That Just Targeted You</td>\\n    <td>Arcana</td>\\n    <td>25 + Spell Level</td>\\n  </tr>\\n  <tr>\\n    <td>Identify the Spells Cast Using a Specific Material Component</td>\\n    <td>Arcana</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Underground Hazard</td>\\n    <td>Dungeoneering</td>\\n    <td>15 + Hazard's CR</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Mineral, Stone, or Metal</td>\\n    <td>Dungeoneering</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Determine Slope</td>\\n    <td>Dungeoneering</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Determine Depth Underground</td>\\n    <td>Dungeoneering</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Dangerous Construction</td>\\n    <td>Engineering</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Determine a Structure's Style or Age</td>\\n    <td>Engineering</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Determine a Structure's Weakness</td>\\n    <td>Engineering</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Creature's Ethnicity or Accent</td>\\n    <td>Geography</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Recognize Regional Terrain Features</td>\\n    <td>Geography</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Know Location of Nearest Community or Noteworthy Site</td>\\n    <td>Geography</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Know Recent or Historically Significant Date</td>\\n    <td>History</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Determine Approximate Date of Specific Event</td>\\n    <td>History</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Know Obscure or Ancient Historical Event</td>\\n    <td>History</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Know Local Laws, Rulers, and Popular Locations</td>\\n    <td>Local</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Know a Common Rumor or Local Tradition</td>\\n    <td>Local</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Know Hidden Organizations, Rulers, and Locations</td>\\n    <td>Local</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Natural Hazard</td>\\n    <td>Nature</td>\\n    <td>15 + Hazard's CR</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Common Plant or Animal</td>\\n    <td>Nature</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Unnatural Weather Phenomenon</td>\\n    <td>Nature</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Determine Artifical Nature of Feature</td>\\n    <td>Nature</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Know Current Rulers and Their Symbols</td>\\n    <td>Nobility</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Know Proper Etiquette</td>\\n    <td>Nobility</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Know Line of Succession</td>\\n    <td>Nobility</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Know the Names of the Planes</td>\\n    <td>Planes</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Recognize Current Plane</td>\\n    <td>Planes</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Creature's Planar Origin</td>\\n    <td>Planes</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Recognize a Common Deity's Symbol or Clergy</td>\\n    <td>Religion</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Know Common Mythology and Tenets</td>\\n    <td>Religion</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Recognize an Obscure Deity's Symbol or Clergy</td>\\n    <td>Religion</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Monster's Abilities and Weaknesses</td>\\n    <td>Varies</td>\\n    <td>10 + Monster's CR</td>\\n  </tr>\\n</table>\",\r\n// id: 24,\r\n// untrained: false,\r\n// customizable: true,\r\n// knowledge: true,\r\n// blurb: \"You are educated in a field of study and can answer both simple and complex questions. Like the Craft, Perform, and Profession skills, Knowledge actually encompasses a number of different specialties.\",\r\n// action: \"Usually none. In most cases, a Knowledge check doesn’t take an action.\",\r\n// try_again: \"No. The check represents what you know, and thinking about a topic a second time doesn’t let you know something that you never learned in the first place.\",\r\n// special: \"You cannot make an untrained Knowledge check with a DC higher than 10. If you have access to an extensive library that covers a specific skill, this limit is removed. The time to make checks using a library, however, increases to 1d4 hours. Particularly complete libraries might even grant a bonus on Knowledge checks in the fields that they cover.\",\r\n// skill_unlock_5: \"When you successfully identify a creature, you gain one additional piece of information for every 5 ranks you possess in that Knowledge skill.\",\r\n// skill_unlock_10: \"When you successfully identify a creature, you gain a +1 competence bonus on attack rolls, opposed ability checks, skill checks, and caster level checks against creatures of that kind (e.g., glabrezu demons, but not other demons or evil outsiders) for 1 minute. This bonus increases by 1 for every 5 ranks beyond 10 you possess in that Knowledge skill.\",\r\n// skill_unlock_15: \"When you fail a Knowledge check, you can reroll the check at a –10 penalty. The competence bonus above also applies to saving throws against exceptional, spell-like, or supernatural abilities used by creatures you identify.\",\r\n// skill_unlock_20: \"Whenever you attempt a Knowledge check, you can roll twice and take the better result.\"\r\n// },\r\n// {\r\n// name: \"Linguistics\",\r\n// ability_score: \"Intelligence\",\r\n// description: \"You can decipher writing in an unfamiliar language or a message written in an incomplete or archaic form. The base DC is 20 for the simplest messages, 25 for standard texts, and 30 or higher for intricate, exotic, or very old writing. If the check succeeds, you understand the general content of a piece of writing about one page long (or the equivalent). If the check fails, make a DC 5 Wisdom check to see if you avoid drawing a false conclusion about the text. (Success means that you do not draw a false conclusion; failure means that you do.)\\n\\nBoth the Linguistics check and (if necessary) the Wisdom check are made secretly by the GM, so that you can’t tell whether the conclusion you draw is true or false.\\n\\n<table>\\n  <tr>\\n    <th>Condition</th>\\n    <th>Linguistics Check Modifier</th>\\n  </tr>\\n  <tr>\\n    <td>Type of Document is Unknown to Reader</td>\\n    <td>-2</td>\\n  </tr>\\n  <tr>\\n    <td>Type of Document is Somewhat Known to Reader</td>\\n    <td>+0</td>\\n  </tr>\\n  <tr>\\n    <td>Type of Document is Well Known to Reader</td>\\n    <td>+2</td>\\n  </tr>\\n  <tr>\\n    <td>Handwriting Not Known to Reader</td>\\n    <td>-2</td>\\n  </tr>\\n  <tr>\\n    <td>Handwriting Somewhat Known to Reader</td>\\n    <td>+0</td>\\n  </tr>\\n  <tr>\\n    <td>Handwritin Intimately Known to Reader</td>\\n    <td>+2</td>\\n  </tr>\\n  <tr>\\n    <td>Reader Only Casually Reviews Document</td>\\n    <td>-2</td>\\n  </tr>\\n  <tr>\\n    <td>Document Contradicts Orders or Knowledge</td>\\n    <td>+2</td>\\n  </tr>\\n</table>\\n\\nCreate or Detect Forgeries: Forgery requires writing materials appropriate to the document being forged. To forge a document on which the handwriting is not specific to a person, you need only to have seen a similar document before, and you gain a +8 bonus on your check. To forge a signature, you need an autograph of that person to copy, and you gain a +4 bonus on the check. To forge a longer document written in the hand of some particular person, a large sample of that person’s handwriting is needed.\\n\\nThe Linguistics check is made secretly, so that you’re not sure how good your forgery is. As with Disguise, you don’t make a check until someone examines the work. Your Linguistics check is opposed by the Linguistics check of the person who examines the document to verify its authenticity. The examiner gains modifiers if any of the conditions are listed on the table above.\\n\\nLearn a Language: Whenever you put a rank into this skill, you learn to speak and read a new language. Common languages (and their typical speakers) include the following.\\n\\nAbyssal (demons and other chaotic evil outsiders)\\n\\nAklo (derros, inhuman or otherworldly monsters, evil fey)\\n\\nAquan (aquatic creatures, water-based creatures)\\n\\nAuran (f lying creatures, air-based creatures)\\n\\nCelestial (angels and other good outsiders)\\n\\nCommon (humans and the core races)\\n\\nDraconic (dragons, reptilian humanoids)\\n\\nDruidic (druids only)\\n\\nDwarven (dwarves)\\n\\nElven (elves, half-elves)\\n\\nGiant (cyclopses, ettins, giants, ogres, trolls)\\n\\nGnome (gnomes)\\n\\nGoblin (bugbears, goblins, hobgoblins)\\n\\nGnoll (gnolls)\\n\\nHalf ling (half lings)\\n\\nIgnan (f ire-based creatures)\\n\\nInfernal (devils and other lawful evil outsiders)\\n\\nOrc (orcs, half-orcs)\\n\\nSylvan (centaurs, fey creatures, plant creatures, unicorns)\\n\\nTerran (earth-based creatures)\\n\\nUndercommon (drow, duergar, morlocks, svirfneblin)\\n\\nRead Lips: Any PC may learn to read lips with a rank in Linguistics as if they had learned a new language. When reading the lips of a speaking creature within 10 feet in normal lighting conditions, the reader need not make any skill checks. In situations of dim lighting, extreme distances, or to read the lips of someone trying to hide their words from the reader, the reader must make Perception checks (DC determined by the GM based on the situation). A lip reader may only understand spoken words in a language it knows.\",\r\n// id: 25,\r\n// untrained: false,\r\n// customizable: false,\r\n// knowledge: false,\r\n// blurb: \"You are skilled at working with language, in both its spoken and written forms. You can speak multiple languages, and can decipher nearly any tongue given enough time. Your skill in writing allows you to create and detect forgeries as well.\",\r\n// action: \"Varies. Deciphering a page of ordinary text takes 1 minute (10 consecutive rounds). Creating a forgery can take anywhere from 1 minute to 1d4 minutes per page. Detecting a forgery using Linguistics takes 1 round of examination per page.\",\r\n// try_again: \"Yes.\",\r\n// special: \"You must be trained to use this skill, but you can always attempt to read archaic and strange forms of your own racial bonus languages. In addition, you can also always attempt to detect a forgery.\",\r\n// skill_unlock_5: \"You can use Linguistics instead of Sense Motive to intercept and interpret secret messages (as the Bluff skill). You gain a +1 insight bonus on Perception and Disable Device checks to detect or disarm written magical traps. This bonus increases by 1 for every 5 ranks beyond 5 you possess in Linguistics.\",\r\n// skill_unlock_10: \"If you succeed at a Linguistics check by at least 10 when examining writing, you can learn the precise meaning rather than general content, and you never draw false conclusions on a failed check. A successful DC 30 Linguistics check reveals the general meaning of speech, a successful DC 35 check reveals 1d4 pieces of specific information, and a successful DC 40 check reveals exact meaning.\",\r\n// skill_unlock_15: \"You can decipher magical writings (as read magic) by succeeding at a Linguistics check (DC = 25 + caster level). If you identify a written magical trap in this way, you gain a +2 circumstance bonus on Disable Device checks to disarm it.\",\r\n// skill_unlock_20: \"You can attempt to decipher magical or non-magical text at a rate of one page per round. If you instead spend 1 minute per page, roll twice and take the better result.\"\r\n// },\r\n// {\r\n// name: \"Nature\",\r\n// ability_score: \"Intelligence\",\r\n// description: \"Dungeoneering includes aberrations, caverns, oozes, spelunking. Geography includes lands, terrain, climate, people. Used for astronomy. Nature includes animals, fey, monstrous humanoids, plants, seasons and cycles, weather, vermin.\\n\\nAnswering a question within your field of study has a DC of 10 (for really easy questions), 15 (for basic questions), or 20 to 30 (for really tough questions).\\n\\nYou can use this skill to identify monsters and their special powers or vulnerabilities. In general, the DC of such a check equals 10 + the monster’s CR. For common monsters, such as goblins, the DC of this check equals 5 + the monster’s CR. For particularly rare monsters, such as the tarrasque, the DC of this check equals 15 + the monster’s CR, or more. A successful check allows you to remember a bit of useful information about that monster. For every 5 points by which your check result exceeds the DC, you recall another piece of useful information. Nature can have specific uses as noted on the below table.\\n\\n<table>\\n  <tr>\\n    <th>Tasks</th>\\n    <th>Nature DC</th>\\n  </tr>\\n  <tr>\\n    <td>Identify Underground or Natural Hazard</td>\\n    <td>15 + Hazard's CR</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Mineral, Stone, or Metal</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Creature's Ethnicity or Accent</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Common Plant or Animal</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Determine Slope</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Recognize Regional Terrain Features</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Unnatural Weather Phenomenon</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Determine Depth Underground</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Know Location of Nearest Community or Noteworthy Site</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Determine Artifical Nature of Feature</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Monster's Abilities and Weaknesses</td>\\n    <td>10 + Monster's CR</td>\\n  </tr>\\n</table>\",\r\n// id: 38,\r\n// untrained: true,\r\n// customizable: false,\r\n// knowledge: true,\r\n// blurb: \"This skill is from the Pathfinder Unchained material, and represent a combination of the skills Knowledge (dungeoneering), Knowledge (geography), and Knowledge (nature). The text below outlines a consolidation of those skills' features with minimal edits.\",\r\n// action: \"Usually none. In most cases, a Nature check doesn’t take an action.\",\r\n// try_again: \"No. The check represents what you know, and thinking about a topic a second time doesn’t let you know something that you never learned in the first place.\",\r\n// special: \"You cannot make an untrained Nature check with a DC higher than 10. If you have access to an extensive library that covers a specific skill, this limit is removed. The time to make checks using a library, however, increases to 1d4 hours. Particularly complete libraries might even grant a bonus on Nature checks in the fields that they cover.\",\r\n// skill_unlock_5: \"\",\r\n// skill_unlock_10: \"\",\r\n// skill_unlock_15: \"\",\r\n// skill_unlock_20: \"\"\r\n// },\r\n// {\r\n// name: \"Perception\",\r\n// ability_score: \"Wisdom\",\r\n// description: \"Perception has a number of uses, the most common of which is an opposed check versus an opponent’s Stealth check to notice the opponent and avoid being surprised. If you are successful, you notice the opponent and can react accordingly. If you fail, your opponent can take a variety of actions, including sneaking past you and attacking you.\\n\\nPerception is also used to notice fine details in the environment. The DC to notice such details varies depending upon distance, the environment, and how noticeable the detail is. The following table gives a number of guidelines.\\n\\n<table>\\n  <tr>\\n    <th>Detail</th>\\n    <th>Perception DC</th>\\n  </tr>\\n  <tr>\\n    <td>Hear the Sound of Battle</td>\\n    <td>-10</td>\\n  </tr>\\n  <tr>\\n    <td>Notice the Stench of Rotting Garbage</td>\\n    <td>-10</td>\\n  </tr>\\n  <tr>\\n    <td>Detect the Smell of Smoke</td>\\n    <td>0</td>\\n  </tr>\\n  <tr>\\n    <td>Hear the Details of a Conversation</td>\\n    <td>0</td>\\n  </tr>\\n  <tr>\\n    <td>Notice a Visible Creature</td>\\n    <td>0</td>\\n  </tr>\\n  <tr>\\n    <td>Determine if Food is Spoiled</td>\\n    <td>5</td>\\n  </tr>\\n  <tr>\\n    <td>Hear the Sound of a Creature Walking</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Hear the Details of a Whispered Conversation</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Find the Average Concealed Door</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Hear the Sound of a Key Being Turned in a Lock</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Find the Average Secret Door</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Hear a Bow Being Drawn</td>\\n    <td>25</td>\\n  </tr>\\n  <tr>\\n    <td>Sense a Burrowing Creature Underneath You</td>\\n    <td>25</td>\\n  </tr>\\n  <tr>\\n    <td>Notice a Pickpocket</td>\\n    <td>Opposed by Sleight of Hand</td>\\n  </tr>\\n  <tr>\\n    <td>Notice a Creature Using Stealth</td>\\n    <td>Opposed by Stealth</td>\\n  </tr>\\n  <tr>\\n    <td>Find a Hidden Trap</td>\\n    <td>Varies by Trap</td>\\n  </tr>\\n  <tr>\\n    <td>Identify the Powers of a Potion through Taste</td>\\n    <td>15 + Potion's Caster Level</td>\\n  </tr>\\n</table>\\n\\n<table>\\n  <tr>\\n    <th>Perception Modifiers</th>\\n    <th>DC Modifier</th>\\n  </tr>\\n  <tr>\\n    <td>Distance to the Source, Object, or Creature</td>\\n    <td>+1 per 10 Feet</td>\\n  </tr>\\n  <tr>\\n    <td>Through a Closed Door</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Through a Wall</td>\\n    <td>+10 per Foot</td>\\n  </tr>\\n  <tr>\\n    <td>Favorable Conditions</td>\\n    <td>-2</td>\\n  </tr>\\n  <tr>\\n    <td>Unfavorable Conditions</td>\\n    <td>+2</td>\\n  </tr>\\n  <tr>\\n    <td>Terrible Conditions</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Creature Making the Check is Distracted</td>\\n    <td>+5</td>\\n  </tr>\\n  <tr>\\n    <td>Creature Making the Check is Asleep</td>\\n    <td>+10</td>\\n  </tr>\\n  <tr>\\n    <td>Creature or Object is Invisible</td>\\n    <td>+20</td>\\n  </tr>\\n</table>\",\r\n// id: 26,\r\n// untrained: true,\r\n// customizable: false,\r\n// knowledge: false,\r\n// blurb: \"Your senses allow you to notice fine details and alert you to danger. Perception covers all five senses, including sight, hearing, touch, taste, and smell.\",\r\n// action: \"Most Perception checks are reactive, made in response to observable stimulus. Intentionally searching for stimulus is a move action.\",\r\n// try_again: \"Yes. You can try to sense something you missed the first time, so long as the stimulus is still present.\",\r\n// special: \"Creatures with the scent special quality have a +8 bonus on Perception checks made to detect a scent. Creatures with the tremorsense special quality have a +8 bonus on Perception checks against creatures touching the ground and automatically make any such checks within their range.\",\r\n// skill_unlock_5: \"You remain alert to sounds even in your sleep, and the normal DC increase to Perception checks when you are sleeping is halved. The distance modifier on the DC of Perception checks you attempt is reduced to +1 per 20 feet.\",\r\n// skill_unlock_10: \"The distance modifier on the DC of Perception checks you attempt is reduced to +1 per 30 feet. In addition, you gain a +5 bonus on Perception checks to notice or locate an invisible creature or object.\",\r\n// skill_unlock_15: \"You remain alert to sounds even in your sleep, and the normal DC increase to Perception checks when you are sleeping doesn’t apply to you. The distance modifier on the DC of your Perception checks is reduced to +1 per 40 feet.\",\r\n// skill_unlock_20: \"You gain a +10 bonus on Perception checks to notice invisible creatures or objects. The distance modifier on the DC of Perception checks you attempt is reduced to +1 per 60 feet.\"\r\n// },\r\n// {\r\n// name: \"Perform\",\r\n// ability_score: \"Charisma\",\r\n// description: \"You can impress audiences with your talent and skill in your chosen performance type.\\n\\n<table>\\n  <tr>\\n    <th>Perform DC</th>\\n    <th>Performance</th>\\n  </tr>\\n  <tr>\\n    <td>10</td>\\n    <td>Routine performance. Trying to earn money by playing in public is akin to begging. You can earn 1d10 cp/day.</td>\\n  </tr>\\n  <tr>\\n    <td>15</td>\\n    <td>Enjoyable performance. In a prosperous city, you can earn 1d10 sp/day.</td>\\n  </tr>\\n  <tr>\\n    <td>20</td>\\n    <td>Great performance. In a prosperous city, you can earn 3d10 sp/day. In time, you may be invited to join a professional troupe and may develop a regional reputation.</td>\\n  </tr>\\n  <tr>\\n    <td>25</td>\\n    <td>Memorable performance. In a prosperous city, you can earn 1d6 gp/day. In time, you may come to the attention of noble patrons and develop a national reputation.</td>\\n  </tr>\\n  <tr>\\n    <td>30</td>\\n    <td>Extraordinary performance. In a prosperous city, you can earn 3d6 gp/day. In time, you may draw attention from distant patrons, or even from extraplanar beings.</td>\\n  </tr>\\n</table>\\n\\nA masterwork musical instrument gives you a +2 circumstance bonus on all Perform checks that involve its use.\\n\\nIn addition to being able to put on a show, a performer knows the prominent works of their chosen type of performance.\\n\\n<table>\\n  <tr>\\n    <th>Task</th>\\n    <th>Perform Skill</th>\\n    <th>DC</th>\\n  </tr>\\n  <tr>\\n    <td>Mimic the Style of a Famous Performer</td>\\n    <td>Varies</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Recall or Recognize All the Notes, Lyrics, or Lines of a Popular Work</td>\\n    <td>Varies</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Recall or Recognize All the Notes, Lyrics, or Lines of an Obscure Work</td>\\n    <td>Varies</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Improvise a Routine on a Specific Subject</td>\\n    <td>Act, Comedy, Oratory, or Sing</td>\\n    <td>20</td>\\n  </tr>\\n</table>\",\r\n// id: 27,\r\n// untrained: true,\r\n// customizable: true,\r\n// knowledge: false,\r\n// blurb: \"You are skilled at one form of entertainment, from singing to acting to playing an instrument. Like Craft, Knowledge, and Profession, Perform is actually a number of separate skills. You could have several Perform skills, each with its own ranks.\\n\\nEach of the nine categories of the Perform skill includes a variety of methods, instruments, or techniques, a small sample of which is provided for each category below.\\n\\nAct (comedy, drama, pantomime)\\n\\nComedy (buffoonery, limericks, joke-telling)\\n\\nDance (ballet, waltz, jig)\\n\\nKeyboard instruments (harpsichord, piano, pipe organ)\\n\\nOratory (epic, ode, storytelling)\\n\\nPercussion instruments (bells, chimes, drums, gong)\\n\\nString instruments (fiddle, harp, lute, mandolin)\\n\\nWind instruments (flute, pan pipes, recorder, trumpet)\\n\\nSing (ballad, chant, melody)\",\r\n// action: \"Varies. Trying to earn money by playing in public requires anywhere from an evening’s work to a full day’s performance. The bard’s special Perform-based abilities are described in that class’s description.\",\r\n// try_again: \"Yes. Retries are allowed, but they don’t negate previous failures, and an audience that has been unimpressed in the past is likely to be prejudiced against future performances. (Increase the DC by 2 for each previous failure.)\",\r\n// special: \"A bard must have ranks in specific Perform categories to use some of his Bardic Performance abilities.\",\r\n// skill_unlock_5: \"Whenever you attempt a Bluff, Diplomacy, Handle Animal, or Intimidate check, you can attempt a DC 20 Perform check to gain a +2 circumstance bonus on the check.\",\r\n// skill_unlock_10: \"Whenever you cast a spell with the emotion or language-dependent descriptor, you can attempt a DC 25 Perform check to increase the save DC by 1.\",\r\n// skill_unlock_15: \"Whenever you cast a spell with the emotion or language-dependent descriptor, you can attempt a DC 30 Perform check to increase your caster level by 1. You must choose whether to use this ability or the ability unlocked at 10 ranks when casting the spell.\",\r\n// skill_unlock_20: \"Choose one of the following skills: Bluff, Diplomacy, or Intimidate. When you attempt a skill check with that skill, you can also attempt a Perform check and use the better result to determine the success of that skill check.\"\r\n// },\r\n// {\r\n// name: \"Profession\",\r\n// ability_score: \"Wisdom\",\r\n// description: \"You can earn half your Profession check result in gold pieces per week of dedicated work. You know how to use the tools of your trade, how to perform the profession’s daily tasks, how to supervise helpers, and how to handle common problems. You can also answer questions about your Profession. Basic questions are DC 10, while more complex questions are DC 15 or higher.\\n\\nA profession often encompasses many smaller areas of expertise, and these auxiliary skills can come in handy in situations beyond just making money or answering trade-specific questions. Below are some sample additional uses for Profession skills, and GMs are encouraged to create their own.\\n\\n<table>\\n  <tr>\\n    <th>Task</th>\\n    <th>Profession Skill</th>\\n    <th>DC</th>\\n  </tr>\\n  <tr>\\n    <td>Determine Hardness and Hit Points of a Structure</td>\\n    <td>Architect or Engineer</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Prepare Trail Rations (Takes 1 Hour Per Day's Worth of Rations)</td>\\n    <td>Baker or Cook</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Obtain a Legal Permit</td>\\n    <td>Barrister or Clerk</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Get Somone Released From Jail Who Has Been Imprisoned for a Minor Crime</td>\\n    <td>Barrister</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Ask a Special Favor From a Judge (Such as Arresting Someone)</td>\\n    <td>Barrister</td>\\n    <td>30</td>\\n  </tr>\\n  <tr>\\n    <td>Brew Alcohol of Exceptional Quality</td>\\n    <td>Brewer</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Notice Poison in a Beverage</td>\\n    <td>Brewer</td>\\n    <td>25</td>\\n  </tr>\\n  <tr>\\n    <td>Skin an Animal and Tan the Hide</td>\\n    <td>Butcher, Shepherd, or Tanner</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Slaughter and Butcher an Animal</td>\\n    <td>Butcher, Cook, or Shepherd</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Reduce a Legal Fine or Tax By Half the Result of the Check in gp (up to 75%)</td>\\n    <td>Clerk</td>\\n    <td>20+</td>\\n  </tr>\\n  <tr>\\n    <td>Cook a Meal of Exceptional Quality</td>\\n    <td>Cook</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Notice Poison in Food</td>\\n    <td>Cook</td>\\n    <td>25</td>\\n  </tr>\\n  <tr>\\n    <td>Find Potential Clients within an Establishment or Large Group</td>\\n    <td>Courtesan</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Continue Steering a Vehicle When You Take Damage</td>\\n    <td>Driver or Sailor</td>\\n    <td>5</td>\\n  </tr>\\n  <tr>\\n    <td>Take Cover (As The Ride Skill) While Steering a Vehicle</td>\\n    <td>Driver or Sailor</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Non-Creature Plant</td>\\n    <td>Farmer or Gardener</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Rejuvinate Dying Plants</td>\\n    <td>Farmer or Gardener</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Provide 1 Day's Worth of Food for Yourself and Others in the Wild</td>\\n    <td>Fisherman or Trapper</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Recall the Rules of a Game of Chance</td>\\n    <td>Gambler</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Get a Hunch Regarding Whether a Game is Rigged</td>\\n    <td>Gambler</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Reduce an Average or Lower Cost of Living by 50%</td>\\n    <td>Innkeeper</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Sate Hunger or Thirst for 1 Day</td>\\n    <td>Herbalist</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Common Medicinal Herbs</td>\\n    <td>Herbalist</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Rare Medicinal Herbs</td>\\n    <td>Herbalist</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Aid Another on a Knowledge Check Using Reference Material</td>\\n    <td>Librarian</td>\\n    <td>5</td>\\n  </tr>\\n  <tr>\\n    <td>Recall the Name of a Rare Book</td>\\n    <td>Librarian</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Determine Where an Item was Manufactured</td>\\n    <td>Merchant</td>\\n    <td>10+</td>\\n  </tr>\\n  <tr>\\n    <td>Recall Where a Common Good Fetches a Higher Price</td>\\n    <td>Merchant</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Safely Deliver a Child</td>\\n    <td>Midwife</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Safely Deliver a Child Despite Complications</td>\\n    <td>Midwife</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Grind a Small Piece of Nonmagical Substance into Powder</td>\\n    <td>Miller</td>\\n    <td>10 + Hardness</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Common Metal or Semiprecious Stone</td>\\n    <td>Miner</td>\\n    <td>5</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Rare Metal or Precious Gem</td>\\n    <td>Miner</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Ignore Half Hardness When Attacking a Stone or Metal Object</td>\\n    <td>Miner</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Increase Carrying Capacity for 8 Hours as if Strength were 2 Higher</td>\\n    <td>Porter</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Unload a Vessel in Half the Normal Time</td>\\n    <td>Porter</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Navigate a Ship in Fair Conditions</td>\\n    <td>Sailor</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Pilot a Ship Safely Through a Hazardous Seaway</td>\\n    <td>Sailor</td>\\n    <td>25+</td>\\n  </tr>\\n  <tr>\\n    <td>Determine Which Scribe Wrote a Document</td>\\n    <td>Scribe</td>\\n    <td>10+</td>\\n  </tr>\\n  <tr>\\n    <td>Copy a Document (30 Minutes per Page; Requires a Blank Book)</td>\\n    <td>Scribe</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Illuminate a Manuscript (1 Hour per Page)</td>\\n    <td>Scribe</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Determine the Quality of Woolen Textiles</td>\\n    <td>Shepherd</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Determine Whether a Weapon or Armor is of Masterwork Quality</td>\\n    <td>Soldier</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Estimate the Size of a Military Force</td>\\n    <td>Soldier</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Advantages and Disadvantages of a Military Formation</td>\\n    <td>Soldier</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Keep Horses Fed in the Wild</td>\\n    <td>Stable Master</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Fit or Remove Barding in Half the Normal Time</td>\\n    <td>Stable Master</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Recognize Damaged or Sabotaged Horse Tack</td>\\n    <td>Stable Master</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Determine the Quality of Leatherwork (and Tell If It's Masterwork Quality)</td>\\n    <td>Tanner</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Aid Another on an Skill Check to Get Out of a Trap or Snare</td>\\n    <td>Trapper</td>\\n    <td>5</td>\\n  </tr>\\n  <tr>\\n    <td>Reset a Trap in Half the Normal Amount of Time</td>\\n    <td>Trapper</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Scavenge Wood Suitable for Campfire or Shelter</td>\\n    <td>Woodcutter</td>\\n    <td>5</td>\\n  </tr>\\n  <tr>\\n    <td>Ignore Half Hardness When Attacking Wooden Object</td>\\n    <td>Woodcutter</td>\\n    <td>20</td>\\n  </tr>\\n</table>\",\r\n// id: 28,\r\n// untrained: false,\r\n// customizable: true,\r\n// knowledge: false,\r\n// blurb: \"You are skilled at a specific job. Like Craft, Knowledge, and Perform, Profession is actually a number of separate skills. You could have several Profession skills, each with its own ranks. While a Craft skill represents ability in creating an item, a Profession skill represents an aptitude in a vocation requiring a broader range of less specific knowledge. The most common Profession skills are architect, baker, barrister, brewer, butcher, clerk, cook, courtesan, driver, engineer, farmer, f isherman, gambler, gardener, herbalist, innkeeper, librarian, merchant, midwife, miller, miner, porter, sailor, scribe, shepherd, stable master, soldier, tanner, trapper, and woodcutter.\",\r\n// action: \"Not applicable. A single check generally represents a week of work.\",\r\n// try_again: \"Varies. An attempt to use a Profession skill to earn income cannot be retried. You are stuck with whatever weekly wage your check result brought you. Another check may be made after a week to determine a new income for the next period of time. An attempt to accomplish some specific task can usually be retried.\",\r\n// special: \"Untrained laborers and assistants (that is, characters without any ranks in Profession) earn an average of 1 silver piece per day.\",\r\n// skill_unlock_5: \"When using Profession checks to earn income, you earn gold pieces equal to the result of your check each week.\",\r\n// skill_unlock_10: \"When attempting Profession checks, you can roll twice and take the better result. When answering questions about your Profession, you can always take 10.\",\r\n// skill_unlock_15: \"You can attempt checks to earn income once per day instead of once per week.\",\r\n// skill_unlock_20: \"When attempting Profession checks, you can choose to roll once instead of twice. If you do and the result of the roll is less than 10, replace it with 10. When answering questions about your Profession, you can always take 20.\"\r\n// },\r\n// {\r\n// name: \"Religion\",\r\n// ability_score: \"Intelligence\",\r\n// description: \"Planes includes the Inner Planes, the Outer Planes, the Astral Plane, the Ethereal Plane, outsiders, planar magic. Religion includes gods and goddesses, mythic history, ecclesiastic tradition, holy symbols, undead.\\n\\nAnswering a question within your field of study has a DC of 10 (for really easy questions), 15 (for basic questions), or 20 to 30 (for really tough questions).\\n\\nYou can use this skill to identify monsters and their special powers or vulnerabilities. In general, the DC of such a check equals 10 + the monster’s CR. For common monsters, such as goblins, the DC of this check equals 5 + the monster’s CR. For particularly rare monsters, such as the tarrasque, the DC of this check equals 15 + the monster’s CR, or more. A successful check allows you to remember a bit of useful information about that monster. For every 5 points by which your check result exceeds the DC, you recall another piece of useful information. Religion can have specific uses as noted on the below table.\\n\\n<table>\\n  <tr>\\n    <th>Tasks</th>\\n    <th>Religion DC</th>\\n  </tr>\\n  <tr>\\n    <td>Know the Names of the Planes</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Recognize a Common Deity's Symbol or Clergy</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Recognize Current Plane</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Know Common Mythology and Tenets</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Creature's Planar Origin</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Recognize an Obscure Deity's Symbol or Clergy</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Monster's Abilities and Weaknesses</td>\\n    <td>10 + Monster's CR</td>\\n  </tr>\\n</table>\",\r\n// id: 40,\r\n// untrained: true,\r\n// customizable: false,\r\n// knowledge: true,\r\n// blurb: \"This skill is from the Pathfinder Unchained material, and represent a combination of the skills Knowledge (planes) and Knowledge (religion). The text below outlines a consolidation of those skills' features with minimal edits.\",\r\n// action: \"Usually none. In most cases, a Religion check doesn’t take an action.\",\r\n// try_again: \"No. The check represents what you know, and thinking about a topic a second time doesn’t let you know something that you never learned in the first place.\",\r\n// special: \"You cannot make an untrained Religion check with a DC higher than 10. If you have access to an extensive library that covers a specific skill, this limit is removed. The time to make checks using a library, however, increases to 1d4 hours. Particularly complete libraries might even grant a bonus on Nature checks in the fields that they cover.\",\r\n// skill_unlock_5: \"\",\r\n// skill_unlock_10: \"\",\r\n// skill_unlock_15: \"\",\r\n// skill_unlock_20: \"\"\r\n// },\r\n// {\r\n// name: \"Sense Motive\",\r\n// ability_score: \"Wisdom\",\r\n// description: \"A successful check lets you avoid being bluffed (see the Bluff skill). You can also use this skill to determine when “something is up” (that is, something odd is going on) or to assess someone’s trustworthiness.\\n\\n<table>\\n  <tr>\\n    <th>Task</th>\\n    <th>Sense Motive DC</th>\\n  </tr>\\n  <tr>\\n    <td>Hunch</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Sense Enchantment</td>\\n    <td>25 or 15</td>\\n  </tr>\\n  <tr>\\n    <td>Discern Secret Message</td>\\n    <td>Varies</td>\\n  </tr>\\n</table>\\n\\nHunch: This use of the skill involves making a gut assessment of the social situation. You can get the feeling from another’s behavior that something is wrong, such as when you’re talking to an impostor. Alternatively, you can get the feeling that someone is trustworthy.\\n\\nSense Enchantment: You can tell that someone’s behavior is being influenced by an enchantment effect even if that person isn’t aware of it. The usual DC is 25, but if the target is dominated (see dominate person), the DC is only 15 because of the limited range of the target’s activities.\\n\\nDiscern Secret Message: You may use Sense Motive to detect that a hidden message is being transmitted via the Bluff skill. In this case, your Sense Motive check is opposed by the Bluff check of the character transmitting the message. For each piece of information relating to the message that you are missing, you take a –2 penalty on your Sense Motive check. If you succeed by 4 or less, you know that something hidden is being communicated, but you can’t learn anything specific about its content. If you beat the DC by 5 or more, you intercept and understand the message. If you fail by 4 or less, you don’t detect any hidden communication. If you fail by 5 or more, you might infer false information.\",\r\n// id: 30,\r\n// untrained: true,\r\n// customizable: false,\r\n// knowledge: false,\r\n// blurb: \"You are skilled at detecting falsehoods and true intentions.\",\r\n// action: \"Trying to gain information with Sense Motive generally takes at least 1 minute, and you could spend a whole evening trying to get a sense of the people around you.\",\r\n// try_again: \"No, though you may make a Sense Motive check for each Bluff check made against you.\",\r\n// special: \"\",\r\n// skill_unlock_5: \"If you were aware of an opponent before rolling initiative (such as when you ambush an enemy or negotiations break down into combat, but not when both sides happen upon each other or you are surprised), you can attempt a Sense Motive check as part of your initiative check (DC = 11 + the highest Bluff modifier among your opponents or DC 15, whichever is higher). If you succeed, you gain a +1 bonus on the initiative check, plus an additional +1 for every 5 by which you exceeded the DC.\",\r\n// skill_unlock_10: \"After 1 minute of conversation, you can read a creature’s surface thoughts (as detect thoughts) by attempting a Sense Motive check at a –20 penalty opposed by the creature’s Bluff check.\",\r\n// skill_unlock_15: \"You can read surface thoughts as above after 1 round. In addition, when attacked, you can attempt a Sense Motive check as an immediate action opposed by your target’s attack roll. A successful check grants a +2 insight bonus to your AC against attacks from that specific opponent for 1 minute.\",\r\n// skill_unlock_20: \"You can read surface thoughts as above as a standard action. A successful check to gain an insight bonus to your AC also negates the attack that triggered it.\"\r\n// },\r\n// {\r\n// name: \"Society\",\r\n// ability_score: \"Intelligence\",\r\n// description: \"<underline>Appraise</underline>: You can evaluate the monetary value of an object. A DC 20 Appraise check determines the value of a common item. If you succeed by 5 or more, you also determine if the item has magic properties, although this success does not grant knowledge of the magic item’s abilities. If you fail the check by less than 5, you determine the price of that item to within 20% of its actual value. If you fail this check by 5 or more, the price is wildly inaccurate, subject to GM discretion. Particularly rare or exotic items might increase the DC of this check by 5 or more.\\n\\nYou can also use this check to determine the most valuable item visible in a treasure hoard. The DC of this check is generally 20 but can increase to as high as 30 for a particularly large hoard.\\n\\n<underline>Local and Nobility</underline>: Local includes legends, personalities, inhabitants, laws, customs, traditions, humanoids. Nobility includes lineages, heraldry, personalities, royalty.\\n\\nAnswering a question within your field of study has a DC of 10 (for really easy questions), 15 (for basic questions), or 20 to 30 (for really tough questions).\\n\\nYou can use this skill to identify monsters and their special powers or vulnerabilities. In general, the DC of such a check equals 10 + the monster’s CR. For common monsters, such as goblins, the DC of this check equals 5 + the monster’s CR. For particularly rare monsters, such as the tarrasque, the DC of this check equals 15 + the monster’s CR, or more. A successful check allows you to remember a bit of useful information about that monster. For every 5 points by which your check result exceeds the DC, you recall another piece of useful information. Society can have specific uses as noted on the below table.\\n\\n<table>\\n  <tr>\\n    <th>Tasks</th>\\n    <th>Society DC</th>\\n  </tr>\\n  <tr>\\n    <td>Know Local Laws, Rulers, and Popular Locations</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Know Current Rulers and Their Symbols</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Know a Common Rumor or Local Tradition</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Know Proper Etiquette</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Know Hidden Organizations, Rulers, and Locations</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Know Line of Succession</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Monster's Abilities and Weaknesses</td>\\n    <td>10 + Monster's CR</td>\\n  </tr>\\n</table>\",\r\n// id: 41,\r\n// untrained: true,\r\n// customizable: false,\r\n// knowledge: true,\r\n// blurb: \"This skill is from the Pathfinder Unchained material, and represent a combination of the skills Appraise, Knowledge (local), and Knowledge (nobility). The text below outlines a consolidation of those skills' features with minimal edits.\",\r\n// action: \"<underline>Appraise</underline>: Appraising an item takes 1 standard action. Determining the most valuable object in a treasure hoard takes 1 full-round action.\\n\\n<underline>Local and Nobility</underline>: Usually none. In most cases, a Society check doesn’t take an action.\",\r\n// try_again: \"<underline>Appraise</underline>: Additional attempts to Appraise an item reveal the same result.\\n\\n<underline>Local and Nobility</underline>: No. The check represents what you know, and thinking about a topic a second time doesn’t let you know something that you never learned in the first place.\",\r\n// special: \"<underline>Local and Nobility</underline>: You cannot make an untrained Society check with a DC higher than 10. If you have access to an extensive library that covers a specific skill, this limit is removed. The time to make checks using a library, however, increases to 1d4 hours. Particularly complete libraries might even grant a bonus on Nature checks in the fields that they cover.\",\r\n// skill_unlock_5: \"\",\r\n// skill_unlock_10: \"\",\r\n// skill_unlock_15: \"\",\r\n// skill_unlock_20: \"\"\r\n// },\r\n// {\r\n// name: \"Spellcraft\",\r\n// ability_score: \"Intelligence\",\r\n// description: \"<underline>Arcana</underline>: Arcana includes ancient mysteries, magic traditions, arcane symbols, constructs, dragons, magical beasts. Although robots are constructs, Knowledge (arcana) cannot be used to identify robots or their abilities and weaknesses.\\n\\nAnswering a question within your field of study has a DC of 10 (for really easy questions), 15 (for basic questions), or 20 to 30 (for really tough questions).\\n\\nYou can use this skill to identify monsters and their special powers or vulnerabilities. In general, the DC of such a check equals 10 + the monster’s CR. For common monsters, such as goblins, the DC of this check equals 5 + the monster’s CR. For particularly rare monsters, such as the tarrasque, the DC of this check equals 15 + the monster’s CR, or more. A successful check allows you to remember a bit of useful information about that monster. For every 5 points by which your check result exceeds the DC, you recall another piece of useful information. Arcana can have specific uses as noted on the below table.\\n\\n<underline>Spellcraft</underline>: You are skilled at the art of casting spells, identifying magic items, crafting magic items, and identifying spells as they are being cast.\\n\\nSpellcraft is used whenever your knowledge and skill of the technical art of casting a spell or crafting a magic item comes into question. This skill is also used to identify the properties of magic items in your possession through the use of spells such as detect magic and identify. The DC of this check varies depending upon the task at hand.\\n\\n<table>\\n  <tr>\\n    <th>Task</th>\\n    <th>Spellcraft DC</th>\\n  </tr>\\n  <tr>\\n    <td>Identify a Spell as It is Being Cast</td>\\n    <td>15 + Spell Level</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Auras While Using detect magic</td>\\n    <td>15 + Spell Level</td>\\n  </tr>\\n  <tr>\\n    <td>Identify the Properties of a Magic Item using detect magic</td>\\n    <td>15 + Item's Caster Level</td>\\n  </tr>\\n  <tr>\\n    <td>Learn a Spell from a Spellbook or Scroll</td>\\n    <td>15 + Spell Level</td>\\n  </tr>\\n  <tr>\\n    <td>Prepare a Spell from a Borrowed Spellbook</td>\\n    <td>15 + Spell Level</td>\\n  </tr>\\n  <tr>\\n    <td>Decipher a Scroll</td>\\n    <td>20 + Spell Level</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Spell Effect That Is In Place</td>\\n    <td>20 + Spell Level</td>\\n  </tr>\\n  <tr>\\n    <td>Identify Materials Manufactured by Magic</td>\\n    <td>20 + Spell Level</td>\\n  </tr>\\n  <tr>\\n    <td>Identify the Spells Cast Using a Specific Material Component</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Spell That Just Targeted You</td>\\n    <td>25 + Spell Level</td>\\n  </tr>\\n  <tr>\\n    <td>Identify a Monster's Abilities and Weaknesses</td>\\n    <td>Varies</td>\\n    <td>10 + Monster's CR</td>\\n  </tr>\\n  <tr>\\n    <td>Craft a Magic Item</td>\\n    <td>Varies by Item</td>\\n  </tr>\\n</table>\\n\\n<underline>Use Magic Device</underline>: You are skilled at activating magic items, even if you are not otherwise trained in their use.\\n\\nYou can use this skill to read a spell or to activate a magic item. Use Magic Device lets you use a magic item as if you had the spell ability or class features of another class, as if you were a different race, or as if you were of a different alignment.\\n\\nYou make a Use Magic Device check each time you activate a device such as a wand. If you are using the check to emulate an alignment or some other quality in an ongoing manner, you need to make the relevant Use Magic Device check once per hour.\\n\\nYou must consciously choose which requirement to emulate. That is, you must know what you are trying to emulate when you make a Use Magic Device check for that purpose. The DCs for various tasks involving Use Magic Device checks are summarized on the table below.\\n\\n<table>\\n  <tr>\\n    <th>Task</th>\\n    <th>Use Magic Device DC</th>\\n  </tr>\\n  <tr>\\n    <td>Activate Blindly</td>\\n    <td>25</td>\\n  </tr>\\n  <tr>\\n    <td>Use a Scroll</td>\\n    <td>20 + Caster Level</td>\\n  </tr>\\n  <tr>\\n    <td>Use a Wand</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Emulate a Class Feature</td>\\n    <td>20</td>\\n  </tr>\\n  <tr>\\n    <td>Emulate an Ability Score</td>\\n    <td>See Text</td>\\n  </tr>\\n  <tr>\\n    <td>Emulate an Ancestry</td>\\n    <td>25</td>\\n  </tr>\\n  <tr>\\n    <td>Emulate an Alignment</td>\\n    <td>30</td>\\n  </tr>\\n</table>\\n\\nActivate Blindly: Some magic items are activated by special words, thoughts, or actions. You can activate such an item as if you were using the activation word, thought, or action, even when you’re not and even if you don’t know it. You do have to perform some equivalent activity in order to make the check. That is, you must speak, wave the item around, or otherwise attempt to get it to activate. You get a +2 bonus on your Use Magic Device check if you’ve activated the item in question at least once before. If you fail by 9 or less, you can’t activate the device. If you fail by 10 or more, you suffer a mishap. A mishap means that magical energy gets released but doesn’t do what you wanted it to do. The default mishaps are that the item affects the wrong target or that uncontrolled magical energy is released, dealing 2d6 points of damage to you. This mishap is in addition to the chance for a mishap that you normally risk when you cast a spell from a scroll that you could not otherwise cast yourself.\\n\\nEmulate an Ability Score: To cast a spell from a scroll, you need a high score in the appropriate ability (Intelligence for wizard spells, Wisdom for divine spells, or Charisma for sorcerer or bard spells). Your effective ability score (appropriate to the class you’re emulating when you try to cast the spell from the scroll) is your Use Magic Device check result minus 15. If you already have a high enough score in the appropriate ability, you don’t need to make this check.\\n\\nEmulate an Alignment: Some magic items have positive or negative effects based on the user’s alignment. Use Magic Device lets you use these items as if you were of an alignment of your choice. You can emulate only one alignment at a time.\\n\\nEmulate a Class Feature: Sometimes you need to use a class feature to activate a magic item. In this case, your effective level in the emulated class equals your Use Magic Device check result minus 20. This skill does not let you actually use the class feature of another class. It just lets you activate items as if you had that class feature. If the class whose feature you are emulating has an alignment requirement, you must meet it, either honestly or by emulating an appropriate alignment with a separate Use Magic Device check (see above).\\n\\nEmulate an Ancestry: Some magic items work only for members of certain ancestries, or work better for members of those ancestries. You can use such an item as if you were a member of an ancestry of your choice. You can emulate only one ancestry at a time.\\n\\nUse a Scroll: Normally, to cast a spell from a scroll, you must have the scroll’s spell on your class spell list. Use Magic Device allows you to use a scroll as if you had a particular spell on your class spell list. The DC is equal to 20 + the caster level of the spell you are trying to cast from the scroll. In addition, casting a spell from a scroll requires a minimum score (10 + spell level) in the appropriate ability. If you don’t have a sufficient score in that ability, you must emulate the ability score with a separate Use Magic Device check.\\n\\nThis use of the skill also applies to other spell completion magic items.\\n\\nUse a Wand, Staff, or Other Spell Trigger Item: Normally, to use a wand, you must have the wand’s spell on your class spell list. This use of the skill allows you to use a wand as if you had a particular spell on your class spell list. Failing the roll does not expend a charge.\",\r\n// id: 42,\r\n// untrained: true,\r\n// customizable: false,\r\n// knowledge: true,\r\n// blurb: \"This skill is from the Pathfinder Unchained material, and represent a combination of the skills Knowledge (arcana), Spellcraft, and Use Magic Device. The text below outlines a consolidation of those skills' features with minimal edits. All Use Magic Device skillchecks are now based on Intelligence rather than Charisma.\",\r\n// action: \"<underline>Arcana</underline>: Usually none. In most cases, a Knowledge check doesn’t take an action.\\n\\n<underline>Spellcraft</underline>: Identifying a spell as it is being cast requires no action, but you must be able to clearly see the spell as it is being cast, and this incurs the same penalties as a Perception skill check due to distance, poor conditions, and other factors. Learning a spell from a spellbook takes 1 hour per level of the spell (0-level spells take 30 minutes). Preparing a spell from a borrowed spellbook does not add any time to your spell preparation. Making a Spellcraft check to craft a magic item is made as part of the creation process. Attempting to ascertain the properties of a magic item takes 3 rounds per item to be identified and you must be able to thoroughly examine the object.\\n\\n<underline>Use Magic Device</underline>: None. The Use Magic Device check is made as part of the action (if any) required to activate the magic item.\",\r\n// try_again: \"<underline>Arcana</underline>: No. The check represents what you know, and thinking about a topic a second time doesn’t let you know something that you never learned in the first place.\\n\\n<underline>Spellcraft</underline>: You cannot retry checks made to identify a spell. If you fail to learn a spell from a spellbook or scroll, you must wait at least 1 week before you can try again. If you fail to prepare a spell from a borrowed spellbook, you cannot try again until the next day. When using detect magic or identify to learn the properties of magic items, you can only attempt to ascertain the properties of an individual item once per day. Additional attempts reveal the same results.\\n\\n<underline>Use Magic Device</underline>: Yes, but if you ever roll a natural 1 while attempting to activate an item and you fail, then you can’t try to activate that item again for 24 hours.\",\r\n// special: \"<underline>Arcana</underline>: You cannot make an untrained Knowledge check with a DC higher than 10. If you have access to an extensive library that covers a specific skill, this limit is removed. The time to make checks using a library, however, increases to 1d4 hours. Particularly complete libraries might even grant a bonus on Knowledge checks in the fields that they cover.\\n\\n<underline>Spellcraft</underline>: If you are a specialist wizard, you get a +2 bonus on Spellcraft checks made to identify, learn, and prepare spells from your chosen school. Similarly, you take a –5 penalty on similar checks made concerning spells from your opposition schools.\\n\\n<underline>Use Magic Device</underline>: You cannot take 10 with this skill. You can’t aid another on Use Magic Device checks. Only the user of the item may attempt such a check.\",\r\n// skill_unlock_5: \"\",\r\n// skill_unlock_10: \"\",\r\n// skill_unlock_15: \"\",\r\n// skill_unlock_20: \"\"\r\n// },\r\n// {\r\n// name: \"Stealth\",\r\n// ability_score: \"Dexterity\",\r\n// description: \"Your Stealth check is opposed by the Perception check of anyone who might notice you. Creatures that fail to beat your Stealth check are not aware of you and treat you as if you had total concealment. You can move up to half your normal speed and use Stealth at no penalty. When moving at a speed greater than half but less than your normal speed, you take a –5 penalty. It’s impossible to use Stealth while attacking, running, or charging.\\n\\nCreatures gain a bonus or penalty on Stealth checks based on their size: Fine +16, Diminutive +12, Tiny +8, Small +4, Medium +0, Large –4, Huge –8, Gargantuan –12, Colossal –16.\\n\\nIf people are observing you using any of their senses (but typically sight), you can’t use Stealth. Against most creatures, finding cover or concealment allows you to use Stealth. If your observers are momentarily distracted (such as by a Bluff check), you can attempt to use Stealth. While the others turn their attention from you, you can attempt a Stealth check if you can get to an unobserved place of some kind. This check, however, is made at a –10 penalty because you have to move fast.\\n\\nBreaking Stealth: When you start your turn using Stealth, you can leave cover or concealment and remain unobserved as long as you succeed at a Stealth check and end your turn in cover or concealment. Your Stealth immediately ends after you make an attack roll, whether or not the attack is successful (except when sniping as noted below).\\n\\nSniping: If you’ve already successfully used Stealth at least 10 feet from your target, you can make one ranged attack and then immediately use Stealth again. You take a –20 penalty on your Stealth check to maintain your obscured location.\\n\\nCreating a Diversion to Hide: You can use Bluff to allow you to use Stealth. A successful Bluff check opposed by the viewer’s Sense Motive can give you the momentary diversion you need to attempt a Stealth check while people are aware of you.\",\r\n// id: 33,\r\n// untrained: true,\r\n// customizable: false,\r\n// knowledge: false,\r\n// blurb: \"You are skilled at avoiding detection, allowing you to slip past foes or strike from an unseen position. This skill covers hiding and moving silently.\",\r\n// action: \"Usually none. Normally, you make a Stealth check as part of movement, so it doesn’t take a separate action. However, using Stealth immediately after a ranged attack (see Sniping, above) is a move action.\",\r\n// try_again: \"\",\r\n// special: \"If you are invisible, you gain a +40 bonus on Stealth checks if you are immobile, or a +20 bonus on Stealth checks if you’re moving.\\n\\nIf people are observing you using any of their senses (but typically sight), you can’t use Stealth. Against most creatures, finding cover or concealment allows you to use Stealth. If your observers are momentarily distracted (such as by a Bluff check), you can attempt to use Stealth. While the others turn their attention from you, you can attempt a Stealth check if you can get to an unobserved place of some kind. This check, however, is made at a –10 penalty because you have to move fast.\",\r\n// skill_unlock_5: \"Reduce the Stealth penalty from sniping by 10.\",\r\n// skill_unlock_10: \"Stealth check penalties for moving quickly are halved, including the ability unlocked at 5 ranks, moving full speed, and reaching concealment after creating a distraction.\",\r\n// skill_unlock_15: \"If you attack after successfully using Stealth, your target is denied its Dexterity bonus against all attacks that you make before the end of your turn.\",\r\n// skill_unlock_20: \"If you attack after successfully using Stealth, your target is denied its Dexterity bonus against all attacks that you make before the beginning of your next turn.\"\r\n// },\r\n// {\r\n// name: \"Survival\",\r\n// ability_score: \"Wisdom\",\r\n// description: \"You can keep yourself and others safe and fed in the wild. See below for DCs for various tasks that require Survival checks.\\n\\n<table>\\n  <tr>\\n    <th>Task</th>\\n    <th>Survival DC</th>\\n  </tr>\\n  <tr>\\n    <td>Get along in the wild. Move up to half your overland speed while hunting and foraging (no food or water supplies needed). You can provide food and water for one other person for every 2 points by which your check result exceeds 10.</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Gain a +2 bonus on all Fortitude saves against severe weather while moving up to half your overland speed, or gain a +4 bonus if you remain stationary. You may grant the same bonus to one other character for every 1 point by which your Survival check result exceeds 15.</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Keep from getting lost or avoid natural hazards, such as quicksand.</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Predict the weather up to 24 hours in advance. For every 5 points by which your Survival check result exceeds 15, you can predict the weather for one additional day in advance.</td>\\n    <td>15</td>\\n  </tr>\\n</table>\\n\\nTo find tracks or to follow them for 1 mile requires a successful Survival check. You must make another Survival check every time the tracks become difficult to follow. If you are not trained in this skill, you can make untrained checks to find tracks, but you can follow them only if the DC for the task is 10 or lower. Alternatively, you can use the Perception skill to find a footprint or similar sign of a creature’s passage using the same DCs, but you can’t use Perception to follow tracks, even if someone else has already found them.\\n\\nYou move at half your normal speed while following tracks (or at your normal speed with a –5 penalty on the check, or at up to twice your normal speed with a –20 penalty on the check). The DC depends on the surface and the prevailing conditions, as given on table.\\n\\n<table>\\n  <tr>\\n    <th>Surface</th>\\n    <th>Survival DC</th>\\n  </tr>\\n  <tr>\\n    <td>Very Soft Ground</td>\\n    <td>5</td>\\n  </tr>\\n  <tr>\\n    <td>Soft Ground</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Firm Ground</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Hard Ground</td>\\n    <td>20</td>\\n  </tr>\\n</table>\\n\\nVery Soft Ground: Any surface (fresh snow, thick dust, wet mud) that holds deep, clear impressions of footprints.\\nSoft Ground: Any surface soft enough to yield to pressure, but firmer than wet mud or fresh snow, in which a creature leaves frequent but shallow footprints.\\nFirm Ground: Most normal outdoor surfaces (such as lawns, fields, woods, and the like) or exceptionally soft or dirty indoor surfaces (thick rugs and very dirty or dusty floors). The creature might leave some traces (broken branches or tufts of hair), but it leaves only occasional or partial footprints.\\nHard Ground: Any surface that doesn’t hold footprints at all, such as bare rock or an indoor floor. Most streambeds fall into this category, since any footprints left behind are obscured or washed away. The creature leaves only traces (scuff marks or displaced pebbles).\\n\\n<table>\\n  <tr>\\n    <th>Condition</th>\\n    <th>Survival DC Modifier</th>\\n  </tr>\\n  <tr>\\n    <td>Every Three Creatures in the Group Being Tracked</td>\\n    <td>-1</td>\\n  </tr>\\n  <tr>\\n    <td>Size of the Largest Creature Being Tracked</td>\\n    <td></td>\\n  </tr>\\n  <tr>\\n    <td>  Fine</td>\\n    <td>+8</td>\\n  </tr>\\n  <tr>\\n    <td>  Diminutive</td>\\n    <td>+4</td>\\n  </tr>\\n  <tr>\\n    <td>  Tiny</td>\\n    <td>+2</td>\\n  </tr>\\n  <tr>\\n    <td>  Small</td>\\n    <td>+1</td>\\n  </tr>\\n  <tr>\\n    <td>  Medium</td>\\n    <td>+0</td>\\n  </tr>\\n  <tr>\\n    <td>  Large</td>\\n    <td>-1</td>\\n  </tr>\\n  <tr>\\n    <td>  Huge</td>\\n    <td>-2</td>\\n  </tr>\\n  <tr>\\n    <td>  Gargantuan</td>\\n    <td>-4</td>\\n  </tr>\\n  <tr>\\n    <td>  Colossal</td>\\n    <td>-8</td>\\n  </tr>\\n  <tr>\\n    <td>Every 24 Hours Since the Trail was Made</td>\\n    <td>+1</td>\\n  </tr>\\n  <tr>\\n    <td>Every Hour of Rain Since the Trail was Made</td>\\n    <td>+1</td>\\n  </tr>\\n  <tr>\\n    <td>Fresh Snow Since the Trail was Made</td>\\n    <td>+10</td>\\n  </tr>\\n  <tr>\\n    <td>Poor Vibility</td>\\n    <td></td>\\n  </tr>\\n  <tr>\\n    <td>  Overcast or Moonless Night</td>\\n    <td>+6</td>\\n  </tr>\\n  <tr>\\n    <td>  Moonlight</td>\\n    <td>+3</td>\\n  </tr>\\n  <tr>\\n    <td>  Fog or Precipitation</td>\\n    <td>+3</td>\\n  </tr>\\n  <tr>\\n    <td>Tracked Party Hides Trail (and Moves at Half Speed)</td>\\n    <td>+5</td>\\n  </tr>\\n</table>\",\r\n// id: 34,\r\n// untrained: true,\r\n// customizable: false,\r\n// knowledge: false,\r\n// blurb: \"You are skilled at surviving in the wild and at navigating in the wilderness. You also excel at following trails and tracks left by others.\",\r\n// action: \"Varies. A single Survival check may represent activity over the course of hours or a full day. A Survival check made to find tracks is at least a full-round action, and it may take even longer.\",\r\n// try_again: \"Varies. For getting along in the wild or for gaining the Fortitude save bonus noted in the first table on page 107, you make a Survival check once every 24 hours. The result of that check applies until the next check is made. To avoid getting lost or avoid natural hazards, you make a Survival check whenever the situation calls for one. Retries to avoid getting lost in a specific situation or to avoid a specific natural hazard are not allowed. For finding tracks, you can retry a failed check after 1 hour (outdoors) or 10 minutes (indoors) of searching.\",\r\n// special: \"If you are trained in Survival, you can automatically determine where true north lies in relation to yourself.\",\r\n// skill_unlock_5: \"You reduce all nonlethal damage you take from heat, cold, starvation, or thirst by 1 point for every 5 ranks you possess in Survival.\",\r\n// skill_unlock_10: \"You can track creatures that leave no tracks, including flying and swimming creatures and creatures using trackless step or pass without trace, taking a –20 penalty on your Survival check.\",\r\n// skill_unlock_15: \"Once per day, you can spend 1 hour and attempt a DC 30 Survival check. Success grants you cold resistance or fire resistance 5 for 24 hours. You can share this with one ally for every 5 by which you exceeded the check.\",\r\n// skill_unlock_20: \"You take only a –10 penalty when tracking creatures that leave no tracks.\"\r\n// },\r\n// {\r\n// name: \"Swim\",\r\n// ability_score: \"Strength\",\r\n// description: \"Make a Swim check once per round while you\\nare in the water. Success means you may swim at up to half your speed (as a full-round action) or at a quarter of your speed (as a move action). If you fail by 4 or less, you make no progress. If you fail by 5 or more, you go underwater.\\n\\nIf you are underwater, either because you failed a Swim check or because you are swimming underwater intentionally, you must hold your breath. You can hold your breath for a number of rounds equal to twice your Constitution score, but only if you do nothing other than take move actions or free actions. If you take a standard action or a full-round action (such as making an attack), the remainder of the duration for which you can hold your breath is reduced by 1 round. (Effectively, a character in combat can hold his breath only half as long as normal.) After that period of time, you must make a DC 10 Constitution check every round to continue holding your breath. Each round, the DC for that check increases by 1. If you fail the Constitution check, you begin to drown. The DC for the Swim check depends on the water, as given on the table below.\\n\\n<table>\\n  <tr>\\n    <th>Water</th>\\n    <th>Swim DC</th>\\n  </tr>\\n  <tr>\\n    <td>Calm Water</td>\\n    <td>10</td>\\n  </tr>\\n  <tr>\\n    <td>Rough Water</td>\\n    <td>15</td>\\n  </tr>\\n  <tr>\\n    <td>Stormy Water</td>\\n    <td>20</td>\\n  </tr>\\n</table>\\n\\nEach hour that you swim, you must make a DC 20 Swim check or take 1d6 points of nonlethal damage from fatigue.\",\r\n// id: 35,\r\n// untrained: true,\r\n// customizable: false,\r\n// knowledge: false,\r\n// blurb: \"You know how to swim and can do so even in stormy water.\",\r\n// action: \"A successful Swim check allows you to swim a quarter of your speed as a move action or half your speed as a full-round action.\",\r\n// try_again: \"\",\r\n// special: \"A creature with a swim speed can move through water at its indicated speed without making Swim checks. It gains a +8 racial bonus on any Swim check to perform a special action or avoid a hazard. The creature can always choose to take 10 on a Swim check, even if distracted or endangered when swimming. Such a creature can use the run action while swimming, provided that it swims in a straight line.\\n\\nYou can’t take 10 on a Swim check in stormy water, even if you aren’t otherwise being threatened or distracted.\\n\\nAny creature of Tiny or smaller size should use its Dex modifier instead of its Str modifier for Climb and Swim checks.\",\r\n// skill_unlock_5: \"You gain a swim speed of 10 feet, but only in water with a Swim DC of 15 or lower.\",\r\n// skill_unlock_10: \"You gain a swim speed (though you do not gain the +8 racial bonus on Swim checks) equal to your base speed in water with a Swim DC of 15 or lower, or 10 feet in all other water.\",\r\n// skill_unlock_15: \"You ignore the penalties for using slashing or bludgeoning weapons underwater, as freedom of movement.\",\r\n// skill_unlock_20: \"You gain a swim speed equal to your base speed in all water. If you have both hands free, you gain a +8 racial bonus on Swim checks.\"\r\n// }\r\n// ]\r\n// },\r\n// \"character_klass_feature_usages\": [],\r\n// \"character_known_spells\": [],\r\n// \"klass_specializations\": [\r\n// {\r\n// id: 8,\r\n// name: \"Fire\",\r\n// \"klass_feature\": {\r\n// id: 123,\r\n// klass_id: 15,\r\n// name: \"Elemental Focus\",\r\n// description: \"At 1st level, a kineticist chooses one primary element on which to focus. This element determines how she accesses the raw power of the Ethereal Plane, and grants her access to specific wild talents (see below) and additional class skills. She gains her selected element’s basic utility wild talent (basic telekinesis, basic aerokinesis, etc.) as a bonus wild talent.\",\r\n// created_at: \"2021-01-02T15:58:19.288Z\",\r\n// updated_at: \"2021-01-02T15:58:19.288Z\",\r\n// specialization: true,\r\n// choice_amount: 1,\r\n// base_klass_feature_id: null,\r\n// has_klass_feature_options: null\r\n// },\r\n// \"klass_specialization_features\": [],\r\n// \"character_klass_specialization_id\": 2\r\n// }\r\n// ],\r\n// \"cast_spells\": [],\r\n// \"character_choices\": [],\r\n// \"character_klass_specialization_feature_usages\": [],\r\n// \"pp\": null,\r\n// \"gp\": null,\r\n// \"sp\": null,\r\n// \"cp\": null,\r\n// \"archetypes\": [],\r\n// alternate_racial_traits: [\r\n// {\r\n// name: \"Grapevine\",\r\n// description: \"A vine leshy made from a grapevine can produce magically infused fruit that can heal her allies. She can cast goodberry once per day as a spell-like ability, with a caster level equal to her character level. This replaces pass without trace.\",\r\n// source: {\r\n// id: 14,\r\n// title: \"Ultimate Wilderness\",\r\n// abbreviation: \"UW\",\r\n// code: \"PZO1140\"\r\n// },\r\n// \"alternate_trait_replace_racial_traits\": [\r\n// {\r\n// id: 4,\r\n// alternate_racial_trait_id: 3,\r\n// racial_trait_id: 47\r\n// }\r\n// ],\r\n// associated_spells: [\r\n// {\r\n// id: 219,\r\n// name: \"Goodberry\",\r\n// description: \"Casting goodberry makes 2d4 freshly picked berries magical. You (as well as any other druid of 3rd or higher level) can immediately discern which berries are affected. Each transmuted berry provides nourishment as if it were a normal meal for a Medium creature. The berry also cures 1 point of damage when eaten, subject to a maximum of 8 points of such curing in any 24-hour period.\",\r\n// target: \"2d4 fresh berries touched\",\r\n// saving_throw: \"none\",\r\n// spell_resistance: false,\r\n// magic_school_id: 8,\r\n// action_id: 1,\r\n// duration: \"1 day/level\",\r\n// time: 1,\r\n// unit_of_time: \"day\",\r\n// increase_per_level: 1,\r\n// dismissible: false,\r\n// concentration: false,\r\n// spell_range_id: 2,\r\n// source_id: null\r\n// }\r\n// ]\r\n// },\r\n// {\r\n// name: \"Swamp Leshy\",\r\n// description: \"Some vine leshys are made from plants that naturally grow in swamps. These leshys gain a +2 racial bonus on Swim checks and a +4 racial bonus on Stealth checks in swamps. This replaces climber and alters unassuming foliage.\",\r\n// source: {\r\n// id: 14,\r\n// title: \"Ultimate Wilderness\",\r\n// abbreviation: \"UW\",\r\n// code: \"PZO1140\"\r\n// },\r\n// \"alternate_trait_replace_racial_traits\": [\r\n// {\r\n// id: 5,\r\n// alternate_racial_trait_id: 4,\r\n// racial_trait_id: 51\r\n// },\r\n// {\r\n// id: 6,\r\n// alternate_racial_trait_id: 4,\r\n// racial_trait_id: 50\r\n// }\r\n// ],\r\n// associated_spells: []\r\n// }\r\n// ],\r\n// \"klass_feature_options\": [],\r\n// \"items\": [\r\n// {\r\n// id: 3,\r\n// name: \"Cup\",\r\n// \"category\": \"mundane gear\",\r\n// description: \"A common cup, carved of wood.\",\r\n// \"weight\": 0,\r\n// \"price_in_gp\": 0.01,\r\n// \"craft_skill\": null,\r\n// \"craft_dc\": null\r\n// },\r\n// {\r\n// id: 2,\r\n// name: \"Masterwork Backpack\",\r\n// \"category\": \"adventuring gear\",\r\n// description: \"This backpack has numerous pockets for storing items that might be needed while adventuring. Hooks are included for attaching items such as canteens, pouches, or even a rolled-up blanket. It has padded bands that strap across the chest and the waist to distribute its weight more evenly. Like a common backpack, it can hold about 2 cubic feet of material in its main container. When wearing a masterwork backpack, treat your Strength score as +1 higher than normal when calculating your carrying capacity.\",\r\n// \"weight\": 4,\r\n// \"price_in_gp\": 50,\r\n// \"craft_skill\": null,\r\n// \"craft_dc\": null\r\n// },\r\n// {\r\n// id: 8,\r\n// name: \"Bowl\",\r\n// \"category\": \"mundane gear\",\r\n// description: \"A cheap ceramic bowl.\",\r\n// \"weight\": 0,\r\n// \"price_in_gp\": 0.1,\r\n// \"craft_skill\": null,\r\n// \"craft_dc\": null\r\n// },\r\n// {\r\n// id: 7,\r\n// name: \"Plate\",\r\n// \"category\": \"mundane gear\",\r\n// description: \"A carved wooden plate.\",\r\n// \"weight\": 0,\r\n// \"price_in_gp\": 0.1,\r\n// \"craft_skill\": null,\r\n// \"craft_dc\": null\r\n// },\r\n// {\r\n// id: 6,\r\n// name: \"Knife\",\r\n// \"category\": \"mundane gear\",\r\n// description: \"A simple metal knife with no sharp edge.\",\r\n// \"weight\": 0,\r\n// \"price_in_gp\": 0.01,\r\n// \"craft_skill\": null,\r\n// \"craft_dc\": null\r\n// },\r\n// {\r\n// id: 5,\r\n// name: \"Fork\",\r\n// \"category\": \"mundane gear\",\r\n// description: \"A simple wooden fork.\",\r\n// \"weight\": 0,\r\n// \"price_in_gp\": 0.01,\r\n// \"craft_skill\": null,\r\n// \"craft_dc\": null\r\n// },\r\n// {\r\n// id: 4,\r\n// name: \"Spoon\",\r\n// \"category\": \"mundane gear\",\r\n// description: \"A simple wooden spoon.\",\r\n// \"weight\": 0,\r\n// \"price_in_gp\": 0.01,\r\n// \"craft_skill\": null,\r\n// \"craft_dc\": null\r\n// },\r\n// {\r\n// id: 9,\r\n// name: \"Garbage Mat\",\r\n// \"category\": \"mundane gear\",\r\n// description: \"A placemat made of refuse.\",\r\n// \"weight\": 0,\r\n// \"price_in_gp\": 0,\r\n// \"craft_skill\": null,\r\n// \"craft_dc\": null\r\n// },\r\n// {\r\n// id: 10,\r\n// name: \"Olive Oil\",\r\n// \"category\": \"food and drink\",\r\n// description: \"Tall, narrow, ceramic container of olive oil.\",\r\n// \"weight\": 1,\r\n// \"price_in_gp\": 5,\r\n// \"craft_skill\": null,\r\n// \"craft_dc\": null\r\n// },\r\n// {\r\n// id: 11,\r\n// name: \"Common Pot\",\r\n// \"category\": \"adventuring gear\",\r\n// description: \"This 8-inch diameter iron pot is sturdy and has feet, a lid, and a rounded handle. It can hold enough stew to feed one hungry human for one meal.\",\r\n// \"weight\": 4,\r\n// \"price_in_gp\": 0.8,\r\n// \"craft_skill\": null,\r\n// \"craft_dc\": null\r\n// },\r\n// {\r\n// id: 50,\r\n// name: \"Golgari Insignia Charm\",\r\n// \"category\": \"clothing, outfits, accessories\",\r\n// description: \"A Charm with the Golgari Insignia. Proof of your membership to the Golgari Swarm\",\r\n// \"weight\": 0,\r\n// \"price_in_gp\": 10,\r\n// \"craft_skill\": null,\r\n// \"craft_dc\": null\r\n// }\r\n// ],\r\n// \"user\": {\r\n// \"username\": \"clare_voyance\",\r\n// \"avatar\": null,\r\n// \"bio\": null,\r\n// id: 10,\r\n// \"admin\": false,\r\n// skillset_id: 3,\r\n// \"characters\": [\r\n// {\r\n// id: 10,\r\n// \"user_id\": 10,\r\n// name: \"Fire-Roasted Tomatoes\",\r\n// \"alignment\": \"\",\r\n// \"deity\": null,\r\n// \"homeland\": null,\r\n// \"gender\": null,\r\n// \"age\": null,\r\n// \"height\": \"2'3\\\"\",\r\n// \"weight\": \"9 lbs\",\r\n// \"hair\": null,\r\n// \"eyes\": null,\r\n// \"strength\": 10,\r\n// \"dexterity\": 12,\r\n// \"constitution\": 14,\r\n// \"intelligence\": 10,\r\n// \"wisdom\": 4,\r\n// \"charisma\": 9,\r\n// description: \"\",\r\n// \"background\": null,\r\n// created_at: \"2021-01-02T15:58:45.041Z\",\r\n// updated_at: \"2021-01-02T16:27:35.762Z\",\r\n// race_id: 8,\r\n// \"any_bonus\": null,\r\n// skillset_id: 3,\r\n// \"lethal_damage\": 0,\r\n// \"non_lethal_damage\": 0,\r\n// \"temp_hp\": 0,\r\n// \"is_done_preparing_spells\": false,\r\n// \"full_name\": null,\r\n// \"campaign_id\": 3,\r\n// \"max_hp\": 21,\r\n// \"pp\": null,\r\n// \"gp\": null,\r\n// \"sp\": null,\r\n// \"cp\": null\r\n// }\r\n// ]\r\n// },\r\n// \"prepared_spells\": [],\r\n// \"campaign\": {\r\n// id: 3,\r\n// name: \"Ravnica\",\r\n// \"starting_weekday\": null,\r\n// \"starting_month\": null,\r\n// \"starting_day\": null,\r\n// \"starting_age\": null,\r\n// \"starting_year\": null,\r\n// \"current_weekday\": null,\r\n// \"current_month\": null,\r\n// \"current_day\": null,\r\n// \"current_age\": null,\r\n// \"current_year\": null,\r\n// \"characters\": [\r\n// {\r\n// id: 13,\r\n// name: \"Natesse\",\r\n// \"character_magic_items\": [\r\n// {\r\n// id: 2,\r\n// \"magic_item\": {\r\n// id: 1,\r\n// name: \"Traveler's Any-Tool\",\r\n// description: \"This implement at first seems to be nothing but a 12-inch iron bar lined with small plates and spikes. It can be folded, twisted, hinged, and bent, to form almost any known tool. Hammers, shovels, even a block and tackle (without rope) are possible. It can duplicate any tool the wielder can clearly visualize that contains only limited moving parts, such as a pair of scissors, but not a handloom. It cannot be used to replace missing or broken parts of machines or vehicles unless a mundane tool would have done the job just as well.\\n\\nThe any-tool counts as a set of masterwork artisan’s tools for most Craft or Profession skills (although very specialist crafts such as alchemy still require their own unique toolset). It is an ineffective weapon, always counting as an improvised weapon and never granting any masterwork bonus on attack rolls.\",\r\n// \"slot\": \"none\",\r\n// \"aura\": \"moderate transmutation\",\r\n// \"caster_level\": 9,\r\n// \"price_in_gp\": 250,\r\n// \"weight\": 2,\r\n// \"activatable\": false,\r\n// \"expendable\": false,\r\n// \"group\": \"Wondrous Item\",\r\n// \"features\": []\r\n// },\r\n// \"discovered\": true,\r\n// \"character_magic_item_feature_usages\": [],\r\n// \"known\": true,\r\n// \"equipped\": false,\r\n// \"false_desc\": null,\r\n// \"stored_character_magic_item\": null,\r\n// \"container\": null,\r\n// \"character_magic_item_feature_usage_options\": []\r\n// }\r\n// ],\r\n// \"character_klasses\": [\r\n// {\r\n// id: 46,\r\n// \"character_id\": 13,\r\n// klass_id: 16,\r\n// created_at: \"2021-01-02T15:58:46.499Z\",\r\n// updated_at: \"2021-01-02T15:58:46.499Z\",\r\n// \"hp\": 8,\r\n// \"feat_id\": 1,\r\n// \"ability_score_improvement\": null,\r\n// \"level\": 1,\r\n// \"favored_klass_bonus_id\": null\r\n// },\r\n// {\r\n// id: 47,\r\n// \"character_id\": 13,\r\n// klass_id: 16,\r\n// created_at: \"2021-01-02T15:58:46.509Z\",\r\n// updated_at: \"2021-01-02T15:58:46.509Z\",\r\n// \"hp\": 2,\r\n// \"feat_id\": null,\r\n// \"ability_score_improvement\": null,\r\n// \"level\": 2,\r\n// \"favored_klass_bonus_id\": null\r\n// }\r\n// ]\r\n// },\r\n// {\r\n// id: 9,\r\n// name: \"Majestik\",\r\n// \"character_magic_items\": [\r\n// {\r\n// id: 1,\r\n// \"magic_item\": {\r\n// id: 2,\r\n// name: \"Hand of the Mage\",\r\n// description: \"This mummified elf hand hangs by a golden chain around a character’s neck (taking up space as a magic necklace would).\\n\\nIt allows the wearer to utilize the spell mage hand at will.\",\r\n// \"slot\": \"neck\",\r\n// \"aura\": \"faint transmutation\",\r\n// \"caster_level\": 2,\r\n// \"price_in_gp\": 900,\r\n// \"weight\": 2,\r\n// \"activatable\": false,\r\n// \"expendable\": false,\r\n// \"group\": \"Wondrous Item\",\r\n// \"features\": []\r\n// },\r\n// \"discovered\": true,\r\n// \"character_magic_item_feature_usages\": [],\r\n// \"known\": true,\r\n// \"equipped\": false,\r\n// \"false_desc\": null,\r\n// \"stored_character_magic_item\": null,\r\n// \"container\": null,\r\n// \"character_magic_item_feature_usage_options\": []\r\n// }\r\n// ],\r\n// \"character_klasses\": [\r\n// {\r\n// id: 38,\r\n// \"character_id\": 9,\r\n// klass_id: 21,\r\n// created_at: \"2021-01-02T15:58:44.004Z\",\r\n// updated_at: \"2021-01-02T15:58:44.004Z\",\r\n// \"hp\": 6,\r\n// \"feat_id\": 4,\r\n// \"ability_score_improvement\": null,\r\n// \"level\": 1,\r\n// \"favored_klass_bonus_id\": null\r\n// },\r\n// {\r\n// id: 39,\r\n// \"character_id\": 9,\r\n// klass_id: 21,\r\n// created_at: \"2021-01-02T15:58:44.072Z\",\r\n// updated_at: \"2021-01-02T15:58:44.072Z\",\r\n// \"hp\": 6,\r\n// \"feat_id\": null,\r\n// \"ability_score_improvement\": null,\r\n// \"level\": 2,\r\n// \"favored_klass_bonus_id\": null\r\n// }\r\n// ]\r\n// },\r\n// {\r\n// id: 11,\r\n// name: \"Iyugi\",\r\n// \"character_magic_items\": [],\r\n// \"character_klasses\": [\r\n// {\r\n// id: 42,\r\n// \"character_id\": 11,\r\n// klass_id: 20,\r\n// created_at: \"2021-01-02T15:58:45.313Z\",\r\n// updated_at: \"2021-01-02T15:58:45.313Z\",\r\n// \"hp\": 8,\r\n// \"feat_id\": 5,\r\n// \"ability_score_improvement\": null,\r\n// \"level\": 1,\r\n// \"favored_klass_bonus_id\": null\r\n// },\r\n// {\r\n// id: 43,\r\n// \"character_id\": 11,\r\n// klass_id: 20,\r\n// created_at: \"2021-01-02T15:58:45.320Z\",\r\n// updated_at: \"2021-01-02T15:58:45.320Z\",\r\n// \"hp\": 6,\r\n// \"feat_id\": null,\r\n// \"ability_score_improvement\": null,\r\n// \"level\": 2,\r\n// \"favored_klass_bonus_id\": null\r\n// }\r\n// ]\r\n// },\r\n// {\r\n// id: 14,\r\n// name: \"Dz'eyn\",\r\n// \"character_magic_items\": [],\r\n// \"character_klasses\": [\r\n// {\r\n// id: 48,\r\n// \"character_id\": 14,\r\n// klass_id: 18,\r\n// created_at: \"2021-01-02T15:58:47.207Z\",\r\n// updated_at: \"2021-01-02T15:58:47.207Z\",\r\n// \"hp\": 10,\r\n// \"feat_id\": 6,\r\n// \"ability_score_improvement\": null,\r\n// \"level\": 1,\r\n// \"favored_klass_bonus_id\": null\r\n// },\r\n// {\r\n// id: 49,\r\n// \"character_id\": 14,\r\n// klass_id: 18,\r\n// created_at: \"2021-01-02T15:58:47.215Z\",\r\n// updated_at: \"2021-01-02T15:58:47.215Z\",\r\n// \"hp\": 4,\r\n// \"feat_id\": null,\r\n// \"ability_score_improvement\": null,\r\n// \"level\": 2,\r\n// \"favored_klass_bonus_id\": null\r\n// }\r\n// ]\r\n// },\r\n// {\r\n// id: 10,\r\n// name: \"Fire-Roasted Tomatoes\",\r\n// \"character_magic_items\": [],\r\n// \"character_klasses\": [\r\n// {\r\n// id: 40,\r\n// \"character_id\": 10,\r\n// klass_id: 15,\r\n// created_at: \"2021-01-02T15:58:45.070Z\",\r\n// updated_at: \"2021-01-02T15:58:45.070Z\",\r\n// \"hp\": 8,\r\n// \"feat_id\": null,\r\n// \"ability_score_improvement\": null,\r\n// \"level\": 1,\r\n// \"favored_klass_bonus_id\": null\r\n// },\r\n// {\r\n// id: 41,\r\n// \"character_id\": 10,\r\n// klass_id: 15,\r\n// created_at: \"2021-01-02T15:58:45.086Z\",\r\n// updated_at: \"2021-01-02T15:58:45.086Z\",\r\n// \"hp\": 7,\r\n// \"feat_id\": null,\r\n// \"ability_score_improvement\": null,\r\n// \"level\": 2,\r\n// \"favored_klass_bonus_id\": null\r\n// }\r\n// ]\r\n// },\r\n// {\r\n// id: 12,\r\n// name: \"Ildre\",\r\n// \"character_magic_items\": [],\r\n// \"character_klasses\": [\r\n// {\r\n// id: 44,\r\n// \"character_id\": 12,\r\n// klass_id: 13,\r\n// created_at: \"2021-01-02T15:58:45.688Z\",\r\n// updated_at: \"2021-01-02T15:58:45.688Z\",\r\n// \"hp\": 6,\r\n// \"feat_id\": null,\r\n// \"ability_score_improvement\": null,\r\n// \"level\": 1,\r\n// \"favored_klass_bonus_id\": null\r\n// },\r\n// {\r\n// id: 45,\r\n// \"character_id\": 12,\r\n// klass_id: 13,\r\n// created_at: \"2021-01-02T15:58:45.700Z\",\r\n// updated_at: \"2021-01-02T15:58:45.700Z\",\r\n// \"hp\": 3,\r\n// \"feat_id\": null,\r\n// \"ability_score_improvement\": null,\r\n// \"level\": 2,\r\n// \"favored_klass_bonus_id\": null\r\n// }\r\n// ]\r\n// }\r\n// ],\r\n// \"calendar\": {\r\n// id: 2,\r\n// name: \"Oum Calendar\",\r\n// \"leap_year\": false\r\n// },\r\n// \"theme\": \"Espionage, social intrigue.\\u000b\\u000b There will combat, because that's the escapism we are here for, but I would love have just as much intrigue as combat. Whether that's finding out secrets at an exclusive party you snuck into, hiding behind a wall to catch your enemy in their bedroom, or planting evidence while you are currying favor with a warlord.\\n\\nYou are going to be a scrappy band of ne'er-do-wells, who are doing jobs for their sake or at the behest of others, where you may very well be underleveled or outmanned in a room. Cleverness, wit, and knowing when to run will be a good part of this one/two/three shot / campaign.\",\r\n// \"setting\": \"Ravnica: City of Guilds\\n\\n10,000 years ago, a Guildpact was signed that prevented the ten guilds of Ravnica from warring each other to prevent the plane from being destroyed and consumed. The Pact outlined the roles that each guild was to have within the city. However, the guilds continue to be at odds with each other due to their base differences.\",\r\n// \"starting_level\": 2,\r\n// \"skillset\": {\r\n// id: 3,\r\n// name: \"Ravnica Custom\"\r\n// },\r\n// \"custom_notes\": \"Select a guild to be a part of. You automatically have proficiency with Knowledge checks for that guild, but you will have to put ranks into that skill in order to reflect your proficiency.\",\r\n// \"races\": [],\r\n// \"klasses\": [],\r\n// \"websocket_code\": \"50388cf0-2f41-0139-aaf1-24d18cefbb5e\",\r\n// \"encounters\": []\r\n// },\r\n// \"character_weapons\": [\r\n// {\r\n// id: 10,\r\n// name: \"\",\r\n// description: null,\r\n// \"masterwork\": true,\r\n// \"discovered\": true,\r\n// \"known\": true,\r\n// \"equipped\": null,\r\n// \"weapon\": {\r\n// id: 78,\r\n// name: \"Traveling Kettle\",\r\n// \"category\": \"Light\",\r\n// proficiency: \"Simple\",\r\n// \"weapon_type\": \"Melee\",\r\n// \"price_in_gp\": 5,\r\n// \"damage_dice\": 6,\r\n// \"num_of_dice\": 1,\r\n// \"critical\": 2,\r\n// \"critical_range\": 20,\r\n// \"range\": 0,\r\n// \"thrown\": 0,\r\n// \"weight\": 2,\r\n// \"damage_type\": \"Bludgeoning\",\r\n// description: \"These small tea kettles are made with clamping lids and heavily reinforced handles, allowing them to be swung like a club. A traveling kettle with boiling water inside deals an additional 1 point of fire damage on a hit. Boiling water cools to a non-damaging temperature after 5 minutes.\",\r\n// \"double_weapon\": null,\r\n// \"double_num_of_dice\": 0,\r\n// \"double_damage_dice\": 0,\r\n// \"double_damage_type\": null,\r\n// \"ammunition\": false,\r\n// \"ammunition_type\": null,\r\n// source: {\r\n// id: 1,\r\n// title: \"Core Rulebook\",\r\n// abbreviation: \"CR\",\r\n// code: \"PZO1110\"\r\n// },\r\n// \"weapon_qualities\": [\r\n// {\r\n// id: 3,\r\n// name: \"monk\",\r\n// description: \"A monk weapon can be used by a monk to perform a flurry of blows.\"\r\n// }\r\n// ],\r\n// \"weapon_groups\": [\r\n// {\r\n// id: 8,\r\n// name: \"Monk\"\r\n// }\r\n// ],\r\n// \"weapon_hands\": [\r\n// {\r\n// id: 24,\r\n// \"weapon_id\": 78,\r\n// \"hands\": \"One\",\r\n// bonus: null\r\n// }\r\n// ],\r\n// \"attack_type\": null,\r\n// \"features\": []\r\n// },\r\n// \"magazine\": null,\r\n// \"ammunition_amount\": null,\r\n// \"character_weapon_ammunition_id\": null,\r\n// \"improvised_ammunition\": false\r\n// },\r\n// {\r\n// id: 11,\r\n// name: \"Chef's Knife\",\r\n// description: \"Decently sharp, single-edged knife. Used primarily for preparing meals.\",\r\n// \"masterwork\": false,\r\n// \"discovered\": true,\r\n// \"known\": true,\r\n// \"equipped\": null,\r\n// \"weapon\": {\r\n// id: 3,\r\n// name: \"Dagger\",\r\n// \"category\": \"Light\",\r\n// proficiency: \"Simple\",\r\n// \"weapon_type\": \"Melee\",\r\n// \"price_in_gp\": 2,\r\n// \"damage_dice\": 4,\r\n// \"num_of_dice\": 1,\r\n// \"critical\": 2,\r\n// \"critical_range\": 19,\r\n// \"range\": 10,\r\n// \"thrown\": 1,\r\n// \"weight\": 1,\r\n// \"damage_type\": \"Piercing or Slashing\",\r\n// description: \"A dagger has a blade that is about 1 foot in length.\\n\\nYou get a +2 bonus on Sleight of Hand skill checks made to conceal a dagger on your body.\",\r\n// \"double_weapon\": null,\r\n// \"double_num_of_dice\": 0,\r\n// \"double_damage_dice\": 0,\r\n// \"double_damage_type\": null,\r\n// \"ammunition\": false,\r\n// \"ammunition_type\": null,\r\n// source: {\r\n// id: 1,\r\n// title: \"Core Rulebook\",\r\n// abbreviation: \"CR\",\r\n// code: \"PZO1110\"\r\n// },\r\n// \"weapon_qualities\": [],\r\n// \"weapon_groups\": [\r\n// {\r\n// id: 7,\r\n// name: \"Light Blades\"\r\n// },\r\n// {\r\n// id: 10,\r\n// name: \"Thrown\"\r\n// },\r\n// {\r\n// id: 11,\r\n// name: \"Tribal\"\r\n// }\r\n// ],\r\n// \"weapon_hands\": [],\r\n// \"attack_type\": null,\r\n// \"features\": []\r\n// },\r\n// \"magazine\": null,\r\n// \"ammunition_amount\": null,\r\n// \"character_weapon_ammunition_id\": null,\r\n// \"improvised_ammunition\": false\r\n// },\r\n// {\r\n// id: 27,\r\n// name: \"\",\r\n// description: \"\",\r\n// \"masterwork\": false,\r\n// \"discovered\": true,\r\n// \"known\": true,\r\n// \"equipped\": null,\r\n// \"weapon\": {\r\n// id: 1,\r\n// name: \"Unarmed\",\r\n// \"category\": \"Unarmed\",\r\n// proficiency: \"Simple\",\r\n// \"weapon_type\": \"Melee\",\r\n// \"price_in_gp\": 0,\r\n// \"damage_dice\": 3,\r\n// \"num_of_dice\": 1,\r\n// \"critical\": 2,\r\n// \"critical_range\": 20,\r\n// \"range\": 0,\r\n// \"thrown\": 0,\r\n// \"weight\": 0,\r\n// \"damage_type\": \"Bludgeoning\",\r\n// description: \"An unarmed strike is always considered a light weapon. Therefore, you can use the Weapon Finesse feat to apply your Dexterity modifier instead of your Strength modifier to attack rolls with an unarmed strike. Unarmed strikes do not count as natural weapons. The damage from an unarmed strike is considered weapon damage for the purposes of effects that give you a bonus on weapon damage rolls.\\n\\nA monk or any character with the Improved Unarmed Strike feat can deal lethal or nonlethal damage with unarmed strikes, at his discretion.\",\r\n// \"double_weapon\": null,\r\n// \"double_num_of_dice\": 0,\r\n// \"double_damage_dice\": 0,\r\n// \"double_damage_type\": null,\r\n// \"ammunition\": false,\r\n// \"ammunition_type\": null,\r\n// source: {\r\n// id: 1,\r\n// title: \"Core Rulebook\",\r\n// abbreviation: \"CR\",\r\n// code: \"PZO1110\"\r\n// },\r\n// \"weapon_qualities\": [\r\n// {\r\n// id: 4,\r\n// name: \"nonlethal\",\r\n// description: \"These weapons deal nonlethal damage.\"\r\n// }\r\n// ],\r\n// \"weapon_groups\": [\r\n// {\r\n// id: 2,\r\n// name: \"Close\"\r\n// }\r\n// ],\r\n// \"weapon_hands\": [],\r\n// \"attack_type\": null,\r\n// \"features\": []\r\n// },\r\n// \"magazine\": null,\r\n// \"ammunition_amount\": null,\r\n// \"character_weapon_ammunition_id\": null,\r\n// \"improvised_ammunition\": false\r\n// }\r\n// ],\r\n// \"character_armors\": [\r\n// {\r\n// id: 5,\r\n// name: null,\r\n// description: null,\r\n// \"armor\": {\r\n// id: 16,\r\n// name: \"Leaf Armor\",\r\n// proficiency: \"Light\",\r\n// \"price_in_gp\": 500,\r\n// bonus: 3,\r\n// \"bonus_type\": \"Armor\",\r\n// \"max_dex_bonus\": 5,\r\n// \"armor_check_penalty\": 0,\r\n// \"arcane_spell_failure\": 15,\r\n// \"spell_30\": 30,\r\n// \"spell_20\": 20,\r\n// \"weight\": 20,\r\n// source_id: 16,\r\n// description: \"Using alchemical compounds, elves or druidic orders treat special leaves for use in crafting armor. These leaves are stitched together in an overlapping pattern to create a leathery armor as strong and deflective as metal counterparts. Leaf armor jerkins, bracers, and leggings have been made through this process.\",\r\n// \"don\": \"1 minute\",\r\n// \"don_hastily\": \"5 rounds\",\r\n// \"remove\": \"1 minute\",\r\n// \"extra\": false,\r\n// \"weapon\": false,\r\n// \"bonus_price_in_gp\": false,\r\n// \"damage_dice\": null,\r\n// \"num_of_dice\": null,\r\n// \"critical\": 2,\r\n// \"critical_range\": 20,\r\n// \"weapon_proficiency\": null,\r\n// \"weapon_category\": null\r\n// },\r\n// \"masterwork\": true,\r\n// \"discovered\": true,\r\n// \"known\": true,\r\n// \"equipped\": true,\r\n// \"base_armor\": null,\r\n// \"extra_armor_options\": [],\r\n// \"armor_options\": []\r\n// }\r\n// ]\r\n","import React from 'react'\r\nimport DetailsBrief from '../components/character_details/details_brief'\r\nimport AbilityScores from '../components/character_details/ability_scores'\r\n\r\nimport Character1 from '../dummy_data/character1'\r\nimport { settingsAction } from '../utils/action_creator/character'\r\n\r\nconst CharacterDetails = props => {\r\n\r\n\tconst [character, setCharacter] = React.useState({})\r\n\tconst [settings, setSettings] = React.useState({})\r\n\r\n\tReact.useEffect(() => {\r\n\t\tsetCharacter(Character1.character)\r\n\t\tlet updateSettings = {\r\n\t\t\tlayout: Character1.character.layout || \"detailed\",\r\n\t\t\tcolorTheme: Character1.character.colorTheme || \"noir\"\r\n\t\t}\r\n\t\tsettingsAction(updateSettings)\r\n\t\tsetSettings(updateSettings)\r\n\t}, [])\r\n\r\n\t// THREE DIFFERENT CHARACTER DISPLAYS\r\n\t// 1) DETAILED CHARACTER SHEET\r\n\t// 2) ABBREVIATED CHARACTER SHEET (without stat/mod breakdown)\r\n\t// 3) STAT BLOCK (mostly for npcs, monsters, but can be for characters)\r\n\r\n\tconst renderDetails = () => {\r\n\t\tif (!Object.keys(character).length){return null}\r\n\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<DetailsBrief character={character}/>\r\n\t\t\t\t<AbilityScores character={character}/>\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\tlet className = `${settings.layout}-layout`\r\n\r\n\treturn (\r\n\t\t<main id=\"character-details-container\" className={className}>\r\n\t\t\t{renderDetails()}\r\n\t\t</main>\r\n\t)\r\n}\r\n\r\nexport default CharacterDetails\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Form, Button } from \"semantic-ui-react\";\r\nimport localhost from \"../localhost\";\r\n\r\nclass Login extends React.Component {\r\n  state = {\r\n    username: \"\",\r\n    password: \"\",\r\n    error: false\r\n  };\r\n\r\n  // renderSignedIn = () => {\r\n  //   if (this.props.currentUser){\r\n  //     render(){\r\n  //       <Redirect to='/classes'/>\r\n  //     }\r\n  //   }\r\n  // }\r\n\r\n  // componentDidMount() {\r\n  //   const token = localStorage.getItem('token')\r\n  //   console.log('token is', token)\r\n  //\r\n  // }\r\n\r\n  renderSubmit = e => {\r\n    e.preventDefault();\r\n    fetch(`${localhost}/api/v1/login`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Accept: \"application/json\"\r\n      },\r\n      body: JSON.stringify(this.state)\r\n    })\r\n      .then(r => r.json())\r\n      .then(data => {\r\n        if (!data.error) {\r\n          this.props.dispatch({\r\n            type: \"SIGNIN\",\r\n            user: data.user,\r\n            admin: data.user.admin\r\n          });\r\n          localStorage.setItem(\"token\", data.token);\r\n          this.setState({ username: \"\", password: \"\", error: false });\r\n          this.props.history.push(\"/\");\r\n        } else {\r\n          console.log(data.error);\r\n          this.setState({ username: \"\", password: \"\", error: true });\r\n        }\r\n      });\r\n  };\r\n\r\n  renderChange = e => {\r\n    this.setState({ [e.target.name]: e.target.value });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h1 className=\"project-name front-and-center\">CharacterFinder</h1>\r\n        <h4 className=\"project-name subtitle\">\r\n          Pathfinder TTRPG Database & Character Creator\r\n        </h4>\r\n\r\n        <Form onSubmit={this.renderSubmit} style={{ margin: \"0 20%\" }}>\r\n          <Form.Field>\r\n            <label>Username</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"username\"\r\n              value={this.state.username}\r\n              placeholder=\"Username\"\r\n              onChange={this.renderChange}\r\n              autocomplete=\"off\"\r\n            />\r\n          </Form.Field>\r\n          <Form.Field>\r\n            <label>Password</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"password\"\r\n              value={this.state.password}\r\n              placeholder=\"Password\"\r\n              onChange={this.renderChange}\r\n              autocomplete=\"off\"\r\n            />\r\n          </Form.Field>\r\n          <Button type=\"submit\"> Login </Button>\r\n        </Form>\r\n        {this.state.error ? (\r\n          <p>\r\n            <strong>Invalid login. Please try again.</strong>\r\n          </p>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStatetoProps = state => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin\r\n  };\r\n};\r\n\r\nexport default connect(mapStatetoProps)(Login);\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Form, Button } from 'semantic-ui-react'\r\nimport localhost from '../localhost'\r\n\r\n\r\nclass SignUp extends React.Component {\r\n\r\n  state = {\r\n    username: \"\",\r\n    password: \"\",\r\n    error: false\r\n  }\r\n\r\n  renderSubmit = (e) => {\r\n    e.preventDefault()\r\n    fetch(`${localhost}/api/v1/signup`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify(this.state)\r\n    })\r\n    .then(r => r.json())\r\n    .then(data => {\r\n      if (!data.error){\r\n\r\n      this.props.dispatch({type: 'SIGNIN', user: data.user, admin: data.user.admin })\r\n      localStorage.setItem(\"token\", data.token)\r\n      this.setState({username: \"\", password: \"\"})\r\n      this.props.history.push(\"/\")\r\n      } else {\r\n        console.log(data.error)\r\n        this.setState({username: \"\", password: \"\", error: true})\r\n      }\r\n    })\r\n  }\r\n\r\n  renderChange = (e) => {\r\n\r\n    this.setState({[e.target.name]: e.target.value})\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h1 className='project-name front-and-center'>CharacterFinder</h1>\r\n        <h4 className='project-name subtitle'>Pathfinder TTRPG Database & Character Creator</h4>\r\n        <Form onSubmit={this.renderSubmit} style={{margin: '0 20%'}}>\r\n          <Form.Field>\r\n            <label>Username</label>\r\n            <input type=\"text\" name=\"username\" value={this.state.username} placeholder='Username' onChange={this.renderChange} autocomplete=\"off\"/>\r\n          </Form.Field>\r\n          <Form.Field>\r\n            <label>Password</label>\r\n            <input type=\"text\" name=\"password\" value={this.state.password} placeholder='Password' onChange={this.renderChange} autocomplete=\"off\"/>\r\n          </Form.Field>\r\n          <Button type=\"submit\"> Sign Up </Button>\r\n        </Form>\r\n        {this.state.error ? <p><strong>Invalid login. Please try again.</strong></p> : null}\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nconst mapStatetoProps = (state) => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin\r\n  }\r\n}\r\n\r\nexport default connect(mapStatetoProps)(SignUp)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport localhost from '../localhost'\r\n\r\nclass NewSkill extends React.Component {\r\n\r\n  state = {\r\n    name: \"\",\r\n    abilityScore: \"\",\r\n    description: \"\",\r\n    untrained: false\r\n  }\r\n\r\n  renderSubmit = (e) => {\r\n    e.preventDefault()\r\n    fetch(`${localhost}/api/v1/skills`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify(this.state)\r\n    })\r\n    .then(r => r.json())\r\n    .then(data => {\r\n      if (!data.error){\r\n        this.props.history.push(`/skills/${data.skill.name}`)\r\n        this.setState({name: \"\", description: \"\", abilityScore: \"\", untrained: false})\r\n      } else {\r\n        console.log(data.error)\r\n      }\r\n    })\r\n  }\r\n\r\n  renderChange = (e) => {\r\n    if (e.target.name === 'untrained'){\r\n      this.setState({untrained: !this.state.untrained})\r\n    } else {\r\n      this.setState({[e.target.name]: e.target.value})\r\n    }\r\n  }\r\n\r\n  renderFormSubmit = (e) => {\r\n    if (this.props.renderSkillEdit){\r\n        this.props.renderSkillEdit(e, this.state)\r\n    } else {\r\n      this.renderSubmit(e)\r\n    }\r\n  }\r\n\r\n  renderForm = () => {\r\n    return (\r\n      <form onSubmit={(e) => this.renderFormSubmit(e)} >\r\n        <label>\r\n          Skill Name:\r\n          <input type=\"text\" name=\"name\" value={this.state.name} onChange={this.renderChange}/>\r\n        </label>\r\n        <br /><br />\r\n        <label>\r\n          Description:\r\n          <textarea type=\"textfield\" className=\"desc-box\" rows=\"6\" name=\"description\" value={this.state.description} onChange={this.renderChange}/>\r\n        </label>\r\n        <br /><br />\r\n        <label>\r\n          Ability Score:\r\n          <select name=\"abilityScore\" value={this.state.abilityScore} onChange={this.renderChange}>\r\n            <option value= \"\" >Choose One</option>\r\n            <option value= \"Strength\" >Strength</option>\r\n            <option value= \"Dexterity\" >Dexterity</option>\r\n            <option value= \"Constitution\" >Constitution</option>\r\n            <option value= \"Intelligence\" >Intelligence</option>\r\n            <option value= \"Wisdom\" >Wisdom</option>\r\n            <option value= \"Charisma\" >Charisma</option>\r\n          </select>\r\n        </label>\r\n        <br /><br />\r\n        <label>\r\n          Can a Character use this skill Untrained?:\r\n          <input type=\"checkbox\" name=\"untrained\" isSelected={this.state.untrained} onChange={this.renderChange}/>\r\n        </label>\r\n        < br />< br />\r\n        <input type=\"submit\" name=\"submit\" />\r\n      </form>\r\n    )\r\n  }\r\n\r\n  deleteSkill = () => {\r\n    this.setState({deleteSkillButton: !this.state.deleteSkillButton })\r\n  }\r\n\r\n  deleteSkillConfirm = (e, answer) => {\r\n    e.preventDefault();\r\n    if (answer === \"yes\") {\r\n      fetch(`${localhost}/api/v1/skills/${this.props.skill.id}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          skill_id: this.props.skill.id\r\n        })\r\n      })\r\n      .then(r => r.json())\r\n      .then(data => {\r\n        this.props.history.push('/skills')\r\n        this.setState({deleteSkillButton: false})\r\n    })\r\n    } else if (answer === \"no\"){\r\n      this.setState({deleteSkillButton: false})\r\n    }\r\n  }\r\n\r\n  render() {\r\n    console.log(this.state)\r\n    return (\r\n      <div>\r\n      {(this.props.toggleSkillForm || this.props.location.pathname === \"/skills-form\") ? this.renderForm() : null}\r\n      {this.props.skill ? <button onClick={this.deleteSkill}>Delete Skill</button> : null}\r\n      {this.state.deleteSkillButton ? <span><br/>Are you sure about that?<br/> <button onClick={(e) => this.deleteSkillConfirm(e, \"no\")}>No</button><button onClick={(e) => this.deleteSkillConfirm(e, \"yes\")}>Yes</button><br/><br/></span> : null}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\n  const mapStateToProps = (state) => {\r\n    return {\r\n      currentUser: state.currentUser,\r\n      admin: state.admin\r\n    }\r\n  }\r\n\r\n  export default connect(mapStateToProps)(NewSkill)\r\n","import React from 'react'\r\n\r\nconst Name = props => {\r\n  return (\r\n    <p>\r\n      What is the name of your feature?\r\n      <input type=\"text\" name=\"name\" value={props.name} onChange={props.renderChange}/>\r\n      <button onClick={() => props.nextQuestion(\"name\")}>Next</button>\r\n    </p>\r\n  )\r\n}\r\nexport default Name\r\n","import React from 'react'\r\nimport localhost from '../../localhost'\r\n\r\nconst Action = props => {\r\n\r\n  const [actions, updateActions] = React.useState([])\r\n\r\n  React.useEffect(() => {\r\n    fetch(`${localhost}/api/v1/actions`)\r\n      .then(r => r.json())\r\n      .then(updateActions)\r\n  }, [])\r\n\r\n  let variableActions = actions.map(a => {\r\n    let lower = a.name.toLowerCase()\r\n    let array = lower.split(\" \")\r\n    let noAction = array.filter(word => word !== \"action\")\r\n    return noAction.join(\"_\")\r\n  })\r\n\r\n  return (\r\n    <p>\r\n      Does your feature take an action to trigger/use?\r\n      <select value={props.action} onChange={props.renderChange} name='action'>\r\n        <option value=\"\">No Action</option>\r\n        {variableActions.map((a, i) => <option key={i * 3 - 1} value={a}>{a}</option>)}\r\n      </select>\r\n      <button onClick={() => props.nextQuestion(\"action\")}>Next</button>\r\n    </p>\r\n  )\r\n}\r\nexport default Action\r\n","import React from 'react'\r\n\r\nconst AttackOfOpportunity = props => {\r\n  return (\r\n    <p>\r\n      Does this feature threaten an Attack of Opportunity?\r\n      <select value={props.attack_of_opportunity} onChange={props.renderChange} name='attack_of_opportunity'>\r\n        <option value=\"true\">True</option>\r\n        <option value=\"false\">False</option>\r\n      </select>\r\n      <button onClick={() => props.nextQuestion(\"attack_of_opportunity\")}>Next</button>\r\n    </p>\r\n  )\r\n}\r\nexport default AttackOfOpportunity\r\n","import React from 'react'\r\n\r\nconst Usage = props => {\r\n\r\n  const {limit, limit_frequency, destroy_after_use, adjustable, unit, toggleable, wieldable, complete} = props.usage\r\n\r\n  return (\r\n    <p>\r\n      How Many Times can this Feature be used?<br/>\r\n      <input type=\"number\" name=\"limit\" value={limit} onChange={(e) => props.renderNestedChange(\"usage\", \"limit\", e.target.value)}/><br/>\r\n\r\n      What is the frequency this feature can used given the above number? (1 times a round, 3 times a day, 2 times an hour)<br/>\r\n      <select value={limit_frequency} onChange={(e) => props.renderNestedChange(\"usage\", \"limit_frequency\", e.target.value)} name='limit_frequency'>\r\n        <option value=\"\">Choose</option>\r\n        <option value=\"Round\">Round</option>\r\n        <option value=\"Day\">Day</option>\r\n        <option value=\"Forever\">Forever</option>\r\n      </select><br/>\r\n\r\n      Is the number of times this feature can be used counted beside \"times used\"? Examples: feature can be used for 10 \"minutes\", used for 25 \"rounds\", used on up to 6 \"allies\" (write singular)<br/>\r\n      <input type=\"text\" name=\"unit\" value={unit} onChange={(e) => props.renderNestedChange(\"usage\", \"unit\", e.target.value)}/><br/>\r\n\r\n      If this feature is on an item, after the feature is used, is the item destroyed?<br/>\r\n      <select value={destroy_after_use} onChange={(e) => props.renderNestedChange(\"usage\", \"destroy_after_use\", e.target.value)} name='destroy_after_use'>\r\n        <option value=\"true\">True</option>\r\n        <option value=\"false\">False</option>\r\n      </select><br/>\r\n\r\n      Can the number of times this feature can be used be adjusted?<br/>\r\n      <select value={adjustable} onChange={(e) => props.renderNestedChange(\"usage\", \"adjustable\", e.target.value)} name='adjustable'>\r\n        <option value=\"true\">True</option>\r\n        <option value=\"false\">False</option>\r\n      </select><br/>\r\n\r\n      Can the usage of this feature be switched on and off? Examples: Barbarian's Rage Rounds, Slippers of Spider Climbing<br/>\r\n      <select value={toggleable} onChange={(e) => props.renderNestedChange(\"usage\", \"toggleable\", e.target.value)} name='toggleable'>\r\n        <option value=\"true\">True</option>\r\n        <option value=\"false\">False</option>\r\n      </select><br/>\r\n\r\n      If this feature is on an item, can it, and will it only be triggered, when character is wielding it?<br/>\r\n      <select value={wieldable} onChange={(e) => props.renderNestedChange(\"usage\", \"wieldable\", e.target.value)} name='wieldable'>\r\n        <option value=\"true\">True</option>\r\n        <option value=\"false\">False</option>\r\n      </select><br/>\r\n\r\n      Is this Usage Questionnaire Completed?<br/>\r\n      <select value={complete} onChange={(e) => props.renderNestedChange(\"usage\", \"complete\", e.target.value)} name='complete'>\r\n        <option value=\"true\">True</option>\r\n        <option value=\"false\">False</option>\r\n      </select><br/>\r\n\r\n      <br/>\r\n      <button onClick={() => props.nextQuestion(\"usage\")}>Next</button>\r\n    </p>\r\n  )\r\n}\r\nexport default Usage\r\n","import React from 'react'\r\n\r\nconst UsageOptions = props => {\r\n\r\n  const [num, changeNum] = React.useState(0)\r\n\r\n  const {options, complete} = props.usage_options\r\n  const obj = {\r\n    detail: \"\",\r\n    cost: 1,\r\n    amount: 1,\r\n    destroy_after_use: false\r\n  }\r\n\r\n  const renderDynamicForm = (operator) => {\r\n    let duplicate = [...options]\r\n    if (operator === \"+\"){\r\n      duplicate.push(obj)\r\n      changeNum(num + 1)\r\n    } else if (operator === \"-\"){\r\n      duplicate.pop()\r\n      changeNum(num - 1)\r\n    }\r\n    props.renderNestedChange(\"usage_options\", \"options\", duplicate)\r\n  }\r\n\r\n  const changeDynamicForm = (i, name, value) => {\r\n    let option = [...options][i]\r\n    option[name] = value\r\n    let newOptions = [...options]\r\n    newOptions.splice(i, 1, option)\r\n    props.renderNestedChange(\"usage_options\", \"options\", newOptions)\r\n  }\r\n\r\n  const renderOptions = (option, i) => {\r\n    return (\r\n      <p key={i * 3 - 1} style={{borderBottom: \"2px solid black\", paddingBottom: \"0.5em\"}}>\r\n        <strong>Option {i + 1}:</strong><br/><br/>\r\n\r\n        Describe this specific option's details or effect<br/>\r\n        <input type=\"text\" name=\"detail\" value={option.detail} onChange={(e) => changeDynamicForm(i, e.target.name, e.target.value)}/><br/>\r\n\r\n        When this feature option is used, how many instances does it cost, or how many instances of the limit does it use? Example: Casting Reduce Person costs \"1 charge\" from the Staff's 10 charges, and Shrink Item costs \"2 charges\"<br/>\r\n        <input type=\"number\" name=\"cost\" value={option.cost} onChange={(e) => changeDynamicForm(i, e.target.name, e.target.value)}/><br/>\r\n\r\n        How many of this feature option exist? Example: Necklace of Fireballs can have 3 of a given option, and 1 of another option<br/>\r\n        <input type=\"number\" name=\"amount\" value={option.amount} onChange={(e) => changeDynamicForm(i, e.target.name, e.target.value)}/><br/>\r\n\r\n        If this feature option is on an item, after the feature option is used, is the specific option destroyed or no longer available?<br/>\r\n        <select value={option.destroy_after_use} onChange={(e) => changeDynamicForm(i, e.target.name, e.target.value)} name='destroy_after_use'>\r\n          <option value=\"true\">True</option>\r\n          <option value=\"false\">False</option>\r\n        </select><br/>\r\n      </p>\r\n    )\r\n  }\r\n\r\n\r\n  return (\r\n    <section>\r\n      How many usage options does this feature have? {num}\r\n      <button style={{width: \"2.5em\", height: \"2em\", marginLeft: \"1em\"}} onClick={() => renderDynamicForm(\"+\")}>+</button>\r\n      <button style={{width: \"2.5em\", height: \"2em\", marginLeft: \"1em\"}} onClick={() => num > 0 && renderDynamicForm(\"-\")}>-</button>\r\n      <br/>\r\n      (This is for specific information for different options. If the feature does not have multiple ways it can be used, or if it uses different features for different options, do not fill this out; the description will be written on the actual Class Feature/Racial Traits/Feat details/Equipment/etc.)\r\n      <br/>\r\n      {options.map((option, i) => renderOptions(option, i))}\r\n      <br/>\r\n      Is this Usage Options Questionnaire Completed?<br/>\r\n      <select value={complete} onChange={(e) => props.renderNestedChange(\"usage_options\", \"complete\", e.target.value)} name='complete'>\r\n        <option value={true}>True</option>\r\n        <option value={false}>False</option>\r\n      </select>\r\n      <br/><br/>\r\n      <button onClick={() => props.nextQuestion(\"usage_options\")}>Next</button>\r\n    </section>\r\n  )\r\n}\r\nexport default UsageOptions\r\n","import React from 'react'\r\n\r\nconst UsageSpellOptions = props => {\r\n\r\n  const [num, changeNum] = React.useState(0)\r\n\r\n  const {spell_options, complete} = props.usage_spell_options\r\n  const obj = {\r\n    spell: \"\",\r\n    cost: 1,\r\n    castable: true,\r\n  }\r\n\r\n  const renderDynamicForm = (operator) => {\r\n    let duplicate = [...spell_options]\r\n    if (operator === \"+\"){\r\n      duplicate.push(obj)\r\n      changeNum(num + 1)\r\n    } else if (operator === \"-\"){\r\n      duplicate.pop()\r\n      changeNum(num - 1)\r\n    }\r\n    props.renderNestedChange(\"usage_spell_options\", \"spell_options\", duplicate)\r\n  }\r\n\r\n  const changeDynamicForm = (i, name, value) => {\r\n    let option = [...spell_options][i]\r\n    option[name] = value\r\n    let newOptions = [...spell_options]\r\n    newOptions.splice(i, 1, option)\r\n    props.renderNestedChange(\"usage_spell_options\", \"spell_options\", newOptions)\r\n  }\r\n\r\n  const renderOptions = (option, i) => {\r\n    return (\r\n      <p key={i * 3 - 1} style={{borderBottom: \"2px solid black\", paddingBottom: \"0.5em\"}}>\r\n        <strong>Spell Option {i + 1}:</strong><br/><br/>\r\n\r\n        What is the name of the Spell<br/>\r\n        <input type=\"text\" name=\"spell\" value={option.spell} onChange={(e) => changeDynamicForm(i, e.target.name, e.target.value)}/><br/>\r\n\r\n        When this feature spell option is used, how many instances does it cost, or how many instances of the limit does it use? Example: Casting Reduce Person costs \"1 charge\" from the Staff's 10 charges, and Shrink Item costs \"2 charges\"<br/>\r\n        <input type=\"number\" name=\"cost\" value={option.cost} onChange={(e) => changeDynamicForm(i, e.target.name, e.target.value)}/><br/>\r\n\r\n\r\n        Is this spell castable, or is it just a reference when using this feature?<br/>\r\n        <select value={option.castable} onChange={(e) => changeDynamicForm(i, e.target.name, e.target.value)} name='castable'>\r\n          <option value=\"true\">Castable</option>\r\n          <option value=\"false\">Just a Reference</option>\r\n        </select><br/>\r\n      </p>\r\n    )\r\n  }\r\n\r\n\r\n  return (\r\n    <section>\r\n      How many usage spell options does this feature have? {num}\r\n      <button style={{width: \"2.5em\", height: \"2em\", marginLeft: \"1em\"}} onClick={() => renderDynamicForm(\"+\")}>+</button>\r\n      <button style={{width: \"2.5em\", height: \"2em\", marginLeft: \"1em\"}} onClick={() => num > 0 && renderDynamicForm(\"-\")}>-</button>\r\n      <br/>\r\n      {spell_options.map((option, i) => renderOptions(option, i))}\r\n      <br/>\r\n      Is this Usage Spell Options Questionnaire Completed?<br/>\r\n      <select value={complete} onChange={(e) => props.renderNestedChange(\"usage_spell_options\", \"complete\", e.target.value)} name='complete'>\r\n        <option value=\"true\">True</option>\r\n        <option value=\"false\">False</option>\r\n      </select>\r\n      <br/><br/>\r\n      <button onClick={() => props.nextQuestion(\"usage_spell_options\")}>Next</button>\r\n    </section>\r\n  )\r\n}\r\nexport default UsageSpellOptions\r\n","import React from 'react'\r\n\r\nconst SkillBonuses = props => {\r\n\r\n  const [num, changeNum] = React.useState(0)\r\n\r\n  const {bonuses, complete} = props.skill_bonuses\r\n  const obj = {\r\n    skill: \"\",\r\n    bonus: 1,\r\n    bonus_type: \"\",\r\n    duration: \"\",\r\n    custom: \"\",\r\n    notes: \"\"\r\n  }\r\n\r\n  const renderDynamicForm = (operator) => {\r\n    let duplicate = [...bonuses]\r\n    if (operator === \"+\"){\r\n      duplicate.push(obj)\r\n      changeNum(num + 1)\r\n    } else if (operator === \"-\"){\r\n      duplicate.pop()\r\n      changeNum(num - 1)\r\n    }\r\n    props.renderNestedChange(\"skill_bonuses\", \"bonuses\", duplicate)\r\n  }\r\n\r\n  const changeDynamicForm = (i, name, value) => {\r\n    let option = [...bonuses][i]\r\n    option[name] = value\r\n    let newOptions = [...bonuses]\r\n    newOptions.splice(i, 1, option)\r\n    props.renderNestedChange(\"skill_bonuses\", \"bonuses\", newOptions)\r\n  }\r\n\r\n  const renderOptions = (option, i) => {\r\n    return (\r\n      <p key={i * 3 - 1} style={{borderBottom: \"2px solid black\", paddingBottom: \"0.5em\"}}>\r\n        <strong>Skill Bonus {i + 1}:</strong><br/><br/>\r\n\r\n        Which Skill?<br/>\r\n        <input type=\"text\" name=\"skill\" value={option.skill} onChange={(e) => changeDynamicForm(i, e.target.name, e.target.value)}/><br/>\r\n\r\n        How much is the bonus?<br/>\r\n        <input type=\"number\" name=\"bonus\" value={option.bonus} onChange={(e) => changeDynamicForm(i, e.target.name, e.target.value)}/><br/>\r\n\r\n        What kind of bonus is it?<br/>\r\n        <select value={option.bonus_type} onChange={(e) => changeDynamicForm(i, e.target.name, e.target.value)} name='bonus_type'>\r\n          <option value=\"\">Choose</option>\r\n          <option value=\"Circumstance\">Circumstance</option>\r\n          <option value=\"Competence\">Competence</option>\r\n          <option value=\"Insight\">Insight</option>\r\n          <option value=\"Luck\">Luck</option>\r\n          <option value=\"Morale\">Morale</option>\r\n          <option value=\"Profane\">Profane</option>\r\n          <option value=\"Sacred\">Sacred</option>\r\n        </select><br/>\r\n\r\n        How Long does the Bonus Last?<br/>\r\n        <select value={option.duration} onChange={(e) => changeDynamicForm(i, e.target.name, e.target.value)} name='duration'>\r\n          <option value=\"\">Choose</option>\r\n          <option value=\"Permanent\">Permanent</option>\r\n        </select><br/>\r\n\r\n        Does this skill only apply to a subset of a skill? Example: Perform (percussion), Profession (sailor), Craft (alchemy)<br/>\r\n        <input type=\"text\" name=\"custom\" value={option.custom} onChange={(e) => changeDynamicForm(i, e.target.name, e.target.value)}/><br/>\r\n\r\n        Does this feature have specific details or notes that could appear as a tooltip? Please use separate lines for seperate details<br/>\r\n        <input type=\"text\" name=\"notes\" value={option.notes} onChange={(e) => changeDynamicForm(i, e.target.name, e.target.value)}/><br/>\r\n\r\n      </p>\r\n    )\r\n  }\r\n\r\n\r\n  return (\r\n    <section>\r\n      Does this Feature grant skill bonuses? How many? {num}\r\n      <button style={{width: \"2.5em\", height: \"2em\", marginLeft: \"1em\"}} onClick={() => renderDynamicForm(\"+\")}>+</button>\r\n      <button style={{width: \"2.5em\", height: \"2em\", marginLeft: \"1em\"}} onClick={() => num > 0 && renderDynamicForm(\"-\")}>-</button>\r\n      <br/>\r\n      {bonuses.map((option, i) => renderOptions(option, i))}\r\n      <br/>\r\n      Is this Skill Bonuses Questionnaire Completed?<br/>\r\n      <select value={complete} onChange={(e) => props.renderNestedChange(\"skill_bonuses\", \"complete\", e.target.value)} name='complete'>\r\n        <option value=\"true\">True</option>\r\n        <option value=\"false\">False</option>\r\n      </select>\r\n      <br/><br/>\r\n      <button onClick={() => props.nextQuestion(\"skill_bonuses\")}>Next</button>\r\n    </section>\r\n  )\r\n}\r\nexport default SkillBonuses\r\n","import React from 'react'\r\n\r\nconst StatBonuses = props => {\r\n\r\n  const [num, changeNum] = React.useState(0)\r\n\r\n  const {bonuses, complete} = props.stat_bonuses\r\n  const obj = {\r\n    statistic: \"\",\r\n    bonus: 1,\r\n    bonus_type: \"\",\r\n    duration: \"\",\r\n    note: \"\"\r\n  }\r\n\r\n  const renderDynamicForm = (operator) => {\r\n    let duplicate = [...bonuses]\r\n    if (operator === \"+\"){\r\n      duplicate.push(obj)\r\n      changeNum(num + 1)\r\n    } else if (operator === \"-\"){\r\n      duplicate.pop()\r\n      changeNum(num - 1)\r\n    }\r\n    props.renderNestedChange(\"stat_bonuses\", \"bonuses\", duplicate)\r\n  }\r\n\r\n  const changeDynamicForm = (i, name, value) => {\r\n    let option = [...bonuses][i]\r\n    option[name] = value\r\n    let newOptions = [...bonuses]\r\n    newOptions.splice(i, 1, option)\r\n    props.renderNestedChange(\"stat_bonuses\", \"bonuses\", newOptions)\r\n  }\r\n\r\n  const renderOptions = (option, i) => {\r\n    return (\r\n      <p key={i * 3 - 1} style={{borderBottom: \"2px solid black\", paddingBottom: \"0.5em\"}}>\r\n        <strong>Skill Bonus {i + 1}:</strong><br/><br/>\r\n\r\n        Which Statistic?<br/>\r\n        <select value={option.statistic} onChange={(e) => changeDynamicForm(i, e.target.name, e.target.value)} name='statistic'>\r\n          <option value=\"\">Choose Statistic</option>\r\n          <option value=\"Strength\">Strength</option>\r\n          <option value=\"Dexterity\">Dexterity</option>\r\n          <option value=\"Constitution\">Constitution</option>\r\n          <option value=\"Intelligence\">Intelligence</option>\r\n          <option value=\"Wisdom\">Wisdom</option>\r\n          <option value=\"Charisma\">Charisma</option>\r\n          <option value=\"Initiative\">Initiative</option>\r\n          <option value=\"Save\">Save</option>\r\n          <option value=\"Fortitude\">Fortitude</option>\r\n          <option value=\"Reflex\">Reflex</option>\r\n          <option value=\"Will\">Will</option>\r\n        </select><br/>\r\n\r\n        How much is the bonus?<br/>\r\n        <input type=\"number\" name=\"bonus\" value={option.bonus} onChange={(e) => changeDynamicForm(i, e.target.name, e.target.value)}/><br/>\r\n\r\n        What kind of bonus is it?<br/>\r\n        <select value={option.bonus_type} onChange={(e) => changeDynamicForm(i, e.target.name, e.target.value)} name='bonus_type'>\r\n          <option value=\"\">Choose</option>\r\n          <option value=\"Alchemical\">Alchemical</option>\r\n          <option value=\"Circumstance\">Circumstance</option>\r\n          <option value=\"Competence\">Competence</option>\r\n          <option value=\"Enhancement\">Enhancement</option>\r\n          <option value=\"Inherent\">Inherent</option>\r\n          <option value=\"Insight\">Insight</option>\r\n          <option value=\"Luck\">Luck</option>\r\n          <option value=\"Morale\">Morale</option>\r\n          <option value=\"Profane\">Profane</option>\r\n          <option value=\"Resistance\">Resistance</option>\r\n          <option value=\"Sacred\">Sacred</option>\r\n          <option value=\"Size\">Size</option>\r\n        </select><br/>\r\n\r\n        How Long does the Bonus Last?<br/>\r\n        <select value={option.duration} onChange={(e) => changeDynamicForm(i, e.target.name, e.target.value)} name='duration'>\r\n          <option value=\"\">Choose</option>\r\n          <option value=\"Permanent\">Permanent</option>\r\n        </select><br/>\r\n\r\n        Does this feature have specific details or notes that could appear as a tooltip? Please use separate lines for seperate details<br/>\r\n        <input type=\"text\" name=\"note\" value={option.note} onChange={(e) => changeDynamicForm(i, e.target.name, e.target.value)}/><br/>\r\n\r\n      </p>\r\n    )\r\n  }\r\n\r\n\r\n  return (\r\n    <section>\r\n      Does this Feature grant skill bonuses? How many? {num}\r\n      <button style={{width: \"2.5em\", height: \"2em\", marginLeft: \"1em\"}} onClick={() => renderDynamicForm(\"+\")}>+</button>\r\n      <button style={{width: \"2.5em\", height: \"2em\", marginLeft: \"1em\"}} onClick={() => num > 0 && renderDynamicForm(\"-\")}>-</button>\r\n      <br/>\r\n      {bonuses.map((option, i) => renderOptions(option, i))}\r\n      <br/>\r\n      Is this Stat Bonuses Questionnaire Completed?<br/>\r\n      <select value={complete} onChange={(e) => props.renderNestedChange(\"stat_bonuses\", \"complete\", e.target.value)} name='complete'>\r\n        <option value=\"true\">True</option>\r\n        <option value=\"false\">False</option>\r\n      </select>\r\n      <br/><br/>\r\n      <button onClick={() => props.nextQuestion(\"stat_bonuses\")}>Next</button>\r\n    </section>\r\n  )\r\n}\r\nexport default StatBonuses\r\n","import React from 'react'\r\n\r\nconst Container = props => {\r\n\r\n  const {weight, volume_cubic_feet, complete} = props.container\r\n\r\n  return (\r\n    <p>\r\n      Fill out if feature or item is container\r\n      <br/><br/>\r\n\r\n      How much weight can this feature or item hold?<br/>\r\n      <input type=\"number\" name=\"weight\" value={weight} onChange={(e) => props.renderNestedChange(\"container\", \"weight\", e.target.value)}/><br/>\r\n\r\n      How many cubic feet can this feature or item hold?<br/>\r\n      <input type=\"number\" name=\"volume_cubic_feet\" value={volume_cubic_feet} onChange={(e) => props.renderNestedChange(\"container\", \"volume_cubic_feet\", e.target.value)}/><br/>\r\n\r\n\r\n      Is this Container Questionnaire Completed?<br/>\r\n      <select value={complete} onChange={(e) => props.renderNestedChange(\"container\", \"complete\", e.target.value)} name='complete'>\r\n        <option value=\"true\">True</option>\r\n        <option value=\"false\">False</option>\r\n      </select><br/>\r\n\r\n      <button onClick={() => props.nextQuestion(\"name\")}>Next</button>\r\n    </p>\r\n  )\r\n}\r\nexport default Container\r\n","import React from 'react'\r\n\r\nconst Languages = props => {\r\n\r\n  const [num, changeNum] = React.useState(0)\r\n\r\n  const {options, complete} = props.languages\r\n  const obj = {\r\n    language: \"\",\r\n    note: \"\"\r\n  }\r\n\r\n  const renderDynamicForm = (operator) => {\r\n    let duplicate = [...options]\r\n    if (operator === \"+\"){\r\n      duplicate.push(obj)\r\n      changeNum(num + 1)\r\n    } else if (operator === \"-\"){\r\n      duplicate.pop()\r\n      changeNum(num - 1)\r\n    }\r\n    props.renderNestedChange(\"languages\", \"options\", duplicate)\r\n  }\r\n\r\n  const changeDynamicForm = (i, name, value) => {\r\n    let option = [...options][i]\r\n    option[name] = value\r\n    let newOptions = [...options]\r\n    newOptions.splice(i, 1, option)\r\n    props.renderNestedChange(\"languages\", \"options\", newOptions)\r\n  }\r\n\r\n  const renderOptions = (option, i) => {\r\n    return (\r\n      <p key={i * 3 - 1} style={{borderBottom: \"2px solid black\", paddingBottom: \"0.5em\"}}>\r\n        <strong>Langauge {i + 1}:</strong><br/><br/>\r\n\r\n        What langauge does it give you<br/>\r\n        <input type=\"text\" name=\"language\" value={option.language} onChange={(e) => changeDynamicForm(i, e.target.name, e.target.value)}/><br/>\r\n\r\n        Does this feature have specific details or notes that could appear as a tooltip? Please use separate lines for seperate details<br/>\r\n        <input type=\"text\" name=\"note\" value={option.note} onChange={(e) => changeDynamicForm(i, e.target.name, e.target.value)}/><br/>\r\n      </p>\r\n    )\r\n  }\r\n\r\n\r\n  return (\r\n    <section>\r\n      Does this feature give you additional languages? How many? {num}\r\n      <button style={{width: \"2.5em\", height: \"2em\", marginLeft: \"1em\"}} onClick={() => renderDynamicForm(\"+\")}>+</button>\r\n      <button style={{width: \"2.5em\", height: \"2em\", marginLeft: \"1em\"}} onClick={() => num > 0 && renderDynamicForm(\"-\")}>-</button>\r\n      <br/>\r\n      {options.map((option, i) => renderOptions(option, i))}\r\n      <br/>\r\n      Is this Languages Questionnaire Completed?<br/>\r\n      <select value={complete} onChange={(e) => props.renderNestedChange(\"languages\", \"complete\", e.target.value)} name='complete'>\r\n        <option value=\"true\">True</option>\r\n        <option value=\"false\">False</option>\r\n      </select>\r\n      <br/><br/>\r\n      <button onClick={() => props.nextQuestion(\"languages\")}>Next</button>\r\n    </section>\r\n  )\r\n}\r\nexport default Languages\r\n","import React from 'react'\r\n\r\nconst Movement = props => {\r\n\r\n  const {movement, feet, bonus, penalty, complete} = props.movement\r\n\r\n  return (\r\n    <p>\r\n      Fill out if feature gives a character a movement speed change<br/><br/>\r\n\r\n      What type of movement speed change does this give<br/>\r\n      <select value={movement} onChange={(e) => props.renderNestedChange(\"movement\", \"movement\", e.target.value)} name='movement'>\r\n        <option value=\"\">Choose</option>\r\n        <option value=\"Base\">Base</option>\r\n        <option value=\"Climb\">Climb</option>\r\n        <option value=\"Swim\">Swim</option>\r\n        <option value=\"Burrow\">Burrow</option>\r\n      </select><br/>\r\n\r\n      What is the feet specified for this feature<br/>\r\n      <input type=\"number\" name=\"feet\" value={feet} onChange={(e) => props.renderNestedChange(\"movement\", \"feet\", e.target.value)}/><br/>\r\n\r\n      Is this movement a increase/bonus to a current movement speed?<br/>\r\n      <select value={bonus} onChange={(e) => props.renderNestedChange(\"movement\", \"bonus\", e.target.value)} name='bonus'>\r\n        <option value=\"true\">True</option>\r\n        <option value=\"false\">False</option>\r\n      </select><br/>\r\n\r\n      Is this movement a decrease/penalty to a current movement speed?<br/>\r\n      <select value={penalty} onChange={(e) => props.renderNestedChange(\"movement\", \"penalty\", e.target.value)} name='penalty'>\r\n        <option value=\"true\">True</option>\r\n        <option value=\"false\">False</option>\r\n      </select><br/>\r\n\r\n      Is this Movement Questionnaire Completed?<br/>\r\n      <select value={complete} onChange={(e) => props.renderNestedChange(\"movement\", \"complete\", e.target.value)} name='complete'>\r\n        <option value=\"true\">True</option>\r\n        <option value=\"false\">False</option>\r\n      </select><br/>\r\n\r\n      <br/>\r\n      <button onClick={() => props.nextQuestion(\"movement\")}>Next</button>\r\n    </p>\r\n  )\r\n}\r\nexport default Movement\r\n","import React from 'react'\r\n\r\nconst Loading = props => {\r\n\r\n  const {capacity, must_reload_after_use, complete} = props.loading\r\n\r\n  return (\r\n    <p>\r\n      Fill out if feature/item must be reloading after use<br/><br/>\r\n\r\n      What is the capacity of this feature/item?<br/>\r\n      <input type=\"number\" name=\"capacity\" value={capacity} onChange={(e) => props.renderNestedChange(\"movement\", \"capacity\", e.target.value)}/><br/>\r\n\r\n      Must this feature/item needed to be reloaded after use?<br/>\r\n      <select value={must_reload_after_use} onChange={(e) => props.renderNestedChange(\"loading\", \"must_reload_after_use\", e.target.value)} name='must_reload_after_use'>\r\n        <option value=\"true\">True</option>\r\n        <option value=\"false\">False</option>\r\n      </select><br/>\r\n\r\n      Is this Loading Questionnaire Completed?<br/>\r\n      <select value={complete} onChange={(e) => props.renderNestedChange(\"loading\", \"complete\", e.target.value)} name='complete'>\r\n        <option value=\"true\">True</option>\r\n        <option value=\"false\">False</option>\r\n      </select><br/>\r\n\r\n      <br/>\r\n      <button onClick={() => props.nextQuestion(\"loading\")}>Next</button>\r\n    </p>\r\n  )\r\n}\r\nexport default Loading\r\n","import React from 'react'\r\nimport _ from 'lodash'\r\n\r\nconst RenderRuby = props => {\r\n\r\n  const {name, action, attack_of_opportunity, usage} = props.state\r\n\r\n  let alphaNumeric = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\", \"l\", \"m\", \"n\", \"o\", \"p\", \"q\", \"r\", \"s\", \"t\", \"u\", \"v\", \"w\", \"x\", \"y\", \"z\", \"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"_\"]\r\n  let uniqueVariable = _.sampleSize(alphaNumeric, 9). join(\"\")\r\n\r\n  const renderFeature = () => {\r\n    return (\r\n      <p>\r\n        {uniqueVariable} = Feature.create!(name: \"{name}\", action_id: {action}.id, attack_of_opportunity: {attack_of_opportunity})\r\n      </p>\r\n    )\r\n  }\r\n\r\n  const renderUsage = () => {\r\n    return (\r\n      <p>\r\n        {uniqueVariable}_usage = FeatureUsage.create!(feature_id: {uniqueVariable}.id, limit: {usage.limit}, unit: \"{usage.unit}\"{usage.destroy_after_use === \"true\" && `, destroy_after_use: \"true\" `}, limit_frequency: \"{usage.limit_frequency}\"{usage.adjustable === \"true\" && `, adjustable: \"true\"`}{usage.toggleable === \"true\" && `, toggleable: \"true\"`}{usage.wieldable === \"true\" && `, wieldable: \"true\"`})\r\n      </p>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {renderFeature()}\r\n      {renderUsage()}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default RenderRuby\r\n","import React from 'react'\r\n\r\nimport Name from '../components/how-to-feature/name'\r\nimport Action from '../components/how-to-feature/action'\r\nimport AoO from '../components/how-to-feature/attack_of_opportunity'\r\nimport Usage from '../components/how-to-feature/usage'\r\nimport UsageOptions from '../components/how-to-feature/usage_options'\r\nimport UsageSpellOptions from '../components/how-to-feature/usage_spell_options'\r\nimport SkillBonuses from '../components/how-to-feature/skill_bonuses'\r\nimport StatBonuses from '../components/how-to-feature/stat_bonuses'\r\nimport Container from '../components/how-to-feature/container'\r\nimport Languages from '../components/how-to-feature/languages'\r\nimport Movement from '../components/how-to-feature/movement'\r\nimport Loading from '../components/how-to-feature/loading'\r\nimport RenderRuby from '../components/how-to-feature/render_ruby'\r\n\r\nclass HowToFeature extends React.Component{\r\n\r\n  state = {\r\n    currentQ: \"name\",\r\n    name: \"\",\r\n    action: \"\",\r\n    attack_of_opportunity: false,\r\n    usage: {\r\n      complete: false,\r\n      destroy_after_use: \"false\",\r\n      limit: 0,\r\n      limit_frequency: \"\",\r\n      unit: \"\",\r\n      adjustable: \"false\",\r\n      toggleable: \"false\",\r\n      wieldable: \"false\"\r\n    },\r\n    usage_options: {\r\n      complete: false,\r\n      options: []\r\n    },\r\n    usage_spell_options: {\r\n      complete: false,\r\n      spell_options: []\r\n    },\r\n    skill_bonuses: {\r\n      complete: false,\r\n      bonuses: []\r\n    },\r\n    stat_bonuses: {\r\n      complete: false,\r\n      bonuses: []\r\n    },\r\n    container: {\r\n      complete: false,\r\n      weight: 0,\r\n      volume_cubic_feet: 0,\r\n    },\r\n    languages: {\r\n      complete: false,\r\n      options: []\r\n    },\r\n    movement: {\r\n      complete: false,\r\n      movement: \"\",\r\n      feet: 0,\r\n      bonus: false,\r\n      penalty: false\r\n    },\r\n    loading: {\r\n      complete: false,\r\n      capactiy: 0,\r\n      must_reload_after_use: false\r\n    },\r\n    quizOrder: [\r\n      \"name\",\r\n      \"action\",\r\n      \"attack_of_opportunity\",\r\n      \"usage\",\r\n      \"usage_options\",\r\n      \"usage_spell_options\",\r\n      \"skill_bonuses\",\r\n      \"stat_bonuses\",\r\n      \"container\",\r\n      \"languages\",\r\n      \"movement\",\r\n      \"loading\",\r\n      \"complete\"\r\n    ]\r\n  }\r\n\r\n  renderChange = (e) => {\r\n    console.log(e.target.name, e.target.value)\r\n    this.setState({[e.target.name]: e.target.value})\r\n  }\r\n\r\n  renderNestedChange = (stateKey, objKey, objValue) => {\r\n    let duplicate = {...this.state[stateKey]}\r\n    duplicate[objKey] = objValue\r\n    this.setState({[stateKey]: duplicate})\r\n  }\r\n\r\n  nextQuestion = (currentQ) => {\r\n    let index = this.state.quizOrder.findIndex(qo => qo === currentQ)\r\n    this.setState({currentQ: this.state.quizOrder[index+1]})\r\n  }\r\n\r\n  hopToQ = q => {\r\n    this.setState({currentQ: q})\r\n  }\r\n\r\n  renderNameQ = () => {\r\n    return (\r\n      <p>\r\n        What is the name of your feature?\r\n        <input type=\"text\" name=\"name\" value={this.state.name} onChange={this.renderChange}/>\r\n        <button onClick={() => this.nextQuestion(\"name\")}>Next</button>\r\n      </p>\r\n    )\r\n  }\r\n\r\n  distributeQuiz = () => {\r\n    switch(this.state.currentQ){\r\n      case \"name\":\r\n        return <Name renderChange={this.renderChange} name={this.state.name} nextQuestion={this.nextQuestion}/>\r\n      case \"action\":\r\n        return <Action renderChange={this.renderChange} action={this.state.action} nextQuestion={this.nextQuestion}/>\r\n      case \"attack_of_opportunity\":\r\n        return <AoO renderChange={this.renderChange} attack_of_opportunity={this.state.attack_of_opportunity} nextQuestion={this.nextQuestion}/>\r\n      case \"usage\":\r\n        return <Usage renderNestedChange={this.renderNestedChange} usage={this.state.usage} nextQuestion={this.nextQuestion}/>\r\n      case \"usage_options\":\r\n        return <UsageOptions renderNestedChange={this.renderNestedChange} usage_options={this.state.usage_options} nextQuestion={this.nextQuestion}/>\r\n      case \"usage_spell_options\":\r\n        return <UsageSpellOptions renderNestedChange={this.renderNestedChange} usage_spell_options={this.state.usage_spell_options} nextQuestion={this.nextQuestion}/>\r\n      case \"skill_bonuses\":\r\n        return <SkillBonuses renderNestedChange={this.renderNestedChange} skill_bonuses={this.state.skill_bonuses} nextQuestion={this.nextQuestion}/>\r\n      case \"stat_bonuses\":\r\n        return <StatBonuses renderNestedChange={this.renderNestedChange} stat_bonuses={this.state.stat_bonuses} nextQuestion={this.nextQuestion}/>\r\n      case \"container\":\r\n        return <Container renderNestedChange={this.renderNestedChange} container={this.state.container} nextQuestion={this.nextQuestion}/>\r\n      case \"languages\":\r\n        return <Languages renderNestedChange={this.renderNestedChange} languages={this.state.languages} nextQuestion={this.nextQuestion}/>\r\n      case \"movement\":\r\n        return <Movement renderNestedChange={this.renderNestedChange} movement={this.state.movement} nextQuestion={this.nextQuestion}/>\r\n      case \"loading\":\r\n        return <Loading renderNestedChange={this.renderNestedChange} loading={this.state.loading} nextQuestion={this.nextQuestion}/>\r\n      case \"complete\":\r\n        return <RenderRuby state={this.state}/>\r\n      default:\r\n        break\r\n    }\r\n  }\r\n\r\n  listOfAttributes = () => {\r\n    let questions = [...this.state.quizOrder]\r\n    let style = {\r\n      listStyleType: \"none\",\r\n      position: \"fixed\",\r\n      bottom: \"0\",\r\n      border: \"1px solid black\",\r\n      padding: \"0\",\r\n      margin: \"0\",\r\n      display: \"grid\",\r\n      gridTemplateColumns: \"1fr 1fr\",\r\n      backgroundColor: \"rgba(235, 235, 235, 0.95)\"\r\n    }\r\n    let questionElements = questions.map((q, i) => {\r\n      let status = \"_\"\r\n      status = !!this.state[q] && typeof(this.state[q]) !== \"object\" ? \"X\" : status\r\n      status = typeof(this.state[q]) === \"object\" && this.state[q].complete ? \"X\" : status\r\n      status = this.state.currentQ === q ? \"...\" : status\r\n      return <li key={i * 3 - 1} style={{padding: \"0.2em\"}} onClick={() => this.hopToQ(q)}>{status} {q}</li>\r\n    })\r\n    return (\r\n      <ul style={style}>\r\n        {questionElements}\r\n      </ul>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <section style={{padding: \"1%\", minHeight: \"70vh\", marginBottom: \"30vh\"}}>\r\n        {this.distributeQuiz()}\r\n        {this.listOfAttributes()}\r\n      </section>\r\n    )\r\n  }\r\n}\r\n\r\nexport default HowToFeature\r\n","import React from \"react\";\r\nimport \"./App.scss\";\r\nimport \"./css/character.css\";\r\nimport \"./css/combat.scss\";\r\nimport \"./css/card.css\";\r\nimport \"./css/container.css\";\r\nimport \"./css/animations.scss\";\r\nimport \"./css/form.scss\";\r\nimport \"./css/mobile.scss\";\r\nimport \"./css/popups.scss\";\r\nimport \"./css/campaign-show.scss\";\r\nimport \"./css/character-creation.scss\";\r\nimport \"./css/character-details.scss\";\r\n\r\nimport { HashRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport localhost from \"./localhost\";\r\nimport { removeLocalStorageCharactersIfCookieIsMissing } from \"./utils/cookies\";\r\n\r\nimport NavBar from \"./container/navbar\";\r\nimport Tooltip from \"./modals/tooltip\";\r\nimport ModalSkeleton from \"./modals/skeleton\";\r\nimport Notifications from \"./components/modals/notifications\";\r\n\r\nimport Home from \"./container/home\";\r\nimport Classes from \"./container/classes\";\r\nimport Races from \"./container/races\";\r\nimport Skills from \"./container/skills\";\r\nimport Spells from \"./container/spells\";\r\nimport Class from \"./container/class_show\";\r\nimport Race from \"./container/race_show\";\r\nimport Skill from \"./container/skill_show\";\r\nimport CharacterCreation from \"./container/character_creation\";\r\nimport Character from \"./container/character_show\";\r\nimport Campaign from \"./container/campaign_show\";\r\nimport NewCampaign from \"./container/new_campaign\";\r\nimport CharacterContainer from \"./container/character_container\";\r\n\r\nimport Login from \"./components/login\";\r\nimport SignUp from \"./components/signup\";\r\nimport ClassForm from \"./components/class_form\";\r\nimport RaceForm from \"./components/race_form\";\r\nimport SkillForm from \"./components/skill_form\";\r\n\r\nimport HowToFeature from \"./container/how_to_feature\";\r\n\r\nclass App extends React.Component {\r\n  // COMMENTED OUT FOR TESTING PURPOSES\r\n  componentDidMount() {\r\n    if (window.location.href === \"http://localhost:3000/characters/10001\") {\r\n      return null;\r\n    }\r\n    fetch(`${localhost}/api/v1/data`)\r\n      .then(r => r.json())\r\n      .then(data => {\r\n        this.props.dispatch({\r\n          type: \"EVERYTHING\",\r\n          classes: data.klasses,\r\n          races: data.races,\r\n          skills: data.skills\r\n        });\r\n      });\r\n    const token = localStorage.getItem(\"token\");\r\n    removeLocalStorageCharactersIfCookieIsMissing(token);\r\n  }\r\n  // COMMENTED OUT FOR TESTING PURPOSES\r\n\r\n  render() {\r\n    let computer;\r\n    console.log(this.props);\r\n    if (window.outerWidth / window.outerHeight < 0.85) {\r\n      console.log(\r\n        \"Imma Phone! Here is my width/height percentage\",\r\n        window.outerWidth / window.outerHeight\r\n      );\r\n      computer = false;\r\n    } else {\r\n      console.log(\r\n        \"Imma Computer! Here is my width/height percentage\",\r\n        window.outerWidth / window.outerHeight\r\n      );\r\n      computer = true;\r\n    }\r\n    localStorage.setItem(\"computer\", computer);\r\n    return (\r\n      <Router>\r\n        <main\r\n          style={{\r\n            backgroundImage: `linear-gradient(#${this.props.settings.background1} 60%, #${this.props.settings.background2})`,\r\n            height: \"100vh\",\r\n            backgroundAttachment: \"fixed\"\r\n          }}\r\n        >\r\n          <NavBar />\r\n          {this.props.tooltip.message && <Tooltip />}\r\n          {!!this.props.modal.length && <ModalSkeleton />}\r\n          {!!this.props.notifications.length && <Notifications />}\r\n          <Switch>\r\n            <Route exact path=\"/\" component={Home} />\r\n            <Route exact path=\"/classes\" component={Classes} />\r\n            <Route exact path=\"/login\" component={Login} />\r\n            <Route exact path=\"/signup\" component={SignUp} />\r\n            <Route exact path=\"/classes-form\" component={ClassForm} />\r\n            <Route exact path=\"/classes/:slug\" component={Class} />\r\n            <Route exact path=\"/ancestries\" component={Races} />\r\n            <Route exact path=\"/ancestries-form\" component={RaceForm} />\r\n            <Route exact path=\"/ancestries/:slug\" component={Race} />\r\n            <Route exact path=\"/skills\" component={Skills} />\r\n            <Route exact path=\"/skills-form\" component={SkillForm} />\r\n            <Route exact path=\"/skills/:slug\" component={Skill} />\r\n            <Route exact path=\"/spells\" component={Spells} />\r\n            <Route exact path=\"/creation\" component={CharacterCreation} />\r\n            <Route\r\n              exact\r\n              path=\"/characters/10001\"\r\n              component={CharacterContainer}\r\n            />\r\n            <Route exact path=\"/characters/:slug\" component={Character} />\r\n            <Route exact path=\"/campaigns/new\" component={NewCampaign} />\r\n            <Route path=\"/campaigns/:slug\" component={Campaign} />\r\n            <Route path=\"/how-to-build-a-feature\" component={HowToFeature} />\r\n          </Switch>\r\n        </main>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStatetoProps = state => {\r\n  return {\r\n    currentUser: state.currentUser,\r\n    admin: state.admin,\r\n    tooltip: state.tooltip,\r\n    modal: state.modal,\r\n    notifications: state.notifications,\r\n    settings: state.settings\r\n  };\r\n};\r\n\r\nexport default connect(mapStatetoProps)(App);\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import actionCable from 'actioncable'\r\nimport websocket from '../../websocket'\r\nimport { startWebsocketAction } from '../action_creator/websocket'\r\n\r\nconst Initialization = () => {\r\n\tconst Websocket = {}\r\n\tWebsocket.cable = actionCable.createConsumer(`${websocket}/cable`)\r\n\r\n\tstartWebsocketAction(Websocket)\r\n}\r\n// Initialization is used in index.js\r\n\r\nexport default Initialization\r\n","const websocket = () => {\r\n  let url = \"ws://websocket:3000\";\r\n  url = \"wss://characterfinder-api.herokuapp.com\";\r\n  return url;\r\n};\r\nexport default websocket();\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport Store from './store'\r\nimport Initialization from './utils/websocket/initialization'\r\n\r\n\r\n// import { createStore, applyMiddleware } from 'redux'\r\nimport { Provider } from 'react-redux'\r\n// import reducer from './reducer'\r\n// import reduxThunk from 'redux-thunk'\r\n// const Websocket = {}\r\n// Websocket.cable = actionCable.createConsumer(`${websocket}/cable`)\r\n\r\n\r\nInitialization()\r\n\r\n// const store = createStore(reducer, applyMiddleware(reduxThunk))\r\n\r\nReactDOM.render(\r\n  <Provider store={Store}>\r\n    <App/>\r\n  </Provider>, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}